http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-cloneContentshttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-insertNodehttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-surroundContentshttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-clonehttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-detachhttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-DocumentRange-idlhttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-DocumentRange-method-createRangehttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#RangeExceptionhttp://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#RangeExceptionCodefunction Range() {}Range.p ... tainer;Range.p ... ntainerRange.p ... Offset;Range.p ... tOffsetRange.p ... dOffsetRange.p ... lapsed;Range.p ... llapsedcommonA ... ntainerRange.p ... et) {};Range.p ... set) {}Range.p ... etStartRange.p ... .setEndRange.p ... de) {};Range.p ... ode) {}Range.p ... tBeforefunction(refNode) {}Range.p ... rtAfterRange.p ... dBeforeRange.p ... ndAfterRange.p ... rt) {};Range.p ... art) {}Range.p ... ollapsefunction(toStart) {}Range.p ... ectNodeRange.p ... ontentsRange.p ... RT = 0;Range.p ... ART = 0Range.p ... O_STARTRange.p ... ND = 1;Range.p ... END = 1Range.p ... _TO_ENDRange.p ... ND = 2;Range.p ... END = 2Range.p ... RT = 3;Range.p ... ART = 3Range.p ... ge) {};Range.p ... nge) {}Range.p ... yPointscompare ... yPointsfunctio ... nge) {}Range.p ... ertNodefunction(newNode) {}Range.p ... nt) {};Range.p ... ent) {}Range.p ... neRangeRange.p ... .detachRangeEx ... e.code;RangeEx ... pe.codeRangeEx ... ototypeRangeEx ... RR = 1;RangeEx ... ERR = 1RangeEx ... NTS_ERRBAD_BOU ... NTS_ERRRangeEx ... RR = 2;RangeEx ... ERR = 2RangeEx ... YPE_ERRINVALID ... YPE_ERR/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_requestidlecallback.js
 * @fileoverview Definitions for cooperative scheduling of background tasks in
 * the browser. This spec is still very likely to change.
 *
 * @see https://w3c.github.io/requestidlecallback/
 * @see https://developers.google.com/web/updates/2015/08/27/using-requestidlecallback?hl=en
 * @externs
 
 * @typedef {{
 *   timeout: (number|undefined)
 * }}
 
 * Schedules a callback to run when the browser is idle.
 * @param {function(!IdleDeadline)} callback Called when the browser is idle.
 * @param {number|IdleCallbackOptions=} opt_options If set, gives the browser a time in ms by which
 *     it must execute the callback. No timeout enforced otherwise.
 * @return {number} A handle that can be used to cancel the scheduled callback.
 
 * Cancels a callback scheduled to run when the browser is idle.
 * @param {number} handle The handle returned by {@code requestIdleCallback} for
 *     the scheduled callback to cancel.
 * @return {undefined}
 
 * An interface for an object passed into the callback for
 * {@code requestIdleCallback} that remains up-to-date on the amount of idle
 * time left in the current time slice.
 * @interface
 
 * @return {number} The amount of idle time (milliseconds) remaining in the
 *     current time slice. Will always be positive or 0.
 /**\n *  ...  0.\n */
 * Whether the callback was forced to run due to a timeout. Specifically,
 * whether the callback was invoked by the idle callback timeout algorithm:
 * https://w3c.github.io/requestidlecallback/#dfn-invoke-idle-callback-timeout-algorithm
 * @type {boolean}
 IdleCallbackOptionsrequestIdleCallbackcancelIdleCallbackIdleDeadlinetimeRemainingdidTimeoutDefinitions for cooperative scheduling of background tasks in
the browser. This spec is still very likely to change.
*https://w3c.github.io/requestidlecallback/
https://developers.google.com/web/updates/2015/08/27/using-requestidlecallback?hl=en
{timeout: (number|undefined)}Schedules a callback to run when the browser is idle.Called when the browser is idle.
function (!IdleDeadline)!IdleDeadlineIf set, gives the browser a time in ms by which
it must execute the callback. No timeout enforced otherwise.
(number|IdleCallbackOptions)=(number|IdleCallbackOptions)A handle that can be used to cancel the scheduled callback.Cancels a callback scheduled to run when the browser is idle.The handle returned by {@code requestIdleCallback} for
the scheduled callback to cancel.
An interface for an object passed into the callback for
{@code requestIdleCallback} that remains up-to-date on the amount of idle
time left in the current time slice.The amount of idle time (milliseconds) remaining in the
current time slice. Will always be positive or 0.Whether the callback was forced to run due to a timeout. Specifically,
whether the callback was invoked by the idle callback timeout algorithm:
https://w3c.github.io/requestidlecallback/#dfn-invoke-idle-callback-timeout-algorithmvar Idl ... ptions;IdleDea ... n() {};IdleDea ... on() {}IdleDea ... mainingIdleDea ... ototypeIdleDea ... imeout;IdleDea ... Timeout/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_rtc.js
 * @fileoverview Definitions for components of the WebRTC browser API.
 * @see https://www.w3.org/TR/webrtc/
 * @see https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-19
 * @see https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API
 * @see https://www.w3.org/TR/mediacapture-streams/
 *
 * @externs
 * @author bemasc@google.com (Benjamin M. Schwartz)
 /**\n *  ... tz)\n */
 * @typedef {string}
 * @see {https://www.w3.org/TR/mediacapture-streams/
 *     #idl-def-MediaStreamTrackState}
 * In WebIDL this is an enum with values 'live', 'mute', and 'ended',
 * but there is no mechanism in Closure for describing a specialization of
 * the string type.
 /**\n *  ... pe.\n */ @const {?string}  @const {boolean} /** @co ... ean} */
 * @interface
 * @see https://w3c.github.io/mediacapture-image/#mediasettingsrange-section
 
 * @interface
 * @see https://www.w3.org/TR/mediacapture-streams/#idl-def-MediaTrackCapabilities
 * @see https://w3c.github.io/mediacapture-image/#mediatrackcapabilities-section
  @type {!Array<string>}  @type {!Array<boolean>}  @type {!MediaSettingsRange} /** @ty ... nge} */
 * @interface
 * @see https://www.w3.org/TR/mediacapture-streams/#media-track-settings
 * @see https://w3c.github.io/mediacapture-image/#mediatracksettings-section
  @type {!Array<{x: number, y: number}>} /** @ty ... r}>} */
 * @interface
 * @see https://w3c.github.io/mediacapture-main/#media-track-supported-constraints
 
 * @interface
 * @extends {EventTarget}
 * @see https://www.w3.org/TR/mediacapture-streams/#mediastreamtrack
 
 * @param {!function(!Array<!SourceInfo>)} callback
 * @return {undefined}
 * @deprecated Use MediaDevices.enumerateDevices().
 /**\n *  ... ().\n */
 * @type {string}
 * @see https://crbug.com/653531
 * @see https://wicg.github.io/mst-content-hint/
 /**\n *  ... nt/\n */
 * @type {MediaStreamTrackState}
 * Read only.
 
 * Applies the specified set of constraints to the track, if any specified; or
 * if no constraints are specified, removes all constraints from the track.
 *
 * @param {MediaTrackConstraints=} constraints Constraints to apply to the
 *   track.
 * @return {!Promise<void>} A |Promise| that is resolved when the constraints
 *   have been applied, or rejected if there was an error applying the
 *   constraints.
 /**\n *  ... ts.\n */
 * @return {!MediaStreamTrack}
  @return {!MediaTrackCapabilities} /** @re ... ies} */ @return {!MediaTrackConstraints} /** @re ... nts} */ @return {!MediaTrackSettings} /** @re ... ngs} */
 * @typedef {{track: MediaStreamTrack}}
 /**\n *  ... k}}\n */
 * @param {string} type
 * @param {!MediaStreamTrackEventInit} eventInitDict
 * @constructor
 * @extends {Event}
 * @see https://www.w3.org/TR/mediacapture-streams/#mediastreamtrackevent
 
 * @type {!MediaStreamTrack}
 * @const
 
 * @param {!MediaStream|!Array<!MediaStreamTrack>=} streamOrTracks
 * @constructor
 * @implements {EventTarget}
 * @see https://www.w3.org/TR/mediacapture-streams/#mediastream
 /**\n *  ... eam\n */
 * @override
 /**\n * @override\n */
 * TODO(bemasc): Remove this property.
 * @deprecated
 * @type {string}
 * @const
 
 * @return {!Array<!MediaStreamTrack>}
 
 * @param {string} trackId
 * @return {MediaStreamTrack}
 
 * @param {!MediaStreamTrack} track
 * @return {undefined}
 
 * @return {!MediaStream}
 
 * @deprecated
 * @type {boolean}
 
 * @deprecated
 * @type {?function(!Event)}
 
 * @type {?function(!MediaStreamTrackEvent)}
 
 * @deprecated
 * TODO(bemasc): Remove this method once browsers have updated to
 * MediaStreamTrack.stop().
 * @return {undefined}
 
 * @type {function(new: MediaStream,
 *                 (!MediaStream|!Array<!MediaStreamTrack>)=)}
 
 * @typedef {{tone: string}}
 * @see https://www.w3.org/TR/webrtc/#dom-rtcdtmftonechangeeventinit
 
 * @param {string} type
 * @param {!RTCDTMFToneChangeEventInit} eventInitDict
 * @constructor
 * @extends {Event}
 * @see https://www.w3.org/TR/webrtc/#dom-rtcdtmftonechangeevent
 
 * @interface
 * @see https://www.w3.org/TR/webrtc/#rtcdtmfsender
 
 * @param {string} tones
 * @param {number=} opt_duration
 * @param {number=} opt_interToneGap
 /**\n *  ... Gap\n */
 * @type {?function(!RTCDTMFToneChangeEvent)}
 
 * @interface
 * @see https://www.w3.org/TR/webrtc/#rtcrtpsender-interface
 
 * @const {!RTCDTMFSender}
 
 * @const {!MediaStreamTrack}
 
 * @param {!MediaStreamTrack} track
 
 * @return {!Object}
 
 * @param {!Object} params
 * @return {!Promise<undefined>}
 
 * @interface
 * @see https://www.w3.org/TR/webrtc/#dom-rtcrtpcontributingsource
 
 * @type {?number}
 
 * @type {?Date}
 
 * @interface
 * @see https://www.w3.org/TR/webrtc/#rtcrtpreceiver-interface
 
 * @return {!Array<!RTCRtpContributingSource>}
 
 * @see https://www.w3.org/TR/webrtc/#dom-rtcrtptransceiverinit
 * @record
 
 * The direction of the `RTCRtpTransceiver`. Defaults to "sendrecv".
 * @type {?RTCRtpTransceiverDirection|undefined}
 
 * The streams to add to the tranceiver's sender.
 * @type {?Array<!MediaStream>|undefined}
 
 * @type {?Array<!RTCRtpEncodingParameters>|undefined}
 
 * @see https://www.w3.org/TR/webrtc/#dom-rtcrtpencodingparameters
 * @record
 
 * @type {?number|undefined}
 
 * Possible values are "disabled" and "enabled".
 * @type {?string|undefined}
 
 * @type {?boolean|undefined}
 
 * Possible values are "very-low", "low" (default), "medium", and "high".
 * @type {?string|undefined}
 
 * @type {?string|number}
 
 * @type {?number|number}
 
 * @interface
 * @see https://www.w3.org/TR/webrtc/#rtcrtptransceiver-interface
 
 * @const {?string}
 
 * @const {!RTCRtpTransceiverDirection}
 
 * @const {?RTCRtpTransceiverDirection}
 
 * @param {!RTCRtpTransceiverDirection} direction
 
 * @const {?RTCRtpSender}
 
 * @const {?RTCRtpReceiver}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-longrange
 * @record
 
 * @type {number|undefined}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-doublerange
 * @record
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainbooleanparameters
 * @record
 
 * @type {boolean|undefined}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindomstringparameters
 * @record
 
 * @type {string|Array<string>|undefined}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindoublerange
 * @record
 * @extends {DoubleRange}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainlongrange
 * @record
 * @extends {LongRange}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainboolean
 * @typedef {boolean|ConstrainBooleanParameters}
 /**\n *  ... rs}\n */
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindomString
 * @typedef {string|Array<string>|ConstrainDOMStringParameters}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindouble
 * @typedef {number|ConstrainDoubleRange}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainlong
 * @typedef {number|ConstrainLongRange}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#dom-mediatrackconstraintset
 * @record
 * @private
 
 * @type {ConstrainBoolean|undefined}
 
 * @type {ConstrainDouble|undefined}
 
 * @type {ConstrainLong|undefined}
 
 * @type {ConstrainDOMString|undefined}
 
 * @record
 * @extends {MediaTrackConstraintSet}
 
 * @type {Array<!MediaTrackConstraintSet>|undefined}
 
 * @see https://w3c.github.io/mediacapture-main/getusermedia.html#media-track-constraints
 * @record
 
 * @type {boolean|MediaTrackConstraints|undefined}
 
 * @see {http://dev.w3.org/2011/webrtc/editor/getusermedia.html#
 *     navigatorusermediaerror-and-navigatorusermediaerrorcallback}
 * @interface
 
 * @type {number}
 * @deprecated Removed from the standard and some browsers.
 * @const
  1 /** 1 */
 * @type {number}
 * @deprecated Removed from the standard and some browsers.
 * Read only.
 
 * @type {string}
 * Read only.
 
 * @type {?string}
 * Read only.
 
 * @param {MediaStreamConstraints} constraints A MediaStreamConstraints object.
 * @param {function(!MediaStream)} successCallback
 *     A NavigatorUserMediaSuccessCallback function.
 * @param {function(!NavigatorUserMediaError)=} errorCallback A
 *     NavigatorUserMediaErrorCallback function.
 * @see http://dev.w3.org/2011/webrtc/editor/getusermedia.html
 * @see https://www.w3.org/TR/mediacapture-streams/
 * @return {undefined}
 
 * @param {string} type
 * @param {!Object} eventInitDict
 * @constructor
 
 * @type {?MediaStream}
 * @const
 
 * @record
 * @see https://www.w3.org/TR/mediastream-recording/#dictdef-mediarecorderoptions
  @type {(string|undefined)}  @type {(number|undefined)} 
 * @see https://www.w3.org/TR/mediastream-recording/#mediarecorder-api
 * @param {!MediaStream} stream
 * @param {MediaRecorderOptions=} options
 * @implements {EventTarget}
 * @constructor
 
 * @type {!MediaStream}
 
 * @type {(function(!Event)|undefined)}
 
 * @param {number=} timeslice
 
 * @interface
 * @see https://w3c.github.io/mediacapture-image/##photosettings-section
 
 * @interface
 * @see https://w3c.github.io/mediacapture-image/##photocapabilities-section
 
 * @type {!MediaSettingsRange}
 * @const
 
 * @type {!Array<!string>}
 * @const
 
 * @see https://w3c.github.io/mediacapture-image/
 * @param {!MediaStreamTrack} videoTrack
 * @constructor
 
 * @param {!PhotoSettings=} photoSettings
 * @return {!Promise<!Blob>}
 /**\n *  ... b>}\n */
 * @return {!Promise<!PhotoCapabilities>}
 
 * @return {!Promise<!ImageBitmap>}
 /**\n *  ... p>}\n */
 * @see https://www.w3.org/TR/webrtc/#rtctrackevent
 * @param {string} type
 * @param {!Object} eventInitDict
 * @constructor
 
 * @type {?RTCRtpReceiver}
 * @const
 
 * @type {?MediaStreamTrack}
 * @const
 
 * @type {?Array<!MediaStream>}
 * @const
 
 * @type {?RTCRtpTransceiver}
 * @const
 
 * @typedef {string}
 * @see https://www.w3.org/TR/mediacapture-streams/#idl-def-MediaDeviceKind
 * In WebIDL this is an enum with values 'audioinput', 'audiooutput', and
 * 'videoinput', but there is no mechanism in Closure for describing a
 * specialization of the string type.
 
 * Possible values are "sendrecv", "sendonly", "recvonly", and "inactive".
 * @typedef {string}
 * @see https://www.w3.org/TR/webrtc/#dom-rtcrtptransceiverdirection
  @const {!MediaDeviceKind} /** @co ... ind} */
 * @interface
 * @extends {EventTarget}
 * @see https://www.w3.org/TR/mediacapture-streams/#mediadevices
 /**\n *  ... ces\n */
 * @return {!Promise<!Array<!MediaDeviceInfo>>}
 
 * @see https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia
 * @param {!MediaStreamConstraints} constraints
 * @return {!Promise<!MediaStream>}
 
 * @see https://w3c.github.io/mediacapture-main/#dom-mediadevices-getsupportedconstraints
 * @return {!MediaTrackSupportedConstraints}
  @const {!MediaDevices} /** @co ... ces} */
 * @typedef {string}
 * @see https://www.w3.org/TR/webrtc/#rtcsdptype
 * In WebIDL this is an enum with values 'offer', 'pranswer', and 'answer',
 * but there is no mechanism in Closure for describing a specialization of
 * the string type.
 
 * @param {!Object=} descriptionInitDict The RTCSessionDescriptionInit
 * dictionary.  This optional argument may have type
 * {type:RTCSdpType, sdp:string}, but neither of these keys are required to be
 * present, and other keys are ignored, so the closest Closure type is Object.
 * @constructor
 * @see https://www.w3.org/TR/webrtc/#rtcsessiondescription-class
 
 * @type {?RTCSdpType}
 * @see https://www.w3.org/TR/webrtc/#dom-rtcsessiondescription-type
 
 * @type {?string}
 * @see https://www.w3.org/TR/webrtc/#dom-rtcsessiondescription-sdp
 /**\n *  ... sdp\n */
 * TODO(bemasc): Remove this definition once it is removed from the browser.
 * @param {string} label The label index (audio/video/data -> 0,1,2)
 * @param {string} sdp The ICE candidate in SDP text form
 * @constructor
 
 * @type {?string}
  @record /** @record */ @type {?string|undefined} 
 * @param {!RTCIceCandidateInit=} candidateInitDict  The RTCIceCandidateInit dictionary.
 * @constructor
 * @see https://www.w3.org/TR/webrtc/#rtcicecandidate-interface
 
 * @typedef {{urls: string}|{urls: !Array<!string>}}
 * @private
 * @see https://www.w3.org/TR/webrtc/#rtciceserver-dictionary
 * This dictionary type also has an optional key {credential: ?string}.
 /**\n *  ... g}.\n */
 * @interface
 * @private
 
 * @type {string|!Array<!string>}
 
 * This type, and several below it, are constructed as unions between records
 *
 * @typedef {RTCIceServerRecord_|RTCIceServerInterface_}
 * @private
 
 * @typedef {{
 *   iceServers: !Array<!RTCIceServer>,
 *   sdpSemantics: (string|undefined)
 * }}
 * @private
 
 * @type {!Array<!RTCIceServer>}
 
 * Allows specifying the SDP semantics. Valid values are "plan-b" and
 * "unified-plan".
 *
 * @see {@link https://webrtc.org/web-apis/chrome/unified-plan/}
 * @type {string|undefined}
 
 * @typedef {RTCConfigurationRecord_|RTCConfigurationInterface_}
 /**\n *  ... e_}\n */
 * @typedef {function(!RTCSessionDescription)}
 
 * @typedef {function(string)}
 
 * @typedef {function()}
 
 * @typedef {string}
 
 * @type {RTCIceCandidate}
 * @const
  Note: The specification of RTCStats types is still under development.// Note ... opment. Declarations here will be updated and removed to follow the development of// Decl ... ment of modern browsers, breaking compatibility with older versions as they become// mode ...  become obsolete.// obsolete.
 * @type {Date}
 * @const
 
 * @return {!Array<!string>}
 
 * @deprecated
 * @type {RTCStatsReport}
 * @const
  Note: Below are Map like methods supported by WebRTC statistics// Note ... tistics specification-compliant RTCStatsReport. Currently only implemented by// spec ... nted by Mozilla.// Mozilla. See https://www.w3.org/TR/webrtc/#rtcstatsreport-object for definition.// See  ... nition.
 * @param {function(this:SCOPE, Object, string, MAP)} callback
 * @param {SCOPE=} opt_thisObj The value of "this" inside callback function.
 * @this {MAP}
 * @template MAP,SCOPE
 * @readonly
 /**\n *  ... nly\n */
 * @param {string} key
 * @return {Object}
 * @readonly
 
 * @return {!IteratorIterable<string>}
 * @readonly
 
 * TODO(bemasc): Remove this type once it is no longer in use.  It has already
 * been removed from the specification.
 * @typedef {RTCStatsReport}
 * @deprecated
 
 * @return {!Array<!RTCStatsReport>}
 
 * @typedef {function(!RTCStatsResponse, MediaStreamTrack=)}
 
 * This type is not yet standardized, so the properties here only represent
 * the current capabilities of libjingle (and hence Chromium).
 * TODO(bemasc): Add a link to the relevant standard once MediaConstraint has a
 * standard definition.
 *
 * @interface
 * @private
 
 * @type {?boolean}
 
 * TODO(bemasc): Make this type public once it is defined in a standard.
 *
 * @typedef {Object|MediaConstraintSetInterface_}
 * @private
 
 * @type {?MediaConstraintSet_}
 /**\n *  ... t_}\n */
 * @type {?Array<!MediaConstraintSet_>}
 /**\n *  ... _>}\n */
 * This type is used extensively in
 * {@see http://dev.w3.org/2011/webrtc/editor/webrtc.html} but is not yet
 * defined.
 *
 * @typedef {Object|MediaConstraintsInterface_}
 
 * An enumerated string type (RTCDataChannelState) with values:
 * "connecting", "open", "closing", and "closed".
 * @type {string}
 * Read only.
 
 * @type {number}
 * Read only.
 
 * @type {?function(!MessageEvent<*>)}
 
 * @param {string|!Blob|!ArrayBuffer|!ArrayBufferView} data
 * @return {undefined}
 
 * @constructor
 * @extends {Event}
 * @private
 
 * @type {!RTCDataChannel}
 * Read only.
 
 * @typedef {{reliable: boolean}}
 
 * @typedef {Object}
 * @property {boolean=} [ordered=true]
 * @property {number=} maxPacketLifeTime
 * @property {number=} maxRetransmits
 * @property {string=} [protocol=""]
 * @property {boolean=} [negotiated=false]
 * @property {number=} id
 * @property {string=} [priority='low']
 * see https://www.w3.org/TR/webrtc/#dom-rtcdatachannelinit for documentation
 * Type inconsistencies due to Closure limitations:
 * maxPacketLifeTime should be UnsignedShort
 * maxRetransmits should be UnsignedShort
 * protocol should be USVString
 * id should be UnsignedShort
 * In WebIDL priority is an enum with values 'very-low', 'low',
 * 'medium' and 'high', but there is no mechanism in Closure for describing
 * a specialization of the string type.
 
 * @typedef {RTCDataChannelInitInterface_|RTCDataChannelInitRecord_|RTCDataChannelInitDictionary_}
 /**\n *  ... y_}\n */
 * @typedef {{expires: number}}
 
 * @param {RTCConfiguration} configuration
 * @param {!MediaConstraints=} constraints
 * @constructor
 * @implements {EventTarget}
 
 * @param {Object} keygenAlgorithm
 * @return {Promise<RTCCertificate>}
  NB: Until closure annotations support overloading, many of the following// NB:  ... llowing functions take odd unions of parameter types.  This is to support the various// func ... various api differences between browsers.  Generally, returning a promise means you// api  ... ans you don't take callback function parameters and draw any further parameters// don' ... ameters forward, and vice versa.// forw ...  versa.
 * @param {(!RTCSessionDescriptionCallback|!MediaConstraints)=}
 *    successCallbackOrConstraints
 * @param {!RTCPeerConnectionErrorCallback=} errorCallback
 * @param {!MediaConstraints=} constraints
 * @return {!Promise<!RTCSessionDescription>|undefined}
 
 * @param {!RTCSessionDescription} description
 * @param {!RTCVoidCallback=} successCallback
 * @param {!RTCPeerConnectionErrorCallback=} errorCallback
 * @return {!Promise<!RTCSessionDescription>}
 
 * @type {?RTCSessionDescription}
 * Read only.
 
 * @type {RTCSignalingState}
 * Read only.
 
 * @param {?RTCConfiguration=} configuration
 * @param {?MediaConstraints=} constraints
 * @return {undefined}
 
 * Void in Chrome for now, a promise that you can then/catch in Firefox.
 * @param {!RTCIceCandidate} candidate
 * @param {!RTCVoidCallback=} successCallback
 * @param {!function(DOMException)=} errorCallback
 * @return {!Promise|undefined}
 
 * @type {!RTCIceGatheringState}
 * Read only.
 
 * @type {!RTCIceConnectionState}
 * Read only.
 
 * @return {!Array<!MediaStream>}
 
 * @param {string} streamId
 * @return {MediaStream}
 
 * @return {!Array<!RTCRtpSender>}
 
 * @return {!Array<!RTCRtpReceiver>}
 
 * @param {?string} label
 * @param {RTCDataChannelInit=} dataChannelDict
 * @return {!RTCDataChannel}
 /**\n *  ... el}\n */
 * @param {!MediaStream} stream
 * @param {!MediaConstraints=} constraints
 * @return {undefined}
 
 * @param {!MediaStream} stream
 * @return {undefined}
 
 * @param {!MediaStreamTrack} track
 * @param {!MediaStream} stream
 * @param {...MediaStream} var_args Additional streams.
 * @return {!RTCRtpSender}
 
 * @param {!MediaStreamTrack|string} trackOrKind
 * @param {?RTCRtpTransceiverInit=} init
 * @return {!RTCRtpTransceiver}
 
 * Returns the list of transceivers are currently attached to this peer.
 *
 * @return {!Array<!RTCRtpTransceiver>}
 
 * @return {!RTCConfiguration}
 
 * @param {!RTCConfiguration} configuration
 * @return {undefined}
 
 * @param {!RTCRtpSender} sender
 * @return {undefined}
  TODO(bemasc): Add identity provider stuff once implementations exist// TODO ... s exist TODO(rjogrady): Per w3c spec, getStats() should always return a Promise.// TODO ... romise. Remove RTCStatsReport from the return value once Firefox supports that.// Remo ... s that.
 * Firefox' getstats is synchronous and returns a much simpler
 * {!RTCStatsReport} Map-like object.
 * @param {!RTCStatsCallback=} successCallback
 * @param {MediaStreamTrack=} selector
 * @return {undefined|!RTCStatsReport|!Promise<!RTCStatsReport>}
 
 * @type {?function(!RTCPeerConnectionIceEvent)}
 
 * @type {?function(!MediaStreamEvent)}
 
 * @type {?function(!RTCTrackEvent)}
 
 * @type {?function(!RTCDataChannelEvent)}
 
 * @interface
 * @param {RTCIceGatherer} iceGatherer
 * @see https://www.w3.org/TR/webrtc/#idl-def-rtcicetransport
 
 * @type {!RTCIceGatheringState}
 * @const
 
 * @return {RTCIceCandidate[]}
 /**\n *  ... []}\n */
 * @return {RTCIceCandidatePair}
 
 * @return {RTCIceParameters}
 
 * @param {!Event} e
 * @return {undefined}
 
 * @constructor
 * @param {!RTCIceGatherOptions} options
 * @see https://msdn.microsoft.com/en-us/library/mt433107(v=vs.85).aspx
 
 * @interface
 * @param {RTCIceTransport} iceTransport
 * @see https://www.w3.org/TR/webrtc/#idl-def-rtcdtlstransport
 
 * @type {RTCIceTransport}
 * @const
 
 * @return {ArrayBuffer[]}
 MediaStreamTrackStateSourceInfofacingMediaSettingsRangeMediaTrackCapabilitiesaspectRatioframeRatefacingModesampleRatesampleSizeechoCancellationlatencychannelCountdeviceIdgroupIdwhiteBalanceModeexposureModefocusModeexposureCompensationcolorTemperatureisobrightnesscontrastsaturationsharpnesstorchMediaTrackSettingspointsOfInterestMediaTrackSupportedConstraintsautoGainControlnoiseSuppressionMediaStreamTrackgetSourcesenabledcontentHintremoteonmuteonunmuteonoverconstrainedapplyConstraintsconstraintsgetCapabilitiesgetConstraintsgetSettingsMediaStreamTrackEventInitMediaStreamTrackEventeventInitDictstreamOrTracksgetAudioTracksgetVideoTracksgetTrackstrackIdaddTrackremoveTrackonactiveoninactiveonaddtrackonremovetrackwebkitMediaStreamRTCDTMFToneChangeEventInitRTCDTMFToneChangeEventtoneRTCDTMFSenderinsertDTMFtonesopt_durationopt_interToneGapontonechangetoneBufferRTCRtpSendertransportdtmfreplaceTrackgetParameterssetParametersRTCRtpContributingSourceRTCRtpReceivergetContributingSourcesgetSynchronizationSourcesRTCRtpTransceiverInitstreamssendEncodingsRTCRtpEncodingParameterscodecPayloadTypedtxptimemaxBitratemaxFramerateridscaleResolutionDownByRTCRtpTransceivermidstoppedcurrentDirectionsetDirectionreceiverLongRangeDoubleRangeConstrainBooleanParametersexactidealConstrainDOMStringParametersConstrainDoubleRangeConstrainLongRangeConstrainBooleanConstrainDOMStringConstrainDoubleConstrainLongMediaTrackConstraintSetMediaTrackConstraintsadvancedMediaStreamConstraintsaudiovideoNavigatorUserMediaErrorconstraintNamewebkitGetUserMediaMediaStreamEventMediaRecorderOptionsaudioBitsPerSecondvideoBitsPerSecondbitsPerSecondMediaRecorderonstartonstoponresumetimeslicerequestDataPhotoSettingsfillLightModeimageHeightimageWidthredEyeReductionPhotoCapabilitiesImageCapturevideoTracktakePhotophotoSettingsgetPhotoCapabilitiesgrabFrameRTCTrackEventtransceiverMediaDeviceKindRTCRtpTransceiverDirectionMediaDeviceInfoMediaDevicesenumerateDevicesgetUserMediagetSupportedConstraintsmediaDevicesRTCSdpTypeRTCSessionDescriptiondescriptionInitDictsdpIceCandidatetoSdpRTCIceCandidateInitcandidatesdpMidsdpMLineIndexusernameFragmentRTCIceCandidatecandidateInitDictRTCIceServerRecord_RTCIceServerInterface_urlscredentialRTCIceServerRTCConfigurationRecord_RTCConfigurationInterface_iceServerssdpSemanticsRTCConfigurationRTCSessionDescriptionCallbackRTCPeerConnectionErrorCallbackRTCVoidCallbackRTCSignalingStateRTCIceConnectionStateRTCIceGatheringStateRTCPeerConnectionIceEventRTCStatsReportlocalopt_thisObjRTCStatsElementRTCStatsResponseRTCStatsCallbackMediaConstraintSetInterface_OfferToReceiveAudioOfferToReceiveVideoDtlsSrtpKeyAgreementRtpDataChannelsMediaConstraintSet_MediaConstraintsInterface_mandatoryoptionalMediaConstraintsRTCDataChannelreliableRTCDataChannelEventchannelRTCDataChannelInitRecord_RTCDataChannelInitInterface_RTCDataChannelInitDictionary_RTCDataChannelInitRTCCertificateRTCPeerConnectionconfigurationgenerateCertificatekeygenAlgorithmcreateOffersuccessCallbackOrConstraintscreateAnswersetLocalDescriptionsetRemoteDescriptionlocalDescriptionremoteDescriptionsignalingStateupdateIceaddIceCandidateiceGatheringStateiceConnectionStategetLocalStreamsgetRemoteStreamsgetStreamByIdstreamIdgetSendersgetReceiverscreateDataChanneldataChannelDictaddStreamremoveStreamaddTransceivertrackOrKindgetTransceiversgetConfigurationsetConfigurationgetStatsonnegotiationneededonicecandidateonsignalingstatechangeonaddstreamontrackonremovestreamoniceconnectionstatechangeondatachannelwebkitRTCPeerConnectionmozRTCPeerConnectionRTCIceTransporticeGatherergatheringStategetLocalCandidatesgetRemoteCandidatesgetSelectedCandidatePairgetLocalParametersgetRemoteParametersonstatechangeongatheringstatechangeonselectedcandidatepairchangeRTCIceGathererRTCDtlsTransporticeTransportgetRemoteCertificatesDefinitions for components of the WebRTC browser API.
https://www.w3.org/TR/webrtc/
https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-19
https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API
https://www.w3.org/TR/mediacapture-streams/
*bemasc@google.com (Benjamin M. Schwartz){https://www.w3.org/TR/mediacapture-streams/
#idl-def-MediaStreamTrackState}
In WebIDL this is an enum with values 'live', 'mute', and 'ended',
but there is no mechanism in Closure for describing a specialization of
the string type.https://w3c.github.io/mediacapture-image/#mediasettingsrange-sectionhttps://www.w3.org/TR/mediacapture-streams/#idl-def-MediaTrackCapabilities
https://w3c.github.io/mediacapture-image/#mediatrackcapabilities-section!Array.<boolean>Array.<boolean>!MediaSettingsRangehttps://www.w3.org/TR/mediacapture-streams/#media-track-settings
https://w3c.github.io/mediacapture-image/#mediatracksettings-section!Array.<{x: number, y: number}>Array.<{x: number, y: number}>{x: number, y: number}https://w3c.github.io/mediacapture-main/#media-track-supported-constraintshttps://www.w3.org/TR/mediacapture-streams/#mediastreamtrack!function (!Array.<!SourceInfo>)function (!Array.<!SourceInfo>)!Array.<!SourceInfo>Array.<!SourceInfo>!SourceInfoUse MediaDevices.enumerateDevices().https://crbug.com/653531
https://wicg.github.io/mst-content-hint/Read only.Applies the specified set of constraints to the track, if any specified; or
if no constraints are specified, removes all constraints from the track.Constraints to apply to the
track.
MediaTrackConstraints=A |Promise| that is resolved when the constraints
have been applied, or rejected if there was an error applying the
constraints.!MediaStreamTrack!MediaTrackCapabilities!MediaTrackConstraints!MediaTrackSettings{track: MediaStreamTrack}!MediaStreamTrackEventInithttps://www.w3.org/TR/mediacapture-streams/#mediastreamtrackevent(!MediaStream|!Array.<!MediaStreamTrack>)=(!MediaStream|!Array.<!MediaStreamTrack>)!Array.<!MediaStreamTrack>Array.<!MediaStreamTrack>https://www.w3.org/TR/mediacapture-streams/#mediastreamTODO(bemasc): Remove this property.?function (!MediaStreamTrackEvent)function (!MediaStreamTrackEvent)!MediaStreamTrackEventTODO(bemasc): Remove this method once browsers have updated to
MediaStreamTrack.stop().
function (new: MediaStream, (!MediaStream|!Array.<!MediaStreamTrack>)=){tone: string}https://www.w3.org/TR/webrtc/#dom-rtcdtmftonechangeeventinit!RTCDTMFToneChangeEventInithttps://www.w3.org/TR/webrtc/#dom-rtcdtmftonechangeeventhttps://www.w3.org/TR/webrtc/#rtcdtmfsender?function (!RTCDTMFToneChangeEvent)function (!RTCDTMFToneChangeEvent)!RTCDTMFToneChangeEventhttps://www.w3.org/TR/webrtc/#rtcrtpsender-interface!RTCDTMFSenderhttps://www.w3.org/TR/webrtc/#dom-rtcrtpcontributingsource?Datehttps://www.w3.org/TR/webrtc/#rtcrtpreceiver-interface!Array.<!RTCRtpContributingSource>Array.<!RTCRtpContributingSource>!RTCRtpContributingSourcehttps://www.w3.org/TR/webrtc/#dom-rtcrtptransceiverinit
The direction of the `RTCRtpTransceiver`. Defaults to "sendrecv".(?RTCRtpTransceiverDirection|undefined)?RTCRtpTransceiverDirectionThe streams to add to the tranceiver's sender.(?Array.<!MediaStream>|undefined)?Array.<!MediaStream>Array.<!MediaStream>(?Array.<!RTCRtpEncodingParameters>|undefined)?Array.<!RTCRtpEncodingParameters>Array.<!RTCRtpEncodingParameters>!RTCRtpEncodingParametershttps://www.w3.org/TR/webrtc/#dom-rtcrtpencodingparameters
Possible values are "disabled" and "enabled".Possible values are "very-low", "low" (default), "medium", and "high".(?string|number)(?number|number)https://www.w3.org/TR/webrtc/#rtcrtptransceiver-interface!RTCRtpTransceiverDirection?RTCRtpSender?RTCRtpReceiverhttps://w3c.github.io/mediacapture-main/getusermedia.html#dom-longrange
https://w3c.github.io/mediacapture-main/getusermedia.html#dom-doublerange
https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainbooleanparameters
https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindomstringparameters
(string|Array.<string>|undefined)https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindoublerange
https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainlongrange
https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainboolean
(boolean|ConstrainBooleanParameters)https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindomString
(string|Array.<string>|ConstrainDOMStringParameters)https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constraindouble
(number|ConstrainDoubleRange)https://w3c.github.io/mediacapture-main/getusermedia.html#dom-constrainlong
(number|ConstrainLongRange)https://w3c.github.io/mediacapture-main/getusermedia.html#dom-mediatrackconstraintset
(ConstrainBoolean|undefined)(ConstrainDouble|undefined)(ConstrainLong|undefined)(ConstrainDOMString|undefined)(Array.<!MediaTrackConstraintSet>|undefined)Array.<!MediaTrackConstraintSet>!MediaTrackConstraintSethttps://w3c.github.io/mediacapture-main/getusermedia.html#media-track-constraints
(boolean|MediaTrackConstraints|undefined){http://dev.w3.org/2011/webrtc/editor/getusermedia.html#
navigatorusermediaerror-and-navigatorusermediaerrorcallback}
Removed from the standard and some browsers.
Removed from the standard and some browsers.
Read only.A MediaStreamConstraints object.
A NavigatorUserMediaSuccessCallback function.
function (!MediaStream)A
NavigatorUserMediaErrorCallback function.
function (!NavigatorUserMediaError)=function (!NavigatorUserMediaError)!NavigatorUserMediaErrorhttp://dev.w3.org/2011/webrtc/editor/getusermedia.html
https://www.w3.org/TR/mediacapture-streams/
?MediaStreamhttps://www.w3.org/TR/mediastream-recording/#dictdef-mediarecorderoptionshttps://www.w3.org/TR/mediastream-recording/#mediarecorder-api
MediaRecorderOptions=(function (!Event)|undefined)https://w3c.github.io/mediacapture-image/##photosettings-sectionhttps://w3c.github.io/mediacapture-image/##photocapabilities-section!Array.<!string>Array.<!string>https://w3c.github.io/mediacapture-image/
!PhotoSettings=!PhotoSettings!Promise.<!PhotoCapabilities>Promise.<!PhotoCapabilities>!PhotoCapabilities!Promise.<!ImageBitmap>Promise.<!ImageBitmap>!ImageBitmapImageBitmaphttps://www.w3.org/TR/webrtc/#rtctrackevent
?MediaStreamTrack?RTCRtpTransceiverhttps://www.w3.org/TR/mediacapture-streams/#idl-def-MediaDeviceKind
In WebIDL this is an enum with values 'audioinput', 'audiooutput', and
'videoinput', but there is no mechanism in Closure for describing a
specialization of the string type.Possible values are "sendrecv", "sendonly", "recvonly", and "inactive".https://www.w3.org/TR/webrtc/#dom-rtcrtptransceiverdirection!MediaDeviceKindhttps://www.w3.org/TR/mediacapture-streams/#mediadevices!Promise.<!Array.<!MediaDeviceInfo>>Promise.<!Array.<!MediaDeviceInfo>>!Array.<!MediaDeviceInfo>Array.<!MediaDeviceInfo>!MediaDeviceInfohttps://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia
!MediaStreamConstraints!Promise.<!MediaStream>Promise.<!MediaStream>https://w3c.github.io/mediacapture-main/#dom-mediadevices-getsupportedconstraints
!MediaTrackSupportedConstraints!MediaDeviceshttps://www.w3.org/TR/webrtc/#rtcsdptype
In WebIDL this is an enum with values 'offer', 'pranswer', and 'answer',
but there is no mechanism in Closure for describing a specialization of
the string type.The RTCSessionDescriptionInit
dictionary.  This optional argument may have type
{type:RTCSdpType, sdp:string}, but neither of these keys are required to be
present, and other keys are ignored, so the closest Closure type is Object.
https://www.w3.org/TR/webrtc/#rtcsessiondescription-class?RTCSdpTypehttps://www.w3.org/TR/webrtc/#dom-rtcsessiondescription-typehttps://www.w3.org/TR/webrtc/#dom-rtcsessiondescription-sdpTODO(bemasc): Remove this definition once it is removed from the browser.The label index (audio/video/data -> 0,1,2)
The ICE candidate in SDP text form
The RTCIceCandidateInit dictionary.
!RTCIceCandidateInit=!RTCIceCandidateInithttps://www.w3.org/TR/webrtc/#rtcicecandidate-interface({urls: string}|{urls: !Array.<!string>}){urls: string}{urls: !Array.<!string>}https://www.w3.org/TR/webrtc/#rtciceserver-dictionary
This dictionary type also has an optional key {credential: ?string}.(string|!Array.<!string>)This type, and several below it, are constructed as unions between records(RTCIceServerRecord_|RTCIceServerInterface_){iceServers: !Array.<!RTCIceServer>, sdpSemantics: (string|undefined)}!Array.<!RTCIceServer>Array.<!RTCIceServer>!RTCIceServerAllows specifying the SDP semantics. Valid values are "plan-b" and
"unified-plan".{@link https://webrtc.org/web-apis/chrome/unified-plan/}
(RTCConfigurationRecord_|RTCConfigurationInterface_)function (!RTCSessionDescription)!RTCSessionDescriptionfunction (this: SCOPE, Object, string, MAP)SCOPEThe value of "this" inside callback function.
SCOPE=MAP,SCOPE
readonly@readonly!IteratorIterable.<string>IteratorIterable.<string>TODO(bemasc): Remove this type once it is no longer in use.  It has already
been removed from the specification.!Array.<!RTCStatsReport>Array.<!RTCStatsReport>!RTCStatsReportfunction (!RTCStatsResponse, MediaStreamTrack=)!RTCStatsResponseMediaStreamTrack=This type is not yet standardized, so the properties here only represent
the current capabilities of libjingle (and hence Chromium).
TODO(bemasc): Add a link to the relevant standard once MediaConstraint has a
standard definition.TODO(bemasc): Make this type public once it is defined in a standard.(Object|MediaConstraintSetInterface_)?MediaConstraintSet_?Array.<!MediaConstraintSet_>Array.<!MediaConstraintSet_>!MediaConstraintSet_This type is used extensively in
{@see http://dev.w3.org/2011/webrtc/editor/webrtc.html} but is not yet
defined.(Object|MediaConstraintsInterface_)An enumerated string type (RTCDataChannelState) with values:
"connecting", "open", "closing", and "closed".(string|!Blob|!ArrayBuffer|!ArrayBufferView)!RTCDataChannel{reliable: boolean}@property[ordered=true]
maxPacketLifeTimemaxRetransmits[protocol=""]
[negotiated=false]
[priority='low']
see https://www.w3.org/TR/webrtc/#dom-rtcdatachannelinit for documentation
Type inconsistencies due to Closure limitations:
maxPacketLifeTime should be UnsignedShort
maxRetransmits should be UnsignedShort
protocol should be USVString
id should be UnsignedShort
In WebIDL priority is an enum with values 'very-low', 'low',
'medium' and 'high', but there is no mechanism in Closure for describing
a specialization of the string type.(RTCDataChannelInitInterface_|RTCDataChannelInitRecord_|RTCDataChannelInitDictionary_){expires: number}expires!MediaConstraints=!MediaConstraintsPromise.<RTCCertificate>(!RTCSessionDescriptionCallback|!MediaConstraints)=(!RTCSessionDescriptionCallback|!MediaConstraints)!RTCSessionDescriptionCallback!RTCPeerConnectionErrorCallback=!RTCPeerConnectionErrorCallback(!Promise.<!RTCSessionDescription>|undefined)!Promise.<!RTCSessionDescription>Promise.<!RTCSessionDescription>!RTCVoidCallback=!RTCVoidCallback?RTCSessionDescription?RTCConfiguration=?RTCConfiguration?MediaConstraints=?MediaConstraintsVoid in Chrome for now, a promise that you can then/catch in Firefox.!RTCIceCandidate!function (DOMException)=!function (DOMException)function (DOMException)(!Promise|undefined)!Promise!RTCIceGatheringState!RTCIceConnectionState!Array.<!MediaStream>!Array.<!RTCRtpSender>Array.<!RTCRtpSender>!RTCRtpSender!Array.<!RTCRtpReceiver>Array.<!RTCRtpReceiver>!RTCRtpReceiverRTCDataChannelInit=Additional streams.
...MediaStream(!MediaStreamTrack|string)?RTCRtpTransceiverInit=?RTCRtpTransceiverInit!RTCRtpTransceiverReturns the list of transceivers are currently attached to this peer.!Array.<!RTCRtpTransceiver>Array.<!RTCRtpTransceiver>!RTCConfigurationFirefox' getstats is synchronous and returns a much simpler
{!RTCStatsReport} Map-like object.!RTCStatsCallback=!RTCStatsCallback(undefined|!RTCStatsReport|!Promise.<!RTCStatsReport>)!Promise.<!RTCStatsReport>Promise.<!RTCStatsReport>?function (!RTCPeerConnectionIceEvent)function (!RTCPeerConnectionIceEvent)!RTCPeerConnectionIceEvent?function (!MediaStreamEvent)function (!MediaStreamEvent)!MediaStreamEvent?function (!RTCTrackEvent)function (!RTCTrackEvent)!RTCTrackEvent?function (!RTCDataChannelEvent)function (!RTCDataChannelEvent)!RTCDataChannelEventhttps://www.w3.org/TR/webrtc/#idl-def-rtcicetransportArray.<RTCIceCandidate>RTCIceCandidatePairRTCIceParameters!RTCIceGatherOptionsRTCIceGatherOptionshttps://msdn.microsoft.com/en-us/library/mt433107(v=vs.85).aspxhttps://www.w3.org/TR/webrtc/#idl-def-rtcdtlstransportArray.<ArrayBuffer>var Med ... kState;MediaSt ... ckStateSourceI ... e.kind;SourceI ... pe.kindSourceInfo.prototypeSourceI ... ype.id;SourceI ... type.idSourceI ... .label;SourceI ... e.labelSourceI ... facing;SourceI ... .facingMediaSe ... pe.max;MediaSe ... ype.maxMediaSe ... ototypeMediaSe ... pe.min;MediaSe ... ype.minMediaSe ... e.step;MediaSe ... pe.stepMediaTr ... ilitiesMediaTr ... .width;MediaTr ... e.widthMediaTr ... ototypeMediaTr ... height;MediaTr ... .heightMediaTr ... tRatio;MediaTr ... ctRatioMediaTr ... meRate;MediaTr ... ameRateMediaTr ... ngMode;MediaTr ... ingModeMediaTr ... volume;MediaTr ... .volumeMediaTr ... leRate;MediaTr ... pleRateMediaTr ... leSize;MediaTr ... pleSizeMediaTr ... lation;MediaTr ... llationMediaTr ... atency;MediaTr ... latencyMediaTr ... lCount;MediaTr ... elCountMediaTr ... viceId;MediaTr ... eviceIdMediaTr ... roupId;MediaTr ... groupIdMediaTr ... ceMode;MediaTr ... nceModeMediaTr ... reMode;MediaTr ... ureModeMediaTr ... usMode;MediaTr ... cusModeMediaTr ... sation;MediaTr ... nsationMediaTr ... eratureMediaTr ... ype.isoMediaTr ... ghtnessMediaTr ... ontrastMediaTr ... urationMediaTr ... arpnessMediaTr ... pe.zoomMediaTr ... e.torchMediaTr ... terest;MediaTr ... nterestMediaTr ... traintsMediaTr ... ontrol;MediaTr ... ControlMediaTr ... ession;MediaTr ... ressionMediaSt ... ck) {};MediaSt ... ack) {}MediaSt ... SourcesMediaSt ... e.kind;MediaSt ... pe.kindMediaSt ... ototypeMediaSt ... ype.id;MediaSt ... type.idMediaSt ... .label;MediaSt ... e.labelMediaSt ... nabled;MediaSt ... enabledMediaSt ... .muted;MediaSt ... e.mutedMediaSt ... ntHint;MediaSt ... entHintMediaSt ... remote;MediaSt ... .remoteMediaSt ... yState;MediaSt ... dyStateMediaSt ... onmute;MediaSt ... .onmuteMediaSt ... unmute;MediaSt ... nunmuteMediaSt ... nended;MediaSt ... onendedMediaSt ... rained;MediaSt ... trainedMediaSt ... ts) {};MediaSt ... nts) {}MediaSt ... traintsMediaSt ... n() {};MediaSt ... on() {}MediaSt ... e.cloneMediaSt ... pe.stopMediaSt ... ilitiesMediaSt ... ettingsvar Med ... ntInit;MediaSt ... entInitMediaSt ... ckEventMediaSt ... .track;MediaSt ... e.trackMediaSt ... re) {};MediaSt ... ure) {}MediaSt ... istenerMediaSt ... vt) {};MediaSt ... evt) {}MediaSt ... chEventMediaSt ... oTracksMediaSt ... tTracksMediaSt ... Id) {};MediaSt ... kId) {}MediaSt ... ackByIdfunction(trackId) {}MediaSt ... ddTrackfunction(track) {}MediaSt ... veTrackMediaSt ... .ended;MediaSt ... e.endedMediaSt ... active;MediaSt ... .activeMediaSt ... nactiveMediaSt ... dtrack;MediaSt ... ddtrackMediaSt ... etrack;MediaSt ... vetrackvar web ... Stream;var RTC ... ntInit;RTCDTMF ... entInitRTCDTMF ... geEventRTCDTMF ... e.tone;RTCDTMF ... pe.toneRTCDTMF ... ototypeRTCDTMF ... ap) {};RTCDTMF ... Gap) {}RTCDTMF ... ertDTMFfunctio ... Gap) {}RTCDTMF ... change;RTCDTMF ... echangeRTCDTMF ... Buffer;RTCDTMF ... eBufferfunctio ... ort) {}RTCRtpS ... e.dtmf;RTCRtpS ... pe.dtmfRTCRtpS ... ototypeRTCRtpS ... .track;RTCRtpS ... e.trackRTCRtpS ... ck) {};RTCRtpS ... ack) {}RTCRtpS ... ceTrackRTCRtpS ... n() {};RTCRtpS ... on() {}RTCRtpS ... ametersRTCRtpS ... ms) {};RTCRtpS ... ams) {}function(params) {}RTCRtpC ... gSourceRTCRtpC ... source;RTCRtpC ... .sourceRTCRtpC ... ototypeRTCRtpC ... estamp;RTCRtpC ... mestampRTCRtpR ... .track;RTCRtpR ... e.trackRTCRtpR ... ototypeRTCRtpR ... n() {};RTCRtpR ... on() {}RTCRtpR ... SourcesgetCont ... SourcesgetSync ... SourcesRTCRtpT ... verInitRTCRtpT ... ection;RTCRtpT ... rectionRTCRtpT ... ototypeRTCRtpT ... treams;RTCRtpT ... streamsRTCRtpT ... odings;RTCRtpT ... codingsfunctio ... rs() {}RTCRtpE ... ametersRTCRtpE ... adType;RTCRtpE ... oadTypeRTCRtpE ... ototypeRTCRtpE ... pe.dtx;RTCRtpE ... ype.dtxRTCRtpE ... active;RTCRtpE ... .activeRTCRtpE ... iority;RTCRtpE ... riorityRTCRtpE ... .ptime;RTCRtpE ... e.ptimeRTCRtpE ... itrate;RTCRtpE ... BitrateRTCRtpE ... merate;RTCRtpE ... amerateRTCRtpE ... pe.rid;RTCRtpE ... ype.ridRTCRtpE ... DownBy;RTCRtpE ... nDownByscaleRe ... nDownByRTCRtpT ... pe.mid;RTCRtpT ... ype.midRTCRtpT ... topped;RTCRtpT ... stoppedRTCRtpT ... on) {};RTCRtpT ... ion) {}RTCRtpT ... n() {};RTCRtpT ... on() {}RTCRtpT ... pe.stopRTCRtpT ... sender;RTCRtpT ... .senderRTCRtpT ... ceiver;RTCRtpT ... eceiverLongRan ... pe.max;LongRan ... ype.maxLongRange.prototypeLongRan ... pe.min;LongRan ... ype.minDoubleR ... pe.max;DoubleR ... ype.maxDoubleR ... ototypeDoubleR ... pe.min;DoubleR ... ype.minConstra ... ametersConstra ... .exact;Constra ... e.exactConstra ... ototypeConstra ... .ideal;Constra ... e.idealvar Con ... oolean;var Con ... String;var ConstrainDouble;var ConstrainLong;MediaTr ... aintSetMediaTr ... vanced;MediaTr ... dvancedMediaSt ... .audio;MediaSt ... e.audioMediaSt ... .video;MediaSt ... e.videoNavigat ... iaErrorNavigat ... DENIED;Navigat ... _DENIEDNavigat ... ototypeNavigat ... e.code;Navigat ... pe.codeNavigat ... e.name;Navigat ... pe.nameNavigat ... essage;Navigat ... messageNavigat ... ntName;Navigat ... intNameNavigat ... ck) {};Navigat ... ack) {}Navigat ... erMediaMediaSt ... stream;MediaSt ... .streamMediaRe ... imeTypeMediaRe ... ototypeMediaRe ... rSecondMediaRe ... re) {};MediaRe ... ure) {}MediaRe ... istenerMediaRe ... vt) {};MediaRe ... evt) {}MediaRe ... chEventMediaRe ... stream;MediaRe ... .streamMediaRe ... meType;MediaRe ... .state;MediaRe ... e.stateMediaRe ... nstart;MediaRe ... onstartMediaRe ... onstop;MediaRe ... .onstopMediaRe ... ilable;MediaRe ... ailableMediaRe ... npause;MediaRe ... onpauseMediaRe ... resume;MediaRe ... nresumeMediaRe ... nerror;MediaRe ... onerrorMediaRe ... Second;MediaRe ... ce) {};MediaRe ... ice) {}MediaRe ... e.startfunctio ... ice) {}MediaRe ... n() {};MediaRe ... on() {}MediaRe ... pe.stopMediaRe ... e.pauseMediaRe ... .resumeMediaRe ... estDataMediaRe ... pe) {};MediaRe ... ype) {}MediaRe ... pportedPhotoSe ... htMode;PhotoSe ... ghtModePhotoSe ... ototypePhotoSe ... Height;PhotoSe ... eHeightPhotoSe ... eWidth;PhotoSe ... geWidthPhotoSe ... uction;PhotoSe ... ductionPhotoCa ... uction;PhotoCa ... ductionPhotoCa ... ototypePhotoCa ... Height;PhotoCa ... eHeightPhotoCa ... eWidth;PhotoCa ... geWidthPhotoCa ... htMode;PhotoCa ... ghtModeImageCa ... gs) {};ImageCa ... ngs) {}ImageCa ... kePhotoImageCa ... ototypeImageCa ... n() {};ImageCa ... on() {}ImageCa ... ilitiesImageCa ... abFrameImageCa ... .track;ImageCa ... e.trackRTCTrac ... ceiver;RTCTrac ... eceiverRTCTrac ... ototypeRTCTrac ... .track;RTCTrac ... e.trackRTCTrac ... treams;RTCTrac ... streamsRTCTrac ... sceivervar MediaDeviceKind;var RTC ... ection;MediaDe ... viceId;MediaDe ... eviceIdMediaDe ... ototypeMediaDe ... e.kind;MediaDe ... pe.kindMediaDe ... .label;MediaDe ... e.labelMediaDe ... roupId;MediaDe ... groupIdMediaDe ... n() {};MediaDe ... on() {}MediaDe ... DevicesMediaDe ... nts) {}MediaDe ... erMediaMediaDe ... n()  {}MediaDe ... traintsgetSupp ... traintsfunction()  {}Navigat ... evices;Navigat ... Devicesvar RTCSdpType;RTCSess ... riptionRTCSess ... e.type;RTCSess ... pe.typeRTCSess ... ototypeRTCSess ... pe.sdp;RTCSess ... ype.sdpfunctio ... sdp) {}IceCand ... n() {};IceCand ... on() {}IceCand ... e.toSdpIceCand ... ototypeIceCand ... .label;IceCand ... e.labelRTCIceC ... didate;RTCIceC ... ndidateRTCIceC ... ototypeRTCIceC ... sdpMid;RTCIceC ... .sdpMidRTCIceC ... eIndex;RTCIceC ... neIndexRTCIceC ... agment;RTCIceC ... ragmentvar RTC ... ecord_;functio ... e_() {}RTCIceS ... erface_RTCIceS ... e.urls;RTCIceS ... pe.urlsRTCIceS ... ototypeRTCIceS ... ername;RTCIceS ... sernameRTCIceS ... ential;RTCIceS ... dentialvar RTCIceServer;RTCConf ... Record_RTCConf ... erface_RTCConf ... ervers;RTCConf ... ServersRTCConf ... ototypeRTCConf ... antics;RTCConf ... manticsvar RTC ... ration;var RTC ... llback;RTCSess ... allbackRTCPeer ... allbackvar RTCVoidCallback;var RTC ... gState;var RTC ... nState;RTCIceC ... onStateRTCPeer ... ceEventRTCPeer ... didate;RTCPeer ... ndidateRTCPeer ... ototypeRTCStat ... estamp;RTCStat ... mestampRTCStat ... ototypeRTCStat ... n() {};RTCStat ... on() {}RTCStat ... e.namesRTCStat ... me) {};RTCStat ... ame) {}RTCStat ... pe.statRTCStat ... .local;RTCStat ... e.localRTCStat ... remote;RTCStat ... .remoteRTCStat ... e.type;RTCStat ... pe.typeRTCStat ... ype.id;RTCStat ... type.idRTCStat ... bj) {};RTCStat ... Obj) {}RTCStat ... forEachRTCStat ... ey) {};RTCStat ... key) {}RTCStat ... ype.getRTCStat ... pe.keysvar RTCStatsElement;RTCStat ... .resultMediaCo ... erface_MediaCo ... eAudio;MediaCo ... veAudioMediaCo ... ototypeMediaCo ... eVideo;MediaCo ... veVideoMediaCo ... eement;MediaCo ... reementMediaCo ... annels;MediaCo ... hannelsvar Med ... ntSet_;MediaCo ... datory;MediaCo ... ndatoryMediaCo ... tional;MediaCo ... ptionalvar Med ... raints;RTCData ... .label;RTCData ... e.labelRTCData ... ototypeRTCData ... liable;RTCData ... eliableRTCData ... yState;RTCData ... dyStateRTCData ... Amount;RTCData ... dAmountRTCData ... onopen;RTCData ... .onopenRTCData ... nerror;RTCData ... onerrorRTCData ... nclose;RTCData ... oncloseRTCData ... n() {};RTCData ... on() {}RTCData ... e.closeRTCData ... essage;RTCData ... messageRTCData ... ryType;RTCData ... aryTypeRTCData ... ta) {};RTCData ... ata) {}RTCData ... pe.sendRTCData ... hannel;RTCData ... channelRTCData ... Record_RTCData ... erface_var RTC ... onary_;RTCData ... ionary_var RTC ... elInit;var RTCCertificate;RTCPeer ... hm) {};RTCPeer ... thm) {}RTCPeer ... ificateRTCPeer ... re) {};RTCPeer ... ure) {}RTCPeer ... istenerRTCPeer ... vt) {};RTCPeer ... evt) {}RTCPeer ... chEventRTCPeer ... ts) {};RTCPeer ... nts) {}RTCPeer ... teOffersuccess ... traintsRTCPeer ... eAnswerRTCPeer ... ck) {};RTCPeer ... ack) {}RTCPeer ... riptionRTCPeer ... iption;RTCPeer ... gState;RTCPeer ... ngStateRTCPeer ... dateIceRTCPeer ... nState;RTCPeer ... onStateRTCPeer ... n() {};RTCPeer ... on() {}RTCPeer ... StreamsRTCPeer ... Id) {};RTCPeer ... mId) {}RTCPeer ... eamByIdRTCPeer ... SendersRTCPeer ... ceiversRTCPeer ... ct) {};RTCPeer ... ict) {}RTCPeer ... ChannelRTCPeer ... dStreamRTCPeer ... am) {};RTCPeer ... eam) {}RTCPeer ... eStreamRTCPeer ... gs) {};RTCPeer ... rgs) {}RTCPeer ... ddTrackRTCPeer ... it) {};RTCPeer ... nit) {}RTCPeer ... sceiverRTCPeer ... urationRTCPeer ... on) {};RTCPeer ... ion) {}RTCPeer ... er) {};RTCPeer ... der) {}RTCPeer ... veTrackfunction(sender) {}RTCPeer ... or) {};RTCPeer ... tor) {}RTCPeer ... etStatsRTCPeer ... e.closeRTCPeer ... needed;RTCPeer ... nneededRTCPeer ... change;RTCPeer ... echangeonsigna ... echangeRTCPeer ... stream;RTCPeer ... dstreamRTCPeer ... ntrack;RTCPeer ... ontrackRTCPeer ... estreamoniceco ... echangeRTCPeer ... hannel;RTCPeer ... channelvar web ... ection;webkitR ... nectionvar moz ... ection;mozRTCP ... nectionfunctio ... rer) {}RTCIceT ... gState;RTCIceT ... ngStateRTCIceT ... ototypeRTCIceT ... on(){};RTCIceT ... ion(){}RTCIceT ... didatesfunction(){}RTCIceT ... atePairgetSele ... atePairRTCIceT ... ametersRTCIceT ... n(e){};RTCIceT ... on(e){}RTCIceT ... echangefunction(e){}ongathe ... echangeRTCIceT ... rchangeonselec ... rchangeRTCDtls ... nsport;RTCDtls ... ansportRTCDtls ... ototypeRTCDtls ... n() {};RTCDtls ... on() {}RTCDtls ... ficatesgetRemo ... ficatesRTCDtls ... n(e){};RTCDtls ... on(e){}RTCDtls ... echange/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_screen_orientation.js
 * @fileoverview Definitions for W3C's Screen Orientation API.
 * @see https://w3c.github.io/screen-orientation/
 *
 * @externs
 
 * @interface
 * @extends {EventTarget}
 * @see https://w3c.github.io/screen-orientation/#screenorientation-interface
 
 * @param {string} orientation
 * @return {!Promise<void>}
 
 * @type {?ScreenOrientation}
 * @see https://w3c.github.io/screen-orientation/#extensions-to-the-screen-interface
 ScreenOrientationunlockDefinitions for W3C's Screen Orientation API.
https://w3c.github.io/screen-orientation/
*https://w3c.github.io/screen-orientation/#screenorientation-interface?ScreenOrientationhttps://w3c.github.io/screen-orientation/#extensions-to-the-screen-interfacevar Scr ... n() {};ScreenO ... on() {}ScreenO ... on) {};ScreenO ... ion) {}ScreenO ... pe.lockScreenO ... ototypeScreenO ... n() {};ScreenO ... .unlockScreenO ... e.type;ScreenO ... pe.typeScreenO ... .angle;ScreenO ... e.angleScreenO ... change;ScreenO ... nchangeScreen. ... tation;Screen. ... ntation/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_selectors.js
 * @fileoverview Definitions for W3C's Selectors API.
 *  This file depends on w3c_dom1.js.
 *  @see http://www.w3.org/TR/selectors-api2/
 *
 * @externs
 
 * @param {string} selectors
 * @return {?Element}
 * @override
 * @nosideeffects
 
 * @param {string} selectors
 * @return {!NodeList<!Element>}
 * @override
 * @nosideeffects
 
 * https://dom.spec.whatwg.org/#dom-element-closest
 * https://developer.mozilla.org/en-US/docs/Web/API/Element.closest
 * @param {string} selectors
 * @return {?Element}
 * @nosideeffects
 
 * https://dom.spec.whatwg.org/#dom-element-matches
 * https://developer.mozilla.org/en-US/docs/Web/API/Element.matches
 * @param {string} selectors
 * @return {boolean}
 * @nosideeffects
 
 * @param {string} selectors
 * @param {(Node|NodeList<?>)=} refNodes
 * @return {boolean}
 * @nosideeffects
 
 * @see https://developer.mozilla.org/en/DOM/Node.mozMatchesSelector
 * @param {string} selectors
 * @return {boolean}
 * @nosideeffects
 
 * @see http://developer.apple.com/library/safari/documentation/WebKit/Reference/ElementClassRef/Element/Element.html
 * @param {string} selectors
 * @return {boolean}
 * @nosideeffects
 
 * @see http://msdn.microsoft.com/en-us/library/ff975201.aspx
 * @param {string} selectors
 * @return {boolean}
 * @nosideeffects
 
 * @see http://www.opera.com/docs/changelogs/windows/1150/
 * @param {string} selectors
 * @return {boolean}
 * @nosideeffects
 selectorsmatchesSelectorrefNodesmozMatchesSelectorwebkitMatchesSelectormsMatchesSelectoroMatchesSelectorDefinitions for W3C's Selectors API.
This file depends on w3c_dom1.js.
http://www.w3.org/TR/selectors-api2/
*https://dom.spec.whatwg.org/#dom-element-closest
https://developer.mozilla.org/en-US/docs/Web/API/Element.closesthttps://dom.spec.whatwg.org/#dom-element-matches
https://developer.mozilla.org/en-US/docs/Web/API/Element.matcheshttps://developer.mozilla.org/en/DOM/Node.mozMatchesSelector
http://developer.apple.com/library/safari/documentation/WebKit/Reference/ElementClassRef/Element/Element.html
http://msdn.microsoft.com/en-us/library/ff975201.aspx
http://www.opera.com/docs/changelogs/windows/1150/
Documen ... rs) {};Documen ... ors) {}Documen ... electorDocumen ... ctorAllElement ... rs) {};Element ... ors) {}Element ... electorElement ... ctorAllElement ... closestElement ... matchesElement ... es) {};Element ... des) {}functio ... des) {}webkitM ... elector/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_serviceworker.js
 * @fileoverview Externs for service worker.
 *
 * @see http://www.w3.org/TR/service-workers/
 * @externs
 
 * @see http://www.w3.org/TR/service-workers/#service-worker-interface
 * @constructor
 * @extends {Worker}
  @type {ServiceWorkerState} 
 *  Set of possible string values: 'installing', 'installed', 'activating',
 * 'activated', 'redundant'.
 *  @typedef {string}
 
 * @see https://w3c.github.io/push-api/
 * @constructor
 
 * Please note there is an intent to deprecate this field in Chrome 43 or 44.
 * See https://www.chromestatus.com/feature/5283829761703936.
 * @type {string}
  @return {!Promise<boolean>} /** @re ... an>} */ @enum {string} /** @en ... ing} */ This is commented out since it has not been implemented yet in Chrome beta.// This ... e beta. Uncomment once it is available.// Unco ... ilable. var PushPermissionStatus  = {// var  ... us  = {  GRANTED: 'granted',//  GRA ... anted',  DENIED: 'denied',//  DEN ... enied',  DEFAULT: 'default'//  DEF ... efault'};//};
 * @see https://w3c.github.io/push-api/#idl-def-PushManager
 * @constructor
 
 * @param {PushSubscriptionOptions=} opt_options
 * @return {!Promise<PushSubscription>}
  @return {!Promise<PushSubscription>} /** @re ... on>} */ @return {!Promise<PushPermissionStatus>} /** @re ... us>} */ PushManager.prototype.hasPermission = function() {};// Push ... n() {};
 * @typedef {{userVisibleOnly: (boolean|undefined)}}
 * @see https://w3c.github.io/push-api/#idl-def-PushSubscriptionOptions
 
 * @see http://www.w3.org/TR/push-api/#idl-def-PushMessageData
 * @constructor
  @return {!ArrayBuffer} /** @re ... fer} */ @return {!Blob} /** @re ... lob} */ @return {*} /** @return {*} */ @return {string} /** @re ... ing} */
 * @see http://www.w3.org/TR/push-api/#idl-def-PushEvent
 * @constructor
 * @param {string} type
 * @param {!ExtendableEventInit=} opt_eventInitDict
 * @extends {ExtendableEvent}
  @type {?PushMessageData} /** @ty ... ata} */
 * @see http://www.w3.org/TR/service-workers/#service-worker-registration-interface
 * @interface
 * @extends {EventTarget}
  @type {ServiceWorker} /** @ty ... ker} */ @return {!Promise<void>} /** @re ... id>} */
 * @see https://w3c.github.io/push-api/
 * @type {!PushManager}
 
 * @see https://notifications.spec.whatwg.org/#service-worker-api
 * @param {string} title
 * @param {NotificationOptions=} opt_options
 * @return {!Promise<void>}
 
 * @see https://notifications.spec.whatwg.org/#service-worker-api
 * @param {!GetNotificationOptions=} opt_filter
 * @return {!Promise<?Array<?Notification>>}
 
 * @see http://www.w3.org/TR/service-workers/#service-worker-container-interface
 * @interface
 * @extends {EventTarget}
  @type {?ServiceWorker}  @type {!Promise<!ServiceWorkerRegistration>} /** @ty ... on>} */
 * @param {string} scriptURL
 * @param {RegistrationOptions=} opt_options
 * @return {!Promise<!ServiceWorkerRegistration>}
 
 * @param {string=} opt_documentURL
 * @return {!Promise<!ServiceWorkerRegistration|undefined>}
 
 * @return {!Promise<Array<!ServiceWorkerRegistration>>}
  @type {?function(!ErrorEvent)} 
 * @typedef {{scope: (string|undefined), useCache: (boolean|undefined)}}
  @type {!ServiceWorkerContainer} /** @ty ... ner} */
 * @see http://www.w3.org/TR/service-workers/#service-worker-global-scope-interface
 * @interface
 * @extends {WorkerGlobalScope}
  @type {!Cache}  @type {!CacheStorage} /** @ty ... age} */ @type {!ServiceWorkerClients} /** @ty ... nts} */ @type {!ServiceWorkerRegistration}  @type {!Console} /** @ty ... ole} */ @type {?function(!InstallEvent)}  @type {?function(!ExtendableEvent)}  @type {?function(!FetchEvent)} 
 * TODO(mtragut): This handler should get a custom event in the future.
 * @type {?function(!Event)}
  @type {?function(!MessageEvent)} 
 * @see http://www.w3.org/TR/service-workers/#service-worker-client-interface
 * @constructor
  @type {!Promise<void>} /** @ty ... id>} */ @type {VisibilityState} 
 * // TODO(mtragut): Possibly replace the type with enum ContextFrameType once
 * the enum is defined.
 * @type {string}
 
 * @param {*} message
 * @param {(!Array<!Transferable>|undefined)=} opt_transfer
 * @return {undefined}
  @return {!Promise} /** @re ... ise} */
 * @see http://www.w3.org/TR/service-workers/#service-worker-clients-interface
 * @interface
 
 * Deprecated in Chrome M43+, use matchAll instead. Reference:
 * https://github.com/slightlyoff/ServiceWorker/issues/610.
 * TODO(joeltine): Remove when getAll is fully deprecated.
 * @param {ServiceWorkerClientQueryOptions=} opt_options
 * @return {!Promise<!Array<!ServiceWorkerClient>>}
 
 * @param {ServiceWorkerClientQueryOptions=} opt_options
 * @return {!Promise<!Array<!ServiceWorkerClient>>}
 
 * @return {!Promise<void>}
 
 * @param {string} url
 * @return {!Promise<!ServiceWorkerClient>}
  @typedef {{includeUncontrolled: (boolean|undefined)}} /** @ty ... d)}} */
 * @see http://www.w3.org/TR/service-workers/#cache-interface
 * @interface
 
 * @param {!RequestInfo} request
 * @param {CacheQueryOptions=} opt_options
 * @return {!Promise<!Response|undefined>}
 
 * @param {RequestInfo=} opt_request
 * @param {CacheQueryOptions=} opt_options
 * @return {!Promise<!Array<!Response>>}
 
 * @param {!RequestInfo} request
 * @return {!Promise<void>}
 
 * @param {!Array<!RequestInfo>} requests
 * @return {!Promise<void>}
 
 * @param {!RequestInfo} request
 * @param {!Response} response
 * @return {!Promise<void>}
 
 * @param {!RequestInfo} request
 * @param {CacheQueryOptions=} opt_options
 * @return {!Promise<boolean>}
 
 * @param {RequestInfo=} opt_request
 * @param {CacheQueryOptions=} opt_options
 * @return {!Promise<!Array<!Request>>}
 
 * @typedef {{
 *   ignoreSearch: (boolean|undefined),
 *   ignoreMethod: (boolean|undefined),
 *   ignoreVary: (boolean|undefined),
 *   prefixMatch: (boolean|undefined),
 *   cacheName: (string|undefined)
 * }}
 
 * @see http://www.w3.org/TR/service-workers/#cache-storage-interface
 * @interface
 
 * Window instances have a property called caches which implements CacheStorage
 * @see https://www.w3.org/TR/service-workers/#cache-objects
 * @type {!CacheStorage}
 
 * @param {string} cacheName
 * @return {!Promise<boolean>}
 
 * @param {string} cacheName
 * @return {!Promise<!Cache>}
  @return {!Promise<!Array<string>>} 
 * @see http://www.w3.org/TR/service-workers/#extendable-event-interface
 * @constructor
 * @param {string} type
 * @param {ExtendableEventInit=} opt_eventInitDict
 * @extends {Event}
 
 * @param {IThenable} f
 * @return {undefined}
 
 * @typedef {{
 *   bubbles: (boolean|undefined),
 *   cancelable: (boolean|undefined)
 * }}
 
 * @see http://www.w3.org/TR/service-workers/#install-event-interface
 * @constructor
 * @param {string} type
 * @param {InstallEventInit=} opt_eventInitDict
 * @extends {ExtendableEvent}
 
 * @typedef {{
 *   bubbles: (boolean|undefined),
 *   cancelable: (boolean|undefined),
 *   activeWorker: (!ServiceWorker|undefined)
 * }}
 
 * @see http://www.w3.org/TR/service-workers/#fetch-event-interface
 * @constructor
 * @param {string} type
 * @param {FetchEventInit=} opt_eventInitDict
 * @extends {Event}
  @type {!Request} /** @ty ... est} */ @type {!ServiceWorkerClient}  @type {!boolean} 
 * @param {(Response|Promise<Response>)} r
 * @return {undefined}
 
 * @param {string} url
 * @return {!Promise<!Response>}
 
 * @return {!Promise<!Response>}
 
 * @typedef {{
 *   bubbles: (boolean|undefined),
 *   cancelable: (boolean|undefined),
 *   request: (!Request|undefined),
 *   client: (!ServiceWorkerClient|undefined),
 *   isReload: (!boolean|undefined)
 * }}
 ServiceWorkerServiceWorkerStatePushSubscriptionendpointsubscriptionIdunsubscribePushManagersubscribegetSubscriptionPushSubscriptionOptionsPushMessageDataPushEventServiceWorkerRegistrationinstallingwaitingunregisteronupdatefoundpushManagershowNotificationgetNotificationsopt_filterServiceWorkerContainercontrollergetRegistrationopt_documentURLgetRegistrationsoncontrollerchangeRegistrationOptionsserviceWorkerServiceWorkerGlobalScopescriptCachecachesclientsregistrationskipWaitingoninstallonactivateonfetchonbeforeevictedonevictedServiceWorkerClientfocusedframeTypeServiceWorkerClientsmatchAllclaimopenWindowServiceWorkerClientQueryOptionsCacheopt_requestaddAllCacheQueryOptionsCacheStoragecacheNameExtendableEventwaitUntilExtendableEventInitInstallEventactiveWorkerInstallEventInitFetchEventclientisReloadrespondWithrforwardToFetchEventInitExterns for service worker.
*http://www.w3.org/TR/service-workers/
http://www.w3.org/TR/service-workers/#service-worker-interface
Set of possible string values: 'installing', 'installed', 'activating',
'activated', 'redundant'.https://w3c.github.io/push-api/
Please note there is an intent to deprecate this field in Chrome 43 or 44.
See https://www.chromestatus.com/feature/5283829761703936.!Promise.<boolean>Promise.<boolean>https://w3c.github.io/push-api/#idl-def-PushManager
PushSubscriptionOptions=!Promise.<PushSubscription>Promise.<PushSubscription>!Promise.<PushPermissionStatus>Promise.<PushPermissionStatus>PushPermissionStatus{userVisibleOnly: (boolean|undefined)}https://w3c.github.io/push-api/#idl-def-PushSubscriptionOptionshttp://www.w3.org/TR/push-api/#idl-def-PushMessageData
http://www.w3.org/TR/push-api/#idl-def-PushEvent
!ExtendableEventInit=!ExtendableEventInit?PushMessageDatahttp://www.w3.org/TR/service-workers/#service-worker-registration-interface
!PushManagerhttps://notifications.spec.whatwg.org/#service-worker-api
NotificationOptions=NotificationOptions!GetNotificationOptions=!GetNotificationOptionsGetNotificationOptions!Promise.<?Array.<?Notification>>Promise.<?Array.<?Notification>>?Array.<?Notification>Array.<?Notification>?NotificationNotificationhttp://www.w3.org/TR/service-workers/#service-worker-container-interface
?ServiceWorker!Promise.<!ServiceWorkerRegistration>Promise.<!ServiceWorkerRegistration>!ServiceWorkerRegistrationRegistrationOptions=!Promise.<(!ServiceWorkerRegistration|undefined)>Promise.<(!ServiceWorkerRegistration|undefined)>(!ServiceWorkerRegistration|undefined)!Promise.<Array.<!ServiceWorkerRegistration>>Promise.<Array.<!ServiceWorkerRegistration>>Array.<!ServiceWorkerRegistration>?function (!ErrorEvent)function (!ErrorEvent)!ErrorEvent{scope: (string|undefined), useCache: (boolean|undefined)}useCache!ServiceWorkerContainerhttp://www.w3.org/TR/service-workers/#service-worker-global-scope-interface
!Cache!CacheStorage!ServiceWorkerClients!Console?function (!InstallEvent)function (!InstallEvent)!InstallEvent?function (!ExtendableEvent)function (!ExtendableEvent)!ExtendableEvent?function (!FetchEvent)function (!FetchEvent)!FetchEventTODO(mtragut): This handler should get a custom event in the future.?function (!MessageEvent)function (!MessageEvent)!MessageEventhttp://www.w3.org/TR/service-workers/#service-worker-client-interface
// TODO(mtragut): Possibly replace the type with enum ContextFrameType once
the enum is defined.(!Array.<!Transferable>|undefined)=(!Array.<!Transferable>|undefined)http://www.w3.org/TR/service-workers/#service-worker-clients-interface
Deprecated in Chrome M43+, use matchAll instead. Reference:
https://github.com/slightlyoff/ServiceWorker/issues/610.
TODO(joeltine): Remove when getAll is fully deprecated.ServiceWorkerClientQueryOptions=!Promise.<!Array.<!ServiceWorkerClient>>Promise.<!Array.<!ServiceWorkerClient>>!Array.<!ServiceWorkerClient>Array.<!ServiceWorkerClient>!ServiceWorkerClient!Promise.<!ServiceWorkerClient>Promise.<!ServiceWorkerClient>{includeUncontrolled: (boolean|undefined)}includeUncontrolledhttp://www.w3.org/TR/service-workers/#cache-interface
CacheQueryOptions=!Promise.<(!Response|undefined)>Promise.<(!Response|undefined)>(!Response|undefined)RequestInfo=!Promise.<!Array.<!Response>>Promise.<!Array.<!Response>>!Array.<!Response>Array.<!Response>!Array.<!RequestInfo>Array.<!RequestInfo>!Promise.<!Array.<!Request>>Promise.<!Array.<!Request>>!Array.<!Request>Array.<!Request>{ignoreSearch: (boolean|undefined), ignoreMethod: (boolean|undefined), ignoreVary: (boolean|undefined), prefixMatch: (boolean|undefined), cacheName: (string|undefined)}ignoreSearchignoreMethodignoreVaryprefixMatchhttp://www.w3.org/TR/service-workers/#cache-storage-interface
Window instances have a property called caches which implements CacheStoragehttps://www.w3.org/TR/service-workers/#cache-objects
!Promise.<!Cache>Promise.<!Cache>!Promise.<!Array.<string>>Promise.<!Array.<string>>http://www.w3.org/TR/service-workers/#extendable-event-interface
ExtendableEventInit={bubbles: (boolean|undefined), cancelable: (boolean|undefined)}http://www.w3.org/TR/service-workers/#install-event-interface
InstallEventInit={bubbles: (boolean|undefined), cancelable: (boolean|undefined), activeWorker: (!ServiceWorker|undefined)}(!ServiceWorker|undefined)!ServiceWorkerhttp://www.w3.org/TR/service-workers/#fetch-event-interface
FetchEventInit=!boolean(Response|Promise.<Response>)Promise.<Response>{bubbles: (boolean|undefined), cancelable: (boolean|undefined), request: (!Request|undefined), client: (!ServiceWorkerClient|undefined), isReload: (!boolean|undefined)}(!Request|undefined)(!ServiceWorkerClient|undefined)(!boolean|undefined)Service ... iptURL;Service ... riptURLService ... ototypeService ... .state;Service ... e.stateService ... change;Service ... echangevar Ser ... State ;PushSub ... dpoint;PushSub ... ndpointPushSub ... ototypePushSub ... tionId;PushSub ... ptionIdPushSub ... n() {};PushSub ... on() {}PushSub ... bscribePushMan ... ns) {};PushMan ... ons) {}PushMan ... bscribePushMan ... ototypePushMan ... n() {};PushMan ... on() {}PushMan ... riptionvar Pus ... ptions;PushSub ... OptionsPushMes ... n() {};PushMes ... on() {}PushMes ... yBufferPushMes ... ototypePushMes ... pe.blobPushMes ... pe.jsonPushMes ... pe.textPushEve ... e.data;PushEve ... pe.dataPushEvent.prototypeService ... trationService ... alling;Service ... tallingService ... aiting;Service ... waitingService ... active;Service ... .activeService ... .scope;Service ... e.scopeService ... n() {};Service ... on() {}Service ... egisterService ... efound;Service ... tefoundService ... .updateService ... anager;Service ... ManagerService ... ns) {};Service ... ons) {}Service ... icationService ... er) {};Service ... ter) {}Service ... cationsService ... ntainerService ... roller;Service ... trollerService ... .ready;Service ... e.readyService ... RL) {};Service ... URL) {}functio ... URL) {}Service ... rationsService ... rchangeService ... nerror;Service ... onerrorvar Reg ... ptions;Navigat ... Worker;Navigat ... eWorkerService ... alScopeService ... tCache;Service ... ptCacheService ... caches;Service ... .cachesService ... lients;Service ... clientsService ... ration;Service ... WaitingService ... onsole;Service ... consoleService ... nstall;Service ... installService ... tivate;Service ... ctivateService ... nfetch;Service ... onfetchService ... victed;Service ... evictedService ... essage;Service ... messageService ... exedDB;Service ... dexedDBService ... hidden;Service ... .hiddenService ... ocused;Service ... focusedService ... yState;Service ... tyStateService ... pe.url;Service ... ype.urlService ... meType;Service ... ameTypeService ... fer) {}Service ... MessageService ... e.focusService ... .getAllService ... atchAllService ... e.claimService ... rl) {};Service ... url) {}Service ... nWindowvar Ser ... ptions;Service ... Optionsfunction Cache() {}Cache.p ... ns) {};Cache.p ... ons) {}Cache.p ... e.matchCache.prototypeCache.p ... atchAllCache.p ... st) {};Cache.p ... est) {}Cache.prototype.addfunction(request) {}Cache.p ... ts) {};Cache.p ... sts) {}Cache.p ... .addAllfunctio ... sts) {}Cache.p ... se) {};Cache.p ... nse) {}Cache.prototype.putfunctio ... nse) {}Cache.p ... .deleteCache.prototype.keysvar Cac ... ptions;Window. ... caches;Window. ... .cachesCacheSt ... ns) {};CacheSt ... ons) {}CacheSt ... e.matchCacheSt ... ototypeCacheSt ... me) {};CacheSt ... ame) {}CacheSt ... ype.hasCacheSt ... pe.openCacheSt ... .deleteCacheSt ... n() {};CacheSt ... on() {}CacheSt ... pe.keysExtenda ... (f) {};Extenda ... n(f) {}Extenda ... itUntilExtenda ... ototypefunction(f) {}var Ext ... ntInit;Extenda ... Worker;Extenda ... eWorkervar Ins ... ntInit;FetchEv ... equest;FetchEv ... requestFetchEvent.prototypeFetchEv ... client;FetchEv ... .clientFetchEv ... Reload;FetchEv ... sReloadFetchEv ... (r) {};FetchEv ... n(r) {}FetchEv ... ondWithfunction(r) {}FetchEv ... rl) {};FetchEv ... url) {}FetchEv ... rwardToFetchEv ... n() {};FetchEv ... on() {}FetchEv ... defaultvar FetchEventInit;/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_touch_event.js
 * @fileoverview Definitions for W3C's Touch Events specification.
 * @see http://www.w3.org/TR/touch-events/
 * @externs
 
 * @typedef {{
 *   identifier: number,
 *   target: !EventTarget,
 *   clientX: (number|undefined),
 *   clientY: (number|undefined),
 *   screenX: (number|undefined),
 *   screenY: (number|undefined),
 *   pageX: (number|undefined),
 *   pageY: (number|undefined),
 *   radiusX: (number|undefined),
 *   radiusY: (number|undefined),
 *   rotationAngle: (number|undefined),
 *   force: (number|undefined)
 * }}
 
 * The Touch class represents a single touch on the surface. A touch is the
 * presence or movement of a finger that is part of a unique multi-touch
 * sequence.
 * @see http://www.w3.org/TR/touch-events/#touch-interface
 * @param {!TouchInitDict} touchInitDict
 * @constructor
 
 * The x-coordinate of the touch's location relative to the window's viewport.
 * @type {number}
 
 * The y-coordinate of the touch's location relative to the window's viewport.
 * @type {number}
 
 * The unique identifier for this touch object.
 * @type {number}
 
 * The x-coordinate of the touch's location in page coordinates.
 * @type {number}
 
 * The y-coordinate of the touch's location in page coordinates.
 * @type {number}
 
 * The x-coordinate of the touch's location in screen coordinates.
 * @type {number}
 
 * The y-coordinate of the touch's location in screen coordinates.
 * @type {number}
 
 * The target of this touch.
 * @type {EventTarget}
 
 * @type {number}
 * @see http://www.w3.org/TR/touch-events-extensions/#widl-Touch-force
 
 * @type {number}
 * @see http://www.w3.org/TR/touch-events-extensions/#widl-Touch-radiusX
 /**\n *  ... usX\n */
 * @type {number}
 * @see http://www.w3.org/TR/touch-events-extensions/#widl-Touch-radiusY
 /**\n *  ... usY\n */
 * @type {number}
 * @see http://www.w3.org/TR/2011/WD-touch-events-20110505/#widl-Touch-rotationAngle
 
 * Creates a new Touch object.
 * @see http://www.w3.org/TR/touch-events/#widl-Document-createTouch-Touch-WindowProxy-view-EventTarget-target-long-identifier-long-pageX-long-pageY-long-screenX-long-screenY
 * @param {Window} view
 * @param {EventTarget} target
 * @param {number} identifier
 * @param {number} pageX
 * @param {number} pageY
 * @param {number} screenX
 * @param {number} screenY
 * @return {Touch}
 /**\n *  ... ch}\n */
 * The TouchList class is used to represent a collection of Touch objects.
 * @see http://www.w3.org/TR/touch-events/#touchlist-interface
 * @constructor
 * @implements {IArrayLike<!Touch>}
 /**\n *  ... h>}\n */
 * The number of Touch objects in this TouchList object.
 * @type {number}
 
 * Returns the Touch object at the given index.
 * @param {number} index
 * @return {?Touch}
 
 * @param {number} identifier
 * @return {?Touch}
 * @see http://www.w3.org/TR/touch-events-extensions/#widl-TouchList-identifiedTouch-Touch-long-identifier
 
 * Creates a new TouchList object.
 * @see http://www.w3.org/TR/touch-events/#widl-Document-createTouchList-TouchList-Touch-touches
 * @param {Array<?Touch>} touches
 * @return {TouchList}
 
 * @record
 * @extends {UIEventInit}
 /**\n *  ... it}\n */ @type {undefined|!Array<?Touch>} /** @ty ... ch>} */
 * The TouchEvent class encapsulates information about a touch event.
 *
 * <p>The system continually sends TouchEvent objects to an application as
 * fingers touch and move across a surface. A touch event provides a snapshot of
 * all touches during a multi-touch sequence, most importantly the touches that
 * are new or have changed for a particular target. A multi-touch sequence
 * begins when a finger first touches the surface. Other fingers may
 * subsequently touch the surface, and all fingers may move across the surface.
 * The sequence ends when the last of these fingers is lifted from the surface.
 * An application receives touch event objects during each phase of any touch.
 * </p>
 *
 * <p>The different types of TouchEvent objects that can occur are:
 * <ul>
 *   <li>touchstart - Sent when a finger for a given event touches the surface.
 *   <li>touchmove - Sent when a given event moves on the surface.
 *   <li>touchend - Sent when a given event lifts from the surface.
 *   <li>touchcancel - Sent when the system cancels tracking for the touch.
 * </ul>
 * TouchEvent objects are combined together to form high-level GestureEvent
 * objects that are also sent during a multi-touch sequence.</p>
 *
 * @see http://www.w3.org/TR/touch-events/#touchevent-interface
 * @param {string} type
 * @param {!TouchEventInit=} opt_eventInitDict
 * @extends {UIEvent}
 * @constructor
 
 * A collection of Touch objects representing all touches associated with this
 * target.
 * @type {TouchList}
 
 * A collection of Touch objects representing all touches that changed in this event.
 * @type {TouchList}
 
 * Specifies the JavaScript method to invoke when the system cancels tracking
 * for the touch.
 * @type {?function(!TouchEvent)}
 
 * Specifies the JavaScript method to invoke when a given event lifts from the
 * surface.
 * @type {?function(!TouchEvent)}
 
 * Specifies the JavaScript method to invoke when a finger for a given event
 * moves on the surface.
 * @type {?function(!TouchEvent)}
 
 * Specifies the JavaScript method to invoke when a finger for a given event
 * touches the surface.
 * @type {?function(!TouchEvent)}
 TouchInitDicttouchInitDictforcerotationAnglecreateTouchidentifiedTouchcreateTouchListTouchEventInitontouchcancelontouchendontouchmoveontouchstartDefinitions for W3C's Touch Events specification.
http://www.w3.org/TR/touch-events/
{identifier: number, target: !EventTarget, clientX: (number|undefined), clientY: (number|undefined), screenX: (number|undefined), screenY: (number|undefined), pageX: (number|undefined), pageY: (number|undefined), radiusX: (number|undefined), radiusY: (number|undefined), rotationAngle: (number|undefined), force: (number|undefined)}The Touch class represents a single touch on the surface. A touch is the
presence or movement of a finger that is part of a unique multi-touch
sequence.http://www.w3.org/TR/touch-events/#touch-interface
!TouchInitDictThe x-coordinate of the touch's location relative to the window's viewport.The y-coordinate of the touch's location relative to the window's viewport.The unique identifier for this touch object.The x-coordinate of the touch's location in page coordinates.The y-coordinate of the touch's location in page coordinates.The x-coordinate of the touch's location in screen coordinates.The y-coordinate of the touch's location in screen coordinates.The target of this touch.http://www.w3.org/TR/touch-events-extensions/#widl-Touch-forcehttp://www.w3.org/TR/touch-events-extensions/#widl-Touch-radiusXhttp://www.w3.org/TR/touch-events-extensions/#widl-Touch-radiusYhttp://www.w3.org/TR/2011/WD-touch-events-20110505/#widl-Touch-rotationAngleCreates a new Touch object.http://www.w3.org/TR/touch-events/#widl-Document-createTouch-Touch-WindowProxy-view-EventTarget-target-long-identifier-long-pageX-long-pageY-long-screenX-long-screenY
The TouchList class is used to represent a collection of Touch objects.http://www.w3.org/TR/touch-events/#touchlist-interface
IArrayLike.<!Touch>!TouchThe number of Touch objects in this TouchList object.Returns the Touch object at the given index.?Touchhttp://www.w3.org/TR/touch-events-extensions/#widl-TouchList-identifiedTouch-Touch-long-identifierCreates a new TouchList object.http://www.w3.org/TR/touch-events/#widl-Document-createTouchList-TouchList-Touch-touches
Array.<?Touch>(undefined|!Array.<?Touch>)!Array.<?Touch>The TouchEvent class encapsulates information about a touch event.

<p>The system continually sends TouchEvent objects to an application as
fingers touch and move across a surface. A touch event provides a snapshot of
all touches during a multi-touch sequence, most importantly the touches that
are new or have changed for a particular target. A multi-touch sequence
begins when a finger first touches the surface. Other fingers may
subsequently touch the surface, and all fingers may move across the surface.
The sequence ends when the last of these fingers is lifted from the surface.
An application receives touch event objects during each phase of any touch.
</p>

<p>The different types of TouchEvent objects that can occur are:
<ul>
<li>touchstart - Sent when a finger for a given event touches the surface.
<li>touchmove - Sent when a given event moves on the surface.
<li>touchend - Sent when a given event lifts from the surface.
<li>touchcancel - Sent when the system cancels tracking for the touch.
</ul>
TouchEvent objects are combined together to form high-level GestureEvent
objects that are also sent during a multi-touch sequence.</p>http://www.w3.org/TR/touch-events/#touchevent-interface
!TouchEventInit=!TouchEventInitA collection of Touch objects representing all touches associated with this
target.A collection of Touch objects representing all touches that changed in this event.Specifies the JavaScript method to invoke when the system cancels tracking
for the touch.?function (!TouchEvent)function (!TouchEvent)!TouchEventSpecifies the JavaScript method to invoke when a given event lifts from the
surface.Specifies the JavaScript method to invoke when a finger for a given event
moves on the surface.Specifies the JavaScript method to invoke when a finger for a given event
touches the surface.var TouchInitDict;Touch.p ... lientX;Touch.p ... clientXTouch.p ... lientY;Touch.p ... clientYTouch.p ... tifier;Touch.p ... ntifierTouch.p ... .pageX;Touch.p ... e.pageXTouch.p ... .pageY;Touch.p ... e.pageYTouch.p ... creenX;Touch.p ... screenXTouch.p ... creenY;Touch.p ... screenYTouch.p ... target;Touch.p ... .targetTouch.p ... .force;Touch.p ... e.forceTouch.p ... radiusXTouch.p ... radiusYTouch.p ... nAngle;Touch.p ... onAngleDocumen ... nY) {};Documen ... enY) {}Documen ... teTouchfunctio ... enY) {}TouchLi ... length;TouchLi ... .lengthTouchList.prototypeTouchLi ... ex) {};TouchLi ... dex) {}TouchLi ... pe.itemTouchLi ... er) {};TouchLi ... ier) {}TouchLi ... edTouchfunctio ... ier) {}Documen ... es) {};Documen ... hes) {}Documen ... uchListfunction(touches) {}TouchEv ... Target;TouchEv ... dTargetTouchEv ... ototypeTouchEv ... ouches;TouchEv ... touchesTouchEv ... TouchesTouchEv ... altKey;TouchEv ... .altKeyTouchEv ... etaKey;TouchEv ... metaKeyTouchEv ... trlKey;TouchEv ... ctrlKeyTouchEv ... iftKey;TouchEv ... hiftKeyElement ... cancel;Element ... hcancelElement ... uchend;Element ... ouchendElement ... chmove;Element ... uchmoveElement ... hstart;Element ... chstart/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_webcrypto.js
 * @fileoverview Definitions for W3C's Web Cryptography specification
 * http://www.w3.org/TR/webCryptoAPI
 * @externs
 * @author chrismoon@google.com (Chris Moon)
 * This file was created using the best practices as described in:
 *     chrome_extensions.js
 /**\n *  ... .js\n */
 * @const
 * @see http://www.w3.org/TR/webCryptoAPI
 
 * @typedef {?{
 *   name: string
 * }}
 * @see http://www.w3.org/TR/WebCryptoAPI/#algorithm-dictionary
 
 * @typedef {string|!webCrypto.Algorithm}
 * @see http://www.w3.org/TR/WebCryptoAPI/#dfn-AlgorithmIdentifier
 
 * @constructor
 * @see http://www.w3.org/TR/webCryptoAPI/#dfn-CryptoKey
 /**\n *  ... Key\n */
 * @type {string} An enumerated value representing the type of the key, a secret
 *    key (for symmetric algorithm), a public or a private key
 *    (for an asymmetric algorithm).
 /**\n *  ... m).\n */
 * @type {boolean} Determines whether or not the raw keying material may be
 *     exported by the application.
 /**\n *  ... on.\n */
 * @type {!Object} An opaque object representing a particular cipher the key
 *     has to be used with.
 /**\n *  ... th.\n */
 * @type {!Object} Returns the cached ECMAScript object associated with the
 *   usages internal slot, which indicates which cryptographic operations are
 *   permissible to be used with this key.
 /**\n *  ... ey.\n */
 * @typedef {?{
 *   name: string
 * }}
 * @see http://www.w3.org/TR/WebCryptoAPI/#key-algorithm-dictionary-members
 
 * @constructor
 * @see http://www.w3.org/TR/WebCryptoAPI/#dfn-JsonWebKey
 * @see Section 3.1:
 *     https://tools.ietf.org/html/draft-ietf-jose-json-web-key-41
 /**\n *  ... -41\n */
 * @type {string} Identifies the cryptographic algorithm family used with
 *     the key, such as "RSA" or "EC".
 /**\n *  ... C".\n */
 * @type {string} Identifies the intended use of the public key.
 
 * @type {!Array<string>} Identifies the operation(s) that the key is
 *     intended to be used for.
 /**\n *  ... or.\n */
 * @type {string} Identifies the algorithm intended for use with the key.
 
 * @type {boolean} Boolean to be used with kty values.
 
 * @type {string} Identifies the cryptographic curve used with the key.
 
 * @type {string} Contains the x coordinate for the elliptic curve point.
 
 * @type {string} Contains the y coordinate for the elliptic curve point.
 
 * @type {string} Contains the Elliptic Curve private key value.
 
 * @type {string} Contains the modulus value for the RSA public key.
 
 * @type {string} Contains the exponent value for the RSA public key.
 
 * @type {string} Contains the first prime factor.
 
 * @type {string} Contains the second prime factor.
 
 * @type {string} Contains the Chinese Remainder Theorem (CRT) exponent of
 *     the first factor.
 
 * @type {string} Contains the Chinese Remainder Theorem (CRT) exponent of
 *     the second factor.
 
 * @type {string} Contains the Chinese Remainder Theorem (CRT) coefficient
 *     of the second factor.
 
 * @type {!Array<!webCrypto.RsaOtherPrimesInfo>} Contains an array of
 *     information about any third and subsequent primes, should they exist.
 /**\n *  ... st.\n */
 * @type {string} Contains the value of the symmetric (or other
 *     single-valued) key.
 
 * @constructor
 * @see http://www.w3.org/TR/WebCryptoAPI/#dfn-RsaOtherPrimesInfo
 * @see Section-6.3.2.7:
 *     https://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms-40
 /**\n *  ... -40\n */
 * @type {string} Parameter within an "oth" array member represents the value
 *     of a subsequent prime factor.
 
 * @type {string} Parameter within an "oth" array member represents the CRT
 *     exponent of the corresponding prime factor.
 
 * @type {string} Parameter within an "oth" array member represents the CRT
 *     coefficient of the corresponding prime factor.
 
 * @constructor
 * @see http://www.w3.org/TR/WebCryptoAPI/#subtlecrypto-interface
 
 * @param {!webCrypto.AlgorithmIdentifier} algorithm Supported
 *     values are: AES-CBC, AES-CTR, AES-GCM, and RSA-OAEP.
 * @param {!webCrypto.CryptoKey} key Key to be used for signing.
 * @param {!BufferSource} data Data to be encrypted (cleartext).
 * @return {!Promise<*>} Ciphertext generated by the encryption of the
 *     cleartext.
 /**\n *  ... xt.\n */
 * @param {!webCrypto.AlgorithmIdentifier} algorithm Supported
 *     values are: AES-CBC, AES-CTR, AES-GCM, and RSA-OAEP.
 * @param {!webCrypto.CryptoKey} key Key to be used for signing.
 * @param {!BufferSource} data Data to be decrypted (ciphertext).
 * @return {!Promise<*>} Cleartext generated by the decryption of the
 *     ciphertext.
 
 * @param {!webCrypto.AlgorithmIdentifier} algorithm Supported
 *     values are: HMAC, RSASSA-PKCS1-v1_5, and ECDSA.
 * @param {!webCrypto.CryptoKey} key Private key to be used for signing.
 * @param {!BufferSource} data Data to be signed.
 * @return {!Promise<*>} Returns the signature on success.
 /**\n *  ... ss.\n */
 * @param {!webCrypto.AlgorithmIdentifier} algorithm Supported
 *     values are: HMAC, RSASSA-PKCS1-v1_5, and ECDSA.
 * @param {!webCrypto.CryptoKey} key Private key to be used for signing.
 * @param {!BufferSource} signature Signature to verify.
 * @param {!BufferSource} data Data whose signature needs to be verified.
 * @return {!Promise<*>} Returns a boolean indicating if the signature operating
 *     has been successful.
 /**\n *  ... ul.\n */
 * @param {!webCrypto.AlgorithmIdentifier} algorithm Supported
 *     values are: SHA-1, SHA-256, SHA-384, and SHA-512.
 * @param {!BufferSource} data Data to be hashed using the hashing algorithm.
 * @return {!Promise<*>} returns the hash on success.
 
 * @param {!webCrypto.AlgorithmIdentifier} algorithm Supported
 *     values are: SHA-1, SHA-256, SHA-384, and SHA-512.
 * @param {boolean} extractable If the key can be extracted from the CryptoKey
 *     object at a later stage.
 * @param {!Array<string>} keyUsages Indication of new key options i.e.
 *     encrypt, decrypt, sign, verify, deriveKey, deriveBits, wrapKey,
 *     unwrapKey.
 * @return {!Promise<*>} returns the generated key as a CryptoKey or a
 *     CryptoKeyPair.
 /**\n *  ... ir.\n */
 * @param {!webCrypto.AlgorithmIdentifier} algorithm The key derivation
 *     algorithm to use. Supported values are:  ECDH, DH, PBKDF2, and HKDF-CTR.
 * @param {!webCrypto.CryptoKey} baseKey Key to be used by the key
 *     derivation algorithm.
 * @param {!webCrypto.AlgorithmIdentifier} derivedKeyAlgo Defines the key
 *     derivation algorithm to use.
 * @param {boolean} extractable Indicates if the key can be extracted from the
 *     CryptoKey object at a later stage.
 * @param {!Array<string>} keyUsages Indicates what can be done with the
 *     derivated key.
 * @return {!Promise<*>} returns the generated key as a CryptoKey or a
 *     CryptoKeyPair.
 
 * @param {!webCrypto.AlgorithmIdentifier} algorithm The key derivation
 *     algorithm to use.
 * @param {!webCrypto.CryptoKey} baseKey Key to be used by the key
 *     derivation algorithm.
 * @param {number} length
 * @return {!Promise<*>} returns the generated key as a CryptoKey or a
 *     CryptoKeyPair.
 
 * @param {string} format Enumerated value describing the data
 *     format of the key to imported.
 * @param {!BufferSource|!webCrypto.JsonWebKey} keyData The key
 *     in the given format.
 * @param {!webCrypto.AlgorithmIdentifier} algorithm Supported values
 *     are: AES-CTR, AES-CBC, AES-GCM, RSA-OAEP, AES-KW, HMAC,
 *     RSASSA-PKCS1-v1_5, ECDSA, ECDH, DH.
 * @param {boolean} extractable If the key can be extracted from the CryptoKey
 *     object at a later stage.
 * @param {!Array<string>} keyUsages Indication of new key options i.e.
 *     encrypt, decrypt, sign, verify, deriveKey, deriveBits, wrapKey,
 *     unwrapKey.
 * @return {!Promise<*>} returns the generated key as a CryptoKey.
 
 * @param {string} format Enumerated value describing the data
 *     format of the key to imported.
 * @param {!webCrypto.CryptoKey} key CryptoKey to export.
 * @return {!Promise<*>} returns the key in the requested format.
 /**\n *  ... at.\n */
 * @param {string} format Value describing the data format in which the key must
 *     be wrapped. It can be one of the following: raw, pkcs8, spki, jwk.
 * @param {!webCrypto.CryptoKey} key CryptoKey to wrap.
 * @param {!webCrypto.CryptoKey} wrappingKey CryptoKey used to perform
 *     the wrapping.
 * @param {!webCrypto.AlgorithmIdentifier} wrapAlgorithm algorithm used
 *     to perform the wrapping. It is one of the following: AES-CBC, AES-CTR,
 *     AES-GCM, RSA-OAEP, and AES-KW.
 * @return {!Promise<*>} returns the wrapped key in the requested format.
 
 * @param {string} format Value describing the data format in which the key must
 *     be wrapped. It can be one of the following: raw, pkcs8, spki, jwk.
 * @param {!BufferSource} wrappedKey Contains the wrapped key in the given
 *     format.
 * @param {!webCrypto.CryptoKey} unwrappingKey CryptoKey used to perform
 *     the unwrapping.
 * @param {!webCrypto.AlgorithmIdentifier} unwrapAlgorithm Algorithm
 *    used to perform the unwrapping. It is one of the following: AES-CBC,
 *    AES-CTR, AES-GCM, RSA-OAEP, and AES-KW.
 * @param {!webCrypto.AlgorithmIdentifier} unwrappedKeyAlgorithm
 *     Represents the algorithm of the wrapped key.
 * @param {boolean} extractable Indicates if the key can be extracted from the
 *     CryptoKey object at a later stage.
 * @param {!Array<string>} keyUsages Indicates what can be done with the
 *     derivated key.
 * @return {!Promise<*>} returns the unwrapped key as a CryptoKey.
 
 * Web Cryptography API
 * @see http://www.w3.org/TR/WebCryptoAPI/
 /**\n *  ... PI/\n */
 * @see https://developer.mozilla.org/en/DOM/window.crypto.getRandomValues
 * @param {!ArrayBufferView} typedArray
 * @return {!ArrayBufferView}
 * @throws {Error}
 
 * @type {webCrypto.SubtleCrypto}
 * @see http://www.w3.org/TR/WebCryptoAPI/#Crypto-attribute-subtle
 webCryptoAlgorithmAlgorithmIdentifierCryptoKeyextractableusagesKeyAlgorithmJsonWebKeyktyusekey_opsalgcrvdqdpdqqiothkRsaOtherPrimesInfotSubtleCryptoencryptdecryptgenerateKeykeyUsagesderiveKeybaseKeyderivedKeyAlgoderiveBitsimportKeykeyDataexportKeywrapKeywrappingKeywrapAlgorithmunwrapKeywrappedKeyunwrappingKeyunwrapAlgorithmunwrappedKeyAlgorithmgetRandomValuestypedArraysubtleDefinitions for W3C's Web Cryptography specification
http://www.w3.org/TR/webCryptoAPI
chrismoon@google.com (Chris Moon)
This file was created using the best practices as described in:
chrome_extensions.jshttp://www.w3.org/TR/webCryptoAPI?{name: string}{name: string}http://www.w3.org/TR/WebCryptoAPI/#algorithm-dictionary(string|!webCrypto.Algorithm)!webCrypto.AlgorithmwebCrypto.Algorithmhttp://www.w3.org/TR/WebCryptoAPI/#dfn-AlgorithmIdentifierhttp://www.w3.org/TR/webCryptoAPI/#dfn-CryptoKeyAn enumerated value representing the type of the key, a secret
key (for symmetric algorithm), a public or a private key
(for an asymmetric algorithm).Determines whether or not the raw keying material may be
exported by the application.An opaque object representing a particular cipher the key
has to be used with.Returns the cached ECMAScript object associated with the
usages internal slot, which indicates which cryptographic operations are
permissible to be used with this key.http://www.w3.org/TR/WebCryptoAPI/#key-algorithm-dictionary-membershttp://www.w3.org/TR/WebCryptoAPI/#dfn-JsonWebKey
Section 3.1:
https://tools.ietf.org/html/draft-ietf-jose-json-web-key-41Identifies the cryptographic algorithm family used with
the key, such as "RSA" or "EC".Identifies the intended use of the public key.Identifies the operation(s) that the key is
intended to be used for.Identifies the algorithm intended for use with the key.Boolean to be used with kty values.Identifies the cryptographic curve used with the key.Contains the x coordinate for the elliptic curve point.Contains the y coordinate for the elliptic curve point.Contains the Elliptic Curve private key value.Contains the modulus value for the RSA public key.Contains the exponent value for the RSA public key.Contains the first prime factor.Contains the second prime factor.Contains the Chinese Remainder Theorem (CRT) exponent of
the first factor.Contains the Chinese Remainder Theorem (CRT) exponent of
the second factor.Contains the Chinese Remainder Theorem (CRT) coefficient
of the second factor.Contains an array of
information about any third and subsequent primes, should they exist.!Array.<!webCrypto.RsaOtherPrimesInfo>Array.<!webCrypto.RsaOtherPrimesInfo>!webCrypto.RsaOtherPrimesInfowebCrypto.RsaOtherPrimesInfoContains the value of the symmetric (or other
single-valued) key.http://www.w3.org/TR/WebCryptoAPI/#dfn-RsaOtherPrimesInfo
Section-6.3.2.7:
https://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms-40Parameter within an "oth" array member represents the value
of a subsequent prime factor.Parameter within an "oth" array member represents the CRT
exponent of the corresponding prime factor.Parameter within an "oth" array member represents the CRT
coefficient of the corresponding prime factor.http://www.w3.org/TR/WebCryptoAPI/#subtlecrypto-interfaceSupported
values are: AES-CBC, AES-CTR, AES-GCM, and RSA-OAEP.
!webCrypto.AlgorithmIdentifierwebCrypto.AlgorithmIdentifierKey to be used for signing.
!webCrypto.CryptoKeywebCrypto.CryptoKeyData to be encrypted (cleartext).
Ciphertext generated by the encryption of the
cleartext.Data to be decrypted (ciphertext).
Cleartext generated by the decryption of the
ciphertext.Supported
values are: HMAC, RSASSA-PKCS1-v1_5, and ECDSA.
Private key to be used for signing.
Data to be signed.
Returns the signature on success.Signature to verify.
Data whose signature needs to be verified.
Returns a boolean indicating if the signature operating
has been successful.Supported
values are: SHA-1, SHA-256, SHA-384, and SHA-512.
Data to be hashed using the hashing algorithm.
returns the hash on success.If the key can be extracted from the CryptoKey
object at a later stage.
Indication of new key options i.e.
encrypt, decrypt, sign, verify, deriveKey, deriveBits, wrapKey,
unwrapKey.
returns the generated key as a CryptoKey or a
CryptoKeyPair.The key derivation
algorithm to use. Supported values are:  ECDH, DH, PBKDF2, and HKDF-CTR.
Key to be used by the key
derivation algorithm.
Defines the key
derivation algorithm to use.
Indicates if the key can be extracted from the
CryptoKey object at a later stage.
Indicates what can be done with the
derivated key.
The key derivation
algorithm to use.
Enumerated value describing the data
format of the key to imported.
The key
in the given format.
(!BufferSource|!webCrypto.JsonWebKey)!webCrypto.JsonWebKeywebCrypto.JsonWebKeySupported values
are: AES-CTR, AES-CBC, AES-GCM, RSA-OAEP, AES-KW, HMAC,
RSASSA-PKCS1-v1_5, ECDSA, ECDH, DH.
returns the generated key as a CryptoKey.CryptoKey to export.
returns the key in the requested format.Value describing the data format in which the key must
be wrapped. It can be one of the following: raw, pkcs8, spki, jwk.
CryptoKey to wrap.
CryptoKey used to perform
the wrapping.
algorithm used
to perform the wrapping. It is one of the following: AES-CBC, AES-CTR,
AES-GCM, RSA-OAEP, and AES-KW.
returns the wrapped key in the requested format.Contains the wrapped key in the given
format.
CryptoKey used to perform
the unwrapping.
Algorithm
used to perform the unwrapping. It is one of the following: AES-CBC,
AES-CTR, AES-GCM, RSA-OAEP, and AES-KW.
Represents the algorithm of the wrapped key.
returns the unwrapped key as a CryptoKey.Web Cryptography APIhttp://www.w3.org/TR/WebCryptoAPI/https://developer.mozilla.org/en/DOM/window.crypto.getRandomValues
webCrypto.SubtleCryptohttp://www.w3.org/TR/WebCryptoAPI/#Crypto-attribute-subtlevar webCrypto = {};webCrypto = {}webCrypto.Algorithm;webCryp ... tifier;webCryp ... ntifierwebCryp ... n() {};webCryp ... on() {}webCryp ... e.type;webCryp ... pe.typewebCryp ... ototypewebCryp ... ctable;webCryp ... actablewebCryp ... orithm;webCryp ... gorithmwebCryp ... usages;webCryp ... .usageswebCryp ... pe.kty;webCryp ... ype.ktywebCryp ... pe.use;webCryp ... ype.usewebCryp ... ey_ops;webCryp ... key_opswebCryp ... pe.alg;webCryp ... ype.algwebCryp ... pe.ext;webCryp ... ype.extwebCryp ... pe.crv;webCryp ... ype.crvwebCryp ... type.x;webCryp ... otype.xwebCryp ... type.y;webCryp ... otype.ywebCryp ... type.d;webCryp ... otype.dwebCryp ... type.n;webCryp ... otype.nwebCryp ... type.e;webCryp ... otype.ewebCryp ... type.p;webCryp ... otype.pwebCryp ... type.q;webCryp ... otype.qwebCryp ... ype.dp;webCryp ... type.dpwebCryp ... ype.dq;webCryp ... type.dqwebCryp ... ype.qi;webCryp ... type.qiwebCryp ... pe.oth;webCryp ... ype.othwebCryp ... type.k;webCryp ... otype.kwebCryp ... mesInfowebCryp ... type.r;webCryp ... otype.rwebCryp ... type.t;webCryp ... otype.twebCryp ... eCryptowebCryp ... ta) {};webCryp ... ata) {}webCryp ... encryptwebCryp ... decryptwebCryp ... pe.signwebCryp ... .verifywebCryp ... .digestwebCryp ... es) {};webCryp ... ges) {}webCryp ... rateKeyfunctio ... ges) {}webCryp ... riveKeywebCryp ... th) {};webCryp ... gth) {}webCryp ... iveBitswebCryp ... portKeywebCryp ... ey) {};webCryp ... key) {}webCryp ... hm) {};webCryp ... thm) {}webCryp ... wrapKeyunwrapp ... gorithmWindow. ... ay) {};Window. ... ray) {}Window. ... mValuesfunctio ... ray) {}Window. ... subtle;Window. ... .subtle/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/w3c_xml.js
 * @fileoverview Definitions for W3C's XML related specifications.
 *  This file depends on w3c_dom2.js.
 *  The whole file has been fully type annotated.
 *
 *  Provides the XML standards from W3C.
 *   Includes:
 *    XPath          - Fully type annotated
 *    XMLHttpRequest - Fully type annotated
 *
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html
 * @see http://www.w3.org/TR/XMLHttpRequest/
 * @see http://www.w3.org/TR/XMLHttpRequest2/
 *
 * @externs
 * @author stevey@google.com (Steve Yegge)
 
 * @constructor
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathException
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#INVALID_EXPRESSION_ERR
 /**\n *  ... ERR\n */
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#TYPE_ERR
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#
 /**\n *  ... ml#\n */
 * @constructor
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator
 
 * @param {string} expr
 * @param {?XPathNSResolver=} opt_resolver
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-createExpression
 * @throws XPathException
 * @throws DOMException
 * @return {undefined}
 
 * @param {Node} nodeResolver
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-createNSResolver
 * @return {undefined}
 
 * @param {string} expr
 * @param {Node} contextNode
 * @param {?XPathNSResolver=} opt_resolver
 * @param {?number=} opt_type
 * @param {*=} opt_result
 * @return {XPathResult}
 * @throws XPathException
 * @throws DOMException
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-evaluate
 
 * @constructor
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathExpression
 
 * @param {Node} contextNode
 * @param {number=} opt_type
 * @param {*=} opt_result
 * @return {*}
 * @throws XPathException
 * @throws DOMException
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathExpression-evaluate
 
 * @constructor
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNSResolver
 /**\n *  ... ver\n */
 * @param {string} prefix
 * @return {?string}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNSResolver-lookupNamespaceURI
 
 * From http://www.w3.org/TR/xpath
 *
 * XPath is a language for addressing parts of an XML document, designed to be
 * used by both XSLT and XPointer.
 *
 * @noalias
 * @constructor
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult
 /**\n *  ... ult\n */
 * @type {boolean} {@see XPathException.TYPE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-booleanValue
 
 * @type {boolean} {@see XPathException.TYPE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-invalid-iterator-state
 
 * @type {number}
 * @throws XPathException {@see XPathException.TYPE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-numberValue
 
 * @type {number}
 * @throws XPathException {@see XPathException.TYPE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-resultType
 
 * @type {Node}
 * @throws XPathException {@see XPathException.TYPE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-singleNodeValue
 
 * @type {number}
 * @throws XPathException {@see XPathException.TYPE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-snapshot-length
 
 * @type {string}
 * @throws XPathException {@see XPathException.TYPE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-stringValue
 
 * @return {Node}
 * @throws XPathException {@see XPathException.TYPE_ERR}
 * @throws DOMException {@see DOMException.INVALID_STATE_ERR}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-iterateNext
 
 * @param {number} index
 * @return {Node}
 * @throws XPathException
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-snapshotItem
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ANY-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-NUMBER-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-STRING-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-BOOLEAN-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-UNORDERED-NODE-ITERATOR-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ORDERED-NODE-ITERATOR-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-UNORDERED-NODE-SNAPSHOT-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ORDERED-NODE-SNAPSHOT-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ANY-UNORDERED-NODE-TYPE
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-FIRST-ORDERED-NODE-TYPE
 
 * @constructor
 * @extends {Node}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNamespace
 
 * @type {Element}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNamespace-ownerElement
 
 * @type {number}
 * @see http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPATH_NAMESPACE_NODE
 /**\n *  ... ODE\n */
 * From http://www.w3.org/TR/XMLHttpRequest/
 *
 * (Draft)
 *
 * The XMLHttpRequest Object specification defines an API that provides
 * scripted client functionality for transferring data between a client and a
 * server.
 *
 * @constructor
 * @implements {EventTarget}
 * @see http://www.w3.org/TR/XMLHttpRequest/#xmlhttprequest-object
 
 * @param {string} method
 * @param {string} url
 * @param {?boolean=} opt_async
 * @param {?string=} opt_user
 * @param {?string=} opt_password
 * @return {undefined}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-open()-method
 
 * @param {string} header
 * @param {string} value
 * @return {undefined}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader()-method
 
 * @param {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string=} opt_data
 * @return {undefined}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-send()-method
 
 * @return {undefined}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-abort()-method
 
 * @return {string}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders()-method
 
 * @param {string} header
 * @return {string}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-getresponseheader()-method
 
 * @type {string}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-responsetext-attribute
 
 * This is not supported in any IE browser (as of August 2016).
 * @type {string}
 * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURL
 /**\n *  ... URL\n */
 * @type {Document}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-responsexml-attribute
 
 * @type {number}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-readystate-attribute
 
 * @type {number}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute
 
 * @type {string}
 * @see http://www.w3.org/TR/XMLHttpRequest/#the-statustext-attribute
 
 * @type {Function}
 * @see http://www.w3.org/TR/XMLHttpRequest/#handler-xhr-onreadystatechange
 
 * @type {Function}
 * @see http://www.w3.org/TR/XMLHttpRequest/#handler-xhr-onerror
 
 * @type {number}
 * @see https://www.w3.org/TR/XMLHttpRequest/#states
 
 * The FormData object represents an ordered collection of entries. Each entry
 * has a name and value.
 *
 * @param {?Element=} opt_form An optional form to use for constructing the form
 *     data set.
 * @constructor
 * @see http://www.w3.org/TR/XMLHttpRequest2/#the-formdata-interface
 
 * @param {string} name
 * @param {Blob|string} value
 * @param {string=} opt_filename
 * @return {undefined}
 XPathExceptionINVALID_EXPRESSION_ERR52TYPE_ERRXPathEvaluatorcreateExpressionopt_resolvernodeResolvercontextNodeopt_resultXPathExpressionXPathNSResolverXPathResultbooleanValueinvalidInteratorStatenumberValueresultTypesingleNodeValuesnapshotLengthiterateNextsnapshotItemANY_TYPENUMBER_TYPESTRING_TYPEBOOLEAN_TYPEUNORDERED_NODE_ITERATOR_TYPEORDERED_NODE_ITERATOR_TYPEUNORDERED_NODE_SNAPSHOT_TYPEORDERED_NODE_SNAPSHOT_TYPEANY_UNORDERED_NODE_TYPEFIRST_ORDERED_NODE_TYPEXPathNamespaceopt_asyncopt_useropt_passwordsetRequestHeaderheadergetAllResponseHeadersgetResponseHeaderresponseURLresponseXMLUNSENTOPENEDHEADERS_RECEIVEDopt_filenameDefinitions for W3C's XML related specifications.
This file depends on w3c_dom2.js.
The whole file has been fully type annotated.
*  Provides the XML standards from W3C.
Includes:
XPath          - Fully type annotated
XMLHttpRequest - Fully type annotated
*http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html
http://www.w3.org/TR/XMLHttpRequest/
http://www.w3.org/TR/XMLHttpRequest2/
*http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathExceptionhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#INVALID_EXPRESSION_ERRhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#TYPE_ERRhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator?XPathNSResolver=?XPathNSResolverhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-createExpression
XPathException
DOMException
http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-createNSResolver
?number=http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-evaluatehttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathExpressionhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathExpression-evaluatehttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNSResolverhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNSResolver-lookupNamespaceURIFrom http://www.w3.org/TR/xpath

XPath is a language for addressing parts of an XML document, designed to be
used by both XSLT and XPointer.http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult{@see XPathException.TYPE_ERR}
http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-booleanValuehttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-invalid-iterator-stateXPathException {@see XPathException.TYPE_ERR}
http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-numberValuehttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-resultTypehttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-singleNodeValuehttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-snapshot-lengthhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-stringValueDOMException {@see DOMException.INVALID_STATE_ERR}
http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-iterateNexthttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-snapshotItemhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ANY-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-NUMBER-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-STRING-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-BOOLEAN-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-UNORDERED-NODE-ITERATOR-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ORDERED-NODE-ITERATOR-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-UNORDERED-NODE-SNAPSHOT-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ORDERED-NODE-SNAPSHOT-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ANY-UNORDERED-NODE-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-FIRST-ORDERED-NODE-TYPEhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNamespacehttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNamespace-ownerElementhttp://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPATH_NAMESPACE_NODEFrom http://www.w3.org/TR/XMLHttpRequest/

(Draft)

The XMLHttpRequest Object specification defines an API that provides
scripted client functionality for transferring data between a client and a
server.http://www.w3.org/TR/XMLHttpRequest/#xmlhttprequest-objecthttp://www.w3.org/TR/XMLHttpRequest/#the-open()-methodhttp://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader()-method(ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string)=(ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string)http://www.w3.org/TR/XMLHttpRequest/#the-send()-methodhttp://www.w3.org/TR/XMLHttpRequest/#the-abort()-methodhttp://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders()-methodhttp://www.w3.org/TR/XMLHttpRequest/#the-getresponseheader()-methodhttp://www.w3.org/TR/XMLHttpRequest/#the-responsetext-attributeThis is not supported in any IE browser (as of August 2016).https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseURLhttp://www.w3.org/TR/XMLHttpRequest/#the-responsexml-attributehttp://www.w3.org/TR/XMLHttpRequest/#the-readystate-attributehttp://www.w3.org/TR/XMLHttpRequest/#the-status-attributehttp://www.w3.org/TR/XMLHttpRequest/#the-statustext-attributehttp://www.w3.org/TR/XMLHttpRequest/#handler-xhr-onreadystatechangehttp://www.w3.org/TR/XMLHttpRequest/#handler-xhr-onerrorhttps://www.w3.org/TR/XMLHttpRequest/#statesThe FormData object represents an ordered collection of entries. Each entry
has a name and value.An optional form to use for constructing the form
data set.
?Element=http://www.w3.org/TR/XMLHttpRequest2/#the-formdata-interface(Blob|string)XPathEx ... R = 52;XPathEx ... RR = 52XPathEx ... ION_ERRXPathEx ... YPE_ERRXPathEx ... e.code;XPathEx ... pe.codeXPathEx ... ototypeXPathEv ... er) {};XPathEv ... ver) {}XPathEv ... ressionXPathEv ... ototypeXPathEv ... esolverXPathEv ... lt) {};XPathEv ... ult) {}XPathEv ... valuatefunctio ... ult) {}XPathEx ... lt) {};XPathEx ... ult) {}XPathEx ... valuateXPathNS ... ix) {};XPathNS ... fix) {}XPathNS ... paceURIXPathNS ... ototypeXPathRe ... nValue;XPathRe ... anValueXPathRe ... ototypeXPathRe ... rState;XPathRe ... orStateinvalid ... orStateXPathRe ... rValue;XPathRe ... erValueXPathRe ... ltType;XPathRe ... ultTypeXPathRe ... eValue;XPathRe ... deValueXPathRe ... Length;XPathRe ... tLengthXPathRe ... gValue;XPathRe ... ngValueXPathRe ... n() {};XPathRe ... on() {}XPathRe ... ateNextXPathRe ... ex) {};XPathRe ... dex) {}XPathRe ... hotItemXPathRe ... PE = 0;XPathRe ... YPE = 0XPathResult.ANY_TYPEXPathRe ... PE = 1;XPathRe ... YPE = 1XPathRe ... ER_TYPEXPathRe ... PE = 2;XPathRe ... YPE = 2XPathRe ... NG_TYPEXPathRe ... PE = 3;XPathRe ... YPE = 3XPathRe ... AN_TYPEXPathRe ... PE = 4;XPathRe ... YPE = 4XPathRe ... OR_TYPEUNORDER ... OR_TYPEXPathRe ... PE = 5;XPathRe ... YPE = 5ORDERED ... OR_TYPEXPathRe ... PE = 6;XPathRe ... YPE = 6XPathRe ... OT_TYPEUNORDER ... OT_TYPEXPathRe ... PE = 7;XPathRe ... YPE = 7ORDERED ... OT_TYPEXPathRe ... PE = 8;XPathRe ... YPE = 8XPathRe ... DE_TYPEANY_UNO ... DE_TYPEXPathRe ... PE = 9;XPathRe ... YPE = 9FIRST_O ... DE_TYPEXPathNa ... lement;XPathNa ... ElementXPathNa ... ototypeXPathNa ... E = 13;XPathNa ... DE = 13XPathNa ... CE_NODEXMLHttp ... rd) {};XMLHttp ... ord) {}XMLHttp ... pe.openXMLHttp ... ue) {};XMLHttp ... lue) {}XMLHttp ... tHeaderXMLHttp ... ta) {};XMLHttp ... ata) {}XMLHttp ... pe.sendXMLHttp ... n() {};XMLHttp ... on() {}XMLHttp ... e.abortXMLHttp ... HeadersgetAllR ... HeadersXMLHttp ... er) {};XMLHttp ... der) {}XMLHttp ... eHeaderfunction(header) {}XMLHttp ... seText;XMLHttp ... nseTextXMLHttp ... nseURL;XMLHttp ... onseURLXMLHttp ... nseXML;XMLHttp ... onseXMLXMLHttp ... yState;XMLHttp ... dyStateXMLHttp ... status;XMLHttp ... .statusXMLHttp ... usText;XMLHttp ... tusTextXMLHttp ... change;XMLHttp ... echangeXMLHttp ... nerror;XMLHttp ... onerrorXMLHttp ... UNSENT;XMLHttp ... .UNSENTXMLHttp ... OPENED;XMLHttp ... .OPENEDXMLHttp ... CEIVED;XMLHttp ... ECEIVEDXMLHttp ... OADING;XMLHttp ... LOADINGXMLHttpRequest.DONE;XMLHttpRequest.DONEFormDat ... me) {};FormDat ... ame) {}FormDat ... .appendFormData.prototype/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/webgl.js
 * @fileoverview Definitions for WebGL functions as described at
 * http://www.khronos.org/registry/webgl/specs/latest/
 *
 * This file is current up to the WebGL 1.0.1 spec, including extensions.
 *
 * This relies on html5.js being included for Canvas and Typed Array support.
 *
 * This includes some extensions defined at
 * http://www.khronos.org/registry/webgl/extensions/
 *
 * @externs
 
 * @type {!HTMLCanvasElement}
 
 * @return {!WebGLContextAttributes}
 * @nosideeffects
 
 * @return {!Array<string>}
 * @nosideeffects
 
 * Note that this has side effects by enabling the extension even if the
 * result is not used.
 * @param {string} name
 * @return {Object}
 
 * @param {number} texture
 * @return {undefined}
 
 * @param {WebGLProgram} program
 * @param {WebGLShader} shader
 * @return {undefined}
 
 * @param {WebGLProgram} program
 * @param {number} index
 * @param {string} name
 * @return {undefined}
 
 * @param {number} target
 * @param {WebGLBuffer} buffer
 * @return {undefined}
 
 * @param {number} target
 * @param {WebGLFramebuffer} buffer
 * @return {undefined}
 
 * @param {number} target
 * @param {WebGLRenderbuffer} buffer
 * @return {undefined}
 
 * @param {number} target
 * @param {WebGLTexture} texture
 * @return {undefined}
 
 * @param {number} red
 * @param {number} green
 * @param {number} blue
 * @param {number} alpha
 * @return {undefined}
 
 * @param {number} mode
 * @return {undefined}
 
 * @param {number} modeRGB
 * @param {number} modeAlpha
 * @return {undefined}
 
 * @param {number} sfactor
 * @param {number} dfactor
 * @return {undefined}
 
 * @param {number} srcRGB
 * @param {number} dstRGB
 * @param {number} srcAlpha
 * @param {number} dstAlpha
 * @return {undefined}
 
 * @param {number} target
 * @param {ArrayBufferView|ArrayBuffer|number} data
 * @param {number} usage
 * @return {undefined}
 
 * @param {number} target
 * @param {number} offset
 * @param {ArrayBufferView|ArrayBuffer} data
 * @return {undefined}
 
 * @param {number} target
 * @return {number}
 
 * @param {number} mask
 * @return {undefined}
 
 * @param {number} depth
 * @return {undefined}
 
 * @param {number} s
 * @return {undefined}
 
 * @param {boolean} red
 * @param {boolean} green
 * @param {boolean} blue
 * @param {boolean} alpha
 * @return {undefined}
 
 * @param {WebGLShader} shader
 * @return {undefined}
 
 * @param {number} target
 * @param {number} level
 * @param {number} internalformat
 * @param {number} width
 * @param {number} height
 * @param {number} border
 * @param {ArrayBufferView} data
 * @return {undefined}
 
 * @param {number} target
 * @param {number} level
 * @param {number} xoffset
 * @param {number} yoffset
 * @param {number} width
 * @param {number} height
 * @param {number} format
 * @param {ArrayBufferView} data
 * @return {undefined}
 
 * @param {number} target
 * @param {number} level
 * @param {number} format
 * @param {number} x
 * @param {number} y
 * @param {number} width
 * @param {number} height
 * @param {number} border
 * @return {undefined}
 
 * @param {number} target
 * @param {number} level
 * @param {number} xoffset
 * @param {number} yoffset
 * @param {number} x
 * @param {number} y
 * @param {number} width
 * @param {number} height
 * @return {undefined}
 
 * @return {!WebGLBuffer}
 * @nosideeffects
 
 * @return {!WebGLFramebuffer}
 * @nosideeffects
 
 * @return {!WebGLProgram}
 * @nosideeffects
 
 * @return {!WebGLRenderbuffer}
 * @nosideeffects
 
 * @param {number} type
 * @return {!WebGLShader}
 * @nosideeffects
 
 * @return {!WebGLTexture}
 * @nosideeffects
 
 * @param {WebGLBuffer} buffer
 * @return {undefined}
 
 * @param {WebGLFramebuffer} buffer
 * @return {undefined}
 
 * @param {WebGLProgram} program
 * @return {undefined}
 
 * @param {WebGLRenderbuffer} buffer
 * @return {undefined}
 
 * @param {WebGLTexture} texture
 * @return {undefined}
 
 * @param {number} func
 * @return {undefined}
 
 * @param {boolean} flag
 * @return {undefined}
 
 * @param {number} nearVal
 * @param {number} farVal
 * @return {undefined}
 
 * @param {number} flags
 * @return {undefined}
 
 * @param {number} index
 * @return {undefined}
 
 * @param {number} mode
 * @param {number} first
 * @param {number} count
 * @return {undefined}
 
 * @param {number} mode
 * @param {number} count
 * @param {number} type
 * @param {number} offset
 * @return {undefined}
 
 * @param {number} cap
 * @return {undefined}
 
 * @param {number} target
 * @param {number} attachment
 * @param {number} renderbuffertarget
 * @param {WebGLRenderbuffer} renderbuffer
 * @return {undefined}
 
 * @param {number} target
 * @param {number} attachment
 * @param {number} textarget
 * @param {WebGLTexture} texture
 * @param {number} level
 * @return {undefined}
 
 * @param {number} target
 * @return {undefined}
 
 * @param {WebGLProgram} program
 * @param {number} index
 * @return {WebGLActiveInfo}
 * @nosideeffects
 
 * @param {WebGLProgram} program
 * @return {!Array<WebGLShader>}
 * @nosideeffects
 
 * @param {WebGLProgram} program
 * @param {string} name
 * @return {number}
 * @nosideeffects
 
 * @param {number} target
 * @param {number} pname
 * @return {*}
 * @nosideeffects
 
 * @param {number} pname
 * @return {*}
 * @nosideeffects
 
 * @param {number} target
 * @param {number} attachment
 * @param {number} pname
 * @return {*}
 * @nosideeffects
 
 * @param {WebGLProgram} program
 * @param {number} pname
 * @return {*}
 * @nosideeffects
 
 * @param {WebGLProgram} program
 * @return {string}
 * @nosideeffects
 
 * @param {WebGLShader} shader
 * @param {number} pname
 * @return {*}
 * @nosideeffects
 
 * @param {number} shadertype
 * @param {number} precisiontype
 * @return {WebGLShaderPrecisionFormat}
 * @nosideeffects
 
 * @param {WebGLShader} shader
 * @return {string}
 * @nosideeffects
 
 * @param {WebGLProgram} program
 * @param {WebGLUniformLocation} location
 * @return {*}
 * @nosideeffects
 
 * @param {WebGLProgram} program
 * @param {string} name
 * @return {WebGLUniformLocation}
 * @nosideeffects
 
 * @param {number} index
 * @param {number} pname
 * @return {*}
 * @nosideeffects
 
 * @param {number} index
 * @param {number} pname
 * @return {number}
 * @nosideeffects
 
 * @param {number} target
 * @param {number} mode
 * @return {undefined}
 
 * @param {WebGLObject} buffer
 * @return {boolean}
 * @nosideeffects
 
 * @param {number} cap
 * @return {boolean}
 * @nosideeffects
 
 * @param {WebGLObject} framebuffer
 * @return {boolean}
 * @nosideeffects
 
 * @param {WebGLObject} program
 * @return {boolean}
 * @nosideeffects
 
 * @param {WebGLObject} renderbuffer
 * @return {boolean}
 * @nosideeffects
 
 * @param {WebGLObject} shader
 * @return {boolean}
 * @nosideeffects
 
 * @param {WebGLObject} texture
 * @return {boolean}
 * @nosideeffects
 
 * @param {number} width
 * @return {undefined}
 
 * @param {number} pname
 * @param {number} param
 * @return {undefined}
 
 * @param {number} factor
 * @param {number} units
 * @return {undefined}
 
 * @param {number} x
 * @param {number} y
 * @param {number} width
 * @param {number} height
 * @param {number} format
 * @param {number} type
 * @param {ArrayBufferView} pixels
 * @return {undefined}
 
 * @param {number} target
 * @param {number} internalformat
 * @param {number} width
 * @param {number} height
 * @return {undefined}
 
 * @param {number} coverage
 * @param {boolean} invert
 * @return {undefined}
 
 * @param {number} x
 * @param {number} y
 * @param {number} width
 * @param {number} height
 * @return {undefined}
 
 * @param {WebGLShader} shader
 * @param {string} source
 * @return {undefined}
 
 * @param {number} func
 * @param {number} ref
 * @param {number} mask
 * @return {undefined}
 
 * @param {number} face
 * @param {number} func
 * @param {number} ref
 * @param {number} mask
 * @return {undefined}
 
 * @param {number} face
 * @param {number} mask
 * @return {undefined}
 
 * @param {number} fail
 * @param {number} zfail
 * @param {number} zpass
 * @return {undefined}
 
 * @param {number} face
 * @param {number} fail
 * @param {number} zfail
 * @param {number} zpass
 * @return {undefined}
 
 * @param {number} target
 * @param {number} level
 * @param {number} internalformat
 * @param {number} format or width
 * @param {number} type or height
 * @param {ImageData|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|
 *     number} img or border
 * @param {number=} opt_format
 * @param {number=} opt_type
 * @param {ArrayBufferView=} opt_pixels
 * @return {undefined}
 
 * @param {number} target
 * @param {number} pname
 * @param {number} param
 * @return {undefined}
 
 * @param {number} target
 * @param {number} level
 * @param {number} xoffset
 * @param {number} yoffset
 * @param {number} format or width
 * @param {number} type or height
 * @param {ImageData|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|
 *     number} data or format
 * @param {number=} opt_type
 * @param {ArrayBufferView=} opt_pixels
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number} value
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {Float32Array|Array<number>} value
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number|boolean} value
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {Int32Array|Array<number>|Array<boolean>} value
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number} value1
 * @param {number} value2
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number|boolean} value1
 * @param {number|boolean} value2
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number} value1
 * @param {number} value2
 * @param {number} value3
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number|boolean} value1
 * @param {number|boolean} value2
 * @param {number|boolean} value3
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number} value1
 * @param {number} value2
 * @param {number} value3
 * @param {number} value4
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {number|boolean} value1
 * @param {number|boolean} value2
 * @param {number|boolean} value3
 * @param {number|boolean} value4
 * @return {undefined}
 
 * @param {WebGLUniformLocation} location
 * @param {boolean} transpose
 * @param {Float32Array|Array<number>} data
 * @return {undefined}
 
 * @param {number} indx
 * @param {number} x
 * @return {undefined}
 
 * @param {number} indx
 * @param {Float32Array|Array<number>} values
 * @return {undefined}
 
 * @param {number} indx
 * @param {number} x
 * @param {number} y
 * @return {undefined}
 
 * @param {number} indx
 * @param {number} x
 * @param {number} y
 * @param {number} z
 * @return {undefined}
 
 * @param {number} indx
 * @param {number} x
 * @param {number} y
 * @param {number} z
 * @param {number} w
 * @return {undefined}
 
 * @param {number} indx
 * @param {number} size
 * @param {number} type
 * @param {boolean} normalized
 * @param {number} stride
 * @param {number} offset
 * @return {undefined}
 
 * @param {string} eventType
 * @constructor
 * @noalias
 * @extends {Event}
 
 * @constructor
 * @noalias
 * @extends {WebGLObject}
 
 * @see http://www.khronos.org/registry/webgl/extensions/OES_texture_float/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/OES_texture_half_float/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/WEBGL_lose_context/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/OES_standard_derivatives/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/OES_vertex_array_object/
 * @constructor
 * @noalias
 * @extends {WebGLObject}
 
 * @see http://www.khronos.org/registry/webgl/extensions/OES_vertex_array_object/
 * @constructor
 * @noalias
 
 * @return {WebGLVertexArrayObjectOES}
 * @nosideeffects
 
 * @param {WebGLVertexArrayObjectOES} arrayObject
 * @return {undefined}
 
 * @param {WebGLVertexArrayObjectOES} arrayObject
 * @return {boolean}
 * @nosideeffects
 
 * @see http://www.khronos.org/registry/webgl/extensions/WEBGL_debug_renderer_info/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/WEBGL_debug_shaders/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_s3tc/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/OES_depth_texture/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/OES_element_index_uint/
 * @constructor
 * @noalias
 
 * @see http://www.khronos.org/registry/webgl/extensions/EXT_texture_filter_anisotropic/
 * @constructor
 * @noalias
 
 * @see https://www.khronos.org/registry/webgl/extensions/WEBGL_draw_buffers/
 * @constructor
 * @noalias
 
 * @param {Array<number>} buffers Draw buffers.
 * @return {undefined}
 
 * @see http://www.khronos.org/registry/webgl/extensions/ANGLE_instanced_arrays/
 * @constructor
 * @noalias
 
 * @param {number} mode Primitive type.
 * @param {number} first First vertex.
 * @param {number} count Number of vertices per instance.
 * @param {number} primcount Number of instances.
 * @return {undefined}
 
 * @param {number} mode Primitive type.
 * @param {number} count Number of vertex indices per instance.
 * @param {number} type Type of a vertex index.
 * @param {number} offset Offset to the first vertex index.
 * @param {number} primcount Number of instances.
 * @return {undefined}
 
 * @param {number} index Attribute index.
 * @param {number} divisor Instance divisor.
 * @return {undefined}
 WebGLRenderingContextDEPTH_BUFFER_BITSTENCIL_BUFFER_BITCOLOR_BUFFER_BITPOINTSLINESLINE_LOOPLINE_STRIPTRIANGLESTRIANGLE_STRIPTRIANGLE_FANZEROONESRC_COLORONE_MINUS_SRC_COLORSRC_ALPHAONE_MINUS_SRC_ALPHADST_ALPHAONE_MINUS_DST_ALPHADST_COLORONE_MINUS_DST_COLORSRC_ALPHA_SATURATEFUNC_ADDBLEND_EQUATIONBLEND_EQUATION_RGBBLEND_EQUATION_ALPHAFUNC_SUBTRACTFUNC_REVERSE_SUBTRACTBLEND_DST_RGBBLEND_SRC_RGBBLEND_DST_ALPHABLEND_SRC_ALPHACONSTANT_COLORONE_MINUS_CONSTANT_COLORCONSTANT_ALPHAONE_MINUS_CONSTANT_ALPHABLEND_COLORARRAY_BUFFERELEMENT_ARRAY_BUFFERARRAY_BUFFER_BINDINGELEMENT_ARRAY_BUFFER_BINDINGSTREAM_DRAWSTATIC_DRAWDYNAMIC_DRAWBUFFER_SIZEBUFFER_USAGECURRENT_VERTEX_ATTRIBFRONTBACKFRONT_AND_BACKCULL_FACEBLENDDITHERSTENCIL_TESTDEPTH_TESTSCISSOR_TESTPOLYGON_OFFSET_FILLSAMPLE_ALPHA_TO_COVERAGESAMPLE_COVERAGENO_ERRORINVALID_ENUMINVALID_VALUEINVALID_OPERATIONOUT_OF_MEMORYCWCCWLINE_WIDTHALIASED_POINT_SIZE_RANGEALIASED_LINE_WIDTH_RANGECULL_FACE_MODEFRONT_FACEDEPTH_RANGEDEPTH_WRITEMASKDEPTH_CLEAR_VALUEDEPTH_FUNCSTENCIL_CLEAR_VALUESTENCIL_FUNCSTENCIL_FAILSTENCIL_PASS_DEPTH_FAILSTENCIL_PASS_DEPTH_PASSSTENCIL_REFSTENCIL_VALUE_MASKSTENCIL_WRITEMASKSTENCIL_BACK_FUNCSTENCIL_BACK_FAILSTENCIL_BACK_PASS_DEPTH_FAILSTENCIL_BACK_PASS_DEPTH_PASSSTENCIL_BACK_REFSTENCIL_BACK_VALUE_MASKSTENCIL_BACK_WRITEMASKVIEWPORTSCISSOR_BOXCOLOR_CLEAR_VALUECOLOR_WRITEMASKUNPACK_ALIGNMENTPACK_ALIGNMENTMAX_TEXTURE_SIZEMAX_VIEWPORT_DIMSSUBPIXEL_BITSRED_BITSGREEN_BITSBLUE_BITSALPHA_BITSDEPTH_BITSSTENCIL_BITSPOLYGON_OFFSET_UNITSPOLYGON_OFFSET_FACTORTEXTURE_BINDING_2DSAMPLE_BUFFERSSAMPLESSAMPLE_COVERAGE_VALUESAMPLE_COVERAGE_INVERTCOMPRESSED_TEXTURE_FORMATSDONT_CAREFASTESTNICESTGENERATE_MIPMAP_HINTBYTEUNSIGNED_BYTESHORTUNSIGNED_SHORTINTUNSIGNED_INTFLOATDEPTH_COMPONENTALPHARGBRGBALUMINANCELUMINANCE_ALPHAUNSIGNED_SHORT_4_4_4_4UNSIGNED_SHORT_5_5_5_1UNSIGNED_SHORT_5_6_5FRAGMENT_SHADERVERTEX_SHADERMAX_VERTEX_ATTRIBSMAX_VERTEX_UNIFORM_VECTORSMAX_VARYING_VECTORSMAX_COMBINED_TEXTURE_IMAGE_UNITSMAX_VERTEX_TEXTURE_IMAGE_UNITSMAX_TEXTURE_IMAGE_UNITSMAX_FRAGMENT_UNIFORM_VECTORSSHADER_TYPEDELETE_STATUSLINK_STATUSVALIDATE_STATUSATTACHED_SHADERSACTIVE_UNIFORMSACTIVE_ATTRIBUTESSHADING_LANGUAGE_VERSIONCURRENT_PROGRAMNEVERLESSEQUALLEQUALGREATERNOTEQUALGEQUALALWAYSKEEPREPLACEINCRDECRINVERTINCR_WRAPDECR_WRAPVENDORRENDERERVERSIONNEARESTLINEARNEAREST_MIPMAP_NEARESTLINEAR_MIPMAP_NEARESTNEAREST_MIPMAP_LINEARLINEAR_MIPMAP_LINEARTEXTURE_MAG_FILTERTEXTURE_MIN_FILTERTEXTURE_WRAP_STEXTURE_WRAP_TTEXTURE_2DTEXTURETEXTURE_CUBE_MAPTEXTURE_BINDING_CUBE_MAPTEXTURE_CUBE_MAP_POSITIVE_XTEXTURE_CUBE_MAP_NEGATIVE_XTEXTURE_CUBE_MAP_POSITIVE_YTEXTURE_CUBE_MAP_NEGATIVE_YTEXTURE_CUBE_MAP_POSITIVE_ZTEXTURE_CUBE_MAP_NEGATIVE_ZMAX_CUBE_MAP_TEXTURE_SIZETEXTURE0TEXTURE1TEXTURE2TEXTURE3TEXTURE4TEXTURE5TEXTURE6TEXTURE7TEXTURE8TEXTURE9TEXTURE10TEXTURE11TEXTURE12TEXTURE13TEXTURE14TEXTURE15TEXTURE16TEXTURE17TEXTURE18TEXTURE19TEXTURE20TEXTURE21TEXTURE22TEXTURE23TEXTURE24TEXTURE25TEXTURE26TEXTURE27TEXTURE28TEXTURE29TEXTURE30TEXTURE31ACTIVE_TEXTUREREPEATCLAMP_TO_EDGEMIRRORED_REPEATFLOAT_VEC2FLOAT_VEC3FLOAT_VEC4INT_VEC2INT_VEC3INT_VEC4BOOLBOOL_VEC2BOOL_VEC3BOOL_VEC4FLOAT_MAT2FLOAT_MAT3FLOAT_MAT4SAMPLER_2DSAMPLER_CUBEVERTEX_ATTRIB_ARRAY_ENABLEDVERTEX_ATTRIB_ARRAY_SIZEVERTEX_ATTRIB_ARRAY_STRIDEVERTEX_ATTRIB_ARRAY_TYPEVERTEX_ATTRIB_ARRAY_NORMALIZEDVERTEX_ATTRIB_ARRAY_POINTERVERTEX_ATTRIB_ARRAY_BUFFER_BINDINGIMPLEMENTATION_COLOR_READ_FORMATIMPLEMENTATION_COLOR_READ_TYPECOMPILE_STATUSLOW_FLOATMEDIUM_FLOATHIGH_FLOATLOW_INTMEDIUM_INTHIGH_INTFRAMEBUFFERRENDERBUFFERRGBA4RGB5_A1RGB565DEPTH_COMPONENT16STENCIL_INDEXSTENCIL_INDEX8DEPTH_STENCILRENDERBUFFER_WIDTHRENDERBUFFER_HEIGHTRENDERBUFFER_INTERNAL_FORMATRENDERBUFFER_RED_SIZERENDERBUFFER_GREEN_SIZERENDERBUFFER_BLUE_SIZERENDERBUFFER_ALPHA_SIZERENDERBUFFER_DEPTH_SIZERENDERBUFFER_STENCIL_SIZEFRAMEBUFFER_ATTACHMENT_OBJECT_TYPEFRAMEBUFFER_ATTACHMENT_OBJECT_NAMEFRAMEBUFFER_ATTACHMENT_TEXTURE_LEVELFRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACECOLOR_ATTACHMENT0DEPTH_ATTACHMENTSTENCIL_ATTACHMENTDEPTH_STENCIL_ATTACHMENTNONEFRAMEBUFFER_COMPLETEFRAMEBUFFER_INCOMPLETE_ATTACHMENTFRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENTFRAMEBUFFER_INCOMPLETE_DIMENSIONSFRAMEBUFFER_UNSUPPORTEDFRAMEBUFFER_BINDINGRENDERBUFFER_BINDINGMAX_RENDERBUFFER_SIZEINVALID_FRAMEBUFFER_OPERATIONUNPACK_FLIP_Y_WEBGLUNPACK_PREMULTIPLY_ALPHA_WEBGLCONTEXT_LOST_WEBGLUNPACK_COLORSPACE_CONVERSION_WEBGLBROWSER_DEFAULT_WEBGLdrawingBufferWidthdrawingBufferHeightgetContextAttributesisContextLostgetSupportedExtensionsgetExtensionactiveTexturetextureattachShaderprogramshaderbindAttribLocationbindBufferbindFramebufferbindRenderbufferbindTextureblendColorblendEquationblendEquationSeparatemodeRGBmodeAlphablendFuncsfactordfactorblendFuncSeparatesrcRGBdstRGBsrcAlphadstAlphabufferDatabufferSubDatacheckFramebufferStatusclearColorclearDepthclearStencilcolorMaskcompileShadercompressedTexImage2DinternalformatcompressedTexSubImage2DxoffsetyoffsetcopyTexImage2DcopyTexSubImage2DcreateBuffercreateFramebuffercreateProgramcreateRenderbuffercreateShadercreateTexturecullFacedeleteBufferdeleteFramebufferdeleteProgramdeleteRenderbufferdeleteShaderdeleteTexturedepthFuncdepthMaskdepthRangenearValfarValdetachShaderdisableVertexAttribArraydrawArraysdrawElementscapenableVertexAttribArrayfinishframebufferRenderbufferattachmentrenderbuffertargetrenderbufferframebufferTexture2DtextargetfrontFacegenerateMipmapgetActiveAttribgetActiveUniformgetAttachedShadersgetAttribLocationgetBufferParameterpnamegetErrorgetFramebufferAttachmentParametergetProgramParametergetProgramInfoLoggetRenderbufferParametergetShaderParametergetShaderPrecisionFormatshadertypeprecisiontypegetShaderInfoLoggetShaderSourcegetTexParametergetUniformgetUniformLocationgetVertexAttribgetVertexAttribOffsethintisEnabledisFramebufferframebufferisProgramisRenderbufferisShaderisTexturelinkProgrampixelStoreipolygonOffsetfactorunitsreadPixelspixelsrenderbufferStoragesampleCoveragecoveragescissorshaderSourcestencilFuncstencilFuncSeparatestencilMaskstencilMaskSeparatestencilOpzfailzpassstencilOpSeparatetexImage2Dopt_pixelstexParameterftexParameteritexSubImage2Duniform1funiform1fvuniform1iuniform1ivuniform2funiform2fvuniform2iuniform2ivuniform3fvalue3uniform3fvuniform3iuniform3ivuniform4fvalue4uniform4fvuniform4iuniform4ivuniformMatrix2fvtransposeuniformMatrix3fvuniformMatrix4fvuseProgramvalidateProgramvertexAttrib1findxvertexAttrib1fvvertexAttrib2fvertexAttrib2fvvertexAttrib3fvertexAttrib3fvvertexAttrib4fvertexAttrib4fvvertexAttribPointernormalizedstrideviewportWebGLContextAttributesstencilantialiaspremultipliedAlphapreserveDrawingBufferpreferLowPowerToHighPerformancefailIfMajorPerformanceCaveatWebGLContextEventWebGLShaderPrecisionFormatrangeMinrangeMaxprecisionWebGLObjectWebGLBufferWebGLFramebufferWebGLProgramWebGLRenderbufferWebGLShaderWebGLTextureWebGLActiveInfoWebGLUniformLocationOES_texture_floatOES_texture_half_floatHALF_FLOAT_OESWEBGL_lose_contextloseContextrestoreContextOES_standard_derivativesFRAGMENT_SHADER_DERIVATIVE_HINT_OESWebGLVertexArrayObjectOESOES_vertex_array_objectVERTEX_ARRAY_BINDING_OEScreateVertexArrayOESdeleteVertexArrayOESarrayObjectisVertexArrayOESbindVertexArrayOESWEBGL_debug_renderer_infoUNMASKED_VENDOR_WEBGLUNMASKED_RENDERER_WEBGLWEBGL_debug_shadersgetTranslatedShaderSourceWEBGL_compressed_texture_s3tcCOMPRESSED_RGB_S3TC_DXT1_EXTCOMPRESSED_RGBA_S3TC_DXT1_EXTCOMPRESSED_RGBA_S3TC_DXT3_EXTCOMPRESSED_RGBA_S3TC_DXT5_EXTOES_depth_textureOES_element_index_uintEXT_texture_filter_anisotropicTEXTURE_MAX_ANISOTROPY_EXTMAX_TEXTURE_MAX_ANISOTROPY_EXTWEBGL_draw_buffersCOLOR_ATTACHMENT0_WEBGLCOLOR_ATTACHMENT1_WEBGLCOLOR_ATTACHMENT2_WEBGLCOLOR_ATTACHMENT3_WEBGLCOLOR_ATTACHMENT4_WEBGLCOLOR_ATTACHMENT5_WEBGLCOLOR_ATTACHMENT6_WEBGLCOLOR_ATTACHMENT7_WEBGLCOLOR_ATTACHMENT8_WEBGLCOLOR_ATTACHMENT9_WEBGLCOLOR_ATTACHMENT10_WEBGLCOLOR_ATTACHMENT11_WEBGLCOLOR_ATTACHMENT12_WEBGLCOLOR_ATTACHMENT13_WEBGLCOLOR_ATTACHMENT14_WEBGLCOLOR_ATTACHMENT15_WEBGLDRAW_BUFFER0_WEBGLDRAW_BUFFER1_WEBGLDRAW_BUFFER2_WEBGLDRAW_BUFFER3_WEBGLDRAW_BUFFER4_WEBGLDRAW_BUFFER5_WEBGLDRAW_BUFFER6_WEBGLDRAW_BUFFER7_WEBGLDRAW_BUFFER8_WEBGLDRAW_BUFFER9_WEBGLDRAW_BUFFER10_WEBGLDRAW_BUFFER11_WEBGLDRAW_BUFFER12_WEBGLDRAW_BUFFER13_WEBGLDRAW_BUFFER14_WEBGLDRAW_BUFFER15_WEBGLMAX_COLOR_ATTACHMENTS_WEBGLMAX_DRAW_BUFFERS_WEBGLdrawBuffersWEBGLbuffersANGLE_instanced_arraysVERTEX_ATTRIB_ARRAY_DIVISOR_ANGLEdrawArraysInstancedANGLEprimcountdrawElementsInstancedANGLEvertexAttribDivisorANGLEdivisorDefinitions for WebGL functions as described at
http://www.khronos.org/registry/webgl/specs/latest/
* This file is current up to the WebGL 1.0.1 spec, including extensions.
* This relies on html5.js being included for Canvas and Typed Array support.
* This includes some extensions defined at
http://www.khronos.org/registry/webgl/extensions/
*!WebGLContextAttributesNote that this has side effects by enabling the extension even if the
result is not used.(ArrayBufferView|ArrayBuffer|number)(ArrayBufferView|ArrayBuffer)!WebGLBuffer!WebGLFramebuffer!WebGLProgram!WebGLRenderbuffer!WebGLShader!WebGLTexture!Array.<WebGLShader>Array.<WebGLShader>or width
or height
or border
(ImageData|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|number)ArrayBufferView=or format
(Float32Array|Array.<number>)(number|boolean)(Int32Array|Array.<number>|Array.<boolean>)http://www.khronos.org/registry/webgl/extensions/OES_texture_float/
http://www.khronos.org/registry/webgl/extensions/OES_texture_half_float/
http://www.khronos.org/registry/webgl/extensions/WEBGL_lose_context/
http://www.khronos.org/registry/webgl/extensions/OES_standard_derivatives/
http://www.khronos.org/registry/webgl/extensions/OES_vertex_array_object/
http://www.khronos.org/registry/webgl/extensions/WEBGL_debug_renderer_info/
http://www.khronos.org/registry/webgl/extensions/WEBGL_debug_shaders/
http://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_s3tc/
http://www.khronos.org/registry/webgl/extensions/OES_depth_texture/
http://www.khronos.org/registry/webgl/extensions/OES_element_index_uint/
http://www.khronos.org/registry/webgl/extensions/EXT_texture_filter_anisotropic/
https://www.khronos.org/registry/webgl/extensions/WEBGL_draw_buffers/
Draw buffers.
http://www.khronos.org/registry/webgl/extensions/ANGLE_instanced_arrays/
Primitive type.
First vertex.
Number of vertices per instance.
Number of instances.
Number of vertex indices per instance.
Type of a vertex index.
Offset to the first vertex index.
Attribute index.
Instance divisor.
functio ... xt() {}WebGLRe ... ContextWebGLRe ... ER_BIT;WebGLRe ... FER_BITWebGLRe ... POINTS;WebGLRe ... .POINTSWebGLRe ... .LINES;WebGLRe ... t.LINESWebGLRe ... E_LOOP;WebGLRe ... NE_LOOPWebGLRe ... _STRIP;WebGLRe ... E_STRIPWebGLRe ... ANGLES;WebGLRe ... IANGLESWebGLRe ... LE_FAN;WebGLRe ... GLE_FANWebGLRe ... t.ZERO;WebGLRe ... xt.ZEROWebGLRe ... xt.ONE;WebGLRe ... ext.ONEWebGLRe ... _COLOR;WebGLRe ... C_COLORWebGLRe ... _ALPHA;WebGLRe ... C_ALPHAWebGLRe ... T_ALPHAWebGLRe ... T_COLORWebGLRe ... TURATE;WebGLRe ... ATURATEWebGLRe ... NC_ADD;WebGLRe ... UNC_ADDWebGLRe ... UATION;WebGLRe ... QUATIONWebGLRe ... ON_RGB;WebGLRe ... ION_RGBWebGLRe ... N_ALPHAWebGLRe ... BTRACT;WebGLRe ... UBTRACTFUNC_RE ... UBTRACTWebGLRe ... ST_RGB;WebGLRe ... DST_RGBWebGLRe ... RC_RGB;WebGLRe ... SRC_RGBONE_MIN ... T_COLORONE_MIN ... T_ALPHAWebGLRe ... D_COLORWebGLRe ... BUFFER;WebGLRe ... _BUFFERWebGLRe ... INDING;WebGLRe ... BINDINGELEMENT ... BINDINGWebGLRe ... M_DRAW;WebGLRe ... AM_DRAWWebGLRe ... C_DRAW;WebGLRe ... IC_DRAWWebGLRe ... R_SIZE;WebGLRe ... ER_SIZEWebGLRe ... _USAGE;WebGLRe ... R_USAGEWebGLRe ... ATTRIB;WebGLRe ... _ATTRIBCURRENT ... _ATTRIBWebGLRe ... .FRONT;WebGLRe ... t.FRONTWebGLRe ... t.BACK;WebGLRe ... xt.BACKWebGLRe ... D_BACK;WebGLRe ... ND_BACKWebGLRe ... L_FACE;WebGLRe ... LL_FACEWebGLRe ... .BLEND;WebGLRe ... t.BLENDWebGLRe ... DITHER;WebGLRe ... .DITHERWebGLRe ... L_TEST;WebGLRe ... IL_TESTWebGLRe ... H_TEST;WebGLRe ... TH_TESTWebGLRe ... R_TEST;WebGLRe ... OR_TESTWebGLRe ... T_FILL;WebGLRe ... ET_FILLWebGLRe ... VERAGE;WebGLRe ... OVERAGESAMPLE_ ... OVERAGEWebGLRe ... _ERROR;WebGLRe ... O_ERRORWebGLRe ... D_ENUM;WebGLRe ... ID_ENUMWebGLRe ... _VALUE;WebGLRe ... D_VALUEWebGLRe ... RATION;WebGLRe ... ERATIONWebGLRe ... MEMORY;WebGLRe ... _MEMORYWebGLRe ... ext.CW;WebGLRe ... text.CWWebGLRe ... xt.CCW;WebGLRe ... ext.CCWWebGLRe ... _WIDTH;WebGLRe ... E_WIDTHWebGLRe ... _RANGE;WebGLRe ... E_RANGEALIASED ... E_RANGEWebGLRe ... H_RANGEALIASED ... H_RANGEWebGLRe ... E_MODE;WebGLRe ... CE_MODEWebGLRe ... T_FACE;WebGLRe ... NT_FACEWebGLRe ... TEMASK;WebGLRe ... ITEMASKWebGLRe ... R_VALUEWebGLRe ... H_FUNC;WebGLRe ... TH_FUNCWebGLRe ... L_FUNC;WebGLRe ... IL_FUNCWebGLRe ... L_FAIL;WebGLRe ... IL_FAILWebGLRe ... H_FAIL;WebGLRe ... TH_FAILSTENCIL ... TH_FAILWebGLRe ... H_PASS;WebGLRe ... TH_PASSSTENCIL ... TH_PASSWebGLRe ... IL_REF;WebGLRe ... CIL_REFWebGLRe ... E_MASK;WebGLRe ... UE_MASKWebGLRe ... K_FUNC;WebGLRe ... CK_FUNCWebGLRe ... K_FAIL;WebGLRe ... CK_FAILWebGLRe ... CK_REF;WebGLRe ... ACK_REFSTENCIL ... UE_MASKSTENCIL ... ITEMASKWebGLRe ... EWPORT;WebGLRe ... IEWPORTWebGLRe ... OR_BOX;WebGLRe ... SOR_BOXWebGLRe ... GNMENT;WebGLRe ... IGNMENTWebGLRe ... E_SIZE;WebGLRe ... RE_SIZEWebGLRe ... T_DIMS;WebGLRe ... RT_DIMSWebGLRe ... L_BITS;WebGLRe ... EL_BITSWebGLRe ... D_BITS;WebGLRe ... ED_BITSWebGLRe ... N_BITS;WebGLRe ... EN_BITSWebGLRe ... E_BITS;WebGLRe ... UE_BITSWebGLRe ... A_BITS;WebGLRe ... HA_BITSWebGLRe ... H_BITS;WebGLRe ... TH_BITSWebGLRe ... IL_BITSWebGLRe ... _UNITS;WebGLRe ... T_UNITSWebGLRe ... FACTOR;WebGLRe ... _FACTORPOLYGON ... _FACTORWebGLRe ... ING_2D;WebGLRe ... DING_2DWebGLRe ... UFFERS;WebGLRe ... BUFFERSWebGLRe ... AMPLES;WebGLRe ... SAMPLESWebGLRe ... E_VALUESAMPLE_ ... E_VALUEWebGLRe ... INVERT;WebGLRe ... _INVERTSAMPLE_ ... _INVERTWebGLRe ... ORMATS;WebGLRe ... FORMATSCOMPRES ... FORMATSWebGLRe ... T_CARE;WebGLRe ... NT_CAREWebGLRe ... ASTEST;WebGLRe ... FASTESTWebGLRe ... NICEST;WebGLRe ... .NICESTWebGLRe ... P_HINT;WebGLRe ... AP_HINTWebGLRe ... t.BYTE;WebGLRe ... xt.BYTEWebGLRe ... D_BYTE;WebGLRe ... ED_BYTEWebGLRe ... .SHORT;WebGLRe ... t.SHORTWebGLRe ... _SHORT;WebGLRe ... D_SHORTWebGLRe ... xt.INT;WebGLRe ... ext.INTWebGLRe ... ED_INT;WebGLRe ... NED_INTWebGLRe ... .FLOAT;WebGLRe ... t.FLOATWebGLRe ... PONENT;WebGLRe ... MPONENTWebGLRe ... .ALPHA;WebGLRe ... t.ALPHAWebGLRe ... xt.RGB;WebGLRe ... ext.RGBWebGLRe ... t.RGBA;WebGLRe ... xt.RGBAWebGLRe ... INANCE;WebGLRe ... MINANCEWebGLRe ... E_ALPHAWebGLRe ... _4_4_4;WebGLRe ... 4_4_4_4UNSIGNE ... 4_4_4_4WebGLRe ... _5_5_1;WebGLRe ... 5_5_5_1UNSIGNE ... 5_5_5_1WebGLRe ... _5_6_5;WebGLRe ... T_5_6_5WebGLRe ... SHADER;WebGLRe ... _SHADERWebGLRe ... TTRIBS;WebGLRe ... ATTRIBSWebGLRe ... ECTORS;WebGLRe ... VECTORSMAX_VER ... VECTORSWebGLRe ... E_UNITSMAX_COM ... E_UNITSMAX_VER ... E_UNITSMAX_TEX ... E_UNITSMAX_FRA ... VECTORSWebGLRe ... R_TYPE;WebGLRe ... ER_TYPEWebGLRe ... STATUS;WebGLRe ... _STATUSWebGLRe ... HADERS;WebGLRe ... SHADERSWebGLRe ... IFORMS;WebGLRe ... NIFORMSWebGLRe ... IBUTES;WebGLRe ... RIBUTESWebGLRe ... ERSION;WebGLRe ... VERSIONSHADING ... VERSIONWebGLRe ... ROGRAM;WebGLRe ... PROGRAMWebGLRe ... .NEVER;WebGLRe ... t.NEVERWebGLRe ... t.LESS;WebGLRe ... xt.LESSWebGLRe ... .EQUAL;WebGLRe ... t.EQUALWebGLRe ... LEQUAL;WebGLRe ... .LEQUALWebGLRe ... REATER;WebGLRe ... GREATERWebGLRe ... TEQUAL;WebGLRe ... OTEQUALWebGLRe ... GEQUAL;WebGLRe ... .GEQUALWebGLRe ... ALWAYS;WebGLRe ... .ALWAYSWebGLRe ... t.KEEP;WebGLRe ... xt.KEEPWebGLRe ... EPLACE;WebGLRe ... REPLACEWebGLRe ... t.INCR;WebGLRe ... xt.INCRWebGLRe ... t.DECR;WebGLRe ... xt.DECRWebGLRe ... .INVERTWebGLRe ... R_WRAP;WebGLRe ... CR_WRAPWebGLRe ... VENDOR;WebGLRe ... .VENDORWebGLRe ... NDERER;WebGLRe ... ENDERERWebGLRe ... EAREST;WebGLRe ... NEARESTWebGLRe ... LINEAR;WebGLRe ... .LINEARNEAREST ... NEARESTLINEAR_ ... NEARESTWebGLRe ... _LINEARNEAREST ... _LINEARWebGLRe ... FILTER;WebGLRe ... _FILTERWebGLRe ... WRAP_S;WebGLRe ... _WRAP_SWebGLRe ... WRAP_T;WebGLRe ... _WRAP_TWebGLRe ... URE_2D;WebGLRe ... TURE_2DWebGLRe ... EXTURE;WebGLRe ... TEXTUREWebGLRe ... BE_MAP;WebGLRe ... UBE_MAPTEXTURE ... UBE_MAPWebGLRe ... TIVE_X;WebGLRe ... ITIVE_XTEXTURE ... ITIVE_XWebGLRe ... ATIVE_XTEXTURE ... ATIVE_XWebGLRe ... TIVE_Y;WebGLRe ... ITIVE_YTEXTURE ... ITIVE_YWebGLRe ... ATIVE_YTEXTURE ... ATIVE_YWebGLRe ... TIVE_Z;WebGLRe ... ITIVE_ZTEXTURE ... ITIVE_ZWebGLRe ... ATIVE_ZTEXTURE ... ATIVE_ZMAX_CUB ... RE_SIZEWebGLRe ... XTURE0;WebGLRe ... EXTURE0WebGLRe ... XTURE1;WebGLRe ... EXTURE1WebGLRe ... XTURE2;WebGLRe ... EXTURE2WebGLRe ... XTURE3;WebGLRe ... EXTURE3WebGLRe ... XTURE4;WebGLRe ... EXTURE4WebGLRe ... XTURE5;WebGLRe ... EXTURE5WebGLRe ... XTURE6;WebGLRe ... EXTURE6WebGLRe ... XTURE7;WebGLRe ... EXTURE7WebGLRe ... XTURE8;WebGLRe ... EXTURE8WebGLRe ... XTURE9;WebGLRe ... EXTURE9WebGLRe ... TURE10;WebGLRe ... XTURE10WebGLRe ... TURE11;WebGLRe ... XTURE11WebGLRe ... TURE12;WebGLRe ... XTURE12WebGLRe ... TURE13;WebGLRe ... XTURE13WebGLRe ... TURE14;WebGLRe ... XTURE14WebGLRe ... TURE15;WebGLRe ... XTURE15WebGLRe ... TURE16;WebGLRe ... XTURE16WebGLRe ... TURE17;WebGLRe ... XTURE17WebGLRe ... TURE18;WebGLRe ... XTURE18WebGLRe ... TURE19;WebGLRe ... XTURE19WebGLRe ... TURE20;WebGLRe ... XTURE20WebGLRe ... TURE21;WebGLRe ... XTURE21WebGLRe ... TURE22;WebGLRe ... XTURE22WebGLRe ... TURE23;WebGLRe ... XTURE23WebGLRe ... TURE24;WebGLRe ... XTURE24WebGLRe ... TURE25;WebGLRe ... XTURE25WebGLRe ... TURE26;WebGLRe ... XTURE26WebGLRe ... TURE27;WebGLRe ... XTURE27WebGLRe ... TURE28;WebGLRe ... XTURE28WebGLRe ... TURE29;WebGLRe ... XTURE29WebGLRe ... TURE30;WebGLRe ... XTURE30WebGLRe ... TURE31;WebGLRe ... XTURE31WebGLRe ... REPEAT;WebGLRe ... .REPEATWebGLRe ... O_EDGE;WebGLRe ... TO_EDGEWebGLRe ... _REPEATWebGLRe ... T_VEC2;WebGLRe ... AT_VEC2WebGLRe ... T_VEC3;WebGLRe ... AT_VEC3WebGLRe ... T_VEC4;WebGLRe ... AT_VEC4WebGLRe ... NT_VEC2WebGLRe ... NT_VEC3WebGLRe ... NT_VEC4WebGLRe ... t.BOOL;WebGLRe ... xt.BOOLWebGLRe ... L_VEC2;WebGLRe ... OL_VEC2WebGLRe ... L_VEC3;WebGLRe ... OL_VEC3WebGLRe ... L_VEC4;WebGLRe ... OL_VEC4WebGLRe ... T_MAT2;WebGLRe ... AT_MAT2WebGLRe ... T_MAT3;WebGLRe ... AT_MAT3WebGLRe ... T_MAT4;WebGLRe ... AT_MAT4WebGLRe ... LER_2D;WebGLRe ... PLER_2DWebGLRe ... R_CUBE;WebGLRe ... ER_CUBEWebGLRe ... NABLED;WebGLRe ... ENABLEDVERTEX_ ... ENABLEDWebGLRe ... Y_SIZE;WebGLRe ... AY_SIZEVERTEX_ ... AY_SIZEWebGLRe ... STRIDE;WebGLRe ... _STRIDEVERTEX_ ... _STRIDEWebGLRe ... Y_TYPE;WebGLRe ... AY_TYPEVERTEX_ ... AY_TYPEWebGLRe ... ALIZED;WebGLRe ... MALIZEDVERTEX_ ... MALIZEDWebGLRe ... OINTER;WebGLRe ... POINTERVERTEX_ ... POINTERVERTEX_ ... BINDINGWebGLRe ... FORMAT;WebGLRe ... _FORMATIMPLEME ... _FORMATWebGLRe ... D_TYPE;WebGLRe ... AD_TYPEIMPLEME ... AD_TYPEWebGLRe ... _FLOAT;WebGLRe ... W_FLOATWebGLRe ... M_FLOATWebGLRe ... H_FLOATWebGLRe ... OW_INT;WebGLRe ... LOW_INTWebGLRe ... UM_INT;WebGLRe ... IUM_INTWebGLRe ... GH_INT;WebGLRe ... IGH_INTWebGLRe ... EBUFFERWebGLRe ... RBUFFERWebGLRe ... .RGBA4;WebGLRe ... t.RGBA4WebGLRe ... GB5_A1;WebGLRe ... RGB5_A1WebGLRe ... RGB565;WebGLRe ... .RGB565WebGLRe ... NENT16;WebGLRe ... ONENT16WebGLRe ... _INDEX;WebGLRe ... L_INDEXWebGLRe ... INDEX8;WebGLRe ... _INDEX8WebGLRe ... TENCIL;WebGLRe ... STENCILWebGLRe ... R_WIDTHWebGLRe ... HEIGHT;WebGLRe ... _HEIGHTRENDERB ... _FORMATWebGLRe ... D_SIZE;WebGLRe ... ED_SIZERENDERB ... ED_SIZEWebGLRe ... N_SIZE;WebGLRe ... EN_SIZERENDERB ... EN_SIZEWebGLRe ... UE_SIZERENDERB ... UE_SIZEWebGLRe ... A_SIZE;WebGLRe ... HA_SIZERENDERB ... HA_SIZEWebGLRe ... H_SIZE;WebGLRe ... TH_SIZERENDERB ... TH_SIZEWebGLRe ... L_SIZE;WebGLRe ... IL_SIZERENDERB ... IL_SIZEWebGLRe ... T_TYPE;WebGLRe ... CT_TYPEFRAMEBU ... CT_TYPEWebGLRe ... T_NAME;WebGLRe ... CT_NAMEFRAMEBU ... CT_NAMEWebGLRe ... _LEVEL;WebGLRe ... E_LEVELFRAMEBU ... E_LEVELWebGLRe ... P_FACE;WebGLRe ... AP_FACEFRAMEBU ... AP_FACEWebGLRe ... HMENT0;WebGLRe ... CHMENT0WebGLRe ... CHMENT;WebGLRe ... ACHMENTDEPTH_S ... ACHMENTWebGLRe ... t.NONE;WebGLRe ... xt.NONEWebGLRe ... MPLETE;WebGLRe ... OMPLETEFRAMEBU ... ACHMENTWebGLRe ... NSIONS;WebGLRe ... ENSIONSFRAMEBU ... ENSIONSWebGLRe ... PORTED;WebGLRe ... PPORTEDFRAMEBU ... PPORTEDMAX_REN ... ER_SIZEINVALID ... ERATIONWebGLRe ... _WEBGL;WebGLRe ... Y_WEBGLWebGLRe ... A_WEBGLUNPACK_ ... A_WEBGLWebGLRe ... T_WEBGLWebGLRe ... N_WEBGLUNPACK_ ... N_WEBGLBROWSER ... T_WEBGLWebGLRe ... ototypeWebGLRe ... e.LINESWebGLRe ... e.ZERO;WebGLRe ... pe.ZEROWebGLRe ... pe.ONE;WebGLRe ... ype.ONEWebGLRe ... e.FRONTWebGLRe ... e.BACK;WebGLRe ... pe.BACKWebGLRe ... e.BLENDWebGLRe ... ype.CW;WebGLRe ... type.CWWebGLRe ... pe.CCW;WebGLRe ... ype.CCWWebGLRe ... e.BYTE;WebGLRe ... pe.BYTEWebGLRe ... e.SHORTWebGLRe ... pe.INT;WebGLRe ... ype.INTWebGLRe ... e.FLOATWebGLRe ... e.ALPHAWebGLRe ... pe.RGB;WebGLRe ... ype.RGBWebGLRe ... e.RGBA;WebGLRe ... pe.RGBAWebGLRe ... e.NEVERWebGLRe ... e.LESS;WebGLRe ... pe.LESSWebGLRe ... e.EQUALWebGLRe ... e.KEEP;WebGLRe ... pe.KEEPWebGLRe ... e.INCR;WebGLRe ... pe.INCRWebGLRe ... e.DECR;WebGLRe ... pe.DECRWebGLRe ... e.BOOL;WebGLRe ... pe.BOOLWebGLRe ... e.RGBA4WebGLRe ... e.NONE;WebGLRe ... pe.NONEWebGLRe ... canvas;WebGLRe ... .canvasWebGLRe ... rWidth;WebGLRe ... erWidthWebGLRe ... Height;WebGLRe ... rHeightWebGLRe ... n() {};WebGLRe ... on() {}WebGLRe ... ributesWebGLRe ... extLostWebGLRe ... ensionsgetSupp ... ensionsWebGLRe ... me) {};WebGLRe ... ame) {}WebGLRe ... tensionWebGLRe ... re) {};WebGLRe ... ure) {}WebGLRe ... Texturefunction(texture) {}WebGLRe ... er) {};WebGLRe ... der) {}WebGLRe ... hShaderfunctio ... der) {}WebGLRe ... ocationWebGLRe ... fer) {}WebGLRe ... dBufferWebGLRe ... ebufferWebGLRe ... rbufferWebGLRe ... ha) {};WebGLRe ... pha) {}WebGLRe ... ndColorfunctio ... pha) {}WebGLRe ... de) {};WebGLRe ... ode) {}WebGLRe ... quationWebGLRe ... eparateblendEq ... eparateWebGLRe ... or) {};WebGLRe ... tor) {}WebGLRe ... endFuncWebGLRe ... ge) {};WebGLRe ... age) {}WebGLRe ... ferDataWebGLRe ... ta) {};WebGLRe ... ata) {}WebGLRe ... SubDataWebGLRe ... et) {};WebGLRe ... get) {}WebGLRe ... rStatuscheckFr ... rStatusWebGLRe ... sk) {};WebGLRe ... ask) {}WebGLRe ... e.clearWebGLRe ... arColorWebGLRe ... th) {};WebGLRe ... pth) {}WebGLRe ... arDepthfunction(depth) {}WebGLRe ... (s) {};WebGLRe ... n(s) {}WebGLRe ... StencilWebGLRe ... lorMaskWebGLRe ... eShaderfunction(shader) {}WebGLRe ... Image2Dcompres ... Image2DWebGLRe ... ht) {};WebGLRe ... ght) {}WebGLRe ... eBufferWebGLRe ... ProgramWebGLRe ... pe) {};WebGLRe ... ype) {}WebGLRe ... ullFaceWebGLRe ... am) {};WebGLRe ... ram) {}function(program) {}WebGLRe ... nc) {};WebGLRe ... unc) {}WebGLRe ... pthFuncfunction(func) {}WebGLRe ... ag) {};WebGLRe ... lag) {}WebGLRe ... pthMaskWebGLRe ... al) {};WebGLRe ... Val) {}WebGLRe ... thRangefunctio ... Val) {}WebGLRe ... gs) {};WebGLRe ... ags) {}WebGLRe ... disableWebGLRe ... ex) {};WebGLRe ... dex) {}WebGLRe ... ibArraydisable ... ibArrayWebGLRe ... nt) {};WebGLRe ... unt) {}WebGLRe ... wArraysWebGLRe ... set) {}WebGLRe ... lementsWebGLRe ... ap) {};WebGLRe ... cap) {}WebGLRe ... .enablefunction(cap) {}enableV ... ibArrayWebGLRe ... .finishWebGLRe ... e.flushframebu ... rbufferWebGLRe ... el) {};WebGLRe ... vel) {}WebGLRe ... xture2DWebGLRe ... ontFaceWebGLRe ... eMipmapWebGLRe ... eAttribWebGLRe ... UniformWebGLRe ... ShadersWebGLRe ... rameterfunction(pname) {}WebGLRe ... etErrorgetFram ... rameterWebGLRe ... InfoLoggetRend ... rameterWebGLRe ... nFormatgetShad ... nFormatWebGLRe ... rSourceWebGLRe ... on) {};WebGLRe ... ion) {}WebGLRe ... xAttribWebGLRe ... bOffsetgetVert ... bOffsetWebGLRe ... pe.hintWebGLRe ... sBufferWebGLRe ... EnabledWebGLRe ... sShaderWebGLRe ... dth) {}WebGLRe ... neWidthfunction(width) {}WebGLRe ... lStoreiWebGLRe ... ts) {};WebGLRe ... its) {}WebGLRe ... nOffsetWebGLRe ... ls) {};WebGLRe ... els) {}WebGLRe ... dPixelsfunctio ... els) {}WebGLRe ... StorageWebGLRe ... rt) {};WebGLRe ... ert) {}WebGLRe ... overageWebGLRe ... scissorWebGLRe ... ce) {};WebGLRe ... rce) {}WebGLRe ... cilFuncfunctio ... ask) {}WebGLRe ... cilMaskWebGLRe ... ss) {};WebGLRe ... ass) {}WebGLRe ... encilOpfunctio ... ass) {}WebGLRe ... ameterfWebGLRe ... ameteriWebGLRe ... ue) {};WebGLRe ... lue) {}WebGLRe ... iform1fWebGLRe ... form1fvWebGLRe ... iform1iWebGLRe ... form1ivWebGLRe ... e2) {};WebGLRe ... ue2) {}WebGLRe ... iform2fWebGLRe ... form2fvWebGLRe ... iform2iWebGLRe ... form2ivWebGLRe ... e3) {};WebGLRe ... ue3) {}WebGLRe ... iform3ffunctio ... ue3) {}WebGLRe ... form3fvWebGLRe ... iform3iWebGLRe ... form3ivWebGLRe ... e4) {};WebGLRe ... ue4) {}WebGLRe ... iform4ffunctio ... ue4) {}WebGLRe ... form4fvWebGLRe ... iform4iWebGLRe ... form4ivWebGLRe ... trix2fvWebGLRe ... trix3fvWebGLRe ... trix4fvWebGLRe ...  x) {};WebGLRe ... , x) {}WebGLRe ... ttrib1ffunction(indx, x) {}WebGLRe ... es) {};WebGLRe ... ues) {}WebGLRe ... trib1fvfunctio ... ues) {}WebGLRe ...  y) {};WebGLRe ... , y) {}WebGLRe ... ttrib2fWebGLRe ... trib2fvWebGLRe ...  z) {};WebGLRe ... , z) {}WebGLRe ... ttrib3ffunctio ... , z) {}WebGLRe ... trib3fvWebGLRe ...  w) {};WebGLRe ... , w) {}WebGLRe ... ttrib4ffunctio ... , w) {}WebGLRe ... trib4fvWebGLRe ... PointerWebGLRe ... iewportWebGLCo ... ributesWebGLCo ... .alpha;WebGLCo ... e.alphaWebGLCo ... ototypeWebGLCo ... .depth;WebGLCo ... e.depthWebGLCo ... tencil;WebGLCo ... stencilWebGLCo ... ialias;WebGLCo ... tialiasWebGLCo ... dAlpha;WebGLCo ... edAlphaWebGLCo ... Buffer;WebGLCo ... gBufferpreserv ... gBufferWebGLCo ... rmance;WebGLCo ... ormancepreferL ... ormanceWebGLCo ... Caveat;WebGLCo ... eCaveatfailIfM ... eCaveatWebGLCo ... essage;WebGLCo ... Messagefunctio ... at() {}WebGLSh ... nFormatWebGLSh ... ngeMin;WebGLSh ... angeMinWebGLSh ... ototypeWebGLSh ... ngeMax;WebGLSh ... angeMaxWebGLSh ... cision;WebGLSh ... ecisionWebGLAc ... e.size;WebGLAc ... pe.sizeWebGLAc ... ototypeWebGLAc ... e.type;WebGLAc ... pe.typeWebGLAc ... e.name;WebGLAc ... pe.nameOES_tex ... f_floatOES_tex ... AT_OES;OES_tex ... OAT_OESOES_tex ... ototypeWEBGL_l ... n() {};WEBGL_l ... on() {}WEBGL_l ... ContextWEBGL_l ... ototypeOES_sta ... vativesOES_sta ... NT_OES;OES_sta ... INT_OESOES_sta ... ototypeFRAGMEN ... INT_OESfunctio ... ES() {}WebGLVe ... jectOESOES_ver ... _objectOES_ver ... NG_OES;OES_ver ... ING_OESOES_ver ... ototypeVERTEX_ ... ING_OESOES_ver ... n() {};OES_ver ... on() {}OES_ver ... rrayOESOES_ver ... ct) {};OES_ver ... ect) {}WEBGL_d ... er_infoWEBGL_d ... _WEBGL;WEBGL_d ... R_WEBGLWEBGL_d ... ototypeUNMASKE ... R_WEBGLWEBGL_d ... er) {};WEBGL_d ... der) {}WEBGL_d ... rSourcegetTran ... rSourcefunctio ... tc() {}WEBGL_c ... re_s3tcWEBGL_c ... T1_EXT;WEBGL_c ... XT1_EXTWEBGL_c ... ototypeCOMPRES ... XT1_EXTWEBGL_c ... T3_EXT;WEBGL_c ... XT3_EXTCOMPRES ... XT3_EXTWEBGL_c ... T5_EXT;WEBGL_c ... XT5_EXTCOMPRES ... XT5_EXTOES_ele ... ex_uintfunctio ... ic() {}EXT_tex ... otropicEXT_tex ... PY_EXT;EXT_tex ... OPY_EXTEXT_tex ... ototypeTEXTURE ... OPY_EXTMAX_TEX ... OPY_EXTWEBGL_d ... 0_WEBGLCOLOR_A ... 0_WEBGLWEBGL_d ... 1_WEBGLCOLOR_A ... 1_WEBGLWEBGL_d ... 2_WEBGLCOLOR_A ... 2_WEBGLWEBGL_d ... 3_WEBGLCOLOR_A ... 3_WEBGLWEBGL_d ... 4_WEBGLCOLOR_A ... 4_WEBGLWEBGL_d ... 5_WEBGLCOLOR_A ... 5_WEBGLWEBGL_d ... 6_WEBGLCOLOR_A ... 6_WEBGLWEBGL_d ... 7_WEBGLCOLOR_A ... 7_WEBGLWEBGL_d ... 8_WEBGLCOLOR_A ... 8_WEBGLWEBGL_d ... 9_WEBGLCOLOR_A ... 9_WEBGLWEBGL_d ... S_WEBGLMAX_COL ... S_WEBGLMAX_DRA ... S_WEBGLWEBGL_d ... rs) {};WEBGL_d ... ers) {}WEBGL_d ... rsWEBGLfunction(buffers) {}functio ... ys() {}ANGLE_i ... _arraysANGLE_i ... _ANGLE;ANGLE_i ... R_ANGLEANGLE_i ... ototypeVERTEX_ ... R_ANGLEANGLE_i ... nt) {};ANGLE_i ... unt) {}ANGLE_i ... edANGLEdrawArr ... edANGLEdrawEle ... edANGLEANGLE_i ... or) {};ANGLE_i ... sor) {}ANGLE_i ... orANGLEvertexA ... orANGLE/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/webkit_css.js
 * @fileoverview Definitions for WebKit's custom CSS properties. Copied from:
 * {@link
 * http://trac.webkit.org/browser/trunk/Source/WebCore/css/CSSPropertyNames.in}
 *
 * If you make changes to this file, notice that every property appears
 * twice: once as an uppercase name and once as a lowercase name.
 * WebKit allows both. The uppercase version is preferred.
 *
 * @externs
 * @author nicksantos@google.com (Nick Santos)
  WebKit also adds bindings for the lowercase versions of these properties.// WebK ... erties. The uppercase version is preferred.// The  ... ferred.
 * @constructor
 * @param {number} x
 * @param {number} y
 /**\n *  ... } y\n */WebkitAlignContentWebkitAlignItemsWebkitAlignSelfWebkitAnimationWebkitAnimationDelayWebkitAnimationDirectionWebkitAnimationDurationWebkitAnimationFillModeWebkitAnimationIterationCountWebkitAnimationNameWebkitAnimationPlayStateWebkitAnimationTimingFunctionWebkitAppearanceWebkitAppRegionWebkitAspectRatioWebkitBackfaceVisibilityWebkitBackgroundClipWebkitBackgroundCompositeWebkitBackgroundOriginWebkitBackgroundSizeWebkitBindingWebkitBlendModeWebkitBorderAfterWebkitBorderAfterColorWebkitBorderAfterStyleWebkitBorderAfterWidthWebkitBorderBeforeWebkitBorderBeforeColorWebkitBorderBeforeStyleWebkitBorderBeforeWidthWebkitBorderBottomLeftRadiusWebkitBorderBottomRightRadiusWebkitBorderEndWebkitBorderEndColorWebkitBorderEndStyleWebkitBorderEndWidthWebkitBorderFitWebkitBorderHorizontalSpacingWebkitBorderImageWebkitBorderRadiusWebkitBorderStartWebkitBorderStartColorWebkitBorderStartStyleWebkitBorderStartWidthWebkitBorderTopLeftRadiusWebkitBorderTopRightRadiusWebkitBorderVerticalSpacingWebkitBoxAlignWebkitBoxDecorationBreakWebkitBoxDirectionWebkitBoxFlexWebkitBoxFlexGroupWebkitBoxLinesWebkitBoxOrdinalGroupWebkitBoxOrientWebkitBoxPackWebkitBoxReflectWebkitBoxShadowWebkitBoxSizingWebkitColorCorrectionWebkitColumnAxisWebkitColumnBreakAfterWebkitColumnBreakBeforeWebkitColumnBreakInsideWebkitColumnCountWebkitColumnGapWebkitColumnProgressionWebkitColumnRuleWebkitColumnRuleColorWebkitColumnRuleStyleWebkitColumnRuleWidthWebkitColumnsWebkitColumnSpanWebkitColumnWidthWebkitDashboardRegionWebkitFilterWebkitFlexWebkitFlexBasisWebkitFlexDirectionWebkitFlexFlowWebkitFlexGrowWebkitFlexShrinkWebkitFlexWrapWebkitFlowFromWebkitFlowIntoWebkitFontSizeDeltaWebkitFontSmoothingWebkitGridColumnWebkitGridColumnsWebkitGridRowWebkitGridRowsWebkitHighlightWebkitHyphenateCharacterWebkitHyphenateLimitAfterWebkitHyphenateLimitBeforeWebkitHyphenateLimitLinesWebkitHyphensWebkitJustifyContentWebkitLineAlignWebkitLineBoxContainWebkitLineBreakWebkitLineClampWebkitLineGridWebkitLineSnapWebkitLocaleWebkitLogicalHeightWebkitLogicalWidthWebkitMarginAfterWebkitMarginAfterCollapseWebkitMarginBeforeWebkitMarginBeforeCollapseWebkitMarginBottomCollapseWebkitMarginCollapseWebkitMarginEndWebkitMarginStartWebkitMarginTopCollapseWebkitMarqueeWebkitMarqueeDirectionWebkitMarqueeIncrementWebkitMarqueeRepetitionWebkitMarqueeSpeedWebkitMarqueeStyleWebkitMaskWebkitMaskAttachmentWebkitMaskBoxImageWebkitMaskBoxImageOutsetWebkitMaskBoxImageRepeatWebkitMaskBoxImageSliceWebkitMaskBoxImageSourceWebkitMaskBoxImageWidthWebkitMaskClipWebkitMaskCompositeWebkitMaskImageWebkitMaskOriginWebkitMaskPositionWebkitMaskPositionXWebkitMaskPositionYWebkitMaskRepeatWebkitMaskRepeatXWebkitMaskRepeatYWebkitMaskSizeWebkitMatchNearestMailBlockquoteColorWebkitMaxLogicalHeightWebkitMaxLogicalWidthWebkitMinLogicalHeightWebkitMinLogicalWidthWebkitNbspModeWebkitOrderWebkitOverflowScrollingWebkitPaddingAfterWebkitPaddingBeforeWebkitPaddingEndWebkitPaddingStartWebkitPerspectiveWebkitPerspectiveOriginWebkitPerspectiveOriginXWebkitPerspectiveOriginYWebkitPrintColorAdjustWebkitRegionBreakAfterWebkitRegionBreakBeforeWebkitRegionBreakInsideWebkitRegionOverflowWebkitRtlOrderingWebkitRubyPositionWebkitShapeInsideWebkitShapeMarginWebkitShapeOutsideWebkitShapePaddingWebkitTapHighlightColorWebkitTextAlignLastWebkitTextCombineWebkitTextDecorationLineWebkitTextDecorationsInEffectWebkitTextDecorationStyleWebkitTextEmphasisWebkitTextEmphasisColorWebkitTextEmphasisPositionWebkitTextEmphasisStyleWebkitTextFillColorWebkitTextOrientationWebkitTextSecurityWebkitTextSizeAdjustWebkitTextStrokeWebkitTextStrokeColorWebkitTextStrokeWidthWebkitTransformWebkitTransformOriginWebkitTransformOriginXWebkitTransformOriginYWebkitTransformOriginZWebkitTransformStyleWebkitTransitionWebkitTransitionDelayWebkitTransitionDurationWebkitTransitionPropertyWebkitTransitionRepeatCountWebkitTransitionTimingFunctionWebkitUserDragWebkitUserModifyWebkitUserSelectWebkitWrapWebkitWrapFlowWebkitWrapThroughWebkitWritingModewebkitAlignContentwebkitAlignItemswebkitAlignSelfwebkitAnimationwebkitAnimationDelaywebkitAnimationDirectionwebkitAnimationDurationwebkitAnimationFillModewebkitAnimationIterationCountwebkitAnimationNamewebkitAnimationPlayStatewebkitAnimationTimingFunctionwebkitAppearancewebkitAppRegionwebkitAspectRatiowebkitBackfaceVisibilitywebkitBackgroundClipwebkitBackgroundCompositewebkitBackgroundOriginwebkitBackgroundSizewebkitBindingwebkitBlendModewebkitBorderAfterwebkitBorderAfterColorwebkitBorderAfterStylewebkitBorderAfterWidthwebkitBorderBeforewebkitBorderBeforeColorwebkitBorderBeforeStylewebkitBorderBeforeWidthwebkitBorderBottomLeftRadiuswebkitBorderBottomRightRadiuswebkitBorderEndwebkitBorderEndColorwebkitBorderEndStylewebkitBorderEndWidthwebkitBorderFitwebkitBorderHorizontalSpacingwebkitBorderImagewebkitBorderRadiuswebkitBorderStartwebkitBorderStartColorwebkitBorderStartStylewebkitBorderStartWidthwebkitBorderTopLeftRadiuswebkitBorderTopRightRadiuswebkitBorderVerticalSpacingwebkitBoxAlignwebkitBoxDecorationBreakwebkitBoxDirectionwebkitBoxFlexwebkitBoxFlexGroupwebkitBoxLineswebkitBoxOrdinalGroupwebkitBoxOrientwebkitBoxPackwebkitBoxReflectwebkitBoxShadowwebkitBoxSizingwebkitColorCorrectionwebkitColumnAxiswebkitColumnBreakAfterwebkitColumnBreakBeforewebkitColumnBreakInsidewebkitColumnCountwebkitColumnGapwebkitColumnProgressionwebkitColumnRulewebkitColumnRuleColorwebkitColumnRuleStylewebkitColumnRuleWidthwebkitColumnswebkitColumnSpanwebkitColumnWidthwebkitDashboardRegionwebkitFilterwebkitFlexwebkitFlexBasiswebkitFlexDirectionwebkitFlexFlowwebkitFlexGrowwebkitFlexShrinkwebkitFlexWrapwebkitFlowFromwebkitFlowIntowebkitFontSizeDeltawebkitFontSmoothingwebkitGridColumnwebkitGridColumnswebkitGridRowwebkitGridRowswebkitHighlightwebkitHyphenateCharacterwebkitHyphenateLimitAfterwebkitHyphenateLimitBeforewebkitHyphenateLimitLineswebkitHyphenswebkitJustifyContentwebkitLineAlignwebkitLineBoxContainwebkitLineBreakwebkitLineClampwebkitLineGridwebkitLineSnapwebkitLocalewebkitLogicalHeightwebkitLogicalWidthwebkitMarginAfterwebkitMarginAfterCollapsewebkitMarginBeforewebkitMarginBeforeCollapsewebkitMarginBottomCollapsewebkitMarginCollapsewebkitMarginEndwebkitMarginStartwebkitMarginTopCollapsewebkitMarqueewebkitMarqueeDirectionwebkitMarqueeIncrementwebkitMarqueeRepetitionwebkitMarqueeSpeedwebkitMarqueeStylewebkitMaskwebkitMaskAttachmentwebkitMaskBoxImagewebkitMaskBoxImageOutsetwebkitMaskBoxImageRepeatwebkitMaskBoxImageSlicewebkitMaskBoxImageSourcewebkitMaskBoxImageWidthwebkitMaskClipwebkitMaskCompositewebkitMaskImagewebkitMaskOriginwebkitMaskPositionwebkitMaskPositionXwebkitMaskPositionYwebkitMaskRepeatwebkitMaskRepeatXwebkitMaskRepeatYwebkitMaskSizewebkitMatchNearestMailBlockquoteColorwebkitMaxLogicalHeightwebkitMaxLogicalWidthwebkitMinLogicalHeightwebkitMinLogicalWidthwebkitNbspModewebkitOrderwebkitOverflowScrollingwebkitPaddingAfterwebkitPaddingBeforewebkitPaddingEndwebkitPaddingStartwebkitPerspectivewebkitPerspectiveOriginwebkitPerspectiveOriginXwebkitPerspectiveOriginYwebkitPrintColorAdjustwebkitRegionBreakAfterwebkitRegionBreakBeforewebkitRegionBreakInsidewebkitRegionOverflowwebkitRtlOrderingwebkitRubyPositionwebkitShapeInsidewebkitShapeMarginwebkitShapeOutsidewebkitShapePaddingwebkitTapHighlightColorwebkitTextAlignLastwebkitTextCombinewebkitTextDecorationLinewebkitTextDecorationsInEffectwebkitTextDecorationStylewebkitTextEmphasiswebkitTextEmphasisColorwebkitTextEmphasisPositionwebkitTextEmphasisStylewebkitTextFillColorwebkitTextOrientationwebkitTextSecuritywebkitTextSizeAdjustwebkitTextStrokewebkitTextStrokeColorwebkitTextStrokeWidthwebkitTransformwebkitTransformOriginwebkitTransformOriginXwebkitTransformOriginYwebkitTransformOriginZwebkitTransformStylewebkitTransitionwebkitTransitionDelaywebkitTransitionDurationwebkitTransitionPropertywebkitTransitionRepeatCountwebkitTransitionTimingFunctionwebkitUserDragwebkitUserModifywebkitUserSelectwebkitWrapwebkitWrapFlowwebkitWrapThroughwebkitWritingModeWebKitPointDefinitions for WebKit's custom CSS properties. Copied from:
{@link
http://trac.webkit.org/browser/trunk/Source/WebCore/css/CSSPropertyNames.in}
* If you make changes to this file, notice that every property appears
twice: once as an uppercase name and once as a lowercase name.
WebKit allows both. The uppercase version is preferred.
*CSSProp ... mation;CSSProp ... imationWebkitA ... rectionWebkitA ... urationCSSProp ... llMode;CSSProp ... illModeWebkitA ... illModeCSSProp ... onCountWebkitA ... onCountCSSProp ... onName;CSSProp ... ionNameCSSProp ... yState;CSSProp ... ayStateWebkitA ... ayStateWebkitA ... unctionCSSProp ... pRegionCSSProp ... tRatio;CSSProp ... ctRatioWebkitB ... ibilityCSSProp ... posite;CSSProp ... mpositeWebkitB ... mpositeWebkitB ... dOriginCSSProp ... ndMode;CSSProp ... endModeCSSProp ... rAfter;CSSProp ... erAfterWebkitB ... erColorWebkitB ... erStyleWebkitB ... erWidthCSSProp ... rBeforeCSSProp ... reColorWebkitB ... reColorCSSProp ... reStyleWebkitB ... reStyleCSSProp ... reWidthWebkitB ... reWidthWebkitB ... tRadiusCSSProp ... derFit;CSSProp ... rderFitWebkitB ... SpacingWebkitB ... rtColorWebkitB ... rtStyleWebkitB ... rtWidthCSSProp ... nBreak;CSSProp ... onBreakWebkitB ... onBreakCSSProp ... xGroup;CSSProp ... exGroupCSSProp ... xLines;CSSProp ... oxLinesWebkitB ... alGroupCSSProp ... eflect;CSSProp ... ReflectWebkitC ... rectionCSSProp ... mnAxis;CSSProp ... umnAxisWebkitC ... akAfterWebkitC ... kBeforeWebkitC ... kInsideWebkitC ... ressionWebkitC ... leColorWebkitC ... leStyleWebkitC ... leWidthCSSProp ... olumns;CSSProp ... ColumnsCSSProp ... mnSpan;CSSProp ... umnSpanCSSProp ... dRegionWebkitD ... dRegionCSSProp ... tFilterCSSProp ... itFlex;CSSProp ... kitFlexCSSProp ... owFrom;CSSProp ... lowFromCSSProp ... owInto;CSSProp ... lowIntoCSSProp ... eDelta;CSSProp ... zeDeltaCSSProp ... othing;CSSProp ... oothingCSSProp ... Column;CSSProp ... dColumnCSSProp ... ridRow;CSSProp ... GridRowCSSProp ... idRows;CSSProp ... ridRowsCSSProp ... hlight;CSSProp ... ghlightCSSProp ... racter;CSSProp ... aracterWebkitH ... aracterCSSProp ... tAfter;CSSProp ... itAfterWebkitH ... itAfterCSSProp ... tBeforeWebkitH ... tBeforeCSSProp ... tLines;CSSProp ... itLinesWebkitH ... itLinesCSSProp ... yphens;CSSProp ... HyphensCSSProp ... eAlign;CSSProp ... neAlignCSSProp ... ontain;CSSProp ... ContainCSSProp ... eClamp;CSSProp ... neClampCSSProp ... neGrid;CSSProp ... ineGridCSSProp ... neSnap;CSSProp ... ineSnapCSSProp ... Locale;CSSProp ... tLocaleCSSProp ... alWidthCSSProp ... nAfter;CSSProp ... inAfterWebkitM ... ollapseCSSProp ... nBeforeCSSProp ... arquee;CSSProp ... MarqueeWebkitM ... rectionWebkitM ... crementCSSProp ... tition;CSSProp ... etitionWebkitM ... etitionCSSProp ... eSpeed;CSSProp ... eeSpeedCSSProp ... eeStyleCSSProp ... itMask;CSSProp ... kitMaskCSSProp ... xImage;CSSProp ... oxImageWebkitM ... eOutsetWebkitM ... eRepeatWebkitM ... geSliceWebkitM ... eSourceWebkitM ... geWidthCSSProp ... skClip;CSSProp ... askClipCSSProp ... kImage;CSSProp ... skImageCSSProp ... kOriginCSSProp ... kRepeatCSSProp ... epeatX;CSSProp ... RepeatXCSSProp ... epeatY;CSSProp ... RepeatYCSSProp ... skSize;CSSProp ... askSizeCSSProp ... teColorWebkitM ... teColorWebkitM ... lHeightWebkitM ... alWidthCSSProp ... spMode;CSSProp ... bspModeCSSProp ... tOrder;CSSProp ... itOrderCSSProp ... olling;CSSProp ... rollingWebkitO ... rollingCSSProp ... gAfter;CSSProp ... ngAfterCSSProp ... gBeforeWebkitP ... eOriginCSSProp ... riginX;CSSProp ... OriginXWebkitP ... OriginXCSSProp ... riginY;CSSProp ... OriginYWebkitP ... OriginYCSSProp ... rAdjustWebkitP ... rAdjustWebkitR ... akAfterWebkitR ... kBeforeWebkitR ... kInsideCSSProp ... dering;CSSProp ... rderingCSSProp ... eInsideCSSProp ... Margin;CSSProp ... eMarginCSSProp ... utside;CSSProp ... OutsideCSSProp ... PaddingWebkitT ... htColorCSSProp ... ombine;CSSProp ... CombineCSSProp ... onLine;CSSProp ... ionLineWebkitT ... ionLineCSSProp ... Effect;CSSProp ... nEffectWebkitT ... nEffectCSSProp ... nStyle;CSSProp ... onStyleWebkitT ... onStyleCSSProp ... phasis;CSSProp ... mphasisCSSProp ... sColor;CSSProp ... isColorWebkitT ... isColorWebkitT ... ositionCSSProp ... sStyle;CSSProp ... isStyleWebkitT ... isStyleCSSProp ... lColor;CSSProp ... llColorCSSProp ... tation;CSSProp ... ntationWebkitT ... ntationCSSProp ... curity;CSSProp ... ecurityCSSProp ... Stroke;CSSProp ... tStrokeCSSProp ... keColorWebkitT ... keColorCSSProp ... keWidthWebkitT ... keWidthWebkitT ... mOriginWebkitT ... OriginXWebkitT ... OriginYCSSProp ... riginZ;CSSProp ... OriginZWebkitT ... OriginZWebkitT ... onDelayWebkitT ... urationWebkitT ... ropertyCSSProp ... tCount;CSSProp ... atCountWebkitT ... atCountWebkitT ... unctionCSSProp ... erDrag;CSSProp ... serDragCSSProp ... itWrap;CSSProp ... kitWrapCSSProp ... apFlow;CSSProp ... rapFlowCSSProp ... hrough;CSSProp ... ThroughwebkitA ... rectionwebkitA ... urationwebkitA ... illModewebkitA ... onCountwebkitA ... ayStatewebkitA ... unctionwebkitB ... ibilitywebkitB ... mpositewebkitB ... dOriginwebkitB ... erColorwebkitB ... erStylewebkitB ... erWidthwebkitB ... reColorwebkitB ... reStylewebkitB ... reWidthwebkitB ... tRadiuswebkitB ... SpacingwebkitB ... rtColorwebkitB ... rtStylewebkitB ... rtWidthwebkitB ... onBreakwebkitB ... alGroupwebkitC ... rectionwebkitC ... akAfterwebkitC ... kBeforewebkitC ... kInsidewebkitC ... ressionwebkitC ... leColorwebkitC ... leStylewebkitC ... leWidthwebkitD ... dRegionwebkitH ... aracterwebkitH ... itAfterwebkitH ... tBeforewebkitH ... itLineswebkitM ... ollapsewebkitM ... rectionwebkitM ... crementwebkitM ... etitionwebkitM ... eOutsetwebkitM ... eRepeatwebkitM ... geSlicewebkitM ... eSourcewebkitM ... geWidthwebkitM ... teColorwebkitM ... lHeightwebkitM ... alWidthwebkitO ... rollingwebkitP ... eOriginwebkitP ... OriginXwebkitP ... OriginYwebkitP ... rAdjustwebkitR ... akAfterwebkitR ... kBeforewebkitR ... kInsidewebkitT ... htColorwebkitT ... ionLinewebkitT ... nEffectwebkitT ... onStylewebkitT ... isColorwebkitT ... ositionwebkitT ... isStylewebkitT ... ntationwebkitT ... keColorwebkitT ... keWidthwebkitT ... mOriginwebkitT ... OriginXwebkitT ... OriginYwebkitT ... OriginZwebkitT ... onDelaywebkitT ... urationwebkitT ... ropertywebkitT ... atCountwebkitT ... unctionWebKitP ... type.x;WebKitP ... otype.xWebKitP ... ototypeWebKitP ... type.y;WebKitP ... otype.y/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/webkit_dom.js
 * @fileoverview Definitions for all the extensions over W3C's DOM
 *  specification by WebKit. This file depends on w3c_dom2.js.
 *  All the provided definitions has been type annotated
 *
 * @externs
 
 * @param {boolean=} opt_center
 * @see https://bugzilla.mozilla.org/show_bug.cgi?id=403510
 * @return {undefined}
 
 * @constructor
 * @see http://trac.webkit.org/browser/trunk/Source/WebCore/page/MemoryInfo.idl
 * @see http://trac.webkit.org/browser/trunk/Source/WebCore/page/MemoryInfo.cpp
 /**\n *  ... cpp\n */
 * @constructor
 * @see http://trac.webkit.org/browser/trunk/Source/WebCore/inspector/ScriptProfileNode.idl
  @type {Array<ScriptProfileNode>} 
 * @constructor
 * @see http://trac.webkit.org/browser/trunk/Source/WebCore/inspector/ScriptProfile.idl
  @type {ScriptProfileNode} 
 * @constructor
 * @see http://trac.webkit.org/browser/trunk/Source/WebCore/page/Console.idl
 * @see http://trac.webkit.org/browser/trunk/Source/WebCore/page/Console.cpp
 
 * @param {*} condition
 * @param {...*} var_args
 * @return {undefined}
 
 * @param {...*} var_args
 * @return {undefined}
 
 * @param {*} value
 * @return {undefined}
 
 * @param {!Object} data
 * @param {*=} opt_columns
 * @return {undefined}
 
 * @param {string=} opt_title
 * @return {undefined}
  @type {Array<ScriptProfile>} /** @ty ... le>} */ @type {MemoryInfo} /** @ty ... nfo} */
 * @type {!Console}
 * @suppress {duplicate}
 
 * @type {number}
 * @see http://developer.android.com/reference/android/webkit/WebView.html
 
 * @param {Node} baseNode
 * @param {number} baseOffset
 * @param {Node} extentNode
 * @param {number} extentOffset
 * @return {undefined}
 
 * @param {string} alter
 * @param {string} direction
 * @param {string} granularity
 * @return {undefined}
 
 * @param {Element} element
 * @param {string} pseudoElement
 * @param {boolean=} opt_authorOnly
 * @return {CSSRuleList}
 * @nosideeffects
 
 * @param {string} contextId
 * @param {string} name
 * @param {number} width
 * @param {number} height
 * @nosideeffects
 * @return {undefined}
 
 * @param {number} x
 * @param {number} y
 * @return {?Range}
 * @nosideeffects
 * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPoint
 scrollIntoViewIfNeededopt_centerMemoryInfoScriptProfileNodefunctionNametotalTimeselfTimenumberOfCallsvisiblecallUIDScriptProfileprofilesdevicePixelRatiobaseNodebaseOffsetextentNodeextentOffsetsetBaseAndExtentmodifyaltergranularitygetMatchedCSSRulespseudoElementopt_authorOnlygetCSSCanvasContextcaretRangeFromPointDefinitions for all the extensions over W3C's DOM
specification by WebKit. This file depends on w3c_dom2.js.
All the provided definitions has been type annotated
*https://bugzilla.mozilla.org/show_bug.cgi?id=403510
http://trac.webkit.org/browser/trunk/Source/WebCore/page/MemoryInfo.idl
http://trac.webkit.org/browser/trunk/Source/WebCore/page/MemoryInfo.cpphttp://trac.webkit.org/browser/trunk/Source/WebCore/inspector/ScriptProfileNode.idlArray.<ScriptProfileNode>http://trac.webkit.org/browser/trunk/Source/WebCore/inspector/ScriptProfile.idlhttp://trac.webkit.org/browser/trunk/Source/WebCore/page/Console.idl
http://trac.webkit.org/browser/trunk/Source/WebCore/page/Console.cppArray.<ScriptProfile>http://developer.android.com/reference/android/webkit/WebView.html?Rangehttps://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPointElement ... er) {};Element ... ter) {}Element ... fNeededscrollI ... fNeededMemoryI ... apSize;MemoryI ... eapSizeMemoryInfo.prototypeMemoryI ... eLimit;MemoryI ... zeLimitScriptP ... onName;ScriptP ... ionNameScriptP ... ototypeScriptP ... pe.url;ScriptP ... ype.urlScriptP ... Number;ScriptP ... eNumberScriptP ... alTime;ScriptP ... talTimeScriptP ... lfTime;ScriptP ... elfTimeScriptP ... fCalls;ScriptP ... OfCallsScriptP ... ildren;ScriptP ... hildrenScriptP ... isible;ScriptP ... visibleScriptP ... allUID;ScriptP ... callUIDScriptP ... .title;ScriptP ... e.titleScriptP ... pe.uid;ScriptP ... ype.uidScriptP ... e.head;ScriptP ... pe.headConsole ... ofiles;Console ... rofilesConsole ... memory;Console ... .memoryWindow. ... onsole;Window. ... consolevar console;Window. ... lRatio;Window. ... elRatioSelecti ... seNode;Selecti ... aseNodeSelecti ... eOffsetSelecti ... ntNode;Selecti ... entNodeSelecti ... tOffsetSelecti ... e.type;Selecti ... pe.typeSelecti ... e.emptySelecti ... dExtentSelecti ... ty) {};Selecti ... ity) {}Selecti ... .modifyViewCSS ... ly) {};ViewCSS ... nly) {}ViewCSS ... SSRulesDocumen ... ht) {};Documen ... ght) {}Documen ... Context/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/webkit_event.js
 * @fileoverview Definitions for all the extensions over W3C's
 *  event specification by WebKit. This file depends on w3c_event.js.
 *  All the provided definitions have been type annotated
 *
 * @externs
 
 * @constructor
 * @extends {Event}
 * @see http://developer.apple.com/library/safari/documentation/AudioVideo/Reference/WebKitAnimationEventClassReference/WebKitAnimationEvent/WebKitAnimationEvent.html
 wheelDeltaXwheelDeltaYWebKitAnimationEventanimationNameelapsedTimeDefinitions for all the extensions over W3C's
event specification by WebKit. This file depends on w3c_event.js.
All the provided definitions have been type annotated
*http://developer.apple.com/library/safari/documentation/AudioVideo/Reference/WebKitAnimationEventClassReference/WebKitAnimationEvent/WebKitAnimationEvent.htmlEvent.p ... DeltaX;Event.p ... lDeltaXEvent.p ... DeltaY;Event.p ... lDeltaYWebKitA ... onName;WebKitA ... ionNameWebKitA ... ototypeWebKitA ... edTime;WebKitA ... sedTime/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/webkit_notifications.js
 * @fileoverview Definitions for W3C's Notifications specification.
 * @externs
 
 * @typedef {{dir: (string|undefined), lang: (string|undefined),
 *            body: (string|undefined), tag: (string|undefined),
 *            icon: (string|undefined),
 *            requireInteraction: (boolean|undefined),
 *            actions: (!Array<!NotificationAction>|undefined)}}
 * @see http://notifications.spec.whatwg.org/#notificationoptions
 
 * @typedef {{action: string, title: string, icon: (string|undefined)}}
 * @see https://notifications.spec.whatwg.org/#dictdef-notificationoptions
 
 * @typedef {{tag: (string|undefined)}}
 * @see https://notifications.spec.whatwg.org/#dictdef-getnotificationoptions
  @interface /** @interface */
 * @param {string} title
 * @param {NotificationOptions=} opt_options
 * @constructor
 * @implements {EventTarget}
 * @see http://notifications.spec.whatwg.org/#notification
 
 * @param {NotificationPermissionCallback=} opt_callback
 * @return {!Promise<string>}
 
 * The string used by clients to identify the notification.
 * @type {string}
 
 * The ID used by clients to uniquely identify notifications to eliminate
 * duplicate notifications.
 * @type {string}
 * @deprecated Use NotificationOptions.tag instead.
 
 * The string used by clients to specify the directionality (rtl/ltr) of the
 * notification.
 * @type {string}
 * @deprecated Use NotificationOptions.titleDir and bodyDir instead.
 
 * Displays the notification.
 * @return {undefined}
 
 * Prevents the notification from being displayed, or closes it if it is already
 * displayed.
 * @return {undefined}
 
 * An event handler called when notification is closed.
 * @type {?function(Event)}
 
 * An event handler called if the notification could not be displayed due to
 * an error (i.e. resource could not be loaded).
 * @type {?function(Event)}
 
 * An event handler called when the notification has become visible.
 * @type {?function(Event)}
 * @deprecated Use onshow instead.
 
 * An event handler called when the notification has become visible.
 * @type {?function(Event)}
 
 * An event handler called when the notification has been clicked on.
 * @type {?function(Event)}
 
 * @typedef {function(string)}
 * @see http://notifications.spec.whatwg.org/#notificationpermissioncallback
 
 * @constructor
 * @see http://dev.w3.org/2006/webapi/WebNotifications/publish/#dialog-if
 * @deprecated Use Notification instead.
 
 * Creates a text+icon notification and displays it to the user.
 * @param {string} iconUrl
 * @param {string} title
 * @param {string} body
 * @return {Notification}
 
 * Creates an HTML notification and displays it to the user.
 * @param {string} url
 * @return {Notification}
 
 * Checks if the user has permission to display notifications.
 * @return {number}
 
 * Requests permission from the user to display notifications.
 * @param {Function=} opt_callback
 * @return {void}
 
 * WebKit browsers expose the NotificationCenter API through
 * window.webkitNotifications.
 * @type {NotificationCenter}
 
 * @see https://notifications.spec.whatwg.org/#notificationevent
 * @constructor
 * @param {string} type
 * @param {!ExtendableEventInit=} opt_eventInitDict
 * @extends {ExtendableEvent}
  @type {?Notification} NotificationActionNotificationOptionsInterface_requireInteractionrequestPermissionreplaceIdondisplayonshowNotificationPermissionCallbackNotificationCentercreateNotificationiconUrlcreateHTMLNotificationcheckPermissionwebkitNotificationsNotificationEventnotificationDefinitions for W3C's Notifications specification.
{dir: (string|undefined), lang: (string|undefined), body: (string|undefined), tag: (string|undefined), icon: (string|undefined), requireInteraction: (boolean|undefined), actions: (!Array.<!NotificationAction>|undefined)}actions(!Array.<!NotificationAction>|undefined)!Array.<!NotificationAction>Array.<!NotificationAction>!NotificationActionhttp://notifications.spec.whatwg.org/#notificationoptions{action: string, title: string, icon: (string|undefined)}https://notifications.spec.whatwg.org/#dictdef-notificationoptions{tag: (string|undefined)}https://notifications.spec.whatwg.org/#dictdef-getnotificationoptionshttp://notifications.spec.whatwg.org/#notificationNotificationPermissionCallback=The string used by clients to identify the notification.The ID used by clients to uniquely identify notifications to eliminate
duplicate notifications.Use NotificationOptions.tag instead.The string used by clients to specify the directionality (rtl/ltr) of the
notification.Use NotificationOptions.titleDir and bodyDir instead.Displays the notification.Prevents the notification from being displayed, or closes it if it is already
displayed.An event handler called when notification is closed.An event handler called if the notification could not be displayed due to
an error (i.e. resource could not be loaded).An event handler called when the notification has become visible.Use onshow instead.An event handler called when the notification has been clicked on.http://notifications.spec.whatwg.org/#notificationpermissioncallbackhttp://dev.w3.org/2006/webapi/WebNotifications/publish/#dialog-if
Use Notification instead.Creates a text+icon notification and displays it to the user.Creates an HTML notification and displays it to the user.Checks if the user has permission to display notifications.Requests permission from the user to display notifications.WebKit browsers expose the NotificationCenter API through
window.webkitNotifications.https://notifications.spec.whatwg.org/#notificationevent
var Not ... ptions;var Not ... Action;GetNoti ... Optionsvar Not ... on() {}Notific ... on() {}Notific ... erface_Notific ... pe.dir;Notific ... ype.dirNotific ... ototypeNotific ... e.lang;Notific ... pe.langNotific ... e.body;Notific ... pe.bodyNotific ... pe.tag;Notific ... ype.tagNotific ... e.icon;Notific ... pe.iconNotific ... action;Notific ... ractionNotific ... ission;Notific ... missionNotific ... ck) {};Notific ... ack) {}Notific ... re) {};Notific ... ure) {}Notific ... istenerNotific ... vt) {};Notific ... evt) {}Notific ... chEventNotific ... .title;Notific ... e.titleNotific ... laceId;Notific ... placeIdNotific ... n() {};Notific ... pe.showNotific ... .cancelNotific ... e.closeNotific ... nclose;Notific ... oncloseNotific ... nerror;Notific ... onerrorNotific ... isplay;Notific ... displayNotific ... onshow;Notific ... .onshowNotific ... nclick;Notific ... onclickvar Not ... llback;Notific ... allbackNotific ... dy) {};Notific ... ody) {}Notific ... icationfunctio ... ody) {}Notific ... rl) {};Notific ... url) {}createH ... icationWindow. ... ations;Window. ... cationsNotific ... cation;/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/webkit_usercontent.js
 * @fileoverview Definitions for WKWebView's User Content interface.
 *   https://developer.apple.com/library/prerelease/ios/documentation/WebKit/Reference/WKUserContentController_Ref/
 *   https://trac.webkit.org/browser/trunk/Source/WebCore/page/WebKitNamespace.h
 *
 * @externs
 
 * @type {!UserMessageHandlersNamespace}
 
 * @constructor
 * @implements {IObject<string, UserMessageHandler>}
 
 * @param {*} message
 * @return {undefined}
 
 * @type {!WebKitNamespace}
 * @const
 WebKitNamespacemessageHandlersUserMessageHandlersNamespaceUserMessageHandlerwebkitDefinitions for WKWebView's User Content interface.
https://developer.apple.com/library/prerelease/ios/documentation/WebKit/Reference/WKUserContentController_Ref/
https://trac.webkit.org/browser/trunk/Source/WebCore/page/WebKitNamespace.h
*!UserMessageHandlersNamespaceIObject.<string, UserMessageHandler>!WebKitNamespaceWebKitN ... ndlers;WebKitN ... andlersWebKitN ... ototypeUserMes ... mespaceUserMes ... ge) {};UserMes ... age) {}UserMes ... MessageUserMes ... ototypevar webkit;/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/webstorage.js
 * @fileoverview Definitions for W3C's WebStorage specification.
 * This file depends on html5.js.
 * @externs
 
 * @interface
 * @see http://www.w3.org/TR/2011/CR-webstorage-20111208/#the-storage-interface
 
 * @param {number} index
 * @return {?string}
 
 * @param {string} key
 * @return {?string}
 
 * @param {string} key
 * @param {string} data
 * @return {void}
 
 * @param {string} key
 * @return {void}
 
 * @interface
 * @see http://www.w3.org/TR/2011/CR-webstorage-20111208/#the-sessionstorage-attribute
 
 * @type {Storage}
 
 * Window implements WindowSessionStorage
 *
 * @type {Storage}
 
 * @interface
 * @see http://www.w3.org/TR/2011/CR-webstorage-20111208/#the-localstorage-attribute
 
 * Window implements WindowLocalStorage
 *
 * @type {Storage}
 
 * This is the storage event interface.
 * @see http://www.w3.org/TR/2011/CR-webstorage-20111208/#the-storage-event
 * @extends {Event}
 * @constructor
 
 * @type {?Storage}
 
 * @param {string} typeArg
 * @param {boolean} canBubbleArg
 * @param {boolean} cancelableArg
 * @param {string} keyArg
 * @param {?string} oldValueArg
 * @param {?string} newValueArg
 * @param {string} urlArg
 * @param {?Storage} storageAreaArg
 * @return {void}
 StoragegetItemsetItemremoveItemWindowSessionStorageWindowLocalStoragelocalStorageStorageEventstorageAreainitStorageEventkeyArgoldValueArgurlArgstorageAreaArgDefinitions for W3C's WebStorage specification.
This file depends on html5.js.
http://www.w3.org/TR/2011/CR-webstorage-20111208/#the-storage-interfacehttp://www.w3.org/TR/2011/CR-webstorage-20111208/#the-sessionstorage-attributeWindow implements WindowSessionStoragehttp://www.w3.org/TR/2011/CR-webstorage-20111208/#the-localstorage-attributeWindow implements WindowLocalStorageThis is the storage event interface.http://www.w3.org/TR/2011/CR-webstorage-20111208/#the-storage-event
?StorageStorage ... length;Storage ... .lengthStorage.prototypeStorage ... ex) {};Storage ... dex) {}Storage ... ype.keyStorage ... ey) {};Storage ... key) {}Storage ... getItemStorage ... ta) {};Storage ... ata) {}Storage ... setItemStorage ... oveItemStorage ... n() {};Storage ... on() {}Storage ... e.clearWindowS ... torage;WindowS ... StorageWindowS ... ototypeWindowL ... torage;WindowL ... StorageWindowL ... ototypeStorage ... pe.key;Storage ... dValue;Storage ... ldValueStorage ... wValue;Storage ... ewValueStorage ... pe.url;Storage ... ype.urlStorage ... geArea;Storage ... ageAreaStorage ... rg) {};Storage ... Arg) {}Storage ... geEvent/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/whatwg_encoding.js
 * @fileoverview Definitions for WHATWG's Encoding specification
 *     https://encoding.spec.whatwg.org
 * @externs
 
 * @param {!BufferSource=} input
 * @param {?Object=} options
 * @return {!string}
 * @see https://encoding.spec.whatwg.org/#textdecoder
 
 * @constructor
 * @param {string=} utfLabel
 /**\n *  ... bel\n */
 * @param {string=} input
 * @return {!Uint8Array}
 utfLabelDefinitions for WHATWG's Encoding specification
https://encoding.spec.whatwg.org
!BufferSource=?Object=https://encoding.spec.whatwg.org/#textdecoder/home/insomnia/.local/share/gh/extensions/gh-codeql/dist/release/v2.23.0/javascript/tools/data/externs/web/window.js
 * @fileoverview JavaScript Built-Ins for windows properties.
 *
 * @externs
 * @author stevey@google.com (Steve Yegge)
  Window properties// Window properties Only common properties are here.  Others such as open()// Only ...  open() should be used with an explicit Window object.// shou ... object.
 * @type {!Window}
 * @see https://developer.mozilla.org/en/DOM/window.top
 * @const
 
 * @type {!Navigator}
 * @see https://developer.mozilla.org/en/DOM/window.navigator
 * @const
 
 * @type {!HTMLDocument}
 * @see https://developer.mozilla.org/en/DOM/window.document
 * @const
 
 * @type {!Location}
 * @see https://developer.mozilla.org/en/DOM/window.location
 * @const
 * @suppress {duplicate}
 * @implicitCast
 
 * @type {!Screen}
 * @see https://developer.mozilla.org/En/DOM/window.screen
 * @const
 
 * @type {!Window}
 * @see https://developer.mozilla.org/En/DOM/Window.self
 * @const
  Magic functions for Firefox's LiveConnect.// Magi ... onnect. We'll probably never use these in practice. But redefining them// We'l ... ng them will fire up the JVM, so we want to reserve the symbol names.// will ...  names.
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaArray
 
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaClass
  We just ripped this from the FF source; it doesn't appear to be// We j ... r to be publicly documented.// publ ... mented.
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaObject
 
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaPackage
 
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Packages
 
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/java
 /**\n *  ... ava\n */
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/netscape
 /**\n *  ... ape\n */
 * @see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/sun
 /**\n *  ... sun\n */
 * @param {number|undefined|null} immediateID
 * @see https://developer.mozilla.org/en-US/docs/DOM/window.clearImmediate
 * @see http://msdn.microsoft.com/en-us/library/ie/hh924825(v=vs.85).aspx
 * @return {undefined}
 
 * @param {number|undefined?} intervalID
 * @see https://developer.mozilla.org/en/DOM/window.clearInterval
 * @suppress {duplicate}
 * @return {undefined}
 
 * @param {number|undefined?} timeoutID
 * @see https://developer.mozilla.org/en/DOM/window.clearTimeout
 * @suppress {duplicate}
 * @return {undefined}
 
 * @param {*} message
 * @return {boolean}
 * @see https://developer.mozilla.org/en/DOM/window.confirm
 /**\n *  ... irm\n */
 * @see https://developer.mozilla.org/en/DOM/window.dump
 * @param {*} x
 * @return {undefined}
 
 * @param {string} message
 * @param {string=} opt_value
 * @return {?string}
 * @see https://developer.mozilla.org/en/DOM/window.prompt
 /**\n *  ... mpt\n */
 * @param {function()} callback
 * @return {number}
 * @see https://developer.mozilla.org/en-US/docs/DOM/window.setImmediate
 * @see http://msdn.microsoft.com/en-us/library/ie/hh773176(v=vs.85).aspx
 
 * @param {Function|string} callback
 * @param {number=} opt_delay
 * @return {number}
 * @see https://developer.mozilla.org/en/DOM/window.setInterval
 * @see https://html.spec.whatwg.org/multipage/webappapis.html#timers
 
 * @param {Function|string} callback
 * @param {number=} opt_delay
 * @param {...*} var_args
 * @return {number}
 * @see https://developer.mozilla.org/en/DOM/window.setTimeout
 * @see https://html.spec.whatwg.org/multipage/webappapis.html#timers
 screenJavaArrayJavaClassJavaMemberJavaObjectJavaPackagePackagesjavanetscapesunimmediateIDintervalIDtimeoutIDconfirmdumpopt_delayJavaScript Built-Ins for windows properties.
*https://developer.mozilla.org/en/DOM/window.top
!Navigatorhttps://developer.mozilla.org/en/DOM/window.navigator
https://developer.mozilla.org/en/DOM/window.document
https://developer.mozilla.org/en/DOM/window.location
!Screenhttps://developer.mozilla.org/En/DOM/window.screen
https://developer.mozilla.org/En/DOM/Window.self
https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaArrayhttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaClasshttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaObjecthttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/JavaPackagehttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Packageshttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/javahttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/netscapehttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/sun(number|undefined|null)https://developer.mozilla.org/en-US/docs/DOM/window.clearImmediate
http://msdn.microsoft.com/en-us/library/ie/hh924825(v=vs.85).aspx
(number|undefined?)undefined?https://developer.mozilla.org/en/DOM/window.clearInterval
https://developer.mozilla.org/en/DOM/window.clearTimeout
https://developer.mozilla.org/en/DOM/window.confirmhttps://developer.mozilla.org/en/DOM/window.dump
https://developer.mozilla.org/en/DOM/window.prompthttps://developer.mozilla.org/en-US/docs/DOM/window.setImmediate
http://msdn.microsoft.com/en-us/library/ie/hh773176(v=vs.85).aspx(Function|string)https://developer.mozilla.org/en/DOM/window.setInterval
https://html.spec.whatwg.org/multipage/webappapis.html#timershttps://developer.mozilla.org/en/DOM/window.setTimeout
var top;var navigator;var document;var location;var screen;var self;var JavaArray;var JavaClass;var JavaMember;var JavaObject;var JavaPackage;var Packages;var java;var netscape;var sun;functio ... eID) {}functio ... lID) {}functio ... tID) {}function dump(x) {}/home/insomnia/repos/mongoose/.eslintrc.js/home/insomnia/repos/mongoose/home/insomnia/repos 'markdown'// 'markdown''use strict''eslint:recommended'ignorePatterns'tools''dist''test/files/*''benchmarks''*.min.js''**/docs/js/native.js''!.*''node_modules''.git''data''.config'overrides'**/*.{ts,tsx}''**/*.md/*.ts''**/*.md/*.typescript'parserOptionsproject'./tsconfig.json''plugin:@typescript-eslint/eslint-recommended''plugin:@typescript-eslint/recommended''@typescript-eslint''@typescript-eslint/triple-slash-reference''off''@typescript-eslint/no-non-null-assertion''@typescript-eslint/no-empty-function''spaced-comment''error''always'markers'!'balanced'/''@typescript-eslint/no-explicit-any''@typescript-eslint/ban-types''@typescript-eslint/no-unused-vars''@typescript-eslint/explicit-module-boundary-types''@typescript-eslint/prefer-optional-chain''@typescript-eslint/no-dupe-class-members''@typescript-eslint/no-redeclare''@typescript-eslint/space-infix-ops''@typescript-eslint/no-require-imports''@typescript-eslint/no-empty-object-type''@typescript-eslint/no-wrapper-object-types''@typescript-eslint/no-unused-expressions''@typescript-eslint/no-unsafe-function-type''**/docs/js/**/*.js'browser'mocha-no-only'ecmaVersion2022es6es2020'comma-style'indentSwitchCaseVariableDeclarator'keyword-spacing''no-whitespace-before-property''no-buffer-constructor''warn''no-console''no-constant-condition''no-multi-spaces''func-call-spacing''no-trailing-spaces''no-undef''no-unneeded-ternary''no-const-assign''no-useless-rename''no-dupe-keys''space-in-parens''never''key-spacing'beforeColonafterColon'comma-spacing''array-bracket-spacing''arrow-spacing''object-curly-spacing''comma-dangle''no-unreachable''single''quote-props''as-needed'semi'no-extra-semi''semi-spacing''no-spaced-func''no-throw-literal''space-before-blocks''space-before-function-paren''space-infix-ops''space-unary-ops''no-var''prefer-const'strict'global''no-restricted-globals''context''Don\'t use Mocha\'s global context''no-prototype-builtins''mocha-no-only/mocha-no-only''no-empty''eol-last''no-multiple-empty-lines''use strict';use strictmodule. ... \n  }\n};module. ... ]\n  }\n}{\n  ext ... ]\n  }\n}extends ... ed'\n  ][\n    ' ... ed'\n  ]eslint:recommendedignoreP ... ig'\n  ][\n    ' ... ig'\n  ]toolsdisttest/files/*test/files/*benchmarks*.min.js'**/doc ... ive.js'**/docs/js/native.js!.*!.*node_modules.gitgit.configoverrid ...   }\n  ][\n    { ...   }\n  ]{\n      ... }\n    }files:  ...       ][\n      ...       ]**/*.{ts,tsx}**/*.md/*.ts'**/*.m ... script'**/*.md/*.typescriptparserO ...       }{\n      ...       }project ... g.json'./tsconfig.json/tsconfigextends ...       ]'plugin ... mended'plugin:@typescript-eslint/eslint-recommendedplugin:@typescript-eslint/recommendedplugins ...       ]@typescript-eslintrules:  ...       }'@types ... : 'off''@types ... erence'@typescript-eslint/triple-slash-reference'@types ... ertion'@typescript-eslint/no-non-null-assertion'@types ... nction'@typescript-eslint/no-empty-function'spaced ...       ]spaced-commentblock:  ...       }markers ...       ]balanced: true'@types ... it-any'@typescript-eslint/no-explicit-any'@types ... -types'@typescript-eslint/ban-types'@types ... d-vars'@typescript-eslint/no-unused-vars@typescript-eslint/explicit-module-boundary-types'@types ... 'error''@types ... -chain'@typescript-eslint/prefer-optional-chain'@types ... embers'@typescript-eslint/no-dupe-class-members'@types ... eclare'@typescript-eslint/no-redeclare'@types ... ix-ops'@typescript-eslint/space-infix-ops'@types ... mports'@typescript-eslint/no-require-imports'@types ... t-type'@typescript-eslint/no-empty-object-type@typescript-eslint/no-wrapper-object-types'@types ... ssions'@typescript-eslint/no-unused-expressions'@types ... n-type'@typescript-eslint/no-unsafe-function-type**/docs/js/**/*.jsenv: {\n ...       }node: falsebrowser: trueplugins ... wn'\n  ][\n    ' ... wn'\n  ]mocha-no-onlyparserO ... 022\n  }{\n    e ... 022\n  }ecmaVersion: 2022env: {\n ... rue\n  }{\n    n ... rue\n  }node: truees6: truees2020: truerules:  ...  }]\n  }{\n    ' ...  }]\n  }'comma- ... 'error'comma-styleindent: ... }\n    ][\n      ... }\n    ]SwitchCase: 1Variabl ... ator: 2'keywor ... 'error'keyword-spacing'no-whi ... 'error''no-whi ... operty'no-whitespace-before-property'no-buf ...  'warn''no-buf ... ructor'no-buffer-constructor'no-console': 'off'no-console'no-con ... : 'off''no-con ... dition'no-constant-condition'no-mul ... 'error'no-multi-spaces'func-c ... 'error'func-call-spacing'no-tra ... 'error'no-trailing-spaces'no-undef': 'error'no-undef'no-unn ... 'error''no-unn ... ernary'no-unneeded-ternary'no-con ... 'error'no-const-assign'no-use ... 'error'no-useless-rename'no-dup ... 'error'no-dupe-keys'space- ... '\n    ]space-in-parens[\n      ... '\n    ]never'spaced ... }\n    ]'key-sp ... }\n    ]key-spacingbeforeColon: falseafterColon: true'comma- ... }\n    ]comma-spacingbefore: falseafter: true'array- ... ing': 1'array- ... pacing'array-bracket-spacing'arrow- ... }\n    ]arrow-spacingbefore: true'object ... '\n    ]'object ... pacing'object-curly-spacing'comma- ... '\n    ]comma-dangle'no-unr ... 'error'no-unreachablequotes: ... '\n    ]single'quote- ... '\n    ]quote-propsas-neededsemi: 'error''no-ext ... 'error'no-extra-semi'semi-s ... 'error'semi-spacing'no-spa ... 'error'no-spaced-func'no-thr ... 'error'no-throw-literal'space- ... 'error''space- ... blocks'space-before-blocks'space- ... -paren'space-before-function-parenspace-infix-opsspace-unary-ops'no-var': 'warn'no-var'prefer ...  'warn'prefer-conststrict: ... '\n    ]'no-res ... }\n    ]'no-res ... lobals'no-restricted-globalsname: 'context'message ... ontext''Don\'t ... ontext'Don't use Mocha's global context'no-pro ... : 'off''no-pro ... iltins'no-prototype-builtins'mocha- ... '\n    ]'mocha- ... o-only'mocha-no-only/mocha-no-only'no-empty': 'off'no-empty'eol-last': 'warn'eol-last'no-mul ... x: 2 }]'no-mul ... -lines'no-multiple-empty-lines['warn', { max: 2 }]{ max: 2 }max: 2/home/insomnia/repos/mongoose/.github/FUNDING.yml/home/insomnia/repos/mongoose/.githubgithubtag:yaml.org,2002:strmongoosejsopen_collectivemongoosetideliftnpm/mongoosetag:yaml.org,2002:mapgithub: mongoosejsyaml/home/insomnia/repos/mongoose/.github/ISSUE_TEMPLATE/bug.yml/home/insomnia/repos/mongoose/.github/ISSUE_TEMPLATE Bug report\u1f41b\udc1b Bug reportCreate a report to help us improveCreate  ... improvecheckboxesprerequisitesPrerequisitesI have written a descriptive issue titleI have  ... e titletag:yaml.org,2002:boollabel:  ... e titleI have searched existing issues to ensure the bug has not already been reported
| label: | tag:yaml.org,2002:seq- label ... e titlelabel: Prerequisitestype: checkboxesmongoose-versionMongoose version6.x.xlabel:  ... versionvalidationsrequired: truetype: inputnode-versionNode.js version14.xmongo-versionMongoDB server versionMongoDB ... version5.xtypescript-versionTypescript version (if applicable)Typescr ... icable)4.8.xlabel:  ... icable)required: falsetextareaDescriptionA clear and concise description of what the bug is.A clear ... bug is.label: Descriptiontype: textareasteps-to-reproduceSteps to ReproduceList of steps, sample code, or a link to code or a project that reproduces the behavior.
Make sure you place a stack trace inside a [code (```) block](https://docs.github.com/en/github/writing-on-github/creating-and-highlighting-code-blocks) to avoid linking unrelated issues.
|label:  ... produceexpected-behaviorExpected BehaviorA clear and concise description of what you expected to happen.A clear ... happen.label:  ... ehavior- type: checkboxesname: \u1f41b\udc1b Bug report/home/insomnia/repos/mongoose/.github/ISSUE_TEMPLATE/config.ymlblank_issues_enableddocumentation Documentation\u1f4d8\udcd8 Documentationhttps://mongoosejs.com/docs/guide.htmlhttps:/ ... de.htmlaboutMongoose Docsname: \ud83d ... ntation- name: ... ntationblank_i ... : false/home/insomnia/repos/mongoose/.github/ISSUE_TEMPLATE/feature.yml Feature Proposal\u1f680\ude80 Feature ProposalSubmit a proposal for a new featureSubmit  ... featureenhancement'enhancement'new feature'new feature'['enhan ... ature']I have searched existing issues to ensure the feature has not already been requested
proposalA clear and concise description of what the feature is.A clear ... ure is.label:  ... roposalmotivationMotivationThe motivation for the proposal.The mot ... oposal.label: MotivationexampleExampleAn example for how this feature would be used.
Make sure you place example code inside a [code (```) block](https://docs.github.com/en/github/writing-on-github/creating-and-highlighting-code-blocks) to avoid linking unrelated issues.label: Examplename: \ud83d ... roposal/home/insomnia/repos/mongoose/.github/ISSUE_TEMPLATE/help.yml Help\u1f64b\ude4b HelpOpen an issue and request for individual helpOpen an ... al help'help'help wanted'help wanted'['help' ... anted']markdownBefore you submit an issue we recommend to read the [documentation](https://mongoosejs.com/docs/guide.html).
value: |type: markdownMongoDB versiondropdownOperating systemLinuxmacOSWindows- Linuxlabel:  ...  systemtype: dropdownos-versionOperating system version (i.e. 20.04, 11.3, 10)Operati ... .3, 10)label:  ... .3, 10)IssueGive as much detail as you can to help us understand.
Make sure you place example code inside a [code (```) block](https://docs.github.com/en/github/writing-on-github/creating-and-highlighting-code-blocks) to avoid linking unrelated issues.
label: Issue- type: markdownname: \u1f64b\ude4b Help/home/insomnia/repos/mongoose/.github/ISSUE_TEMPLATE/other.yml Other\u2754 OtherOpen an issue that is not feature or bug relatedOpen an ... relatedI have searched existing issues to ensure the issue has not already been raised
Give as much detail as you can to help us understand.
Make sure you place example code inside a [code (```) block](https://docs.github.com/en/github/writing-on-github/creating-and-highlighting-code-blocks) to avoid linking unrelated issues.name: \u2754 Other/home/insomnia/repos/mongoose/.github/ISSUE_TEMPLATE/performance.yml Performance issue\u1f9a5\udda5 Performance issueReport a performance issueReport  ... e issue'performance'['performance']I have searched existing issues to ensure the performance issue has not already been reported
working-versionLast performant versionLast pe ... version1.x.xstopped-working-versionstopped ... versionSlowed down in versionSlowed  ... version2.x.xA clear and concise description of what the performance issue is.A clear ... sue is.label:  ... e issuename: \ud83e ... e issue/home/insomnia/repos/mongoose/.github/codeql/codeql-config.yml/home/insomnia/repos/mongoose/.github/codeqlcodeql config"codeql config"'javascript'- 'javascript'lib- libname: " ... config"/home/insomnia/repos/mongoose/.github/dependabot.ymltag:yaml.org,2002:intupdatespackage-ecosystemnpm"/"schedulemonthly"monthly"interval: "monthly"open-pull-requests-limitopen-pu ... s-limit100target-branchmasterpackage ... em: npmgithub-actionspackage ... actions- packa ... em: npmversion: 2/home/insomnia/repos/mongoose/.github/workflows/benchmark.yml/home/insomnia/repos/mongoose/.github/workflowsTypeScript Benchmarkpull_request.github/workflows/benchmark.yml".githu ... rk.yml"package.json"package.json"types/**"types/**"benchmarks/typescript/**"benchm ... ipt/**"- ".git ... rk.yml"paths:branches- masterbranches:pull_request:contents: readjobstypescriptruns-onubuntu-22.04Benchmark TypeScript TypesBenchma ... t Typesstepsusesactions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8actions ... dd907a8fetch-depthfetch-depth: 0uses: a ...  v5.0.0Setup nodeactions/setup-node@49933ea5288caeca8642d1e84afbd3f7d6820020actions ... 6820020node-version: 22name: Setup nodenpm installrun: npm installnode ./scripts/create-tarball.jsnode ./ ... ball.jsrun: no ... ball.jsnpm run ts-benchmarkrun: np ... nchmark- uses: ...  v5.0.0runs-on ... u-22.04typescript:name: T ... nchmark/home/insomnia/repos/mongoose/.github/workflows/codeql.ymlCode Scanning - Action"Code S ... Action"lib/**'lib/**'- 'lib/**'CodeQL-Buildubuntu-latestsecurity-eventssecurit ... : writeCheckout repositoryname: C ... ositoryInitialize CodeQLgithub/codeql-action/init@v3github/ ... init@v3config-file./.github/codeql/codeql-config.yml./.gith ... fig.ymlconfig- ... fig.ymlname: I ...  CodeQLPerform CodeQL AnalysisPerform ... nalysisgithub/codeql-action/analyze@v3github/ ... lyze@v3name: P ... nalysis- name: ... ositoryruns-on ... -latestCodeQL-Build:name: " ... Action"/home/insomnia/repos/mongoose/.github/workflows/documentation.ymlDocumentation.github/workflows/documentation.yml'.githu ... on.yml''package.json'docs/**'docs/**''lib''test'website.js'website.js'CHANGELOG.md'CHANGELOG.md'- '.git ... on.yml'lint-documentationLint Markdown filesLint MD-Filesnpm run lint-mdname: L ... ownlinttest-documentationTest Generating Docsgit fetch --depth=1 --tagsgit fet ...  --tagsrun: gi ... ntationSetup MongoDBwget -q https://downloads.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2204-6.0.20.tgz
tar xf mongodb-linux-x86_64-ubuntu2204-6.0.20.tgz
mkdir -p ./data/db/27017 ./data/db/27000
printf "\n--timeout 8000" >> ./test/mocha.opts
./mongodb-linux-x86_64-ubuntu2204-6.0.20/bin/mongod --setParameter ttlMonitorSleepSecs=1 --fork --dbpath ./data/db/27017 --syslog --port 27017
sleep 2
./mongodb-linux-x86_64-ubuntu2204-6.0.20/bin/mongod --version
echo `pwd`/mongodb-linux-x86_64-ubuntu2204-6.0.20/bin >> $GITHUB_PATH
name: Setup MongoDBSetup configecho "module.exports = {uri:'mongodb://127.0.0.1:27017/mongoose_test'};" > ./.config.js
name: Setup confignpm run docs:cleanrun: np ... s:cleannpm run docs:generatenpm run ... eneraterun: np ... eneratelint-documentation:name: Documentation/home/insomnia/repos/mongoose/.github/workflows/encryption-tests.ymlEncryption Tests.github/workflows/encryption-tests.yml".githu ... ts.yml"index.js"index.js""lib/**"test/encryption/**.js"test/e ... /**.js"scripts/setup-encryption-tests.js"script ... sts.js"- ".git ... ts.yml"workflow_dispatchpull-requestsid-tokencontents: writerun-testsEncryption testsFORCE_COLORFORCE_COLOR: trueInstall Dependenciesname: I ... denciesInstall mongodb-client-encryptionInstall ... ryptionnpm install mongodb-client-encryptionnpm ins ... ryptionname: I ... ryptionSetup Testsnpm run setup-test-encryptionnpm run ... ryptionname: Setup TestsRun Testsnpm run test-encryptionname: Run Testspermissions:run-tests:name: E ...  Tests /home/insomnia/repos/mongoose/.github/workflows/stale.ymlClose stale issues"Close stale issues"cron0 0 * * *"0 0 * * *"cron: "0 0 * * *"- cron: "0 0 * * *"tag:yaml.org,2002:nullschedule:issuesissues: writestaleactions/stale@v9repo-token${{ secrets.GITHUB_TOKEN }}${{ sec ... OKEN }}stale-issue-messageThis issue is stale because it has been open 14 days with no activity. Remove stale label or comment or this will be closed in 5 days'This i ... 5 days'close-issue-messageThis issue was closed because it has been inactive for 19 days and has been marked as stale."This i ... stale."days-before-staledays-before-closeany-of-labelscan't reproduce,help,needs clarificationcan't r ... icationrepo-to ... OKEN }}name: stale- name: stalestale:name: " ... issues"/home/insomnia/repos/mongoose/.github/workflows/test.ymlTest.github/workflows/test.yml".githu ... st.yml"test/**.js"test/**.js"- ".git ... st.yml"lintLint JS-Filesnpm run lint-jsname: Lint JS-Files${{ matrix.os }}fail-fastmatrix[16, 18, 20, 22, 24]ubuntu-24.04[ubuntu ... -24.04]mongodb6.0.157.0.128.0.0[6.0.15 ...  8.0.0]os: ubu ... cted on- os: u ... cted onnode: [ ... 22, 24]fail-fast: falseNode ${{ matrix.node }} MongoDB ${{ matrix.mongodb }} OS ${{ matrix.os }}Node ${ ... x.os }}MONGOMS_VERSION${{ matrix.mongodb }}${{ mat ... godb }}MONGOMS_PREFER_GLOBAL_PATHMONGOMS ... AL_PATHMONGOMS ... godb }}${{ matrix.node }}node-ve ... node }}Load MongoDB binary cacheLoad Mo ... y cachecache-mongodb-binariescache-m ... inariesactions/cache@v4~/.cache/mongodb-binaries~/.cach ... inaries${{ matrix.os }}-${{ matrix.mongodb }}path: ~ ... inariesname: L ... y cachenpm run create-separate-require-instancenpm run ... nstancerun: np ... nstanceNPM Test without CoverageNPM Tes ... overagenpm testifmatrix.coverage != truematrix. ... != truename: N ... overageNPM Test with Coveragenpm run test-coveragenpm run ... overagematrix.coverage == truematrix. ... == trueruns-on ... x.os }}test-denoDeno testsMONGOMS ...  6.0.15deno-${{ env.MONGOMS_VERSION }}deno-${ ... SION }}Setup Denodenoland/setup-deno@v2denolan ... deno@v2deno-versionv2.1.xdeno-version: v2.1.xname: Setup Denodeno --versionrun: deno --versionRun Deno testsnpm run test-denoname: Run Deno teststest-replica-setsneeds- testReplica Set testsnpm run test-rsname: Testneeds:dependency-reviewDependency Reviewgithub.event_name == 'pull_request'github. ... equest'Check out reponame: Check out repoDependency reviewactions/dependency-review-action@v4actions ... tion@v4name: D ...  review- name: ... ut reponame: D ...  Reviewlint:/home/insomnia/repos/mongoose/.github/workflows/tidelift-alignment.ymlTidelift Alignment.github/workflows/tidelift-alignment.yml'.githu ... nt.yml'- '.git ... nt.yml'push:Run Tidelift to ensure approved open source packages are in useRun Tid ...  in usegithub.repository == 'Automattic/mongoose'github. ... ngoose'Checkoutname: CheckoutAlignmenttidelift/alignment-action@8d7700fe795fc01179c1f9fa05b72a089873027dtidelif ... 873027dTIDELIFT_API_KEY${{ secrets.TIDELIFT_API_KEY }}${{ sec ... _KEY }}TIDELIFT_ORGANIZATIONTIDELIF ... IZATION${{ secrets.TIDELIFT_ORGANIZATION }}${{ sec ... TION }}TIDELIFT_PROJECT${{ secrets.TIDELIFT_PROJECT }}${{ sec ... JECT }}TIDELIF ... _KEY }}name: Alignment- name: Checkoutname: R ...  in usebuild:name: T ... ignment/home/insomnia/repos/mongoose/.github/workflows/tsd.ymlTypescript Types.github/workflows/tsd.yml'.githu ... sd.yml''types/**'test/types/**'test/types/**'- '.git ... sd.yml'Lint TS-Filesnpm run lint-tsname: Lint TS-Filestest-ts-types- lintTest Typescript TypesTest Ty ... t TypesTypingsnpm run test-tsdname: Typingsname: T ... t Types/home/insomnia/repos/mongoose/.markdownlint-cli2.cjs this file is named ".cjs" instead of ".js" because markdownlint-cli2 only looks for ".cjs" or ".mjs"// this ...  ".mjs" use aliases instead of "MD000" naming// use  ...  naming the following are ignored because they are just redirects// the  ... directs this does not affect "docs/migrating_to_5.md"// this ... o_5.md" ignored for now, but should be changes later// igno ... s later ignore changelog because it uses different heading style than other documents and older versions use different formatting// igno ... matting exclude node_modules because it isnt excluded by default// excl ... default disable default rules// disa ... t rules alt-text for images// alt- ...  images consistent blank lines// cons ... k lines consistent unordered lists// cons ... d lists consistent and read-able code// cons ... le code consistent emphasis characters// cons ... racters ensure consistent header usage// ensu ... r usage ensure consistent "hr" usage// ensu ... " usage disable disalloing html tags, because// disa ... because mongoose currently uses html tags directly for heading ID's and style// mong ... d style consistent indentation// cons ... ntation consistent links and good links// cons ... d links enabled by "links"// enab ... "links" mongoose currently does not wrap plain links in "<>"// mong ... in "<>" consistent ordered lists consistent whitespace usage// cons ... e usage atx: undefined, // covered by "headers"// atx: ... eaders" atx_closed: undefined, // covered by "headers"// atx_ ... eaders" blockquote: true, // covered by "whitespace"// bloc ... espace" hard_tab: undefined, // covered by "whitespace"// hard ... espace" headings: undefined, // covered by "headers"// head ... eaders" images: true, // covered by "accessibility" and "links"// imag ... "links" language: undefined, // covered by "code"// lang ...  "code" line_length: undefined, // mongoose currently uses a mix of max-line-length and relying on editor auto-wrap// line ... to-wrap spaces: undefined, // covered by "atx", "atx_closed", "headers"// spac ... eaders" spelling: undefined, // mongoose currently only uses short-form language specifiers and so does not need this// spel ... ed this ul: undefined, // covered by "whitespace" and "bullet"// ul:  ... bullet" url: undefined, // covered by "links"// url: ... "links"ignores'History.md''SECURITY.md''migrating_to_5.md''.github/PULL_REQUEST_TEMPLATE.md'accessibilityblank_linesbullet'asterisk'emphasis'atx'hr'---'indentation'no-bare-urls'olwhitespacemodule. ... \n  ]\n};module. ... '\n  ]\n}{\n  ign ... '\n  ]\n}ignores ... es'\n  ][\n    / ... es'\n  ]History.mdmdSECURITY.mdSECURITYmigrating_to_5.mdmigrating_to_5'.githu ... ATE.md'.github/PULL_REQUEST_TEMPLATE.mdgithub/PULL_REQUEST_TEMPLATECHANGELOGmodule. ... nks"\n};module. ... inks"\n}module. ... .config{\n  //  ... inks"\n}default: falseaccessibility: trueblank_lines: truebullet: ... risk' }{ style ... risk' }style: 'asterisk'asteriskcode: trueemphasi ... risk' }headers ... 'atx' }{ style: 'atx' }style: 'atx'atxhr: { style: '---' }{ style: '---' }style: '---'---html: falseindentation: truelinks: true'no-bar ... : falseno-bare-urlsol: truewhitespace: true/home/insomnia/repos/mongoose/.mocharc.ymlspecuibddtest/mocha-fixtures.jstest/mo ... ures.js- test/ ... ures.jsextensiontest.js- test.jswatch-filestest/**/*.js- test/**/*.jsreporte ... n "dot"/home/insomnia/repos/mongoose/benchmarks/createDeepNestedDocArray.js/home/insomnia/repos/mongoose/benchmarks'../'=>-await'mongodb://127.0.0.1:27017/mongoose_benchmark'levelsletschemanewSchemadoc'gh-14897'<++subdocs...'Test'MONGOOSE_BENCHMARK_SKIP_SETUPdeleteManyinsertStartinsertEndresults'create() time ms'+'  'const m ... '../');mongoos ... ('../')require('../')../run().c ... 1);\n});run().c ... -1);\n})run().catchrun()err =>  ... (-1);\n}{\n  con ... (-1);\n}console.error(err);console.error(err)console.errorprocess.exit(-1);process.exit(-1)process.exit-1async f ... t(0);\n}{\n  awa ... t(0);\n}await m ... mark');await m ... hmark')mongoos ... hmark')mongoose.connect'mongod ... chmark'mongodb://127.0.0.1:27017/mongoose_benchmarkmongodb://1271:27017/mongoose_benchmarkconst levels = 12;levels = 12let sch ... e } });schema  ... ue } })new mon ... ue } })mongoose.Schema{ test: ... rue } }test: { ...  true }{ type: ...  true }type: Stringlet doc ... 897' };doc = { ... 4897' }{ test: 'gh-14897' }test: 'gh-14897'gh-14897for (le ...  };\n  }i < levels++ilet i = 0i = 0{\n    s ...  };\n  }schema  ... ma] });schema  ... ema] })new mon ... ema] }){ level ... hema] }level: Numbersubdocs: [schema][schema]doc = { ... c }] };doc = { ... oc }] }{ level ... oc }] }level: (levels - i)(levels - i)levels - isubdocs ... .doc }][{ ...d ... .doc }]{ ...doc }...docconst T ... chema);Test =  ... schema)mongoos ... schema)mongoose.modelif (!pr ... });\n  }!proces ... P_SETUPprocess ... P_SETUPprocess.envMONGOOS ... P_SETUP{\n    a ... });\n  }await T ... ny({});await T ... any({})Test.deleteMany({})Test.deleteManyconst i ... .now();insertS ... e.now()Date.now()await T ... e(doc);await T ... te(doc)Test.create(doc)Test.createinsertE ... e.now()const r ... 2)\n  };results ... (2)\n  }{\n    ' ... (2)\n  }'create ... ixed(2)create() time ms() time ms+(inser ... ixed(2)(insert ... ixed(2)(insert ... toFixed(insert ... tStart)insertE ... rtStartconsole ... '  '));console ...  '  '))console.logJSON.st ... , '  ')  process.exit(0);process.exit(0)/home/insomnia/repos/mongoose/benchmarks/findOneWithCast.jsSchemaParticipantTypesUUID_idTestSchemaparticipants1participants2participants3participants4participants5'test_uuid_mutations'TestModelpeer'1583b99d-8462-4343-8dfd-9105252e5662'numIterations500queryStartjfindOne$or$elemMatchqueryEnd'Average findOne time ms'const S ...  }\n  );SchemaP ...   }\n  )new mon ...   }\n  ){\n      ... ,\n    }user: m ... es.UUIDmongoos ... es.UUIDmongoos ... a.Types{\n      ... e\n    }_id: falseconst T ...  }\n  );TestSch ...   }\n  )partici ... pant] }{ type: ... pant] }type: [ ... cipant][SchemaParticipant]date: { ... umber }{ type: Number }type: Numbercollect ... ations''test_u ... ations'test_uuid_mutationsTestMod ... Schema)mongoos ... Schema)TestMod ... any({})TestModel.deleteManyconst p ... ',\n  };peer =  ... 2',\n  }{\n    u ... 2',\n  }user: ' ... 2e5662''1583b9 ... 2e5662'1583b99d-8462-4343-8dfd-9105252e5662const n ...  = 500;numIterations = 500const q ... .now();querySt ... e.now()for (le ...   }\n  }i < numIterations{\n    f ...   }\n  }for (le ... ;\n    }j < 10++jlet j = 0j = 0{\n      ... ;\n    }await T ...     });await T ...      })TestMod ...      })TestModel.findOne$or: [\n ...       ]{ parti ... eer } }partici ...  peer }{ $elemMatch: peer }$elemMatch: peerqueryEn ... e.now()'Averag ... ixed(2)'Averag ... ime ms'Average findOne time ms+((quer ... ixed(2)((query ... ixed(2)((query ... toFixed((query ... ations)(queryE ... rations(queryE ... yStart)queryEn ... ryStart/home/insomnia/repos/mongoose/benchmarks/get.js run loop with mongoose objects// run  ... objects run loop with plain objectsfield136field2field3field4field5field6field7field8versionKeytests10000loopStart'Model loop ms'plainTeststoObject'POJO loop ms'async f ...  '));\n}{\n  con ...  '));\n}const s ... lse });schema  ... alse })new mon ... alse }){\n    f ... )},\n  }field1: ... 2, 16)}{type:  ... 2, 16)}default ... (2, 16)Math.ra ... (2, 16)Math.ra ... ).sliceMath.ra ... ing(36)Math.ra ... oStringMath.random()field2: ... 2, 16)}field3: ... 2, 16)}field4: ... 2, 16)}field5: ... 2, 16)}field6: ... 2, 16)}field7: ... 2, 16)}field8: ... 2, 16)}{ versi ... false }versionKey: falseTestMod ... schema)let tests = [];tests = [][]for (le ... ));\n  }i < 10000i++{\n    t ... ));\n  }tests.p ... del());tests.p ... odel())tests.pushnew TestModel()let loo ... .now();loopSta ... e.now()k < 100k++let k = 0k = 0let testtest.field1;test.field1test.field2;test.field2test.field3;test.field3test.field4;test.field4test.field5;test.field5test.field6;test.field6test.field7;test.field7test.field8;test.field8const r ... rt\n  };results ... art\n  }{\n    ' ... art\n  }'Model  ... opStartModel loop msDate.no ... opStartconst p ... s = [];plainTests = []{\n    p ... ));\n  }plainTe ... ect());plainTe ... ject())plainTests.pushtest.toObject()test.toObjectloopSta ... .now();results ... pStart;results ... opStartresults ... op ms']POJO loop ms/home/insomnia/repos/mongoose/benchmarks/insertManySimple.jsFooSchemafooFooModel'Foo'numDocs1500docs'test foo '200insertMany'Average insertMany time ms'const F ... ing });FooSche ... ring })new mon ... ring }){ foo: String }foo: Stringconst F ... chema);FooMode ... Schema)Fooawait F ... ny({});await F ... any({})FooMode ... any({})FooModel.deleteManyconst n ... = 1500;numDocs = 1500const docs = [];docs = []for (le ... });\n  }i < numDocs{\n    d ... });\n  }docs.pu ... + i });docs.pu ...  + i })docs.push{ foo:  ... ' + i }foo: 'test foo ' + i'test foo ' + itest foo const n ...  = 200;numIterations = 200for (le ... s);\n  }{\n    a ... s);\n  }await F ... (docs);await F ... y(docs)FooMode ... y(docs)FooModel.insertManyAverage insertMany time ms+((inse ... ixed(2)((inser ... ixed(2)((inser ... toFixed((inser ... ations)(insert ... rations/home/insomnia/repos/mongoose/benchmarks/mapOfSubdocs.js? Mini ID//? Mini ID? Timestamp as number//? Tim ...  numberserverSelectionTimeoutMS5000minisMapminiminiIDObjectId'Mini'timestampsMinisMap'MinisMap'20001000000'Average save time ms'{\n  awa ...  '));\n}await m ... 0\n  });await m ... 00\n  })mongoos ... 00\n  }){\n    s ... 000\n  }serverS ... S: 5000serverS ... meoutMSconst m ...  }\n  );minisMa ... e }\n  )new mon ... e }\n  )mini: { ...       }type: Mapof: new ...      })new mon ...      })miniID: ...  true }type: m ... bjectIdmongoos ... bjectIdref: 'Mini'Minitimesta ...  true }{ timestamps: true }timestamps: trueconst M ... isMap);MinisMa ... nisMap)mongoos ... nisMap)await M ... init();await M ... .init()MinisMap.init()MinisMap.initconst m ...  Map();mini = new Map()new Map()i < 2000{\n    c ... });\n  }const m ... ctId();miniID  ... ectId()new mon ... ectId()mongoose.Typesmini.se ...     });mini.se ... \n    })mini.set{\n      ... )\n    }timesta ... 000000)Math.fl ... 000000)Math.ra ... 1000000k < 10await M ... ini });await M ... mini })MinisMa ... mini })MinisMap.create{ mini }const r ... 10\n  };results ...  10\n  }{\n    ' ...  10\n  }'Averag ... t) / 10Average save time ms(Date.n ... t) / 10(Date.n ... pStart)/home/insomnia/repos/mongoose/benchmarks/recursiveToObject.jsChildSchemaparentId'ObjectId'virtual'answer'42ChildModel'Child'ParentSchema'child1'localField'_id'foreignField'parentId''child2''child3''child4'ParentModel'Parent''test parent '`${ / 'test child ''_'populate'test parent'virtuals'Total toObject time ms'const C ... Id' });ChildSc ... tId' })new mon ... tId' }){ name: ... ctId' }name: StringparentId: 'ObjectId'ChildSc ... 42; });ChildSc ...  42; })ChildSc ... r').getChildSc ... nswer')ChildSchema.virtualanswerfunctio ... n 42; }{ return 42; }return 42;const C ... chema);ChildMo ... Schema)Childconst P ... g\n  });ParentS ... ng\n  })new mon ... ng\n  }){\n    n ... ing\n  }ParentS ... Id' });ParentS ... tId' })ParentSchema.virtualchild1{ ref:  ... ntId' }ref: 'Child'localField: '_id'foreign ... rentId'child2child3child4const P ... chema);ParentM ... Schema)Parentif (!pr ...   }\n  }{\n    a ...   }\n  }await P ... ny({});await P ... any({})ParentM ... any({})ParentM ... eteManyawait C ... ny({});await C ... any({})ChildMo ... any({})ChildMo ... eteManyconst numDocs = 200;numDocs = 200const parents = [];parents = []const p ... + i });parent  ...  + i })await P ...  + i })ParentM ...  + i })ParentModel.create{ name: ... ' + i }name: ' ... t ' + i'test parent ' + itest parent const children = [];children = []console ... ocs}`);console ... Docs}`)`${i} / ${numDocs}`for (le ...       }j < numDocschildre ... _id });childre ... ._id })children.push{ name: ... t._id }name: ' ... '_' + j'test c ... '_' + j'test c ... i + '_''test child ' + itest child _parentId: parent._idparent._idawait C ... ldren);await C ... ildren)ChildMo ... ildren)ChildModel.createparents ... arent);parents.push(parent)parents.pushconst d ... ld4']);docs =  ... ild4'])await P ... ild4'])ParentM ... ild4'])ParentM ... opulateParentModel.find()ParentModel.find['child ... hild4']for (co ... t';\n  }const doc{\n    d ... t';\n  }doc.nam ... arent';doc.nam ... parent'doc.nametest parentconst l ... .now();docs.fo ... ue }));docs.fo ... rue }))docs.forEachdoc =>  ... true })doc.toO ... true })doc.toObject{ virtuals: true }virtuals: true'Total  ... opStart'Total  ... ime ms'Total toObject time ms/home/insomnia/repos/mongoose/benchmarks/saveSimple.jsprop1prop2prop3prop4prop5prop6prop7prop8prop9prop10saveStarttest saveEndconst F ... g\n  });FooSche ... ng\n  }){\n    p ... ing\n  }prop1: Stringprop2: Stringprop3: Stringprop4: Stringprop5: Stringprop6: Stringprop7: Stringprop8: Stringprop9: Stringprop10: Stringconst s ... .now();saveSta ... e.now()const d ...     });doc = n ...      })new Foo ...      })prop1: `test ${i}``test ${i}`prop2: `test ${i}`prop3: `test ${i}`prop4: `test ${i}`prop5: `test ${i}`prop6: `test ${i}`prop7: `test ${i}`prop8: `test ${i}`prop9: `test ${i}`prop10: `test ${i}`await doc.save();await doc.save()doc.save()doc.savesaveEnd = Date.now()+((save ... ixed(2)((saveE ... ixed(2)((saveE ... toFixed((saveE ... ations)(saveEn ... rations(saveEn ... eStart)saveEnd - saveStart/home/insomnia/repos/mongoose/benchmarks/typescript/simple/index.ts/home/insomnia/repos/mongoose/benchmarks/typescript/simple/home/insomnia/repos/mongoose/benchmarks/typescriptModel'mongoose'UseremailavatarUserModelInterface>fetchUserUserModel'User'import  ... goose';interfa ... ring;\n}name: string;email: string;avatar?: string;interfa ... ser>;\n}Model<User>fetchUs ... <User>;Promise<User>const s ... ing\n});schema  ... ring\n})new Sch ... ring\n}){\n  nam ... tring\n}name: { ...  true }email:  ...  true }avatar: Stringconst U ... chema);UserMod ... schema)model<U ... schema)/home/insomnia/repos/mongoose/benchmarks/typescript/simple/package.json{\n  "de ... "\n  }\n}{\n    " ... .x"\n  }"file:. ... se.tgz"file:../../../mongoose.tgz"file:../../../mongoose.tgz""5.8.x"5.8.xdependencies{\n    " ... cs"\n  }"tsc -- ... ostics"tsc --extendedDiagnostics"tsc --extendedDiagnostics"benchmark/home/insomnia/repos/mongoose/benchmarks/typescript/simple/tsconfig.json{\n  "in ... "\n  ]\n}[\n    "./*.ts"\n  ]"./*.ts"./*.ts/home/insomnia/repos/mongoose/browser.js
 * Export lib/mongoose
 *
 /**\n *  ... \n *\n */'./lib/browser'Export lib/mongoosemodule. ... wser');module. ... owser')require ... owser')./lib/browser/lib/browser/home/insomnia/repos/mongoose/docs/images/favicon/manifest.json/home/insomnia/repos/mongoose/docs/images/favicon/home/insomnia/repos/mongoose/docs/images/home/insomnia/repos/mongoose/docs{\n "nam ...  }\n ]\n}"App"App[\n  {\n  ... \n  }\n ]{\n   "s ... 75"\n  }"\/andr ... 36.png"/android-icon-36x36.png"\/android-icon-36x36.png""36x36"36x36"image\/png"image/png"0.75"0.75density{\n   "s ... .0"\n  }"\/andr ... 48.png"/android-icon-48x48.png"\/android-icon-48x48.png""48x48"48x48"1.0"1.0{\n   "s ... .5"\n  }"\/andr ... 72.png"/android-icon-72x72.png"\/android-icon-72x72.png""72x72"72x72"1.5"1.5"\/andr ... 96.png"/android-icon-96x96.png"\/android-icon-96x96.png""96x96"96x96"2.0"2.0"\/andr ... 44.png"/android-icon-144x144.png"\/android-icon-144x144.png""144x144"144x144"3.0"3.0"\/andr ... 92.png"/android-icon-192x192.png"\/android-icon-192x192.png""192x192"192x192"4.0"4.0icons/home/insomnia/repos/mongoose/docs/js/api-bold-current-nav.js/home/insomnia/repos/mongoose/docs/js this script changes the nav-bar entry that is current visible on the screen as a header (most to the top) to be bold// this ... be bold set these values if undefined, because otherwise in global scope they will not be defined because the window did not finish loading// set  ... loading reset old element before re-assign// rese ... -assign add bold and visible to current ones// add  ... nt onescurNavEntrycurElem'scroll'==='.api-content > h3''.api-nav-content .nav-item .nav-item-sub'entry!=='hidden'breakhighlight=='#'' a[href="#''"]''inherit''bold'let hea ... efined;headers = undefinedlet cur ... efined;curNavE ... definedcurElem = undefinedwindow. ...   }\n});window. ... \n  }\n})window. ... istenerfunctio ... ;\n  }\n}{\n  //  ... ;\n  }\n}if (hea ... ');\n  }headers ... defined{\n    h ... ');\n  }headers ... > h3');headers ...  > h3')documen ...  > h3')documen ... ctorAll.api-content > h3api-content > h3if (cur ...   }\n  }{\n    c ...   }\n  }const e ... -sub');entries ... m-sub')documen ... m-sub')'.api-n ... em-sub'.api-nav-content .nav-item .nav-item-subapi-nav-content nav-item nav-item-subfor (co ... }\n    }const entryif (win ...       }window. ... hidden'window. ... ibilitywindow. ... (entry)window. ... edStylecurNavE ... lement;curNavE ... Elemententry.parentElementbreak;const s ... crollY;scrollY ... scrollYwindow.scrollYlet hig ... ers[0];highlig ... ders[0]headers[0]for (co ... er;\n  }const header{\n    i ... er;\n  }if (hea ... ;\n    }header. ... scrollYheader.offsetTop{\n      break;\n    }highlight = header;highlight = headerif (cur ... d';\n  }curElem ... Elem.idcurElem == undefinedhighlig ... Elem.idhighlight.idcurElem.id{\n    / ... d';\n  }if (cur ... ;\n    }curElem ... defineddocumen ... herit';documen ... nherit'documen ... tWeightdocumen ... ).styledocumen ... + '"]')documen ... elector'#' + c ...  + '"]''#' + c ... Elem.id'#' + c ... ref="#''#' + curNavEntry.id#curNavEntry.id a[href="#"]inheritcurElem = highlight;curElem = highlightdocumen ... 'bold';documen ...  'bold'/home/insomnia/repos/mongoose/docs/js/convert-old-anchorid.js only operate on the old id's// only ... ld id's in case there is no anchor, return without modifying the anchor// in c ...  anchor dont modify anything if the splits are not "2"// dont ... not "2" there are 2 possibilities:// ther ... lities: "mongoose_Mongoose-property"// "mon ... operty" "mongoose_property" use the part after the "_" directly, because the before is just a lower-cased version// use  ... version check to ensure those properties are not empty// chec ... t empty have to use multiple tests, because the old version did not differentiate between functions and properties// have ... perties have to double the tests here, because the old version did not differentiate between static and instance properties have to use the "[id=]" selector because "#Something()" is not a valid selector (the "()" part)// have ... " part) function to fix dox not recognizing async functions and resulting in inproper anchors// func ... anchors dont modify anchor if it already exists// dont ...  exists'DOMContentLoaded'/^#\w+_\w+(?:-\w+)?$/ifixNoAsyncFnsplitssecondSplits'-'mainNameelse&&.prototype.h3[id="anchorSlice"window. ... rue });window. ... true })DOMContentLoaded() => { ... }\n  }\n}{\n  con ... }\n  }\n}const a ... n.hash;anchor  ... on.hashwindow.location.hashwindow.locationif (!/^ ... ();\n  }!/^#\w+ ... anchor)/^#\w+_ ... anchor)/^#\w+_ ... /i.test/^#\w+_ ... w+)?$/i^#\w+_\w+(?:-\w+)?$^\w+\w(?:-\w+)?(?:-\w+)-\w+{\n    r ... ();\n  }return  ... ncFn();fixNoAsyncFn()if (!an ... rn;\n  }!anchor{\n    return;\n  }return;const s ... t('_');splits  ... it('_')anchor.split('_')anchor.splitif (spl ... rn;\n  }splits.length !== 2splits.lengthconst s ... t('-');secondS ... it('-')splits[1].split('-')splits[1].splitsplits[1]let mainName;let propName = '';propName = ''if (sec ... '';\n  }secondS ... h === 2secondSplits.length{\n    m ... 1];\n  }mainNam ... its[0];mainNam ... lits[0]secondSplits[0]propNam ... its[1];propNam ... lits[1]secondSplits[1]{\n    / ... '';\n  }mainNam ... its[1];mainName = splits[1]propName = '';if (!ma ... rn;\n  }!mainNameif (mai ...  ];\n  }mainName && propName{\n    / ...  ];\n  }tests = ... \n    ];tests = ... `\n    ][\n      ... `\n    ]`${main ... pName}``${main ... ame}()`{\n    t ...  ];\n  }`${mainName}()`for (co ...   }\n  }const test{\n    / ...   }\n  }const h ... t}"]`);header  ... st}"]`)documen ... st}"]`)`h3[id="${test}"]`window. ... test}`;window. ... {test}``#${test}`functio ...   }\n  }const a ... ice(1);anchorS ... lice(1)anchor.slice(1)anchor.sliceif (doc ... ;\n    }documen ... ice}"`)`h3[id= ... lice}"`const t ... \n    ];`${anchorSlice}()`if (hea ...       }{ once: true }once: true/home/insomnia/repos/mongoose/docs/js/mobile-navbar-toggle.js this js is for mobile, to toggle the navbar// this ...  navbar The className is not found// The  ... t foundlayout'layout'menu'menu'menuLink'menuLink''content'classes/\s+/' 'toggleAll'active'(functi ... ment));(functi ... ument))functio ... cument)functio ...   };\n\n}{\n  con ...   };\n\n}const l ... tent');layout  ... ayout')documen ... ayout')documen ... entByIdmenu =  ... 'menu')documen ... 'menu')menuLin ... uLink')documen ... uLink')content ... ntent')documen ... ntent')functio ... ');\n  }{\n    c ... ');\n  }const c ... length;classes ... (/\s+/)element ... (/\s+/)element ... e.splitelement.className\s+\slength  ... .lengthclasses.lengthfor (le ... }\n    }i < lengthif (cla ...       }classes ... assNameclasses[i]classes ... (i, 1);classes.splice(i, 1)classes.spliceif (len ... ;\n    }classes ... sName);classes ... ssName)classes.pushelement ... n(' ');element ... in(' ')classes.join(' ')classes.joinfunctio ... e);\n  }{\n    c ... e);\n  }const a ... ctive';active = 'active'e.preventDefault();e.preventDefault()e.preventDefaulttoggleC ... ctive);toggleC ... active)menuLin ... );\n  };menuLin ... e);\n  }menuLink.onclick{\n    t ... e);\n  }toggleAll(e);toggleAll(e)content ...  }\n  };content ...   }\n  }content.onclick{\n    i ...   }\n  }if (men ... ;\n    }menu.cl ...  !== -1menu.cl ... ctive')menu.cl ... indexOfmenu.classNamethis.document/home/insomnia/repos/mongoose/docs/js/native.js_nativedefault_options"block"fallback""placement"native"targetClass"native-ad"visibleClass"native-show"typeof"undefined"zone"targetClass"displayStyle"display""fallback"visibleClassName"visibleClass""prefix""placement"jsonUrlhttps://srv.buysellads.com/ads/.json?callback=_native_go+="&segment=placement:"srv"script""head"sanitizeadsad"statlink"pixelc"||"'<img src="'"[timestamp]"'" style="display:none;" height="0" width="0" />'_native_go"ads""."" ""No ads found"adElement"#""_bg_color#""g""backgroundColor""_bg_color_hover#""backgroundHoverColor""_company#""company""_cta#""callToAction""_cta_bg_color#""ctaBackgroundColor""_cta_bg_color_hover#""ctaBackgroundHoverColor""_cta_color#""ctaTextColor""_cta_color_hover#""ctaTextColorHover""_desc#""description""_index#""-""i""_img#""image""_link#""_logo#""logo""_color#""textColor""_color_hover#""textColorHover""_title#""title""pixel""timestamp""none"var _na ... \n  }\n};_native ... ;\n  }\n}{\n  con ... ;\n  }\n}constru ...  e;\n  }functio ...  e;\n  }{\n    v ...  e;\n  }var def ... \n    };default ... "\n    }{\n      ... "\n    }display: "block"fallback: ""placement: ""prefix: "native"nativetargetC ... ive-ad"native-advisible ... e-show"native-showif (typ ... ptions;typeof  ... efined"typeof ereturn  ... ptions;Object. ...     });Object. ... \n    })Object. ... forEachObject. ... ptions)(key, i ... }\n    }if (typ ...       }typeof e[key]e[key]e[key]  ... s[key];e[key]  ... ns[key]default_options[key]return e;init: f ... v);\n  }functio ... v);\n  }{\n    o ... v);\n  }options ... tions);options ... ptions)this.co ... ptions)this.constructthis.cl ... lass"];this.cl ... Class"]this.classNameoptions ... Class"]this.di ... play"];this.di ... splay"]this.displayStyleoptions["display"]this.fa ... back"];this.fa ... lback"]this.fallbackoptions["fallback"]this.vi ... lass"];this.vi ... Class"]this.vi ... assNamethis.pr ... efix"];this.pr ... refix"]this.prefixoptions["prefix"]this.pl ... ment"];this.pl ... ement"]this.placementoptions["placement"]let jso ... ve_go`;jsonUrl ... ive_go``https: ... ive_go`https:/ ... om/ads/.json?c ... tive_goif (opt ... ;\n    }options ...  !== ""jsonUrl ... ment"];jsonUrl ... ement"]"&segme ... ement"]"&segme ... ement:"&segment=placement:let srv ... ript");srv = d ... cript")documen ... cript")documen ... Elementsrv.src = jsonUrl;srv.src = jsonUrlsrv.srcdocumen ... d(srv);documen ... ld(srv)documen ... ndChilddocumen ... ad")[0]documen ... "head")documen ... TagNamesanitiz ... });\n  }functio ... });\n  }{\n    r ... });\n  }return  ...     });ads\n    ...      })ads\n    ... .filterads\n      .filterad => { ...       }return  ... th > 0;Object. ... gth > 0Object. ... .lengthObject.keys(ad)return  ... link");ad.hasO ... tlink")ad.hasOwnPropertystatlinkpixel:  ...  c;\n  }functio ...  c;\n  }{\n    l ...  c;\n  }let c = "";c = ""if (p)\n ...     });p.split ...     });p.split ...      })p.split ... forEachp.split("||")p.split(pixel, ...       }c += '< ... 0" />';c += '< ... "0" />''<img s ... "0" />''<img s ... estamp)<img src="pixel.r ... estamp)pixel.replace[timestamp]m'" styl ... "0" />'" style="display:none;" height="0" width="0" />return c;var _na ...  });\n};_native ...   });\n}functio ...   });\n}{\n  let ...   });\n}let ads ... ads"]);ads = _ ... "ads"])_native ... "ads"])_native.sanitizejson["ads"]if (ads ... d";\n  }ads.length < 1ads.length{\n    d ... d";\n  }documen ...     });documen ... \n    })documen ... forEachdocumen ... ssName)"." + _ ... assName_native.className(classN ... ;\n    }documen ... llback;documen ... allbackdocumen ... nerHTMLdocumen ... [index]documen ... assName_native.fallbackif (_na ... ssName;_native ...  !== ""documen ... ssName;" " + _ ... assName_native ... assNamereturn  ... found";No ads founddocumen ... }\n  });documen ...  }\n  })(classN ...   }\n  }if (ads ... ;\n    }ads[ind ... assNameads[index]let adE ... erHTML;adEleme ... nerHTMLlet ad  ... tle"]);ad = ad ... itle"])adEleme ... itle"])adEleme ... replaceadEleme ... over"])adEleme ... olor"])adEleme ... logo"])adEleme ... link"])adEleme ... mage"])adEleme ... ]["i"])adEleme ... tion"])adEleme ... pany"])new Reg ... ", "g")"#" + _ ... color#""#" + _native.prefix_native.prefix_bg_color#gads[ind ... Color"]"#" + _ ... hover#"_bg_color_hover#"backgr ... rColor"backgroundHoverColor"#" + _ ... mpany#"_company#ads[ind ... mpany"]company"#" + _ ... "_cta#"_cta#ads[ind ... ction"]callToAction_cta_bg_color#ctaBackgroundColor"_cta_b ... hover#"_cta_bg_color_hover#"ctaBac ... rColor"ctaBackgroundHoverColor_cta_color#ctaTextColor_cta_color_hover#ads[ind ... Hover"]ctaTextColorHover"#" + _ ... _desc#"_desc#ads[ind ... ption"]"#" + _ ... index#"_index#_native ... x]["i"]_native.prefix + "-"ads[index]["i"]"#" + _ ... "_img#"_img#ads[index]["image"]"#" + _ ... _link#"_link#ads[ind ... tlink"]"#" + _ ... _logo#"_logo#ads[index]["logo"]logo_color#textColor_color_hover#textColorHover"#" + _ ... title#"_title#ads[index]["title"]documen ... = null;documen ...  = nulldocumen ... amp"]);documen ... tamp"])ad + _n ... tamp"])_native ... tamp"])_native.pixelads[index]["pixel"]ads[ind ... stamp"]documen ... yStyle;documen ... ayStyledocumen ... displaydocumen ... ].style_native.displayStyledocumen ... "none";documen ...  "none"none/home/insomnia/repos/mongoose/docs/js/navbar-search.js dont use nav-bar search for search site, let the search site handle that// dont ... le thatversionFromUrl/^\/docs\/(\d+\.x)/searchPrefix'/docs/'/\/search(:?\.html)?$/i'search-button-nav''search-input-nav''search.html?q='ev(functi ... ;\n})();(functi ... };\n})()(functi ...   };\n})functio ... \n  };\n}{\n  con ... \n  };\n}const v ... \.x)/);version ... +\.x)/)window. ... +\.x)/)window. ... e.matchwindow. ... athname^\/docs\/(\d+\.x)\/(\d+\.x)\d+\.x\d+\d\.const v ... : null;version ...  : nullversionFromUrl[1]const s ... docs/';searchP ... /docs/'version ... /docs/''/docs/ ... /docs/''/docs/' + version/docs/if (/\/ ... rn;\n  }/\/sear ... thname)/\/sear ... /i.test/\/sear ... ml)?$/i\/search(:?\.html)?$(:?\.html)?(:?\.html):?\.html:?documen ... );\n  };documen ... q);\n  }documen ... onclickdocumen ... n-nav')search-button-navfunctio ... q);\n  }{\n    c ... q);\n  }const q ... .value;q = doc ... ).valuedocumen ... ).valuedocumen ... t-nav')search-input-navwindow. ... ent(q);window. ... nent(q)window.location.hrefsearchP ... nent(q)searchP ... tml?q='search.html?q=encodeU ... nent(q)documen ...  }\n  };documen ...   }\n  }documen ... onkeyupif (ev. ... ;\n    }ev.keyCode === 13ev.keyCode/home/insomnia/repos/mongoose/docs/js/redirect-old-api.js in case there is not anchor in case there is no split// in c ... o split ignore first character, which will always be "#"// igno ...  be "#" in case everything after "#" is empty// in c ... s empty helper function to redirect in case no other redirect can be found// help ... e foundredirectToBasefirstNamesliced'./api/''.html''./api/mongoose.html'() => { ... hor);\n}{\n  con ... hor);\n}if (!an ... ();\n  }return  ... Base();redirectToBase()const f ... _')[0];firstNa ... '_')[0]anchor.split('_')[0]if (!fi ... ();\n  }!firstNameconst s ... Case();sliced  ... rCase()firstNa ... rCase()firstNa ... werCasefirstName.slice(1)firstName.sliceif (!sl ... ();\n  }!slicedwindow. ... nchor);window. ... anchor)window. ... replace'./api/ ...  anchor'./api/ ... '.html''./api/' + sliced./api/.htmlfunctio ... ml');\n}{\n  win ... ml');\n}window. ... html');window. ... .html')'./api/ ... e.html'./api/mongoose.html/api/mongoose/home/insomnia/repos/mongoose/docs/js/search.js Helper to consistently add history and reload results /** Hel ... ults */ use this to only modify the param "q" and not overwrite any other existing params// use  ...  params (re)load results /** (re ... ults */ set navbar search empty, to encourage big input usage// set  ... t usage'https://mongoose-js.netlify.app/.netlify/functions'defaultVersion'8.x''search-button'addHistory'search-input''q'resultsDiv'results''<p>Loading...</p''<p>No Search Parameters</p>'qSearch'/search?search=''&version='res'<h1>No Results</h1>''<li>''<a class="title" href="''">''</a>''<div class="url"><a href="''</a></div>''<p>''</p>''</li>''<ul>''</ul>''<h3>An error occurred: ''</h3>'Helper to consistently add history and reload results(re)load resultsconst r ... tions';root =  ... ctions''https: ... ctions'https://mongoose-js.netlify.app/.netlify/functionshttps://mongoose-jsnetlifyapp/netlify/functionsconst d ...  '8.x';default ... = '8.x'8.xconst v ... ersion;version ... Versionsearch();search()documen ... ue);\n};documen ... lue);\n}documen ... utton')search-buttonfunctio ... lue);\n}{\n  add ... lue);\n}addHist ... value);addHist ... .value)documen ... input')search-inputdocumen ... \n  }\n};documen ... ;\n  }\n}{\n  if  ... ;\n  }\n}if (ev. ... e);\n  }{\n    a ... e);\n  }functio ... ch();\n}{\n  con ... ch();\n}const u ... .href);url = n ... n.href)new URL ... n.href)url.sea ... value);url.sea ...  value)url.searchParams.seturl.searchParamswindow. ... , url);window. ... ', url)window. ... shStatewindow.historyfunctio ...    );\n}{\n  con ...    );\n}const r ... ults');results ... sults')documen ... sults')results ... ..</p';results ... ...</p'resultsDiv.innerHTML<p>Loading...</p<p>Loading</pif (!ur ... rn;\n  }!url.se ... as('q')!url.searchParamsurl.sea ... as('q')url.searchParams.has{\n    r ... rn;\n  }results ... s</p>';results ... rs</p>''<p>No  ... rs</p>'<p>No Search Parameters</p>const q ... t('q');qSearch ... et('q')url.sea ... et('q')url.searchParams.getdocumen ... Search;documen ... qSearchdocumen ... e = '';documen ... ue = ''fetch(r ... \n    );fetch(r ... }\n    )fetch(r ...    thenfetch(r ... n(); })fetch(r ... ersion)root +  ... versionroot +  ... rsion='root +  ... Search)root +  ... earch='/search?search=encodeU ... Search)&version=functio ... on(); }{ retur ... on(); }return res.json();res.json()res.jsonfunctio ...       }if (res ...       }result. ... h === 0result. ... .lengthresult.resultsresults ... </h1>';results ... s</h1>''<h1>No ... s</h1>'<h1>No Results</h1>let html = '';html = ''i < res ... .lengthconst r ... lts[i];res = r ... ults[i]result.results[i]const url = res.url;url = res.urlres.urlhtml += ... </li>';html += ... '</li>''<li>'  ... '</li>''<li>'  ...  '</p>''<li>'  ... es.body'<li>'  ...   '<p>''<li>'  ... </div>''<li>'  ... ' + url'<li>'  ...  + '">''<li>'  ... href="''<li>'  ...  '</a>''<li>'  ... s.title<li>'<a cla ... href="'<a class="title" href="">res.title</a>'<div c ... href="'<div class="url"><a href="</a></div><p>res.body</p></li>results ... </ul>';results ... '</ul>''<ul>'  ... '</ul>''<ul>' + html<ul></ul>results ... </h3>';results ... '</h3>''<h3>An ... '</h3>''<h3>An ... message'<h3>An ... rred: '<h3>An error occurred: error.message</h3>/home/insomnia/repos/mongoose/docs/source/api.js/home/insomnia/repos/mongoose/docs/source!
 * Module dependencies
 /*!\n *  ... ies\n */ @type {Map.<string, DocsObj>} /** @ty ... bj>} */ add custom matchers to dox, to recognize things it does not know about// add  ... w about see https://github.com/tj/dox/issues/198// see  ... ues/198 Some matchers need to be in a specific order, like the "prototype" matcher must be before the static matcher (and inverted because "unshift")// Some ... shift") "unshift" is used, because the first function to return a object from "contextPatternMatchers" is used (and we need to "overwrite" those specific functions)// "uns ... ctions) push a matcher to recognize "Class.fn = async function" as a method// push ...  method push a matcher to recognize "Class.prototype.fn = async function" as a method push a matcher to recognize "async function" as a function// push ... unction
 * @typedef {Object} TagObject
 * @property {String} name The Processed name of the Tag (already includes all processing)
 * @property {String} description The Description of this Tag
 * @property {Boolean} optional Defines wheter the Tag is optional or not (already included in `name`)
 * @property {Boolean} nullable Defines wheter the Tag is nullable (dox does not add "null" by default)
 * @property {Boolean} nonNullable Unknown (invert of `nullable`?)
 * @property {Boolean} variable Defines wheter the type is spreadable ("...Type")
 * @property {String[]} types Collection of all types this Tag has
 * @property {String} type The Type of the Tag
 * @property {String} string The full string of types plus name plus description (unused in mongoose)
 * @property {String} typesDescription Processed `types` into markdown code (unused in mongoose)
 /**\n *  ... se)\n */
 * @typedef {Object} SeeObject
 * @property {String} text The text to display the link as
 * @property {String} [url] The link the text should have as href
 
 * @typedef {Object} PropContext
 * @property {boolean} [isStatic] Defines wheter the current property is a static property (not mutually exlusive with "isInstance")
 * @property {boolean} [isInstance] Defines wheter the current property is a instance property (not mutually exlusive with "isStatic")
 * @property {boolean} [isFunction] Defines wheter the current property is meant to be a function
 * @property {string} [constructor] Defines the Constructor (or rather path) the current property is on
 * @property {boolean} [constructorWasUndefined] Defined wheter the "constructor" property was defined by "dox", but was set to "undefined"
 * @property {string} [type] Defines the type the property is meant to be
 * @property {string} [name] Defines the current Properties name
 * @property {TagObject} [return] The full object for a "@return" jsdoc tag
 * @property {string} [string] Defines the full string the property will be listed as
 * @property {string} [anchorId] Defines the Anchor ID to be used for linking
 * @property {string} [description] Defines the Description the property will be listed with
 * @property {string} [deprecated] Defines wheter the current Property is signaled as deprecated
 * @property {SeeObject[]} [see] Defines all "@see" references
 * @property {TagObject[]} [param] Defines all "@param" references
 * @property {SeeObject} [inherits] Defines the string for "@inherits"
 
 * @typedef {Object} NameObj
 * @property {string} docName
 * @property {string} filePath
 * @property {string} fullName
 * @property {string} docFileName
 
 * @typedef {Object} DocsObj
 * @property {string} title The Title of the page
 * @property {string} fileName The name of the resulting file
 * @property {PropContext[]} props All the functions and values
 * @property {string} file The original file (relative to the root of the repository)
 * @property {string} editLink The link used for edits
 * @property {boolean} [hideFromNav] Indicate that the entry should not be listed in the navigation
 
 * Process a file name to a documentation name
 * @param {string} input
 * @returns {NameObj}
 /**\n *  ... bj}\n */ helper function to keep translating array types to string consistent// help ... sistent
 * Parse all files defined in "files"
 /**\n *  ... es"\n */
 * Parse a specific file
 * @param {String} file The file to parse
 * @param {Boolean} throwErr throw the error if one is encountered?
 /**\n *  ... ed?\n */ show log of which file has thrown a error for easier debugging// show ... bugging @type {DocsObj} /** @ty ... Obj} */ @type {PropContext} /** @ty ... ext} */ somehow in "dox", it is named "receiver" sometimes, not "constructor"// some ... ructor" this is used as a fall-back if the handling below does not overwrite it// this ... rite it in some cases "dox" has "ctx.constructor" defined but set to "undefined", which will later be used for setting "ctx.string"// in s ... string" the following has been done, because otherwise no type could be applied for intellisense// the  ... lisense @type {TagObject}  for this type, it needs to be parsed from the string itself to support more than 1 word// for  ...  1 word this is required because "@see" is kinda badly defined and mongoose uses a slightly customized way (longer text and different kinds of links)// this ...  links) using "name" over "string" because "string" also contains the type and maybe other stuff// usin ... r stuff only assign "type" if there are types// only ... e types dont take "string" as "name" from here, because jsdoc definitions of "static" do not have parameters, also its defined elsewhere anyway// dont ...  anyway ctx.name = tag.string;// ctx. ... string; extra parameter to make function definitions independent of where "@function" is defined// extr ... defined like "@static" could have overwritten "ctx.string" again if defined after "@function"// like ... nction" dox does not add "void" / "undefined" to types, so in the documentation it would result in a empty ""// dox  ... ty "\u00ab\u00bb" try to get the documentation name for the "@inherits" value// try  ... " value example: "@inherits SchemaType" -> "schematype.html"// exam ... e.html" the following is required, because in newer "dox" version "null" is not included in "types" anymore, but a separate property// the  ... roperty the following if-else-if statement is in this order, because there are more "instance" methods than static// the  ...  static the following condition will be true if "isInstance = true" or if "isInstance = false && isStatic = false" AND "ctx.string" are empty or not defined// the  ... defined if "isStatic" and "isInstance" are falsy and "ctx.string" is not falsy, then rely on the "ctx.string" set by "dox"// if " ... y "dox" to transform things like "[Symbol.toStringTag]" to ".prototype[Symbol.toStringTag]" instead of ".prototype.[Symbol.toStringTag]"// to t ... ngTag]" add "()" to the end of the string if function// add  ... unction
 * Extract the Text and Url from a description if any
 * @param {Tag} tag The tag to process the resulting object from
 * @param {PropContext} ctx The current ctx for warnings
 * @param {Boolean} warnOnMissingUrl Warn if the url is missing, false by default
 * @returns {{ text: string, url: string }}
  the following regex matches cases of:// the  ... ses of: "External Links http://someurl.com/" -> "External Links"// "Ext ...  Links" "External https://someurl.com/" -> "External"// "Ext ... ternal" "Id href #some_Some-method" -> "Id href"// "Id  ... d href" "Local Absolute /docs/somewhere" -> "Local Absolute"// "Loc ... solute" "No Href" -> "No Href"// "No  ... o Href" "https://someurl.com" -> "" (fallback added)// "htt ...  added) "Some#Method #something" -> "Some#Method"// "Som ... Method" "Test ./somewhere" -> "Test"// "Tes ...  "Test" "Test2 ./somewhere#andsomewhere" -> "Test2"// "Tes ... "Test2" The remainder is simply taken by a call to "slice" (also the text is trimmed later)// The  ...  later) warn for the cases where URL should be defined (like in "@see")// warn ... "@see") if no text is found, add text as url and use the url itself as the text// if n ... he text fallback text, so that the final text does not end up as a empty element that cannot be seen// fall ... be seen change to be "undefined" if text is empty or non-valid// chan ... n-validdox'dox''fs''marked''lib/mongoose.js''lib/schema.js''lib/connection.js''lib/document.js''lib/model.js''lib/query.js''lib/cursor/queryCursor.js''lib/aggregate.js''lib/cursor/aggregationCursor.js''lib/schemaType.js''lib/virtualType.js''lib/error/index.js''lib/schema/array.js''lib/schema/documentArray.js''lib/schema/subdocument.js''lib/schema/boolean.js''lib/schema/buffer.js''lib/schema/number.js''lib/schema/objectId.js''lib/schema/string.js''lib/schema/uuid.js''lib/options/schemaTypeOptions.js''lib/options/schemaArrayOptions.js''lib/options/schemaBufferOptions.js''lib/options/schemaDateOptions.js''lib/options/schemaNumberOptions.js''lib/options/schemaObjectIdOptions.js''lib/options/schemaStringOptions.js''lib/types/documentArray/methods/index.js''lib/types/subdocument.js''lib/types/arraySubdocument.js''lib/types/buffer.js''lib/types/decimal128.js''lib/types/map.js''lib/types/array/methods/index.js''lib/types/uuid.js'outcontextPatternMatchers/^\s*([\w$.]+)\s*\.\s*([\w$]+)\s*=\s*(?:async\s+)?function/'method''.''()'/^\s*([\w$.]+)\s*\.\s*prototype\s*\.\s*([\w$]+)\s*=\s*(?:async\s+)?function/cons'.prototype.'/^\s*(export(\s+default)?\s+)?(?:async\s+)?function\s+([\w$]+)\s*\(/'function'parseAllFilesprocessName'lib/''.js''/index''/methods'lastSlashfullName'core_array''array''schema/''Schema''types/array/methods/index''Array''SubdocumentPath''documentarray''DocumentArrayPath''DocumentArray''MongooseDocumentArray''index''Mongoose'docNamefilePathdocFileNameconvertTypesToString'|'parseFilethrowErrtrycommentsparseComments'utf8'processFile'Error while trying to parseComments for 'ignoreisPrivatectx'receiver'in'constructor'constructorWasUndefined__tagtagsswitchcase'see'extractTextUrlFromTagFound "@receiver" tag in 'property''type''static'isStatic'return'/^<p>//<\/p>\n?$/'void''undefined''inherits'no match found in files for inherits "" on "'event''param'nullable'null'!='['']'nestedvariable'[...''...'/<\/p>$/'memberOf''instance'isInstance'deprecated'Property "" in "" has both instance and static JSDOC markings (most likely both @instance and @static)! (File: "").prototypeanchorIdfull/<br \/>/ig/&gt;/ig'>''lib/options'hideFromNaveditLink'https://github.com/Automattic/mongoose/blob/master/'warnOnMissingUrltextMatches/^(.*? (?=#|\/|(?:https?:)|\.\/|$))/iNo Text Matches found in tag for "'No Description'Map.<string, DocsObj>DocsObjTagObject
The Processed name of the Tag (already includes all processing)
The Description of this Tag
Defines wheter the Tag is optional or not (already included in `name`)
Defines wheter the Tag is nullable (dox does not add "null" by default)
Unknown (invert of `nullable`?)
nonNullableDefines wheter the type is spreadable ("...Type")
Collection of all types this Tag has
Array.<String>The Type of the Tag
The full string of types plus name plus description (unused in mongoose)
Processed `types` into markdown code (unused in mongoose)typesDescriptionSeeObject
The text to display the link as
[url] The link the text should have as hrefPropContext
[isStatic] Defines wheter the current property is a static property (not mutually exlusive with "isInstance")
[isInstance] Defines wheter the current property is a instance property (not mutually exlusive with "isStatic")
[isFunction] Defines wheter the current property is meant to be a function
[constructor] Defines the Constructor (or rather path) the current property is on
[constructorWasUndefined] Defined wheter the "constructor" property was defined by "dox", but was set to "undefined"
[type] Defines the type the property is meant to be
[name] Defines the current Properties name
[return] The full object for a "@return" jsdoc tag
TagObject[string] Defines the full string the property will be listed as
[anchorId] Defines the Anchor ID to be used for linking
[description] Defines the Description the property will be listed with
[deprecated] Defines wheter the current Property is signaled as deprecated
[see] Defines all "@see" references
Array.<SeeObject>SeeObject[param] Defines all "@param" references
Array.<TagObject>[inherits] Defines the string for "@inherits"NameObj
DocsObj
The Title of the page
The name of the resulting file
All the functions and values
Array.<PropContext>PropContextThe original file (relative to the root of the repository)
The link used for edits
[hideFromNav] Indicate that the entry should not be listed in the navigationProcess a file name to a documentation nameNameObjParse all files defined in "files"Parse a specific fileThe file to parse
throw the error if one is encountered?Extract the Text and Url from a description if anyThe tag to process the resulting object from
TagThe current ctx for warnings
Warn if the url is missing, false by default
{text: string, url: string}const d ... 'dox');dox = require('dox')require('dox')const f ... ('fs');fs = require('fs')require('fs')const m ... rked');md = re ... arked')require('marked')markedconst f ... .js'\n];files = ... d.js'\n][\n  'li ... d.js'\n]lib/mongoose.jslib/mongoosejslib/schema.jslib/schemalib/connection.jslib/connectionlib/document.jslib/documentlib/model.jslib/modellib/query.jslib/query'lib/cu ... sor.js'lib/cursor/queryCursor.jslib/cursor/queryCursorlib/aggregate.jslib/aggregatelib/cursor/aggregationCursor.jslib/cursor/aggregationCursorlib/schemaType.jslib/schemaTypelib/virtualType.jslib/virtualTypelib/error/index.jslib/error/index'lib/sc ... ray.js'lib/schema/array.jslib/schema/arraylib/schema/documentArray.jslib/schema/documentArray'lib/sc ... ent.js'lib/schema/subdocument.jslib/schema/subdocument'lib/sc ... ean.js'lib/schema/boolean.jslib/schema/boolean'lib/sc ... fer.js'lib/schema/buffer.jslib/schema/buffer'lib/sc ... ber.js'lib/schema/number.jslib/schema/number'lib/sc ... tId.js'lib/schema/objectId.jslib/schema/objectId'lib/sc ... ing.js'lib/schema/string.jslib/schema/stringlib/schema/uuid.jslib/schema/uuid'lib/op ... ons.js'lib/options/schemaTypeOptions.jslib/options/schemaTypeOptionslib/options/schemaArrayOptions.jslib/options/schemaArrayOptionslib/options/schemaBufferOptions.jslib/options/schemaBufferOptionslib/options/schemaDateOptions.jslib/options/schemaDateOptionslib/options/schemaNumberOptions.jslib/options/schemaNumberOptionslib/options/schemaObjectIdOptions.jslib/options/schemaObjectIdOptionslib/options/schemaStringOptions.jslib/options/schemaStringOptions'lib/ty ... dex.js'lib/types/documentArray/methods/index.jslib/types/documentArray/methods/index'lib/ty ... ent.js'lib/types/subdocument.jslib/types/subdocumentlib/types/arraySubdocument.jslib/types/arraySubdocument'lib/ty ... fer.js'lib/types/buffer.jslib/types/buffer'lib/ty ... 128.js'lib/types/decimal128.jslib/types/decimal128lib/types/map.jslib/types/maplib/types/array/methods/index.jslib/types/array/methods/indexlib/types/uuid.jslib/types/uuidconst o ...  Map();out = m ... w Map()module. ... w Map()module.exports.docs{\n  //  ...   });\n}dox.con ... }\n  });dox.con ...  }\n  })dox.con ... unshiftdox.con ... atcherscontext ... atchersconst m ... c(str);match = ... ec(str)/^\s*([ ... ec(str)/^\s*([ ... n/.exec/^\s*([ ... nction/^\s*([\w$.]+)\s*\.\s*([\w$]+)\s*=\s*(?:async\s+)?function\s*([\w$.]+)[\w$.]+[\w$.]([\w$]+)[\w$]+[\w$](?:async\s+)?(?:async\s+)async\s+if (mat ... ;\n    }return  ...      };type: 'method'receiver: match[1]match[1]name: match[2]match[2]string: ...  + '()'match[1 ...  + '()'match[1 ... atch[2]match[1] + '.'^\s*([\w$.]+)\s*\.\s*prototype\s*\.\s*([\w$]+)\s*=\s*(?:async\s+)?functionconstru ... atch[1]cons: match[1]match[1 ... otype.'/^\s*(e ... ec(str)/^\s*(e ... (/.exec/^\s*(e ... )\s*\(/^\s*(export(\s+default)?\s+)?(?:async\s+)?function\s+([\w$]+)\s*\((export(\s+default)?\s+)?(export(\s+default)?\s+)export(\s+default)?\s+export(\s+default)?(\s+default)\s+default\(type: 'function'name: match[3]match[3]match[3] + '()'parseAllFiles();parseAllFiles(){\n  let ... \n  };\n}let nam ... ', '');name =  ... s', '')input.\n ... s', '')input.\n ... replaceinput.\n ... x', '')input.\n ... /', '')input.\n    replacelib/.js/index/methodsconst l ... f('/');lastSla ... Of('/')name.la ... Of('/')name.lastIndexOfconst f ... = name;fullName = nameconst b ... h + 1);basenam ... sh + 1)name.su ... sh + 1)name.substrlastSla ... ash + 1lastSlash === -1lastSlash + 1name = basename;name = basenameif (bas ... y';\n  }basenam ... _array'core_array{\n    n ... y';\n  }name = 'array';name = 'array'if (ful ...   }\n  }fullNam ... hema/')fullName.startsWithschema/{\n    n ...   }\n  }name = 'Schema';name = 'Schema'if (bas ... ;\n    }basenam ... rCase()basename.charAt(0)basename.charAtbasenam ... perCasename += ... ing(1);name += ... ring(1)basenam ... ring(1)basename.substringname += basename;name += basenameif (ful ... y';\n  }fullNam ... /index''types/ ... /index'types/array/methods/indexname = 'Array';name = 'Array'if (bas ... h';\n  }basenam ... ntPath'SubdocumentPath{\n    n ... h';\n  }name =  ... tPath';name =  ... ntPath'basenam ... tarray'documentarrayname =  ... yPath';name =  ... ayPath'DocumentArrayPathbasenam ... tArray'DocumentArrayname =  ... Array';name =  ... tArray''Mongoo ... tArray'MongooseDocumentArrayif (bas ... e';\n  }basename === 'index'{\n    n ... e';\n  }name = 'Mongoose';name = 'Mongoose'Mongooseconst d ... str(1);docName ... bstr(1)name.ch ... bstr(1)name.ch ... arAt(0)name.ch ... rCase()name.ch ... perCasename.charAt(0)name.charAtname.substr(1)return  ... ()\n  };{\n    d ... e()\n  }docName: docNamefullName: fullNamefilePath: inputdocFile ... rCase()name.toLowerCase()name.toLowerCasefunctio ... ypes;\n}{\n  ret ... ypes;\n}return  ...  types;Array.i ... : typesArray.isArray(types)types.join('|')types.join{\n  for ... ;\n  }\n}for (co ... e);\n  }const file{\n    p ... e);\n  }parseFi ...  true);parseFi ... , true)functio ... }\n  }\n}{\n  try ... }\n  }\n}try {\n  ...   }\n  }{\n    c ... s);\n  }const c ... rue });comment ... true })dox.par ... true })dox.parseCommentsfs.read ... 'utf8')utf8{ raw: true }raw: truecomment ... = file;comments.file = filecomments.fileprocess ... ments);process ... mments)catch ( ...   }\n  }{\n  //  ...   }\n  }console ...  file);console ... , file)'Error  ... s for 'Error while trying to parseComments for if (thr ... ;\n    }throw err;functio ... ata);\n}{\n  con ... ata);\n}const { ... .file);{ docNa ... s.file){ docNa ... eName }docName: nameprocess ... s.file)props.fileconst d ... []\n  };data =  ...  []\n  }{\n    t ...  []\n  }title: namefileNam ... ileNameprops: []for (co ... x);\n  }const prop{\n    i ... x);\n  }if (pro ... ;\n    }prop.ig ... Privateprop.ignoreprop.isPrivatecontinue;const c ...  || {};ctx = prop.ctx || {}prop.ctx || {}prop.ctxif ('re ... ;\n    }'receiver' in ctxctx.con ... ceiver;ctx.con ... eceiverctx.constructorctx.receiverdelete ctx.receiver;delete ctx.receiverif ('co ... ;\n    }'constr ... defined'constructor' in ctxctx.con ... definedctx.con ... = true;ctx.con ...  = trueconstru ... definedprop.tagsconst __tagconst tag = __tag;tag = __tagswitch  ...       }tag.typecase 's ...  break;if (!Ar ...       }!Array. ... tx.see)Array.i ... tx.see)ctx.seectx.see = [];ctx.see = []ctx.see ... true));ctx.see ...  true))ctx.see.pushextract ... , true)extract ... FromTagcase 'r ...  break;console ... ame}`);console ... name}`)console.warn`Found  ... .name}`Found " ... tag in ctx.namecase 'p ...  break;ctx.typ ... perty';ctx.typ ... operty'ctx.typectx.name = tag.name;ctx.name = tag.nametag.nameif (tag ...       }tag.types.length > 0tag.types.lengthtag.typesctx.typ ... types);ctx.typ ... .types)convert ... .types)case 't ...  break;staticctx.isStatic = true;ctx.isStatic = truectx.isStaticcase 'f ...  break;ctx.typ ... ction';ctx.typ ... nction'ctx.nam ... string;ctx.nam ... .stringtag.stringctx.isF ... = true;ctx.isF ...  = truectx.isFunctiontag.des ...     '';tag.des ...      ''tag.descriptionmd.pars ... $/, '')md.pars ... replacemd.pars ... >/, '')md.pars ... iption)md.parse^<p><\/p>\n?$p>\n?\n
tag.str ... fined')tag.str ... 'void')tag.string.includestag.typ ... void');tag.typ ... 'void')tag.types.pushctx.return = tag;ctx.return = tagctx.returncase 'i ...       }const o ... , ctx);obj = e ... g, ctx)extract ... g, ctx)if (!ob ...       }!obj.ur ... bj.text!obj.urlobj.urlobj.url === obj.textobj.textlet mat ... efined;match = undefinedfor (co ...       }const { ... (file);{ docNa ... e(file)processName(file)if (doc ...       }docName ... Case())docName ... ncludesdocName ... rCase()docName.toLowerCaseobj.tex ... rCase()obj.text.toLowerCasematch = docFileName;match = docFileNameif (mat ...       }obj.url ... .html';obj.url ... '.html'match + '.html'console ... me}"`);console ... ame}"`)`no mat ... name}"`no matc ... erits "ctx.inherits = obj;ctx.inherits = objctx.inheritscase 'event':ctx[tag ... || []);ctx[tag ...  || [])ctx[tag.type](ctx[ta ...  || [])ctx[tag.type] || []tag.nullabletag.typ ... null');tag.typ ... 'null')tag.typ ... types);tag.typ ... .types)ctx[tag ... h(tag);ctx[tag ... sh(tag)ctx[tag.type].pushtag.nam ... es('.')tag.nam ... th(']')tag.nam ... th('[')tag.name != nulltag.name.startsWithtag.name.endsWithtag.name.includestag.nested = true;tag.nested = truetag.nestedtag.variabletag.nam ... ice(1);tag.nam ... lice(1)'[...'  ... lice(1)[...tag.name.slice(1)tag.name.slicetag.nam ... g.name;tag.nam ... ag.name'...' + tag.name<\/p>$case 'm ...  break;ctx.type = 'method';ctx.type = 'method'memberOfctx.con ... parent;ctx.con ... .parenttag.parentcase 'c ...  break;ctx.str ... string;ctx.str ... .stringctx.stringcase 'i ...  break;instancectx.isI ... = true;ctx.isI ...  = truectx.isInstancecase 'd ...  break;ctx.dep ... = true;ctx.dep ...  = truectx.deprecatedif (ctx ... ;\n    }ctx.isI ... sStaticconsole ... e}")`);console ... le}")`)`Proper ... ile}")`" has b ... File: "ctx.isI ... fined))(!ctx.i ... fined))!ctx.is ... efined)!ctx.is ... nstance!ctx.isStatic!ctx.isInstance(!ctx.s ... efined)!ctx.st ... defined!ctx.stringif (ctx ...       }ctx.nam ... th('[')ctx.name.startsWithctx.str ... name}`;ctx.str ... .name}``${ctx. ... .name}`if ((ct ... ;\n    }(ctx.is ... h('()')(ctx.is ... ethod')ctx.isF ... method'ctx.typ ... method'!ctx.st ... h('()')ctx.str ... h('()')ctx.string.endsWithctx.str ... + '()';ctx.str ...  + '()'ctx.string + '()'ctx.anc ... string;ctx.anc ... .stringctx.anchorIdctx.des ... , '>');ctx.des ... g, '>')ctx.descriptionprop.de ... g, '>')prop.de ... replaceprop.de ... g, ' ')prop.de ... on.fullprop.description<br \/><br &gt;ctx.des ... ption);ctx.des ... iption)data.pr ... h(ctx);data.props.push(ctx)data.props.pushdata.propsdata.pr ... }\n  });data.pr ...  }\n  })data.props.sortif (a.s ... ;\n    }a.string < b.stringa.stringb.stringreturn -1;return 1;if (pro ... ue;\n  }props.f ... tions')props.f ... rtsWithlib/options{\n    d ... ue;\n  }data.hi ... = true;data.hi ...  = truedata.hideFromNavdata.fi ... s.file;data.fi ... ps.filedata.filedata.ed ... s.file;data.ed ... ps.filedata.editLink'https: ... ps.file'https: ... aster/'https://github.com/Automattic/mongoose/blob/master/out.set ...  data);out.set ... , data)out.set{\n  //  ... \n  };\n}const t ... tring);textMat ... string)/^(.*?  ... string)/^(.*?  ... /i.exec/^(.*?  ... /|$))/i^(.*? (?=#|\/|(?:https?:)|\.\/|$))(.*? (?=#|\/|(?:https?:)|\.\/|$)).*? (?=#|\/|(?:https?:)|\.\/|$).*?(?=#|\/|(?:https?:)|\.\/|$)#|\/|(?:https?:)|\.\/|$(?:https?:)https?:s?\.\/let tex ... efined;text = undefinedlet url = undefined;url = undefinedif (tex ... ();\n  }textMat ... definedtextMatches === null{\n    i ... ng;\n  }if (war ... ;\n    }`No Tex ... name}"`No Text ... g for "url = tag.string;url = tag.stringtext = tag.string;text = tag.string{\n    t ... ();\n  }text =  ... trim();text =  ... .trim()textMat ... .trim()textMatches[1].trimtextMatches[1]url = t ... trim();url = t ... .trim()tag.str ... .trim()tag.str ... h).trimtag.str ... length)tag.string.slicetext.lengthreturn  ... id\n  };{\n    t ... lid\n  }text: t ... iption'text || ... iption'No Descriptionurl: ur ... definedurl || undefinedmodule. ... seFile;module. ... rseFilemodule. ... lFiles;module. ... llFiles/home/insomnia/repos/mongoose/docs/source/home.jspkg'./../../package.json'package'ODM'const p ... json');pkg = r ... .json')require ... .json')'./../. ... e.json'./../../package.json/packagemodule. ... ODM'\n};module. ... 'ODM'\n}{\n  pac ... 'ODM'\n}package: pkgtitle: 'ODM'ODM/home/insomnia/repos/mongoose/docs/source/index.js
 * @typedef {Object} DocsOptions
 * @property {String} title Title of the page
 * @property {Boolean} [api] Indicate that the page is for API
 * @property {Boolean} [acquit] Enable test parsing and insertion
 * @property {Boolean} [markdown] Enable markdown processing
 * @property {Boolean} [guide] Indicate the page is a guide
 * @property {Boolean} [schema]
 * @property {*}  [jobs] Overwrite which jobs should be listed in the page (applied automatically)
 
 * Separate type from `exports`, because `exports` cannot be typed
 * @type {Object.<string, DocsOptions>}
  Re-export for nav without extra filtering /** Re- ... ring */sponsors'../data/sponsors.json''../data/jobs.json'api'./api''./tutorials''./typescript'apidocdocs/api/'index.pug''./home''docs/api.md''Redirect to API''docs/advanced_schemas.md''Advanced Schemas'acquit'docs/validation.md''Validation''docs/customschematypes.md''Custom Schema Types''docs/promises.md''Promises''docs/discriminators.md''Discriminators''docs/defaults.md''Defaults''docs/index.md''Getting Started''docs/browser.md'guide'Browser Library''docs/guides.md''Schemas''docs/guide.md''docs/schematypes.md''SchemaTypes''docs/middleware.md''Middleware''docs/plugins.md''Plugins''docs/subdocs.md''SubDocuments''docs/documents.md''Documents''docs/models.md''Models''docs/queries.md''Queries''docs/populate.md''Query Population''docs/migration.md''Migration Guide''docs/migrating_to_5.md''Migrating to Mongoose 5''docs/migrating_to_6.md''Migrating to Mongoose 6''docs/migrating_to_7.md''Migrating to Mongoose 7''docs/migrating_to_8.md''Migrating to Mongoose 8''docs/connections.md''Connecting to MongoDB''docs/lambda.md''Using Mongoose With AWS Lambda''docs/geojson.md''Using GeoJSON''docs/transactions.md''Transactions''docs/deprecations.md''Deprecation Warnings''docs/further_reading.md''Further Reading''docs/jest.md''Testing Mongoose with Jest''docs/nextjs.md''Using Mongoose With Next.js''docs/faq.md''FAQ''docs/typescript.md''Using TypeScript with Mongoose''docs/compatibility.md''MongoDB Version Compatibility''docs/shared-schemas.md''Sharing Schemas Between Mongoose Projects''docs/field-level-encryption.md''Field Level Encryption''docs/timestamps.md''Mongoose Timestamps''docs/search.pug''Search''docs/enterprise.md''Mongoose for Enterprise''docs/sponsors.pug''Mongoose Sponsors''docs/async-await.md''Using Async/Await with Mongoose''docs/jobs.pug''Mongoose MongoDB Jobs''docs/change-streams.md''MongoDB Change Streams in NodeJS with Mongoose''docs/lodash.md''Using Mongoose with Lodash''docs/incompatible_packages.md''Known Incompatible npm Packages''docs/check-version.md''How to Check Your Mongoose Version''docs/version-support.md''Version Support'fileMapapiDocsDocsOptions
Title of the page
[api] Indicate that the page is for API
[acquit] Enable test parsing and insertion
[markdown] Enable markdown processing
[guide] Indicate the page is a guide
[schema]
[jobs] Overwrite which jobs should be listed in the page (applied automatically)Separate type from `exports`, because `exports` cannot be typedObject.<string, DocsOptions>DocsOptionsRe-export for nav without extra filteringlet sponsors = [];sponsors = []try {\n  ... err) {}{\n  spo ... on');\n}sponsor ... json');sponsor ... .json')'../dat ... s.json'../data/sponsors.json/data/sponsorscatch (err) {}let jobs = [];jobs = []{\n  job ... on');\n}jobs =  ... json');jobs =  ... .json')../data/jobs.json/data/jobsconst a ... /api');api = r ... ./api')require('./api')./api/apiconst d ... pt')\n};docs =  ... ipt')\n}{\n  ... ... ipt')\n}...requ ... rials')require ... rials')./tutorials/tutorials...requ ... cript')require ... cript')./typescript/typescriptfor (co ... ue };\n}api.docs.values()api.docs.valuesapi.docsconst apidoc{\n  doc ... ue };\n}docs[`d ... true };docs[`d ...  true }docs[`d ... .html`]`docs/a ... }.html`apidoc.fileName{ ...ap ...  true }...apidocapi: truedocs['i ... home');docs['i ... /home')docs['index.pug']index.pugpugrequire('./home')./homedocs['d ... true\n};docs['d ...  true\n}docs['docs/api.md']docs/api.mddocs/api{\n  doc ...  true\n}docs: []title:  ... to API'Redirect to APImarkdown: truedocs['d ... true };docs['d ...  true }docs['d ... as.md']'docs/a ... mas.md'docs/advanced_schemas.mddocs/advanced_schemas{ title ...  true }title:  ... chemas'Advanced Schemasacquit: truedocs['d ... on.md']docs/validation.mddocs/validationtitle: 'Validation'Validationdocs['d ... es.md']'docs/c ... pes.md'docs/customschematypes.mddocs/customschematypestitle:  ...  Types''Custom ...  Types'Custom Schema Typesdocs/promises.mddocs/promisestitle: 'Promises'Promisesdocs['d ... rs.md']'docs/d ... ors.md'docs/discriminators.mddocs/discriminatorstitle:  ... nators'Discriminatorsdocs['d ... ts.md']docs/defaults.mddocs/defaultstitle: 'Defaults'Defaultsdocs['d ... ex.md']docs/index.mddocs/indextitle:  ... tarted'Getting Starteddocs['d ... er.md']docs/browser.mddocs/browser{ guide ...  true }guide: truetitle:  ... ibrary'Browser Librarydocs/guides.mddocs/guidesschema: truetitle: 'Schemas'Schemasdocs['d ... de.md']docs/guide.mddocs/guide'docs/s ... pes.md'docs/schematypes.mddocs/schematypestitle: 'SchemaTypes'SchemaTypesdocs['d ... re.md']docs/middleware.mddocs/middlewaretitle: 'Middleware'Middlewaredocs['d ... ns.md']docs/plugins.mddocs/pluginstitle: 'Plugins'Pluginsdocs['d ... cs.md']docs/subdocs.mddocs/subdocsdocs: truetitle:  ... uments'SubDocumentsdocs/documents.mddocs/documentstitle: 'Documents'Documentsdocs['d ... ls.md']docs/models.mddocs/modelstitle: 'Models'Modelsdocs/queries.mddocs/queriestitle: 'Queries'Queriesdocs['d ... te.md']docs/populate.mddocs/populatetitle:  ... lation'Query Populationdocs/migration.mddocs/migrationtitle:  ...  Guide'Migration Guidedocs['d ... _5.md']'docs/m ... o_5.md'docs/migrating_to_5.mddocs/migrating_to_5title:  ... oose 5''Migrat ... oose 5'Migrating to Mongoose 5docs['d ... _6.md']'docs/m ... o_6.md'docs/migrating_to_6.mddocs/migrating_to_6title:  ... oose 6''Migrat ... oose 6'Migrating to Mongoose 6docs['d ... _7.md']'docs/m ... o_7.md'docs/migrating_to_7.mddocs/migrating_to_7title:  ... oose 7''Migrat ... oose 7'Migrating to Mongoose 7docs['d ... _8.md']'docs/m ... o_8.md'docs/migrating_to_8.mddocs/migrating_to_8title:  ... oose 8''Migrat ... oose 8'Migrating to Mongoose 8'docs/c ... ons.md'docs/connections.mddocs/connectionstitle:  ... ongoDB''Connec ... ongoDB'Connecting to MongoDBdocs['d ... da.md']docs/lambda.mddocs/lambdatitle:  ... Lambda''Using  ... Lambda'Using Mongoose With AWS Lambdadocs/geojson.mddocs/geojsontitle:  ... eoJSON'Using GeoJSON'docs/t ... ons.md'docs/transactions.mddocs/transactionstitle:  ... ctions'Transactions'docs/d ... ons.md'docs/deprecations.mddocs/deprecationstitle:  ... rnings''Deprec ... rnings'Deprecation Warningsdocs['d ... ng.md']'docs/f ... ing.md'docs/further_reading.mddocs/further_readingtitle:  ... eading'Further Readingdocs['docs/jest.md']docs/jest.mddocs/jesttitle:  ... h Jest''Testin ... h Jest'Testing Mongoose with Jestdocs['d ... js.md']docs/nextjs.mddocs/nextjstitle:  ... ext.js''Using  ... ext.js'Using Mongoose With Next.jsUsing Mongoose With Nextdocs['docs/faq.md']docs/faq.mddocs/faqtitle: 'FAQ'FAQdocs['d ... pt.md']docs/typescript.mddocs/typescripttitle:  ... ngoose''Using  ... ngoose'Using TypeScript with Mongoosedocs['d ... ty.md']'docs/c ... ity.md'docs/compatibility.mddocs/compatibility{\n  tit ...  true\n}title:  ... bility''MongoD ... bility'MongoDB Version Compatibility'docs/s ... mas.md'docs/shared-schemas.mddocs/shared-schemastitle:  ... ojects''Sharin ... ojects'Sharing Schemas Between Mongoose Projects'docs/f ... ion.md'docs/field-level-encryption.mddocs/field-level-encryptiontitle:  ... yption''Field  ... yption'Field Level Encryptiondocs['d ... ps.md']docs/timestamps.mddocs/timestampstitle:  ... stamps''Mongoo ... stamps'Mongoose Timestampsdocs['d ... rch' };docs['d ... arch' }docs['d ... h.pug']docs/search.pugdocs/search{ title: 'Search' }title: 'Search'Searchdocs['d ... se.md']docs/enterprise.mddocs/enterprisetitle:  ... rprise''Mongoo ... rprise'Mongoose for Enterprisedocs['d ... sors\n};docs['d ... nsors\n}docs['d ... s.pug']docs/sponsors.pugdocs/sponsors{\n  tit ... nsors\n}title:  ... onsors'Mongoose Sponsorsdocs['d ... it.md']'docs/a ... ait.md'docs/async-await.mddocs/async-awaitUsing Async/Await with Mongoosedocs['d ... jobs\n};docs['d ...  jobs\n}docs/jobs.pugdocs/jobs{\n  tit ...  jobs\n}title:  ... B Jobs''Mongoo ... B Jobs'Mongoose MongoDB Jobsdocs['d ... ms.md']'docs/c ... ams.md'docs/change-streams.mddocs/change-streams'MongoD ... ngoose'MongoDB Change Streams in NodeJS with Mongoosedocs['d ... sh.md']docs/lodash.mddocs/lodashtitle:  ... Lodash''Using  ... Lodash'Using Mongoose with Lodash'docs/i ... ges.md'docs/incompatible_packages.mddocs/incompatible_packagestitle:  ... ckages''Known  ... ckages'Known Incompatible npm Packages'docs/c ... ion.md'docs/check-version.mddocs/check-versiontitle:  ... ersion''How to ... ersion'How to Check Your Mongoose Versiondocs['d ... rt.md']'docs/v ... ort.md'docs/version-support.mddocs/version-supporttitle:  ... upport'Version Supportfor (co ... jobs;\n}Object.values(docs)const props{\n  pro ... jobs;\n}props.jobs = jobs;props.jobs = jobsprops.jobsmodule. ... = docs;module. ...  = docsmodule. ... fileMapmodule. ... i.docs;module. ... pi.docsmodule. ... apiDocs/home/insomnia/repos/mongoose/docs/source/tutorials.jsmapSubDoc'./utils''tutorials''Mongoose Tutorials:'const { ... tils');{ mapSu ... utils'){ mapSubDoc }require('./utils')./utils/utilsmapSubD ... ports);mapSubD ... xports)tutorialstitle:  ... rials:''Mongoo ... rials:'Mongoose Tutorials:/home/insomnia/repos/mongoose/docs/source/typescript.js'typescript''Mongoose:'title: 'Mongoose:'Mongoose:/home/insomnia/repos/mongoose/docs/source/utils.js
 * @typedef {import("./index").DocsOptions} DocsOptions
 
 * Map sub-directories with custom options
 * @param {String} subDoc Path to the subdoc, like "tutorials" (no beginning or ending slash)
 * @param {DocsOptions} options Options applied to all files in the subdoc (title gets appended to provided title)
 * @param {Object} exportsObj The "module.exports" object to apply changes to
 /**\n *  ...  to\n */subDocexportsObjdirNamedocs/'.md''\n'/^#+/Map sub-directories with custom optionsPath to the subdoc, like "tutorials" (no beginning or ending slash)
Options applied to all files in the subdoc (title gets appended to provided title)
The "module.exports" object to apply changes to{\n  con ...   });\n}const d ... bDoc}`;dirName ... ubDoc}``docs/${subDoc}`const f ... .md'));files = ... '.md'))fs.read ... '.md'))fs.read ... .filterfs.read ... irName)file => ... ('.md')file.endsWith('.md')file.endsWith.mdfiles.f ... ;\n  });files.f ... };\n  })files.forEach(filena ...  };\n  }{\n    c ...  };\n  }const c ... utf8');content ... 'utf8')`${dirN ... ename}`exports ... \n    };exports ... `\n    }exports ... name}`]{\n      ... `\n    }...optionstitle:  ... rim()}``${opti ... rim()}`options.titlecontent ... .trim()content ... ').trimcontent ... +/, '')content ... replacecontent ... \n')[0]content.split('\n')content.split^#+#+module. ... SubDoc;module. ... pSubDoc/home/insomnia/repos/mongoose/examples/aggregate/aggregate.js/home/insomnia/repos/mongoose/examples/aggregate/home/insomnia/repos/mongoose/examples import async to make control flow simplier// impo ... implier import the rest of the normal stuff// impo ... l stuff define some dummy data// defi ... my data create all of the dummy people// crea ...  people handle error// handle error run an aggregate query that will get all of the people who like a given// run  ... a given item. To see the full documentation on ways to use the aggregate// item ... gregate framework, see http://www.mongodb.com/docs/manual/core/aggregation/// fram ... gation/ select the fields we want to deal with// sele ... al with unwind 'likes', which will create a document for each like// unwi ... ch like group everything by the like and then add each name with that like to// grou ... like to the set for the like// the  ... he like [
         { _id: { likes: 'the night' }, likers: [ 'alucard' ] },
         { _id: { likes: 'wine' }, likers: [ 'alucard' ] },
         { _id: { likes: 'books' }, likers: [ 'lilly' ] },
         { _id: { likes: 'glasses' }, likers: [ 'alucard' ] },
         { _id: { likes: 'birds' }, likers: [ 'mary' ] },
         { _id: { likes: 'rabbits' }, likers: [ 'bob' ] },
         { _id: { likes: 'cats' }, likers: [ 'lilly', 'mary' ] },
         { _id: { likes: 'dogs' }, likers: [ 'lilly', 'bill' ] },
         { _id: { likes: 'tv' }, likers: [ 'bob' ] },
         { _id: { likes: 'games' }, likers: [ 'bob', 'bill' ] },
         { _id: { likes: 'movies' }, likers: [ 'mary', 'bill' ] }
         ] /* [\n   ...    ] */'async''../../lib''./person.js'Person'Person''bill'agebirthdaygender'Male'likes'movies''games''dogs''mary'30'Female''birds''cats''bob''tv''rabbits''lilly'26'books''alucard'1000'glasses''wine''the night''mongodb://127.0.0.1/persons'aggregate$project$unwind'$likes'$grouplikers$addToSet'$name'cleanupconst a ... sync');async = ... async')require('async')const m ... /lib');mongoos ... ./lib')require('../../lib')../../lib/librequire ... js')();require ... .js')()require ... on.js')./person.js/personconst P ... rson');Person  ... erson')mongoos ... erson')const d ... \n  }\n];data =  ... ]\n  }\n][\n  {\n  ... ]\n  }\n]{\n    n ... s']\n  }name: 'bill'billage: 25birthda ...  - 25))new Dat ...  - 25))new Dat ... ullYearnew Date()(new Da ... ) - 25)new Dat ... () - 25new Dat ... lYear()gender: 'Male'Malelikes:  ... 'dogs']['movie ... 'dogs']moviesgamesdogsname: 'mary'maryage: 30birthda ...  - 30))new Dat ...  - 30))(new Da ... ) - 30)new Dat ... () - 30gender: 'Female'Femalelikes:  ... 'cats']['movie ... 'cats']birdscatsname: 'bob'bobage: 21birthda ...  - 21))new Dat ...  - 21))(new Da ... ) - 21)new Dat ... () - 21likes:  ... bbits']['tv',  ... bbits']tvrabbitsname: 'lilly'lillyage: 26birthda ...  - 26))new Dat ...  - 26))(new Da ... ) - 26)new Dat ... () - 26['books ... 'dogs']books{\n    n ... t']\n  }name: 'alucard'alucardage: 1000birthda ...  1000))new Dat ...  1000))(new Da ... - 1000)new Dat ...  - 1000likes:  ... night']['glass ... night']glasseswinethe nightmongoos ... });\n});mongoos ...  });\n})'mongod ... ersons'mongodb://127.0.0.1/persons1/persons{\n  if  ...   });\n}if (err) throw err;async.e ... ;\n  });async.e ... );\n  })async.eachfunctio ... b);\n  }{\n    P ... b);\n  }Person. ... m, cb);Person. ... em, cb)Person.create{\n    i ... });\n  }if (err ... r\n    }{\n      ... r\n    }Person. ...     });Person. ...      })Person.aggregate{ $proj ... : 1 } }$projec ... es: 1 }{ name: ... es: 1 }name: 1likes: 1{ $unwi ... ikes' }$unwind: '$likes'$likes{ $grou ...     } }$group: ...       }_id: {  ... ikes' }{ likes: '$likes' }likes: '$likes'likers: ... name' }{ $addT ... name' }$addToSet: '$name'$nameconsole.log(result);console.log(result)cleanup();cleanup(){\n  Per ...   });\n}Person. ... ;\n  });Person. ... );\n  })Person.removefunctio ... ();\n  }{\n    m ... ();\n  }mongoos ... nect();mongoos ... nnect()mongoose.disconnect/home/insomnia/repos/mongoose/examples/aggregate/package.json{\n  "na ... "BSD"\n}"aggregate-example"aggregate-example"true""0.0.0"0.0.0"deps f ... xample"deps for aggregate example"deps for aggregate example""aggregate.js"aggregate.js{\n    " ...  1"\n  }"echo \ ... exit 1"echo "Error: no test specified" && exit 1"echo \"Error: no test specified\" && exit 1"{ "async": "*" }"*"repository"BSD"BSDlicense/home/insomnia/repos/mongoose/examples/aggregate/person.js import the necessary modules// impo ... modules create an export function to encapsulate the model creation// crea ... reation define schema// define schemaPersonSchemaconst S ... Schema;Schema  ... .Schemamodule. ... ma);\n};module. ... ema);\n}functio ... ema);\n}{\n  //  ... ema);\n}const P ... ]\n  });PersonS ... g]\n  })new Sch ... g]\n  }){\n    n ... ng]\n  }age: Numberbirthday: Dategender: Stringlikes: [String][String]mongoos ... chema);/home/insomnia/repos/mongoose/examples/doc-methods.js
 * Schema
 /**\n * Schema\n */
 * Methods
 /**\n * Methods\n */
 * Character model
 /**\n *  ... del\n */
 * Connect to the database on 127.0.0.1 with
 * the default port (27017)
 /**\n *  ... 17)\n */ if we failed to connect, abort// if w ... , abort we connected ok// we connected ok
 * Use case
 /**\n * Use case\n */ 'Link is attacking'// 'Lin ... acking'
 * Clean up
 /**\n * Clean up\n */'Running mongoose version %s'CharacterSchemahealthmethodsattack'%s is attacking'Character'Character'dbname'mongoose-example-doc-methods-''mongodb://127.0.0.1/''connecting to %s''Link''found'dropDatabaseCharacter modelConnect to the database on 127.0.0.1 with
the default port (27017)Use caseClean upconst m ... oose');mongoos ... goose')require('mongoose')console ... rsion);console ... ersion)'Runnin ... ion %s'Running mongoose version %smongoose.versionconst C ...   }\n});Charact ... \n  }\n})Schema( ... \n  }\n}){\n  nam ... 0\n  }\n}name: { ... rue\n  }{\n    t ... rue\n  }health: ... 100\n  }{\n    t ... 100\n  }min: 0max: 100Charact ... me);\n};Charact ... ame);\n}Charact ... .attackCharact ... methodsfunctio ... ame);\n}{\n  con ... ame);\n}console ... .name);console ... s.name)%s is attackingthis.nameCharact ... Schema)const d ... ) | 0);dbname  ... 0) | 0)'mongoo ... 0) | 0)'mongoo ... thods-'mongoose-example-doc-methods-((Math. ... 0) | 0)(Math.r ... 00) | 0(Math.r ...  10000)Math.ra ... * 10000const u ... dbname;uri = ' ...  dbname'mongod ...  dbname'mongod ... 0.0.1/'mongodb://127.0.0.1/console ... , uri);console ... ', uri)connecting to %smongoos ... ();\n});mongoos ... e();\n})functio ... le();\n}{\n  //  ... le();\n}example();example(){\n  Cha ...   });\n}Charact ... ;\n  });Charact ... );\n  })Character.create{ name: ... : 100 }name: 'Link'Linkhealth: 100{\n    i ... ();\n  }if (err ... e(err);return done(err);done(err)console ...  link);console ... , link)foundlink.attack();link.attack()link.attackdone();done()if (err ... r(err);mongoos ... ;\n  });mongoos ... );\n  })mongoos ... atabasemongoos ... tion.dbmongoose.connection/home/insomnia/repos/mongoose/examples/express/connection-sharing/app.js/home/insomnia/repos/mongoose/examples/express/connection-sharing/home/insomnia/repos/mongoose/examples/expressexpress'express''../../../lib''mongodb://127.0.0.1/mongoose-shared-connection'routes'./routes''/insert'insert'/name'modelName8000'listening on http://127.0.0.1:8000'const e ... ress');express ... press')require('express')require ... ./lib')../../../libconst u ... ction';uri = ' ... ection''mongod ... ection'mongodb://127.0.0.1/mongoose-shared-connection1/mongoose-shared-connectionglobal. ... n(uri);global. ... on(uri)global.dbmongoos ... on(uri)mongoos ... nectionconst r ... utes');routes  ... outes')require('./routes')./routes/routesconst a ... ress();app = express()express()app.get ... .home);app.get ... s.home)app.getroutes.homeapp.get ... nsert);app.get ... insert)/insertroutes.insertapp.get ... lName);app.get ... elName)/nameroutes.modelNameapp.lis ... 000'));app.lis ... 8000'))app.listen() => c ... :8000')console ... :8000')'listen ... 1:8000'listening on http://127.0.0.1:8000listening on http://1271:8000/home/insomnia/repos/mongoose/examples/express/connection-sharing/modelA.js global db /* global db */mySchema'MyModel'require ... .Schemaconst m ... ing });mySchem ... ring })Schema( ... ring }){ name: String }module. ... chema);module. ... Schema)db.mode ... Schema)db.modelMyModel/home/insomnia/repos/mongoose/examples/express/connection-sharing/package.json"connection-sharing"connection-sharing"ERROR: ... found!"ERROR: No README.md file found!"ERROR: No README.md file found!""app.js"app.js{ "express": "4.x" }"4.x"4.x/home/insomnia/repos/mongoose/examples/express/connection-sharing/routes.js'./modelA'req'my model name is ''inserting 'const m ... delA');model = ... odelA')require('./modelA')./modelA/modelAexports ... \n  }\n};exports ... ;\n  }\n}exports.homeasync(r ... ;\n  }\n}{\n  try ... ;\n  }\n}try {\n  ... r);\n  }const d ... find();docs =  ... .find()await model.find()model.find()model.findres.send(docs);res.send(docs)res.sendcatch ( ... r);\n  }{\n    next(err);\n  }next(err);next(err)exports ... me);\n};exports ... ame);\n}exports.modelName(req, r ... ame);\n}{\n  res ... ame);\n}res.sen ... lName);res.sen ... elName)'my mod ... delNamemy model name is model.modelNameexports.insert{\n    c ... c);\n  }const d ... w() });doc = a ... ow() })await m ... ow() })model.c ... ow() })model.create{ name: ... now() }name: ' ... e.now()'insert ... e.now()inserting res.send(doc);res.send(doc)/home/insomnia/repos/mongoose/examples/geospatial/geoJSONSchema.js/home/insomnia/repos/mongoose/examples/geospatial NOTE : This object must conform *precisely* to the geoJSON specification// NOTE ... ication you cannot embed a geoJSON doc inside a model or anything like that- IT// you  ... hat- IT MUST BE VANILLA// MUST BE VANILLA define the index// define the indexLocationObjectloccoordinates'2dsphere''Location'module. ... ct);\n};module. ... ect);\n}functio ... ect);\n}{\n  //  ... ect);\n}const L ... }\n  });Locatio ...  }\n  })new Sch ...  }\n  }){\n    l ...   }\n  }loc: {\n ... ]\n    }{\n      ... ]\n    }type: { ... tring }{ type: String }coordinates: []Locatio ... re' });Locatio ... ere' })LocationObject.index{ loc: '2dsphere' }loc: '2dsphere'2dspheremongoos ... bject);mongoos ... Object)/home/insomnia/repos/mongoose/examples/geospatial/geoJSONexample.js note: the type can be Point, LineString, or Polygon// note ... Polygon create all of the dummy locations// crea ... cations create the location we want to search for// crea ... rch for search for it// search for it'./geoJSONSchema.js''Point'20.05.06.010.034.050.0100.070.038.0'mongodb://127.0.0.1/locations'$nearlimit'Closest to %s is %s'require ... ma.js')./geoJSONSchema.js/geoJSONSchemaconst L ... tion');Locatio ... ation')mongoos ... ation')const d ...  } }\n];data =  ... ] } }\n][\n  { l ... ] } }\n]{ loc:  ... .0] } }loc: {  ...  5.0] }{ type: ...  5.0] }type: 'Point'Pointcoordin ... 0, 5.0][-20.0, 5.0]-20.0loc: {  ... 10.0] }{ type: ... 10.0] }coordin ... , 10.0][6.0, 10.0]loc: {  ... 50.0] }{ type: ... 50.0] }coordin ...  -50.0][34.0, -50.0]34-50.050loc: {  ... 70.0] }{ type: ... 70.0] }coordin ... , 70.0][-100.0, 70.0]-100.070loc: {  ... 38.0] }{ type: ... 38.0] }coordin ... , 38.0][38.0, 38.0]38'mongod ... ations'mongodb://127.0.0.1/locations1/locationsif (err ... rr;\n  }{\n    throw err;\n  }Locatio ... ;\n  });Locatio ... );\n  })Location.onif (err ... ;\n    }async.e ...     });async.e ... \n    })functio ... ;\n    }Locatio ... m, cb);Locatio ... em, cb)Location.createif (err ...       }const c ... , 5] };coords  ... 5, 5] }{ type: ... 5, 5] }coordinates: [-5, 5][-5, 5]-5Locatio ...     });Locatio ...      })Locatio ... 1).execLocatio ... imit(1)Locatio ... ).limitLocatio ... ds } })Location.find{ loc:  ... rds } }loc: {  ... oords }{ $near: coords }$near: coordsconsole ... , res);console ... ), res)'Closes ...  is %s'Closest to %s is %sJSON.st ... coords){\n  Loc ...   });\n}Location.remove/home/insomnia/repos/mongoose/examples/geospatial/geospatial.js handler error// handler error let's find the closest person to bob// let' ...  to bob we can also just query straight off of the model. For more// we c ... or more information about geospatial queries and indexes, see// info ... es, see http://www.mongodb.com/docs/manual/applications/geospatial-indexes/// http ... ndexes/findClosest'%s is closest to %s'$nearSphere{\n    n ...  0]\n  }loc: [0, 0][0, 0]{\n    n ...  1]\n  }loc: [1, 1][1, 1]{\n    n ...  3]\n  }loc: [3, 3][3, 3]{\n    n ...  6]\n  }loc: [6, 6][6, 6]{\n    n ... 10]\n  }loc: [10, 10][10, 10]Person. ... \n    })Person.find{ name: 'bob' }res[0]. ...     });res[0]. ...      })res[0].findClosestres[0]console ... osest);console ... losest)'%s is  ...  to %s'%s is closest to %sres[0].nameconst c ... [7, 7];coords = [7, 7][7, 7]Person. ... 1).execPerson. ... imit(1)Person. ... ).limitPerson. ... ds } }){ $near ... oords }$nearSphere: coordsconsole ... s, res)/home/insomnia/repos/mongoose/examples/geospatial/package.json"geospatial-example"geospatial-exampledeps for geospatial example"deps for geospatial example""geospatial.js"geospatial.js/home/insomnia/repos/mongoose/examples/geospatial/person.js define the geospatial field// defi ... l field define a method to find the closest person// defi ...  person'2d'$neconst P ... }\n  });PersonS ...  }\n  }){\n    n ... ' }\n  }loc: {  ...  '2d' }{ type: ...  '2d' }type: [Number][Number]index: '2d'2dPersonS ... );\n  };PersonS ... b);\n  }PersonS ... ClosestPersonSchema.methods{\n    r ... b);\n  }return  ... ec(cb);mongoos ... xec(cb)mongoos ... 1).execmongoos ... imit(1)mongoos ... ).limitmongoos ... \n    })mongoos ... ').findloc: {  ... s.loc }{ $near ... s.loc }$nearSp ... his.locthis.locname: { ... .name }{ $ne: this.name }$ne: this.name/home/insomnia/repos/mongoose/examples/globalschemas/gs_example.js/home/insomnia/repos/mongoose/examples/globalschemas import the global schema, this can be done in any file that needs the model// impo ... e model grab the person model object// grab ...  object connect to a server to do a quick write / read example// conn ... example make sure to clean things up after we're done// make ... re done'People added to db: %s'peopleperson'People in the db: %s'{\n    n ... 5))\n  }console ... ing());console ... ring())'People ... db: %s'People added to db: %sbill.toString()bill.toStringpeople. ...     });people. ...      })people.forEachPeople in the db: %sperson.toString()person.toStringsetTime ...  2000);setTime ... , 2000)/home/insomnia/repos/mongoose/examples/globalschemas/person.jsconst P ... e\n  });PersonS ... te\n  })new Sch ... te\n  }){\n    n ... ate\n  }/home/insomnia/repos/mongoose/examples/lean/lean.js/home/insomnia/repos/mongoose/examples/lean lean queries return just plain javascript objects, not// lean ... ts, not MongooseDocuments. This makes them good for high performance read// Mong ... ce read situations// situations when using .lean() the default is true, but you can explicitly set the// when ... set the value by passing in a boolean value. IE. .lean(false)// valu ... (false)$lt'age'lean'Are the results MongooseDocuments?: %s'const q ... lean();q = Per ... .lean()Person. ... .lean()Person. ... 2).leanPerson. ... imit(2)Person. ... ('age')Person. ... }).sortPerson. ... 00 } }){ age:  ... 000 } }age: { $lt: 1000 }{ $lt: 1000 }$lt: 1000q.exec( ...     });q.exec( ... \n    })q.execconsole ... ument);console ... cument)'Are th ... s?: %s'Are the results MongooseDocuments?: %sAre the results MongooseDocument: %sresults ... ocumentresults[0]mongoose.Documentconsole ... sults);console.log(results)/home/insomnia/repos/mongoose/examples/lean/package.json"lean-example"lean-exampledeps for lean example"deps for lean example""lean.js"lean.js/home/insomnia/repos/mongoose/examples/lean/person.js/home/insomnia/repos/mongoose/examples/population/population-across-three-collections.js/home/insomnia/repos/mongoose/examples/population
 * Connect to the db
 /**\n *  ...  db\n */
 * Schemas
 /**\n * Schemas\n */
 * example
 /**\n * example\n */
   * Generate data
   /**\n    ... a\n   */
       * Population
       /**\n    ...      */
         * Populate the populated documents
         'testing_populateAdInfinitum_''../../lib/utils''127.0.0.1''connection error'friendsblogpostBlogPost'BlogPost''open'userIdsusers'joe''sally'blogposts'blog 1''fun''cool''blog 2''blog 3''odd''author''author.friends''name''populated''util'Connect to the dbGenerate dataPopulationPopulate the populated documentsconst a ... sert');const O ... jectId;ObjectI ... bjectIdconst d ... ndom();dbname  ... andom()'testin ... andom()'testin ... nitum_'testing_populateAdInfinitum_require ... andom()require ... .randomrequire ... utils')../../lib/utils/lib/utilsmongoos ... bname);mongoos ... dbname)127.0.0.1127mongoos ... s);\n});mongoos ... ts);\n})mongoos ... tion.onfunctio ... nts);\n}{\n  con ... nts);\n}console ... ments);console ... uments)connection errorconst u ...  }]\n});user =  ...   }]\n})new Sch ...   }]\n}){\n  nam ... \n  }]\n}friends ... r'\n  }][{\n     ... r'\n  }]{\n    t ... er'\n  }type: S ... bjectIdSchema.ObjectIdref: 'User'const U ...  user);User =  ... , user)mongoos ... , user)const b ...   }\n});blogpos ... \n  }\n}){\n  tit ... '\n  }\n}title: Stringtags: [String]author: ... er'\n  }const B ... gpost);BlogPos ... ogpost)mongoos ... ogpost){\n  /** ...   });\n}const u ... tId()];userIds ... ctId()][new Ob ... ctId()]new ObjectId()const users = [];users = []users.p ... ]\n  });users.p ... ]]\n  })users.push{\n    _ ... 3]]\n  }_id: userIds[0]userIds[0]friends ... Ids[3]][userId ... Ids[3]]userIds[1]userIds[2]userIds[3]_id: userIds[1]_id: userIds[2]name: 'joe'joe{\n    _ ... 2]]\n  }_id: userIds[3]name: 'sally'sallyfriends ... Ids[2]][userId ... Ids[2]]User.cr ... ;\n  });User.cr ... );\n  })User.createassert.ifError(err);assert.ifError(err)assert.ifErrorconst b ... s = [];blogposts = []blogpos ...     });blogpos ... \n    })blogposts.pushtitle: 'blog 1'blog 1tags: [ ... 'cool']['fun', 'cool']coolauthor: userIds[3]title: 'blog 2'blog 2tags: ['cool']['cool']author: userIds[1]title: 'blog 3'blog 3tags: ['fun', 'odd']['fun', 'odd']oddauthor: userIds[2]BlogPos ...     });BlogPos ... \n    })BlogPost.createBlogPos ...      })BlogPos ...   .execBlogPos ... uthor')BlogPos ... opulateBlogPos ... .lean()BlogPos ...   .leanBlogPos ... fun' })BlogPos ...   .find{ tags: 'fun' }tags: 'fun'const o ...      };opts =  ...       }path: ' ... riends'author.friendsselect: 'name'options ... it: 2 }{ limit: 2 }limit: 2BlogPost.populateconsole ... ated');console ... lated')populatedconst s ... rue });s = req ... true })require ... true })require ... inspectrequire('util'){ depth ...  true }depth: nullcolors: trueconsole.log(s);console.log(s)if (err ... stack);console ... stack);console ... .stack)err.stackmongoos ... lose();mongoos ... close()mongoos ... n.close/home/insomnia/repos/mongoose/examples/population/population-basic.js
 * Console schema
 /**\n *  ... ema\n */
 * Game schema
 
 * Connect to the console database on 127.0.0.1 with
 * the default port (27017)
 
 * Data generation
 
 * Population
 consoleSchemareleased'Console'gameSchemadeveloperconsolesGame'Game''mongodb://127.0.0.1/console'createData'Nintendo 64''Nintendo''September 29, 1996'nintendo64'Legend of Zelda: Ocarina of Time''November 21, 1998'/^Legend of Zelda/'consoles'ocinara'"%s" was released for the %s on %s'Console schemaGame schemaConnect to the console database on 127.0.0.1 with
the default port (27017)Data generationconst c ... ate\n});console ... Date\n})Schema( ... Date\n}){\n  nam ...  Date\n}manufacturer: Stringreleased: DateConsole ... Schema)const g ...  }]\n});gameSch ...   }]\n})Schema( ...   }]\n})developer: Stringconsole ... e'\n  }][{\n     ... e'\n  }]{\n    t ... le'\n  }Schema. ... bjectIdSchema.Typesref: 'Console'const G ... chema);Game =  ... Schema)mongoos ... a();\n})'mongod ... onsole'mongodb://127.0.0.1/console1/consolefunctio ... ta();\n}{\n  //  ... ta();\n}createData();createData()functio ... \n  );\n}{\n  Con ... \n  );\n}Console ...  }\n  );Console ...   }\n  )Console.create{\n      ... '\n    }name: 'Nintendo 64'Nintendo 64manufac ... ntendo'Nintendorelease ... , 1996'September 29, 1996Game.cr ...     });Game.cr ...      })Game.createname: ' ... f Time''Legend ... f Time'Legend of Zelda: Ocarina of Timedevelop ... ntendo'release ...  1998')new Dat ...  1998')November 21, 1998console ... endo64][nintendo64]{\n  Gam ...   });\n}Game\n   ...     });Game\n   ... \n    })Game\n   ...   .execGame\n   ... soles')Game\n   ... opulateGame\n   ... lda/ })Game\n    .findOne{ name: ... elda/ }name: / ...  Zelda/^Legend of ZeldaLegend of Zeldaconsole ...      );console ...       )'"%s" w ...  on %s'"%s" was released for the %s on %socinara.nameocinara ... 0].nameocinara.consoles[0]ocinara.consolesocinara ... tring()ocinara ... eStringocinara.releasedConsole ... ;\n  });Console ... );\n  })Console.remove{\n    G ... });\n  }Game.re ...     });Game.re ... \n    })Game.remove/home/insomnia/repos/mongoose/examples/population/population-of-existing-doc.js population of existing document// popu ... ocument'"%s" console _id: %s'console ... es[0]);console ... les[0])'"%s" c ... id: %s'"%s" console _id: %socinara ...     });ocinara ...      })ocinara.populate/home/insomnia/repos/mongoose/examples/population/population-of-multiple-existing-docs.js'Super Nintendo''August 23, 1991'superNintendo'Mario Kart''September 1, 1992''found %d games''name released -_id'gamename: ' ... ntendo'Super Nintendorelease ... , 1991'August 23, 1991Game.cr ...      );Game.cr ...       )name: 'Mario Kart'Mario Kartrelease ... , 1992'September 1, 1992console ... ntendo][superNintendo]Game\n    .find({})Game\n    .findconsole ... ength);console ... length)found %d gamesgames.lengthconst o ... _id' };options ... -_id' }{ path: ... -_id' }path: 'consoles'select: ... d -_id'name released -_idGame.po ...     });Game.po ...      })Game.populategames.f ...     });games.f ...      })games.forEachgame.namegame.co ... 0].namegame.consoles[0]game.consolesgame.re ... tring()game.re ... eStringgame.released/home/insomnia/repos/mongoose/examples/population/population-options.js'XBOX 360''Microsoft''November 22, 2005'xbox360'Perfect Dark Zero''Rare''November 17, 2005'comment'population''??'name: 'XBOX 360'XBOX 360manufac ... rosoft'Microsoftrelease ... , 2005'November 22, 2005name: ' ... k Zero'Perfect Dark Zerodeveloper: 'Rare'RareNovember 17, 2005consoles: [xbox360][xbox360]match:  ... endo' }{ manuf ... endo' }options ... tion' }{ comme ... tion' }comment ... lation'populationgame.co ...  : '??'game.consoles.length??return done();/home/insomnia/repos/mongoose/examples/population/population-plain-objects.js just return plain objects, not documents wrapped by mongoose// just ... ongooseGame\n   ... .lean()Game\n   ...   .lean/home/insomnia/repos/mongoose/examples/promises/package.json/home/insomnia/repos/mongoose/examples/promises"promise-example"promise-exampledeps for promise example"deps for promise example""promise.js"promise.js/home/insomnia/repos/mongoose/examples/promises/person.js/home/insomnia/repos/mongoose/examples/promises/promise.js create a promise (get one from the query builder)// crea ... uilder) add a callback on the promise. This will be called on both error and// add  ... ror and complete// complete add a callback that is only called on complete (success) events// add  ...  events add a callback that is only called on err (rejected) events you can chain things just like in the promise/A+ spec// you  ... A+ spec note: each then() is returning a new promise, so the above methods// note ... methods that we defined will all fire after the initial promise is fulfilled// that ... lfilled just getting the stuff for the next query// just ... t query return the next promise// retu ... promiseprom'completed'addCallback'Successful Completion!'addErrback'Fail Boat'ids$ninoldest'Oldest person is: %s'data =  ... )\n  }\n][\n  {\n  ... )\n  }\n]{\n    n ... 0))\n  }{\n    n ... 1))\n  }{\n    n ... 6))\n  }functio ... p);\n  }{\n    i ... p);\n  }const p ... exec();prom =  ... .exec()Person. ... .exec()Person. ... }).execprom.ad ...     });prom.ad ... \n    })prom.addBackconsole ... eted');console ... leted')completedprom.addCallbackconsole ... ion!');console ... tion!')'Succes ... etion!'Successful Completion!prom.addErrbackconsole ... Boat');console ...  Boat')Fail Boatprom.th ... eanup);prom.th ... leanup)prom.th ... }).thenprom.th ... \n    })prom.thenconst i ...     });ids = p ...      })people.mapreturn p._id;p._idreturn  ... exec();{ _id:  ... ids } }_id: { $nin: ids }{ $nin: ids }$nin: idsconsole ... ldest);console ... oldest)'Oldest ... is: %s'Oldest person is: %s/home/insomnia/repos/mongoose/examples/querybuilder/package.json/home/insomnia/repos/mongoose/examples/querybuilder"query- ... xample"query-builder-example"query-builder-example"deps for query builder example"deps for query builder example""querybuilder.js"querybuilder.js/home/insomnia/repos/mongoose/examples/querybuilder/person.js/home/insomnia/repos/mongoose/examples/querybuilder/querybuilder.js when querying data, instead of providing a callback, you can instead// when ... instead leave that off and get a query object returned// leav ... eturned this allows you to continue applying modifiers to it// this ... s to it you can chain them together as well// you  ... as well a full list of methods can be found:// a fu ...  found: http://mongoosejs.com/docs/api/query.html// http ... ry.html finally, when ready to execute the query, call the exec() function// fina ... unction'birthday'wheregtconst q ... 0 } });query = ... 00 } })query.s ... hday');query.s ... thday')query.sortquery.s ... name');query.select('name')query.selectquery.w ... gt(21);query.w ... .gt(21)query.w ... ge').gtquery.where('age')query.wherequery.e ...     });query.e ... \n    })query.exec/home/insomnia/repos/mongoose/examples/redis-todo/.eslintrc.yml/home/insomnia/repos/mongoose/examples/redis-todo2019ecmaVersion: 2019parserOptions:/home/insomnia/repos/mongoose/examples/redis-todo/config.jsJWT_SECRET'token'const J ... token';JWT_SECRET = 'token'module. ... CRET\n};module. ... ECRET\n}{\n  JWT_SECRET\n}/home/insomnia/repos/mongoose/examples/redis-todo/db/index.js/home/insomnia/repos/mongoose/examples/redis-todo/db'mongodb://127.0.0.1/redis-todo'mongoos ... todo');mongoos ... -todo')'mongod ... s-todo'mongodb://127.0.0.1/redis-todo1/redis-todo/home/insomnia/repos/mongoose/examples/redis-todo/db/models/todoModel.js/home/insomnia/repos/mongoose/examples/redis-todo/db/modelstodoSchemauserId'Todo'const t ... lse });todoSch ... alse }){\n  tex ... rue }\n}text: { ...  true }complet ... false }{ type: ... false }type: BooleanuserId: ...  true }{ times ... false }Todo/home/insomnia/repos/mongoose/examples/redis-todo/db/models/userModel.js this = user// this = user creating token// creating token password hasing// password hasingjwt'jsonwebtoken'bcrypt'bcryptjs''../../config'userSchemapasswordId'Password'userPasswordSchemagenAuthTokenpre'save'isModified'password'hashSyncPasswordconst j ... oken');jwt = r ... token')require ... token')jsonwebtokenconst b ... ptjs');bcrypt  ... yptjs')require('bcryptjs')bcryptjsconst J ... SECRET;JWT_SEC ... _SECRETrequire ... _SECRETrequire ... onfig')../../config/configconst { ... ngoose;{ Schem ... ongoose{ Schema, model }const u ... lse });userSch ... alse })new Sch ... alse }){\n  nam ... rd' }\n}usernam ...  true }unique: truepasswor ... word' }{ type: ... word' }ref: 'Password'const u ... e }\n});userPas ... ue }\n})new Sch ... ue }\n}){\n  pas ... rue }\n}passwor ...  true }userSch ... ser;\n};userSch ... user;\n}userSch ... .toJSONuserSchema.methodsfunctio ... user;\n}{\n  con ... user;\n}const u ... ject();user =  ... bject()this.toObject()this.toObjectdelete  ... ssword;delete user.passworduser.passworddelete user.email;delete user.emailuser.emailreturn user;userSch ... user\n};userSch ...  user\n}userSch ... thTokenfunctio ...  user\n}{\n  ret ...  user\n}return  ... ECRET);jwt.sig ... SECRET)jwt.sign{ userI ... ing() }userId: ... tring()this._id.toString()this._id.toStringthis._iduserPas ...   }\n});userPas ... \n  }\n})userPas ... ema.preasync f ... ;\n  }\n}if (thi ... ;\n    }this.is ... sword')this.isModifiedthis.pa ... rd, 8);this.pa ... ord, 8)this.passwordawait b ... ord, 8)bcrypt. ... ord, 8)bcrypt.hashSyncreturn next();next()next();{\n    r ... r);\n  }return next(err);module. ... ema)\n};module. ... hema)\n}{\n  Use ... hema)\n}User: m ... Schema)model(' ... Schema)Passwor ... Schema)/home/insomnia/repos/mongoose/examples/redis-todo/middleware/auth.js/home/insomnia/repos/mongoose/examples/redis-todo/middleware'../config'authToken'x-auth'404'AuthToken not found'decodedValue401'Invalid Authentication'require('../config')../configmodule. ... ;\n  }\n}try {\n  ... });\n  }{\n    c ... ();\n  }const a ... auth');authTok ... -auth')req.header('x-auth')req.headerx-authif (!au ... nd' });!authTokenreturn  ... nd' });res.sta ... und' })res.status(404).sendres.status(404)res.status{ msg:  ... ound' }msg: 'A ...  found''AuthTo ...  found'AuthToken not foundconst d ... ECRET);decoded ... SECRET)jwt.ver ... SECRET)jwt.verifyif (!de ... on' });!decodedValuereturn  ... on' });res.sta ... ion' })res.status(401).sendres.status(401){ msg:  ... tion' }msg: 'I ... cation''Invali ... cation'Invalid Authenticationreq.use ... userId;req.use ... .userIdreq.userIddecodedValue.userIdcatch ( ... });\n  }res.sta ... on' });/home/insomnia/repos/mongoose/examples/redis-todo/middleware/clearCache.js call endpoint// call endpointclearCache'../services/cache'const { ... ache');{ clear ... cache'){ clearCache }require ... cache')../services/cache/services/cachemodule. ... Id);\n};module. ... rId);\n}async f ... rId);\n}{\n  awa ... rId);\n}await next();await next()console ... serId);console ... userId)clearCa ... serId);clearCa ... userId)/home/insomnia/repos/mongoose/examples/redis-todo/package.json{\n  "na ... "\n  }\n}"redis-todo"redis-todo"1.0.0"1.0.0"todo a ... ngoose"todo app build with express redis mongoose"todo app build with express redis mongoose""server.js"server.js{\n    " ... zy"\n  }"node server.js"node server.js"nodemon server.js"nodemon server.jsdev:start"standa ... snazzy"standard --fix || snazzy"standard --fix || snazzy"fix{\n    " ... it"\n  }"git""git+ht ... do.git"git+https://github.com/usama-asfar/redis-todo.git"git+https://github.com/usama-asfar/redis-todo.git"[\n    " ... se"\n  ]"express""redis"redis"mongoose"keywords"@usama__asfar"@usama__asfar"MIT"MIT{\n    " ... es"\n  }"https: ... issues"https://github.com/usama-asfar/redis-todo/issues"https://github.com/usama-asfar/redis-todo/issues"bugs"https: ... readme"https://github.com/usama-asfar/redis-todo#readme"https://github.com/usama-asfar/redis-todo#readme"homepage{\n    " ... .0"\n  }"^2.4.3"^2.4.3"^4.18.1"^4.18.1"^6.4.0"^6.4.0express-rate-limit"^8.5.1"^8.5.1"^6.3.5"^6.3.5"^4.1.0"^4.1.0"^2.0.16"^2.0.16nodemon"^1.9.1"^1.9.1morgan"^9.0.0"^9.0.0snazzy"^17.0.0"^17.0.0standarddevDependencies/home/insomnia/repos/mongoose/examples/redis-todo/routers/todoRouter.js/home/insomnia/repos/mongoose/examples/redis-todo/routers @api private
 * @func: fetch all user todos
 * @input: user id
 * @return: todos
 /* @api ... dos\n */ @api private
 * @func: create todo
 * @input: todo data, userid
 * @return: todo
 /* @api ... odo\n */ @api private
 * @func: update todo
 * @input: todo data, todoId, userid
 * @return: updated todo
  @api private
 * @func: delete todo
 * @input: todoId, userid
 /* @api ... rid\n */Router'../db/models/todoModel''../middleware/auth''../middleware/clearCache''/all'todoscreatedAt501'Server Error''/create'todo201'/update'updatedTodofindOneAndUpdate$andtodoIdsanitizeFilter'Todo not found''/delete'findOneAndDelete'Todo deleted'const R ... uter();Router  ... outer()require ... outer()require ... .Routerconst T ... odel');Todo =  ... Model')require ... Model')'../db/ ... oModel'../db/models/todoModel/db/models/todoModelauth =  ... /auth')require ... /auth')../middleware/auth/middleware/authconst c ... ache');clearCa ... Cache')require ... Cache')'../mid ... rCache'../middleware/clearCache/middleware/clearCacheRouter. ...   }\n});Router. ... \n  }\n})Router.get/all{ userId }try {\n  ... ');\n  }res.sta ...  }) });res.sta ... d }) })res.status(200).jsonres.status(200){ todos ... Id }) }todos:  ... erId })await T ... erId })Todo.fi ... erId })Todo.fi ... ).cacheTodo.fi ... : -1 })Todo.fi ... }).sortTodo.find{ createdAt: -1 }createdAt: -1{ key: userId }key: userIdcatch ( ... ');\n  }console.log(err);console.log(err)res.sta ... rror');res.sta ... Error')res.status(501).sendres.status(501)Server ErrorRouter.post/create{ userId, body }const t ...     });todo =  ... \n    })new Tod ... \n    }){\n      ... d\n    }text: body.textbody.textcomplet ... mpletedbody.completedawait todo.save();await todo.save()todo.save()todo.saveres.sta ... odo });res.sta ... todo })res.status(201).jsonres.status(201){ todo }{\n    r ... ');\n  }/updateconst u ... \n    );updated ... }\n    )await T ... }\n    )Todo.fi ... }\n    )Todo.fi ... dUpdate{ $and: ... Id }] }$and: [ ... doId }][{ user ... doId }]{ _id: body.todoId }_id: body.todoIdbody.todoId{ ...body }...body{ new:  ...  true }new: truesanitizeFilter: trueif (!up ... nd' });!updatedTodomsg: 'T ...  found'Todo not foundawait u ... save();await u ... .save()updatedTodo.save()updatedTodo.saveres.sta ... Todo }){ todo: ... dTodo }todo: updatedTodoRouter.delete/delete{ userI ... oId } }body: { todoId }{ todoId }await T ...  }] });await T ... d }] })Todo.fi ... d }] })Todo.fi ... dDelete{ _id: todoId }_id: todoIdres.sta ... ed' });res.sta ... ted' })res.status(200).send{ msg:  ... eted' }msg: 'Todo deleted'Todo deletedmodule. ... Router;module. ...  Router/home/insomnia/repos/mongoose/examples/redis-todo/routers/userRouter.js @public
 * @func: create new user
 * @input: username,name,email and password
 * @return: auth token
 /* @pub ... ken\n */ storing password// storing password body = user data// body = user data gen auth token// gen auth token hashing password// hashing password @public
 * @func: login user
 * @input: user/email, password
 * @return: auth token
  @api private
 * @func: edit user
 * @input: username, name or password
 * @return: edited user
 /* @api ... ser\n */ if password then hash it// if p ... hash it @api private
 * @func: delete user
 '../db/models/userModel''/login''passwordId''Invalid credential'isPasswordupdatedUserfindByIdAndUpdatefindByIdfindByIdAndRemove'User deleted'const { ... odel');{ User, ... Model'){ User, Password }'../db/ ... rModel'../db/models/userModel/db/models/userModel{ body }{\n    / ... });\n  }const p ... ord });passwor ... word })new Pas ... word }){ passw ... sword }passwor ... asswordbody.passwordconst u ...     });user =  ... \n    })new Use ... \n    })name: body.namebody.nameusernam ... sernamebody.usernameemail: body.emailbody.emailpasswor ... ord._idpassword._idconst t ... oken();token = ... Token()await u ... Token()user.genAuthToken()user.genAuthTokenawait p ... save();await p ... .save()password.save()password.saveawait user.save();await user.save()user.save()user.saveres.sta ... ken });res.sta ... oken }){ token }/loginconst u ... rdId');user =  ... ordId')await U ... ordId')User.fi ... ordId')User.fi ... opulateUser.fi ... }\n    )User.findOne{ $or:  ... me }] }$or: [{ ... name }][{ emai ... name }]{ email ... email }{ usern ... rname }if (!us ... al' });!userreturn  ... al' });res.sta ... ial' }){ msg:  ... tial' }msg: 'I ... ential'Invalid credentialconst i ... sword);isPassw ... ssword)await b ... ssword)bcrypt. ... ssword)bcrypt.compareuser.pa ... assworduser.passwordIdif (!is ... al' });!isPasswordconst u ... rue });updated ... true })await U ... true })User.fi ... true })User.fi ... dUpdate{ _id: userId }_id: userId{ new: true }if (bod ... d\n    }const p ... dId });passwor ... rdId })await P ... rdId })Passwor ... rdId })Password.findById{ _id:  ... ordId }_id: up ... swordIdupdated ... swordIdpasswor ... ssword;password.passwordpassword.save();res.sta ... ser });res.sta ... User }){ user: ... dUser }user: updatedUserres.status(500).sendres.status(500)await U ... rId });await U ... erId })User.fi ... erId })User.fi ... dRemoveawait T ... rId });Todo.de ... erId })Todo.deleteManymsg: 'User deleted'User deleted/home/insomnia/repos/mongoose/examples/redis-todo/server.js DB// DB 1 minute// 1 minute morgan test// morgan test ROUTERS// ROUTERS Server setup// Server setup'http'rateLimit'express-rate-limit''./db''./services/cache'limiterwindowMs60'morgan''dev''/user''./routers/userRouter''/todo''./routers/todoRouter'httpServerPORTServer up at PORT:const h ... http');http =  ... 'http')require('http')const r ... imit');rateLim ... limit')require ... limit')require('./db');require('./db')./db/dbrequire ... ache');./services/cacheconst l ... 100\n});limiter ...  100\n})rateLim ...  100\n}){\n  win ... : 100\n}windowM ...  * 10001 * 60 * 10001 * 60app.use ... son());app.use ... json())app.useexpress.json()express.jsonapp.use(limiter);app.use(limiter)app.use ... dev'));app.use ... 'dev'))require ... ('dev')require('morgan')app.use ... ter'));app.use ... uter'))/userrequire ... outer')'./rout ... Router'./routers/userRouter/routers/userRouter/todo./routers/todoRouter/routers/todoRouterconst h ... r(app);httpSer ... er(app)http.cr ... er(app)const P ... | 5000;PORT =  ... || 5000process ... || 5000process.env.PORThttpSer ... `);\n});httpSer ... }`);\n})httpServer.listen() => { ... T}`);\n}{\n  con ... T}`);\n}console ... ORT}`);console ... PORT}`)`Server ... {PORT}`/home/insomnia/repos/mongoose/examples/redis-todo/services/cache.js/home/insomnia/repos/mongoose/examples/redis-todo/services setting up redis server// sett ...  server setting up primary user key// sett ... ser key setting up query key// sett ... ery key looking for cache// looking for cache inserting doc to make as actual mongodb query// inse ... b query'redis'QueryhashKeygetQuerymongooseCollectioncacheDatahGet'from redis'hSetdelconst r ... edis');redis = ... redis')require('redis')const c ... ient();client  ... lient()redis.createClient()redis.createClientclient. ... then();client. ... .then()client. ... ().thenclient.connect()client.connectconst e ... e.exec;exec =  ... pe.execmongoos ... pe.execmongoos ... ototypemongoose.Querymongoos ... his;\n};mongoos ... this;\n}mongoos ... e.cachefunctio ... this;\n}{\n  thi ... this;\n}this.us ... = true;this.useCache = truethis.useCachethis.ha ... || '');this.ha ...  || '')this.hashKeyJSON.st ...  || '')options.key || ''options.keyreturn this;mongoos ... ult;\n};mongoos ... sult;\n}async f ... sult;\n}{\n  if  ... sult;\n}if (!th ... ments);!this.useCachereturn  ... ments);exec.ap ... uments)exec.applyconst k ... })\n  );key = J ...  })\n  )JSON.st ...  })\n  )Object. ... name })this.getQuery()this.getQuery{ colle ... .name }collect ... on.namethis.mo ... on.namethis.mo ... lectionconst c ... (err));cacheDa ... g(err))await c ... g(err))client. ... g(err))client. ... ).catchclient. ... y, key)client.hGet(err) = ... og(err)if (cac ... c);\n  }console ... edis');console ... redis')from redisconst d ... eData);doc = J ... heData)JSON.pa ... heData)return  ... l(doc);Array.i ... el(doc)Array.isArray(doc)doc.map ... del(d))doc.mapd => ne ... odel(d)new this.model(d)this.modelnew this.model(doc)const r ... ments);result  ... uments)await e ... uments)client. ... sult));client. ... esult))client.hSetJSON.st ... result)return result;{\n  cle ... ;\n  }\n}clearCa ... ));\n  }(hashKe ... ));\n  }{\n    c ... ));\n  }client. ... hKey));client. ... shKey))client.delJSON.st ... ashKey)/home/insomnia/repos/mongoose/examples/replicasets/package.json/home/insomnia/repos/mongoose/examples/replicasets"replic ... xample"replica-set-example"replica-set-example"deps for replica set example"deps for replica set example"/home/insomnia/repos/mongoose/examples/replicasets/person.js/home/insomnia/repos/mongoose/examples/replicasets/replica-sets.js to connect to a replica set, pass in the comma delimited uri and optionally// to c ... ionally any connection options such as the rs_name.// any  ... s_name. create and delete some data// crea ... me datareplSetrs_name'rs0''mongodb://127.0.0.1:27018/persons,127.0.0.1:27019,127.0.0.1:27020''young people: %s'const o ... 0' }\n};opts =  ... s0' }\n}{\n  rep ... s0' }\n}replSet ... 'rs0' }{ rs_name: 'rs0' }rs_name: 'rs0'rs0'mongod ... :27020'mongodb://127.0.0.1:27018/persons,127.0.0.1:27019,127.0.0.1:270201:27018/persons,1271:27019,1271:27020console ... eople);console ... people)young people: %s/home/insomnia/repos/mongoose/examples/schema/schema.js/home/insomnia/repos/mongoose/examples/schema
 * Module dependencies.
 
 * Schema definition
  recursive embedded-document schema// recu ...  schema
 * Accessing a specific schema type by key
 /**\n *  ... key\n */
 * Pre hook.
 /**\n * Pre hook.\n */ global emailAuthor /* glob ... thor */ some async function// some ... unction
 * Plugins
 /**\n * Plugins\n */
 * Define model.
 /**\n *  ... el.\n */sluglowercasecreatorsparsealive'date'v'now'emailAuthorfindCreatorstaticsfindByTitleexpressiveQuery'creator'gteslugGenerator'title'/[^a-z0-9]/g/-+/gpluginModule dependencies.Schema definitionAccessing a specific schema type by keyPre hook.Define model.const C ... hema();Comment ... chema()new Schema()Comment ... nt]\n});Comment ... ent]\n})Comment.add{\n  tit ... ment]\n}title:  ... rue\n  }index: truedate: Datebody: Stringcomments: [Comment][Comment]const B ... tId\n});BlogPos ... ctId\n})new Sch ... ctId\n}){\n  tit ... ectId\n}slug: { ... rue\n  }lowercase: truetrim: truebuf: Buffercreator ... bjectIdconst P ... ean\n});Person  ... lean\n})new Sch ... lean\n}){\n  nam ... olean\n}name: { ... ing\n  }{\n    f ... ing\n  }first: Stringlast: Stringemail:  ...   }\n  }{\n    t ...   }\n  }index:  ... e\n    }sparse: truealive: BooleanBlogPos ... ;\n  });BlogPos ... v;\n  })BlogPos ... \n  .setBlogPos ... );\n  })BlogPos ... defaultBlogPos ... 'date')BlogPost.pathreturn new Date();functio ...  v;\n  }{\n    r ...  v;\n  }return  ... () : v;v === ' ... e() : vv === 'now'BlogPos ... ();\n});BlogPos ... t();\n})BlogPost.prefunctio ... xt();\n}{\n  /*  ... xt();\n}emailAuthor(done);emailAuthor(done)BlogPos ... ck);\n};BlogPos ... ack);\n}BlogPos ... CreatorBlogPost.methodsfunctio ... ack);\n}{\n  ret ... ack);\n}return  ... lback);this.db ... llback)this.db ... indByIdthis.db ... erson')this.db.modelthis.dbthis.creatorBlogPos ... ByTitleBlogPost.staticsthis.fi ... llback)this.find{ title: title }title: titleBlogPos ... veQuerythis.fi ... te).runthis.fi ... e(date)this.fi ... e').gtethis.fi ... 'date')this.fi ... ).wherethis.fi ... reator){\n  opt ... \n  };\n}options ...  || {};options ... s || {}options || {}const k ... title';key = o ... 'title'options ... 'title'return  ... );\n  };{\n    s ... });\n  }schema. ...     });schema. ... \n    })schema.path(key).setschema.path(key)schema.paththis.sl ... g, '');this.sl ... /g, '')this.slugv.toLow ... /g, '')v.toLow ... replacev.toLowerCase()v.toLowerCase[^a-z0-9]a-z0-9-+return v;BlogPos ... tor());BlogPos ... ator())BlogPost.pluginslugGenerator()mongoos ... gPost);mongoos ... ogPost)mongoos ... erson);mongoos ... Person)/home/insomnia/repos/mongoose/examples/schema/storing-schemas-as-json/index.js/home/insomnia/repos/mongoose/examples/schema/storing-schemas-as-json modules// modules parse json// parse json create a schema// create a schema compile the model// compile the model create a TimeSignature document// crea ... ocument print its description// prin ... ription'./schema.json'timeSignatureSchemaTimeSignature'TimeSignatures'threeFour'3/4'additivecreated'http://en.wikipedia.org/wiki/Time_signature'user_id'518d31a0ef32bbfa853a9814'const r ... json');raw = r ... .json')./schema.json/schemaconst t ... a(raw);timeSig ... ma(raw)Schema(raw)TimeSig ... Schema)TimeSignaturesconst t ... 14'\n});threeFo ... 814'\n})new Tim ... 814'\n}){\n  cou ... 9814'\n}count: 3unit: 4description: '3/4'3/4additive: falsecreated: new Date()links:  ... ature']['http: ... ature']'http:/ ... nature'http://en.wikipedia.org/wiki/Time_signaturehttp://enwikipediaorg/wiki/Time_signatureuser_id ... 3a9814''518d31 ... 3a9814'518d31a0ef32bbfa853a9814console ... eFour);console ... eeFour)/home/insomnia/repos/mongoose/examples/statics/person.js/home/insomnia/repos/mongoose/examples/statics define a static// define a staticfindPersonByName'i'PersonS ... nByNamePersonSchema.statics{\n    t ... b);\n  }this.fi ... }, cb);this.fi ...  }, cb){ name: ...  'i') }name: n ... e, 'i')new Reg ... e, 'i')/home/insomnia/repos/mongoose/examples/statics/statics.js import the schema// import the schema using the static// using the staticrun().c ... error);run().c ... .error)async f ... up();\n}{\n  awa ... up();\n}await m ... sons');await m ... rsons')mongoos ... rsons')const b ... )\n  });bill =  ... ))\n  })await P ... ))\n  })Person. ... ))\n  })const r ... bill');result  ... 'bill')await P ... 'bill')Person. ... 'bill')Person. ... nByNameawait cleanup();await cleanup()async f ... ct();\n}{\n  awa ... ct();\n}await P ... move();await P ... emove()Person.remove()/home/insomnia/repos/mongoose/index.js Re-export for ESM support// Re-e ... support The following properties are not exported using ESM because `setDriver()` can mutate these// The  ... e these module.exports.connection = mongoose.connection;// modu ... ection; module.exports.Collection = mongoose.Collection; module.exports.Connection = mongoose.Connection;'./lib/'castSTATESsetDriverstartSessionpluralizedeleteModelmodelNamesAggregateSchemaTypeVirtualTypeisValidObjectIdisObjectIdOrHexStringsyncIndexesDecimal128MixedMongooseErrorCastErrorSchemaTypeOptionsmongomquerytrustedskipMiddlewareFunctionoverwriteMiddlewareResultconst m ... lib/');mongoos ... /lib/')require('./lib/')./lib//lib/module. ... ngoose;module. ... ongoosemodule. ... defaultmodule. ... e.cast;module. ... se.castmodule.exports.castmongoose.castmodule. ... STATES;module. ... .STATESmongoose.STATESmodule. ... Driver;module. ... tDrivermongoose.setDrivermodule. ... se.set;module. ... ose.setmodule.exports.setmongoose.setmodule. ... se.get;module. ... ose.getmongoose.getmodule. ... ession;module. ... Sessionmongoos ... Sessionmodule. ... ralize;module. ... uralizemongoose.pluralizemodule. ... .model;module. ... e.modelmodule.exports.modelmodule. ... eModel;module. ... teModelmongoose.deleteModelmodule. ... lNames;module. ... elNamesmongoose.modelNamesmodule. ... plugin;module. ... .pluginmongoose.pluginmodule. ... ctions;module. ... ectionsmongoose.connectionsmodule. ... regate;module. ... gregatemongoose.Aggregatemongoose.Mongoosemodule. ... Schema;module. ... .Schemamodule. ... maType;module. ... emaTypemongoose.SchemaTypemodule. ... aTypes;module. ... maTypesmongoose.SchemaTypesmodule. ... alType;module. ... ualTypemongoose.VirtualTypemodule. ... .Types;module. ... e.Typesmodule.exports.Typesmodule. ... .Query;module. ... e.Querymodule.exports.Querymodule. ... .Model;module. ... e.Modelmodule.exports.Modelmongoose.Modelmodule. ... cument;module. ... ocumentmodule. ... jectId;module. ... bjectIdmongoose.ObjectIdmodule. ... xStringisObjec ... xStringmongoos ... xStringmodule. ... ndexes;module. ... Indexesmongoose.syncIndexesmodule. ... mal128;module. ... imal128mongoose.Decimal128module. ... .Mixed;module. ... e.Mixedmodule.exports.Mixedmongoose.Mixedmodule. ... e.Date;module. ... se.Datemodule.exports.Datemongoose.Datemodule. ... .Numbermongoose.Numbermodule. ... .Error;module. ... e.Errormodule.exports.Errormongoose.Errormodule. ... eError;module. ... seErrormongoos ... seErrormodule. ... se.now;module. ... ose.nowmodule.exports.nowmongoose.nowmodule. ... tError;module. ... stErrormongoose.CastErrormongoos ... Optionsmodule. ... .mongo;module. ... e.mongomodule.exports.mongomongoose.mongomodule. ... mquery;module. ... .mquerymongoose.mquerymodule. ... Filter;module. ... eFiltermongoos ... eFiltermodule. ... rusted;module. ... trustedmongoose.trustedskipMid ... unctionmongoos ... unctionmodule. ... eResultoverwri ... eResultmongoos ... eResult/home/insomnia/repos/mongoose/lgtm.ymlpath_classifiers- types- docssrc:queriesexcludeexclude: "*"include: lib- exclude: "*"path_classifiers:/home/insomnia/repos/mongoose/lib/aggregate.js/home/insomnia/repos/mongoose/lib
 * Aggregate constructor used for building aggregation pipelines. Do not
 * instantiate this class directly, use [Model.aggregate()](https://mongoosejs.com/docs/api/model.html#Model.aggregate()) instead.
 *
 * #### Example:
 *
 *     const aggregate = Model.aggregate([
 *       { $project: { a: 1, b: 1 } },
 *       { $skip: 5 }
 *     ]);
 *
 *     Model.
 *       aggregate([{ $match: { age: { $gte: 21 }}}]).
 *       unwind('tags').
 *       exec();
 *
 * #### Note:
 *
 * - The documents returned are plain javascript objects, not mongoose documents (since any shape of document can be returned).
 * - Mongoose does **not** cast pipeline stages. The below will **not** work unless `_id` is a string in the database
 *
 *     new Aggregate([{ $match: { _id: '00000000000000000000000a' } }]);
 *     // Do this instead to cast to an ObjectId
 *     new Aggregate([{ $match: { _id: new mongoose.Types.ObjectId('00000000000000000000000a') } }]);
 *
 * @see MongoDB https://www.mongodb.com/docs/manual/applications/aggregation/
 * @see driver https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#aggregate
 * @param {Array} [pipeline] aggregation pipeline as an array of objects
 * @param {Model|Connection} [modelOrConn] the model or connection to use with this aggregate.
 * @api public
 /**\n *  ... lic\n */
 * Contains options passed down to the [aggregate command](https://www.mongodb.com/docs/manual/reference/command/aggregate/).
 * Supported options are:
 *
 * - [`allowDiskUse`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.allowDiskUse())
 * - `bypassDocumentValidation`
 * - [`collation`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.collation())
 * - `comment`
 * - [`cursor`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.cursor())
 * - [`explain`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.explain())
 * - `fieldsAsRaw`
 * - [`hint`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.hint())
 * - `let`
 * - `maxTimeMS`
 * - `raw`
 * - [`readConcern`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.readConcern())
 * - `readPreference`
 * - [`session`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.session())
 * - `writeConcern`
 *
 * @property options
 * @memberOf Aggregate
 * @api public
 
 * Returns default options for this aggregate.
 *
 * @param {Model} model
 * @api private
 
 * Get/set the model that this aggregation will execute on.
 *
 * #### Example:
 *
 *     const aggregate = MyModel.aggregate([{ $match: { answer: 42 } }]);
 *     aggregate.model() === MyModel; // true
 *
 *     // Change the model. There's rarely any reason to do this.
 *     aggregate.model(SomeOtherModel);
 *     aggregate.model() === SomeOtherModel; // true
 *
 * @param {Model} [model] Set the model associated with this aggregate. If not provided, returns the already stored model.
 * @return {Model}
 * @api public
 
 * Appends new operators to this aggregate pipeline
 *
 * #### Example:
 *
 *     aggregate.append({ $project: { field: 1 }}, { $limit: 2 });
 *
 *     // or pass an array
 *     const pipeline = [{ $match: { daw: 'Logic Audio X' }} ];
 *     aggregate.append(pipeline);
 *
 * @param {...Object|Object[]} ops operator(s) to append. Can either be a spread of objects or a single parameter of a object array.
 * @return {Aggregate}
 * @api public
 
 * Appends a new $addFields operator to this aggregate pipeline.
 * Requires MongoDB v3.4+ to work
 *
 * #### Example:
 *
 *     // adding new fields based on existing fields
 *     aggregate.addFields({
 *         newField: '$b.nested'
 *       , plusTen: { $add: ['$val', 10]}
 *       , sub: {
 *            name: '$a'
 *         }
 *     })
 *
 *     // etc
 *     aggregate.addFields({ salary_k: { $divide: [ "$salary", 1000 ] } });
 *
 * @param {Object} arg field specification
 * @see $addFields https://www.mongodb.com/docs/manual/reference/operator/aggregation/addFields/
 * @return {Aggregate}
 * @api public
 
 * Appends a new $project operator to this aggregate pipeline.
 *
 * Mongoose query [selection syntax](https://mongoosejs.com/docs/api/query.html#Query.prototype.select()) is also supported.
 *
 * #### Example:
 *
 *     // include a, include b, exclude _id
 *     aggregate.project("a b -_id");
 *
 *     // or you may use object notation, useful when
 *     // you have keys already prefixed with a "-"
 *     aggregate.project({a: 1, b: 1, _id: 0});
 *
 *     // reshaping documents
 *     aggregate.project({
 *         newField: '$b.nested'
 *       , plusTen: { $add: ['$val', 10]}
 *       , sub: {
 *            name: '$a'
 *         }
 *     })
 *
 *     // etc
 *     aggregate.project({ salary_k: { $divide: [ "$salary", 1000 ] } });
 *
 * @param {Object|String} arg field specification
 * @see projection https://www.mongodb.com/docs/manual/reference/aggregation/project/
 * @return {Aggregate}
 * @api public
 
 * Appends a new custom $group operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.group({ _id: "$department" });
 *
 * @see $group https://www.mongodb.com/docs/manual/reference/aggregation/group/
 * @method group
 * @memberOf Aggregate
 * @instance
 * @param {Object} arg $group operator contents
 * @return {Aggregate}
 * @api public
 
 * Appends a new custom $match operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.match({ department: { $in: [ "sales", "engineering" ] } });
 *
 * @see $match https://www.mongodb.com/docs/manual/reference/aggregation/match/
 * @method match
 * @memberOf Aggregate
 * @instance
 * @param {Object} arg $match operator contents
 * @return {Aggregate}
 * @api public
 
 * Appends a new $skip operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.skip(10);
 *
 * @see $skip https://www.mongodb.com/docs/manual/reference/aggregation/skip/
 * @method skip
 * @memberOf Aggregate
 * @instance
 * @param {Number} num number of records to skip before next stage
 * @return {Aggregate}
 * @api public
 
 * Appends a new $limit operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.limit(10);
 *
 * @see $limit https://www.mongodb.com/docs/manual/reference/aggregation/limit/
 * @method limit
 * @memberOf Aggregate
 * @instance
 * @param {Number} num maximum number of records to pass to the next stage
 * @return {Aggregate}
 * @api public
 
 * Appends a new $densify operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *      aggregate.densify({
 *        field: 'timestamp',
 *        range: {
 *          step: 1,
 *          unit: 'hour',
 *          bounds: [new Date('2021-05-18T00:00:00.000Z'), new Date('2021-05-18T08:00:00.000Z')]
 *        }
 *      });
 *
 * @see $densify https://www.mongodb.com/docs/manual/reference/operator/aggregation/densify/
 * @method densify
 * @memberOf Aggregate
 * @instance
 * @param {Object} arg $densify operator contents
 * @return {Aggregate}
 * @api public
 
 * Appends a new $fill operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *      aggregate.fill({
 *        output: {
 *          bootsSold: { value: 0 },
 *          sandalsSold: { value: 0 },
 *          sneakersSold: { value: 0 }
 *        }
 *      });
 *
 * @see $fill https://www.mongodb.com/docs/manual/reference/operator/aggregation/fill/
 * @method fill
 * @memberOf Aggregate
 * @instance
 * @param {Object} arg $fill operator contents
 * @return {Aggregate}
 * @api public
 
 * Appends a new $geoNear operator to this aggregate pipeline.
 *
 * #### Note:
 *
 * **MUST** be used as the first operator in the pipeline.
 *
 * #### Example:
 *
 *     aggregate.near({
 *       near: { type: 'Point', coordinates: [40.724, -73.997] },
 *       distanceField: "dist.calculated", // required
 *       maxDistance: 0.008,
 *       query: { type: "public" },
 *       includeLocs: "dist.location",
 *       spherical: true,
 *     });
 *
 * @see $geoNear https://www.mongodb.com/docs/manual/reference/aggregation/geoNear/
 * @method near
 * @memberOf Aggregate
 * @instance
 * @param {Object} arg
 * @param {Object|Array<Number>} arg.near GeoJSON point or coordinates array
 * @return {Aggregate}
 * @api public
 !
 * define methods
 /*!\n *  ... ods\n */
 * Appends new custom $unwind operator(s) to this aggregate pipeline.
 *
 * Note that the `$unwind` operator requires the path name to start with '$'.
 * Mongoose will prepend '$' if the specified field doesn't start '$'.
 *
 * #### Example:
 *
 *     aggregate.unwind("tags");
 *     aggregate.unwind("a", "b", "c");
 *     aggregate.unwind({ path: '$tags', preserveNullAndEmptyArrays: true });
 *
 * @see $unwind https://www.mongodb.com/docs/manual/reference/aggregation/unwind/
 * @param {String|Object|String[]|Object[]} fields the field(s) to unwind, either as field names or as [objects with options](https://www.mongodb.com/docs/manual/reference/operator/aggregation/unwind/#document-operand-with-options). If passing a string, prefixing the field name with '$' is optional. If passing an object, `path` must start with '$'.
 * @return {Aggregate}
 * @api public
 
 * Appends a new $replaceRoot operator to this aggregate pipeline.
 *
 * Note that the `$replaceRoot` operator requires field strings to start with '$'.
 * If you are passing in a string Mongoose will prepend '$' if the specified field doesn't start '$'.
 * If you are passing in an object the strings in your expression will not be altered.
 *
 * #### Example:
 *
 *     aggregate.replaceRoot("user");
 *
 *     aggregate.replaceRoot({ x: { $concat: ['$this', '$that'] } });
 *
 * @see $replaceRoot https://www.mongodb.com/docs/manual/reference/operator/aggregation/replaceRoot
 * @param {String|Object} newRoot the field or document which will become the new root document
 * @return {Aggregate}
 * @api public
 
 * Appends a new $count operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.count("userCount");
 *
 * @see $count https://www.mongodb.com/docs/manual/reference/operator/aggregation/count
 * @param {String} fieldName The name of the output field which has the count as its value. It must be a non-empty string, must not start with $ and must not contain the . character.
 * @return {Aggregate}
 * @api public
 
 * Appends a new $sortByCount operator to this aggregate pipeline. Accepts either a string field name
 * or a pipeline object.
 *
 * Note that the `$sortByCount` operator requires the new root to start with '$'.
 * Mongoose will prepend '$' if the specified field name doesn't start with '$'.
 *
 * #### Example:
 *
 *     aggregate.sortByCount('users');
 *     aggregate.sortByCount({ $mergeObjects: [ "$employee", "$business" ] })
 *
 * @see $sortByCount https://www.mongodb.com/docs/manual/reference/operator/aggregation/sortByCount/
 * @param {Object|String} arg
 * @return {Aggregate} this
 * @api public
 
 * Appends new custom $lookup operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.lookup({ from: 'users', localField: 'userId', foreignField: '_id', as: 'users' });
 *
 * @see $lookup https://www.mongodb.com/docs/manual/reference/operator/aggregation/lookup/#pipe._S_lookup
 * @param {Object} options to $lookup as described in the above link
 * @return {Aggregate}
 * @api public
 
 * Appends new custom $graphLookup operator(s) to this aggregate pipeline, performing a recursive search on a collection.
 *
 * Note that graphLookup can only consume at most 100MB of memory, and does not allow disk use even if `{ allowDiskUse: true }` is specified.
 *
 * #### Example:
 *
 *      // Suppose we have a collection of courses, where a document might look like `{ _id: 0, name: 'Calculus', prerequisite: 'Trigonometry'}` and `{ _id: 0, name: 'Trigonometry', prerequisite: 'Algebra' }`
 *      aggregate.graphLookup({ from: 'courses', startWith: '$prerequisite', connectFromField: 'prerequisite', connectToField: 'name', as: 'prerequisites', maxDepth: 3 }) // this will recursively search the 'courses' collection up to 3 prerequisites
 *
 * @see $graphLookup https://www.mongodb.com/docs/manual/reference/operator/aggregation/graphLookup/#pipe._S_graphLookup
 * @param {Object} options to $graphLookup as described in the above link
 * @return {Aggregate}
 * @api public
 
 * Appends new custom $sample operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.sample(3); // Add a pipeline that picks 3 random documents
 *
 * @see $sample https://www.mongodb.com/docs/manual/reference/operator/aggregation/sample/#pipe._S_sample
 * @param {Number} size number of random documents to pick
 * @return {Aggregate}
 * @api public
 
 * Appends a new $sort operator to this aggregate pipeline.
 *
 * If an object is passed, values allowed are `asc`, `desc`, `ascending`, `descending`, `1`, and `-1`.
 *
 * If a string is passed, it must be a space delimited list of path names. The sort order of each path is ascending unless the path name is prefixed with `-` which will be treated as descending.
 *
 * #### Example:
 *
 *     // these are equivalent
 *     aggregate.sort({ field: 'asc', test: -1 });
 *     aggregate.sort('field -test');
 *
 * @see $sort https://www.mongodb.com/docs/manual/reference/aggregation/sort/
 * @param {Object|String} arg
 * @return {Aggregate} this
 * @api public
  TODO refactor to reuse the query builder logic// TODO ... r logic If sorting by text score, skip coercing into 1/-1// If s ... to 1/-1
 * Appends new $unionWith operator to this aggregate pipeline.
 *
 * #### Example:
 *
 *     aggregate.unionWith({ coll: 'users', pipeline: [ { $match: { _id: 1 } } ] });
 *
 * @see $unionWith https://www.mongodb.com/docs/manual/reference/operator/aggregation/unionWith
 * @param {Object} options to $unionWith query as described in the above link
 * @return {Aggregate}
 * @api public
 
 * Sets the readPreference option for the aggregation query.
 *
 * #### Example:
 *
 *     await Model.aggregate(pipeline).read('primaryPreferred');
 *
 * @param {String|ReadPreference} pref one of the listed preference options or their aliases
 * @param {Array} [tags] optional tags for this query.
 * @return {Aggregate} this
 * @api public
 * @see mongodb https://www.mongodb.com/docs/manual/applications/replication/#read-preference
 
 * Sets the readConcern level for the aggregation query.
 *
 * #### Example:
 *
 *     await Model.aggregate(pipeline).readConcern('majority');
 *
 * @param {String} level one of the listed read concern level or their aliases
 * @see mongodb https://www.mongodb.com/docs/manual/reference/read-concern/
 * @return {Aggregate} this
 * @api public
 
 * Appends a new $redact operator to this aggregate pipeline.
 *
 * If 3 arguments are supplied, Mongoose will wrap them with if-then-else of $cond operator respectively
 * If `thenExpr` or `elseExpr` is string, make sure it starts with $$, like `$$DESCEND`, `$$PRUNE` or `$$KEEP`.
 *
 * #### Example:
 *
 *     await Model.aggregate(pipeline).redact({
 *       $cond: {
 *         if: { $eq: [ '$level', 5 ] },
 *         then: '$$PRUNE',
 *         else: '$$DESCEND'
 *       }
 *     });
 *
 *     // $redact often comes with $cond operator, you can also use the following syntax provided by mongoose
 *     await Model.aggregate(pipeline).redact({ $eq: [ '$level', 5 ] }, '$$PRUNE', '$$DESCEND');
 *
 * @param {Object} expression redact options or conditional expression
 * @param {String|Object} [thenExpr] true case for the condition
 * @param {String|Object} [elseExpr] false case for the condition
 * @return {Aggregate} this
 * @see $redact https://www.mongodb.com/docs/manual/reference/operator/aggregation/redact/
 * @api public
 
 * Execute the aggregation with explain
 *
 * #### Example:
 *
 *     Model.aggregate(..).explain()
 *
 * @param {String} [verbosity]
 * @return {Promise}
 
 * Sets the allowDiskUse option for the aggregation query
 *
 * #### Example:
 *
 *     await Model.aggregate([{ $match: { foo: 'bar' } }]).allowDiskUse(true);
 *
 * @param {Boolean} value Should tell server it can use hard drive to store data during aggregation.
 * @return {Aggregate} this
 * @see mongodb https://www.mongodb.com/docs/manual/reference/command/aggregate/
 /**\n *  ... te/\n */
 * Sets the hint option for the aggregation query
 *
 * #### Example:
 *
 *     Model.aggregate(..).hint({ qty: 1, category: 1 }).exec();
 *
 * @param {Object|String} value a hint object or the index name
 * @return {Aggregate} this
 * @see mongodb https://www.mongodb.com/docs/manual/reference/command/aggregate/
 
 * Sets the session for this aggregation. Useful for [transactions](https://mongoosejs.com/docs/transactions.html).
 *
 * #### Example:
 *
 *     const session = await Model.startSession();
 *     await Model.aggregate(..).session(session);
 *
 * @param {ClientSession} session
 * @return {Aggregate} this
 * @see mongodb https://www.mongodb.com/docs/manual/reference/command/aggregate/
 
 * Lets you set arbitrary options, for middleware or plugins.
 *
 * #### Example:
 *
 *     const agg = Model.aggregate(..).option({ allowDiskUse: true }); // Set the `allowDiskUse` option
 *     agg.options; // `{ allowDiskUse: true }`
 *
 * @param {Object} options keys to merge into current options
 * @param {Number} [options.maxTimeMS] number limits the time this aggregation will run, see [MongoDB docs on `maxTimeMS`](https://www.mongodb.com/docs/manual/reference/operator/meta/maxTimeMS/)
 * @param {Boolean} [options.allowDiskUse] boolean if true, the MongoDB server will use the hard drive to store data during this aggregation
 * @param {Object} [options.collation] object see [`Aggregate.prototype.collation()`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.collation())
 * @param {ClientSession} [options.session] ClientSession see [`Aggregate.prototype.session()`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.session())
 * @see mongodb https://www.mongodb.com/docs/manual/reference/command/aggregate/
 * @return {Aggregate} this
 * @api public
 
 * Sets the `cursor` option and executes this aggregation, returning an aggregation cursor.
 * Cursors are useful if you want to process the results of the aggregation one-at-a-time
 * because the aggregation result is too big to fit into memory.
 *
 * #### Example:
 *
 *     const cursor = Model.aggregate(..).cursor({ batchSize: 1000 });
 *     cursor.eachAsync(function(doc, i) {
 *       // use doc
 *     });
 *
 * @param {Object} options
 * @param {Number} [options.batchSize] set the cursor batch size
 * @param {Boolean} [options.useMongooseAggCursor] use experimental mongoose-specific aggregation cursor (for `eachAsync()` and other query cursor semantics)
 * @return {AggregationCursor} cursor representing this aggregation
 * @api public
 * @see mongodb https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.html
  return this;// return this;
 * Adds a collation
 *
 * #### Example:
 *
 *     const res = await Model.aggregate(pipeline).collation({ locale: 'en_US', strength: 1 });
 *
 * @param {Object} collation options
 * @return {Aggregate} this
 * @api public
 * @see mongodb https://mongodb.github.io/node-mongodb-native/4.9/interfaces/CollationOptions.html
 
 * Combines multiple aggregation pipelines.
 *
 * #### Example:
 *
 *     const res = await Model.aggregate().facet({
 *       books: [{ groupBy: '$author' }],
 *       price: [{ $bucketAuto: { groupBy: '$price', buckets: 2 } }]
 *     });
 *
 *     // Output: { books: [...], price: [{...}, {...}] }
 *
 * @param {Object} facet options
 * @return {Aggregate} this
 * @see $facet https://www.mongodb.com/docs/manual/reference/operator/aggregation/facet/
 * @api public
 
 * Helper for [Atlas Text Search](https://www.mongodb.com/docs/atlas/atlas-search/tutorial/)'s
 * `$search` stage.
 *
 * #### Example:
 *
 *     const res = await Model.aggregate().
 *      search({
 *        text: {
 *          query: 'baseball',
 *          path: 'plot'
 *        }
 *      });
 *
 *     // Output: [{ plot: '...', title: '...' }]
 *
 * @param {Object} $search options
 * @return {Aggregate} this
 * @see $search https://www.mongodb.com/docs/atlas/atlas-search/tutorial/
 * @api public
 
 * Returns the current pipeline
 *
 * #### Example:
 *
 *     MyModel.aggregate().match({ test: 1 }).pipeline(); // [{ $match: { test: 1 } }]
 *
 * @return {Array} The current pipeline similar to the operation that will be executed
 * @api public
 
 * Executes the aggregate pipeline on the currently bound Model.
 *
 * #### Example:
 *     const result = await aggregate.exec();
 *
 * @return {Promise}
 * @api public
 
 * Provides a Promise-like `then` function, which will call `.exec` without a callback
 * Compatible with `await`.
 *
 * #### Example:
 *
 *     Model.aggregate(..).then(successCallback, errorCallback);
 *
 * @param {Function} [resolve] successCallback
 * @param {Function} [reject]  errorCallback
 * @return {Promise}
 
 * Executes the aggregation returning a `Promise` which will be
 * resolved with either the doc(s) or rejected with the error.
 * Like [`.then()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.then), but only takes a rejection handler.
 * Compatible with `await`.
 *
 * @param {Function} [reject]
 * @return {Promise}
 * @api public
 
 * Executes the aggregate returning a `Promise` which will be
 * resolved with `.finally()` chained.
 *
 * More about [Promise `finally()` in JavaScript](https://thecodebarbarian.com/using-promise-finally-in-node-js.html).
 *
 * @param {Function} [onFinally]
 * @return {Promise}
 * @api public
 
 * Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js)
 * You do not need to call this function explicitly, the JavaScript runtime
 * will call it for you.
 *
 * #### Example:
 *
 *     const agg = Model.aggregate([{ $match: { age: { $gte: 25 } } }]);
 *     for await (const doc of agg) {
 *       console.log(doc.name);
 *     }
 *
 * Node.js 10.x supports async iterators natively without any flags. You can
 * enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).
 *
 * **Note:** This function is not set if `Symbol.asyncIterator` is undefined. If
 * `Symbol.asyncIterator` is undefined, that means your Node.js version does not
 * support async iterators.
 *
 * @method [Symbol.asyncIterator]
 * @memberOf Aggregate
 * @instance
 * @api public
 !
 * Helpers
 /*!\n * Helpers\n */
 * Checks whether an object is likely a pipeline operator
 *
 * @param {Object} obj object to check
 * @return {Boolean}
 * @api private
 
 * Adds the appropriate `$match` pipeline step to the top of an aggregate's
 * pipeline, should it's model is a non-root discriminator type. This is
 * analogous to the `prepareDiscriminatorCriteria` function in `lib/query.js`.
 *
 * @param {Aggregate} aggregate Aggregate to prepare
 * @api private
 !
 * Exports
 /*!\n * Exports\n */AggregationCursor'./cursor/aggregationCursor''./error/mongooseError''./query'applyGlobalMaxTimeMSapplyGlobalDiskUse'./helpers/query/applyGlobalOption''./helpers/clone'getConstructorName'./helpers/getConstructorName'prepareDiscriminatorPipeline'./helpers/aggregate/prepareDiscriminatorPipeline'stringifyFunctionOperators'./helpers/aggregate/stringifyFunctionOperators'utilsmodelSymbol'./helpers/symbols'readConcernvalidRedactStringValues'$$DESCEND''$$PRUNE''$$KEEP'pipelinemodelOrConn_pipeline_model_connection_optionsForExecasyncLocalStorage?.transactionAsyncLocalStoragegetStore'session'readPreferenceisOperator'Arguments must be aggregate pipeline operators'addFields'object''Invalid addFields() argument. Must be an object'$addFieldsfieldsfield'string''Invalid project() argument. Must be string or object'near'Aggregate `near()` must be called with non-nullish argument''Aggregate `near()` argument must have a `near` property''number'Aggregate \`near()\` argument has invalid coordinates, got "op$geoNear'group match skip limit out densify fill'$operator'$'unwind'Invalid arg "''" to unwind(), ''must be string or object'replaceRootnewRootret$replaceRootfieldName$countsortByCount$sortByCount'" to sortByCount(), '$lookupgraphLookupcloneOptions'Invalid graphLookup() argument. Must be an object.'mergeClone$graphLookupsample$sample'Object'desc'desc''descending'$metaascend'Invalid sort() argument. Must be a string or object.'$sortunionWith$unionWithprefredactthenExprelseExpr'If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP'$cond'Invalid arguments'$redactexplainverbosity'Aggregate.prototype.explain() no longer accepts a callback''Aggregate has empty pipeline'hooksexecPre'aggregate'_optsexecPostallowDiskUseoptionfacet$facet$search'Aggregate not bound to any Model''Aggregate.prototype.exec() no longer accepts a callback'finallyonFinallyasyncIteratoruseMongooseAggCursortransformNull_transformForAsyncIterator_prepareDiscriminatorPipelineAggregate constructor used for building aggregation pipelines. Do not
instantiate this class directly, use [Model.aggregate()](https://mongoosejs.com/docs/api/model.html#Model.aggregate()) instead.

#### Example:

const aggregate = Model.aggregate([
{ $project: { a: 1, b: 1 } },
{ $skip: 5 }
]);

Model.
aggregate([{ $match: { age: { $gte: 21 }}}]).
unwind('tags').
exec();

#### Note:

- The documents returned are plain javascript objects, not mongoose documents (since any shape of document can be returned).
- Mongoose does **not** cast pipeline stages. The below will **not** work unless `_id` is a string in the database

new Aggregate([{ $match: { _id: '00000000000000000000000a' } }]);
// Do this instead to cast to an ObjectId
new Aggregate([{ $match: { _id: new mongoose.Types.ObjectId('00000000000000000000000a') } }]);MongoDB https://www.mongodb.com/docs/manual/applications/aggregation/
driver https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#aggregate
aggregation pipeline as an array of objects
Array=the model or connection to use with this aggregate.
(Model|Connection)=(Model|Connection)Connection@apipublicContains options passed down to the [aggregate command](https://www.mongodb.com/docs/manual/reference/command/aggregate/).
Supported options are:

- [`allowDiskUse`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.allowDiskUse())
- `bypassDocumentValidation`
- [`collation`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.collation())
- `comment`
- [`cursor`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.cursor())
- [`explain`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.explain())
- `fieldsAsRaw`
- [`hint`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.hint())
- `let`
- `maxTimeMS`
- `raw`
- [`readConcern`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.readConcern())
- `readPreference`
- [`session`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.session())
- `writeConcern`@memberOfAggregate
Returns default options for this aggregate.Get/set the model that this aggregation will execute on.

#### Example:

const aggregate = MyModel.aggregate([{ $match: { answer: 42 } }]);
aggregate.model() === MyModel; // true

// Change the model. There's rarely any reason to do this.
aggregate.model(SomeOtherModel);
aggregate.model() === SomeOtherModel; // trueSet the model associated with this aggregate. If not provided, returns the already stored model.
Model=Appends new operators to this aggregate pipeline

#### Example:

aggregate.append({ $project: { field: 1 }}, { $limit: 2 });

// or pass an array
const pipeline = [{ $match: { daw: 'Logic Audio X' }} ];
aggregate.append(pipeline);operator(s) to append. Can either be a spread of objects or a single parameter of a object array.
ops...(Object|Array.<Object>)(Object|Array.<Object>)Appends a new $addFields operator to this aggregate pipeline.
Requires MongoDB v3.4+ to work

#### Example:

// adding new fields based on existing fields
aggregate.addFields({
newField: '$b.nested'
, plusTen: { $add: ['$val', 10]}
, sub: {
name: '$a'
}
})

// etc
aggregate.addFields({ salary_k: { $divide: [ "$salary", 1000 ] } });field specification
$addFields https://www.mongodb.com/docs/manual/reference/operator/aggregation/addFields/
Appends a new $project operator to this aggregate pipeline.

Mongoose query [selection syntax](https://mongoosejs.com/docs/api/query.html#Query.prototype.select()) is also supported.

#### Example:

// include a, include b, exclude _id
aggregate.project("a b -_id");

// or you may use object notation, useful when
// you have keys already prefixed with a "-"
aggregate.project({a: 1, b: 1, _id: 0});

// reshaping documents
aggregate.project({
newField: '$b.nested'
, plusTen: { $add: ['$val', 10]}
, sub: {
name: '$a'
}
})

// etc
aggregate.project({ salary_k: { $divide: [ "$salary", 1000 ] } });(Object|String)projection https://www.mongodb.com/docs/manual/reference/aggregation/project/
Appends a new custom $group operator to this aggregate pipeline.

#### Example:

aggregate.group({ _id: "$department" });$group https://www.mongodb.com/docs/manual/reference/aggregation/group/
@method@instance$group operator contents
Appends a new custom $match operator to this aggregate pipeline.

#### Example:

aggregate.match({ department: { $in: [ "sales", "engineering" ] } });$match https://www.mongodb.com/docs/manual/reference/aggregation/match/
$match operator contents
Appends a new $skip operator to this aggregate pipeline.

#### Example:

aggregate.skip(10);$skip https://www.mongodb.com/docs/manual/reference/aggregation/skip/
skipnumber of records to skip before next stage
Appends a new $limit operator to this aggregate pipeline.

#### Example:

aggregate.limit(10);$limit https://www.mongodb.com/docs/manual/reference/aggregation/limit/
maximum number of records to pass to the next stage
Appends a new $densify operator to this aggregate pipeline.

#### Example:

aggregate.densify({
field: 'timestamp',
range: {
step: 1,
unit: 'hour',
bounds: [new Date('2021-05-18T00:00:00.000Z'), new Date('2021-05-18T08:00:00.000Z')]
}
});$densify https://www.mongodb.com/docs/manual/reference/operator/aggregation/densify/
densify$densify operator contents
Appends a new $fill operator to this aggregate pipeline.

#### Example:

aggregate.fill({
output: {
bootsSold: { value: 0 },
sandalsSold: { value: 0 },
sneakersSold: { value: 0 }
}
});$fill https://www.mongodb.com/docs/manual/reference/operator/aggregation/fill/
$fill operator contents
Appends a new $geoNear operator to this aggregate pipeline.

#### Note:

**MUST** be used as the first operator in the pipeline.

#### Example:

aggregate.near({
near: { type: 'Point', coordinates: [40.724, -73.997] },
distanceField: "dist.calculated", // required
maxDistance: 0.008,
query: { type: "public" },
includeLocs: "dist.location",
spherical: true,
});$geoNear https://www.mongodb.com/docs/manual/reference/aggregation/geoNear/
GeoJSON point or coordinates array
arg.near(Object|Array.<Number>)Array.<Number>Appends new custom $unwind operator(s) to this aggregate pipeline.

Note that the `$unwind` operator requires the path name to start with '$'.
Mongoose will prepend '$' if the specified field doesn't start '$'.

#### Example:

aggregate.unwind("tags");
aggregate.unwind("a", "b", "c");
aggregate.unwind({ path: '$tags', preserveNullAndEmptyArrays: true });$unwind https://www.mongodb.com/docs/manual/reference/aggregation/unwind/
the field(s) to unwind, either as field names or as [objects with options](https://www.mongodb.com/docs/manual/reference/operator/aggregation/unwind/#document-operand-with-options). If passing a string, prefixing the field name with '$' is optional. If passing an object, `path` must start with '$'.
(String|Object|Array.<String>|Array.<Object>)Appends a new $replaceRoot operator to this aggregate pipeline.

Note that the `$replaceRoot` operator requires field strings to start with '$'.
If you are passing in a string Mongoose will prepend '$' if the specified field doesn't start '$'.
If you are passing in an object the strings in your expression will not be altered.

#### Example:

aggregate.replaceRoot("user");

aggregate.replaceRoot({ x: { $concat: ['$this', '$that'] } });$replaceRoot https://www.mongodb.com/docs/manual/reference/operator/aggregation/replaceRoot
the field or document which will become the new root document
(String|Object)Appends a new $count operator to this aggregate pipeline.

#### Example:

aggregate.count("userCount");$count https://www.mongodb.com/docs/manual/reference/operator/aggregation/count
The name of the output field which has the count as its value. It must be a non-empty string, must not start with $ and must not contain the . character.
Appends a new $sortByCount operator to this aggregate pipeline. Accepts either a string field name
or a pipeline object.

Note that the `$sortByCount` operator requires the new root to start with '$'.
Mongoose will prepend '$' if the specified field name doesn't start with '$'.

#### Example:

aggregate.sortByCount('users');
aggregate.sortByCount({ $mergeObjects: [ "$employee", "$business" ] })$sortByCount https://www.mongodb.com/docs/manual/reference/operator/aggregation/sortByCount/
this
Appends new custom $lookup operator to this aggregate pipeline.

#### Example:

aggregate.lookup({ from: 'users', localField: 'userId', foreignField: '_id', as: 'users' });$lookup https://www.mongodb.com/docs/manual/reference/operator/aggregation/lookup/#pipe._S_lookup
to $lookup as described in the above link
Appends new custom $graphLookup operator(s) to this aggregate pipeline, performing a recursive search on a collection.

Note that graphLookup can only consume at most 100MB of memory, and does not allow disk use even if `{ allowDiskUse: true }` is specified.

#### Example:

// Suppose we have a collection of courses, where a document might look like `{ _id: 0, name: 'Calculus', prerequisite: 'Trigonometry'}` and `{ _id: 0, name: 'Trigonometry', prerequisite: 'Algebra' }`
aggregate.graphLookup({ from: 'courses', startWith: '$prerequisite', connectFromField: 'prerequisite', connectToField: 'name', as: 'prerequisites', maxDepth: 3 }) // this will recursively search the 'courses' collection up to 3 prerequisites$graphLookup https://www.mongodb.com/docs/manual/reference/operator/aggregation/graphLookup/#pipe._S_graphLookup
to $graphLookup as described in the above link
Appends new custom $sample operator to this aggregate pipeline.

#### Example:

aggregate.sample(3); // Add a pipeline that picks 3 random documents$sample https://www.mongodb.com/docs/manual/reference/operator/aggregation/sample/#pipe._S_sample
number of random documents to pick
Appends a new $sort operator to this aggregate pipeline.

If an object is passed, values allowed are `asc`, `desc`, `ascending`, `descending`, `1`, and `-1`.

If a string is passed, it must be a space delimited list of path names. The sort order of each path is ascending unless the path name is prefixed with `-` which will be treated as descending.

#### Example:

// these are equivalent
aggregate.sort({ field: 'asc', test: -1 });
aggregate.sort('field -test');$sort https://www.mongodb.com/docs/manual/reference/aggregation/sort/
Appends new $unionWith operator to this aggregate pipeline.

#### Example:

aggregate.unionWith({ coll: 'users', pipeline: [ { $match: { _id: 1 } } ] });$unionWith https://www.mongodb.com/docs/manual/reference/operator/aggregation/unionWith
to $unionWith query as described in the above link
Sets the readPreference option for the aggregation query.

#### Example:

await Model.aggregate(pipeline).read('primaryPreferred');one of the listed preference options or their aliases
(String|ReadPreference)ReadPreferenceoptional tags for this query.
public
mongodb https://www.mongodb.com/docs/manual/applications/replication/#read-preferenceSets the readConcern level for the aggregation query.

#### Example:

await Model.aggregate(pipeline).readConcern('majority');one of the listed read concern level or their aliases
mongodb https://www.mongodb.com/docs/manual/reference/read-concern/
Appends a new $redact operator to this aggregate pipeline.

If 3 arguments are supplied, Mongoose will wrap them with if-then-else of $cond operator respectively
If `thenExpr` or `elseExpr` is string, make sure it starts with $$, like `$$DESCEND`, `$$PRUNE` or `$$KEEP`.

#### Example:

await Model.aggregate(pipeline).redact({
$cond: {
if: { $eq: [ '$level', 5 ] },
then: '$$PRUNE',
else: '$$DESCEND'
}
});

// $redact often comes with $cond operator, you can also use the following syntax provided by mongoose
await Model.aggregate(pipeline).redact({ $eq: [ '$level', 5 ] }, '$$PRUNE', '$$DESCEND');redact options or conditional expression
true case for the condition
(String|Object)=false case for the condition
$redact https://www.mongodb.com/docs/manual/reference/operator/aggregation/redact/
Execute the aggregation with explain

#### Example:

Model.aggregate(..).explain()String=Sets the allowDiskUse option for the aggregation query

#### Example:

await Model.aggregate([{ $match: { foo: 'bar' } }]).allowDiskUse(true);Should tell server it can use hard drive to store data during aggregation.
mongodb https://www.mongodb.com/docs/manual/reference/command/aggregate/Sets the hint option for the aggregation query

#### Example:

Model.aggregate(..).hint({ qty: 1, category: 1 }).exec();a hint object or the index name
Sets the session for this aggregation. Useful for [transactions](https://mongoosejs.com/docs/transactions.html).

#### Example:

const session = await Model.startSession();
await Model.aggregate(..).session(session);ClientSessionLets you set arbitrary options, for middleware or plugins.

#### Example:

const agg = Model.aggregate(..).option({ allowDiskUse: true }); // Set the `allowDiskUse` option
agg.options; // `{ allowDiskUse: true }`keys to merge into current options
number limits the time this aggregation will run, see [MongoDB docs on `maxTimeMS`](https://www.mongodb.com/docs/manual/reference/operator/meta/maxTimeMS/)
options.maxTimeMSNumber=boolean if true, the MongoDB server will use the hard drive to store data during this aggregation
options.allowDiskUseBoolean=object see [`Aggregate.prototype.collation()`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.collation())
options.collationClientSession see [`Aggregate.prototype.session()`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.session())
options.sessionClientSession=mongodb https://www.mongodb.com/docs/manual/reference/command/aggregate/
Sets the `cursor` option and executes this aggregation, returning an aggregation cursor.
Cursors are useful if you want to process the results of the aggregation one-at-a-time
because the aggregation result is too big to fit into memory.

#### Example:

const cursor = Model.aggregate(..).cursor({ batchSize: 1000 });
cursor.eachAsync(function(doc, i) {
// use doc
});set the cursor batch size
options.batchSizeuse experimental mongoose-specific aggregation cursor (for `eachAsync()` and other query cursor semantics)
options.useMongooseAggCursorcursor representing this aggregation
mongodb https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.htmlAdds a collation

#### Example:

const res = await Model.aggregate(pipeline).collation({ locale: 'en_US', strength: 1 });options
mongodb https://mongodb.github.io/node-mongodb-native/4.9/interfaces/CollationOptions.htmlCombines multiple aggregation pipelines.

#### Example:

const res = await Model.aggregate().facet({
books: [{ groupBy: '$author' }],
price: [{ $bucketAuto: { groupBy: '$price', buckets: 2 } }]
});

// Output: { books: [...], price: [{...}, {...}] }$facet https://www.mongodb.com/docs/manual/reference/operator/aggregation/facet/
Helper for [Atlas Text Search](https://www.mongodb.com/docs/atlas/atlas-search/tutorial/)'s
`$search` stage.

#### Example:

const res = await Model.aggregate().
search({
text: {
query: 'baseball',
path: 'plot'
}
});

// Output: [{ plot: '...', title: '...' }]$search https://www.mongodb.com/docs/atlas/atlas-search/tutorial/
Returns the current pipeline

#### Example:

MyModel.aggregate().match({ test: 1 }).pipeline(); // [{ $match: { test: 1 } }]The current pipeline similar to the operation that will be executed
Executes the aggregate pipeline on the currently bound Model.

#### Example:
const result = await aggregate.exec();Provides a Promise-like `then` function, which will call `.exec` without a callback
Compatible with `await`.

#### Example:

Model.aggregate(..).then(successCallback, errorCallback);successCallback
errorCallback
Executes the aggregation returning a `Promise` which will be
resolved with either the doc(s) or rejected with the error.
Like [`.then()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.then), but only takes a rejection handler.
Compatible with `await`.Executes the aggregate returning a `Promise` which will be
resolved with `.finally()` chained.

More about [Promise `finally()` in JavaScript](https://thecodebarbarian.com/using-promise-finally-in-node-js.html).Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js)
You do not need to call this function explicitly, the JavaScript runtime
will call it for you.

#### Example:

const agg = Model.aggregate([{ $match: { age: { $gte: 25 } } }]);
for await (const doc of agg) {
console.log(doc.name);
}

Node.js 10.x supports async iterators natively without any flags. You can
enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).

**Note:** This function is not set if `Symbol.asyncIterator` is undefined. If
`Symbol.asyncIterator` is undefined, that means your Node.js version does not
support async iterators.Unknown content '[Symbol.asyncIterator]
 *'Unknown ... or]\n *'Checks whether an object is likely a pipeline operatorobject to check
Adds the appropriate `$match` pipeline step to the top of an aggregate's
pipeline, should it's model is a non-root discriminator type. This is
analogous to the `prepareDiscriminatorCriteria` function in `lib/query.js`.Aggregate to prepare
const A ... rsor');Aggrega ... ursor')require ... ursor')'./curs ... Cursor'./cursor/aggregationCursor/cursor/aggregationCursorconst M ... rror');Mongoos ... Error')require ... Error')'./erro ... eError'./error/mongooseError/error/mongooseErrorconst Q ... uery');Query = ... query')require('./query')./query/queryconst { ... tion');{ apply ... ption'){ apply ... skUse }require ... ption')'./help ... Option'./helpers/query/applyGlobalOption/helpers/query/applyGlobalOptionconst c ... lone');clone = ... clone')require ... clone')./helpers/clone/helpers/cloneconst g ... Name');getCons ... rName')require ... rName')'./help ... orName'./helpers/getConstructorName/helpers/getConstructorNameconst p ... line');prepare ... eline')prepare ... ipelinerequire ... eline')'./help ... peline'./helpers/aggregate/prepareDiscriminatorPipeline/helpers/aggregate/prepareDiscriminatorPipelineconst s ... tors');stringi ... ators')stringi ... eratorsrequire ... ators')'./help ... rators'./helpers/aggregate/stringifyFunctionOperators/helpers/aggregate/stringifyFunctionOperatorsconst u ... tils');utils = ... utils')const { ... bols');{ model ... mbols'){ modelSymbol }require ... mbols')./helpers/symbols/helpers/symbolsconst r ... e.read;read =  ... pe.readQuery.prototype.readQuery.prototypeconst r ... oncern;readCon ... ConcernQuery.p ... Concernconst v ... EEP']);validRe ... KEEP'])validRe ... gValuesnew Set ... KEEP'])['$$DES ... $KEEP']$$DESCENDDESCEND$$PRUNEPRUNE$$KEEP{\n  thi ... ;\n  }\n}this._pipeline = [];this._pipeline = []this._pipelineif (mod ... nn;\n  }modelOr ... Symbol]modelOrConn == null{\n    t ... nn;\n  }this._m ... OrConn;this._m ... lOrConnthis._modelthis._c ... OrConn;this._c ... lOrConnthis._connectionthis.options = {};this.options = {}this.optionsif (arg ... e);\n  }argumen ... peline)argumen ... h === 1arguments.lengthArray.i ... peline)this.ap ... eline);this.ap ... peline)this.append.applythis.appendAggrega ... ptions;Aggrega ... optionsAggregate.prototypeAggrega ... ons;\n};Aggrega ... ions;\n}Aggrega ... ForExecfunctio ... ions;\n}{\n  con ... ions;\n}const o ...  || {};this.options || {}const a ... tore();asyncLo ... Store()this.mo ... Store()this.mo ... etStorethis.mo ... Storagethis.mo ... b?.basethis.model()?.dbthis.model()transac ... Storageif (!op ... on;\n  }!option ... != null!option ... ssion')options ... ssion')options ... ropertyasyncLo ... != nullasyncLo ... session{\n    o ... on;\n  }options ... ession;options ... sessionreturn options;Aggrega ... del;\n};Aggrega ... odel;\n}Aggrega ... e.modelfunctio ... odel;\n}{\n  if  ... odel;\n}if (arg ... el;\n  }argumen ... h === 0{\n    r ... el;\n  }return this._model;this._model = model;this._model = modelif (mod ...   }\n  }model.schema != nullmodel.schemathis.op ... != nullthis.op ... == nullthis.op ... ferencemodel.s ... != nullmodel.s ... ns.readmodel.schema.optionsthis.op ... s.read;this.op ... ns.readthis.op ... llationmodel.s ... llationthis.op ... lation;return model;Aggrega ... his;\n};Aggrega ... this;\n}Aggrega ... .append{\n  con ... this;\n}const a ... ments];args =  ... uments](argume ... uments](argume ... ts[0]))argumen ... nts[0])Array.i ... nts[0])arguments[0][...arguments]...argumentsif (!ar ... ');\n  }!args.e ... erator)args.ev ... erator)args.every{\n    t ... ');\n  }throw n ... tors');new Err ... ators')'Argume ... rators'Arguments must be aggregate pipeline operatorsthis._p ... (args);this._p ... t(args)this._p ... .concatAggrega ...  });\n};Aggrega ... ) });\n}Aggrega ... dFieldsfunctio ... ) });\n}{\n  if  ... ) });\n}if (typ ... ');\n  }typeof  ... ay(arg)typeof  ... == nulltypeof  ... object'typeof argarg === nullArray.isArray(arg)throw n ... ject');new Err ... bject')'Invali ... object'Invalid addFields() argument. Must be an objectInvalid addFields argument Must be an objectreturn  ... rg) });this.ap ... arg) }){ $addF ...  arg) }$addFie ... }, arg)Object. ... }, arg)Aggrega ... s });\n}Aggrega ... projectfunctio ... s });\n}{\n  con ... s });\n}const fields = {};fields = {}!Array.isArray(arg){\n    O ... });\n  }Object.keys(arg)fields[ ... field];fields[ ... [field]fields[field]arg[field]if (arg ... ');\n  }argumen ... string'typeof  ... string'arg.spl ...     });arg.spl ... \n    })arg.spl ... forEacharg.split(/\s+/)arg.splitif (!fi ...       }!fieldconst i ...  0 : 1;include ... ? 0 : 1field[0 ... ? 0 : 1field[0] === '-'field[0]if (inc ...       }include === 0field = ... ing(1);field = ... ring(1)field.substring(1)field.substringfields[ ... nclude;fields[ ... includeInvalid project() argument. Must be string or objectInvalid project Must be string or objectreturn  ... lds });this.ap ... elds }){ $project: fields }$project: fieldsAggrega ... op);\n};Aggrega ... (op);\n}Aggrega ... pe.nearfunctio ... (op);\n}{\n  if  ... (op);\n}arg == nullthrow n ... ment');new Mon ... ument')'Aggreg ... gument'Aggregate `near()` must be called with non-nullish argumentAggregate `near` must be called with non-nullish argumentarg.near == nullthrow n ... erty');new Mon ... perty')'Aggreg ... operty'Aggregate `near()` argument must have a `near` property` argument must have a `near` propertyconst c ... inates;coordin ... dinatesArray.i ... dinatesArray.i ... g.near)arg.near.coordinatesif (typ ... `);\n  }typeof  ... mber'))typeof arg.near(!Array ... mber'))!Array. ... umber')!Array. ... gth < 2!Array. ... inates)Array.i ... inates)coordin ... gth < 2coordinates.lengthcoordin ... umber')coordinates.findc => ty ... number'typeof  ... number'typeof c{\n    t ... `);\n  }throw n ... es}"`);new Mon ... tes}"`)`Aggreg ... ates}"`Aggrega ... , got "Aggregate `near()` argument has invalid coordinates, got "const op = {};op = {}op.$geoNear = arg;op.$geoNear = argop.$geoNearreturn  ... nd(op);this.append(op)'group  ...  };\n});'group  ...   };\n})'group  ... forEach'group  ... it(' ')'group  ... '.split'group  ... y fill'group match skip limit out densify fill{\n  Agg ... \n  };\n}Aggrega ... );\n  };Aggrega ... p);\n  }Aggrega ... erator]{\n    c ... p);\n  }op['$'  ...  = arg;op['$'  ... ] = argop['$' + $operator]'$' + $operatorAggrega ... es);\n};Aggrega ... res);\n}Aggrega ... .unwindfunctio ... res);\n}{\n  con ... res);\n}const res = [];res = []const argif (arg ... ;\n    }arg &&  ... object'res.pus ... arg });res.pus ...  arg })res.push{ $unwind: arg }$unwind: argif (typ ... ;\n    }res.pus ...     });res.pus ...      })$unwind ... ' + arg(arg[0] ... ' + arg(arg[0] === '$')arg[0] === '$'arg[0]'$' + arg'Invali ... nd(), ''Invali ... ' + argInvalid arg "" to unwind(), 'must b ... object'must be string or objectreturn  ... , res);this.ap ... s, res)Aggrega ...   });\n}Aggrega ... aceRootlet ret;if (typ ... ot;\n  }typeof newRoot{\n    r ... ot;\n  }ret = n ... ewRoot;ret = n ... newRootnewRoot ... newRootnewRoot ... th('$')newRoot.startsWith'$' + newRootret = newRoot;ret = newRootreturn  ... }\n  });this.ap ...  }\n  }){\n    $ ...   }\n  }$replac ... t\n    }{\n      ... t\n    }newRoot: retAggrega ... e });\n}Aggrega ... e.countfunctio ... e });\n}{\n  ret ... e });\n}return  ... ame });this.ap ... Name }){ $coun ... dName }$count: fieldNameAggrega ... \n  }\n};Aggrega ... ;\n  }\n}Aggrega ... ByCountreturn  ... arg });this.ap ...  arg }){ $sort ... : arg }$sortByCount: argthis.ap ... \n    }){\n      ... g\n    }$sortBy ... ' + argnew Typ ... bject')'Invali ... nt(), ''" to s ... nt(), '" to sortByCount(), Aggrega ... .lookup{\n  ret ... s });\n}return  ... ons });this.ap ... ions }){ $lookup: options }$lookup: optionsAggrega ... hLookupconst c ... s = {};cloneOptions = {}if (opt ...  }\n\n  }{\n    i ...  }\n\n  }if (!ut ... ;\n    }!utils. ... ptions)utils.i ... ptions)utils.isObjectthrow n ... ect.');new Typ ... ject.')'Invali ... bject.'Invalid graphLookup() argument. Must be an object.Invalid graphLookuputils.m ... tions);utils.m ... ptions)utils.mergeCloneconst s ... rtWith;startWi ... artWithcloneOp ... artWithif (sta ... ;\n    }startWi ... string'typeof startWithcloneOp ... rtWith;cloneOp ... th('$')cloneOp ... rtsWith'$' + c ... artWith{ $grap ... tions }$graphL ... OptionsAggrega ... } });\n}Aggrega ... .samplefunctio ... } });\n}{\n  ret ... } });\n}return  ... e } });this.ap ... ze } }){ $samp ... ize } }$sample ...  size }{ size: size }size: sizeAggrega ... t });\n}Aggrega ... pe.sortfunctio ... t });\n}{\n  //  ... t });\n}const sort = {};sort = {}if (get ... ');\n  }getCons ... Object'getCons ... me(arg)const d ... ', -1];desc =  ... g', -1]['desc' ... g', -1]descendingif (arg ...       }arg[fie ... ].$metaarg[fie ...  Objectarg[field].$metasort[fi ... field];sort[fi ... [field]sort[field]sort[fi ... 1 : -1;sort[fi ...  1 : -1desc.in ...  1 : -1desc.in ...  === -1desc.in ... field])desc.indexOfconst a ... -1 : 1;ascend  ...  -1 : 1field[0 ...  -1 : 1if (asc ...       }ascend === -1sort[fi ... ascend;sort[field] = ascendInvalid sort() argument. Must be a string or object.Invalid sort Must be a string or objectreturn  ... ort });this.ap ... sort }){ $sort: sort }$sort: sortAggrega ... ionWith{ $unio ... tions }$unionWith: optionsAggrega ... pe.read{\n  rea ... this;\n}read.ca ...  tags);read.ca ... , tags)read.callAggrega ... ConcernreadCon ... level);readCon ...  level)readConcern.callAggrega ... n });\n}Aggrega ... .redactfunctio ... n });\n}{\n  if  ... n });\n}argumen ... h === 3{\n    i ...  };\n  }if ((ty ... ;\n    }(typeof ... eExpr))(typeof ... nExpr))typeof  ... enExpr)typeof thenExpr!validR ... enExpr)validRe ... enExpr)validRe ... ues.hastypeof  ... seExpr)typeof elseExpr!validR ... seExpr)validRe ... seExpr)throw n ... KEEP');new Err ... $KEEP')'If the ... $$KEEP'If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEPIf thenExpr or elseExpr is string, it must be either DESCEND, PRUNE or express ... \n    };express ... }\n    }$cond:  ...       }if: expressionthen: thenExprelse: elseExprargumen ... h !== 1throw n ... ents');new Typ ... ments')Invalid argumentsreturn  ... ion });this.ap ... sion }){ $reda ... ssion }$redact: expressionAggrega ... ult;\n};Aggrega ... sult;\n}Aggrega ... explaintypeof  ... nction'typeof verbositytypeof arguments[1]arguments[1]throw n ... back');new Mon ... lback')'Aggreg ... llback'Aggregate.prototype.explain() no longer accepts a callback no longer accepts a callbackconst m ... _model;model = this._modelif (!th ... ');\n  }!this._ ... .lengththis._p ... .lengththrow n ... line');new Err ... eline')'Aggreg ... peline'Aggregate has empty pipelineprepare ... chema);prepare ... schema)this._model.schemaawait n ... ;\n  });await n ... );\n  })new Pro ... );\n  })(resolv ... });\n  }{\n    m ... });\n  }model.h ...     });model.h ... \n    })model.hooks.execPremodel.hookserror = ... }\n    }const _ ... rror };_opts = ... error }{ error: error }error: errormodel.h ...      })model.hooks.execPost[null]error = ...       }reject(error);reject(error)resolve();resolve()const c ... tions);cursor  ... ptions)model.c ... ptions)model.c ... gregatemodel.collectionif (ver ... ue;\n  }verbosity == null{\n    v ... ue;\n  }verbosity = true;verbosity = truelet result = null;result = null{\n    r ... y);\n  }result  ... osity);result  ... bosity)await c ... bosity)cursor. ... bosity)cursor.explainawait n ...     });await n ... \n    })new Pro ... \n    })(resolv ... ;\n    }return  ... error);return resolve();const _ ... null };_opts = ...  null }{ error: null }error: null[result]error = ... ;\n    }Aggrega ... DiskUsethis.op ...  value;this.op ... = valuethis.op ... DiskUseAggrega ... pe.hintthis.options.hintAggrega ... session{\n  if  ... this;\n}if (ses ... on;\n  }session == null{\n    d ... on;\n  }delete  ... ession;delete  ... sessionthis.options.session{\n    t ... on;\n  }this.op ... ession;this.op ... sessionAggrega ... .option{\n  for ... this;\n}for (co ... y];\n  }const key{\n    t ... y];\n  }this.op ... e[key];this.op ... ue[key]this.options[key]value[key]Aggrega ... .cursorthis._o ... Exec();this._o ... rExec()this._optionsForExecthis.op ...  || {};this.op ... s || {}this.options.cursorreturn  ... (this);new Agg ... r(this)Aggrega ... llationAggrega ... e.facet{ $facet: options }$facet: optionsAggrega ... .search{ $search: options }$search: optionsAggrega ... ine;\n};Aggrega ... line;\n}Aggrega ... ipelinefunctio ... line;\n}{\n  ret ... line;\n}return  ... peline;Aggrega ... pe.exec!this._ ... nection!this._model!this._connectionthrow n ... odel');new Err ... Model')'Aggreg ...  Model'Aggregate not bound to any Modeltypeof arguments[0]Aggregate.prototype.exec() no longer accepts a callbackif (thi ... ();\n  }if (!th ... ;\n    }new Mon ... eline')await t ... ptions)this._c ... ptions)this._c ... gregatethis._c ... nt.db()this._c ... ient.dbthis._c ... .clientreturn  ... rray();await c ... Array()cursor.toArray()cursor.toArrayconst c ... ection;collect ... lectionthis._m ... lectionapplyGl ... tions);applyGl ... ptions)model.db.optionsmodel.dbmodel.base.optionsmodel.baseif (thi ... s);\n  }this.op ... .cursor{\n    r ... s);\n  }stringi ... eline);stringi ... peline)const o ... || {});options ...  || {})clone(t ...  || {})let result;await c ... ptions)collect ... ptions)collection.aggregateresult  ... rray();result  ... Array()(error) ...       }Aggrega ... ct);\n};Aggrega ... ect);\n}Aggrega ... pe.then{\n  ret ... ect);\n}return  ... eject);this.ex ... reject)this.exec().thenthis.exec()this.execAggrega ... e.catchAggrega ... ly);\n};Aggrega ... lly);\n}Aggrega ... finallyfunctio ... lly);\n}{\n  ret ... lly);\n}return  ... nally);this.ex ... inally)this.exec().finallyif (Sym ... \n  };\n}Symbol. ... != nullSymbol.asyncIteratorAggrega ... ();\n  }return  ... ator();this.cu ... rator()this.cu ... teratorthis.cu ... mNull()this.cu ... ormNullthis.cu ... true })this.cursor{ useMo ...  true }useMong ... r: true_transf ... teratorfunctio ...  '$';\n}{\n  if  ...  '$';\n}if (typ ... se;\n  }typeof objobj === null{\n    r ... se;\n  }return false;const k ... s(obj);k = Object.keys(obj)Object.keys(obj)return  ... == '$';k.lengt ... === '$'k.length === 1k.lengthk[0][0] === '$'k[0][0]k[0]Aggrega ... peline;_prepar ... ipeline/home/insomnia/repos/mongoose/lib/browser.js eslint-env browser /* esli ... wser */
 * The [MongooseError](https://mongoosejs.com/docs/api/error.html#Error()) constructor.
 *
 * @method Error
 * @api public
 
 * The Mongoose [Schema](https://mongoosejs.com/docs/api/schema.html#Schema()) constructor
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     const Schema = mongoose.Schema;
 *     const CatSchema = new Schema(..);
 *
 * @method Schema
 * @api public
 
 * The various Mongoose Types.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     const array = mongoose.Types.Array;
 *
 * #### Types:
 *
 * - [Array](https://mongoosejs.com/docs/schematypes.html#arrays)
 * - [Buffer](https://mongoosejs.com/docs/schematypes.html#buffers)
 * - [Embedded](https://mongoosejs.com/docs/schematypes.html#schemas)
 * - [DocumentArray](https://mongoosejs.com/docs/api/documentarraypath.html)
 * - [Decimal128](https://mongoosejs.com/docs/api/decimal128.html#Decimal128())
 * - [ObjectId](https://mongoosejs.com/docs/schematypes.html#objectids)
 * - [Map](https://mongoosejs.com/docs/schematypes.html#maps)
 * - [Subdocument](https://mongoosejs.com/docs/schematypes.html#schemas)
 *
 * Using this exposed access to the `ObjectId` type, we can construct ids on demand.
 *
 *     const ObjectId = mongoose.Types.ObjectId;
 *     const id1 = new ObjectId;
 *
 * @property Types
 * @api public
 
 * The Mongoose [VirtualType](https://mongoosejs.com/docs/api/virtualtype.html#VirtualType()) constructor
 *
 * @method VirtualType
 * @api public
 
 * The various Mongoose SchemaTypes.
 *
 * #### Note:
 *
 * _Alias of mongoose.Schema.Types for backwards compatibility._
 *
 * @property SchemaTypes
 * @see Schema.SchemaTypes https://mongoosejs.com/docs/api/schema.html#Schema.Types
 * @api public
 
 * The constructor used for schematype options
 *
 * @method SchemaTypeOptions
 * @api public
 
 * Internal utils
 *
 * @property utils
 * @api private
 
 * The Mongoose browser [Document](/api/document.html) constructor.
 *
 * @method Document
 * @api public
 
 * Return a new browser model. In the browser, a model is just
 * a simplified document with a schema - it does **not** have
 * functions like `findOne()`, etc.
 *
 * @method model
 * @api public
 * @param {String} name
 * @param {Schema} schema
 * @return Class
 !
 * Module exports.
 /*!\n *  ... ts.\n */'./driver''./drivers/browser'DocumentProvider'./documentProvider.js'setBrowser'./error/index''./schema''./types''./virtualType''./schemaType.js''./options/schemaTypeOptions''./utils.js'superThe [MongooseError](https://mongoosejs.com/docs/api/error.html#Error()) constructor.The Mongoose [Schema](https://mongoosejs.com/docs/api/schema.html#Schema()) constructor

#### Example:

const mongoose = require('mongoose');
const Schema = mongoose.Schema;
const CatSchema = new Schema(..);The various Mongoose Types.

#### Example:

const mongoose = require('mongoose');
const array = mongoose.Types.Array;

#### Types:

- [Array](https://mongoosejs.com/docs/schematypes.html#arrays)
- [Buffer](https://mongoosejs.com/docs/schematypes.html#buffers)
- [Embedded](https://mongoosejs.com/docs/schematypes.html#schemas)
- [DocumentArray](https://mongoosejs.com/docs/api/documentarraypath.html)
- [Decimal128](https://mongoosejs.com/docs/api/decimal128.html#Decimal128())
- [ObjectId](https://mongoosejs.com/docs/schematypes.html#objectids)
- [Map](https://mongoosejs.com/docs/schematypes.html#maps)
- [Subdocument](https://mongoosejs.com/docs/schematypes.html#schemas)

Using this exposed access to the `ObjectId` type, we can construct ids on demand.

const ObjectId = mongoose.Types.ObjectId;
const id1 = new ObjectId;The Mongoose [VirtualType](https://mongoosejs.com/docs/api/virtualtype.html#VirtualType()) constructorThe various Mongoose SchemaTypes.

#### Note:

_Alias of mongoose.Schema.Types for backwards compatibility._Schema.SchemaTypes https://mongoosejs.com/docs/api/schema.html#Schema.Types
The constructor used for schematype optionsInternal utilsThe Mongoose browser [Document](/api/document.html) constructor.Return a new browser model. In the browser, a model is just
a simplified document with a schema - it does **not** have
functions like `findOne()`, etc.require ... ser'));require ... wser'))require ... r').setrequire('./driver')./driver/driver./drivers/browser/drivers/browserconst D ... r.js');Documen ... er.js')require ... er.js')'./docu ... der.js'./documentProvider.js/documentProviderDocumen ... (true);Documen ... r(true)Documen ... Browserexports ... ndex');exports ... index')exports.Errorrequire ... index')./error/index/error/indexexports ... hema');exports ... chema')exports.Schemarequire('./schema')./schemaexports ... ypes');exports ... types')exports.Typesrequire('./types')./types/typesexports ... Type');exports ... lType')exports.VirtualTyperequire ... lType')./virtualType/virtualTypeexports ... e.js');exports ... pe.js')exports.SchemaTyperequire ... pe.js')./schemaType.js/schemaTypeexports ... ions');exports ... tions')exports ... Optionsrequire ... tions')'./opti ... ptions'./options/schemaTypeOptions/options/schemaTypeOptionsexports ... s.js');exports ... ls.js')exports.utilsrequire ... ls.js')./utils.jsexports ... ider();exports ... vider()exports.DocumentDocumentProvider()exports ... del;\n};exports ... odel;\n}exports.model{\n  cla ... odel;\n}class M ...   }\n  }constru ... ;\n    }(obj, f ... ;\n    }super(o ... ields);super(o ... fields)Model.m ... = name;Model.m ...  = nameModel.modelNamereturn Model;if (typ ... ffer;\n}typeof  ... efined'typeof window{\n  win ... ffer;\n}window. ... xports;window. ... exportswindow.mongoosewindow. ... Buffer;window. ...  Bufferwindow.Buffer/home/insomnia/repos/mongoose/lib/browserDocument.js!
 * Module dependencies.
 /*!\n *  ... es.\n */
 * Document constructor.
 *
 * @param {Object} obj the values to set
 * @param {Object} schema
 * @param {Object} [fields] optional object containing the fields which were selected in the query returning this document and any populated paths data
 * @param {Boolean} [skipId] bool, should we auto create an ObjectId _id
 * @inherits NodeJS EventEmitter https://nodejs.org/api/events.html#class-eventemitter
 * @event `init`: Emitted on a document after it has was retrieved from the db and fully hydrated by Mongoose.
 * @event `save`: Emitted when the document is successfully saved
 * @api private
  When creating EmbeddedDocument, it already has the schema and he doesn't need the _id// When ... the _id Generate ObjectId if it is missing, but it requires a scheme// Gene ...  scheme apply methods// apply methods apply statics// apply statics!
 * Inherit from the NodeJS document
 /*!\n *  ... ent\n */!
 * ignore
 /*!\n * ignore\n */!
 * Browser doc exposes the event emitter API
 /*!\n *  ... API\n */NodeJSDocument'./document''events''./types/objectid'ValidationErrorapplyHooks'./helpers/model/applyHooks''./helpers/isObject'skipIdskipInitinstanceOfSchemaMissingSchemaError$__setSchemadecorateDoc$emitter'on''once''emit''listeners''removeListener''setMaxListeners''removeAllListeners''addListener'emitterFnDocument constructor.the values to set
optional object containing the fields which were selected in the query returning this document and any populated paths data
bool, should we auto create an ObjectId _id
@inheritsNodeJS EventEmitter https://nodejs.org/api/events.html#class-eventemitter
@event`init`: Emitted on a document after it has was retrieved from the db and fully hydrated by Mongoose.
`save`: Emitted when the document is successfully saved
const N ... ment');NodeJSD ... ument')require ... ument')./document/documentconst E ... mitter;EventEm ... Emitterrequire ... Emitterrequire('events')const M ... ndex');Mongoos ... index')const S ... hema');Schema  ... chema')const O ... ctid');ObjectI ... ectid')require ... ectid')./types/objectid/types/objectidconst V ... nError;Validat ... onErrorMongoos ... onErrorconst a ... ooks');applyHo ... Hooks')require ... Hooks')'./help ... yHooks'./helpers/model/applyHooks/helpers/model/applyHooksconst i ... ject');isObjec ... bject')require ... bject')./helpers/isObject/helpers/isObjectif (!(t ... t);\n  }!(this  ... cument)(this i ... cument)this in ... ocument{\n    r ... t);\n  }return  ... pInit);new Doc ... ipInit)if (isO ... a);\n  }isObjec ... fSchemaisObject(schema)!schema ... fSchemaschema. ... fSchema{\n    s ... a);\n  }schema  ... chema);schema  ... schema)new Schema(schema)schema  ... schema;schema  ...  schemathis.sc ...  schemathis.schemaif (!th ...   }\n  }!this.s ... ons._id!this.schemaschema.options._idschema.options{\n    o ...   }\n  }obj = obj || {};obj = obj || {}obj || {}if (obj ... ;\n    }obj._id ... definedobj._idobj._id ... ctId();obj._id ... ectId()if (!sc ... ();\n  }!schemathrow n ... rror();new Mon ... Error()Mongoos ... maErrorthis.$_ ... chema);this.$_ ... schema)this.$__setSchemaNodeJSD ... pInit);NodeJSD ... ipInit)NodeJSDocument.callapplyHo ... rue });applyHo ... true }){ decor ...  true }decorateDoc: truefor (co ... m];\n  }schema.methodsconst m{\n    t ... m];\n  }this[m] ... ods[m];this[m] ... hods[m]this[m]schema.methods[m]for (co ... s];\n  }schema.staticsconst s{\n    t ... s];\n  }this[s] ... ics[s];this[s] ... tics[s]this[s]schema.statics[s]Documen ... otype);Documen ... totype)Object. ... totype)NodeJSD ... ototypeDocumen ... tructorDocumen ... tter();Documen ... itter()Document.eventsnew EventEmitter()Document.$emitter['on',  ...  };\n});['on',  ...   };\n})['on',  ... forEach['on',  ... tener']{\n  Doc ... \n  };\n}Documen ... );\n  };Documen ... s);\n  }Document[emitterFn]functio ... s);\n  }Documen ... uments)Documen ... ].applyDocumen ... tterFn]Documen ... nError;Documen ... onErrorexports = Document/home/insomnia/repos/mongoose/lib/cast/bigint.js/home/insomnia/repos/mongoose/lib/cast
 * Given a value, cast it to a BigInt, or throw an `Error` if the value
 * cannot be casted. `null` and `undefined` are considered valid.
 *
 * @param {Any} value
 * @return {Number}
 * @throws {Error} if `value` is not one of the allowed values
 * @api private
 Long'bson'MAX_BIGINT9223372036854775807nMIN_BIGINT9223372036854775808nERROR_MESSAGEMongoose only supports BigInts between  and  because MongoDB does not support arbitrary precision integerscastBigInt'bigint'toBigIntBigIntCannot convert value to BigInt: "Given a value, cast it to a BigInt, or throw an `Error` if the value
cannot be casted. `null` and `undefined` are considered valid.Anyif `value` is not one of the allowed values
const { ... bson');{ Long  ... 'bson'){ Long }require('bson')bsonconst M ... 75807n;MAX_BIG ... 775807n9223372036854775807const M ... 75808n;MIN_BIG ... 775808n-922337 ... 775808nconst E ... egers`;ERROR_M ... tegers``Mongoo ... tegers`Mongoos ... etween  becaus ... ntegersmodule. ... "`);\n};module. ... }"`);\n}functio ... }"`);\n}{\n  if  ... }"`);\n}if (val ... al;\n  }val == null{\n    r ... al;\n  }return val;if (val ... ll;\n  }val === ''{\n    r ... ll;\n  }if (typ ... al;\n  }typeof  ... bigint'typeof valbigint{\n    i ... al;\n  }if (val ... ;\n    }val > M ... _BIGINTval > MAX_BIGINTval < MIN_BIGINTthrow n ... SSAGE);new Err ... ESSAGE)if (val ... ();\n  }val instanceof Longreturn  ... gInt();val.toBigInt()val.toBigInt{\n    v ... al;\n  }val = BigInt(val);val = BigInt(val)BigInt(val)throw n ... al}"`);new Err ... val}"`)`Cannot ... {val}"`Cannot  ... gInt: "/home/insomnia/repos/mongoose/lib/cast/boolean.js
 * Given a value, cast it to a boolean, or throw a `CastError` if the value
 * cannot be casted. `null` and `undefined` are considered valid.
 *
 * @param {Any} value
 * @param {String} [path] optional the path to set on the CastError
 * @return {Boolean|null|undefined}
 * @throws {CastError} if `value` is not one of the allowed values
 * @api private
 '../error/cast'castBooleanconvertToTrueconvertToFalse'boolean''true''1''yes''false''0''no'Given a value, cast it to a boolean, or throw a `CastError` if the value
cannot be casted. `null` and `undefined` are considered valid.optional the path to set on the CastError
(Boolean|null|undefined)const C ... cast');CastErr ... /cast')require ... /cast')../error/cast/error/castmodule. ... th);\n};module. ... ath);\n}functio ... ath);\n}{\n  if  ... ath);\n}if (mod ... ue;\n  }module. ... (value)module. ... rue.hasmodule. ... tToTrue{\n    r ... ue;\n  }return true;if (mod ... se;\n  }module. ... lse.hasmodule. ... ToFalseif (val ... ue;\n  }value == nullreturn value;throw n ...  path);new Cas ... , path)module. ... yes']);module. ... 'yes'])new Set ... 'yes'])[true,  ...  'yes']yesmodule. ... 'no']);module. ...  'no'])new Set ...  'no'])[false, ... , 'no']no/home/insomnia/repos/mongoose/lib/cast/date.js Support empty string because of empty form values. Originally introduced// Supp ... roduced in https://github.com/Automattic/mongoose/commit/efc72a1898fc3c33a319d915b8c5463a22938dfe// in h ... 2938dfe string representation of milliseconds take this path// stri ... is path support for moment.js. This is also the path strings will take because// supp ... because strings have a `valueOf()`// stri ... ueOf()` fallback// fallbackcastDate>=275761271820module. ... se);\n};module. ... lse);\n}functio ... lse);\n}{\n  //  ... lse);\n}value = ...  === ''value === ''value i ... of Date{\n    a ... ue;\n  }assert. ... Of()));assert. ... eOf()))assert.ok!isNaN( ... ueOf())isNaN(v ... ueOf())value.valueOf()value.valueOflet date;assert. ... lean');assert. ... olean')typeof  ... oolean'typeof valueif (val ... e);\n  }value i ... number'value i ...  Number{\n    d ... e);\n  }date =  ... value);date =  ... (value)new Date(value)if (typ ... e);\n  }typeof  ... 271820)typeof  ... value))!isNaN( ... value))isNaN(Number(value))Number(value)(Number ... 271820)Number( ... -271820Number( ...  275761-271820{\n    / ... ));\n  }date =  ... alue));date =  ... value))new Dat ... value))typeof value.valueOfdate =  ... eOf());date =  ... ueOf())new Dat ... ueOf()){\n    / ... e);\n  }if (!is ... te;\n  }isNaN(d ... ueOf())date.valueOf()date.valueOf{\n    r ... te;\n  }return date;assert.ok(false);assert.ok(false)/home/insomnia/repos/mongoose/lib/cast/decimal128.jsDecimal128Type'../types/decimal128'castDecimal128$numberDecimalfromStringconst D ... l128');Decimal ... al128')require ... al128')'../typ ... mal128'../types/decimal128/types/decimal128{\n  if  ... lse);\n}if (typ ... l);\n  }typeof  ... Decimalvalue.$numberDecimal{\n    r ... l);\n  }return  ... cimal);Decimal ... ecimal)Decimal ... mStringvalue i ... 128Type{\n    r ... e);\n  }return  ... value);Decimal ... (value)typeof  ... (value)typeof BufferBuffer. ... (value)new Dec ... (value)typeof  ... t8Arraytypeof Uint8Arrayvalue i ... t8Arrayif (typ ... ));\n  }{\n    r ... ));\n  }return  ... alue));Decimal ... value))String(value)typeof  ... lueOf()return  ... eOf());Decimal ... ueOf())/home/insomnia/repos/mongoose/lib/cast/double.js
 * Given a value, cast it to a IEEE 754-2008 floating point, or throw an `Error` if the value
 * cannot be casted. `null`, `undefined`, and `NaN` are considered valid inputs.
 *
 * @param {Any} value
 * @return {Number}
 * @throws {Error} if `value` does not represent a IEEE 754-2008 floating point. If casting from a string, see [BSON Double.fromString API documentation](https://mongodb.github.io/node-mongodb-native/Next/classes/BSON.Double.html#fromString)
 * @api private
  ex: { a: 'im an object, valueOf: () => 'helloworld' } // throw an error// ex:  ... n errorBSONisBsonType'../helpers/isBsonType'castDoublecoercedVal'Long'toNumberDoubletempValGiven a value, cast it to a IEEE 754-2008 floating point, or throw an `Error` if the value
cannot be casted. `null`, `undefined`, and `NaN` are considered valid inputs.if `value` does not represent a IEEE 754-2008 floating point. If casting from a string, see [BSON Double.fromString API documentation](https://mongodb.github.io/node-mongodb-native/Next/classes/BSON.Double.html#fromString)
const B ... bson');BSON =  ... 'bson')const i ... Type');isBsonT ... nType')require ... nType')'../hel ... onType'../helpers/isBsonType/helpers/isBsonTypemodule. ... al);\n};module. ... Val);\n}functio ... Val);\n}{\n  if  ... Val);\n}val ==  ...  === ''let coercedVal;if (isB ... l);\n  }isBsonT ... 'Long')coerced ... mber();coerced ... umber()val.toNumber()val.toNumbertry {\n  ... ;\n    }coerced ... g(val);coerced ... ng(val)BSON.Do ... ng(val)BSON.Do ... mStringBSON.Doublereturn coercedVal;catch { ... ;\n    }const t ... ring();tempVal ... tring()val.val ... tring()val.valueOf()val.valueOfval.toString()val.toStringtypeof tempValtry {\n  ...       }catch { ...       }coerced ... mpVal);coerced ... empVal)Number(tempVal){\n    c ... l);\n  }coerced ... r(val);coerced ... er(val)Number(val)return  ... edVal);new BSO ... cedVal)/home/insomnia/repos/mongoose/lib/cast/int32.js
 * Given a value, cast it to a Int32, or throw an `Error` if the value
 * cannot be casted. `null` and `undefined` are considered valid.
 *
 * @param {Any} value
 * @return {Number}
 * @throws {Error} if `value` does not represent an integer, or is outside the bounds of an 32-bit integer.
 * @api private
 castInt32INT32_MAX0x7FFFFFFFINT32_MIN0x80000000<=Given a value, cast it to a Int32, or throw an `Error` if the value
cannot be casted. `null` and `undefined` are considered valid.if `value` does not represent an integer, or is outside the bounds of an 32-bit integer.
const c ... r(val);isBsonT ... er(val)const I ... FFFFFF;INT32_M ... FFFFFFF2147483647const I ... 000000;INT32_M ... 0000000-0x800000002147483648if (coe ... al;\n  }coerced ... T32_MAXcoerced ... T32_MINcoerced ... al | 0)(coercedVal | 0)coercedVal | 0/home/insomnia/repos/mongoose/lib/cast/number.js
 * Given a value, cast it to a number, or throw an `Error` if the value
 * cannot be casted. `null` and `undefined` are considered valid.
 *
 * @param {Any} value
 * @return {Number}
 * @throws {Error} if `value` is not one of the allowed values
 * @api private
 castNumberGiven a value, cast it to a number, or throw an `Error` if the value
cannot be casted. `null` and `undefined` are considered valid.{\n    v ... l);\n  }val = Number(val);val = Number(val)assert. ... (val));assert. ... N(val))!isNaN(val)isNaN(val)val ins ...  Numberreturn  ... ueOf();if (!Ar ... ));\n  }!Array. ... nction'!Array.isArray(val)Array.isArray(val)typeof val.valueOfNumber( ... ueOf())if (val ... l);\n  }val.toS ... er(val)val.toS ... ay(val)return Number(val);/home/insomnia/repos/mongoose/lib/cast/objectid.js'../types/objectid'castObjectId../types/objectidmodule. ... ue);\n};module. ... lue);\n}{\n  if  ... lue);\n}if (isB ... ue;\n  }isBsonT ... ectId')if (val ...   }\n  }value._idif (isB ... ;\n    }return value._id;value._ ... unctionvalue._id.toStringreturn  ... ing());new Obj ... ring())value._id.toString()if (val ... ));\n  }value.t ... unctionvalue.toStringvalue.toString()new ObjectId(value)/home/insomnia/repos/mongoose/lib/cast/string.js
 * Given a value, cast it to a string, or throw a `CastError` if the value
 * cannot be casted. `null` and `undefined` are considered valid.
 *
 * @param {Any} value
 * @param {String} [path] optional the path to set on the CastError
 * @return {string|null|undefined}
 * @throws {CastError}
 * @api private
  If null or undefined// If n ... defined handle documents being passed// hand ...  passed Re: gh-647 and gh-3030, we're ok with casting using `toString()`// Re:  ... ring()` **unless** its the default Object.toString, because "[object Object]"// **un ... bject]" doesn't really qualify as useful data// does ... ul datacastStringGiven a value, cast it to a string, or throw a `CastError` if the value
cannot be casted. `null` and `undefined` are considered valid.(string|null|undefined){\n  //  ... ath);\n}if (val ... id;\n  }value._ ... string'typeof value._id{\n    r ... id;\n  }value.t ... (value)value.t ... oString!Array. ... (value)Array.isArray(value)return  ... ring();/home/insomnia/repos/mongoose/lib/cast/uuid.js
 * Helper function to convert the input hex-string to a buffer
 * @param {String} hex The hex string to convert
 * @returns {Buffer} The hex as buffer
 * @api private
  use buffer built-in function to convert from hex-string to buffer// use  ...  buffer
 * Convert a String to Binary
 * @param {String} uuidStr The value to process
 * @returns {MongooseBuffer} The binary to store
 * @api private
  Protect against undefined & throwing err// Prot ... ing err remove extra characters// remo ... ractersMongooseBuffer'../types/buffer'UUID_FORMAT/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/iBinarycastUUIDnewBufferinitbuffbuff_subtypestringToBinary" is not a valid UUID string" cannot be casted to a UUIDhex2bufferhex'hex'uuidStr/[{}-]/gbytesHelper function to convert the input hex-string to a bufferThe hex string to convert
The hex as buffer
Convert a String to BinaryThe value to process
The binary to store
const M ... ffer');Mongoos ... uffer')require ... uffer')../types/buffer/types/bufferconst U ... {12}/i;UUID_FO ... ]{12}/i/[0-9a- ... ]{12}/i[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}[0-9a-f]{8}[0-9a-f]a-f[0-9a-f]{4}[0-9][0-9a-f]{3}[89ab][0-9a-f]{12}const B ... Binary;Binary  ... .BinaryMongoos ... .Binarymodule. ... D`);\n};module. ... ID`);\n}functio ... ID`);\n}{\n  if  ... ID`);\n}functio ... ff;\n  }{\n    c ... ff;\n  }const b ... tbuff);buff =  ... itbuff)new Mon ... itbuff)buff._subtype = 4;buff._subtype = 4buff._subtypereturn buff;if (typ ...   }\n  }if (UUI ... ;\n    }UUID_FO ... (value)UUID_FORMAT.teststringT ... (value)throw n ... ring`);new Err ... tring`)`"${val ... string`" is no ...  stringif (Buf ... e);\n  }newBuffer(value)value i ...  Binaryreturn  ... true));newBuff ... (true))value.value(true)value.valueUUID_FO ... ring())stringT ... ring())throw n ... UUID`);new Err ...  UUID`)`"${val ... a UUID`" canno ...  a UUIDmodule. ... FORMAT;module. ... _FORMATfunctio ... buff;\n}{\n  //  ... buff;\n}const b ... 'hex');buff =  ...  'hex')hex !=  ...  'hex')hex != nullBuffer. ...  'hex')if (typ ... r = '';typeof uuidStruuidStr = '';uuidStr = ''const h ... g, '');hex = u ... /g, '')uuidStr ... /g, '')uuidStr.replace[{}-]const b ... r(hex);bytes = ... er(hex)hex2buffer(hex)const b ... bytes);buff =  ... (bytes)new Mon ... (bytes)/home/insomnia/repos/mongoose/lib/cast.js
 * Handles internal casting for query filters.
 *
 * @param {Schema} schema
 * @param {Object} obj Object to cast
 * @param {Object} [options] the query options
 * @param {Boolean|"throw"} [options.strict] Wheter to enable all strict options
 * @param {Boolean|"throw"} [options.strictQuery] Enable strict Queries
 * @param {Boolean} [options.sanitizeFilter] avoid adding implict query selectors ($in)
 * @param {Boolean} [options.upsert]
 * @param {Query} [context] passed to setters
 * @api private
  delete empty: {$or: []} -> {}// dele ... } -> {} no casting for Mixed types// no c ... d types Check for embedded discriminator paths// Chec ... r paths gh-6027: if we haven't found the schematype but this path is// gh-6 ... path is underneath an embedded discriminator and the embedded discriminator// unde ... minator key is in the query, use the embedded discriminator schema// key  ...  schema Handle potential embedded array queries// Hand ... queries Find the part of the var path that is a path of the Schema// Find ...  Schema If a substring of the input path resolves to an actual real path...// If a ... path... Apply the casting; similar code for $elemMatch in schema/array.js// Appl ... rray.js handle geo schemas that use object notation// hand ... otation { loc: { long: Number, lat: Number }// { lo ... umber } geojson; cast the coordinates// geoj ... dinates'./error/cast'StrictModeError'./error/strict''./schema/index'cast$expr'./helpers/query/cast$expr''./cast/string'castTextSearch'./schema/operators/text''./helpers/get'getSchemaDiscriminatorByValue'./helpers/discriminator/getSchemaDiscriminatorByValue''./helpers/query/isOperator'isMongooseObject'./helpers/isMongooseObject'ALLOWED_GEOWITHIN_GEOJSON_TYPES'Polygon''MultiPolygon''Query filter must be an object, got an array 'discriminatorsdiscriminatorKey_keysany$conditionalsschematypewhile--'$or''$nor''$and'beforeCastKeysLengthdiscriminatorValuediscriminatorSchema'$where''Must have a string or function for $where''$expr''$elemMatch''$text''$comment'pathFirstHalfpathLastHalf_schematypediscriminatorVal$inremainingCondscastergeo'$near''$nearSphere'$within'$within'$geoIntersects'$geoIntersects'$geoWithin'$geoWithin'numbertype'__QueryCasting__'$maxDistancecastForQuery$minDistancewithinType$center$centerSphere$box$polygon'Bad $within parameter: '$geometrygeoWithinType'Invalid geoJSON type for $geoWithin "''", must be "Polygon" or "MultiPolygon"'_cast'strict'strictQuerygetStrictQuery_userProvidedOptionsupsert'throw''Path "''" is not in ''schema, strict mode is `true`, and upsert is `true`.''schema and strictQuery is \'throw\'.'isPOJOks$isMongooseArray$not'$not''Buffer'castedvaluesArray_valnearKeysnearLennkeyqueryOptionsschemaUserProvidedOptionsschemaOptions'strictQuery'mongooseOptionsconnHandles internal casting for query filters.Object to cast
the query options
Wheter to enable all strict options
options.strictEnable strict Queries
options.strictQueryavoid adding implict query selectors ($in)
options.sanitizeFilteroptions.upsertpassed to setters
Query=./error/castconst S ... rict');StrictM ... trict')require ... trict')./error/strict/error/strictconst T ... ndex');Types = ... index')./schema/index/schema/indexconst c ... expr');cast$ex ... $expr')require ... $expr')'./help ... t$expr'./helpers/query/cast$expr/helpers/query/castconst c ... ring');castStr ... tring')require ... tring')./cast/string/cast/stringconst c ... text');castTex ... /text')require ... /text')'./sche ... s/text'./schema/operators/text/schema/operators/textconst g ... /get');get = r ... s/get')require ... s/get')./helpers/get/helpers/getconst g ... alue');getSche ... Value')getSche ... ByValuerequire ... Value')'./help ... yValue'./helpers/discriminator/getSchemaDiscriminatorByValue/helpers/discriminator/getSchemaDiscriminatorByValueconst i ... ator');isOpera ... rator')require ... rator')'./help ... erator'./helpers/query/isOperator/helpers/query/isOperatorconst u ... util');util =  ... 'util')isMongo ... bject')'./help ... Object'./helpers/isMongooseObject/helpers/isMongooseObjectconst A ... ygon'];ALLOWED ... lygon']ALLOWED ... N_TYPES['Polyg ... lygon']PolygonMultiPolygonmodule. ... obj;\n};module. ...  obj;\n}functio ...  obj;\n}{\n  if  ...  obj;\n}if (Arr ... ));\n  }Array.isArray(obj)throw n ... (obj));new Err ... t(obj))'Query  ... array 'Query filter must be an object, got an array util.inspect(obj)if (obj ... bj;\n  }obj == null{\n    r ... bj;\n  }return obj;if (sch ... ma;\n  }schema  ... != nullschema != nullschema. ... != nullschema. ... inatorsobj[sch ... != nullobj[sch ... torKey]schema. ... atorKey{\n    s ... ma;\n  }getSche ...  schemagetSche ... orKey])const p ... s(obj);paths = ... ys(obj)let i = ... length;i = paths.lengthpaths.lengthlet _keys;let any ... ionals;let schematype;let nested;let path;let type;let val;while ( ...   }\n  }i--{\n    p ...   }\n  }path = paths[i];path = paths[i]paths[i]val = obj[path];val = obj[path]obj[path]if (pat ... }\n    }path == ...  '$and'path == ...  '$nor'path === '$or'path === '$nor'$norpath === '$and'k >= 0k--let k = ... gth - 1k = val.length - 1val.length - 1val.lengthif (val ...       }val[k]  ... object'val[k] == nullval[k]typeof val[k]throw n ... ' + k);new Cas ... .' + k)path + '.' + kpath + '.'const b ... length;beforeC ... .lengthObject.keys(val[k])const d ... orKey];discrim ... torKey]val[k][ ... torKey]if (dis ...       }discrim ... == nullval[k]  ... ntext);val[k]  ... ontext)cast(sc ... ontext)const d ... Value);discrim ... rValue)getSche ... rValue)context.schemacast(di ... ontext)discrim ...  schemaif (Obj ...       }Object. ... h !== 0Object. ... h === 0beforeC ... h !== 0val.splice(k, 1);val.splice(k, 1)val.spliceval.length === 0delete obj[path];delete obj[path]path === '$where'$wheretype = typeof val;type = typeof valtype != ... nction'type !== 'string'type !== 'function'throw n ... here');new Err ... where')'Must h ... $where'Must have a string or function for $whereMust have a string or function for type === 'function'obj[pat ... ring();obj[pat ... tring()path === '$expr'$exprval = c ... chema);val = c ... schema)cast$ex ... schema)path == ... mMatch'val = c ... ntext);val = c ... ontext)path === '$text'$textval = c ...  path);val = c ... , path)castTex ... , path)path == ... mment')path === '$comment'$comment!schema ... mment')schema. ... mment')schema. ... ropertyschema.pathscastStr ... , path)obj[path] = val;obj[path] = valif (!sc ...       }schemat ... (path);schemat ... h(path)schema.path(path)!schematypeconst s ... t('.');split = ... it('.')path.split('.')path.splitlet j = ... length;j = split.lengthsplit.lengthwhile ( ...       }j--const p ... n('.');pathFir ... in('.')split.s ... in('.')split.s ... j).joinsplit.slice(0, j)split.slicepathLas ... in('.')split.slice(j).joinsplit.slice(j)const _ ... tHalf);_schema ... stHalf)schema. ... stHalf)const d ... torKey;discrim ... atorKey_schema ... atorKey_schema ... options_schema ... .schema_schematype.schemaif (_sc ...       }_schema ... != null_schematype != null(_schem ... != null(_schem ... nators)_schema ... inatorsdiscrim ... != nullpathLas ... atorKeyconst d ... orKey);discrim ... torKey)get(obj ... torKey)pathFir ... atorKeypathFirstHalf + '.'const d ... nators;discrim ... inatorstypeof  ... != nulltypeof  ... atorValdiscrim ... torVal]{\n\n     ...       }schemat ... tHalf);schemat ... stHalf)discrim ... stHalf)discrim ... l].pathdiscrim ... string'discrim ... h === 1discrim ... al.$in)Object. ... h === 1Object. ... torVal)Array.i ... al.$in)discriminatorVal.$indiscrim ... .lengthtypeof  ... .$in[0]discrim ... .$in[0]discrim ... $in[0]]discrim ... ]].pathlet pathFirstHalf;let pathLastHalf;let remainingConds;pathFir ... n('.');if (sch ...       }schemat ... .schemaschematype.casterremainingConds = {};remainingConds = {}pathLas ... n('.');remaini ...  = val;remaini ... ] = valremaini ... stHalf]const r ... tHalf];ret = c ... stHalf]cast(sc ... stHalf]if (ret ...       }ret === void 0void 0obj[path] = ret;obj[path] = retif (isO ...       }isObject(val)let geo = '';geo = ''val.$neargeo = '$near';geo = '$near'val.$nearSpheregeo = '$nearSphere';geo = '$nearSphere'nearSphereval.$withingeo = '$within';geo = '$within'val.$geoIntersectsgeo = ' ... sects';geo = ' ... rsects'geoIntersectsval.$geoWithingeo = '$geoWithin';geo = '$geoWithin'geoWithinif (geo ...       }const n ... ng__');numbert ... ing__')new Typ ... ing__')Types.Number__QueryCasting__let val ... l[geo];value = val[geo]val[geo]val.$ma ... != nullval.$maxDistanceval.$ma ...      );val.$ma ...       )numbert ...       )numbert ... orQueryval.$mi ... != nullval.$minDistanceval.$mi ...      );val.$mi ...       )geo === '$within'const w ... olygon;withinT ... polygonvalue.$ ... polygonvalue.$ ... ue.$boxvalue.$ ... rSpherevalue.$centervalue.$centerSpherevalue.$boxvalue.$polygonif (!wi ...       }!withinTypethrow n ... (val));new Err ... y(val))'Bad $w ... fy(val)'Bad $w ... eter: 'Bad $within parameter: JSON.stringify(val)value = withinType;value = withinTypegeo === ... inates)geo === ... string'geo === '$near'typeof value.typevalue.typevalue.coordinatesvalue = ... inates;value = ... dinatesif ((ge ...       }(geo == ... inates)(geo == ... string'(geo == ... eometry(geo == ... sects')geo === ... rsects'geo === ... Sphere'value.$geometrytypeof  ... ry.typevalue.$geometry.typevalue.$ ... dinatesvalue.$ ... != nullvalue.$maxDistancevalue.$ ...      );value.$ ...       )value.$minDistanceif (isM ...       }isMongo ... ometry)value.$ ...     });value.$ ...      })value.$ ... oObjecttransform: falsevirtuals: falsegeo === '$geoWithin'value.$ ... lse });value.$ ... alse }){ virtuals: false }const g ... y.type;geoWith ... ry.typeif (ALL ...       }ALLOWED ...  === -1ALLOWED ... inType)ALLOWED ... indexOfthrow n ... gon"');new Err ... ygon"')'Invali ... lygon"''Invali ... hinType'Invali ... thin "'Invalid geoJSON type for $geoWithin "'", mus ... lygon"'", must be "Polygon" or "MultiPolygon"value = ... Sphere;value = ... rSpherevalue.$ ... $centerisMongo ... (value)value = ... lse });value = ... alse })value.t ... alse })value.toObject_cast(v ... ntext);_cast(v ... ontext)schema.nested[path]schema.nestedconst s ... strict;strict  ... .strict'strict ... .strict'strict' in optionsschema. ... .strictconst s ... ntext);strictQ ... ontext)getStri ... ontext)schema. ... Optionsif (opt ...       }options ...  strictif (str ...       }strict === 'throw'throw n ... (path);new Str ... r(path)throw n ... ue`.');new Str ... rue`.')'Path " ... true`.''Path " ... ot in ''Path "' + pathPath "" is not in 'schema ... true`.'schema, strict mode is `true`, and upsert is `true`.strictQ ... 'throw'throw n ... w\'.');new Str ... ow\'.')'Path " ... row\'.''schema ... row\'.'schema and strictQuery is 'throw'.if (uti ...       }utils.isPOJO(val)utils.isPOJOany$con ... rator);any$con ... erator)Object. ... erator)Object. ... l).someObject.keys(val)if (!an ...       }!any$conditionalsobj[pat ...      );obj[pat ...       )schemat ...       )schemat ... orQueryconst k ... s(val);ks = Ob ... ys(val)let $cond;let k = ks.length;k = ks.lengthks.length$cond = ks[k];$cond = ks[k]ks[k]nested = val[$cond];nested = val[$cond]val[$cond]if ($co ...       }$cond = ... mMatch'if (nes ...       }nested  ... != nullschematype != nullschemat ... != nullschematype.schemacast(sc ... ntext);nested  ... seArrayschemat ... seArrayutils.i ... != nullutils.isPOJO(nested)nested.$not != nullnested.$notval[$co ...      );val[$co ...       )$cond === '$not'nested && schematype_keys = ... ested);_keys = ... nested)Object.keys(nested)if (_ke ...       }_keys.l ... eys[0])_keys.lengthisOperator(_keys[0])_keys[0]nested[ ...      );nested[ ...       )nested[key]if (Arr ...       }Array.i ... eFilterArray.i ...  === -1['Buffe ...  === -1['Buffe ... stance)['Buffe ... indexOf['Buffer', 'Array']schematype.instance!option ... eFilteroptions ... eFilterconst casted = [];casted = []const v ...  = val;valuesArray = valconst _valcasted. ...     ));casted. ...      ))casted.pushobj[pat ... sted };obj[pat ... asted }{ $in: casted }$in: casted{\n  if  ... }\n  }\n}if (Arr ...   }\n  }{\n    v ... });\n  }val.for ...     });val.for ... \n    })val.forEachArray.i ... t(item)Array.isArray(item)isObject(item)return  ... ntext);_cast(i ... ontext)val[i]  ... ntext);val[i]  ... ontext)val[i]numbert ... ontext)const n ... s(val);nearKey ... ys(val)let nea ... length;nearLen ... .lengthnearKeys.lengthwhile ( ... }\n    }nearLen--const n ... arLen];nkey =  ... earLen]nearKeys[nearLen]const i ... [nkey];item = val[nkey]val[nkey]_cast(i ... ntext);val[nkey] = item;val[nkey] = itemval[nke ... ext });val[nke ... text })numbert ... text }){ val:  ... ntext }val: itemcontext: contextfunctio ... uery;\n}schemaU ... Options{\n  if  ... uery;\n}if ('st ... ry;\n  }'strict ... Options{\n    r ... ry;\n  }return  ... tQuery;queryOp ... ctQueryschemaU ... ctQueryconst m ... ptions;mongoos ... optionscontext ... optionscontext ... nn.basecontext ... on.conncontext ... lectionif (mon ...   }\n  }if ('st ... ;\n    }mongoos ... ctQueryschemaO ... ctQuery/home/insomnia/repos/mongoose/lib/collection.js
 * Abstract Collection constructor
 *
 * This is the base class that drivers inherit from and implement.
 *
 * @param {String} name name of the collection
 * @param {Connection} conn A MongooseConnection instance
 * @param {Object} [opts] optional collection options
 * @api public
 
 * The collection name
 *
 * @api public
 * @property name
 
 * The collection name
 *
 * @api public
 * @property collectionName
 
 * The Connection instance
 *
 * @api public
 * @property conn
 /**\n *  ... onn\n */
 * Called when the database connects
 *
 * @api private
 
 * Called when the database disconnects
 *
 * @api private
 
 * Queues a method for later execution when its
 * database connection opens.
 *
 * @param {String} name name of the method to queue
 * @param {Array} args arguments to pass to the method when executed
 * @api private
 
 * Removes a queued method
 *
 * @param {String} name name of the method to queue
 * @param {Array} args arguments to pass to the method when executed
 * @api private
 
 * Executes all queued methods and clears the queue.
 *
 * @api private
 
 * Abstract method that drivers must implement.
 './connectionState'immediate'./helpers/immediate'CollectioncollectionName_hasOpenedonOpendoQueueonCloseaddQueueremoveQueue_this'queue'ensureIndex'Collection#ensureIndex unimplemented by driver''Collection#createIndex unimplemented by driver'findAndModify'Collection#findAndModify unimplemented by driver''Collection#findOneAndUpdate unimplemented by driver''Collection#findOneAndDelete unimplemented by driver'findOneAndReplace'Collection#findOneAndReplace unimplemented by driver''Collection#findOne unimplemented by driver''Collection#find unimplemented by driver''Collection#insert unimplemented by driver'insertOne'Collection#insertOne unimplemented by driver''Collection#insertMany unimplemented by driver''Collection#save unimplemented by driver'updateOne'Collection#updateOne unimplemented by driver'updateMany'Collection#updateMany unimplemented by driver'deleteOne'Collection#deleteOne unimplemented by driver''Collection#deleteMany unimplemented by driver'getIndexes'Collection#getIndexes unimplemented by driver''Collection#watch unimplemented by driver'_shouldBufferCommandsbufferCommands_getBufferTimeoutMSbufferTimeoutMSAbstract Collection constructor

This is the base class that drivers inherit from and implement.name of the collection
A MongooseConnection instance
optional collection options
The collection nameThe Connection instanceCalled when the database connectsCalled when the database disconnectsQueues a method for later execution when its
database connection opens.name of the method to queue
arguments to pass to the method when executed
Removes a queued methodExecutes all queued methods and clears the queue.Abstract method that drivers must implement.const S ... tate');STATES  ... State')require ... State')./connectionState/connectionStateconst i ... iate');immedia ... diate')require ... diate')'./help ... ediate'./helpers/immediate/helpers/immediateif (opt ... {};\n  }opts === void 0{\n    opts = {};\n  }opts = {};opts = {}this.opts = opts;this.opts = optsthis.optsthis.name = name;this.name = namethis.co ... = name;this.co ...  = namethis.collectionNamethis.conn = conn;this.conn = connthis.connthis.queue = [];this.queue = []this.queuethis.bu ... Opened;this.bu ... sOpenedthis.buffer!conn?._hasOpenedconn?._hasOpenedthis.em ... tter();this.em ... itter()this.emitterif (STA ... ();\n  }STATES. ... dyStateSTATES.connectedthis.conn.readyStatethis.onOpen();this.onOpen()this.onOpenCollect ... e.name;Collect ... pe.nameCollection.prototypeCollect ... onName;Collect ... ionNameCollect ... e.conn;Collect ... pe.connCollect ... ());\n};Collect ... e());\n}Collect ... .onOpenfunctio ... e());\n}{\n  thi ... e());\n}this.buffer = false;this.buffer = falseimmedia ... eue());immedia ... ueue())() => this.doQueue()this.doQueue()this.doQueueCollect ... n() {};Collect ... on() {}Collect ... onCloseCollect ... his;\n};Collect ... this;\n}Collect ... ddQueuethis.qu ... args]);this.qu ...  args])this.queue.push[name, args]Collect ... rue;\n};Collect ... true;\n}Collect ... veQueuefunctio ... true;\n}{\n  con ... true;\n}const i ...  args);index = ... = args)this.qu ... = args)this.queue.findIndexv => v[ ... == argsv[0] == ... == argsv[0] === namev[0]v[1] === argsv[1]if (ind ... se;\n  }index === -1this.qu ... ex, 1);this.qu ... dex, 1)this.queue.spliceCollect ... doQueueconst methodtypeof method[0]method[0]method[ ... od[1]);method[ ... hod[1])method[0].applymethod[1]this[me ... od[1]);this[me ... hod[1])this[me ... ].applythis[method[0]]const _this = this;_this = thisimmedia ... ;\n  });immedia ... );\n  }){\n    _ ... ');\n  }_this.e ... ueue');_this.e ... queue')_this.emitter.emit_this.emitterCollect ... r');\n};Collect ... er');\n}Collect ... reIndexfunctio ... er');\n}{\n  thr ... er');\n}throw n ... iver');new Err ... river')'Collec ... driver'Collection#ensureIndex unimplemented by driverCollect ... teIndexCollection#createIndex unimplemented by driverCollect ... dModifyCollection#findAndModify unimplemented by driverCollect ... dUpdateCollection#findOneAndUpdate unimplemented by driverCollect ... dDeleteCollection#findOneAndDelete unimplemented by driverCollect ... ReplaceCollection#findOneAndReplace unimplemented by driverCollect ... findOneCollection#findOne unimplemented by driverCollect ... pe.findCollection#find unimplemented by driverCollect ... .insertCollection#insert unimplemented by driverCollect ... sertOneCollection#insertOne unimplemented by driverCollect ... ertManyCollection#insertMany unimplemented by driverCollect ... pe.saveCollection#save unimplemented by driverCollect ... dateOneCollection#updateOne unimplemented by driverCollect ... ateManyCollection#updateMany unimplemented by driverCollect ... leteOneCollection#deleteOne unimplemented by driverCollect ... eteManyCollection#deleteMany unimplemented by driverCollect ... IndexesCollection#getIndexes unimplemented by driverCollect ... e.watchCollection#watch unimplemented by driverCollect ... s();\n};Collect ... ds();\n}Collect ... ommands_should ... ommandsfunctio ... ds();\n}{\n  con ... ds();\n}const o ... s.opts;opts = this.optsif (opt ... ds;\n  }opts.bu ... != nullopts.bufferCommands{\n    r ... ds;\n  }return  ... mmands;opts && ... != nullopts.sc ... != nullopts.sc ... Optionsopts.sc ... ommandsreturn  ... ands();this.co ... mands()this.co ... ommandsCollect ... S();\n};Collect ... MS();\n}Collect ... meoutMSfunctio ... MS();\n}{\n  con ... MS();\n}const c ... s.conn;conn = this.connif (opt ... MS;\n  }opts.bufferTimeoutMS{\n    r ... MS;\n  }return  ... eoutMS;opts.sc ... meoutMSreturn  ... utMS();conn._g ... outMS()conn._g ... meoutMSmodule. ... lection/home/insomnia/repos/mongoose/lib/connection.js
 * A list of authentication mechanisms that don't require a password for authentication.
 * This is used by the authMechanismDoesNotRequirePassword method.
 *
 * @api private
 
 * Connection constructor
 *
 * For practical reasons, a Connection equals a Db.
 *
 * @param {Mongoose} base a mongoose instance
 * @inherits NodeJS EventEmitter https://nodejs.org/api/events.html#class-eventemitter
 * @event `connecting`: Emitted when `connection.openUri()` is executed on this connection.
 * @event `connected`: Emitted when this connection successfully connects to the db. May be emitted _multiple_ times in `reconnected` scenarios.
 * @event `open`: Emitted after we `connected` and `onOpen` is executed on all of this connection's models.
 * @event `disconnecting`: Emitted when `connection.close()` was executed.
 * @event `disconnected`: Emitted after getting disconnected from the db.
 * @event `close`: Emitted after we `disconnected` and `onClose` executed on all of this connection's models.
 * @event `reconnected`: Emitted after we `connected` and subsequently `disconnected`, followed by successfully another successful connection.
 * @event `error`: Emitted when an error occurs on this connection.
 * @event `operation-start`: Emitted when a call to the MongoDB Node.js driver, like a `find()` or `insertOne()`, happens on any collection tied to this connection.
 * @event `operation-end`: Emitted when a call to the MongoDB Node.js driver, like a `find()` or `insertOne()`, either succeeds or errors.
 * @api public
  FIXME: To be replaced with relatedDbs// FIXM ... atedDbs Hashmap of other dbs that share underlying connection// Hash ... nection Internal queue of objects `{ fn, ctx, args }` that Mongoose calls when this connection is successfully// Inte ... ssfully opened. In `onOpen()`, Mongoose calls every entry in `_queue` and empties the queue.// open ...  queue.!
 * Inherit from EventEmitter
 /*!\n *  ... ter\n */
 * Connection ready state
 *
 * - 0 = disconnected
 * - 1 = connected
 * - 2 = connecting
 * - 3 = disconnecting
 *
 * Each state change emits its associated event name.
 *
 * #### Example:
 *
 *     conn.on('connected', callback);
 *     conn.on('disconnected', callback);
 *
 * @property readyState
 * @memberOf Connection
 * @instance
 * @api public
  If connection thinks it is connected, but we haven't received a heartbeat in 2 heartbeat intervals,// If c ... ervals, that likely means the connection is stale (potentially due to frozen AWS Lambda container)// that ... tainer) LoadBalanced topology (behind haproxy, including Atlas serverless instances) don't use heartbeats,// Load ... tbeats, so we can't use this check in that case.// so w ... t case. [legacy] loop over the otherDbs on this connection and change their state// [leg ... r state
 * Gets the value of the option `key`. Equivalent to `conn.options[key]`
 *
 * #### Example:
 *
 *     conn.get('test'); // returns the 'test' value
 *
 * @param {String} key
 * @method get
 * @api public
 
 * Sets the value of the option `key`. Equivalent to `conn.options[key] = val`
 *
 * Supported options include:
 *
 * - `maxTimeMS`: Set [`maxTimeMS`](https://mongoosejs.com/docs/api/query.html#Query.prototype.maxTimeMS()) for all queries on this connection.
 * - 'debug': If `true`, prints the operations mongoose sends to MongoDB to the console. If a writable stream is passed, it will log to that stream, without colorization. If a callback function is passed, it will receive the collection name, the method name, then all arugments passed to the method. For example, if you wanted to replicate the default logging, you could output from the callback `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(', ')})`.
 *
 * #### Example:
 *
 *     conn.set('test', 'foo');
 *     conn.get('test'); // 'foo'
 *     conn.options.test; // 'foo'
 *
 * @param {String} key
 * @param {Any} val
 * @method set
 * @api public
 
 * A hash of the collections associated with this connection
 *
 * @property collections
 * @memberOf Connection
 * @instance
 * @api public
 
 * The name of the database this connection points to.
 *
 * #### Example:
 *
 *     mongoose.createConnection('mongodb://127.0.0.1:27017/mydb').name; // "mydb"
 *
 * @property name
 * @memberOf Connection
 * @instance
 * @api public
 
 * A [POJO](https://masteringjs.io/tutorials/fundamentals/pojo) containing
 * a map from model names to models. Contains all models that have been
 * added to this connection using [`Connection#model()`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.model()).
 *
 * #### Example:
 *
 *     const conn = mongoose.createConnection();
 *     const Test = conn.model('Test', mongoose.Schema({ name: String }));
 *
 *     Object.keys(conn.models).length; // 1
 *     conn.models.Test === Test; // true
 *
 * @property models
 * @memberOf Connection
 * @instance
 * @api public
 
 * A number identifier for this connection. Used for debugging when
 * you have [multiple connections](https://mongoosejs.com/docs/connections.html#multiple_connections).
 *
 * #### Example:
 *
 *     // The default connection has `id = 0`
 *     mongoose.connection.id; // 0
 *
 *     // If you create a new connection, Mongoose increments id
 *     const conn = mongoose.createConnection();
 *     conn.id; // 1
 *
 * @property id
 * @memberOf Connection
 * @instance
 * @api public
 
 * The plugins that will be applied to all models created on this connection.
 *
 * #### Example:
 *
 *     const db = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
 *     db.plugin(() => console.log('Applied'));
 *     db.plugins.length; // 1
 *
 *     db.model('Test', new Schema({})); // Prints "Applied"
 *
 * @property plugins
 * @memberOf Connection
 * @instance
 * @api public
 
 * The host name portion of the URI. If multiple hosts, such as a replica set,
 * this will contain the first host name in the URI
 *
 * #### Example:
 *
 *     mongoose.createConnection('mongodb://127.0.0.1:27017/mydb').host; // "127.0.0.1"
 *
 * @property host
 * @memberOf Connection
 * @instance
 * @api public
 
 * The port portion of the URI. If multiple hosts, such as a replica set,
 * this will contain the port from the first host name in the URI.
 *
 * #### Example:
 *
 *     mongoose.createConnection('mongodb://127.0.0.1:27017/mydb').port; // 27017
 *
 * @property port
 * @memberOf Connection
 * @instance
 * @api public
 
 * The username specified in the URI
 *
 * #### Example:
 *
 *     mongoose.createConnection('mongodb://val:psw@127.0.0.1:27017/mydb').user; // "val"
 *
 * @property user
 * @memberOf Connection
 * @instance
 * @api public
 
 * The password specified in the URI
 *
 * #### Example:
 *
 *     mongoose.createConnection('mongodb://val:psw@127.0.0.1:27017/mydb').pass; // "psw"
 *
 * @property pass
 * @memberOf Connection
 * @instance
 * @api public
 
 * The mongodb.Db instance, set when the connection is opened
 *
 * @property db
 * @memberOf Connection
 * @instance
 * @api public
 
 * The MongoClient instance this connection uses to talk to MongoDB. Mongoose automatically sets this property
 * when the connection is opened.
 *
 * @property client
 * @memberOf Connection
 * @instance
 * @api public
 
 * A hash of the global options that are associated with this connection
 *
 * @property config
 * @memberOf Connection
 * @instance
 * @api public
 
 * Helper for `createCollection()`. Will explicitly create the given collection
 * with specified options. Used to create [capped collections](https://www.mongodb.com/docs/manual/core/capped-collections/)
 * and [views](https://www.mongodb.com/docs/manual/core/views/) from mongoose.
 *
 * Options are passed down without modification to the [MongoDB driver's `createCollection()` function](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#createCollection)
 *
 * @method createCollection
 * @param {string} collection The collection to create
 * @param {Object} [options] see [MongoDB driver docs](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#createCollection)
 * @return {Promise}
 * @api public
 
 * _Requires MongoDB Server 8.0 or greater_. Executes bulk write operations across multiple models in a single operation.
 * You must specify the `model` for each operation: Mongoose will use `model` for casting and validation, as well as
 * determining which collection to apply the operation to.
 *
 * #### Example:
 *     const Test = mongoose.model('Test', new Schema({ name: String }));
 *
 *     await db.bulkWrite([
 *       { model: Test, name: 'insertOne', document: { name: 'test1' } }, // Can specify model as a Model class...
 *       { model: 'Test', name: 'insertOne', document: { name: 'test2' } } // or as a model name
 *     ], { ordered: false });
 *
 * @method bulkWrite
 * @param {Array} ops
 * @param {Object} [options]
 * @param {Boolean} [options.ordered] If false, perform unordered operations. If true, perform ordered operations.
 * @param {Session} [options.session] The session to use for the operation.
 * @return {Promise}
 * @see MongoDB https://www.mongodb.com/docs/manual/reference/command/bulkWrite/#mongodb-dbcommand-dbcmd.bulkWrite
 * @api public
 
 * Calls `createCollection()` on a models in a series.
 *
 * @method createCollections
 * @param {Boolean} continueOnError When true, will continue to create collections and create a new error class for the collections that errored.
 * @returns {Promise}
 * @api public
 
 * A convenience wrapper for `connection.client.withSession()`.
 *
 * #### Example:
 *
 *     await conn.withSession(async session => {
 *       const doc = await TestModel.findOne().session(session);
 *     });
 *
 * @method withSession
 * @param {Function} executor called with 1 argument: a `ClientSession` instance
 * @return {Promise} resolves to the return value of the executor function
 * @api public
 
 * _Requires MongoDB >= 3.6.0._ Starts a [MongoDB session](https://www.mongodb.com/docs/manual/release-notes/3.6/#client-sessions)
 * for benefits like causal consistency, [retryable writes](https://www.mongodb.com/docs/manual/core/retryable-writes/),
 * and [transactions](https://thecodebarbarian.com/a-node-js-perspective-on-mongodb-4-transactions.html).
 *
 * #### Example:
 *
 *     const session = await conn.startSession();
 *     let doc = await Person.findOne({ name: 'Ned Stark' }, null, { session });
 *     await doc.deleteOne();
 *     // `doc` will always be null, even if reading from a replica set
 *     // secondary. Without causal consistency, it is possible to
 *     // get a doc back from the below query if the query reads from a
 *     // secondary that is experiencing replication lag.
 *     doc = await Person.findOne({ name: 'Ned Stark' }, null, { session, readPreference: 'secondary' });
 *
 *
 * @method startSession
 * @param {Object} [options] see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html#startSession)
 * @param {Boolean} [options.causalConsistency=true] set to false to disable causal consistency
 * @return {Promise<ClientSession>} promise that resolves to a MongoDB driver `ClientSession`
 * @api public
 
 * _Requires MongoDB >= 3.6.0._ Executes the wrapped async function
 * in a transaction. Mongoose will commit the transaction if the
 * async function executes successfully and attempt to retry if
 * there was a retriable error.
 *
 * Calls the MongoDB driver's [`session.withTransaction()`](https://mongodb.github.io/node-mongodb-native/4.9/classes/ClientSession.html#withTransaction),
 * but also handles resetting Mongoose document state as shown below.
 *
 * #### Example:
 *
 *     const doc = new Person({ name: 'Will Riker' });
 *     await db.transaction(async function setRank(session) {
 *       doc.rank = 'Captain';
 *       await doc.save({ session });
 *       doc.isNew; // false
 *
 *       // Throw an error to abort the transaction
 *       throw new Error('Oops!');
 *     },{ readPreference: 'primary' }).catch(() => {});
 *
 *     // true, `transaction()` reset the document's state because the
 *     // transaction was aborted.
 *     doc.isNew;
 *
 * @method transaction
 * @param {Function} fn Function to execute in a transaction
 * @param {mongodb.TransactionOptions} [options] Optional settings for the transaction
 * @return {Promise<Any>} promise that is fulfilled if Mongoose successfully committed the transaction, or rejects if the transaction was aborted or if Mongoose failed to commit the transaction. If fulfilled, the promise resolves to a MongoDB command result.
 * @api public
 !
 * Reset document state in between transaction retries re: gh-13698
 /*!\n *  ... 698\n */!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 /*!\n *  ... w`.\n */
 * Helper for `dropCollection()`. Will delete the given collection, including
 * all documents and indexes.
 *
 * @method dropCollection
 * @param {string} collection The collection to delete
 * @return {Promise}
 * @api public
 
 * Waits for connection to be established, so the connection has a `client`
 *
 * @param {Boolean} [noTimeout=false] if set, don't put a timeout on the operation. Used internally so `mongoose.model()` doesn't leave open handles.
 * @return Promise
 * @api private
  The element that this function pushes onto `_queue`, stored to make it easy to remove later// The  ... e later Mongoose executes all elements in `_queue` when initial connection succeeds in `onOpen()`.// Mong ... pen()`. Not strictly necessary, but avoid the extra overhead of creating a new MongooseError// Not  ... seError in case of success// in c ... success!
 * Get the default buffer timeout for this connection
 /*!\n *  ... ion\n */
 * Helper for MongoDB Node driver's `listCollections()`.
 * Returns an array of collection objects.
 *
 * @method listCollections
 * @return {Promise<Collection[]>}
 * @api public
 
 * Helper for MongoDB Node driver's `listDatabases()`.
 * Returns an object with a `databases` property that contains an
 * array of database objects.
 *
 * #### Example:
 *     const { databases } = await mongoose.connection.listDatabases();
 *     databases; // [{ name: 'mongoose_test', sizeOnDisk: 0, empty: false }]
 *
 * @method listCollections
 * @return {Promise<{ databases: Array<{ name: string }> }>}
 * @api public
  Implemented in `lib/drivers/node-mongodb-native/connection.js`// Impl ... ion.js`
 * Helper for `dropDatabase()`. Deletes the given database, including all
 * collections, documents, and indexes.
 *
 * #### Example:
 *
 *     const conn = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
 *     // Deletes the entire 'mydb' database
 *     await conn.dropDatabase();
 *
 * @method dropDatabase
 * @return {Promise}
 * @api public
  If `dropDatabase()` is called, this model's collection will not be// If ` ...  not be init-ed. It is sufficiently common to call `dropDatabase()` after// init ... ` after `mongoose.connect()` but before creating models that we want to// `mon ... want to support this. See gh-6796// supp ... gh-6796
 * error
 *
 * Graceful error handling, passes error to callback
 * if available, else emits error on the connection.
 *
 * @param {Error} err
 * @param {Function} callback optional
 * @emits "error" Emits the `error` event with the given `err`, unless a callback is specified
 * @returns {Promise|null} Returns a rejected Promise if no `callback` is given.
 * @api private
 
 * Called when the connection is opened
 *
 * @emits "open"
 * @api private
  avoid having the collection subscribe to our event emitter// avoi ... emitter to prevent 0.3 warning// to p ... warning
 * Opens the connection with a URI using `MongoClient.connect()`.
 *
 * @param {String} uri The URI to connect with.
 * @param {Object} [options] Passed on to [`MongoClient.connect`](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html#connect-1)
 * @param {Boolean} [options.bufferCommands=true] Mongoose specific option. Set to false to [disable buffering](https://mongoosejs.com/docs/faq.html#callback_never_executes) on all models associated with this connection.
 * @param {Number} [options.bufferTimeoutMS=10000] Mongoose specific option. If `bufferCommands` is true, Mongoose will throw an error after `bufferTimeoutMS` if the operation is still buffered.
 * @param {String} [options.dbName] The name of the database we want to use. If not provided, use database name from connection string.
 * @param {String} [options.user] username for authentication, equivalent to `options.auth.user`. Maintained for backwards compatibility.
 * @param {String} [options.pass] password for authentication, equivalent to `options.auth.password`. Maintained for backwards compatibility.
 * @param {Number} [options.maxPoolSize=100] The maximum number of sockets the MongoDB driver will keep open for this connection. Keep in mind that MongoDB only allows one operation per socket at a time, so you may want to increase this if you find you have a few slow queries that are blocking faster queries from proceeding. See [Slow Trains in MongoDB and Node.js](https://thecodebarbarian.com/slow-trains-in-mongodb-and-nodejs).
 * @param {Number} [options.minPoolSize=0] The minimum number of sockets the MongoDB driver will keep open for this connection. Keep in mind that MongoDB only allows one operation per socket at a time, so you may want to increase this if you find you have a few slow queries that are blocking faster queries from proceeding. See [Slow Trains in MongoDB and Node.js](https://thecodebarbarian.com/slow-trains-in-mongodb-and-nodejs).
 * @param {Number} [options.serverSelectionTimeoutMS] If `useUnifiedTopology = true`, the MongoDB driver will try to find a server to send any given operation to, and keep retrying for `serverSelectionTimeoutMS` milliseconds before erroring out. If not set, the MongoDB driver defaults to using `30000` (30 seconds).
 * @param {Number} [options.heartbeatFrequencyMS] If `useUnifiedTopology = true`, the MongoDB driver sends a heartbeat every `heartbeatFrequencyMS` to check on the status of the connection. A heartbeat is subject to `serverSelectionTimeoutMS`, so the MongoDB driver will retry failed heartbeats for up to 30 seconds by default. Mongoose only emits a `'disconnected'` event after a heartbeat has failed, so you may want to decrease this setting to reduce the time between when your server goes down and when Mongoose emits `'disconnected'`. We recommend you do **not** set this setting below 1000, too many heartbeats can lead to performance degradation.
 * @param {Boolean} [options.autoIndex=true] Mongoose-specific option. Set to false to disable automatic index creation for all models associated with this connection.
 * @param {Class} [options.promiseLibrary] Sets the [underlying driver's promise library](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/MongoClientOptions.html#promiseLibrary).
 * @param {Number} [options.socketTimeoutMS=0] How long the MongoDB driver will wait before killing a socket due to inactivity _after initial connection_. A socket may be inactive because of either no activity or a long-running operation. `socketTimeoutMS` defaults to 0, which means Node.js will not time out the socket due to inactivity. This option is passed to [Node.js `socket#setTimeout()` function](https://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback) after the MongoDB driver successfully completes.
 * @param {Number} [options.family=0] Passed transparently to [Node.js' `dns.lookup()`](https://nodejs.org/api/dns.html#dns_dns_lookup_hostname_options_callback) function. May be either `0, `4`, or `6`. `4` means use IPv4 only, `6` means use IPv6 only, `0` means try both.
 * @param {Boolean} [options.autoCreate=false] Set to `true` to make Mongoose automatically call `createCollection()` on every model created on this connection.
 * @returns {Promise<Connection>}
 * @api public
  Internal option to skip `await this.$initialConnection` in// Inte ... ion` in this function for `createConnection()`. Because otherwise// this ... herwise `createConnection()` would have an uncatchable error.// `cre ...  error. Errors handled internally, so safe to ignore error// Erro ... e error `createConnection()` calls this `openUri()` function without// `cre ... without awaiting on the result, so we set this option to rely on// awai ... rely on `asPromise()` to handle any errors.// `asP ... errors.
 * Listen to events in the Connection
 *
 * @param {String} event The event to listen on
 * @param {Function} callback
 * @see Connection#readyState https://mongoosejs.com/docs/api/connection.html#Connection.prototype.readyState
 *
 * @method on
 * @instance
 * @memberOf Connection
 * @api public
  Treat `on('error')` handlers as handling the initialConnection promise// Trea ... promise to avoid uncaught exceptions when using `on('error')`. See gh-14377.// to a ... -14377.
 * Listen to a event once in the Connection
 *
 * @param {String} event The event to listen on
 * @param {Function} callback
 * @see Connection#readyState https://mongoosejs.com/docs/api/connection.html#Connection.prototype.readyState
 *
 * @method once
 * @instance
 * @memberOf Connection
 * @api public
 
 * Destroy the connection. Similar to [`.close`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.close()),
 * but also removes the connection from Mongoose's `connections` list and prevents the
 * connection from ever being re-opened.
 *
 * @param {Boolean} [force]
 * @returns {Promise}
 
 * Closes the connection
 *
 * @param {Boolean} [force] optional
 * @return {Promise}
 * @api public
  If manually disconnecting, make sure to clear each model's `$init`// If m ... `$init` promise, so Mongoose knows to re-run `init()` in case the// prom ... ase the connection is re-opened. See gh-12047.// conn ... -12047.
 * Handles closing the connection
 *
 * @param {Boolean} force
 * @param {Boolean} destroy
 * @returns {Connection} this
 * @api private
 
 * Abstract method that drivers must implement.
 *
 * @api private
 
 * Called when the connection closes
 *
 * @emits "close"
 * @api private
 
 * Retrieves a raw collection instance, creating it if not cached.
 * This method returns a thin wrapper around a [MongoDB Node.js driver collection]([MongoDB Node.js driver collection](https://mongodb.github.io/node-mongodb-native/Next/classes/Collection.html)).
 * Using a Collection bypasses Mongoose middleware, validation, and casting,
 * letting you use [MongoDB Node.js driver](https://mongodb.github.io/node-mongodb-native/) functionality directly.
 *
 * @param {String} name of the collection
 * @param {Object} [options] optional collection options
 * @return {Collection} collection instance
 * @api public
 
 * Declares a plugin executed on all schemas you pass to `conn.model()`
 *
 * Equivalent to calling `.plugin(fn)` on each schema you create.
 *
 * #### Example:
 *
 *     const db = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
 *     db.plugin(() => console.log('Applied'));
 *     db.plugins.length; // 1
 *
 *     db.model('Test', new Schema({})); // Prints "Applied"
 *
 * @param {Function} fn plugin callback
 * @param {Object} [opts] optional options
 * @return {Connection} this
 * @see plugins https://mongoosejs.com/docs/plugins.html
 * @api public
 
 * Defines or retrieves a model.
 *
 *     const mongoose = require('mongoose');
 *     const db = mongoose.createConnection(..);
 *     db.model('Venue', new Schema(..));
 *     const Ticket = db.model('Ticket', new Schema(..));
 *     const Venue = db.model('Venue');
 *
 * _When no `collection` argument is passed, Mongoose produces a collection name by passing the model `name` to the `utils.toCollectionName` method. This method pluralizes the name. If you don't like this behavior, either pass a collection name or set your schemas collection name option._
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String }, { collection: 'actor' });
 *
 *     // or
 *
 *     schema.set('collection', 'actor');
 *
 *     // or
 *
 *     const collectionName = 'actor'
 *     const M = conn.model('Actor', schema, collectionName)
 *
 * @param {String|Function} name the model name or class extending Model
 * @param {Schema} [schema] a schema. necessary when defining a model
 * @param {String} [collection] name of mongodb collection (optional) if not given it will be induced from model name
 * @param {Object} [options]
 * @param {Boolean} [options.overwriteModels=false] If true, overwrite existing models with the same name to avoid `OverwriteModelError`
 * @see Mongoose#model https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()
 * @return {Model} The compiled model
 * @api public
  collection name discovery// coll ... scovery model exists but we are not subclassing with custom collection// mode ... lection compile a model// compile a model only the first model with this name is cached to allow// only ... o allow for one-offs with custom collection names etc.// for  ... es etc. subclassing current model with alternate collection// subc ... lection do not cache the sub model// do n ... b model model already uses this connection.// mode ... ection.
 * Removes the model named `name` from this connection, if it exists. You can
 * use this function to clean up any models you created in your tests to
 * prevent OverwriteModelErrors.
 *
 * #### Example:
 *
 *     conn.model('User', new Schema({ name: String }));
 *     console.log(conn.model('User')); // Model object
 *     conn.deleteModel('User');
 *     console.log(conn.model('User')); // undefined
 *
 *     // Usually useful in a Mocha `afterEach()` hook
 *     afterEach(function() {
 *       conn.deleteModel(/.+/); // Delete every model
 *     });
 *
 * @api public
 * @param {String|RegExp} name if string, the name of the model to remove. If regexp, removes all models whose name matches the regexp.
 * @return {Connection} this
 /**\n *  ... his\n */
 * Watches the entire underlying database for changes. Similar to
 * [`Model.watch()`](https://mongoosejs.com/docs/api/model.html#Model.watch()).
 *
 * This function does **not** trigger any middleware. In particular, it
 * does **not** trigger aggregate middleware.
 *
 * The ChangeStream object is an event emitter that emits the following events:
 *
 * - 'change': A change occurred, see below example
 * - 'error': An unrecoverable error occurred. In particular, change streams currently error out if they lose connection to the replica set primary. Follow [this GitHub issue](https://github.com/Automattic/mongoose/issues/6799) for updates.
 * - 'end': Emitted if the underlying stream is closed
 * - 'close': Emitted if the underlying stream is closed
 *
 * #### Example:
 *
 *     const User = conn.model('User', new Schema({ name: String }));
 *
 *     const changeStream = conn.watch().on('change', data => console.log(data));
 *
 *     // Triggers a 'change' event on the change stream.
 *     await User.create({ name: 'test' });
 *
 * @api public
 * @param {Array} [pipeline]
 * @param {Object} [options] passed without changes to [the MongoDB driver's `Db#watch()` function](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#watch)
 * @return {ChangeStream} mongoose-specific change stream wrapper, inherits from EventEmitter
 
 * Returns a promise that resolves when this connection
 * successfully connects to MongoDB, or rejects if this connection failed
 * to connect.
 *
 * #### Example:
 *
 *     const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/test').
 *       asPromise();
 *     conn.readyState; // 1, means Mongoose is connected
 *
 * @api public
 * @return {Promise}
 
 * Returns an array of model names created on this connection.
 * @api public
 * @return {String[]}
 
 * Returns if the connection requires authentication after it is opened. Generally if a
 * username and password are both provided than authentication is needed, but in some cases a
 * password is not required.
 *
 * @api private
 * @return {Boolean} true if the connection should be authenticated after it is opened, otherwise false.
 /**\n *  ... se.\n */
 * Returns a boolean value that specifies if the current authentication mechanism needs a
 * password to authenticate according to the auth objects passed into the openUri methods.
 *
 * @api private
 * @return {Boolean} true if the authentication mechanism specified in the options object requires
 *  a password, otherwise false.
 
 * Returns a boolean value that specifies if the provided objects object provides enough
 * data to authenticate with. Generally this is true if the username and password are both specified
 * but in some authentication methods, a password is not required for authentication so only a username
 * is required.
 *
 * @param {Object} [options] the options object passed into the openUri methods.
 * @api private
 * @return {Boolean} true if the provided options object provides enough data to authenticate with,
 *   otherwise false.
 
 * Returns the [MongoDB driver `MongoClient`](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html) instance
 * that this connection uses to talk to MongoDB.
 *
 * #### Example:
 *
 *     const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/test').
 *       asPromise();
 *
 *     conn.getClient(); // MongoClient { ... }
 *
 * @api public
 * @return {MongoClient}
 
 * Set the [MongoDB driver `MongoClient`](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html) instance
 * that this connection uses to talk to MongoDB. This is useful if you already have a MongoClient instance, and want to
 * reuse it.
 *
 * #### Example:
 *
 *     const client = await mongodb.MongoClient.connect('mongodb://127.0.0.1:27017/test');
 *
 *     const conn = mongoose.createConnection().setClient(client);
 *
 *     conn.getClient(); // MongoClient { ... }
 *     conn.readyState; // 1, means 'CONNECTED'
 *
 * @api public
 * @param {MongClient} client The Client to set to be used.
 * @return {Connection} this
 !
 * Called internally by `openUri()` to create a MongoClient instance.
 /*!\n *  ... ce.\n */
 * Syncs all the indexes for the models registered with this connection.
 *
 * @param {Object} [options]
 * @param {Boolean} [options.continueOnError] `false` by default. If set to `true`, mongoose will not throw an error if one model syncing failed, and will return an object where the keys are the names of the models, and the values are the results/errors for each model.
 * @return {Promise<Object>} Returns a Promise, when the Promise resolves the value is a list of the dropped indexes.
 
 * Switches to a different database using the same [connection pool](https://mongoosejs.com/docs/api/connectionshtml#connection_pools).
 *
 * Returns a new connection object, with the new db.
 *
 * #### Example:
 *
 *     // Connect to `initialdb` first
 *     const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/initialdb').asPromise();
 *
 *     // Creates an un-cached connection to `mydb`
 *     const db = conn.useDb('mydb');
 *     // Creates a cached connection to `mydb2`. All calls to `conn.useDb('mydb2', { useCache: true })` will return the same
 *     // connection instance as opposed to creating a new connection instance
 *     const db2 = conn.useDb('mydb2', { useCache: true });
 *
 * @method useDb
 * @memberOf Connection
 * @param {String} name The database name
 * @param {Object} [options]
 * @param {Boolean} [options.useCache=false] If true, cache results so calling `useDb()` multiple times with the same name only creates 1 connection object.
 * @param {Boolean} [options.noListener=false] If true, the connection object will not make the db listen to events on the original connection. See [issue #9961](https://github.com/Automattic/mongoose/issues/9961).
 * @return {Connection} New Connection Object
 * @api public
 
 * Runs a [db-level aggregate()](https://www.mongodb.com/docs/manual/reference/method/db.aggregate/) on this connection's underlying `db`
 *
 * @method aggregate
 * @memberOf Connection
 * @param {Array} pipeline
 * @param {Object} [options]
 * @param {Boolean} [options.cursor=false] If true, make the Aggregate resolve to a Mongoose AggregationCursor rather than an array
 * @return {Aggregate} Aggregation wrapper
 * @api public
 
 * Removes the database connection with the given name created with with `useDb()`.
 *
 * Throws an error if the database connection was not found.
 *
 * #### Example:
 *
 *     // Connect to `initialdb` first
 *     const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/initialdb').asPromise();
 *
 *     // Creates an un-cached connection to `mydb`
 *     const db = conn.useDb('mydb');
 *
 *     // Closes `db`, and removes `db` from `conn.relatedDbs` and `conn.otherDbs`
 *     await conn.removeDb('mydb');
 *
 * @method removeDb
 * @memberOf Connection
 * @param {String} name The database name
 * @return {Connection} this
 * @api public
 ChangeStream'./cursor/changeStream'MongooseBulkWriteError'./error/bulkWriteError'ServerSelectionError'./error/serverSelection'SyncIndexesError'./error/syncIndexes'applyPlugins'./helpers/schema/applyPlugins'drivergetDefaultBulkwriteResult'./helpers/getDefaultBulkwriteResult'CreateCollectionsError'./error/createCollectionsError'castBulkWrite'./helpers/model/castBulkWrite'isPromise'./helpers/isPromise'decorateBulkWriteResult'./helpers/model/decorateBulkWriteResult'arrayAtomicsSymbolsessionNewDocumentsnoPasswordAuthMechanisms'MONGODB-X509'collectionsmodelsreplicaotherDbsrelatedDbsstates_readyStatedisconnected_closeCallednextConnectionId_queue'readyState'_lastHeartbeatAttopology'LoadBalanced'heartbeatFrequencyMS'Invalid connection state: 'getOptionsetOption'plugins''host''port''user''pass'createCollection'Connection.prototype.createCollection() no longer accepts a callback'_waitForConnectbulkWriteorderedopsToSend'Must specify model in Connection.prototype.bulkWrite() operations''Must specify operation name in Connection.prototype.bulkWrite()'Unrecognized bulkWrite() operation name validOpsvalidOpIndexesvalidationErrorsasyncValidationsmaybePromisev1v2throwOnValidationError'bulkWrite'BulkWriteResultcreateCollectionserrorsMapcontinueOnError: ', 'createCollectionsErrorwithSessionexecutor'Please provide an executor function''Connection.prototype.startSession() no longer accepts a callback'withTransaction_wrapUserTransactionendSession_resetSessionDocuments'isNew'$isNewisNew'versionKey'modifiedPaths$__activePathscurrentState'modify'atomics$__getValuedropCollection'Connection.prototype.dropCollection() no longer accepts a callback'noTimeoutconnectingtimedOutqueueElementwaitForConnectPromise'Connection operation buffering timed out after ''ms''bufferTimeoutMS'listCollectionslistDatabases'listDatabases() not implemented by driver''Connection.prototype.dropDatabase() no longer accepts a callback'$init'bufferCommands'openUri_connectionString_fireAndForget'_fireAndForget'_validateArgs$initialConnection$modelInitNoop_handleConnectionErrors'Connection.prototype.openUri() no longer accepts a callback''MongoServerSelectionError'originalErrorassimilateError'Connection.prototype.destroy() no longer accepts a callback'$wasForceClosed_close'Connection.prototype.close() no longer accepts a callback'closeCalled_destroyCalleddoClosedisconnecting_rerunClose'close''Connection#doClose unimplemented by driver'wasForceClosedskipCloseClientdefaultOptionsautoIndexautoCreateautoSearchIndex__driver'`connection.model()` should not be run with ''`new`. If you are doing `new db.model(foo)(bar)`, use ''`db.model(foo)(bar)` instead'_clone'The 2nd parameter to `mongoose.model()` should be a ''schema or a POJO'overwriteModelsOverwriteModelError'$connectionPluginsApplied'__subclass'deleteModel''First parameter to `deleteModel()` must be a string ''or regexp, got "''"'changeStreamThunkdriverChangeStreamchangeStreamasPromiseshouldAuthenticatepassauthMechanismDoesNotRequirePasswordauthMechanismoptionsProvideAuthenticationDatagetClientsetClient'Connection#setClient not implemented by driver''Connection#createClient not implemented by driver'syncIndexesErrorA list of authentication mechanisms that don't require a password for authentication.
This is used by the authMechanismDoesNotRequirePassword method.Connection constructor

For practical reasons, a Connection equals a Db.a mongoose instance
`connecting`: Emitted when `connection.openUri()` is executed on this connection.
`connected`: Emitted when this connection successfully connects to the db. May be emitted _multiple_ times in `reconnected` scenarios.
`open`: Emitted after we `connected` and `onOpen` is executed on all of this connection's models.
`disconnecting`: Emitted when `connection.close()` was executed.
`disconnected`: Emitted after getting disconnected from the db.
`close`: Emitted after we `disconnected` and `onClose` executed on all of this connection's models.
`reconnected`: Emitted after we `connected` and subsequently `disconnected`, followed by successfully another successful connection.
`error`: Emitted when an error occurs on this connection.
`operation-start`: Emitted when a call to the MongoDB Node.js driver, like a `find()` or `insertOne()`, happens on any collection tied to this connection.
`operation-end`: Emitted when a call to the MongoDB Node.js driver, like a `find()` or `insertOne()`, either succeeds or errors.
Connection ready state

- 0 = disconnected
- 1 = connected
- 2 = connecting
- 3 = disconnecting

Each state change emits its associated event name.

#### Example:

conn.on('connected', callback);
conn.on('disconnected', callback);Connection
Gets the value of the option `key`. Equivalent to `conn.options[key]`

#### Example:

conn.get('test'); // returns the 'test' valueSets the value of the option `key`. Equivalent to `conn.options[key] = val`

Supported options include:

- `maxTimeMS`: Set [`maxTimeMS`](https://mongoosejs.com/docs/api/query.html#Query.prototype.maxTimeMS()) for all queries on this connection.
- 'debug': If `true`, prints the operations mongoose sends to MongoDB to the console. If a writable stream is passed, it will log to that stream, without colorization. If a callback function is passed, it will receive the collection name, the method name, then all arugments passed to the method. For example, if you wanted to replicate the default logging, you could output from the callback `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(', ')})`.

#### Example:

conn.set('test', 'foo');
conn.get('test'); // 'foo'
conn.options.test; // 'foo'A hash of the collections associated with this connectionThe name of the database this connection points to.

#### Example:

mongoose.createConnection('mongodb://127.0.0.1:27017/mydb').name; // "mydb"A [POJO](https://masteringjs.io/tutorials/fundamentals/pojo) containing
a map from model names to models. Contains all models that have been
added to this connection using [`Connection#model()`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.model()).

#### Example:

const conn = mongoose.createConnection();
const Test = conn.model('Test', mongoose.Schema({ name: String }));

Object.keys(conn.models).length; // 1
conn.models.Test === Test; // trueA number identifier for this connection. Used for debugging when
you have [multiple connections](https://mongoosejs.com/docs/connections.html#multiple_connections).

#### Example:

// The default connection has `id = 0`
mongoose.connection.id; // 0

// If you create a new connection, Mongoose increments id
const conn = mongoose.createConnection();
conn.id; // 1The plugins that will be applied to all models created on this connection.

#### Example:

const db = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
db.plugin(() => console.log('Applied'));
db.plugins.length; // 1

db.model('Test', new Schema({})); // Prints "Applied"The host name portion of the URI. If multiple hosts, such as a replica set,
this will contain the first host name in the URI

#### Example:

mongoose.createConnection('mongodb://127.0.0.1:27017/mydb').host; // "127.0.0.1"The port portion of the URI. If multiple hosts, such as a replica set,
this will contain the port from the first host name in the URI.

#### Example:

mongoose.createConnection('mongodb://127.0.0.1:27017/mydb').port; // 27017The username specified in the URI

#### Example:

mongoose.createConnection('mongodb://val:psw@127.0.0.1:27017/mydb').user; // "val"The password specified in the URI

#### Example:

mongoose.createConnection('mongodb://val:psw@127.0.0.1:27017/mydb').pass; // "psw"The mongodb.Db instance, set when the connection is openedThe MongoClient instance this connection uses to talk to MongoDB. Mongoose automatically sets this property
when the connection is opened.A hash of the global options that are associated with this connectionHelper for `createCollection()`. Will explicitly create the given collection
with specified options. Used to create [capped collections](https://www.mongodb.com/docs/manual/core/capped-collections/)
and [views](https://www.mongodb.com/docs/manual/core/views/) from mongoose.

Options are passed down without modification to the [MongoDB driver's `createCollection()` function](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#createCollection)The collection to create
see [MongoDB driver docs](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#createCollection)
_Requires MongoDB Server 8.0 or greater_. Executes bulk write operations across multiple models in a single operation.
You must specify the `model` for each operation: Mongoose will use `model` for casting and validation, as well as
determining which collection to apply the operation to.

#### Example:
const Test = mongoose.model('Test', new Schema({ name: String }));

await db.bulkWrite([
{ model: Test, name: 'insertOne', document: { name: 'test1' } }, // Can specify model as a Model class...
{ model: 'Test', name: 'insertOne', document: { name: 'test2' } } // or as a model name
], { ordered: false });If false, perform unordered operations. If true, perform ordered operations.
options.orderedThe session to use for the operation.
Session=SessionMongoDB https://www.mongodb.com/docs/manual/reference/command/bulkWrite/#mongodb-dbcommand-dbcmd.bulkWrite
Calls `createCollection()` on a models in a series.When true, will continue to create collections and create a new error class for the collections that errored.
A convenience wrapper for `connection.client.withSession()`.

#### Example:

await conn.withSession(async session => {
const doc = await TestModel.findOne().session(session);
});called with 1 argument: a `ClientSession` instance
resolves to the return value of the executor function
_Requires MongoDB >= 3.6.0._ Starts a [MongoDB session](https://www.mongodb.com/docs/manual/release-notes/3.6/#client-sessions)
for benefits like causal consistency, [retryable writes](https://www.mongodb.com/docs/manual/core/retryable-writes/),
and [transactions](https://thecodebarbarian.com/a-node-js-perspective-on-mongodb-4-transactions.html).

#### Example:

const session = await conn.startSession();
let doc = await Person.findOne({ name: 'Ned Stark' }, null, { session });
await doc.deleteOne();
// `doc` will always be null, even if reading from a replica set
// secondary. Without causal consistency, it is possible to
// get a doc back from the below query if the query reads from a
// secondary that is experiencing replication lag.
doc = await Person.findOne({ name: 'Ned Stark' }, null, { session, readPreference: 'secondary' });see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html#startSession)
set to false to disable causal consistency
options.causalConsistencypromise that resolves to a MongoDB driver `ClientSession`
Promise.<ClientSession>_Requires MongoDB >= 3.6.0._ Executes the wrapped async function
in a transaction. Mongoose will commit the transaction if the
async function executes successfully and attempt to retry if
there was a retriable error.

Calls the MongoDB driver's [`session.withTransaction()`](https://mongodb.github.io/node-mongodb-native/4.9/classes/ClientSession.html#withTransaction),
but also handles resetting Mongoose document state as shown below.

#### Example:

const doc = new Person({ name: 'Will Riker' });
await db.transaction(async function setRank(session) {
doc.rank = 'Captain';
await doc.save({ session });
doc.isNew; // false

// Throw an error to abort the transaction
throw new Error('Oops!');
},{ readPreference: 'primary' }).catch(() => {});

// true, `transaction()` reset the document's state because the
// transaction was aborted.
doc.isNew;Function to execute in a transaction
Optional settings for the transaction
mongodb.TransactionOptions=mongodb.TransactionOptionsTransactionOptionspromise that is fulfilled if Mongoose successfully committed the transaction, or rejects if the transaction was aborted or if Mongoose failed to commit the transaction. If fulfilled, the promise resolves to a MongoDB command result.
Promise.<Any>Helper for `dropCollection()`. Will delete the given collection, including
all documents and indexes.The collection to delete
Waits for connection to be established, so the connection has a `client`if set, don't put a timeout on the operation. Used internally so `mongoose.model()` doesn't leave open handles.
Promise
Helper for MongoDB Node driver's `listCollections()`.
Returns an array of collection objects.Promise.<Array.<Collection>>Array.<Collection>Helper for MongoDB Node driver's `listDatabases()`.
Returns an object with a `databases` property that contains an
array of database objects.

#### Example:
const { databases } = await mongoose.connection.listDatabases();
databases; // [{ name: 'mongoose_test', sizeOnDisk: 0, empty: false }]Promise.<{databases: Array.<{name: string}>}>{databases: Array.<{name: string}>}databasesArray.<{name: string}>Helper for `dropDatabase()`. Deletes the given database, including all
collections, documents, and indexes.

#### Example:

const conn = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
// Deletes the entire 'mydb' database
await conn.dropDatabase();error

Graceful error handling, passes error to callback
if available, else emits error on the connection.optional
emits@emits"error" Emits the `error` event with the given `err`, unless a callback is specified
Returns a rejected Promise if no `callback` is given.
(Promise|null)Called when the connection is opened"open"
Opens the connection with a URI using `MongoClient.connect()`.The URI to connect with.
Passed on to [`MongoClient.connect`](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html#connect-1)
Mongoose specific option. Set to false to [disable buffering](https://mongoosejs.com/docs/faq.html#callback_never_executes) on all models associated with this connection.
options.bufferCommandsMongoose specific option. If `bufferCommands` is true, Mongoose will throw an error after `bufferTimeoutMS` if the operation is still buffered.
options.bufferTimeoutMSThe name of the database we want to use. If not provided, use database name from connection string.
options.dbNameusername for authentication, equivalent to `options.auth.user`. Maintained for backwards compatibility.
options.userpassword for authentication, equivalent to `options.auth.password`. Maintained for backwards compatibility.
options.passThe maximum number of sockets the MongoDB driver will keep open for this connection. Keep in mind that MongoDB only allows one operation per socket at a time, so you may want to increase this if you find you have a few slow queries that are blocking faster queries from proceeding. See [Slow Trains in MongoDB and Node.js](https://thecodebarbarian.com/slow-trains-in-mongodb-and-nodejs).
options.maxPoolSizeThe minimum number of sockets the MongoDB driver will keep open for this connection. Keep in mind that MongoDB only allows one operation per socket at a time, so you may want to increase this if you find you have a few slow queries that are blocking faster queries from proceeding. See [Slow Trains in MongoDB and Node.js](https://thecodebarbarian.com/slow-trains-in-mongodb-and-nodejs).
options.minPoolSizeIf `useUnifiedTopology = true`, the MongoDB driver will try to find a server to send any given operation to, and keep retrying for `serverSelectionTimeoutMS` milliseconds before erroring out. If not set, the MongoDB driver defaults to using `30000` (30 seconds).
options.serverSelectionTimeoutMSIf `useUnifiedTopology = true`, the MongoDB driver sends a heartbeat every `heartbeatFrequencyMS` to check on the status of the connection. A heartbeat is subject to `serverSelectionTimeoutMS`, so the MongoDB driver will retry failed heartbeats for up to 30 seconds by default. Mongoose only emits a `'disconnected'` event after a heartbeat has failed, so you may want to decrease this setting to reduce the time between when your server goes down and when Mongoose emits `'disconnected'`. We recommend you do **not** set this setting below 1000, too many heartbeats can lead to performance degradation.
options.heartbeatFrequencyMSMongoose-specific option. Set to false to disable automatic index creation for all models associated with this connection.
options.autoIndexSets the [underlying driver's promise library](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/MongoClientOptions.html#promiseLibrary).
options.promiseLibraryClass=How long the MongoDB driver will wait before killing a socket due to inactivity _after initial connection_. A socket may be inactive because of either no activity or a long-running operation. `socketTimeoutMS` defaults to 0, which means Node.js will not time out the socket due to inactivity. This option is passed to [Node.js `socket#setTimeout()` function](https://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback) after the MongoDB driver successfully completes.
options.socketTimeoutMSPassed transparently to [Node.js' `dns.lookup()`](https://nodejs.org/api/dns.html#dns_dns_lookup_hostname_options_callback) function. May be either `0, `4`, or `6`. `4` means use IPv4 only, `6` means use IPv6 only, `0` means try both.
options.familySet to `true` to make Mongoose automatically call `createCollection()` on every model created on this connection.
options.autoCreatePromise.<Connection>Listen to events in the ConnectionThe event to listen on
Connection#readyState https://mongoosejs.com/docs/api/connection.html#Connection.prototype.readyState
*Listen to a event once in the ConnectionDestroy the connection. Similar to [`.close`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.close()),
but also removes the connection from Mongoose's `connections` list and prevents the
connection from ever being re-opened.Closes the connectionHandles closing the connectionCalled when the connection closes"close"
Retrieves a raw collection instance, creating it if not cached.
This method returns a thin wrapper around a [MongoDB Node.js driver collection]([MongoDB Node.js driver collection](https://mongodb.github.io/node-mongodb-native/Next/classes/Collection.html)).
Using a Collection bypasses Mongoose middleware, validation, and casting,
letting you use [MongoDB Node.js driver](https://mongodb.github.io/node-mongodb-native/) functionality directly.of the collection
collection instance
Declares a plugin executed on all schemas you pass to `conn.model()`

Equivalent to calling `.plugin(fn)` on each schema you create.

#### Example:

const db = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
db.plugin(() => console.log('Applied'));
db.plugins.length; // 1

db.model('Test', new Schema({})); // Prints "Applied"plugin callback
optional options
plugins https://mongoosejs.com/docs/plugins.html
Defines or retrieves a model.

const mongoose = require('mongoose');
const db = mongoose.createConnection(..);
db.model('Venue', new Schema(..));
const Ticket = db.model('Ticket', new Schema(..));
const Venue = db.model('Venue');

_When no `collection` argument is passed, Mongoose produces a collection name by passing the model `name` to the `utils.toCollectionName` method. This method pluralizes the name. If you don't like this behavior, either pass a collection name or set your schemas collection name option._

#### Example:

const schema = new Schema({ name: String }, { collection: 'actor' });

// or

schema.set('collection', 'actor');

// or

const collectionName = 'actor'
const M = conn.model('Actor', schema, collectionName)the model name or class extending Model
(String|Function)a schema. necessary when defining a model
Schema=name of mongodb collection (optional) if not given it will be induced from model name
If true, overwrite existing models with the same name to avoid `OverwriteModelError`
options.overwriteModelsMongoose#model https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()
The compiled model
Removes the model named `name` from this connection, if it exists. You can
use this function to clean up any models you created in your tests to
prevent OverwriteModelErrors.

#### Example:

conn.model('User', new Schema({ name: String }));
console.log(conn.model('User')); // Model object
conn.deleteModel('User');
console.log(conn.model('User')); // undefined

// Usually useful in a Mocha `afterEach()` hook
afterEach(function() {
conn.deleteModel(/.+/); // Delete every model
});if string, the name of the model to remove. If regexp, removes all models whose name matches the regexp.
(String|RegExp)Watches the entire underlying database for changes. Similar to
[`Model.watch()`](https://mongoosejs.com/docs/api/model.html#Model.watch()).

This function does **not** trigger any middleware. In particular, it
does **not** trigger aggregate middleware.

The ChangeStream object is an event emitter that emits the following events:

- 'change': A change occurred, see below example
- 'error': An unrecoverable error occurred. In particular, change streams currently error out if they lose connection to the replica set primary. Follow [this GitHub issue](https://github.com/Automattic/mongoose/issues/6799) for updates.
- 'end': Emitted if the underlying stream is closed
- 'close': Emitted if the underlying stream is closed

#### Example:

const User = conn.model('User', new Schema({ name: String }));

const changeStream = conn.watch().on('change', data => console.log(data));

// Triggers a 'change' event on the change stream.
await User.create({ name: 'test' });passed without changes to [the MongoDB driver's `Db#watch()` function](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#watch)
mongoose-specific change stream wrapper, inherits from EventEmitterReturns a promise that resolves when this connection
successfully connects to MongoDB, or rejects if this connection failed
to connect.

#### Example:

const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/test').
asPromise();
conn.readyState; // 1, means Mongoose is connectedReturns an array of model names created on this connection.Returns if the connection requires authentication after it is opened. Generally if a
username and password are both provided than authentication is needed, but in some cases a
password is not required.private
true if the connection should be authenticated after it is opened, otherwise false.Returns a boolean value that specifies if the current authentication mechanism needs a
password to authenticate according to the auth objects passed into the openUri methods.true if the authentication mechanism specified in the options object requires
a password, otherwise false.Returns a boolean value that specifies if the provided objects object provides enough
data to authenticate with. Generally this is true if the username and password are both specified
but in some authentication methods, a password is not required for authentication so only a username
is required.the options object passed into the openUri methods.
true if the provided options object provides enough data to authenticate with,
otherwise false.Returns the [MongoDB driver `MongoClient`](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html) instance
that this connection uses to talk to MongoDB.

#### Example:

const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/test').
asPromise();

conn.getClient(); // MongoClient { ... }MongoClientSet the [MongoDB driver `MongoClient`](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html) instance
that this connection uses to talk to MongoDB. This is useful if you already have a MongoClient instance, and want to
reuse it.

#### Example:

const client = await mongodb.MongoClient.connect('mongodb://127.0.0.1:27017/test');

const conn = mongoose.createConnection().setClient(client);

conn.getClient(); // MongoClient { ... }
conn.readyState; // 1, means 'CONNECTED'The Client to set to be used.
MongClientSyncs all the indexes for the models registered with this connection.`false` by default. If set to `true`, mongoose will not throw an error if one model syncing failed, and will return an object where the keys are the names of the models, and the values are the results/errors for each model.
options.continueOnErrorReturns a Promise, when the Promise resolves the value is a list of the dropped indexes.Promise.<Object>Switches to a different database using the same [connection pool](https://mongoosejs.com/docs/api/connectionshtml#connection_pools).

Returns a new connection object, with the new db.

#### Example:

// Connect to `initialdb` first
const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/initialdb').asPromise();

// Creates an un-cached connection to `mydb`
const db = conn.useDb('mydb');
// Creates a cached connection to `mydb2`. All calls to `conn.useDb('mydb2', { useCache: true })` will return the same
// connection instance as opposed to creating a new connection instance
const db2 = conn.useDb('mydb2', { useCache: true });useDbThe database name
If true, cache results so calling `useDb()` multiple times with the same name only creates 1 connection object.
options.useCacheIf true, the connection object will not make the db listen to events on the original connection. See [issue #9961](https://github.com/Automattic/mongoose/issues/9961).
options.noListenerNew Connection Object
Runs a [db-level aggregate()](https://www.mongodb.com/docs/manual/reference/method/db.aggregate/) on this connection's underlying `db`If true, make the Aggregate resolve to a Mongoose AggregationCursor rather than an array
options.cursorAggregation wrapper
Removes the database connection with the given name created with with `useDb()`.

Throws an error if the database connection was not found.

#### Example:

// Connect to `initialdb` first
const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/initialdb').asPromise();

// Creates an un-cached connection to `mydb`
const db = conn.useDb('mydb');

// Closes `db`, and removes `db` from `conn.relatedDbs` and `conn.otherDbs`
await conn.removeDb('mydb');removeDbconst C ... ream');ChangeS ... tream')require ... tream')'./curs ... Stream'./cursor/changeStream/cursor/changeStreamMongoos ... teError./error/bulkWriteError/error/bulkWriteErrorconst S ... tion');ServerS ... ction')require ... ction')'./erro ... ection'./error/serverSelection/error/serverSelectionconst S ... exes');SyncInd ... dexes')require ... dexes')'./erro ... ndexes'./error/syncIndexes/error/syncIndexesconst a ... gins');applyPl ... ugins')require ... ugins')'./help ... lugins'./helpers/schema/applyPlugins/helpers/schema/applyPluginsconst d ... iver');driver  ... river')const g ... sult');getDefa ... esult')getDefa ... eResultrequire ... esult')'./help ... Result'./helpers/getDefaultBulkwriteResult/helpers/getDefaultBulkwriteResultconst C ... rror');CreateC ... Error')CreateC ... nsError'./erro ... sError'./error/createCollectionsError/error/createCollectionsErrorconst c ... rite');castBul ... Write')require ... Write')'./help ... kWrite'./helpers/model/castBulkWrite/helpers/model/castBulkWriteconst i ... mise');isPromi ... omise')require ... omise')'./help ... romise'./helpers/isPromise/helpers/isPromiseconst d ... sult');decorat ... esult')decorat ... eResult./helpers/model/decorateBulkWriteResult/helpers/model/decorateBulkWriteResultconst a ... Symbol;arrayAt ... sSymbolrequire ... sSymbolconst s ... uments;session ... cumentsrequire ... cumentsconst n ... 509'\n];noPassw ... X509'\n]noPassw ... hanisms[\n  'MONGODB-X509'\n]MONGODB-X509functio ... = [];\n}{\n  thi ... = [];\n}this.base = base;this.base = basethis.basethis.co ... s = {};this.co ... ns = {}this.collectionsthis.models = {};this.models = {}this.modelsthis.config = {};this.config = {}this.configthis.re ...  false;this.replica = falsethis.replicathis.options = null;this.options = nullthis.otherDbs = [];this.otherDbs = []this.otherDbsthis.re ... s = {};this.relatedDbs = {}this.relatedDbsthis.st ... STATES;this.states = STATESthis.statesthis._r ... nected;this._r ... nnectedthis._readyStateSTATES.disconnectedthis._c ...  false;this._c ... = falsethis._closeCalledthis._h ...  false;this._h ... = falsethis._hasOpenedthis.plugins = [];this.plugins = []this.pluginsif (typ ... Id;\n  }typeof  ... .lengthtypeof base!base.c ... .lengthbase.co ... .lengthbase.connections{\n    t ...  0;\n  }this.id = 0;this.id = 0this.id{\n    t ... Id;\n  }this.id ... tionId;this.id ... ctionIdbase.ne ... ctionIdthis._queue = [];this._queue = []this._queueObject. ... otype);Connection.prototypeEventEm ... ototypeObject. ...   }\n});Object. ... \n  }\n}){\n  get ... }\n  }\n}get: fu ... te;\n  }functio ... te;\n  }{\n    / ... te;\n  }if (\n   ... ;\n    }this._r ... yMS * 2this._r ... number'this._r ... lanced'this._r ... != nullthis._l ... != nullthis._l ... tbeatAtthis.cl ... lanced'this.cl ... n?.typethis.cl ... riptionthis.cl ... logy?.sthis.cl ... opologythis.clientLoadBalancedtypeof  ... uencyMSthis.cl ... uencyMSDate.no ... yMS * 2Date.no ... tbeatAtthis.cl ... yMS * 2this.cl ... ology.sthis.client.topologyreturn  ... nected;return  ... yState;set: fu ...   }\n  }if (!(v ... ;\n    }!(val in STATES)(val in STATES)val in STATESthrow n ... + val);new Err ...  + val)'Invali ... ' + val'Invali ... tate: 'Invalid connection state: this._r ... !== valthis._r ...  = val;this._r ... e = valconst dbdb.readyState = val;db.readyState = valdb.readyStateif (STA ...       }STATES. ... === valthis._h ... = true;this._h ...  = truethis.em ... [val]);this.em ... S[val])this.emitSTATES[val]Connect ... ey);\n};Connect ... key);\n}Connect ... ype.getfunctio ... key);\n}{\n  if  ... key);\n}if (thi ... y];\n  }this.co ... ty(key)this.co ... roperty{\n    r ... y];\n  }return  ... g[key];this.config[key]return  ... , key);get(thi ... s, key)Connect ... val;\n};Connect ...  val;\n}Connect ... ype.setfunctio ...  val;\n}{\n  if  ...  val;\n}if (thi ... al;\n  }{\n    t ... al;\n  }this.co ...  = val;this.co ... ] = valthis.op ...  = val;this.op ... ] = valConnect ... ctions;Connect ... ectionsConnect ... e.name;Connect ... pe.nameConnect ... models;Connect ... .modelsConnect ... ype.id;Connect ... type.id{\n  con ...  true\n}configurable: falseenumerable: truewritable: trueConnect ... ype.db;Connect ... type.dbConnect ... client;Connect ... .clientConnect ... config;Connect ... .configConnect ... ns);\n};Connect ... ons);\n}Connect ... lectionasync f ... ons);\n}{\n  if  ... ons);\n}typeof  ... ction')typeof options(argume ... ction')argumen ... nction'argumen ... th >= 3typeof arguments[2]arguments[2]'Connec ... llback'Connection.prototype.createCollection() no longer accepts a callbackawait t ... nect();await t ... nnect()this._w ... nnect()this._waitForConnectreturn  ... tions);this.db ... ptions)this.db ... lectionConnect ... res;\n};Connect ...  res;\n}Connect ... lkWriteasync f ...  res;\n}{\n  awa ...  res;\n}const o ... rdered;ordered ... orderedoptions ... orderedoptions ... == nullthis.ba ... Store()this.ba ... etStorethis.ba ... Storageif ((!o ...  };\n  }(!optio ... != null(!optio ... sion'))!options{\n    o ...  };\n  }options ... sion };options ... ssion }{ ...op ... ssion }session ... sessionconst n ... .now();now = t ... e.now()this.base.now()this.base.nowlet res = null;res = nullif (ord ...   }\n  }const o ... d = [];opsToSend = []for (co ... ;\n    }const optypeof  ... Symbol]typeof op.modelop.model!op.mod ... Symbol]op.mode ... Symbol]throw n ... ions');new Mon ... tions')'Must s ... ations'Must specify model in Connection.prototype.bulkWrite() operationsMust specify model in Connection operationsconst M ... model);Model = ... .model)op.mode ... .model)this.model(op.model)if (op. ...       }op.name == nullop.namethrow n ... te()');new Mon ... ite()')'Must s ... rite()'Must specify operation name in Connection.prototype.bulkWrite()Must specify operation name in Connectionif (!ca ...       }!castBu ... p.name)castBul ... p.name)castBul ... ropertycastBulkWrite.castthrow n ... ame}`);new Mon ... name}`)`Unreco ... .name}`Unrecog ... n name await c ... , now);await c ... s, now)castBul ... s, now)castBul ... p.name]opsToSe ... e() });opsToSe ... ce() })opsToSend.push{ ...op ... ace() }...opnamespa ... space()Model.namespace()Model.namespaceres = a ... tions);res = a ... ptions)this.cl ... ptions)this.cl ... lkWriteconst validOps = [];validOps = []const v ... s = [];validOpIndexes = []let val ... s = [];validat ... rs = []const a ... s = [];asyncVa ... ns = []const results = [];results = []i < ops.lengthops.lengthconst op = ops[i];op = ops[i]ops[i]const e ... ions');error = ... tions')validat ... ror });validat ... rror })validat ... rs.push{ index ... error }index: iresults[i] = error;results[i] = errorresults[i]let Model;Model = ... model);catch ( ...       }const e ... te()');error = ... ite()')const e ... ame}`);error = ... name}`)let may ... = null;maybePromise = nullmaybePr ... , now);maybePr ... s, now)if (isP ...       }isPromi ... romise)asyncVa ...      );asyncVa ...       )asyncVa ... ns.pushmaybePr ...       )maybePromise.then() => { ...       }validOp ... e() });validOp ... ce() })validOps.pushvalidOp ... ush(i);validOp ... push(i)validOpIndexes.pushif (asy ... ;\n    }asyncVa ... gth > 0asyncVa ... .lengthawait P ... tions);await P ... ations)Promise ... ations)validat ... error);validat ... .error)validat ...     mapvalidat ... .index)validat ...    sort(v1, v2 ... 2.indexv1.index - v2.indexv1.indexv2.indexv => v.errorv.errorvalidOp ... h === 0validOps.lengthoptions ... .lengthoptions ... onErrorthrowOn ... onErrorvalidat ... .lengththrow n ...      );new Mon ...       )const B ... Result;BulkWri ... eResultthis.ba ... eResultthis.ba ... r.get()this.base.driver.getthis.base.driverconst r ... false);res = n ...  false)new Bul ...  false)getDefa ... esult()return  ... sults);decorat ... esults)let error;[res, e ... err]));[res, e ...  err]))[res, error]await t ...  err]))this.cl ...  err]))this.cl ...   catchthis.cl ... null]))this.cl ...    thenres => ([res, null])([res, null])[res, null]err => ([null, err])([null, err])[null, err]i < val ... .lengthvalidOp ... .lengthresults ... = null;results ...  = nullresults ... xes[i]]validOpIndexes[i]if (err ... }\n    }validat ... gth > 0decorat ... sults);error.m ...  || {};error.m ... e || {}error.mongooseerror.mongoose || {}error.m ... Errors;error.m ... nErrorsif (val ... }\n    }return res;Connect ... ult;\n};Connect ... sult;\n}{\n  con ... sult;\n}const result = {};result = {}const e ...  = { };errorsMap = { }const { ... ptions;{ conti ... options{ continueOnError }delete  ... nError;delete  ... OnErroroptions ... OnErrorObject. ... models)const modeltry {\n  ... }\n    }result[ ... on({});result[ ... ion({})result[ ... elName]await m ... ion({})model.c ... ion({})model.c ... lectioncatch ( ... }\n    }if (!co ...       }!continueOnErrorerrorsM ...  = err;errorsM ... ] = errerrorsM ... elName]result[ ...  = err;result[ ... ] = errif (!co ... or;\n  }!contin ... .lengthObject. ... orsMap){\n    c ... or;\n  }const m ... (', ');message ... n(', ')Object. ... n(', ')Object. ... `).joinObject. ... sage}`)Object. ... ap).map([model ... ssage}`[modelName, err]`${mode ... ssage}`err.message, const c ... rsMap);createC ... orsMap)createC ... nsErrornew Cre ... orsMap)throw c ... sError;Connect ... or);\n};Connect ... tor);\n}Connect ... Sessionasync f ... tor);\n}{\n  if  ... tor);\n}throw n ... tion');new Err ... ction')'Please ... nction'Please provide an executor functionreturn  ... cutor);await t ... ecutor)this.cl ... ecutor)this.cl ... SessionConnect ... ion;\n};Connect ... sion;\n}async f ... sion;\n}{\n  if  ... sion;\n}argumen ... th >= 2Connection.prototype.startSession() no longer accepts a callbackconst s ... tions);session ... ptions)return session;Connect ...  });\n};Connect ...   });\n}Connect ... saction{\n  ret ...   });\n}return  ... ;\n  });this.st ... );\n  })this.st ... ().thenthis.startSession()this.startSessionsession ... });\n  }session ...  Map();session ... w Map()session ... uments]session ...      })session ... finallysession ...   catchsession ...    thensession ... saction() => _ ... s.base)_wrapUs ... s.base)res =>  ...       }delete  ... ments];delete  ... uments]err =>  ...       }session ... => {});session ...  => {})session ... ).catchsession.endSession()session.endSession() => {}try {\n  ... rr;\n  }{\n    c ... es;\n  }const r ...     });res = m ...      })mongoos ...      })mongoos ... == nullmongoos ... Storageawait fn(session)fn(session)await n ...      })new Pro ...      })resolve ...       }mongoos ...      );mongoos ...       )mongoos ... age.run{ session }() => r ... ssion))resolve(fn(session))catch ( ... rr;\n  }{\n    _ ... rr;\n  }_resetS ... ssion);_resetS ... ession)_resetS ... cuments{\n  for ... }\n  }\n}session ... .keys()session ... s].keysconst s ... t(doc);state = ... et(doc)session ... et(doc)session ... ts].getstate.h ... isNew')state.hasOwnPropertydoc.$is ... .isNew;doc.$is ... e.isNewdoc.$isNewstate.isNewstate.h ... onKey')doc.set ... onKey);doc.set ... ionKey)doc.setdoc.sch ... sionKeydoc.schema.optionsdoc.schemastate.versionKeystate.m ... == nullstate.m ... gth > 0state.m ... .lengthstate.modifiedPathsdoc.$__ ... == nulldoc.$__ ... .modifydoc.$__ ... .statesdoc.$__.activePathsdoc.$__doc.$__ ... y = {};doc.$__ ... fy = {}const pathconst c ... [path];current ... s[path]doc.$__ ... s[path]doc.$__ ... s.pathsif (cur ...       }currentState != nulldelete  ... [path];delete  ... ][path]doc.$__ ... ][path]doc.$__ ... tState]doc.$__ ... odify';doc.$__ ... modify'doc.$__ ... = true;doc.$__ ...  = truedoc.$__ ... y[path]state.atomics.keys()state.atomics.keysstate.atomicsconst v ... (path);val = d ... e(path)doc.$__ ... e(path)doc.$__getValueval[arr ... (path);val[arr ... t(path)val[arr ... Symbol]state.a ... t(path)state.atomics.getConnect ... on);\n};Connect ... ion);\n}async f ... ion);\n}{\n  if  ... ion);\n}Connection.prototype.dropCollection() no longer accepts a callbackreturn  ... ction);this.db ... ection)Connect ... \n  }\n};Connect ... }\n  }\n}Connect ... Connectasync f ... }\n  }\n}if ((th ...   }\n  }(this.r ... mands()(this.r ... nected)this.re ... nnectedthis.re ... nectingthis.readyStateSTATES.connectingthis._s ... mands()this._s ... ommandsconst b ... utMS();bufferT ... outMS()this._g ... outMS()this._g ... meoutMSlet timeout = null;timeout = nulllet tim ...  false;timedOut = falseconst q ... t = {};queueElement = {}const w ...     });waitFor ... \n    })waitFor ... Promiseresolve ... ;\n    }queueEl ... esolve;queueEl ... resolvequeueElement.fnthis._q ... ement);this._q ... lement)this._queue.pushif (noT ... ;\n    }await w ... romise;await w ... Promiseawait P ...     ]);await P ...      ])Promise ...      ])timeout ...      );timeout ...       )setTime ...       )timedOut = true;timedOut = trueif (tim ... ;\n    }const i ... ement);index = ... lement)this._queue.indexOfif (ind ...       }index !== -1this._q ... ex, 1);this._q ... dex, 1)this._queue.spliceconst m ... + 'ms';message ...  + 'ms''Connec ...  + 'ms''Connec ... meoutMS'Connec ... after 'Connection operation buffering timed out after throw n ... ssage);new Mon ... essage)timeout != nullclearTi ... meout);clearTi ... imeout)Connect ... 000;\n};Connect ... 0000;\n}Connect ... meoutMSfunctio ... 0000;\n}{\n  if  ... 0000;\n}if (thi ... MS;\n  }this.co ... != nullthis.co ... meoutMSif (thi ... ');\n  }this.ba ... != nullthis.base != nullthis.ba ... outMS')this.base.getreturn  ... utMS');return 10000;Connect ... y();\n};Connect ... ay();\n}async f ... ay();\n}{\n  awa ... ay();\n}const c ... ions();cursor  ... tions()this.db ... tions()this.db ... ectionsConnect ... r');\n};Connect ... er');\n}Connect ... tabasesasync f ... er');\n}{\n  //  ... er');\n}new Mon ... river')'listDa ... driver'listDatabases() not implemented by driver not implemented by driverConnect ... e();\n};Connect ... se();\n}Connect ... atabaseasync f ... se();\n}{\n  if  ... se();\n}argumen ... th >= 1Connection.prototype.dropDatabase() no longer accepts a callbackfor (co ... it;\n  }{\n    d ... it;\n  }delete model.$init;delete model.$initmodel.$initreturn  ... base();this.db ... abase()this.db.dropDatabaseConnect ... rue;\n};Connect ... true;\n}Connect ... ommands{\n  if  ... true;\n}if (thi ... ds;\n  }this.ba ... mands')return  ... ands');Connect ... rr);\n};Connect ... err);\n}Connect ... e.errorfunctio ... err);\n}{\n  if  ... err);\n}if (cal ... ll;\n  }{\n    c ... ll;\n  }callback(err);callback(err)if (thi ... r);\n  }this.li ... gth > 0this.li ... .lengththis.li ... error')this.listeners{\n    t ... r);\n  }this.em ... , err);this.em ... ', err)return  ... t(err);Promise.reject(err)Connect ... n');\n};Connect ... en');\n}Connect ... .onOpenfunctio ... en');\n}{\n  thi ... en');\n}this.re ... nected;for (co ... s);\n  }const d{\n    d ... s);\n  }d.fn.ap ... .args);d.fn.ap ... d.args)d.fn.applyd.fnd.ctxd.argsconst iif (uti ... ;\n    }utils.o ... ons, i)utils.o ... ropertyutils.objectthis.co ... Open();this.co ... nOpen()this.co ... .onOpenthis.collections[i]this.emit('open');this.emit('open')Connect ... his;\n};Connect ... this;\n}Connect ... openUriasync f ... this;\n}if (thi ...   }\n  }this._c ... === urithis._c ... nStringlet _fi ...  false;_fireAn ... = falseif (opt ... et;\n  }options ... options'_fireA ... options{\n    _ ... et;\n  }_fireAn ... Forget;_fireAn ... dForgetoptions ... dForgetdelete  ... Forget;delete  ... dForget{\n    _ ... s);\n  }_valida ... ments);_valida ... uments)_validateArgs.apply{\n    i ... rr;\n  }if (_fi ... ;\n    }this.$i ... t(err);this.$i ... ct(err)this.$i ... nectionthis.$i ...     });this.$i ... \n    })this.cr ... \n    })this.cr ...   catchthis.cr ... > this)this.cr ...    thenthis.cr ... ptions)this.createClient() => thiserr =>  ... ;\n    }if (thi ...       }immedia ...  err));immedia ... , err))() => t ... ', err)for (co ... });\n  }model.i ... () {});model.i ... p() {})model.init().catchmodel.init()model.initfunctio ... op() {}if (_fi ... is;\n  }{\n    r ... is;\n  }{\n    a ... on;\n  }await t ... ection;await t ... nectionthrow _ ... s(err);_handle ... rs(err)_handle ... nErrorsConnect ... ck);\n};Connect ... ack);\n}Connect ... type.on{\n  if  ... ack);\n}if (eve ... });\n  }event = ... nectionevent === 'error'{\n    t ... });\n  }this.$i ... => {});this.$i ...  => {})this.$i ... n.catchEventEm ... llback)EventEm ... on.callEventEm ... type.onConnect ... pe.onceEventEm ... ce.callEventEm ... pe.oncecallback == nullConnection.prototype.openUri() no longer accepts a callbacktypeof callbackfunctio ...  err;\n}{\n  if  ...  err;\n}if (err ... r);\n  }err?.na ... nError'err?.name'MongoS ... nError'MongoServerSelectionError{\n    c ... r);\n  }const o ...  = err;originalError = errerr = n ... rror();err = n ... Error()new Ser ... Error()err.ass ... Error);err.ass ... lError)err.assimilateErrorreturn err;Connect ... ue);\n};Connect ... rue);\n}Connect ... destroyasync f ... rue);\n}{\n  if  ... rue);\n}typeof forceargumen ... h === 2Connection.prototype.destroy() no longer accepts a callbackif (for ... ce;\n  }force ! ... object'force != null{\n    t ... ce;\n  }this.$w ... .force;this.$w ... e.forcethis.$wasForceClosed!!force.force!force.forceforce.forcethis.$w ... !force;this.$w ... !!force!!force!forcereturn  ...  true);this._c ... , true)this._closeConnect ... se);\n};Connect ... lse);\n}Connect ... e.closeasync f ... lse);\n}Connection.prototype.close() no longer accepts a callbackif (thi ... ll;\n  }{\n    t ... ll;\n  }this._l ... = null;this._l ...  = null{\n    / ... it;\n  }return  ... false);this._c ...  false)Connect ... ._closeconst c ... Called;closeCa ... eCalledthis._c ... = true;this._c ...  = truethis._d ... estroy;this._d ... destroythis._destroyCalledif (thi ... oy;\n  }this.client != null{\n    t ... oy;\n  }this.cl ... = true;this.cl ...  = truethis.cl ... eCalledthis.cl ... estroy;this.cl ... destroythis.cl ... yCalledconst conn = this;conn = thisswitch  ... });\n  }case ST ...  break;if (des ...       }destroy ...  !== -1this.ba ...  !== -1this.ba ... f(conn)this.ba ... indexOfthis.ba ... ectionsthis.ba ... n), 1);this.ba ... nn), 1)this.ba ... .spliceif (!cl ...       }!closeCalledawait t ... force);await t ... (force)this.doClose(force)this.doClosethis.onClose(force);this.onClose(force)this.onClosethis.re ... ecting;STATES.disconnecting_this.b ...  !== -1_this.b ... f(conn)_this.b ... indexOf_this.b ... ections_this.basecase ST ...     });(resolv ...       }const _ ...      };_rerunC ...       }this.re ... Close);this.re ... nClose)this.removeListenerthis.de ... eject);this.de ... reject)this.de ... e).thenthis.destroy(force)this.destroythis.cl ... eject);this.cl ... reject)this.cl ... e).thenthis.close(force)this.closethis.on ... Close);this.on ... nClose)this.oncethis.on ...     });this.on ...      })Connect ... doClose'Connec ... driver'Connection#doClose unimplemented by driverConnect ... ;\n  }\n}Connect ... onClosethis.co ... force);this.co ... (force)this.co ... onClosethis.em ... force);this.em ...  force)const w ...  force;wasForc ... : forcetypeof  ... : forceforce !== nullthis._d ... rue });this._d ... true })db.dest ... true })db.destroy{ force ...  true }force:  ... eClosedskipClo ... t: truedb.clos ... true })db.closeConnect ... me];\n};Connect ... ame];\n}functio ... ame];\n}{\n  con ... ame];\n}const d ... ex\n  };default ... dex\n  }{\n    a ... dex\n  }autoInd ... toIndexthis.co ... toIndexthis.ba ... toIndexthis.base.optionsautoCre ... oCreatethis.co ... oCreatethis.ba ... oCreateautoSea ... chIndexthis.co ... chIndexthis.ba ... chIndexoptions ...  : {});options ... ) : {})Object. ... ) : {})options ... s) : {}clone(options)options ... Closed;options ... eClosedconst C ... ection;Collect ... lectionthis.ba ... lectionthis.ba ... _driverthis.base.__driverdriver. ... lectiondriver.get()driver.getif (!(n ... s);\n  }!(name  ... ctions)(name i ... ctions)name in ... ections{\n    t ... s);\n  }this.co ... tions);this.co ... s[name]new Col ... ptions)return  ... [name];Connect ... .pluginthis.pl ... opts]);this.pl ...  opts])this.plugins.push[fn, opts]Connect ... e.model{\n  if  ... ame];\n}if (!(t ... ');\n  }!(this  ... ection)(this i ... ection)this in ... nectionthrow n ... tead');new Mon ... stead')'`conne ... nstead''`conne ... , use ''`conne ...  with '`connection.model()` should not be run with '`new`. ... , use '`new`. If you are doing `new db.model(foo)(bar)`, use '`db.mo ... nstead'`db.model(foo)(bar)` instead`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead`connection` should not be run with `new` If you are doing `new db(foo)(bar)bar`, use `db` insteadlet fn;if (typ ... me;\n  }typeof name{\n    f ... me;\n  }fn = name;fn = namename = fn.name;name = fn.namefn.nametypeof schema{\n    c ... se;\n  }collection = schema;collection = schemaschema = false;schema = falseif (uti ...   }\n  }utils.i ... schema)if (!sc ... ;\n    }if (!(s ... ;\n    }!(schem ... Schema)(schema ... Schema)schema  ... .Schemathis.base.Schemaschema  ... Schema)schema. ... Schema)schema._cloneif (sch ... ');\n  }schema  ... fSchemathrow n ... POJO');new Err ...  POJO')'The 2n ... a POJO''The 2n ...  be a 'The 2nd parameter to `mongoose.model()` should be a schema or a POJOThe 2nd parameter to `mongoose.model()` should be a schema or a POJOThe 2nd parameter to `mongoose` should be a schema or a POJOconst d ... dels };default ... odels }{ cache ... odels }cache: falseoverwri ... eModelsthis.ba ... eModelsconst o ... his });opts =  ... this })Object. ... this }){ connection: this }connection: thisif (thi ... e];\n  }this.mo ... == truethis.models[name]!collectionopts.ov ... == trueopts.overwriteModels{\n    / ... e];\n  }if (sch ... ;\n    }schema  ... .schemathis.mo ... .schemathrow n ... (name);new Mon ... r(name)Mongoos ... elErrorlet model;if (sch ... el;\n  }{\n    a ... el;\n  }applyPl ... lied');applyPl ... plied')'$conne ... pplied'$connectionPluginsAppliedconnectionPluginsAppliedmodel = ...  opts);model = ... , opts)this.ba ... , opts)this.base._modelfn || name!this.models[name]this.mo ...  model;this.mo ... = modelif (thi ... ub;\n  }{\n    / ... ub;\n  }model = ... [name];model = ... s[name]model.p ... .schemamodel.prototypeconst s ... ction);sub = m ... ection)model._ ... ection)model.__subclassreturn sub;{\n    m ... el;\n  }if (!mo ... ;\n    }!modelif (!mo ... e);\n  }if (thi ... el;\n  }this == ... n.name)this == ... type.dbmodel.prototype.db(!colle ... n.name)!collec ... on.namemodel.c ... on.name{\n    / ... el;\n  }this.mo ... ction);this.mo ... ection)Connect ... teModelconst m ... (name);model = ... l(name)this.model(name)if (mod ... ;\n    }model == nullconst c ... n.name;delete  ... [name];delete  ... s[name]delete  ... nName];delete  ... onName]this.co ... onName]this.em ... model);this.em ...  model)if (nam ... ');\n  }name in ...  RegExpconst p ... = name;pattern = nameconst n ... ames();names = ... Names()this.modelNames()this.modelNamesconst nameif (pat ...       }pattern.test(name)pattern.testthis.de ... (name);this.de ... l(name)this.deleteModelthrow n ... + '"');new Err ...  + '"')'First  ... e + '"''First  ...  + name'First  ...  got "''First  ... tring 'First parameter to `deleteModel()` must be a string or regexp, got "Connect ... eam;\n};Connect ... ream;\n}Connect ... e.watchfunctio ... ream;\n}{\n  con ... ream;\n}const c ... );\n  };changeS ... });\n  }cb => { ... });\n  }immedia ...     });immedia ... \n    })() => { ... }\n    }const d ... tions);driverC ... ptions)this.db.watchcb(null ... tream);cb(null ... Stream)changeS ... ptions)new Cha ... ptions)return changeStream;Connect ... Promise{\n    a ... is;\n  }Connect ... ls);\n};Connect ... els);\n}Connect ... elNamesfunctio ... els);\n}{\n  ret ... els);\n}return  ... odels);Connect ... ());\n};Connect ... d());\n}Connect ... nticatefunctio ... d());\n}{\n  ret ... d());\n}return  ... ord());this.us ... word())this.user != nullthis.user(this.p ... word())this.pa ... sword()this.pass != nullthis.passthis.au ... sword()this.au ... asswordauthMec ... asswordConnect ... asswordif (thi ...  0;\n  }this.op ... ns.auththis.options.auth{\n    r ...  0;\n  }return  ... ) >= 0;noPassw ... m) >= 0noPassw ... hanism)noPassw ... indexOfthis.op ... chanismConnect ... ionDataoptions ... ionData(option ... word())(option ... s.user)(options)(options.user)((optio ... word())(option ... sword()(options.pass)Connect ... ent;\n};Connect ... ient;\n}Connect ... tClientfunctio ... ient;\n}{\n  ret ... ient;\n}return this.client;Connection#setClient not implemented by driverConnect ... eClientConnection#createClient not implemented by driverConnect ... Indexesresult[ ... tions);result[ ... ptions)await m ... ptions)model.s ... ptions)model.syncIndexesconst s ... rsMap);syncInd ... orsMap)new Syn ... orsMap)throw s ... sError;Connect ... STATES;Connect ...  STATESConnection.STATES/home/insomnia/repos/mongoose/lib/connectionState.js!
 * Connection states
 /*!\n *  ... tes\n */'disconnected''connected''connecting''disconnecting'uninitialized'uninitialized'99const S ... (null);STATES  ... e(null)module. ... e(null)exports ... e(null)Object.create(null)const d ... ected';disconn ... nected'const c ... ected';connect ... nected'const c ... cting';connect ... ecting'const d ... cting';disconn ... ecting'const u ... lized';uniniti ... alized'STATES[ ... nected;STATES[ ... nnectedSTATES[0]STATES[1]STATES[ ... ecting;STATES[ ... nectingSTATES[2]STATES[3]STATES[ ... alized;STATES[ ... ializedSTATES[99]STATES[ ... d] = 0;STATES[ ... ed] = 0STATES[disconnected]STATES[ ... d] = 1;STATES[ ... ed] = 1STATES[connected]STATES[ ... g] = 2;STATES[ ... ng] = 2STATES[connecting]STATES[ ... g] = 3;STATES[ ... ng] = 3STATES[ ... ecting]STATES[ ... ] = 99;STATES[ ... d] = 99STATES[ ... alized]/home/insomnia/repos/mongoose/lib/constants.js Read// Read Update// Update Delete// DeletequeryOperations'countDocuments''distinct''estimatedDocumentCount''find''findOne''findOneAndReplace''findOneAndUpdate''replaceOne''updateMany''updateOne''deleteMany''deleteOne''findOneAndDelete'queryMiddlewareFunctions'validate'aggregateMiddlewareFunctionsmodelMiddlewareFunctions'createCollection''insertMany'documentMiddlewareFunctions'remove''init'const q ... te'\n]);queryOp ... ete'\n])Object. ... ete'\n])[\n  //  ... lete'\n]countDocumentsdistinct'estima ... tCount'estimatedDocumentCountreplaceOneexports ... ations;exports ... rationsqueryMi ... ate'\n])queryMi ... nctionsqueryOp ... ate'\n])queryOp ... .concat[\n  'validate'\n]validateexports ... ctions;exports ... nctionsconst a ... ate'\n];aggrega ... gate'\n]aggrega ... nctions[\n  'aggregate'\n]const m ... any'\n];modelMi ... Many'\n]modelMi ... nctions[\n  'bu ... Many'\n]const d ... nit'\n];documen ... init'\n]documen ... nctions[\n  'va ... init'\n]/home/insomnia/repos/mongoose/lib/cursor/aggregationCursor.js/home/insomnia/repos/mongoose/lib/cursor
 * An AggregationCursor is a concurrency primitive for processing aggregation
 * results one document at a time. It is analogous to QueryCursor.
 *
 * An AggregationCursor fulfills the Node.js streams3 API,
 * in addition to several other mechanisms for loading documents from MongoDB
 * one at a time.
 *
 * Creating an AggregationCursor executes the model's pre aggregate hooks,
 * but **not** the model's post aggregate hooks.
 *
 * Unless you're an advanced user, do **not** instantiate this class directly.
 * Use [`Aggregate#cursor()`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.cursor()) instead.
 *
 * @param {Aggregate} agg
 * @inherits Readable https://nodejs.org/api/stream.html#class-streamreadable
 * @event `cursor`: Emitted when the cursor is created
 * @event `error`: Emitted when an error occurred
 * @event `data`: Emitted when the stream is flowing and the next doc is ready
 * @event `end`: Emitted when the stream is exhausted
 * @api public
  set autoDestroy=true because on node 12 it's by default false// set  ... t false gh-10902 need autoDestroy to destroy correctly and emit 'close' event// gh-1 ... ' event
* Handles error emitted from pre middleware. In particular, checks for `skipWrappedFunction`, which allows skipping
* the actual aggregation and overwriting the function's return value. Because aggregation cursors don't return a value,
* we need to make sure the user doesn't accidentally set a value in skipWrappedFunction.
*
* @param {QueryCursor} queryCursor
* @param {Error} err
* @returns
/**\n* H ... urns\n*/
 * Necessary to satisfy the Readable API
 * @method _read
 * @memberOf AggregationCursor
 * @instance
 * @api private
 
 * Registers a transform function which subsequently maps documents retrieved
 * via the streams interface or `.next()`
 *
 * #### Example:
 *
 *     // Map documents returned by `data` events
 *     Thing.
 *       find({ name: /^hello/ }).
 *       cursor().
 *       map(function (doc) {
 *        doc.foo = "bar";
 *        return doc;
 *       })
 *       on('data', function(doc) { console.log(doc.foo); });
 *
 *     // Or map documents returned by `.next()`
 *     const cursor = Thing.find({ name: /^hello/ }).
 *       cursor().
 *       map(function (doc) {
 *         doc.foo = "bar";
 *         return doc;
 *       });
 *     cursor.next(function(error, doc) {
 *       console.log(doc.foo);
 *     });
 *
 * @param {Function} fn
 * @return {AggregationCursor}
 * @memberOf AggregationCursor
 * @api public
 * @method map
 
 * Marks this cursor as errored
 * @method _markError
 * @instance
 * @memberOf AggregationCursor
 * @api private
 
 * Marks this cursor as closed. Will stop streaming and subsequent calls to
 * `next()` will error.
 *
 * @return {Promise}
 * @api public
 * @method close
 * @emits "close"
 * @see AggregationCursor.close https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.html#close
 
 * Marks this cursor as destroyed. Will stop streaming and subsequent calls to
 * `next()` will error.
 *
 * @return {this}
 * @api private
 * @method _destroy
 /**\n *  ... roy\n */
 * Get the next document from this cursor. Will return `null` when there are
 * no documents left.
 *
 * @return {Promise}
 * @api public
 * @method next
 
 * Execute `fn` for every document in the cursor. If `fn` returns a promise,
 * will wait for the promise to resolve before iterating on to the next one.
 * Returns a promise that resolves when done.
 *
 * @param {Function} fn
 * @param {Object} [options]
 * @param {Number} [options.parallel] the number of promises to execute in parallel. Defaults to 1.
 * @param {Number} [options.batchSize=null] if set, Mongoose will call `fn` with an array of at most `batchSize` documents, instead of a single document
 * @param {Boolean} [options.continueOnError=false] if true, `eachAsync()` iterates through all docs even if `fn` throws an error. If false, `eachAsync()` throws an error immediately if the given function `fn()` throws an error.
 * @return {Promise}
 * @api public
 * @method eachAsync
 /**\n *  ... ync\n */
 * Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js)
 * You do not need to call this function explicitly, the JavaScript runtime
 * will call it for you.
 *
 * #### Example:
 *
 *     // Async iterator without explicitly calling `cursor()`. Mongoose still
 *     // creates an AggregationCursor instance internally.
 *     const agg = Model.aggregate([{ $match: { age: { $gte: 25 } } }]);
 *     for await (const doc of agg) {
 *       console.log(doc.name);
 *     }
 *
 *     // You can also use an AggregationCursor instance for async iteration
 *     const cursor = Model.aggregate([{ $match: { age: { $gte: 25 } } }]).cursor();
 *     for await (const doc of cursor) {
 *       console.log(doc.name);
 *     }
 *
 * Node.js 10.x supports async iterators natively without any flags. You can
 * enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).
 *
 * **Note:** This function is not set if `Symbol.asyncIterator` is undefined. If
 * `Symbol.asyncIterator` is undefined, that means your Node.js version does not
 * support async iterators.
 *
 * @method [Symbol.asyncIterator]
 * @memberOf AggregationCursor
 * @instance
 * @api public
 
 * Adds a [cursor flag](https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.html#addCursorFlag).
 * Useful for setting the `noCursorTimeout` and `tailable` flags.
 *
 * @param {String} flag
 * @param {Boolean} value
 * @return {AggregationCursor} this
 * @api public
 * @method addCursorFlag
 /**\n *  ... lag\n */
 * Get the next doc from the underlying cursor and mongooseify it
 * (populate, etc.)
 * @param {Any} ctx
 * @param {Function} cb
 * @api private
 '../error/mongooseError''stream'eachAsync'../helpers/cursor/eachAsync''../helpers/immediate'kareem'kareem'aggautoDestroy_transforms_mongooseOptions'cursor'_init_handlePreHookErrorqueryCursorskipWrappedFunctionresultValue'Cannot `skipMiddlewareFunction()` with a value when using ''`.aggregate().cursor()`, value must be nullish or empty array, got "''".'_markError_next'Mongoose does not support using async iterators with an ''existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation''map'_error'AggregationCursor.prototype.close() no longer accepts a callback'_destroy_errwaitForCursor_closed'AggregationCursor.prototype.next() no longer accepts a callback''AggregationCursor.prototype.eachAsync() no longer accepts a callback'addCursorFlag_waitForCursorAn AggregationCursor is a concurrency primitive for processing aggregation
results one document at a time. It is analogous to QueryCursor.

An AggregationCursor fulfills the Node.js streams3 API,
in addition to several other mechanisms for loading documents from MongoDB
one at a time.

Creating an AggregationCursor executes the model's pre aggregate hooks,
but **not** the model's post aggregate hooks.

Unless you're an advanced user, do **not** instantiate this class directly.
Use [`Aggregate#cursor()`](https://mongoosejs.com/docs/api/aggregate.html#Aggregate.prototype.cursor()) instead.Readable https://nodejs.org/api/stream.html#class-streamreadable
`cursor`: Emitted when the cursor is created
`error`: Emitted when an error occurred
`data`: Emitted when the stream is flowing and the next doc is ready
`end`: Emitted when the stream is exhausted
Handles error emitted from pre middleware. In particular, checks for `skipWrappedFunction`, which allows skipping
the actual aggregation and overwriting the function's return value. Because aggregation cursors don't return a value,
we need to make sure the user doesn't accidentally set a value in skipWrappedFunction.QueryCursorNecessary to satisfy the Readable APIAggregationCursor
Registers a transform function which subsequently maps documents retrieved
via the streams interface or `.next()`

#### Example:

// Map documents returned by `data` events
Thing.
find({ name: /^hello/ }).
cursor().
map(function (doc) {
doc.foo = "bar";
return doc;
})
on('data', function(doc) { console.log(doc.foo); });

// Or map documents returned by `.next()`
const cursor = Thing.find({ name: /^hello/ }).
cursor().
map(function (doc) {
doc.foo = "bar";
return doc;
});
cursor.next(function(error, doc) {
console.log(doc.foo);
});Marks this cursor as erroredMarks this cursor as closed. Will stop streaming and subsequent calls to
`next()` will error.AggregationCursor.close https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.html#closeMarks this cursor as destroyed. Will stop streaming and subsequent calls to
`next()` will error.Get the next document from this cursor. Will return `null` when there are
no documents left.Execute `fn` for every document in the cursor. If `fn` returns a promise,
will wait for the promise to resolve before iterating on to the next one.
Returns a promise that resolves when done.the number of promises to execute in parallel. Defaults to 1.
options.parallelif set, Mongoose will call `fn` with an array of at most `batchSize` documents, instead of a single document
if true, `eachAsync()` iterates through all docs even if `fn` throws an error. If false, `eachAsync()` throws an error immediately if the given function `fn()` throws an error.
Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js)
You do not need to call this function explicitly, the JavaScript runtime
will call it for you.

#### Example:

// Async iterator without explicitly calling `cursor()`. Mongoose still
// creates an AggregationCursor instance internally.
const agg = Model.aggregate([{ $match: { age: { $gte: 25 } } }]);
for await (const doc of agg) {
console.log(doc.name);
}

// You can also use an AggregationCursor instance for async iteration
const cursor = Model.aggregate([{ $match: { age: { $gte: 25 } } }]).cursor();
for await (const doc of cursor) {
console.log(doc.name);
}

Node.js 10.x supports async iterators natively without any flags. You can
enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).

**Note:** This function is not set if `Symbol.asyncIterator` is undefined. If
`Symbol.asyncIterator` is undefined, that means your Node.js version does not
support async iterators.Adds a [cursor flag](https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.html#addCursorFlag).
Useful for setting the `noCursorTimeout` and `tailable` flags.Get the next doc from the underlying cursor and mongooseify it
(populate, etc.)'../err ... eError'../error/mongooseErrorconst R ... adable;Readabl ... eadablerequire ... eadablerequire('stream')const e ... sync');eachAsy ... Async')require ... Async')'../hel ... hAsync'../helpers/cursor/eachAsync/helpers/cursor/eachAsync'../hel ... ediate'../helpers/immediateconst k ... reem');kareem  ... areem')require('kareem')Readabl ... rue });Readabl ... true })Readable.call{ autoD ...  true }autoDestroy: trueobjectMode: truethis.cursor = null;this.cursor = nullthis.agg = agg;this.agg = aggthis.aggthis._t ... s = [];this._t ... ms = []this._transformsconnect ... nectionagg._connectionmodel = agg._modelagg._modeldelete  ... Cursor;delete  ... gCursoragg.opt ... gCursoragg.options.cursoragg.optionsthis._m ... s = {};this._m ... ns = {}this._m ... Optionsif (con ... g);\n  }this.cu ... || {});this.cu ...  || {})connect ...  || {})connect ... gregateconnection.dbagg._pipelineagg.options || {}setImme ... rsor));setImme ... ursor))() => t ... cursor)this.em ... cursor){\n    _ ... g);\n  }_init(m ... , agg);_init(m ... s, agg)util.in ... dable);util.in ... adable)if (!mo ... });\n  }!model. ... .buffermodel.c ... .buffererr != null_handle ... , err);_handle ... c, err)typeof  ... ansformagg.opt ... ansformagg.options?.cursorc._tran ... sform);c._tran ... nsform)c._transforms.pushc._transformsc.curso ... || {});c.curso ...  || {})c.cursormodel.c ...  || {})c.emit( ... ursor);c.emit( ... cursor)c.emitmodel.c ...     });model.c ... \n    })model.c ... er.oncemodel.c ... emitterif (err ... rn;\n  }err ins ... unctionkareem. ... unction{\n    c ... rn;\n  }const r ... rgs[0];resultV ... args[0]err.args[0]err.argsif (res ... ;\n    }resultV ... length)resultValue != null(!Array ... length)!Array. ... .length!Array. ... tValue)Array.i ... tValue)resultValue.lengthconst e ...      );err = n ...       )'Cannot ...    '".''Cannot ... tValue)'Cannot ...  got "''Cannot ... using 'Cannot `skipMiddlewareFunction()` with a value when using '`.aggr ...  got "'`.aggregate().cursor()`, value must be nullish or empty array, got "util.in ... tValue)".queryCu ... r(err);queryCu ... or(err)queryCu ... rkErrorqueryCu ... , err);queryCu ... ', err)queryCu ... gth > 0queryCu ... .lengthqueryCu ... error')queryCu ... stenersqueryCursor.emitqueryCu ...  null);queryCu ... , null)Aggrega ... e._readAggrega ... ototype_next(t ... ;\n  });_next(t ... );\n  })functio ... c);\n  }{\n    i ... c);\n  }_this.e ...  error)_this.emitif (!do ... ;\n    }!doc_this.push(null);_this.push(null)_this.push_this.c ...     });_this.c ...      })_this.cursor.close_this.cursor_this.push(doc);_this.push(doc)const m ... ation';msg = ' ... gation''Mongoo ... gation''Mongoo ... th an 'Mongoose does not support using async iterators with an 'existi ... gation'existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregationMongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregationMongoose does not support using async iterators with an existing aggregation cursor See https://bitly/mongoose-async-iterate-aggregationAggrega ... g);\n  }functio ... g);\n  }{\n    t ... g);\n  }throw n ... r(msg);new Mon ... or(msg){\n  val ...  true\n}value:  ... is;\n  }functio ... is;\n  }{\n    t ... is;\n  }this._t ... sh(fn);this._t ... ush(fn)this._t ... ms.pushAggrega ... rkErrorthis._error = error;this._error = errorthis._errorAggrega ... e');\n};Aggrega ... se');\n}Aggrega ... e.closeasync f ... se');\n}{\n  if  ... se');\n}AggregationCursor.prototype.close() no longer accepts a callbacktry {\n  ... or;\n  }{\n    a ... ();\n  }await t ... lose();await t ... close()this.cursor.close()this.cursor.closecatch ( ... or;\n  }{\n    t ... or;\n  }this.li ... error);this.li ...  error)this.em ...  error)throw error;this.emit('close');this.emit('close')Aggrega ... destroy{\n  let ... this;\n}let wai ... = null;waitForCursor = nullif (!th ... ();\n  }!this.cursor{\n    w ... });\n  }waitFor ...     });this.on ... solve);this.on ... esolve){\n    w ... ();\n  }waitFor ... olve();waitFor ... solve()Promise.resolve()waitFor ...  .catchwaitFor ...   .thenwaitFor ... lose())() => t ... close()() => { ... ;\n    }this._closed = true;this._closed = truethis._closedcallback();callback()callback(error);callback(error)Aggrega ... pe.nextasync f ...   });\n}AggregationCursor.prototype.next() no longer accepts a callback{\n    _ ... });\n  }_next(t ...     });_next(t ... \n    })(err, r ... ;\n    }return reject(err);reject(err)resolve(res);resolve(res)Aggrega ... ts);\n};Aggrega ... pts);\n}Aggrega ... chAsyncfunctio ... pts);\n}{\n  if  ... pts);\n}AggregationCursor.prototype.eachAsync() no longer accepts a callbackif (typ ... {};\n  }typeof optsopts = opts || {};opts = opts || {}opts || {}return  ...  opts);eachAsy ... , opts)functio ...  cb); }{ retur ...  cb); }return  ... s, cb);_next(_this, cb)this.tr ... rator()this.tr ... teratorthis.transformNull()this.transformNullAggrega ... teratorthis._t ...  === -1this._t ... erator)this._t ... indexOfthis.ma ... rator);this.ma ... erator)this.mapAggrega ... ormNullif (arg ... ue;\n  }val = true;val = truethis._m ...  = val;this._m ... l = valthis._m ... ormNullfunctio ... se };\n}{\n  ret ... se };\n}return  ... alse };doc ==  ... false }doc == null{ done: true }done: true{ value ... false }value: docdone: falseAggrega ... sorFlag_waitFo ... ;\n  });_waitFo ... );\n  }){\n    _ ... e);\n  }_this.c ... value);_this.c ...  value)_this.c ... sorFlagif (ctx ... ();\n  }ctx.cursorreturn cb();cb()ctx.onc ... ;\n  });ctx.onc ... );\n  })ctx.once{\n    cb();\n  }cb();{\n  let ... ;\n  }\n}let callback = cb;callback = cbif (ctx ...  };\n  }ctx._tr ... .lengthctx._transformscallbac ... \n    };callbac ... ;\n    }err ||  ... rmNull)(doc == ... rmNull)doc === ... ormNulldoc === null!ctx._m ... ormNullctx._mo ... ormNullctx._mongooseOptionsreturn cb(err, doc);cb(err, doc)cb(err, ...  doc));cb(err, ... , doc))ctx._tr ... }, doc)ctx._tr ... .reducereturn fn(doc);fn(doc)if (ctx ... });\n  }ctx._errorcallbac ... error);callback(ctx._error){\n    r ...  );\n  }return  ... \n    );ctx.cur ... )\n    )ctx.cur ... ().thenctx.cursor.next()ctx.cursor.nextdoc =>  ...       }if (!do ...       }return  ...  null);callback(null, null)callback(null, doc);callback(null, doc)err => callback(err)ctx.onc ... ', cb);ctx.onc ... r', cb)ctx.onc ...     });ctx.onc ... \n    })_next(ctx, cb);_next(ctx, cb)module. ... nCursor/home/insomnia/repos/mongoose/lib/cursor/changeStream.js This wrapper is necessary because of buffering.// This ... fering. Because a ChangeStream is an event emitter, there's no way to register an 'error' handler// Beca ... handler that catches errors which occur in the constructor, unless we force sync errors into async// that ... o async errors with setImmediate(). For cleaner stack trace, we just immediately throw any synchronous// erro ... hronous errors that occurred with changeStreamThunk().// erro ... hunk(). No need to register events if opening change stream failed// No n ...  failed No need to close if opening the change stream faileddriverChangeStreamEvents'change''end''resumeTokenChanged'bindedEventserroredhydrate'Cannot create change stream with `hydrate: true` ''unless calling `Model.watch()`'syncError$driverChangeStreamPromise'ready'_bindEventsfullDocumenthasNext'Cannot call hasNext() on errored ChangeStream''Cannot call next() on errored ChangeStream'originalCb'Cannot call addListener() on errored ChangeStream''Cannot call on() on errored ChangeStream''Cannot call once() on errored ChangeStream'const d ... nged'];driverC ... anged']driverC ... mEvents['close ... anged']resumeTokenChangedclass C ... }\n  }\n}constru ...   }\n  }(change ...   }\n  }{\n    s ...   }\n  }super();super()this.dr ... = null;this.dr ...  = nullthis.dr ... eStreamthis.closed = false;this.closed = falsethis.closedthis.bi ...  false;this.bi ... = falsethis.bindedEventsthis.pi ... peline;this.pi ... ipelinethis.pipelinethis.op ... ptions;this.op ... optionsthis.er ...  false;this.errored = falsethis.erroredoptions ... s.modeloptions ... hydrateoptions.hydrate!options.modeloptions.modelnew Err ...       )'Cannot ... tch()`''Cannot ... true` 'Cannot create change stream with `hydrate: true` 'unless ... tch()`'unless calling `Model.watch()`Cannot create change stream with `hydrate: true` unless calling `Model.watch()`Cannot create change stream with `hydrate: true` unless calling `Modellet syn ... = null;syncError = nullthis.$d ...     });this.$d ... \n    })this.$d ... Promise$driver ... Promise(resolv ... }\n    }changeS ...     });changeS ...      })(err, d ...       }this.errored = true;this.errored = truethis.dr ... Stream;this.emit('ready');this.emit('ready')syncError = err;syncError = errreject(err);if (syn ... ;\n    }syncError != nullthrow syncError;_bindEv ... });\n  }() {\n   ... });\n  }this.bi ... = true;this.bi ...  = truethis.dr ... == nullthis.$d ...      );this.$d ...       )this.$d ... se.thenthis.dr ...     });this.dr ...      })this.dr ... ream.onthis.closed = true;this.closed = truedriverC ...     });driverC ...      })driverC ... forEachev => { ...       }data => ...       }if (dat ...       }data != ... hydratedata != ... optionsdata != ... != nulldata != nulldata.fu ... != nulldata.fullDocumentthis.options.hydratedata.fu ... ument);data.fu ... cument)this.op ... cument)this.op ... hydratethis.options.modelthis.emit(ev, data);this.emit(ev, data)this.dr ... \n    })driverC ... \n    })ev => { ... ;\n    }hasNext ... b);\n  }(cb) {\n ... b);\n  }{\n    i ... b);\n  }throw n ... ream');new Mon ... tream')'Cannot ... Stream'Cannot call hasNext() on errored ChangeStreamCannot call hasNext on errored ChangeStreamreturn  ... xt(cb);this.dr ... ext(cb)this.dr ... hasNextnext(cb ... b);\n  }Cannot call next() on errored ChangeStreamCannot call nextif (cb  ...       }cb != nullconst o ... b = cb;originalCb = cbcb = (e ...      };cb = (e ...       }return  ... b(err);originalCb(err)return  ...  data);origina ... , data)let may ... xt(cb);maybePr ... ext(cb)this.dr ... am.nextif (may ...       }maybePr ... nction'typeof  ... se.thenmaybePr ...     });maybePr ...      })return data;return maybePromise;addList ... r);\n  }(event, ... r);\n  }{\n    i ... r);\n  }Cannot call addListener() on errored ChangeStreamCannot call addListenerthis._bindEvents();this._bindEvents()this._bindEventsreturn  ... ndler);super.a ... andler)super.addListeneron(even ... r);\n  }Cannot call on() on errored ChangeStreamCannot call onsuper.o ... andler)super.ononce(ev ... r);\n  }Cannot call once() on errored ChangeStreamCannot call oncesuper.once_queue( ... ));\n  }(cb) {\n ... ));\n  }this.on ...  cb());this.on ... > cb())() => cb()close() ...   }\n  }() {\n   ...   }\n  }return  ... lose();this.dr ... close()this.dr ... m.closereturn  ...      );/home/insomnia/repos/mongoose/lib/cursor/queryCursor.js
 * A QueryCursor is a concurrency primitive for processing query results
 * one document at a time. A QueryCursor fulfills the Node.js streams3 API,
 * in addition to several other mechanisms for loading documents from MongoDB
 * one at a time.
 *
 * QueryCursors execute the model's pre `find` hooks before loading any documents
 * from MongoDB, and the model's post `find` hooks after loading each document.
 *
 * Unless you're an advanced user, do **not** instantiate this class directly.
 * Use [`Query#cursor()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.cursor()) instead.
 *
 * @param {Query} query
 * @param {Object} options query options passed to `.find()`
 * @inherits Readable https://nodejs.org/api/stream.html#class-streamreadable
 * @event `cursor`: Emitted when the cursor is created
 * @event `error`: Emitted when an error occurred
 * @event `data`: Emitted when the stream is flowing and the next doc is ready
 * @event `end`: Emitted when the stream is exhausted
 * @api public
  Re: gh-8039, you need to set the `cursor.batchSize` option, top-level// Re:  ... p-level `batchSize` option doesn't work.// `bat ... t work. Max out the number of documents we'll populate in parallel at 5000.// Max  ... t 5000.
 * Necessary to satisfy the Readable API
 * @method _read
 * @memberOf QueryCursor
 * @instance
 * @api private
 
 * Returns the underlying cursor from the MongoDB Node driver that this cursor uses.
 *
 * @method getDriverCursor
 * @memberOf QueryCursor
 * @returns {Cursor} MongoDB Node driver cursor instance
 * @instance
 * @api public
 
 * Registers a transform function which subsequently maps documents retrieved
 * via the streams interface or `.next()`
 *
 * #### Example:
 *
 *     // Map documents returned by `data` events
 *     Thing.
 *       find({ name: /^hello/ }).
 *       cursor().
 *       map(function (doc) {
 *        doc.foo = "bar";
 *        return doc;
 *       })
 *       on('data', function(doc) { console.log(doc.foo); });
 *
 *     // Or map documents returned by `.next()`
 *     const cursor = Thing.find({ name: /^hello/ }).
 *       cursor().
 *       map(function (doc) {
 *         doc.foo = "bar";
 *         return doc;
 *       });
 *     cursor.next(function(error, doc) {
 *       console.log(doc.foo);
 *     });
 *
 * @param {Function} fn
 * @return {QueryCursor}
 * @memberOf QueryCursor
 * @api public
 * @method map
 
 * Marks this cursor as errored
 * @method _markError
 * @memberOf QueryCursor
 * @instance
 * @api private
 
 * Marks this cursor as closed. Will stop streaming and subsequent calls to
 * `next()` will error.
 *
 * @return {Promise}
 * @api public
 * @method close
 * @emits close
 * @see AggregationCursor.close https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.html#close
 
 * Rewind this cursor to its uninitialized state. Any options that are present on the cursor will
 * remain in effect. Iterating this cursor will cause new queries to be sent to the server, even
 * if the resultant data has already been retrieved by this cursor.
 *
 * @return {AggregationCursor} this
 * @api public
 * @method rewind
 
 * Execute `fn` for every document in the cursor. If `fn` returns a promise,
 * will wait for the promise to resolve before iterating on to the next one.
 * Returns a promise that resolves when done.
 *
 * #### Example:
 *
 *     // Iterate over documents asynchronously
 *     Thing.
 *       find({ name: /^hello/ }).
 *       cursor().
 *       eachAsync(async function (doc, i) {
 *         doc.foo = doc.bar + i;
 *         await doc.save();
 *       })
 *
 * @param {Function} fn
 * @param {Object} [options]
 * @param {Number} [options.parallel] the number of promises to execute in parallel. Defaults to 1.
 * @param {Number} [options.batchSize] if set, will call `fn()` with arrays of documents with length at most `batchSize`
 * @param {Boolean} [options.continueOnError=false] if true, `eachAsync()` iterates through all docs even if `fn` throws an error. If false, `eachAsync()` throws an error immediately if the given function `fn()` throws an error.
 * @return {Promise}
 * @api public
 * @method eachAsync
 
 * The `options` passed in to the `QueryCursor` constructor.
 *
 * @api public
 * @property options
 
 * Adds a [cursor flag](https://mongodb.github.io/node-mongodb-native/4.9/classes/FindCursor.html#addCursorFlag).
 * Useful for setting the `noCursorTimeout` and `tailable` flags.
 *
 * @param {String} flag
 * @param {Boolean} value
 * @return {AggregationCursor} this
 * @api public
 * @method addCursorFlag
 
 * Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js).
 * You do not need to call this function explicitly, the JavaScript runtime
 * will call it for you.
 *
 * #### Example:
 *
 *     // Works without using `cursor()`
 *     for await (const doc of Model.find([{ $sort: { name: 1 } }])) {
 *       console.log(doc.name);
 *     }
 *
 *     // Can also use `cursor()`
 *     for await (const doc of Model.find([{ $sort: { name: 1 } }]).cursor()) {
 *       console.log(doc.name);
 *     }
 *
 * Node.js 10.x supports async iterators natively without any flags. You can
 * enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).
 *
 * **Note:** This function is not if `Symbol.asyncIterator` is undefined. If
 * `Symbol.asyncIterator` is undefined, that means your Node.js version does not
 * support async iterators.
 *
 * @method [Symbol.asyncIterator]
 * @memberOf QueryCursor
 * @instance
 * @api public
  Set so QueryCursor knows it should transform results for async iterators into `{ value, done }` syntax// Set  ...  syntax Create a custom callback to handle transforms, async iterator, and transformNull// Crea ... ormNull Handle null documents - if asyncIterator, we need to return `done: true`, otherwise just// Hand ... se just skip. In either case, avoid transforms.// skip ... sforms. Apply transforms// Apply transforms This option is set in `Symbol.asyncIterator` code paths.// This ...  paths. For async iterator, we need to convert to {value, done} format// For  ...  format Return a cached populated doc// Retu ... ted doc Internal cursor reported no more docs. Act the same here// Inte ... me here Request as many docs as batchSize, to populate them also in batch// Requ ... n batch If both `batchSize` and `_populateBatchSize` are huge, calling `next()` repeatedly may// If b ... dly may cause a stack overflow. So make sure we clear the stack.// caus ...  stack.helpers'../queryHelpers'skipped'`.find().cursor()`, value must be nullish or empty array, got "'batchSize_populateBatchSize_asyncIterator_getRawCursor_conditionsgetDriverCursor'QueryCursor.prototype.close() no longer accepts a callback'rewind'QueryCursor.prototype.next() no longer accepts a callback''Cannot call `next()` on a closed cursor''QueryCursor.prototype.eachAsync() no longer accepts a callback'queryCursorAsyncIterator_poppreparePopulationOptionsMQ__noPromise_batchDocs_nextDoc_batchExhausted_onNext_populateBatch_fields_userProvidedFieldscreateModelAndInitA QueryCursor is a concurrency primitive for processing query results
one document at a time. A QueryCursor fulfills the Node.js streams3 API,
in addition to several other mechanisms for loading documents from MongoDB
one at a time.

QueryCursors execute the model's pre `find` hooks before loading any documents
from MongoDB, and the model's post `find` hooks after loading each document.

Unless you're an advanced user, do **not** instantiate this class directly.
Use [`Query#cursor()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.cursor()) instead.query options passed to `.find()`
QueryCursor
Returns the underlying cursor from the MongoDB Node driver that this cursor uses.MongoDB Node driver cursor instance
Cursorclose
Rewind this cursor to its uninitialized state. Any options that are present on the cursor will
remain in effect. Iterating this cursor will cause new queries to be sent to the server, even
if the resultant data has already been retrieved by this cursor.Execute `fn` for every document in the cursor. If `fn` returns a promise,
will wait for the promise to resolve before iterating on to the next one.
Returns a promise that resolves when done.

#### Example:

// Iterate over documents asynchronously
Thing.
find({ name: /^hello/ }).
cursor().
eachAsync(async function (doc, i) {
doc.foo = doc.bar + i;
await doc.save();
})if set, will call `fn()` with arrays of documents with length at most `batchSize`
The `options` passed in to the `QueryCursor` constructor.Adds a [cursor flag](https://mongodb.github.io/node-mongodb-native/4.9/classes/FindCursor.html#addCursorFlag).
Useful for setting the `noCursorTimeout` and `tailable` flags.Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js).
You do not need to call this function explicitly, the JavaScript runtime
will call it for you.

#### Example:

// Works without using `cursor()`
for await (const doc of Model.find([{ $sort: { name: 1 } }])) {
console.log(doc.name);
}

// Can also use `cursor()`
for await (const doc of Model.find([{ $sort: { name: 1 } }]).cursor()) {
console.log(doc.name);
}

Node.js 10.x supports async iterators natively without any flags. You can
enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).

**Note:** This function is not if `Symbol.asyncIterator` is undefined. If
`Symbol.asyncIterator` is undefined, that means your Node.js version does not
support async iterators.const h ... pers');helpers ... lpers')require ... lpers')../queryHelpers/queryHelpersconst { ... ents');{ once  ... vents'){ once }this.sk ...  false;this.skipped = falsethis.skippedthis.query = query;this.query = querythis.querythis._closed = falseconst m ... .model;model = query.modelquery.modelthis.model = model;this.model = modelmodel.h ... }\n  });model.h ...  }\n  })(err) = ...   }\n  }'`.find ...  got "'`.find().cursor()`, value must be nullish or empty array, got "this._m ... r(err);this._markError(err)this._markErrorthis.li ... , err);this.li ... ', err)this.skipped = true;this.skipped = truethis.em ...  null);this.em ... , null)Object. ... xec());Object. ... Exec())query._ ... rExec()query._ ... ForExecthis._t ... ice());this._t ... lice())this._t ... .concatquery._ ... slice()query._ ... s.slicequery._transformsthis.op ... ansformthis._t ... sform);this._t ... nsform)this.op ... tchSizethis.op ...  5000);this.op ... , 5000)Math.mi ... , 5000)if (que ... ;\n    }query._ ... teratorquery._ ... Optionsthis._m ... = true;this._m ...  = truethis._m ... teratormodel.c ... mands()model.c ... ommandsmodel.c ...     ]);model.c ...      ])model.c ... ue.pushmodel.c ... n.queue() => _ ... , this)_getRaw ... , this)_getRaw ...  this);query.m ... ptions)query.m ... on.findquery.m ... lectionquery._conditionsqueryCursor.optionsqueryCu ... cursor;queryCu ...  cursorqueryCursor.cursorqueryCu ... ursor);queryCu ... cursor){\n    q ... r);\n  }queryCu ... error);queryCu ... _error)queryCursor._errorQueryCu ...  });\n};QueryCu ...   });\n}QueryCu ... e._readQueryCu ... ototype{\n  _ne ...   });\n}(error, ... c);\n  }this.push(null);this.push(null)this.pushthis.cu ...     });this.cu ...      })this.push(doc);this.push(doc)QueryCu ... sor;\n};QueryCu ... rsor;\n}QueryCu ... rCursorasync f ... rsor;\n}{\n  if  ... rsor;\n}if (thi ... or;\n  }{\n    r ... or;\n  }return this.cursor;await o ... rsor');await o ... ursor')once(this, 'cursor')QueryCu ... his;\n};QueryCu ... this;\n}QueryCu ... rkErrorQueryCu ... \n  }\n};QueryCu ... ;\n  }\n}QueryCu ... e.close'QueryC ... llback'QueryCursor.prototype.close() no longer accepts a callback{\n    a ... ');\n  }QueryCu ... destroythis.cursor.close();QueryCu ... .rewind{\n  _wa ... this;\n}() => { ... ();\n  }this.cu ... wind();this.cursor.rewind()this.cursor.rewindQueryCu ... pe.nextQueryCursor.prototype.next() no longer accepts a callbackthrow n ... rsor');new Mon ... ursor')'Cannot ... cursor'Cannot call `next()` on a closed cursorCannot call `next` on a closed cursorresolve(doc);resolve(doc)QueryCu ... ts);\n};QueryCu ... pts);\n}QueryCu ... chAsyncQueryCursor.prototype.eachAsync() no longer accepts a callback(cb) => ... is, cb)_next(this, cb)QueryCu ... ptions;QueryCu ... optionsQueryCu ... sorFlag() => { ... e);\n  }this.cu ... value);this.cu ...  value)this.cu ... sorFlag{\n  Que ... \n  };\n}QueryCu ... s;\n  };QueryCu ... is;\n  }QueryCu ... erator]queryCu ... terator{\n    / ... is;\n  }callbac ... );\n  };callbac ... c);\n  }return cb(err);cb(err)if (doc ... }\n    }ctx._mo ... teratorreturn  ... rue });cb(null ... true })cb(null, null)ctx._tr ... == nulldoc !== nulldoc = c ... , doc);doc = c ... }, doc)return  ... , doc);fn.call(ctx, doc)fn.callreturn  ... lse });cb(null ... alse })cb(null, doc)if (ctx ... ));\n  }ctx.skippedreturn  ... null));immedia ...  null))() => c ... , null)ctx.que ... tx._popctx.que ... opulatectx.que ... Optionsctx.query!ctx._popctx._popctx._po ... tions);ctx._po ... ptions)helpers ... ptions)helpers ... tionsMQprepare ... tionsMQctx._po ... = true;ctx._po ...  = truectx._pop.__noPromisectx.que ... ize > 1ctx.opt ... ize > 1ctx.opt ... tchSizectx.optionsctx._ba ... .lengthctx._batchDocs_nextDo ... llback)ctx._ba ... shift()ctx._batchDocs.shiftctx._batchExhaustedctx._batchDocs = [];ctx._batchDocs = []ctx.cur ...      );ctx.cur ...       )res =>  ... res); }{ _onNe ... res); }_onNext ... , res);_onNext ... l, res)_onNext.call{ ctx, callback }err =>  ... err); }{ _onNe ... err); }_onNext ... , err);_onNext ... }, err)callbac ...  null);if (!ct ...       }!ctx.qu ... opulate_nextDo ...     });_nextDo ...      })return  ... k(err);ctx.que ...      );ctx.que ...       )ctx.que ... p).thenctx.que ... x._pop)ctx.query.modeldoc =>  ... l, doc)ctx.rem ... ', cb);ctx.rem ... r', cb)ctx.removeListenercursor == nullthis.callback(error)this.callbackif (!do ... s);\n  }this.ct ... = true;this.ct ...  = truethis.ct ... haustedthis.ctx_popula ... l(this)_populateBatch.callthis.ct ... h(doc);this.ct ... sh(doc)this.ct ... cs.pushthis.ctx._batchDocsthis.ct ... tchSizethis.ct ... .lengththis.ctx.optionsimmedia ...     ));immedia ... \n    ))() => t ... }\n    )this.ct ... }\n    )this.ct ... ().thenthis.ct ... .next()this.ctx.cursor.nextthis.ctx.cursor_onNext ... s, err)_popula ... (this);{\n  if  ... \n  );\n}if (!th ... l);\n  }!this.c ... .lengththis.ca ... , null)this.ct ...  }\n  );this.ct ...   }\n  )this.ct ... p).thenthis.ct ... x._pop)this.ct ... opulatethis.ctx.query.modelthis.ctx.querythis.ctx._pop_nextDo ... lback);this.ct ... shift()this.ct ... s.shiftthis.callback(err);this.callback(err)ctx.que ... ns.leanctx.mod ... \n    })ctx.mod ... xecPostctx.model.hooksctx.model[[doc]][doc]const { ... .query;{ model ... x.query{ model ... tions }helpers ... ;\n  });helpers ... );\n  })helpers ... AndInit(err, d ... });\n  }ctx.mod ...     });module. ... yCursor/home/insomnia/repos/mongoose/lib/document.js
 * The core Mongoose document constructor. You should not call this directly,
 * the Mongoose [Model constructor](./api/model.html#Model) calls this for you.
 *
 * @param {Object} obj the values to set
 * @param {Object} [fields] optional object containing the fields which were selected in the query returning this document and any populated paths data
 * @param {Object} [options] various configuration options for the document
 * @param {Boolean} [options.defaults=true] if `false`, skip applying default values to this document.
 * @inherits NodeJS EventEmitter https://nodejs.org/api/events.html#class-eventemitter
 * @event `init`: Emitted on a document after it has been retrieved from the db and fully hydrated by Mongoose.
 * @event `save`: Emitted when the document is successfully saved
 * @api private
  Support `browserDocument.js` syntax// Supp ...  syntax Avoid setting `isNew` to `true`, because it is `true` by default// Avoi ... default determine if this doc is a result of a query with// dete ... ry with excluded fields// excluded fields By default, defaults get applied **before** setting initial values// By d ...  values Re: gh-6155// Re: gh-6155 Skip set hooks// Skip set hooks Function defaults get applied **after** setting initial values so they// Func ... so they see the full doc rather than an empty one, unless they opt out.// see  ... pt out. Re: gh-3781, gh-6155// Re:  ... gh-6155 Avoid methods, virtuals, existing fields, and `$` keys. The latter is to avoid overwriting// Avoi ... writing Mongoose internals.// Mong ... ernals.
 * Boolean flag specifying if the document is new. If you create a document
 * using `new`, this document will be considered "new". `$isNew` is how
 * Mongoose determines whether `save()` should use `insertOne()` to create
 * a new document or `updateOne()` to update an existing document.
 *
 * #### Example:
 *
 *     const user = new User({ name: 'John Smith' });
 *     user.$isNew; // true
 *
 *     await user.save(); // Sends an `insertOne` to MongoDB
 *
 * On the other hand, if you load an existing document from the database
 * using `findOne()` or another [query operation](https://mongoosejs.com/docs/queries.html),
 * `$isNew` will be false.
 *
 * #### Example:
 *
 *     const user = await User.findOne({ name: 'John Smith' });
 *     user.$isNew; // false
 *
 * Mongoose sets `$isNew` to `false` immediately after `save()` succeeds.
 * That means Mongoose sets `$isNew` to false **before** `post('save')` hooks run.
 * In `post('save')` hooks, `$isNew` will be `false` if `save()` succeeded.
 *
 * #### Example:
 *
 *     userSchema.post('save', function() {
 *       this.$isNew; // false
 *     });
 *     await User.create({ name: 'John Smith' });
 *
 * For subdocuments, `$isNew` is true if either the parent has `$isNew` set,
 * or if you create a new subdocument.
 *
 * #### Example:
 *
 *     // Assume `Group` has a document array `users`
 *     const group = await Group.findOne();
 *     group.users[0].$isNew; // false
 *
 *     group.users.push({ name: 'John Smith' });
 *     group.users[1].$isNew; // true
 *
 * @api public
 * @property $isNew
 * @memberOf Document
 * @instance
 
 * Hash containing current validation errors.
 *
 * @api public
 * @property errors
 * @memberOf Document
 * @instance
 !
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 /*!\n *  ... tc.\n */ Delay creating emitter until necessary because emitters take up a lot of memory,// Dela ... memory, especially for subdocuments.// espe ... uments.
 * The document's internal schema.
 *
 * @api private
 * @property schema
 * @memberOf Document
 * @instance
 
 * The document's schema.
 *
 * @api public
 * @property schema
 * @memberOf Document
 * @instance
 
 * Empty object that you can use for storing properties on the document. This
 * is handy for passing data to middleware without conflicting with Mongoose
 * internals.
 *
 * #### Example:
 *
 *     schema.pre('save', function() {
 *       // Mongoose will set `isNew` to `false` if `save()` succeeds
 *       this.$locals.wasNew = this.isNew;
 *     });
 *
 *     schema.post('save', function() {
 *       // Prints true if `isNew` was set before `save()`
 *       console.log(this.$locals.wasNew);
 *     });
 *
 * @api public
 * @property $locals
 * @memberOf Document
 * @instance
 
 * Legacy alias for `$isNew`.
 *
 * @api public
 * @property isNew
 * @memberOf Document
 * @see $isNew https://mongoosejs.com/docs/api/document.html#Document.prototype.$isNew
 * @instance
 
 * Set this property to add additional query filters when Mongoose saves this document and `isNew` is false.
 *
 * #### Example:
 *
 *     // Make sure `save()` never updates a soft deleted document.
 *     schema.pre('save', function() {
 *       this.$where = { isDeleted: false };
 *     });
 *
 * @api public
 * @property $where
 * @memberOf Document
 * @instance
 
 * The string version of this documents _id.
 *
 * #### Note:
 *
 * This getter exists on all documents by default. The getter can be disabled by setting the `id` [option](https://mongoosejs.com/docs/guide.html#id) of its `Schema` to false at construction time.
 *
 *     new Schema({ name: String }, { id: false });
 *
 * @api public
 * @see Schema options https://mongoosejs.com/docs/guide.html#options
 * @property id
 * @memberOf Document
 * @instance
 
 * Hash containing current validation $errors.
 *
 * @api public
 * @property $errors
 * @memberOf Document
 * @instance
 
 * A string containing the current operation that Mongoose is executing
 * on this document. May be `null`, `'save'`, `'validate'`, or `'remove'`.
 *
 * #### Example:
 *
 *     const doc = new Model({ name: 'test' });
 *     doc.$op; // null
 *
 *     const promise = doc.save();
 *     doc.$op; // 'save'
 *
 *     await promise;
 *     doc.$op; // null
 *
 * @api public
 * @property $op
 * @memberOf Document
 * @instance
 
 * Builds the default doc structure
 *
 * @param {Object} obj
 * @param {Object} [fields]
 * @param {Boolean} [skipId]
 * @param {Boolean} [exclude]
 * @param {Object} [hasIncludedChildren]
 * @api private
 * @method $__buildDoc
 * @memberOf Document
 * @instance
  Don't build up any paths that are underneath a map, we don't know// Don' ... 't know what the keys will be// what ... will be support excluding intermediary levels// supp ...  levels!
 * Converts to POJO when you use the document for querying
 /*!\n *  ... ing\n */
 * Hydrates this document with the data in `doc`. Does not run setters or mark any paths modified.
 *
 * Called internally after a document is returned from MongoDB. Normally,
 * you do **not** need to call this function on your own.
 *
 * This function triggers `init` [middleware](https://mongoosejs.com/docs/middleware.html).
 * Note that `init` hooks are [synchronous](https://mongoosejs.com/docs/middleware.html#synchronous).
 *
 * @param {Object} doc raw document returned by mongo
 * @param {Object} [opts]
 * @param {Boolean} [opts.hydratedPopulatedDocs=false] If true, hydrate and mark as populated any paths that are populated in the raw document
 * @param {Function} [fn]
 * @api public
 * @memberOf Document
 * @instance
 
 * Alias for [`.init`](https://mongoosejs.com/docs/api/document.html#Document.prototype.init())
 *
 * @api public
 
 * Internal "init" function
 *
 * @param {Document} doc
 * @param {Object} [opts]
 * @returns {Document} this
 * @api private
  handle docs with populated paths// hand ... d paths If doc._id is not null or undefined// If d ... defined
 * Init helper.
 *
 * @param {Object} self document instance
 * @param {Object} obj raw mongodb doc
 * @param {Object} doc object we are initializing
 * @param {Object} [opts] Optional Options
 * @param {Boolean} [opts.setters] Call `applySetters` instead of `cast`
 * @param {String} [prefix] Prefix to add to each path
 * @api private
  avoid prototype pollution// avoi ... llution Should still work if not a model-level discriminator, but should not be// Shou ...  not be necessary. This is *only* to catch the case where we queried using the// nece ... ing the base model and the discriminated model has a projection// base ... jection assume nested object// assu ...  object Retain order when overwriting defaults// Reta ... efaults Call applySetters with `init = false` because otherwise setters are a noop// Call ...  a noop mark as hydrated// mark as hydrated
 * Sends an updateOne command with this document `_id` as the query selector.
 *
 * #### Example:
 *
 *     weirdCar.updateOne({$inc: {wheels:1}}, { w: 1 });
 *
 * #### Valid options:
 *
 *  - same as in [Model.updateOne](https://mongoosejs.com/docs/api/model.html#Model.updateOne)
 *
 * @see Model.updateOne https://mongoosejs.com/docs/api/model.html#Model.updateOne
 * @param {Object} doc
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and the [Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @return {Query}
 * @api public
 * @memberOf Document
 * @instance
 
 * Sends a replaceOne command with this document `_id` as the query selector.
 *
 * #### Valid options:
 *
 *  - same as in [Model.replaceOne](https://mongoosejs.com/docs/api/model.html#Model.replaceOne())
 *
 * @see Model.replaceOne https://mongoosejs.com/docs/api/model.html#Model.replaceOne()
 * @param {Object} doc
 * @param {Object} [options]
 * @param {Function} [callback]
 * @return {Query}
 * @api public
 * @memberOf Document
 * @instance
 
 * Getter/setter around the session associated with this document. Used to
 * automatically set `session` if you `save()` a doc that you got from a
 * query with an associated session.
 *
 * #### Example:
 *
 *     const session = MyModel.startSession();
 *     const doc = await MyModel.findOne().session(session);
 *     doc.$session() === session; // true
 *     doc.$session(null);
 *     doc.$session() === null; // true
 *
 * If this is a top-level document, setting the session propagates to all child
 * docs.
 *
 * @param {ClientSession} [session] overwrite the current session
 * @return {ClientSession}
 * @method $session
 * @api public
 * @memberOf Document
 
 * Getter/setter around whether this document will apply timestamps by
 * default when using `save()` and `bulkSave()`.
 *
 * #### Example:
 *
 *     const TestModel = mongoose.model('Test', new Schema({ name: String }, { timestamps: true }));
 *     const doc = new TestModel({ name: 'John Smith' });
 *
 *     doc.$timestamps(); // true
 *
 *     doc.$timestamps(false);
 *     await doc.save(); // Does **not** apply timestamps
 *
 * @param {Boolean} [value] overwrite the current session
 * @return {Document|boolean|undefined} When used as a getter (no argument), a boolean will be returned indicating the timestamps option state or if unset "undefined" will be used, otherwise will return "this"
 * @method $timestamps
 * @api public
 * @memberOf Document
 
 * Overwrite all values in this document with the values of `obj`, except
 * for immutable properties. Behaves similarly to `set()`, except for it
 * unsets all properties that aren't in `obj`.
 *
 * @param {Object} obj the object to overwrite this document with
 * @method overwrite
 * @memberOf Document
 * @instance
 * @api public
 * @return {Document} this
  Explicitly skip version key// Expl ... ion key
 * Alias for `set()`, used internally to avoid conflicts
 *
 * @param {String|Object} path path or object of key/vals to set
 * @param {Any} val the value to set
 * @param {Schema|String|Number|Buffer|*} [type] optionally specify a type for "on-the-fly" attributes
 * @param {Object} [options] optionally specify options that modify the behavior of the set
 * @param {Boolean} [options.merge=false] if true, setting a [nested path](https://mongoosejs.com/docs/subdocs.html#subdocuments-versus-nested-paths) will merge existing values rather than overwrite the whole object. So `doc.set('nested', { a: 1, b: 2 })` becomes `doc.set('nested.a', 1); doc.set('nested.b', 2);`
 * @return {Document} this
 * @method $set
 * @memberOf Document
 * @instance
 * @api public
  new Document({ key: val })// new  ...  val }) This ternary is to support gh-7898 (copying virtuals if same schema)// This ... schema) while not breaking gh-10819, which for some reason breaks if we use toObject()// whil ... bject() `_skipMinimizeTopLevel` is because we may have deleted the top-level// `_sk ... p-level nested key to ensure key order.// nest ...  order. On initial set, delete any nested keys if we're going to overwrite// On i ... erwrite them to ensure we keep the user's key order.// them ...  order. Don't overwrite defaults with undefined keys (gh-3981) (gh-9039)// Don' ... h-9039) Ensure all properties are in correct order// Ensu ... t order May be path underneath non-strict schema// May  ...  schema Assume this is a Mongoose document that was copied into a POJO using// Assu ... O using `Object.assign()` or `{...doc}`// `Obj ... ..doc}` if this doc is being constructed we should not trigger getters// if t ... getters Might need to change path for top-level alias// Migh ... l alias check for roots that are Mixed types// chec ... d types If path is underneath a virtual, bypass everything and just set it.// If p ... set it. allow changes to sub paths of mixed types// allo ... d types Map of mixed and not the last element in the path resolves to mixed// Map  ... o mixed Check for embedded discriminators// Chec ... inators gh-4578, if setting a deeply nested path that doesn't exist yet, create it// gh-4 ... eate it Hack re: gh-5800. If nested field is not selected, it probably exists// Hack ...  exists so `MongoServerError: cannot use the part (nested of nested.num) to// so ` ... num) to traverse the element ({nested: null})` is not likely. If user gets// trav ... er gets that error, its their fault for now. We should reconsider disallowing// that ... llowing modifying not selected paths for 6.x// modi ... for 6.x When using the $set operator the path to the field must already exist.// When ...  exist. Else mongodb throws: "LEFT_SUBFIELD only supports Object"// Else ... Object" If overwriting a subdocument path, make sure to clear out// If o ... ear out any errors _before_ setting, so new errors that happen// any  ...  happen get persisted. Re: #9080// get  ... : #9080 If the user is trying to set a ref path to a document with// If t ... nt with the correct model name, treat it as populated// the  ... pulated Check ref// Check ref Check refPath// Check refPath If this path is underneath a single nested schema, we'll call the setter// If t ...  setter later in `$__set()` because we don't take `_doc` when we iterate through// late ... through a single nested doc. That's to make sure we get the correct context.// a si ... ontext. Otherwise we would double-call the setter, see gh-7196.// Othe ... h-7196. If this array partially contains populated documents, convert them// If t ... rt them all to ObjectIds re: #8443// all  ... : #8443
 * Sets the value of a path, or many paths.
 * Alias for [`.$set`](https://mongoosejs.com/docs/api/document.html#Document.prototype.$set()).
 *
 * #### Example:
 *
 *     // path, value
 *     doc.set(path, value)
 *
 *     // object
 *     doc.set({
 *         path  : value
 *       , path2 : {
 *            path  : value
 *         }
 *     })
 *
 *     // on-the-fly cast to number
 *     doc.set(path, value, Number)
 *
 *     // on-the-fly cast to string
 *     doc.set(path, value, String)
 *
 *     // changing strict mode behavior
 *     doc.set(path, value, { strict: false });
 *
 * @param {String|Object} path path or object of key/vals to set
 * @param {Any} val the value to set
 * @param {Schema|String|Number|Buffer|*} [type] optionally specify a type for "on-the-fly" attributes
 * @param {Object} [options] optionally specify options that modify the behavior of the set
 * @return {Document} this
 * @api public
 * @method set
 * @memberOf Document
 * @instance
 
 * Determine if we should mark this change as modified.
 *
 * @param {never} pathToMark UNUSED
 * @param {String|Symbol} path
 * @param {Object} options
 * @param {Any} constructing
 * @param {never} parts UNUSED
 * @param {Schema} schema
 * @param {Any} val
 * @param {Any} priorVal
 * @return {Boolean}
 * @api private
 * @method $__shouldModify
 * @memberOf Document
 * @instance
  Is path already modified? If so, always modify. We may unmark modified later.// Is p ...  later. when a path is not selected in a query, its initial// when ... initial value will be undefined.// valu ... efined. we're just unsetting the default value which was never saved// we'r ... r saved gh-3992: if setting a populated field to a doc, don't mark modified// gh-3 ... odified if they have the same _id// if t ... ame _id a path with a default was $unset on the server// a pa ...  server and the user is setting it to the same value again// and  ... e again
 * Handles the actual setting of the value and marking the path modified if appropriate.
 *
 * @param {String} pathToMark
 * @param {String|Symbol} path
 * @param {Object} options
 * @param {Any} constructing
 * @param {Array} parts
 * @param {Schema} schema
 * @param {Any} val
 * @param {Any} priorVal
 * @api private
 * @method $__set
 * @memberOf Document
 * @instance
  handle directly setting arrays (gh-1126)// hand ... h-1126) Update embedded document parent references (gh-5189)// Upda ... h-5189)
 * Gets a raw value from a path (no getters)
 *
 * @param {String} path
 * @return {Any} Returns the value from the given `path`.
 * @api private
 
 * Increments the numeric value at `path` by the given `val`.
 * When you call `save()` on this document, Mongoose will send a
 * [`$inc`](https://www.mongodb.com/docs/manual/reference/operator/update/inc/)
 * as opposed to a `$set`.
 *
 * #### Example:
 *
 *     const schema = new Schema({ counter: Number });
 *     const Test = db.model('Test', schema);
 *
 *     const doc = await Test.create({ counter: 0 });
 *     doc.$inc('counter', 2);
 *     await doc.save(); // Sends a `{ $inc: { counter: 2 } }` to MongoDB
 *     doc.counter; // 2
 *
 *     doc.counter += 2;
 *     await doc.save(); // Sends a `{ $set: { counter: 2 } }` to MongoDB
 *
 * @param {String|Array} path path or paths to update
 * @param {Number} val increment `path` by this value
 * @return {Document} this
 
 * Sets a raw value for a path (no casting, setters, transformations)
 *
 * @param {String} path
 * @param {Object} value
 * @return {Document} this
 * @api private
 
 * Returns the value of a path.
 *
 * #### Example:
 *
 *     // path
 *     doc.get('age') // 47
 *
 *     // dynamic casting to a string
 *     doc.get('age', String) // "47"
 *
 * @param {String} path
 * @param {Schema|String|Number|Buffer|*} [type] optionally specify a type for on-the-fly attributes
 * @param {Object} [options]
 * @param {Boolean} [options.virtuals=false] Apply virtuals before getting this path
 * @param {Boolean} [options.getters=true] If false, skip applying getters and just get the raw value
 * @return {Any}
 * @api public
  Fast path if we know we're just accessing top-level path on the document:// Fast ... cument: just get the schema path, avoid `$__path()` because that does string manipulation// just ... ulation Might need to apply virtuals if this is a nested path// Migh ... ed path
 * Returns the schematype for the given `path`.
 *
 * @param {String} path
 * @return {SchemaPath}
 * @api private
 * @method $__path
 * @memberOf Document
 * @instance
 
 * Marks the path as having pending changes to write to the db.
 *
 * _Very helpful when using [Mixed](https://mongoosejs.com/docs/schematypes.html#mixed) types._
 *
 * #### Example:
 *
 *     doc.mixed.type = 'changed';
 *     doc.markModified('mixed.type');
 *     doc.save() // changes to mixed.type are now persisted
 *
 * @param {String} path the path to mark modified
 * @param {Document} [scope] the scope to run validators with
 * @api public
 
 * Clears the modified state on the specified path.
 *
 * #### Example:
 *
 *     doc.foo = 'bar';
 *     doc.unmarkModified('foo');
 *     doc.save(); // changes to foo will not be persisted
 *
 * @param {String} path the path to unmark modified
 * @api public
 
 * Don't run validation on this path or persist changes to this path.
 *
 * #### Example:
 *
 *     doc.foo = null;
 *     doc.$ignore('foo');
 *     doc.save(); // changes to foo will not be persisted and validators won't be run
 *
 * @memberOf Document
 * @instance
 * @method $ignore
 * @param {String} path the path to ignore
 * @api public
 
 * Returns the list of paths that have been directly modified. A direct
 * modified path is a path that you explicitly set, whether via `doc.foo = 'bar'`,
 * `Object.assign(doc, { foo: 'bar' })`, or `doc.set('foo', 'bar')`.
 *
 * A path `a` may be in `modifiedPaths()` but not in `directModifiedPaths()`
 * because a child of `a` was directly modified.
 *
 * #### Example:
 *
 *     const schema = new Schema({ foo: String, nested: { bar: String } });
 *     const Model = mongoose.model('Test', schema);
 *     await Model.create({ foo: 'original', nested: { bar: 'original' } });
 *
 *     const doc = await Model.findOne();
 *     doc.nested.bar = 'modified';
 *     doc.directModifiedPaths(); // ['nested.bar']
 *     doc.modifiedPaths(); // ['nested', 'nested.bar']
 *
 * @return {String[]}
 * @api public
 
 * Returns true if the given path is nullish or only contains empty objects.
 * Useful for determining whether this subdoc will get stripped out by the
 * [minimize option](https://mongoosejs.com/docs/guide.html#minimize).
 *
 * #### Example:
 *
 *     const schema = new Schema({ nested: { foo: String } });
 *     const Model = mongoose.model('Test', schema);
 *     const doc = new Model({});
 *     doc.$isEmpty('nested'); // true
 *     doc.nested.$isEmpty(); // true
 *
 *     doc.nested.foo = 'bar';
 *     doc.$isEmpty('nested'); // false
 *     doc.nested.$isEmpty(); // false
 *
 * @param {String} [path]
 * @memberOf Document
 * @instance
 * @api public
 * @method $isEmpty
 * @return {Boolean}
 
 * Returns the list of paths that have been modified.
 *
 * @param {Object} [options]
 * @param {Boolean} [options.includeChildren=false] if true, returns children of modified paths as well. For example, if false, the list of modified paths for `doc.colors = { primary: 'blue' };` will **not** contain `colors.primary`. If true, `modifiedPaths()` will return an array that contains `colors.primary`.
 * @return {String[]}
 * @api public
 
 * Returns true if any of the given paths is modified, else false. If no arguments, returns `true` if any path
 * in this document is modified.
 *
 * If `path` is given, checks if a path or any full path containing `path` as part of its path chain has been modified.
 *
 * #### Example:
 *
 *     doc.set('documents.0.title', 'changed');
 *     doc.isModified()                      // true
 *     doc.isModified('documents')           // true
 *     doc.isModified('documents.0.title')   // true
 *     doc.isModified('documents otherProp') // true
 *     doc.isDirectModified('documents')     // false
 *
 * @param {String} [path] optional
 * @param {Object} [options]
 * @param {Boolean} [options.ignoreAtomics=false] If true, doesn't return true if path is underneath an array that was modified with atomic operations like `push()`
 * @return {Boolean}
 * @api public
 
 * Alias of [`.isModified`](https://mongoosejs.com/docs/api/document.html#Document.prototype.isModified())
 *
 * @method $isModified
 * @memberOf Document
 * @api public
 
 * Checks if a path is set to its default.
 *
 * #### Example:
 *
 *     MyModel = mongoose.model('test', { name: { type: String, default: 'Val '} });
 *     const m = new MyModel();
 *     m.$isDefault('name'); // true
 *
 * @memberOf Document
 * @instance
 * @method $isDefault
 * @param {String} [path]
 * @return {Boolean}
 * @api public
 
 * Getter/setter, determines whether the document was deleted. The `Model.prototype.deleteOne()` method sets `$isDeleted` if the delete operation succeeded.
 *
 * #### Example:
 *
 *     const product = await product.deleteOne();
 *     product.$isDeleted(); // true
 *     product.deleteOne(); // no-op, doesn't send anything to the db
 *
 *     product.$isDeleted(false);
 *     product.$isDeleted(); // false
 *     product.deleteOne(); // will execute a remove against the db
 *
 *
 * @param {Boolean} [val] optional, overrides whether mongoose thinks the doc is deleted
 * @return {Boolean|Document} whether mongoose thinks this doc is deleted.
 * @method $isDeleted
 * @memberOf Document
 * @instance
 * @api public
 
 * Returns true if `path` was directly set and modified, else false.
 *
 * #### Example:
 *
 *     doc.set('documents.0.title', 'changed');
 *     doc.isDirectModified('documents.0.title') // true
 *     doc.isDirectModified('documents') // false
 *
 * @param {String|String[]} [path]
 * @return {Boolean}
 * @api public
 
 * Checks if `path` is in the `init` state, that is, it was set by `Document#init()` and not modified since.
 *
 * @param {String} [path]
 * @return {Boolean}
 * @api public
 
 * Checks if `path` was selected in the source query which initialized this document.
 *
 * #### Example:
 *
 *     const doc = await Thing.findOne().select('name');
 *     doc.isSelected('name') // true
 *     doc.isSelected('age')  // false
 *
 * @param {String|String[]} path
 * @return {Boolean}
 * @api public
  only _id was selected.// only ... lected.
 * Checks if `path` was explicitly selected. If no projection, always returns
 * true.
 *
 * #### Example:
 *
 *     Thing.findOne().select('nested.name').exec(function (err, doc) {
 *        doc.isDirectSelected('nested.name') // true
 *        doc.isDirectSelected('nested.otherName') // false
 *        doc.isDirectSelected('nested')  // false
 *     })
 *
 * @param {String} path
 * @return {Boolean}
 * @api public
 
 * Executes registered validation rules for this document.
 *
 * #### Note:
 *
 * This method is called `pre` save and if a validation rule is violated, [save](https://mongoosejs.com/docs/api/model.html#Model.prototype.save()) is aborted and the error is thrown.
 *
 * #### Example:
 *
 *     await doc.validate({ validateModifiedOnly: false, pathsToSkip: ['name', 'email']});
 *
 * @param {Array|String} [pathsToValidate] list of paths to validate. If set, Mongoose will validate only the modified paths that are in the given list.
 * @param {Object} [options] internal options
 * @param {Boolean} [options.validateModifiedOnly=false] if `true` mongoose validates only modified paths.
 * @param {Array|string} [options.pathsToSkip] list of paths to skip. If set, Mongoose will validate every modified path that is not in this list.
 * @return {Promise} Returns a Promise.
 * @api public
  Skip parallel validate check for subdocuments// Skip ... cuments
 * Alias of [`.validate`](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate())
 *
 * @method $validate
 * @memberOf Document
 * @api public
  only validate required fields when necessary// only ... cessary Skip $* paths - they represent map schemas, not actual document paths// Skip ... t paths If we're validating a subdocument, all this logic will run anyway on the top-level document, so skip for subdocuments.// If w ... uments. But only run for top-level subdocuments, because we're looking for subdocuments that are not modified at top-level but// But  ... vel but have a modified path. If that is the case, we will run validation on the top-level subdocument, and via that run validation// have ... idation on any subdocuments down to the modified path.// on a ... d path. Remove child paths for now, because we'll be validating the whole// Remo ... e whole subdoc.// subdoc. The following is a faster take on looping through every path in `paths`// The  ... `paths` and checking if the path starts with `fullPathToSubdoc` re: gh-13191// and  ... h-13191 Avoid using isDirectModified() here because that does additional checks on whether the parent path// Avoi ... nt path is direct modified, which can cause performance issues re: gh-14897// is d ... h-14897 Optimization: if primitive path with no validators, or array of primitives// Opti ... mitives with no validators, skip validating this path entirely.// with ... tirely. Skip document arrays...// Skip ... rays... and arrays of arrays// and  ...  arrays and arrays with top-level validators// and  ... idators from here on we're not removing items from paths// from ... m paths gh-661: if a whole array is modified, make sure to run validation on all// gh-6 ...  on all the children as well// the  ... as well Single nested paths (paths embedded under single nested subdocs) will// Sing ... s) will be validated on their own when we call `validate()` on the subdoc itself.// be v ... itself. Re: gh-8468// Re: gh-8468 If underneath a document array, may need to re-validate the parent// If u ...  parent array re: gh-6818. Do this _after_ adding subpaths, because// arra ... because we don't want to add every array subpath.// we d ... ubpath. To avoid potential performance issues, skip doc arrays whose children// To a ... hildren are not required. `getPositionalPathType()` may be slow, so avoid// are  ... o avoid it unless we have a case of #6364// it u ... f #6364 gh-11380: optimization. If the array isn't a document array and there's no validators// gh-1 ... idators on the array type, there's no need to run validation on the individual array elements.// on t ... ements. Remove any validation errors that aren't from modified paths// Remo ... d paths Make sure cast errors persist// Make ... persist If user marked as invalid or there was a cast error, don't validate// If u ... alidate If setting a path under a mixed path, avoid using the mixed path validator (gh-10141)// If s ... -10141) If you `populate()` and get back a null value, required validators// If y ... idators shouldn't fail (gh-8018). We should always fall back to the populated// shou ... pulated value.// value. Array paths, like `somearray.1`, do not show up as populated with `$populated()`,// Arra ... ted()`, so in that case pull out the document's id// so i ... nt's id Since we skip subpaths under single nested subdocs to// Sinc ... docs to avoid double validation, we need to add back the// avoi ... ack the single nested subpath if the user asked for it (gh-8626)// sing ... h-8626)
 * Executes registered validation rules (skipping asynchronous validators) for this document.
 *
 * #### Note:
 *
 * This method is useful if you need synchronous validation.
 *
 * #### Example:
 *
 *     const err = doc.validateSync();
 *     if (err) {
 *       handleError(err);
 *     } else {
 *       // validation passed
 *     }
 *
 * @param {Array|string} [pathsToValidate] only validate the given paths
 * @param {Object} [options] options for validation
 * @param {Boolean} [options.validateModifiedOnly=false] If `true`, Mongoose will only validate modified paths, as opposed to modified paths and `required` paths.
 * @param {Array|string} [options.pathsToSkip] list of paths to skip. If set, Mongoose will validate every modified path that is not in this list.
 * @return {ValidationError|undefined} ValidationError if there are errors during validation, or undefined if there is no error.
 * @api public
 
 * Marks a path as invalid, causing validation to fail.
 *
 * The `errorMsg` argument will become the message of the `ValidationError`.
 *
 * The `value` argument (if passed) will be available through the `ValidationError.value` property.
 *
 *     doc.invalidate('size', 'must be less than 20', 14);
 *
 *     doc.validate(function (err) {
 *       console.log(err)
 *       // prints
 *       { message: 'Validation failed',
 *         name: 'ValidationError',
 *         errors:
 *          { size:
 *             { message: 'must be less than 20',
 *               name: 'ValidatorError',
 *               path: 'size',
 *               type: 'user defined',
 *               value: 14 } } }
 *     })
 *
 * @param {String} path the field to invalidate. For array elements, use the `array.i.field` syntax, where `i` is the 0-based index in the array.
 * @param {String|Error} err the error which states the reason `path` was invalid
 * @param {Object|String|Number|any} val optional invalid value
 * @param {String} [kind] optional `kind` property for the error
 * @return {ValidationError} the current ValidationError, with all currently invalidated paths
 * @api public
 
 * Marks a path as valid, removing existing validation errors.
 *
 * @param {String} path the field to mark as valid
 * @api public
 * @memberOf Document
 * @instance
 * @method $markValid
 /**\n *  ... lid\n */ Calling immutableSetter with `oldVal` even though it expects `newVal`// Call ... newVal` is intentional. That's because `$immutableSetter` compares its param// is i ... s param to the current value.// to t ...  value.
 * Saves this document by inserting a new document into the database if [document.isNew](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()) is `true`,
 * or sends an [updateOne](https://mongoosejs.com/docs/api/document.html#Document.prototype.updateOne()) operation **only** with the modifications to the database, it does not replace the whole document in the latter case.
 *
 * #### Example:
 *
 *     product.sold = Date.now();
 *     product = await product.save();
 *
 * If save is successful, the returned promise will fulfill with the document
 * saved.
 *
 * #### Example:
 *
 *     const newProduct = await product.save();
 *     newProduct === product; // true
 *
 * @param {Object} [options] options optional options
 * @param {Session} [options.session=null] the [session](https://www.mongodb.com/docs/manual/reference/server-sessions/) associated with this save operation. If not specified, defaults to the [document's associated session](https://mongoosejs.com/docs/api/document.html#Document.prototype.$session()).
 * @param {Object} [options.safe] (DEPRECATED) overrides [schema's safe option](https://mongoosejs.com/docs/guide.html#safe). Use the `w` option instead.
 * @param {Boolean} [options.validateBeforeSave] set to false to save without validating.
 * @param {Boolean} [options.validateModifiedOnly=false] If `true`, Mongoose will only validate modified paths, as opposed to modified paths and `required` paths.
 * @param {Number|String} [options.w] set the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#w-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.j] set to true for MongoDB to wait until this `save()` has been [journaled before resolving the returned promise](https://www.mongodb.com/docs/manual/reference/write-concern/#j-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Number} [options.wtimeout] sets a [timeout for the write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern).
 * @param {Boolean} [options.checkKeys=true] the MongoDB driver prevents you from saving keys that start with '$' or contain '.' by default. Set this option to `false` to skip that check. See [restrictions on field names](https://www.mongodb.com/docs/manual/reference/limits/#Restrictions-on-Field-Names)
 * @param {Boolean} [options.timestamps=true] if `false` and [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this `save()`.
 * @method save
 * @memberOf Document
 * @instance
 * @throws {DocumentNotFoundError} if this [save updates an existing document](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()) but the document doesn't exist in the database. For example, you will get this error if the document is [deleted between when you retrieved the document and when you saved it](documents.html#updating).
 * @return {Promise}
 * @api public
 * @see middleware https://mongoosejs.com/docs/middleware.html
 
 * Checks if a path is invalid
 *
 * @param {String|String[]} [path] the field to check. If unset will always return "false"
 * @method $isValid
 * @memberOf Document
 * @instance
 * @api private
 
 * Resets the internal modified state of this document.
 *
 * @api private
 * @return {Document} this
 * @method $__reset
 * @memberOf Document
 * @instance
  Skip for subdocuments clear atomics// clear atomics Clear 'dirty' cache// Clea ... ' cache
 * Returns this documents dirty paths / vals.
 *
 * @return {Array}
 * @api private
 * @method $__dirty
 * @memberOf Document
 * @instance
  gh-2558: if we had to set a default and the value is not undefined,// gh-2 ... efined, we have to save as well// we h ... as well Ignore "foo.a" if "foo" is dirty already.// Igno ... lready. special case for top level MongooseArrays// spec ... eArrays the `top` array itself and a sub path of `top` are being set.// the  ... ng set. the only way to honor all of both modifications is through a $set// the  ...  a $set of entire array.// of entire array.
 * Assigns/compiles `schema` into this documents prototype.
 *
 * @param {Schema} schema
 * @api private
 * @method $__setSchema
 * @memberOf Document
 * @instance
  Apply default getters if virtual doesn't have any (gh-6262)// Appl ... h-6262)
 * Get active path that were changed and are arrays
 *
 * @return {Array}
 * @api private
 * @method $__getArrayPathsToValidate
 * @memberOf Document
 * @instance
  validate all document arrays.// vali ... arrays.
 * Get all subdocs (by bfs)
 *
 * @param {Object} [options] options. Currently for internal use.
 * @return {Array}
 * @api public
 * @method $getAllSubdocs
 * @memberOf Document
 * @instance
  Avoid using `childSchemas.path` to avoid compatibility versions with pre-8.8 versions of Mongoose// Avoi ... ongoose!
 * Runs queued functions
 /*!\n *  ... ons\n */ emit on the Model if listening// emit ... stening
 * Internal common logic for toObject() and toJSON()
 *
 * @return {Object}
 * @api private
 * @method $toObject
 * @memberOf Document
 * @instance
  If options do not exist or is not an object, set it to empty object// If o ...  object _isNested will only be true if this is not the top level document, we// _isN ... ent, we should never depopulate the top-level document// shou ... ocument merge default options with input options.// merg ... ptions. Parent options should only bubble down for subdocuments, not populated docs// Pare ... ed docs Fast path: if we don't have any nested objects or arrays, we only need a// Fast ...  need a shallow clone.// shallow clone. In the case where a subdocument has its own transform function, we need to// In t ... need to check and see if the parent has a transform (options.transform) and if the// chec ...  if the child schema has a transform (this.schema.options.toObject) In this case,// chil ... s case, we need to adjust options.transform to be the child schema's transform and// we n ... orm and not the parent schema's// not  ... chema's!
 * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
  Safe to do this even in the schemaFieldsOnly case because we assume there's no nested paths// Safe ... d paths
 * Converts this document into a plain-old JavaScript object ([POJO](https://masteringjs.io/tutorials/fundamentals/pojo)).
 *
 * Buffers are converted to instances of [mongodb.Binary](https://mongodb.github.io/node-mongodb-native/4.9/classes/Binary.html) for proper storage.
 *
 * #### Getters/Virtuals
 *
 * Example of only applying path getters
 *
 *     doc.toObject({ getters: true, virtuals: false })
 *
 * Example of only applying virtual getters
 *
 *     doc.toObject({ virtuals: true })
 *
 * Example of applying both path and virtual getters
 *
 *     doc.toObject({ getters: true })
 *
 * To apply these options to every document of your schema by default, set your [schemas](https://mongoosejs.com/docs/api/schema.html#Schema()) `toObject` option to the same argument.
 *
 *     schema.set('toObject', { virtuals: true })
 *
 * #### Transform:
 *
 * We may need to perform a transformation of the resulting object based on some criteria, say to remove some sensitive information or return a custom object. In this case we set the optional `transform` function.
 *
 * Transform functions receive three arguments
 *
 *     function (doc, ret, options) {}
 *
 * - `doc` The mongoose document which is being converted
 * - `ret` The plain object representation which has been converted
 * - `options` The options in use (either schema options or the options passed inline)
 *
 * #### Example:
 *
 *     // specify the transform schema option
 *     if (!schema.options.toObject) schema.options.toObject = {};
 *     schema.options.toObject.transform = function (doc, ret, options) {
 *       // remove the _id of every document before returning the result
 *       delete ret._id;
 *       return ret;
 *     }
 *
 *     // without the transformation in the schema
 *     doc.toObject(); // { _id: 'anId', name: 'Wreck-it Ralph' }
 *
 *     // with the transformation
 *     doc.toObject(); // { name: 'Wreck-it Ralph' }
 *
 * With transformations we can do a lot more than remove properties. We can even return completely new customized objects:
 *
 *     if (!schema.options.toObject) schema.options.toObject = {};
 *     schema.options.toObject.transform = function (doc, ret, options) {
 *       return { movie: ret.name }
 *     }
 *
 *     // without the transformation in the schema
 *     doc.toObject(); // { _id: 'anId', name: 'Wreck-it Ralph' }
 *
 *     // with the transformation
 *     doc.toObject(); // { movie: 'Wreck-it Ralph' }
 *
 * _Note: if a transform function returns `undefined`, the return value will be ignored._
 *
 * Transformations may also be applied inline, overridding any transform set in the schema options.
 * Any transform function specified in `toObject` options also propagates to any subdocuments.
 *
 *     function deleteId(doc, ret, options) {
 *       delete ret._id;
 *       return ret;
 *     }
 *
 *     const schema = mongoose.Schema({ name: String, docArr: [{ name: String }] });
 *     const TestModel = mongoose.model('Test', schema);
 *
 *     const doc = new TestModel({ name: 'test', docArr: [{ name: 'test' }] });
 *
 *     // pass the transform as an inline option. Deletes `_id` property
 *     // from both the top-level document and the subdocument.
 *     const obj = doc.toObject({ transform: deleteId });
 *     obj._id; // undefined
 *     obj.docArr[0]._id; // undefined
 *
 * If you want to skip transformations, use `transform: false`:
 *
 *     schema.options.toObject = {
 *       hide: '_id',
 *       transform: function(doc, ret, options) {
 *         if (options.hide) {
 *           options.hide.split(' ').forEach(function(prop) {
 *             delete ret[prop];
 *           });
 *         }
 *         return ret;
 *       }
 *     };
 *
 *     const doc = new Doc({ _id: 'anId', secret: 47, name: 'Wreck-it Ralph' });
 *     doc.toObject();                                        // { secret: 47, name: 'Wreck-it Ralph' }
 *     doc.toObject({ hide: 'secret _id', transform: false });// { _id: 'anId', secret: 47, name: 'Wreck-it Ralph' }
 *     doc.toObject({ hide: 'secret _id', transform: true }); // { name: 'Wreck-it Ralph' }
 *
 * If you pass a transform in `toObject()` options, Mongoose will apply the transform
 * to [subdocuments](https://mongoosejs.com/docs/subdocs.html) in addition to the top-level document.
 * Similarly, `transform: false` skips transforms for all subdocuments.
 * Note that this behavior is different for transforms defined in the schema:
 * if you define a transform in `schema.options.toObject.transform`, that transform
 * will **not** apply to subdocuments.
 *
 *     const memberSchema = new Schema({ name: String, email: String });
 *     const groupSchema = new Schema({ members: [memberSchema], name: String, email });
 *     const Group = mongoose.model('Group', groupSchema);
 *
 *     const doc = new Group({
 *       name: 'Engineering',
 *       email: 'dev@mongoosejs.io',
 *       members: [{ name: 'Val', email: 'val@mongoosejs.io' }]
 *     });
 *
 *     // Removes `email` from both top-level document **and** array elements
 *     // { name: 'Engineering', members: [{ name: 'Val' }] }
 *     doc.toObject({ transform: (doc, ret) => { delete ret.email; return ret; } });
 *
 * Transforms, like all of these options, are also available for `toJSON`. See [this guide to `JSON.stringify()`](https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript.html) to learn why `toJSON()` and `toObject()` are separate functions.
 *
 * See [schema options](https://mongoosejs.com/docs/guide.html#toObject) for some more details.
 *
 * _During save, no custom options are applied to the document before being sent to the database._
 *
 * @param {Object} [options]
 * @param {Boolean} [options.getters=false] if true, apply all getters, including virtuals
 * @param {Boolean|Object} [options.virtuals=false] if true, apply virtuals, including aliases. Use `{ getters: true, virtuals: false }` to just apply getters, not virtuals. An object of the form `{ pathsToSkip: ['someVirtual'] }` may also be used to omit specific virtuals.
 * @param {Boolean} [options.aliases=true] if `options.virtuals = true`, you can set `options.aliases = false` to skip applying aliases. This option is a no-op if `options.virtuals = false`.
 * @param {Boolean} [options.minimize=true] if true, omit any empty objects from the output
 * @param {Function|null} [options.transform=null] if set, mongoose will call this function to allow you to transform the returned object
 * @param {Boolean} [options.depopulate=false] if true, replace any conventionally populated paths with the original id in the output. Has no affect on virtual populated paths.
 * @param {Boolean} [options.versionKey=true] if false, exclude the version key (`__v` by default) from the output
 * @param {Boolean} [options.flattenMaps=false] if true, convert Maps to POJOs. Useful if you want to `JSON.stringify()` the result of `toObject()`.
 * @param {Boolean} [options.flattenObjectIds=false] if true, convert any ObjectIds in the result to 24 character hex strings.
 * @param {Boolean} [options.useProjection=false] - If true, omits fields that are excluded in this document's projection. Unless you specified a projection, this will omit any field that has `select: false` in the schema.
 * @param {Boolean} [options.schemaFieldsOnly=false] - If true, the resulting object will only have fields that are defined in the document's schema. By default, `toObject()` returns all fields in the underlying document from MongoDB, including ones that are not listed in the schema.
 * @return {Object} document as a plain old JavaScript object (POJO). This object may contain ObjectIds, Maps, Dates, mongodb.Binary, Buffers, and other non-POJO values.
 * @see mongodb.Binary https://mongodb.github.io/node-mongodb-native/4.9/classes/Binary.html
 * @api public
 * @memberOf Document
 * @instance
 !
 * Applies virtuals properties to `json`.
 /*!\n *  ... n`.\n */ Allow skipping aliases with `toObject({ virtuals: true, aliases: false })`// Allo ... lse })` We may be applying virtuals to a nested object, for example if calling// We m ... calling `doc.nestedProp.toJSON()`. If so, the path we assign to, `assignPath`,// `doc ... nPath`, will be a trailing substring of the `path`.// will ... `path`.
 * Applies virtuals properties to `json`.
 *
 * @param {Document} self
 * @param {Object} json
 * @return {Object} `json`
 * @api private
  If we've reached a non-object part of the branch, continuing would// If w ... g would cause "Cannot create property 'foo' on string 'bar'" error.// caus ...  error. Necessary for mongoose-intl plugin re: gh-14446// Nece ... h-14446
 * Applies schema type transforms to `json`.
 *
 * @param {Document} self
 * @param {Object} json
 * @return {Object} `json`
 * @api private
 
 * The return value of this method is used in calls to [`JSON.stringify(doc)`](https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript#the-tojson-function).
 *
 * This method accepts the same options as [Document#toObject](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()). To apply the options to every document of your schema by default, set your [schemas](https://mongoosejs.com/docs/api/schema.html#Schema()) `toJSON` option to the same argument.
 *
 *     schema.set('toJSON', { virtuals: true });
 *
 * There is one difference between `toJSON()` and `toObject()` options.
 * When you call `toJSON()`, the [`flattenMaps` option](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()) defaults to `true`, because `JSON.stringify()` doesn't convert maps to objects by default.
 * When you call `toObject()`, the `flattenMaps` option is `false` by default.
 *
 * See [schema options](https://mongoosejs.com/docs/guide.html#toJSON) for more information on setting `toJSON` option defaults.
 *
 * @param {Object} options
 * @param {Boolean} [options.flattenMaps=true] if true, convert Maps to [POJOs](https://masteringjs.io/tutorials/fundamentals/pojo). Useful if you want to `JSON.stringify()` the result.
 * @param {Boolean} [options.flattenObjectIds=false] if true, convert any ObjectIds in the result to 24 character hex strings.
 * @param {Boolean} [options.schemaFieldsOnly=false] - If true, the resulting object will only have fields that are defined in the document's schema. By default, `toJSON()` returns all fields in the underlying document from MongoDB, including ones that are not listed in the schema.
 * @return {Object}
 * @see Document#toObject https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()
 * @see JSON.stringify() in JavaScript https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript.html
 * @api public
 * @memberOf Document
 * @instance
 
 * If this document is a subdocument or populated document, returns the document's
 * parent. Returns the original document if there is no parent.
 *
 * @return {Document}
 * @api public
 * @method parent
 * @memberOf Document
 * @instance
 
 * Alias for [`parent()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.parent()). If this document is a subdocument or populated
 * document, returns the document's parent. Returns `undefined` otherwise.
 *
 * @return {Document}
 * @api public
 * @method $parent
 * @memberOf Document
 * @instance
 
 * Helper for console.log
 *
 * @return {String}
 * @api public
 * @method inspect
 * @memberOf Document
 * @instance
  If `toObject()` returns null, `this` is still an object, so if `inspect()`// If ` ... pect()` prints out null this can cause some serious confusion. See gh-7942.// prin ... h-7942. Avoid Node deprecation warning DEP0079// Avoi ... DEP0079
 * Helper for console.log
 *
 * @return {String}
 * @api public
 * @method toString
 * @memberOf Document
 * @instance
 
 * Returns true if this document is equal to another document.
 *
 * Documents are considered equal when they have matching `_id`s, unless neither
 * document has an `_id`, in which case this function falls back to using
 * `deepEqual()`.
 *
 * @param {Document} [doc] a document to compare. If falsy, will always return "false".
 * @return {Boolean}
 * @api public
 * @memberOf Document
 * @instance
 
 * Populates paths on an existing document.
 *
 * #### Example:
 *
 *     // Given a document, `populate()` lets you pull in referenced docs
 *     await doc.populate([
 *       'stories',
 *       { path: 'fans', sort: { name: -1 } }
 *     ]);
 *     doc.populated('stories'); // Array of ObjectIds
 *     doc.stories[0].title; // 'Casino Royale'
 *     doc.populated('fans'); // Array of ObjectIds
 *
 *     // If the referenced doc has been deleted, `populate()` will
 *     // remove that entry from the array.
 *     await Story.delete({ title: 'Casino Royale' });
 *     await doc.populate('stories'); // Empty array
 *
 *     // You can also pass additional query options to `populate()`,
 *     // like projections:
 *     await doc.populate('fans', '-email');
 *     doc.fans[0].email // undefined because of 2nd param `select`
 *
 * @param {String|Object|Array} path either the path to populate or an object specifying all parameters, or either an array of those
 * @param {Object|String} [select] Field selection for the population query
 * @param {Model} [model] The model you wish to use for population. If not specified, populate will look up the model by the name in the Schema's `ref` field.
 * @param {Object} [match] Conditions for the population query
 * @param {Object} [options] Options for the population query (sort, etc)
 * @param {String} [options.path=null] The path to populate.
 * @param {string|PopulateOptions} [options.populate=null] Recursively populate paths in the populated documents. See [deep populate docs](https://mongoosejs.com/docs/populate.html#deep-populate).
 * @param {boolean} [options.retainNullValues=false] by default, Mongoose removes null and undefined values from populated arrays. Use this option to make `populate()` retain `null` and `undefined` array entries.
 * @param {boolean} [options.getters=false] if true, Mongoose will call any getters defined on the `localField`. By default, Mongoose gets the raw value of `localField`. For example, you would need to set this option to `true` if you wanted to [add a `lowercase` getter to your `localField`](https://mongoosejs.com/docs/schematypes.html#schematype-options).
 * @param {boolean} [options.clone=false] When you do `BlogPost.find().populate('author')`, blog posts with the same author will share 1 copy of an `author` doc. Enable this option to make Mongoose clone populated docs before assigning them.
 * @param {Object|Function} [options.match=null] Add an additional filter to the populate query. Can be a filter object containing [MongoDB query syntax](https://www.mongodb.com/docs/manual/tutorial/query-documents/), or a function that returns a filter object.
 * @param {Function} [options.transform=null] Function that Mongoose will call on every populated document that allows you to transform the populated document.
 * @param {Object} [options.options=null] Additional options like `limit` and `lean`.
 * @param {Boolean} [options.forceRepopulate=true] Set to `false` to prevent Mongoose from repopulating paths that are already populated
 * @param {Boolean} [options.ordered=false] Set to `true` to execute any populate queries one at a time, as opposed to in parallel. We recommend setting this option to `true` if using transactions, especially if also populating multiple paths or paths with multiple models. MongoDB server does **not** support multiple operations in parallel on a single transaction.
 * @param {Function} [callback] Callback
 * @see population https://mongoosejs.com/docs/populate.html
 * @see Query#select https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
 * @see Model.populate https://mongoosejs.com/docs/api/model.html#Model.populate()
 * @memberOf Document
 * @instance
 * @return {Promise|null} Returns a Promise if no `callback` is given.
 * @api public
  use hash to remove duplicate paths// use  ... e paths Use `$session()` by default if the document has an associated session// Use  ... session See gh-6754// See gh-6754
 * Gets all populated documents associated with this document.
 *
 * @api public
 * @return {Document[]} array of populated documents. Empty array if there are no populated documents associated with this document.
 * @memberOf Document
 * @method $getPopulatedDocs
 * @instance
 
 * Gets _id(s) used during population of the given `path`.
 *
 * #### Example:
 *
 *     const doc = await Model.findOne().populate('author');
 *
 *     console.log(doc.author.name); // Dr.Seuss
 *     console.log(doc.populated('author')); // '5144cf8050f071d979c118a7'
 *
 * If the path was not populated, returns `undefined`.
 *
 * @param {String} path
 * @param {Any} [val]
 * @param {Object} [options]
 * @return {Array|ObjectId|Number|Buffer|String|undefined}
 * @memberOf Document
 * @instance
 * @api public
  val and options are internal// val  ... nternal Map paths can be populated with either `path.$*` or just `path`// Map  ...  `path` If this was a nested populate, make sure each populated doc knows// If t ... c knows about its populated children (gh-7685)// abou ... h-7685) No need to continue because the above recursion should take care of// No n ... care of marking the rest of the docs as populated// mark ... pulated
 * Alias of [`.populated`](https://mongoosejs.com/docs/api/document.html#Document.prototype.populated()).
 *
 * @method $populated
 * @memberOf Document
 * @api public
 
 * Throws an error if a given path is not populated
 *
 * #### Example:
 *
 *     const doc = await Model.findOne().populate('author');
 *
 *     doc.$assertPopulated('author'); // does not throw
 *     doc.$assertPopulated('other path'); // throws an error
 *
 *     // Manually populate and assert in one call. The following does
 *     // `doc.$set({ likes })` before asserting.
 *     doc.$assertPopulated('likes', { likes });
 *
 *
 * @param {String|String[]} path path or array of paths to check. `$assertPopulated` throws if any of the given paths is not populated.
 * @param {Object} [values] optional values to `$set()`. Convenient if you want to manually populate a path and assert that the path was populated in 1 call.
 * @return {Document} this
 * @memberOf Document
 * @method $assertPopulated
 * @instance
 * @api public
 
 * Takes a populated field and returns it to its unpopulated state.
 *
 * #### Example:
 *
 *     Model.findOne().populate('author').exec(function (err, doc) {
 *       console.log(doc.author.name); // Dr.Seuss
 *       console.log(doc.depopulate('author'));
 *       console.log(doc.author); // '5144cf8050f071d979c118a7'
 *     })
 *
 * If the path was not provided, then all populated fields are returned to their unpopulated state.
 *
 * @param {String|String[]} [path] Specific Path to depopulate. If unset, will depopulate all paths on the Document. Or multiple space-delimited paths.
 * @return {Document} this
 * @see Document.populate https://mongoosejs.com/docs/api/document.html#Document.prototype.populate()
 * @api public
 * @memberOf Document
 * @instance
  Depopulate all// Depopulate all
 * Returns the full path to this document.
 *
 * @param {String} [path]
 * @return {String}
 * @api private
 * @method $__fullPath
 * @memberOf Document
 * @instance
  overridden in SubDocuments// over ... cuments
 * Returns the changes that happened to the document
 * in the format that will be sent to MongoDB.
 *
 * #### Example:
 *
 *     const userSchema = new Schema({
 *       name: String,
 *       age: Number,
 *       country: String
 *     });
 *     const User = mongoose.model('User', userSchema);
 *     const user = await User.create({
 *       name: 'Hafez',
 *       age: 25,
 *       country: 'Egypt'
 *     });
 *
 *     // returns an empty object, no changes happened yet
 *     user.getChanges(); // { }
 *
 *     user.country = undefined;
 *     user.age = 26;
 *
 *     user.getChanges(); // { $set: { age: 26 }, { $unset: { country: 1 } } }
 *
 *     await user.save();
 *
 *     user.getChanges(); // { }
 *
 * Modifying the object that `getChanges()` returns does not affect the document's
 * change tracking state. Even if you `delete user.getChanges().$set`, Mongoose
 * will still send a `$set` to the server.
 *
 * @return {Object}
 * @api public
 * @method getChanges
 * @memberOf Document
 * @instance
 
 * Produces a special query document of the modified properties used in updates.
 *
 * @api private
 * @method $__delta
 * @memberOf Document
 * @instance
  If `_id` is an object, need to depopulate, but also need to be careful// If ` ... careful because `_id` can technically be null (see gh-6406)// beca ... h-6406) If any array was selected using an $elemMatch projection, we alter the path and where clause// If a ...  clause NOTE: MongoDB only supports projected $elemMatch on top level array.// NOTE ...  array. If the selected array entry was modified// If t ... odified if the selected array was modified in any other way throw an error// if t ... n error If this path is set to default, and either this path or one of// If t ...  one of its parents is excluded, don't treat this path as dirty.// its  ...  dirty. arrays and other custom types (support plugins etc)// arra ... ns etc) MongooseBuffer// MongooseBuffer
 * Determine if array was populated with some form of filter and is now
 * being updated in a manner which could overwrite data unintentionally.
 *
 * @see https://github.com/Automattic/mongoose/issues/1334
 * @param {Document} doc
 * @param {String} path
 * @param {Any} array
 * @return {String|undefined}
 * @api private
  see if we populated this path// see  ... is path If any array was selected using an $elemMatch projection, we deny the update.// If a ... update. If the array was populated using options that prevented all// If t ... ted all documents from being returned (match, skip, limit) or they// docu ... or they deselected the _id field, $pop and $set of the array are// dese ... ray are not safe operations. If _id was deselected, we do not know// not  ... ot know how to remove elements. $pop will pop off the _id from the end// how  ... the end of the array in the db which is not guaranteed to be the// of t ...  be the same as the last element we have here. $set of the entire array// same ... e array would be similarly destructive as we never received all// woul ... ved all elements of the array and potentially would overwrite data.// elem ... e data. 0 is not permitted// 0 is ... rmitted 0 is permitted// 0 is permitted deselected _id?// deselected _id?
 * Apply the operation to the delta (update) clause as
 * well as track versioning for our where clause.
 *
 * @param {Document} self
 * @param {Object} where Unused
 * @param {Object} delta
 * @param {Object} data
 * @param {Mixed} val
 * @param {String} [op]
 * @api private
  delta// delta disabled versioning?// disa ... ioning? path excluded from versioning?// path ... ioning? already marked for versioning?// alre ... ioning? nothing to do// nothing to do ensure updates sent with positional notation are// ensu ... ion are editing the correct array element.// edit ... lement. only increment the version if an array position changes.// only ... hanges. modifying elements of an array is ok if position does not change.// modi ... change. potentially changing array positions// pote ... sitions $set an array// $set an array now handling $set, $unset// now  ...  $unset subpath of array// subpath of array
 * Compiles an update and where clause for a `val` with _atomics.
 *
 * @param {Document} self
 * @param {Object} where
 * @param {Object} delta
 * @param {Object} data
 * @param {Array} value
 * @api private
  $set has precedence over other atomics// $set ... atomics legacy support for plugins// lega ... plugins $set// $set
 * Determines whether versioning should be skipped for the given path
 *
 * @param {Document} self
 * @param {String} path
 * @return {Boolean} true if versioning should be skipped for the given path
 * @api private
  Remove any array indexes from the path// Remo ... he path
 * Returns a copy of this document with a deep clone of `_doc` and `$__`.
 *
 * @return {Document} a copy of this document
 * @api public
 * @method $clone
 * @memberOf Document
 * @instance
 
 * Creates a snapshot of this document's internal change tracking state. You can later
 * reset this document's change tracking state using `$restoreModifiedPathsSnapshot()`.
 *
 * #### Example:
 *
 *     const doc = await TestModel.findOne();
 *     const snapshot = doc.$createModifiedPathsSnapshot();
 *
 * @return {ModifiedPathsSnapshot} a copy of this document's internal change tracking state
 * @api public
 * @method $createModifiedPathsSnapshot
 * @memberOf Document
 * @instance
 
 * Restore this document's change tracking state to the given snapshot.
 * Note that `$restoreModifiedPathsSnapshot()` does **not** modify the document's
 * properties, just resets the change tracking state.
 *
 * This method is especially useful when writing [custom transaction wrappers](https://github.com/Automattic/mongoose/issues/14268#issuecomment-2100505554) that need to restore change tracking when aborting a transaction.
 *
 * #### Example:
 *
 *     const doc = await TestModel.findOne();
 *     const snapshot = doc.$createModifiedPathsSnapshot();
 *
 *     doc.name = 'test';
 *     doc.$restoreModifiedPathsSnapshot(snapshot);
 *     doc.$isModified('name'); // false because `name` was not modified when snapshot was taken
 *     doc.name; // 'test', `$restoreModifiedPathsSnapshot()` does **not** modify the document's data, only change tracking
 *
 * @param {ModifiedPathsSnapshot} snapshot of the document's internal change tracking state snapshot to restore
 * @api public
 * @method $restoreModifiedPathsSnapshot
 * @return {Document} this
 * @memberOf Document
 * @instance
 
 * Clear the document's modified paths.
 *
 * #### Example:
 *
 *     const doc = await TestModel.findOne();
 *
 *     doc.name = 'test';
 *     doc.$isModified('name'); // true
 *
 *     doc.$clearModifiedPaths();
 *     doc.name; // 'test', `$clearModifiedPaths()` does **not** modify the document's data, only change tracking
 *
 * @api public
 * @return {Document} this
 * @method $clearModifiedPaths
 * @memberOf Document
 * @instance
 !
 * Check if the given document only has primitive values
 /*!\n *  ... ues\n */DivergentArrayError'./error/divergentArray'InternalCache'./internal''./types/buffer'MixedSchema'./schema/mixed'ModifiedPathsSnapshot'./modifiedPathsSnapshot'ObjectExpectedError'./error/objectExpected'ObjectParameterError'./error/objectParameter'ParallelValidateError'./error/parallelValidate''./error/validation'ValidatorError'./error/validator'$__hasIncludedChildren'./helpers/projection/hasIncludedChildren'applyDefaults'./helpers/document/applyDefaults'cleanModifiedSubpaths'./helpers/document/cleanModifiedSubpaths''./helpers/document/compile'defineKeyfirstKey'./helpers/firstKey'flatten'./helpers/common'getEmbeddedDiscriminatorPath'./helpers/document/getEmbeddedDiscriminatorPath'getKeysInSchemaOrder'./helpers/schema/getKeysInSchemaOrder'getSubdocumentStrictValue'./helpers/schema/getSubdocumentStrictValue'handleSpreadDoc'./helpers/document/handleSpreadDoc''./helpers/isBsonType'isDefiningProjection'./helpers/projection/isDefiningProjection'isExclusive'./helpers/projection/isExclusive'isPathExcluded'./helpers/projection/isPathExcluded'internalToObjectOptions'./options'markArraySubdocsPopulated'./helpers/populate/markArraySubdocsPopulated'minimize'./helpers/minimize'mpath'mpath'parentPaths'./helpers/path/parentPaths'queryhelpers'./queryHelpers'arrayAtomicsBackupSymboldocumentArrayParentdocumentIsModifieddocumentModifiedPathsdocumentSchemaSymbolgetSymbolpopulateModelSymbolscopeSymbolschemaMixedSymbol'./schema/symbols'getDeepestSubdocumentForPath'./helpers/document/getDeepestSubdocumentForPath'MongooseArrayEmbeddedspecialPropertiesVERSION_WHEREVERSION_INCVERSION_ALL$__schema_schemapriorDoc'obj''Document'defaultsstrictModerequiredPathshasIncludedChildren_doc$__buildDocskipParentChangeTracking$__original_set$setwillInitskipDefaultstreesubpropsapplyQueue$isMongooseDocumentPrototype'errors'$errors'$locals'locals'$op'$applyDefaultsToNestedplenpathPiecescurPathpiecessplitPathcurpiecedefgetDefaultinvalidate'$*'iidoc_includedtoBSON$__initisVirtual$populatedgetValue_docs_childDocschild$emitschemaTypedocSchema$isRootDiscriminator$__isSelectedhydratedPopulatedDocs_castNullishwasPopulatedsettersoverrideInitapplySetters'cast'populatedDoc$isModifiedqueryPreUpdateOne_middlewarequeryPostUpdateOne$sessionhasEnded'Cannot set a document\'s session to a session that has ended. Make sure you haven\'t ''called `endSession()` on the session you are passing to `$session()`.'$isSubdocument$getAllSubdocs$timestampscurrentValueoverwriteadhocconstructingadhocspathtypeuserSpecifiedStrictadhocPathsinterpretAsType$__isNestedapplyVirtuals_skipMinimizeTopLevelpathNamepathTypevalForKey'nested'isNonBuiltinObject$get'adhocOrUndefined'typeOnly'real''virtual'orderedDocorderedKeyspartssubdocStrictpriorValwasModifiedhasInitialValsavedStateinitialVal$__setValue_skipMarkModifiedunmarkModifiedmarkModifiedaliasesmixedsubpath$isSchemaMap$__schemaTypevirtualpath$__pathpathToMarkgetters$__set$isSingleNested_markValidSubpathsshouldSetrefMatchesrefOptbaseModelNamerefPathdidPopulateunpopulatedValuepopOptstypeKey_isManuallyPopulatedArraysetterContextsingleNestedPathsoverwriteImmutable$isMongooseDocumentArraypopulatedPathspopulatedPath_checkImmutableSubpaths$markValidisImmutableError$originalErrorPathsavedStatePath$__saveInitialStateisInTransactionisModifiedWithinTransactionisDirectModifiedel$__shouldModifygetStatePaths'default''./types/arraySubdocument'shouldModifyprimitiveAtomics'./types/array'isMongooseArray_registerAtomic'$set'isMongooseDocumentArray__parentArraylInvalid \`path\`. Must be either string or array. Got "" (type $inc'Number'valToSetvalToIncsetValuenoDottedPathapplyGetters'Mixed'hasDotadhocTypepathsToScopes$__pathsToScopesfirstDottopLevelPath$ignoredirectModifiedPaths$isEmptyisEmptyOptions_isEmptypLenincludeChildrensubPathmodifiediiiiiiLenignoreAtomicsdirectModifiedPathsObjisModifiedChild~mod$isDefault$isDeletedisDeletedsubdocisInitisSelectedinclusivepathDotisDirectSelectedpathsToValidate'Document.prototype.validate() no longer accepts a callback'$oppathsToSkipisOnePathOnly_skipParallelValidateCheckvalidating$__validate$validate_evaluateRequiredFunctionsrequiredFields'require'originalRequiredValuecachedRequired_getPathsToValidateisNestedValidatedoValidateOptions'.$*'addToPathstopLevelSubdocs$basePathfullPathToSubdoc$__pathRelativeToParentmodifiedPathsubdocParent$parent'Cannot validate subdocument that does not have a parent'$isDocumentArrayElementskipSchemaValidators__index_pathTypevalidators$parentSchemaDocArray$embeddedSchemaType_handlePathsToValidate_handlePathsToSkip_addArrayPathsToValidateflattenOptionsskipArrayspathToCheck_vflat_pushNestedArrayPathsnumElementssaveOptionspathsToSavehasValidateModifiedOnlyOption'validateModifiedOnly'shouldValidateModifiedOnlyvalidateModifiedOnlyvalidateAllPaths'Cannot set both `validateAllPaths` and `pathsToSkip`''Cannot set both `validateAllPaths` and `pathsToValidate`''Cannot set both `validateAllPaths` and `validateModifiedOnly`'_completevalidationErrorerrorserrPathdoValidateOptionsByPathpathDetails_nestedValidate'validate:error'validatedvalidatePath$isValiddoValidateisSubdoc$isArraySubdocument_pathsToValidatevalidateSyncdoValidateSync'user defined'addError$immutableSetteroldVal$__reset$__dirtydirtbackup$__undoResetallPathsminimalhasAtomics_applyDefaultGetters'schema'$__getArrayPathsToValidate'./types/documentArray'seed__subdocssubDocsgetSubdocsnewSubdocschildSchemascallQueuepair'pre''post'$__handleRejecthandleReject$listeners$toObject_defaultToObjectOptionshasOnlyPrimitiveValues$__hasOnlyPrimitiveValues_calledWithOptions_minimize$__schemaTypeOptions_seendepopulate_isNestedparentOptions_parentOptionsschemaFieldsOnlyflattenObjectIds$__toObjectShallowpathToSetobjToSettransformFunctionapplySchemaTypeTransformsuseProjectionomitDeselectedFieldsxformedtoObjectOptionsnumPathsassignPathvirtualsToApplybranchparttopLevelTransformFunctionembeddedSchemaTypeTransformFunctiontransformedValuethrowErrorIfPromisevals'`transform` function must be synchronous, but the transform on path `''` returned a promise.'applyPaths'MongooseDocument { '' }'customtiddocid'Document.prototype.populate() no longer accepts a callback'populateOptionstopLevelModelnestedPath_localModel$getPopulatedDocs_path/\.\$\*$/rest$assertPopulatedExpected path "" to be populatedpopulatedIdsvirtualKeys$$populatedVirtualsvirtualKeyrawArray__arraysinglePath$__fullPathgetChanges$__deltachangesdirtyoptimisticConcurrencyoptConmodPathsdivergentcheckDivergentArraypathSplitpathsToCheckoperand'$unset'$pathhandleAtomicspathSymbolomitUndefined$__version'.$''limit'/\s?-_id\s?/$popshouldSkipVersioning&'$pop''$pull''$pullAll''$push''$addToSet''$inc'/\.\d+\.|\.\d+$//^\$p/$__getAtomicsatomicitermem$eachskipVersioning/\.\d+\./$cloneclonedDocretainDocumentsclonedCache'activePaths'$createModifiedPathsSnapshotsubdocSnapshot$restoreModifiedPathsSnapshotsnapshot$clearModifiedPathsisNativeObject'Decimal128'The core Mongoose document constructor. You should not call this directly,
the Mongoose [Model constructor](./api/model.html#Model) calls this for you.various configuration options for the document
if `false`, skip applying default values to this document.
options.defaults`init`: Emitted on a document after it has been retrieved from the db and fully hydrated by Mongoose.
Boolean flag specifying if the document is new. If you create a document
using `new`, this document will be considered "new". `$isNew` is how
Mongoose determines whether `save()` should use `insertOne()` to create
a new document or `updateOne()` to update an existing document.

#### Example:

const user = new User({ name: 'John Smith' });
user.$isNew; // true

await user.save(); // Sends an `insertOne` to MongoDB

On the other hand, if you load an existing document from the database
using `findOne()` or another [query operation](https://mongoosejs.com/docs/queries.html),
`$isNew` will be false.

#### Example:

const user = await User.findOne({ name: 'John Smith' });
user.$isNew; // false

Mongoose sets `$isNew` to `false` immediately after `save()` succeeds.
That means Mongoose sets `$isNew` to false **before** `post('save')` hooks run.
In `post('save')` hooks, `$isNew` will be `false` if `save()` succeeded.

#### Example:

userSchema.post('save', function() {
this.$isNew; // false
});
await User.create({ name: 'John Smith' });

For subdocuments, `$isNew` is true if either the parent has `$isNew` set,
or if you create a new subdocument.

#### Example:

// Assume `Group` has a document array `users`
const group = await Group.findOne();
group.users[0].$isNew; // false

group.users.push({ name: 'John Smith' });
group.users[1].$isNew; // trueDocument
Hash containing current validation errors.The document's internal schema.The document's schema.Empty object that you can use for storing properties on the document. This
is handy for passing data to middleware without conflicting with Mongoose
internals.

#### Example:

schema.pre('save', function() {
// Mongoose will set `isNew` to `false` if `save()` succeeds
this.$locals.wasNew = this.isNew;
});

schema.post('save', function() {
// Prints true if `isNew` was set before `save()`
console.log(this.$locals.wasNew);
});$localsLegacy alias for `$isNew`.$isNew https://mongoosejs.com/docs/api/document.html#Document.prototype.$isNew
Set this property to add additional query filters when Mongoose saves this document and `isNew` is false.

#### Example:

// Make sure `save()` never updates a soft deleted document.
schema.pre('save', function() {
this.$where = { isDeleted: false };
});The string version of this documents _id.

#### Note:

This getter exists on all documents by default. The getter can be disabled by setting the `id` [option](https://mongoosejs.com/docs/guide.html#id) of its `Schema` to false at construction time.

new Schema({ name: String }, { id: false });Schema options https://mongoosejs.com/docs/guide.html#options
Hash containing current validation $errors.A string containing the current operation that Mongoose is executing
on this document. May be `null`, `'save'`, `'validate'`, or `'remove'`.

#### Example:

const doc = new Model({ name: 'test' });
doc.$op; // null

const promise = doc.save();
doc.$op; // 'save'

await promise;
doc.$op; // nullBuilds the default doc structureHydrates this document with the data in `doc`. Does not run setters or mark any paths modified.

Called internally after a document is returned from MongoDB. Normally,
you do **not** need to call this function on your own.

This function triggers `init` [middleware](https://mongoosejs.com/docs/middleware.html).
Note that `init` hooks are [synchronous](https://mongoosejs.com/docs/middleware.html#synchronous).raw document returned by mongo
If true, hydrate and mark as populated any paths that are populated in the raw document
opts.hydratedPopulatedDocsAlias for [`.init`](https://mongoosejs.com/docs/api/document.html#Document.prototype.init())Internal "init" functionInit helper.document instance
raw mongodb doc
object we are initializing
Optional Options
Call `applySetters` instead of `cast`
opts.settersPrefix to add to each path
Sends an updateOne command with this document `_id` as the query selector.

#### Example:

weirdCar.updateOne({$inc: {wheels:1}}, { w: 1 });

#### Valid options:

- same as in [Model.updateOne](https://mongoosejs.com/docs/api/model.html#Model.updateOne)Model.updateOne https://mongoosejs.com/docs/api/model.html#Model.updateOne
optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and the [Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
options.leanoverwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
(Boolean|String)=(Boolean|String)If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
options.timestampsSends a replaceOne command with this document `_id` as the query selector.

#### Valid options:

- same as in [Model.replaceOne](https://mongoosejs.com/docs/api/model.html#Model.replaceOne())Model.replaceOne https://mongoosejs.com/docs/api/model.html#Model.replaceOne()
Getter/setter around the session associated with this document. Used to
automatically set `session` if you `save()` a doc that you got from a
query with an associated session.

#### Example:

const session = MyModel.startSession();
const doc = await MyModel.findOne().session(session);
doc.$session() === session; // true
doc.$session(null);
doc.$session() === null; // true

If this is a top-level document, setting the session propagates to all child
docs.overwrite the current session
Getter/setter around whether this document will apply timestamps by
default when using `save()` and `bulkSave()`.

#### Example:

const TestModel = mongoose.model('Test', new Schema({ name: String }, { timestamps: true }));
const doc = new TestModel({ name: 'John Smith' });

doc.$timestamps(); // true

doc.$timestamps(false);
await doc.save(); // Does **not** apply timestampsWhen used as a getter (no argument), a boolean will be returned indicating the timestamps option state or if unset "undefined" will be used, otherwise will return "this"
(Document|boolean|undefined)Overwrite all values in this document with the values of `obj`, except
for immutable properties. Behaves similarly to `set()`, except for it
unsets all properties that aren't in `obj`.the object to overwrite this document with
Alias for `set()`, used internally to avoid conflictspath or object of key/vals to set
the value to set
optionally specify a type for "on-the-fly" attributes
(Schema|String|Number|Buffer|*)=(Schema|String|Number|Buffer|*)optionally specify options that modify the behavior of the set
if true, setting a [nested path](https://mongoosejs.com/docs/subdocs.html#subdocuments-versus-nested-paths) will merge existing values rather than overwrite the whole object. So `doc.set('nested', { a: 1, b: 2 })` becomes `doc.set('nested.a', 1); doc.set('nested.b', 2);`
options.mergeSets the value of a path, or many paths.
Alias for [`.$set`](https://mongoosejs.com/docs/api/document.html#Document.prototype.$set()).

#### Example:

// path, value
doc.set(path, value)

// object
doc.set({
path  : value
, path2 : {
path  : value
}
})

// on-the-fly cast to number
doc.set(path, value, Number)

// on-the-fly cast to string
doc.set(path, value, String)

// changing strict mode behavior
doc.set(path, value, { strict: false });Determine if we should mark this change as modified.UNUSED
(String|Symbol)Handles the actual setting of the value and marking the path modified if appropriate.Gets a raw value from a path (no getters)Returns the value from the given `path`.
Increments the numeric value at `path` by the given `val`.
When you call `save()` on this document, Mongoose will send a
[`$inc`](https://www.mongodb.com/docs/manual/reference/operator/update/inc/)
as opposed to a `$set`.

#### Example:

const schema = new Schema({ counter: Number });
const Test = db.model('Test', schema);

const doc = await Test.create({ counter: 0 });
doc.$inc('counter', 2);
await doc.save(); // Sends a `{ $inc: { counter: 2 } }` to MongoDB
doc.counter; // 2

doc.counter += 2;
await doc.save(); // Sends a `{ $set: { counter: 2 } }` to MongoDBpath or paths to update
(String|Array)increment `path` by this value
Sets a raw value for a path (no casting, setters, transformations)Returns the value of a path.

#### Example:

// path
doc.get('age') // 47

// dynamic casting to a string
doc.get('age', String) // "47"optionally specify a type for on-the-fly attributes
Apply virtuals before getting this path
options.virtualsIf false, skip applying getters and just get the raw value
options.gettersReturns the schematype for the given `path`.SchemaPathMarks the path as having pending changes to write to the db.

_Very helpful when using [Mixed](https://mongoosejs.com/docs/schematypes.html#mixed) types._

#### Example:

doc.mixed.type = 'changed';
doc.markModified('mixed.type');
doc.save() // changes to mixed.type are now persistedthe path to mark modified
the scope to run validators with
Document=Clears the modified state on the specified path.

#### Example:

doc.foo = 'bar';
doc.unmarkModified('foo');
doc.save(); // changes to foo will not be persistedthe path to unmark modified
Don't run validation on this path or persist changes to this path.

#### Example:

doc.foo = null;
doc.$ignore('foo');
doc.save(); // changes to foo will not be persisted and validators won't be runthe path to ignore
Returns the list of paths that have been directly modified. A direct
modified path is a path that you explicitly set, whether via `doc.foo = 'bar'`,
`Object.assign(doc, { foo: 'bar' })`, or `doc.set('foo', 'bar')`.

A path `a` may be in `modifiedPaths()` but not in `directModifiedPaths()`
because a child of `a` was directly modified.

#### Example:

const schema = new Schema({ foo: String, nested: { bar: String } });
const Model = mongoose.model('Test', schema);
await Model.create({ foo: 'original', nested: { bar: 'original' } });

const doc = await Model.findOne();
doc.nested.bar = 'modified';
doc.directModifiedPaths(); // ['nested.bar']
doc.modifiedPaths(); // ['nested', 'nested.bar']Returns true if the given path is nullish or only contains empty objects.
Useful for determining whether this subdoc will get stripped out by the
[minimize option](https://mongoosejs.com/docs/guide.html#minimize).

#### Example:

const schema = new Schema({ nested: { foo: String } });
const Model = mongoose.model('Test', schema);
const doc = new Model({});
doc.$isEmpty('nested'); // true
doc.nested.$isEmpty(); // true

doc.nested.foo = 'bar';
doc.$isEmpty('nested'); // false
doc.nested.$isEmpty(); // falseReturns the list of paths that have been modified.if true, returns children of modified paths as well. For example, if false, the list of modified paths for `doc.colors = { primary: 'blue' };` will **not** contain `colors.primary`. If true, `modifiedPaths()` will return an array that contains `colors.primary`.
options.includeChildrenReturns true if any of the given paths is modified, else false. If no arguments, returns `true` if any path
in this document is modified.

If `path` is given, checks if a path or any full path containing `path` as part of its path chain has been modified.

#### Example:

doc.set('documents.0.title', 'changed');
doc.isModified()                      // true
doc.isModified('documents')           // true
doc.isModified('documents.0.title')   // true
doc.isModified('documents otherProp') // true
doc.isDirectModified('documents')     // falseIf true, doesn't return true if path is underneath an array that was modified with atomic operations like `push()`
options.ignoreAtomicsAlias of [`.isModified`](https://mongoosejs.com/docs/api/document.html#Document.prototype.isModified())Checks if a path is set to its default.

#### Example:

MyModel = mongoose.model('test', { name: { type: String, default: 'Val '} });
const m = new MyModel();
m.$isDefault('name'); // trueGetter/setter, determines whether the document was deleted. The `Model.prototype.deleteOne()` method sets `$isDeleted` if the delete operation succeeded.

#### Example:

const product = await product.deleteOne();
product.$isDeleted(); // true
product.deleteOne(); // no-op, doesn't send anything to the db

product.$isDeleted(false);
product.$isDeleted(); // false
product.deleteOne(); // will execute a remove against the dboptional, overrides whether mongoose thinks the doc is deleted
whether mongoose thinks this doc is deleted.
(Boolean|Document)Returns true if `path` was directly set and modified, else false.

#### Example:

doc.set('documents.0.title', 'changed');
doc.isDirectModified('documents.0.title') // true
doc.isDirectModified('documents') // false(String|Array.<String>)=(String|Array.<String>)Checks if `path` is in the `init` state, that is, it was set by `Document#init()` and not modified since.Checks if `path` was selected in the source query which initialized this document.

#### Example:

const doc = await Thing.findOne().select('name');
doc.isSelected('name') // true
doc.isSelected('age')  // falseChecks if `path` was explicitly selected. If no projection, always returns
true.

#### Example:

Thing.findOne().select('nested.name').exec(function (err, doc) {
doc.isDirectSelected('nested.name') // true
doc.isDirectSelected('nested.otherName') // false
doc.isDirectSelected('nested')  // false
})Executes registered validation rules for this document.

#### Note:

This method is called `pre` save and if a validation rule is violated, [save](https://mongoosejs.com/docs/api/model.html#Model.prototype.save()) is aborted and the error is thrown.

#### Example:

await doc.validate({ validateModifiedOnly: false, pathsToSkip: ['name', 'email']});list of paths to validate. If set, Mongoose will validate only the modified paths that are in the given list.
(Array|String)=(Array|String)internal options
if `true` mongoose validates only modified paths.
options.validateModifiedOnlylist of paths to skip. If set, Mongoose will validate every modified path that is not in this list.
options.pathsToSkip(Array|string)=(Array|string)Returns a Promise.
Alias of [`.validate`](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate())Executes registered validation rules (skipping asynchronous validators) for this document.

#### Note:

This method is useful if you need synchronous validation.

#### Example:

const err = doc.validateSync();
if (err) {
handleError(err);
} else {
// validation passed
}only validate the given paths
options for validation
If `true`, Mongoose will only validate modified paths, as opposed to modified paths and `required` paths.
ValidationError if there are errors during validation, or undefined if there is no error.
(ValidationError|undefined)Marks a path as invalid, causing validation to fail.

The `errorMsg` argument will become the message of the `ValidationError`.

The `value` argument (if passed) will be available through the `ValidationError.value` property.

doc.invalidate('size', 'must be less than 20', 14);

doc.validate(function (err) {
console.log(err)
// prints
{ message: 'Validation failed',
name: 'ValidationError',
errors:
{ size:
{ message: 'must be less than 20',
name: 'ValidatorError',
path: 'size',
type: 'user defined',
value: 14 } } }
})the field to invalidate. For array elements, use the `array.i.field` syntax, where `i` is the 0-based index in the array.
the error which states the reason `path` was invalid
(String|Error)optional invalid value
(Object|String|Number|any)optional `kind` property for the error
the current ValidationError, with all currently invalidated paths
Marks a path as valid, removing existing validation errors.the field to mark as valid
Saves this document by inserting a new document into the database if [document.isNew](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()) is `true`,
or sends an [updateOne](https://mongoosejs.com/docs/api/document.html#Document.prototype.updateOne()) operation **only** with the modifications to the database, it does not replace the whole document in the latter case.

#### Example:

product.sold = Date.now();
product = await product.save();

If save is successful, the returned promise will fulfill with the document
saved.

#### Example:

const newProduct = await product.save();
newProduct === product; // trueoptions optional options
the [session](https://www.mongodb.com/docs/manual/reference/server-sessions/) associated with this save operation. If not specified, defaults to the [document's associated session](https://mongoosejs.com/docs/api/document.html#Document.prototype.$session()).
(DEPRECATED) overrides [schema's safe option](https://mongoosejs.com/docs/guide.html#safe). Use the `w` option instead.
options.safeset to false to save without validating.
options.validateBeforeSaveset the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#w-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)
options.w(Number|String)=(Number|String)set to true for MongoDB to wait until this `save()` has been [journaled before resolving the returned promise](https://www.mongodb.com/docs/manual/reference/write-concern/#j-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)
options.jsets a [timeout for the write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern).
options.wtimeoutthe MongoDB driver prevents you from saving keys that start with '$' or contain '.' by default. Set this option to `false` to skip that check. See [restrictions on field names](https://www.mongodb.com/docs/manual/reference/limits/#Restrictions-on-Field-Names)
options.checkKeysif `false` and [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this `save()`.
if this [save updates an existing document](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()) but the document doesn't exist in the database. For example, you will get this error if the document is [deleted between when you retrieved the document and when you saved it](documents.html#updating).
DocumentNotFoundErrormiddleware https://mongoosejs.com/docs/middleware.htmlChecks if a path is invalidthe field to check. If unset will always return "false"
Resets the internal modified state of this document.Returns this documents dirty paths / vals.Assigns/compiles `schema` into this documents prototype.Get active path that were changed and are arraysGet all subdocs (by bfs)options. Currently for internal use.
Internal common logic for toObject() and toJSON()Converts this document into a plain-old JavaScript object ([POJO](https://masteringjs.io/tutorials/fundamentals/pojo)).

Buffers are converted to instances of [mongodb.Binary](https://mongodb.github.io/node-mongodb-native/4.9/classes/Binary.html) for proper storage.

#### Getters/Virtuals

Example of only applying path getters

doc.toObject({ getters: true, virtuals: false })

Example of only applying virtual getters

doc.toObject({ virtuals: true })

Example of applying both path and virtual getters

doc.toObject({ getters: true })

To apply these options to every document of your schema by default, set your [schemas](https://mongoosejs.com/docs/api/schema.html#Schema()) `toObject` option to the same argument.

schema.set('toObject', { virtuals: true })

#### Transform:

We may need to perform a transformation of the resulting object based on some criteria, say to remove some sensitive information or return a custom object. In this case we set the optional `transform` function.

Transform functions receive three arguments

function (doc, ret, options) {}

- `doc` The mongoose document which is being converted
- `ret` The plain object representation which has been converted
- `options` The options in use (either schema options or the options passed inline)

#### Example:

// specify the transform schema option
if (!schema.options.toObject) schema.options.toObject = {};
schema.options.toObject.transform = function (doc, ret, options) {
// remove the _id of every document before returning the result
delete ret._id;
return ret;
}

// without the transformation in the schema
doc.toObject(); // { _id: 'anId', name: 'Wreck-it Ralph' }

// with the transformation
doc.toObject(); // { name: 'Wreck-it Ralph' }

With transformations we can do a lot more than remove properties. We can even return completely new customized objects:

if (!schema.options.toObject) schema.options.toObject = {};
schema.options.toObject.transform = function (doc, ret, options) {
return { movie: ret.name }
}

// without the transformation in the schema
doc.toObject(); // { _id: 'anId', name: 'Wreck-it Ralph' }

// with the transformation
doc.toObject(); // { movie: 'Wreck-it Ralph' }

_Note: if a transform function returns `undefined`, the return value will be ignored._

Transformations may also be applied inline, overridding any transform set in the schema options.
Any transform function specified in `toObject` options also propagates to any subdocuments.

function deleteId(doc, ret, options) {
delete ret._id;
return ret;
}

const schema = mongoose.Schema({ name: String, docArr: [{ name: String }] });
const TestModel = mongoose.model('Test', schema);

const doc = new TestModel({ name: 'test', docArr: [{ name: 'test' }] });

// pass the transform as an inline option. Deletes `_id` property
// from both the top-level document and the subdocument.
const obj = doc.toObject({ transform: deleteId });
obj._id; // undefined
obj.docArr[0]._id; // undefined

If you want to skip transformations, use `transform: false`:

schema.options.toObject = {
hide: '_id',
transform: function(doc, ret, options) {
if (options.hide) {
options.hide.split(' ').forEach(function(prop) {
delete ret[prop];
});
}
return ret;
}
};

const doc = new Doc({ _id: 'anId', secret: 47, name: 'Wreck-it Ralph' });
doc.toObject();                                        // { secret: 47, name: 'Wreck-it Ralph' }
doc.toObject({ hide: 'secret _id', transform: false });// { _id: 'anId', secret: 47, name: 'Wreck-it Ralph' }
doc.toObject({ hide: 'secret _id', transform: true }); // { name: 'Wreck-it Ralph' }

If you pass a transform in `toObject()` options, Mongoose will apply the transform
to [subdocuments](https://mongoosejs.com/docs/subdocs.html) in addition to the top-level document.
Similarly, `transform: false` skips transforms for all subdocuments.
Note that this behavior is different for transforms defined in the schema:
if you define a transform in `schema.options.toObject.transform`, that transform
will **not** apply to subdocuments.

const memberSchema = new Schema({ name: String, email: String });
const groupSchema = new Schema({ members: [memberSchema], name: String, email });
const Group = mongoose.model('Group', groupSchema);

const doc = new Group({
name: 'Engineering',
email: 'dev@mongoosejs.io',
members: [{ name: 'Val', email: 'val@mongoosejs.io' }]
});

// Removes `email` from both top-level document **and** array elements
// { name: 'Engineering', members: [{ name: 'Val' }] }
doc.toObject({ transform: (doc, ret) => { delete ret.email; return ret; } });

Transforms, like all of these options, are also available for `toJSON`. See [this guide to `JSON.stringify()`](https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript.html) to learn why `toJSON()` and `toObject()` are separate functions.

See [schema options](https://mongoosejs.com/docs/guide.html#toObject) for some more details.

_During save, no custom options are applied to the document before being sent to the database._if true, apply all getters, including virtuals
if true, apply virtuals, including aliases. Use `{ getters: true, virtuals: false }` to just apply getters, not virtuals. An object of the form `{ pathsToSkip: ['someVirtual'] }` may also be used to omit specific virtuals.
(Boolean|Object)=(Boolean|Object)if `options.virtuals = true`, you can set `options.aliases = false` to skip applying aliases. This option is a no-op if `options.virtuals = false`.
options.aliasesif true, omit any empty objects from the output
options.minimizeif set, mongoose will call this function to allow you to transform the returned object
options.transform(Function|null)=(Function|null)if true, replace any conventionally populated paths with the original id in the output. Has no affect on virtual populated paths.
options.depopulateif false, exclude the version key (`__v` by default) from the output
options.versionKeyif true, convert Maps to POJOs. Useful if you want to `JSON.stringify()` the result of `toObject()`.
options.flattenMapsif true, convert any ObjectIds in the result to 24 character hex strings.
options.flattenObjectIdsIf true, omits fields that are excluded in this document's projection. Unless you specified a projection, this will omit any field that has `select: false` in the schema.
options.useProjectionIf true, the resulting object will only have fields that are defined in the document's schema. By default, `toObject()` returns all fields in the underlying document from MongoDB, including ones that are not listed in the schema.
options.schemaFieldsOnlydocument as a plain old JavaScript object (POJO). This object may contain ObjectIds, Maps, Dates, mongodb.Binary, Buffers, and other non-POJO values.
mongodb.Binary https://mongodb.github.io/node-mongodb-native/4.9/classes/Binary.html
Applies virtuals properties to `json`.`json`
Applies schema type transforms to `json`.The return value of this method is used in calls to [`JSON.stringify(doc)`](https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript#the-tojson-function).

This method accepts the same options as [Document#toObject](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()). To apply the options to every document of your schema by default, set your [schemas](https://mongoosejs.com/docs/api/schema.html#Schema()) `toJSON` option to the same argument.

schema.set('toJSON', { virtuals: true });

There is one difference between `toJSON()` and `toObject()` options.
When you call `toJSON()`, the [`flattenMaps` option](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()) defaults to `true`, because `JSON.stringify()` doesn't convert maps to objects by default.
When you call `toObject()`, the `flattenMaps` option is `false` by default.

See [schema options](https://mongoosejs.com/docs/guide.html#toJSON) for more information on setting `toJSON` option defaults.if true, convert Maps to [POJOs](https://masteringjs.io/tutorials/fundamentals/pojo). Useful if you want to `JSON.stringify()` the result.
If true, the resulting object will only have fields that are defined in the document's schema. By default, `toJSON()` returns all fields in the underlying document from MongoDB, including ones that are not listed in the schema.
Document#toObject https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()
JSON.stringify() in JavaScript https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript.html
If this document is a subdocument or populated document, returns the document's
parent. Returns the original document if there is no parent.Alias for [`parent()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.parent()). If this document is a subdocument or populated
document, returns the document's parent. Returns `undefined` otherwise.Helper for console.logReturns true if this document is equal to another document.

Documents are considered equal when they have matching `_id`s, unless neither
document has an `_id`, in which case this function falls back to using
`deepEqual()`.a document to compare. If falsy, will always return "false".
Populates paths on an existing document.

#### Example:

// Given a document, `populate()` lets you pull in referenced docs
await doc.populate([
'stories',
{ path: 'fans', sort: { name: -1 } }
]);
doc.populated('stories'); // Array of ObjectIds
doc.stories[0].title; // 'Casino Royale'
doc.populated('fans'); // Array of ObjectIds

// If the referenced doc has been deleted, `populate()` will
// remove that entry from the array.
await Story.delete({ title: 'Casino Royale' });
await doc.populate('stories'); // Empty array

// You can also pass additional query options to `populate()`,
// like projections:
await doc.populate('fans', '-email');
doc.fans[0].email // undefined because of 2nd param `select`either the path to populate or an object specifying all parameters, or either an array of those
(String|Object|Array)Field selection for the population query
(Object|String)=The model you wish to use for population. If not specified, populate will look up the model by the name in the Schema's `ref` field.
Conditions for the population query
Options for the population query (sort, etc)
The path to populate.
options.pathRecursively populate paths in the populated documents. See [deep populate docs](https://mongoosejs.com/docs/populate.html#deep-populate).
options.populate(string|PopulateOptions)=(string|PopulateOptions)PopulateOptionsby default, Mongoose removes null and undefined values from populated arrays. Use this option to make `populate()` retain `null` and `undefined` array entries.
options.retainNullValuesif true, Mongoose will call any getters defined on the `localField`. By default, Mongoose gets the raw value of `localField`. For example, you would need to set this option to `true` if you wanted to [add a `lowercase` getter to your `localField`](https://mongoosejs.com/docs/schematypes.html#schematype-options).
When you do `BlogPost.find().populate('author')`, blog posts with the same author will share 1 copy of an `author` doc. Enable this option to make Mongoose clone populated docs before assigning them.
options.cloneAdd an additional filter to the populate query. Can be a filter object containing [MongoDB query syntax](https://www.mongodb.com/docs/manual/tutorial/query-documents/), or a function that returns a filter object.
options.match(Object|Function)=(Object|Function)Function that Mongoose will call on every populated document that allows you to transform the populated document.
Additional options like `limit` and `lean`.
options.optionsSet to `false` to prevent Mongoose from repopulating paths that are already populated
options.forceRepopulateSet to `true` to execute any populate queries one at a time, as opposed to in parallel. We recommend setting this option to `true` if using transactions, especially if also populating multiple paths or paths with multiple models. MongoDB server does **not** support multiple operations in parallel on a single transaction.
Callback
population https://mongoosejs.com/docs/populate.html
Query#select https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
Model.populate https://mongoosejs.com/docs/api/model.html#Model.populate()
Returns a Promise if no `callback` is given.
Gets all populated documents associated with this document.array of populated documents. Empty array if there are no populated documents associated with this document.
Array.<Document>Gets _id(s) used during population of the given `path`.

#### Example:

const doc = await Model.findOne().populate('author');

console.log(doc.author.name); // Dr.Seuss
console.log(doc.populated('author')); // '5144cf8050f071d979c118a7'

If the path was not populated, returns `undefined`.Any=(Array|ObjectId|Number|Buffer|String|undefined)Alias of [`.populated`](https://mongoosejs.com/docs/api/document.html#Document.prototype.populated()).Throws an error if a given path is not populated

#### Example:

const doc = await Model.findOne().populate('author');

doc.$assertPopulated('author'); // does not throw
doc.$assertPopulated('other path'); // throws an error

// Manually populate and assert in one call. The following does
// `doc.$set({ likes })` before asserting.
doc.$assertPopulated('likes', { likes });path or array of paths to check. `$assertPopulated` throws if any of the given paths is not populated.
optional values to `$set()`. Convenient if you want to manually populate a path and assert that the path was populated in 1 call.
Takes a populated field and returns it to its unpopulated state.

#### Example:

Model.findOne().populate('author').exec(function (err, doc) {
console.log(doc.author.name); // Dr.Seuss
console.log(doc.depopulate('author'));
console.log(doc.author); // '5144cf8050f071d979c118a7'
})

If the path was not provided, then all populated fields are returned to their unpopulated state.Specific Path to depopulate. If unset, will depopulate all paths on the Document. Or multiple space-delimited paths.
Document.populate https://mongoosejs.com/docs/api/document.html#Document.prototype.populate()
Returns the full path to this document.Returns the changes that happened to the document
in the format that will be sent to MongoDB.

#### Example:

const userSchema = new Schema({
name: String,
age: Number,
country: String
});
const User = mongoose.model('User', userSchema);
const user = await User.create({
name: 'Hafez',
age: 25,
country: 'Egypt'
});

// returns an empty object, no changes happened yet
user.getChanges(); // { }

user.country = undefined;
user.age = 26;

user.getChanges(); // { $set: { age: 26 }, { $unset: { country: 1 } } }

await user.save();

user.getChanges(); // { }

Modifying the object that `getChanges()` returns does not affect the document's
change tracking state. Even if you `delete user.getChanges().$set`, Mongoose
will still send a `$set` to the server.Produces a special query document of the modified properties used in updates.Determine if array was populated with some form of filter and is now
being updated in a manner which could overwrite data unintentionally.https://github.com/Automattic/mongoose/issues/1334
(String|undefined)Apply the operation to the delta (update) clause as
well as track versioning for our where clause.Unused
Compiles an update and where clause for a `val` with _atomics.Determines whether versioning should be skipped for the given pathtrue if versioning should be skipped for the given path
Returns a copy of this document with a deep clone of `_doc` and `$__`.a copy of this document
Creates a snapshot of this document's internal change tracking state. You can later
reset this document's change tracking state using `$restoreModifiedPathsSnapshot()`.

#### Example:

const doc = await TestModel.findOne();
const snapshot = doc.$createModifiedPathsSnapshot();a copy of this document's internal change tracking state
Restore this document's change tracking state to the given snapshot.
Note that `$restoreModifiedPathsSnapshot()` does **not** modify the document's
properties, just resets the change tracking state.

This method is especially useful when writing [custom transaction wrappers](https://github.com/Automattic/mongoose/issues/14268#issuecomment-2100505554) that need to restore change tracking when aborting a transaction.

#### Example:

const doc = await TestModel.findOne();
const snapshot = doc.$createModifiedPathsSnapshot();

doc.name = 'test';
doc.$restoreModifiedPathsSnapshot(snapshot);
doc.$isModified('name'); // false because `name` was not modified when snapshot was taken
doc.name; // 'test', `$restoreModifiedPathsSnapshot()` does **not** modify the document's data, only change trackingof the document's internal change tracking state snapshot to restore
Clear the document's modified paths.

#### Example:

const doc = await TestModel.findOne();

doc.name = 'test';
doc.$isModified('name'); // true

doc.$clearModifiedPaths();
doc.name; // 'test', `$clearModifiedPaths()` does **not** modify the document's data, only change trackingconst D ... rray');Diverge ... Array')require ... Array')'./erro ... tArray'./error/divergentArray/error/divergentArrayconst I ... rnal');Interna ... ernal')require ... ernal')./internal/internal./types/bufferconst M ... ixed');MixedSc ... mixed')require ... mixed')./schema/mixed/schema/mixedconst M ... shot');Modifie ... pshot')Modifie ... napshotrequire ... pshot')'./modi ... apshot'./modifiedPathsSnapshot/modifiedPathsSnapshotconst O ... cted');ObjectE ... ected')require ... ected')'./erro ... pected'./error/objectExpected/error/objectExpectedconst O ... eter');ObjectP ... meter')require ... meter')'./erro ... ameter'./error/objectParameter/error/objectParameterconst P ... date');Paralle ... idate')Paralle ... teErrorrequire ... idate')'./erro ... lidate'./error/parallelValidate/error/parallelValidateconst V ... tion');Validat ... ation')require ... ation')./error/validation/error/validationconst V ... ator');Validat ... dator')require ... dator')./error/validator/error/validatorconst $ ... dren');$__hasI ... ldren')$__hasI ... hildrenrequire ... ldren')'./help ... ildren'./helpers/projection/hasIncludedChildren/helpers/projection/hasIncludedChildrenconst a ... ults');applyDe ... aults')require ... aults')'./help ... faults'./helpers/document/applyDefaults/helpers/document/applyDefaultsconst c ... aths');cleanMo ... paths')cleanMo ... ubpathsrequire ... paths')'./help ... bpaths'./helpers/document/cleanModifiedSubpaths/helpers/document/cleanModifiedSubpathsconst c ... ompile;compile ... compilerequire ... compilerequire ... mpile')'./help ... ompile'./helpers/document/compile/helpers/document/compileconst d ... ineKey;defineK ... fineKeyrequire ... fineKeyconst f ... tKey');firstKe ... stKey')require ... stKey')./helpers/firstKey/helpers/firstKeyconst f ... latten;flatten ... flattenrequire ... flattenrequire ... ommon')./helpers/common/helpers/commonconst g ... Path');getEmbe ... rPath')getEmbe ... torPathrequire ... rPath')'./help ... orPath'./helpers/document/getEmbeddedDiscriminatorPath/helpers/document/getEmbeddedDiscriminatorPathconst g ... rder');getKeys ... Order')require ... Order')'./help ... aOrder'./helpers/schema/getKeysInSchemaOrder/helpers/schema/getKeysInSchemaOrdergetSubd ... Value')getSubd ... ctValue'./help ... tValue'./helpers/schema/getSubdocumentStrictValue/helpers/schema/getSubdocumentStrictValueconst h ... dDoc');handleS ... adDoc')require ... adDoc')'./help ... eadDoc'./helpers/document/handleSpreadDoc/helpers/document/handleSpreadDoc'./help ... onType'./helpers/isBsonTypeconst i ... tion');isDefin ... ction')'./help ... ection'./helpers/projection/isDefiningProjection/helpers/projection/isDefiningProjectionconst i ... sive');isExclu ... usive')require ... usive')'./help ... lusive'./helpers/projection/isExclusive/helpers/projection/isExclusiveconst i ... uded');isPathE ... luded')require ... luded')'./help ... cluded'./helpers/projection/isPathExcluded/helpers/projection/isPathExcludedconst i ... nspect;inspect ... inspectconst i ... ptions;require ... Optionsrequire('./options')./options/optionsconst m ... ated');markArr ... lated')markArr ... pulatedrequire ... lated')'./help ... ulated'./helpers/populate/markArraySubdocsPopulated/helpers/populate/markArraySubdocsPopulatedconst m ... mize');minimiz ... imize')require ... imize')./helpers/minimize/helpers/minimizeconst m ... path');mpath = ... mpath')require('mpath')const p ... aths');parentP ... Paths')require ... Paths')'./help ... tPaths'./helpers/path/parentPaths/helpers/path/parentPathsconst q ... pers');queryhe ... lpers')./queryHelpersconst d ... pEqual;deepEqu ... epEqualutils.deepEqualconst i ... Object;isMongo ... eObjectutils.i ... eObjectarrayAt ... pSymbolrequire ... pSymbolconst d ... Parent;documen ... yParentrequire ... yParentconst d ... dified;documen ... odifiedrequire ... odifiedconst d ... dPaths;documen ... edPathsrequire ... edPathsconst d ... Symbol;documen ... aSymbolrequire ... aSymbolconst g ... Symbol;getSymb ... tSymbolrequire ... tSymbolconst m ... Symbol;modelSy ... lSymbolrequire ... lSymbolconst p ... Symbol;populat ... lSymbolconst s ... Symbol;scopeSy ... eSymbolrequire ... eSymbolschemaM ... dSymbolrequire ... dSymbol./schema/symbols/schema/symbolsgetDeep ... rPath')getDeep ... ForPath./helpers/document/getDeepestSubdocumentForPath/helpers/document/getDeepestSubdocumentForPathlet DocumentArray;let MongooseArray;let Embedded;const s ... erties;special ... pertiesutils.s ... pertiesconst V ... RE = 1;VERSION_WHERE = 1const V ... NC = 2;VERSION_INC = 2const V ... ON_INC;VERSION ... ION_INCfunctio ... his);\n}{\n  if  ... his);\n}typeof skipIdskipId != null{\n    o ... Id;\n  }options = skipId;options = skipIdskipId  ... skipId;skipId  ... .skipIdoptions.skipIdif (thi ... {};\n  }this.$_ ... == nullthis.$__schema{\n    c ... {};\n  }const _ ... fields;_schema ...  fieldsutils.i ...  fieldsutils.i ... fSchemautils.i ... fields)!fields ... fSchemafields. ... fSchemanew Schema(fields)fields = skipId;fields = skipIdskipId = options;skipId = optionsoptions ... ] || {}arguments[4] || {}arguments[4]this.$_ ... ache();this.$_ ... Cache()this.$__new InternalCache()if (opt ... ew;\n  }options ... == trueoptions ... != nulloptions.isNew{\n    t ... ew;\n  }this.$i ... .isNew;this.$i ... s.isNewthis.$isNewif (opt ... oc;\n  }options.priorDoc{\n    t ... oc;\n  }this.$_ ... iorDoc;this.$_ ... riorDocthis.$__.priorDocif (ski ... Id;\n  }this.$_ ... skipId;this.$_ ...  skipIdthis.$__.skipIdif (obj ... ');\n  }obj !=  ... object'obj != nullnew Obj ... ument')let defaults = true;defaults = trueif (opt ... ts;\n  }options ... defined{\n    t ... ts;\n  }this.$_ ... faults;this.$_ ... efaultsthis.$__.defaultsdefault ... faults;default ... efaultsconst s ... schema;schema  ... _schemaif (typ ... ct;\n  }typeof  ... 'throw'typeof fieldsfields === 'throw'{\n    i ... ed;\n  }if (fie ... ;\n    }fields !== truethis.$_ ... fields;this.$_ ...  fieldsthis.$__.strictModefields = undefined;fields = undefinedif (sch ... ct;\n  }schema. ... == true{\n    t ... ct;\n  }this.$_ ... strict;this.$_ ... .strictconst r ... (true);require ... s(true)schema. ... s(true)schema.requiredPathsfor (co ... h);\n  }{\n    t ... h);\n  }this.$_ ... (path);this.$_ ... e(path)this.$_ ... requirethis.$__.activePathslet exclude = null;exclude = nullif (uti ... de;\n  }utils.i ... gth > 0utils.isPOJO(fields)Object.keys(fields){\n    e ... de;\n  }exclude ... ields);exclude ... fields)isExclusive(fields)this.$__.selectedthis.$_ ... xclude;this.$_ ... excludethis.$__.excludeconst h ...   null;hasIncl ...    nullexclude ...    nullexclude ...  fieldsexclude === false$__hasI ... fields)this._doc == nullthis._docthis.$_ ... false);this.$_ ...  false)this.$__buildDocif (def ... ;\n    }applyDe ...     });applyDe ...      })skipPar ... g: trueskipPar ... rackingif (obj ...   }\n  }this.$__original_setthis.$_ ... tions);this.$_ ... ptions)this.$s ... tions);this.$s ... ptions)this.$setobj ins ... ocumentthis.$i ... $isNew;this.$i ... .$isNewobj.$isNewif (opt ... s);\n  }options ... efaultsoptions.willInitoptions.skipDefaultsif (def ... s);\n  }applyDe ... aults);applyDe ... faults)if (!th ... });\n  }!this.$ ...  && obj!this.$__.strictModeconst k ... ._doc);keys =  ... s._doc)Object. ... s._doc)keys.fo ...     });keys.fo ... \n    })keys.forEachfunctio ... }\n    }if (!(k ...       }!(key i ... th('$')!(key i ... rtuals)!(key i ... ethods)!(key i ... a.tree)(key in schema.tree)key in schema.treeschema.tree(key in ... ethods)key in  ... methods(key in ... rtuals)key in  ... irtualsschema.virtuals!key.startsWith('$')key.startsWith('$')key.startsWithdefineK ... his });defineK ... this }){ prop: ... _this }prop: keysubprops: nullprototype: _thisapplyQueue(this);applyQueue(this)Documen ... = true;Documen ...  = true$isMong ... ototype{\n  get ... ;\n  }\n}get: fu ... ew;\n  }functio ... ew;\n  }{\n    r ... ew;\n  }return this.$isNew;set: fu ... ue;\n  }functio ... ue;\n  }{\n    t ... ue;\n  }this.$isNew = value;this.$isNew = valueget: fu ... rs;\n  }functio ... rs;\n  }{\n    r ... rs;\n  }return this.$errors;this.$errorsthis.$e ...  value;this.$errors = valueDocumen ... .$isNewutils.e ... ;\n  });utils.e ... ];\n  })utils.eachfunctio ... n];\n  }{\n    D ... n];\n  }Documen ... \n    };Documen ... ;\n    }if (!th ...       }!this.$__.emitterthis.$__.emitterif (emi ...       }emitterFn === 'emit'this.$_ ... tter();this.$_ ... itter()this.$_ ... ers(0);this.$_ ... ners(0)this.$_ ... stenersthis.$_ ... uments)this.$_ ... ].applythis.$_ ... tterFn]Documen ... terFn];Documen ... erFn}`]`$${emitterFn}`for (co ... e[i];\n}{\n  Doc ... e[i];\n}Documen ... ype[i];Documen ... type[i]Document[i]EventEm ... type[i]Documen ... schema;Documen ... _schemaDocumen ... .schemaget: fu ... ls;\n  }functio ... ls;\n  }{\n    i ... ls;\n  }this.$__.localsthis.$_ ... s = {};this.$__.locals = {}return  ... locals;set: fu ...  v;\n  }{\n    t ...  v;\n  }this.$__.locals = v;this.$__.locals = vDocumen ... .isNew;Documen ... e.isNewDocumen ... ype.id;Documen ... type.idDocumen ... errors;Documen ... $errorsget: fu ... ll;\n  }functio ... ll;\n  }return  ... | null;this.$__.op || nullthis.$__.opthis.$__.op = value;this.$__.op = value$applyD ... oNestedif (val ... rn;\n  }const p ... paths);paths = ... .paths)Object. ... .paths)doc.$__schema.pathsdoc.$__schemaconst p ... length;plen = paths.lengthconst p ... t('.');pathPie ... it('.')path.in ... it('.')path.in ...  === -1path.indexOf('.')path.indexOf[path]i < plenlet curPath = '';curPath = ''const p = paths[i];p = paths[i]if (!p. ... ;\n    }!p.star ...  + '.')p.start ...  + '.')p.startsWithconst t ... ths[p];type =  ... aths[p]doc.$__ ... aths[p]const p ... ength);pieces  ... length)type.sp ... length)type.sp ... ).slicetype.splitPath()type.splitPathpathPieces.lengthconst l ... length;len = pieces.lengthpieces.lengthtype.de ...  void 0type.defaultValuelet cur = val;cur = valj < lencur == nullconst p ... ces[j];piece = pieces[j]pieces[j]if (j = ...       }j === len - 1len - 1cur[pie ...  void 0cur[piece]const d ... false);def = t ...  false)type.ge ...  false)type.getDefaultif (def ...       }def !== void 0cur[piece] = def;cur[piece] = defdoc.inv ... , err);doc.inv ... h, err)doc.invalidatepath + '.' + curPathcurPath ...  piece;curPath ... + piece(!curPa ... + piece(!curPa ...  : '.')!curPat ... ' : '.'!curPath.lengthcurPath.lengthcur[pie ...  || {};cur[pie ... ] || {}cur[piece] || {}cur = cur[piece];cur = cur[piece]Documen ... doc;\n};Documen ...  doc;\n}Documen ... uildDocfunctio ...  doc;\n}{\n  con ...  doc;\n}const doc = {};doc = {}const p ... '$*'));paths = ... ('$*'))Object. ... ('$*'))Object. ...  filterthis.$__schema.pathsp => !p ... s('$*')!p.includes('$*')p.includes('$*')p.includes$*let ii = 0;ii = 0for (;  ...   }\n  }ii < plen++iiconst p = paths[ii];p = paths[ii]paths[ii]if (p = ... }\n    }p === '_id'if (ski ...       }if (obj ...       }obj && '_id' in obj'_id' in objconst p ... Path();path =  ... tPath()this.$_ ... tPath()this.$_ ... litPaththis.$_ ... aths[p]len = path.lengthpath.lengthconst l ... en - 1;last = len - 1let doc_ = doc;doc_ = doclet inc ...  false;included = falsei < lenconst p ... ath[i];piece = path[i]path[i]if (!cu ...       }curPath = piece;curPath = piece'.' + pieceif (exc ...       }exclude === truecurPath in fieldsexclude ... ncluded!includedincluded = true;included = trueif (!ha ...       }!hasInc ... urPath]hasIncl ... urPath]if (i < ...       }i < lastdoc_ =  ...  = {});doc_ =  ... ] = {})doc_[pi ... ] = {})doc_[piece](doc_[piece] = {})doc_[piece] = {}this._doc = doc;this._doc = docDocumen ... ns);\n};Documen ... ons);\n}Documen ... .toBSONfunctio ... ons);\n}{\n  ret ... ons);\n}this.to ... ptions)Documen ... his;\n};Documen ... this;\n}Documen ... pe.initif (typ ... ll;\n  }{\n    f ... ll;\n  }fn = opts;fn = optsopts = null;opts = nullthis.$_ ...  opts);this.$_ ... , opts)this.$__initif (fn) ... s);\n  }{\n    f ... s);\n  }fn(null, this);fn(null, this)Documen ... ts);\n};Documen ... nts);\n}Documen ... e.$init{\n  ret ... nts);\n}this.co ... uments)this.co ... t.applythis.co ... pe.initthis.co ... ototypethis.constructorDocumen ... $__initthis.$isNew = false;this.$isNew = falseif (doc ...   }\n  }doc._id ... .lengthdoc._id ... pulateddoc._id != nulldoc._idopts.populatedopts.po ... .lengthconst i ... c._id);id = String(doc._id)String(doc._id)const itemif (ite ...       }item.isVirtualthis.$p ...  item);this.$p ... , item)this.$populateditem.pathutils.g ... h, doc)utils.getValueitem._docs[id]item._docsitem._c ... == nullitem._childDocsconst childif (chi ...       }child = ... == nullchild == nullchild.$__ == nullchild.$__child.$ ... = this;child.$ ...  = thischild.$__.parentitem._c ... s = [];item._childDocs = []init(th ...  opts);init(th ... , opts)markArr ... lated);markArr ... ulated)this.$e ...  this);this.$e ... , this)this.$emitthis.co ...  this);this.co ... , this)this.co ... or.emitthis.$_ ...    nullthis.$_ ... electedthis.$_ ... = false$__hasI ... lected){\n  pre ... }\n  }\n}prefix  ...  || '';prefix  ... x || ''prefix || ''if (obj ... oc;\n  }obj.$__ != nullobj.$__{\n    o ... oc;\n  }obj = obj._doc;obj = obj._docobj._dockeys =  ... ys(obj)len = keys.lengthkeys.lengthlet schemaType;let i;const s ... ctMode;strict  ... ictModeself.$__.strictModeself.$__const d ... schema;docSche ... _schemaself.$__schemaindex < len++indexlet index = 0index = 0i = keys[index];i = keys[index]keys[index]if (spe ... ;\n    }special ... .has(i)special ... ies.haspath =  ...  i : i;path =  ... + i : iprefix  ... + i : iprefix + ischemaT ... (path);schemaT ... h(path)docSchema.path(path)docSchema.pathdocSche ... d(path)docSche ... minator!self.$ ... d(path)self.$_ ... d(path)self.$__isSelectedconst v ... obj[i];value = obj[i]obj[i]if (!sc ... }\n    }!schema ... (value)!schemaTypeutils.isPOJO(value)!doc[i]doc[i]doc[i] = {};doc[i] = {}if (!st ...       }!strict ... rtuals)!strict ... ethods)!strict ... a.tree)!strict!(i in  ... a.tree)(i in d ... a.tree)i in docSchema.treedocSchema.tree!(i in  ... ethods)(i in d ... ethods)i in do ... methodsdocSchema.methods!(i in  ... rtuals)(i in d ... rtuals)i in do ... irtualsdocSchema.virtualsself[i] = doc[i];self[i] = doc[i]self[i]init(se ... + '.');init(se ...  + '.')doc[i] = value;doc[i] = value!strict && !prefix!prefixself[i] = value;self[i] = valuedoc.has ... tedDocsdoc.has ...  void 0doc.has ... erty(i)doc.hasOwnPropertyvalue !== void 0!opts.h ... tedDocsopts.hy ... tedDocshydrate ... tedDocsdelete doc[i];delete doc[i]value === nulldoc[i]  ... (null);doc[i]  ... h(null)schemaT ... h(null)schemaT ... Nullishvalue !== undefinedconst w ... ulated;wasPopu ... pulatedvalue.$ ... pulatedvalue.$__ == nullvalue.$__schemaT ... tedDocsschemaT ... pulated!wasPopulatedopts && opts.settersconst o ...  false;overrideInit = falsedoc[i]  ... eInit);doc[i]  ... deInit)schemaT ... deInit)schemaT ... Settersdoc[i]  ...  true);doc[i]  ... , true)schemaT ... , true)schemaType.castself.in ...    }));self.in ...     }))self.invalidatee.pathnew Val ...      })path: e.pathmessage: e.messagee.messagetype: 'cast'value: e.valuee.valuereason: edoc[i]  ... rue });doc[i]  ... true })schemaT ... true }){ hydra ...  true }hydrate ... s: truedoc[i]  ... pulateddoc[i] && doc[i].$__doc[i].$__doc[i]. ... pulatedself.$p ... tions);self.$p ... ptions)self.$populateddoc[i]. ... d.valuedoc[i]. ... optionsArray.i ... pulatedArray.i ... .lengthArray.i ... doc[i])doc[i].lengthdoc[i][ ... pulateddoc[i][0]?.$__doc[i][0]doc[i]. ... = null)doc[i]. ... .filterdoc[i]. ... .value)doc[i].mappopulat ... ?.valuepopulat ... pulatedpopulatedDoc?.$__val => val != nullval != nulldoc[i][ ... optionsdoc[i][0].$__if (!se ...       }self.$i ... d(path)self.$isModifiedself.$_ ... (path);self.$_ ... t(path)self.$_ ... hs.initself.$__.activePathsDocumen ... ery;\n};Documen ... uery;\n}Documen ... dateOne{\n  con ... uery;\n}const q ... tions);query = ... ptions)this.co ... dateOne{ _id:  ... c._id }_id: this._doc._idthis._doc._idconst self = this;self = thisquery.p ... ;\n  });query.p ... );\n  })query.pre{\n    s ... b);\n  }self.co ... ], cb);self.co ... f], cb)self.co ... execPreself.co ... dlewareself.constructor[self]query.postself.co ... }, cb);self.co ... {}, cb)self.co ... xecPostthis.$s ... != nullthis.$session()this.$sessionif (!(' ... ;\n    }!('sess ... ptions)('sessi ... ptions)'sessio ... optionsquery.optionsquery.o ... sion();query.o ... ssion()query.o ... sessionif (cal ... k);\n  }callback != null{\n    r ... k);\n  }query.exec(callback)return query;Documen ... gs);\n};Documen ... rgs);\n}Documen ... laceOnefunctio ... rgs);\n}{\n  con ... rgs);\n}args.un ... _id });args.un ... ._id })args.unshiftreturn  ...  args);this.co ... , args)this.co ... e.applythis.co ... laceOneDocumen ... ion;\n};Documen ... sion;\n}Documen ... sessionfunctio ... sion;\n}if (arg ... on;\n  }{\n    i ... on;\n  }this.$_ ... asEndedthis.$_ ... != nullthis.$__.sessionthis.$_ ... = null;this.$_ ...  = nullreturn  ... ession;if (ses ... ');\n  }session ... asEndedsession != nullsession.hasEndedthrow n ... ()`.');new Mon ... n()`.')'Cannot ... on()`.''Cannot ... en\'t 'Cannot set a document's session to a session that has ended. Make sure you haven't 'called ... on()`.'called `endSession()` on the session you are passing to `$session()`.Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.Cannot set a document's session to a session that has ended Make sure you haven't called `endSession` on the session you are passing to `if (ses ... rn;\n  }session ... == nullthis.$_ ... ession;this.$_ ... session!this.$isSubdocumentthis.$isSubdocumentconst s ... docs();subdocs ... bdocs()this.$g ... bdocs()this.$getAllSubdocschild.$ ... ssion);child.$ ... ession)child.$sessionDocumen ... estampsif (arg ... ed;\n  }this.$__.timestampsreturn  ... stamps;this.$_ ... estampsthis.$_ ... optionsreturn undefined;const c ... amps();current ... tamps()this.$timestamps()this.$timestampsvalue ! ... ntValuethis.$_ ...  value;this.$_ ... = valueDocumen ... erwriteconst k ... bj))));keys =  ... obj))))Array.f ... obj))))new Set ... (obj)))Object. ... s(obj))Object. ... .concatfor (co ... ]);\n  }{\n    i ... ]);\n  }if (key ... ;\n    }key === '_id'this.$_ ... sionKeykey === ... sionKeythis.$_ ... atorKeykey === ... atorKeythis.$s ... [key]);this.$s ... j[key])obj[key]Documen ... pe.$setif (uti ... ed;\n  }utils.isPOJO(type){\n    o ... ed;\n  }options = type;options = typetype = undefined;type = undefinedconst m ... .merge;merge = ... s.mergeoptions ... s.mergeconst a ... = true;adhoc = ... == truetype && ... == truetype !== trueconst c ... = true;constru ... == truetype === truelet adhocs;let keys;let i = 0;let pathtype;let key;let prefix;const u ... ptions;userSpe ... optionslet str ... ctMode;userSpe ... ictModeif (adh ... s);\n  }adhocs  ...  = {});adhocs  ... s = {})this.$_ ... s = {})this.$__.adhocPaths(this.$ ... s = {})this.$_ ... hs = {}adhocs[ ... tions);adhocs[ ... ptions)adhocs[path]this.$_ ... tAsTypeif (pat ... is;\n  }path == null{\n    [ ... h];\n  }[path,  ...  path];[path,  ... , path][path, val][val, path]if (typ ... is;\n  }typeof pathpath in ... ocumentpath.$__isNestedpath =  ... ject();path =  ... bject()path.toObject()path.toObjectpath =  ... h._doc;path =  ... th._docpath.$_ ... th._docpath.$_ ... _schemapath.$__schemaapplyVi ... _doc }){ ...path._doc }...path._docpath._docif (pat ... ;\n    }prefix  ... ' : '';prefix  ... .' : ''val ? val + '.' : ''val + '.'keys =  ...  path);keys =  ... , path)getKeys ... , path)const _ ...  false;_skipMi ... | false_skipMi ... opLeveloptions ... | falseoptions ... opLevellen === ... opLevellen === 0delete  ... pLevel;delete  ... opLevelthis.$set(val, {});this.$set(val, {})options ... lse });options ... alse })Object. ... alse }){ _skip ... false }_skipMi ... : falsekey = keys[i];key = keys[i]keys[i]const p ...  : key;pathNam ... y : keyprefix  ... y : keyprefix + keypathtyp ... hName);pathtyp ... thName)this.$_ ... thName)this.$_ ... athTypeconst v ... h[key];valForK ... th[key]path[key]type == ... != nulltype == ... nested'type == ... !prefixvalForKey != nullpathtyp ... nested'this._d ... != nullthis._doc[key]delete  ... c[key];delete  ... oc[key]utils.i ... nested'utils.i ... ForKey)utils.i ... nObject$applyD ...  this);$applyD ... , this)this.$get(pathName)this.$getif (con ...       }constru ...  void 0valForKey === void 0this.$g ...  void 0pathtyp ... efined'adhocOrUndefinedpathtyp ... rue });pathtyp ... true })getEmbe ... true }){ typeOnly: true }typeOnly: truepathtyp ... irtual'pathtype === 'real'realpathtyp ... ocumentvalForK ... ocumentvalForK ... alse })valForKey.toObject{ transform: false }throw n ... orKey);new Obj ... ForKey)throw n ... r(key);new Str ... or(key)pathtyp ... == nullvalForKey == nullconst o ... c = {};orderedDoc = {}const o ... .tree);ordered ... a.tree)Object. ... a.tree)this.$__schema.treelet i = ... .lengthlen = o ... .lengthorderedKeys.length(key =  ... fined);(key =  ... efined)(key =  ... y(key))(key =  ... eys[i])key = orderedKeys[i]orderedKeys[i](this._ ... y(key))this._d ... ty(key)this._d ... roperty(ordere ... efined)ordered ... definedorderedDoc[key]this._d ... ._doc);this._d ... s._doc)let pat ... (path);pathTyp ... e(path)let parts = null;parts = nullif (pat ... });\n  }pathTyp ... efined'{\n    p ... });\n  }parts = ... t('.');parts = ... it('.')pathTyp ... rue });pathTyp ... true })if (pat ...   }\n  }pathTyp ... dStrict!userSpecifiedStrictif (par ... ;\n    }parts == nullconst s ... parts);subdocS ...  parts)getSubd ...  parts)if (sub ... ;\n    }subdocS ... definedstrict  ... Strict;strict  ... cStrictval = h ...  true);val = h ... , true)handleS ... , true)const p ...   })();priorVa ... \n  })()(() =>  ... \n  })()(() =>  ... );\n  })() => { ... h);\n  }{\n    i ... h);\n  }return  ... (path);this.$_ ... etValueif (con ... ;\n    }return void 0;this.$__getValuepathTyp ...  && valpathTyp ... nested'{\n    i ... is;\n  }val.$__ != nullval.$__val = v ... tions);val = v ... ptions)val.toO ... ptions)val.toObjectthis.in ... path));this.in ...  path))this.invalidatenew Mon ... , path)Mongoos ... stErrorconst w ... (path);wasModi ... d(path)this.$i ... d(path)this.$isModifiedconst h ... (path);hasInit ... y(path)this.$_ ... y(path)this.$__.savedStatethis.$_ ... ropertythis.$_ ... .$isNew!this.$isNew!this.$ ... y(path)const i ... (path);initial ... e(path)this.$_ ... ialVal;this.$_ ... tialValthis.$_ ... e[path]const k ... || {});keys =  ...  || {})Object. ...  || {})initialVal || {}this.$_ ... l[key];this.$_ ... al[key]this.$_ ...  + key]path + '.' + keyinitialVal[key]if (!me ...       }!mergethis.$_ ...  null);this.$_ ... , null)this.$__setValuecleanMo ...  path);cleanMo ... , path)const k ...  path);this.$_ ... h, {});this.$_ ... th, {})this.$s ... rue });this.$s ... true })val[key]{ ...op ...  true }_skipMa ... d: trueif (pri ...       }priorVa ... l, val)priorVa ... ialVal)priorVal != null(!wasMo ... ialVal)!wasMod ... tialVal!wasModifiedutils.d ... l, val)hasInit ... riorValthis.un ... (path);this.un ... d(path)this.unmarkModifiedthis.ma ... (path);this.ma ... d(path)this.markModifiedlet schema;if (par ... ');\n  }{\n    p ... ');\n  }if (typ ... ]];\n  }typeof  ... rts[0]]this.$_ ... rts[0]]this.$_ ... aliasesparts[0]{\n    p ... ]];\n  }parts[0 ... ts[0]];parts[0 ... rts[0]]if (pat ... h);\n  }pathTyp ...  strictlet mixed;for (i  ... }\n    }i < parts.lengthparts.lengthconst s ... n('.');subpath ... in('.')parts.s ... in('.')parts.s ... 1).joinparts.s ...  i + 1)parts.slicei + 1if (i + ...       }i + 1 < ... irtual'i + 1 < parts.lengththis.$_ ... irtual'this.$_ ... ubpath)mpath.s ...  this);mpath.s ... , this)mpath.setschema  ... bpath);schema  ... ubpath)this.$__schema.pathschema == nullschema  ... dSchemamixed = true;mixed = trueschema. ... gth - 1schema. ... dSchemaschema.$isSchemaMapschema.$__schemaTypei < parts.length - 1parts.length - 1schema  ... maType;schema  ... emaTypeschema  ...  path);schema  ... , path)getEmbe ... , path)if (!mi ... ;\n    }!mixed && !schema!mixedpathTyp ... irtual'{\n    s ... is;\n  }schema  ... (path);schema  ... h(path)this.$_ ... h(path)this.$_ ... ualpathschema. ...  this);schema. ... , this)schema.applySetters{\n    s ... h);\n  }this.$__path(path)this.$__pathlet cur = this._doc;cur = this._docfor (i  ...   }\n  }cur = c ... ts[i]];cur = c ... rts[i]]cur ins ... rts[i]]cur instanceof Mapcur.get(parts[i])cur.getparts[i]cur[parts[i]]curPath ... rts[i];curPath ... arts[i](curPat ... arts[i](curPat ... ' : '')curPath ... .' : ''curPath.length !== 0if (!cu ... ;\n    }!curthis.$s ... h, {});this.$s ... th, {})!this.$ ... urPath)this.$_ ... urPath)this.$__isSelectedthis.un ... rPath);this.un ... urPath)cur = t ... rPath);cur = t ... urPath)let pathToMark;if (par ...   }\n  }parts.length <= 1{\n    p ... th;\n  }pathToMark = path;pathToMark = pathlen = parts.lengththis.$g ... == nullthis.$g ... alse }){ getters: false }getters: falsepathToM ... ubpath;pathToMark = subpathif (!pa ... ;\n    }!pathToMarkif (!sc ... is;\n  }this.$_ ... orVal);this.$_ ... iorVal)this.$__setpathTyp ... == nullif (sch ... h);\n  }schema. ... seArrayschema. ... eNested{\n    _ ... h);\n  }_markVa ...  path);_markVa ... , path)if (val ... is;\n  }val !=  ... eNestedval != null && mergeval ins ... ocumentval = v ... lse });val = v ... alse })val.toO ... alse }){ virtu ... false }keys =  ... ys(val)let sho ... = true;shouldSet = truetry {\n  ... se;\n  }{\n    / ... h);\n  }const r ...   })();refMatc ...    })()(() =>  ...    })()(() =>  ... \n    })schema. ... == nullif (!(v ...       }!(val i ... cument)(val in ... cument)const m ... ructor;model = ... tructorval.constructorconst r ... ns.ref;refOpt  ... ons.reftypeof  ... ons.refschema.options.ref!schema ... Symbol]schema. ... Symbol]schema. ... ef.callconst r ... refOpt;ref = r ...  refOptrefOpt? ...  refOptrefOpt?.modelNameif (ref ...       }ref !=  ... elName)ref != null(ref == ... elName)ref === ... delNamemodel.baseModelNameconst r ... efPath;refPath ... refPathschema. ... refPathrefPath == nullconst m ... fPath);modelNa ... efPath)val.get(refPath)val.getreturn  ... elName;modelNa ... delNamelet did ...  false;didPopulate = falseif (ref ... ;\n    }refMatc ... c._id))refMatc ... ocument(!val.$ ... c._id))!val.$_ ... oc._id)!val.$_ ... pulatedval.$__.wasPopulatedutils.d ... oc._id)val.$__ ... d.valueval._doc._idval._docconst u ... oc._id;unpopul ... doc._id(schema ... doc._id(schema ... Nested)schema  ... eNestedschema.castthis.$p ... tor });this.$p ... ctor }){ [popu ... uctor }[popula ... tructorval.$__ ... alue };val.$__ ... Value }{ value ... Value }value:  ... edValuedidPopulate = true;didPopulate = truelet popOpts;const t ... ypeKey;typeKey ... typeKeythis.$_ ... typeKeyschema. ... 0].ref)schema. ... [0].refschema. ... Key][0]schema. ... .lengthschema. ... peKey])Array.i ... peKey])schema. ... ypeKey]_isManu ... 0].ref)_isManu ... edArraypopOpts ... ctor };popOpts ... uctor }val[0].constructorval[0]this.$p ... pOpts);this.$p ... opOpts)val.map ... _id; })val.mapfunctio ... ._id; }{ retur ... ._id; }return v._doc._id;v._doc._idv._docdoc.$__ ... ._id };doc.$__ ... c._id }doc.$__.wasPopulated{ value ... c._id }value: doc._doc._iddoc._doc._iddoc._docif (!re ... }\n    }!refMat ... val.$__!refMat ... eNested!refMatches!schema ... eNested!val.$__let set ... = this;setterContext = thisthis.$_ ... gth > 1this.$_ ... s[path]this.$_ ... edPathsparts.length > 1setterC ... chema);setterC ... schema)getDeep ... schema)options ... mutableoptions != nullval = s ... rue });val = s ... true })schema. ... true }){ path, ...  true }overwri ... e: trueval = s ... ath });val = s ... path })schema. ... path }){ path }if (Arr ... ;\n    }Array.i ... != nullArray.i ... h !== 0Array.i ... ntArrayArray.i ... schema)!Array. ... schema)schema. ... ntArray$isMong ... ntArrayval.length !== 0val[0] != nullval[0].$__ != nullval[0].$__val[0]. ... != nullval[0].$__.populatedconst p ... lated);populat ... ulated)Object. ... ulated)const populatedPaththis.$p ... tions);this.$p ... ptions)path +  ... tedPathval.map ... dPath))v => v. ... edPath)v.$popu ... edPath)v.$populatedval[0]. ... optionsval[0]. ... edPath]if (!di ... ;\n    }!didPop ... pulated!didPopulatethis.$__.populatedArray.i ... d[path]this.$_ ... d[path]i < val.lengthval[i]  ... ocumentval.set ...  true);val.set ... , true)val.setval[i]._doc._idval[i]._docdelete  ... d[path]_checkI ... orVal);_checkI ... iorVal)_checkI ... ubpathsthis.$m ... (path);this.$m ... d(path)this.$markValidcatch ( ... se;\n  }{\n    i ... se;\n  }if (e i ... ;\n    }e insta ... leErrore insta ... deErrorMongoos ... deErrore.isImmutableErrorthis.in ... th, e);this.in ... ath, e)e insta ... stErrorif (e.$ ...       }e.$originalErrorPaththis.in ... Path));this.in ... rPath))new Mon ... orPath)schema.instancethis.in ... h, e));this.in ... th, e))new Mon ... ath, e)shouldSet = false;shouldSet = falseif (sho ...   }\n  }let sav ... = null;savedState = nullsavedSt ...  = nullif (!co ... ;\n    }!constructingconst d ... : this;doc = t ...  : thisthis.$i ...  : thisthis.ownerDocument()this.ownerDocumentsavedSt ... dState;savedSt ... edStatedoc.$__.savedStatesavedSt ... : path;savedSt ...  : paththis.$i ...  : paththis.$_ ...  + paththis.$_ ... h + '.'this.$__.fullPathdoc.$__ ... ePath);doc.$__ ... tePath)doc.$__ ... alStateconst i ... action;isInTra ... saction!!this. ... saction!this.$ ... sactionthis.$_ ... sactionconst i ... ePath);isModif ... tePath)isModif ... sactionthis.$_ ... tePath)this.$_ ... s(this)this.$_ ... uments]this.$_ ... ts].hasthis.$_ ... t(this)this.$_ ... ts].get!this.$ ... tePath)this.$_ ... ths.hasif (sav ... ;\n    }savedSt ... ePath])savedSt ... action)savedSt ... tePath)savedState != nullsavedSt ... roperty(!isInT ... action)!isInTr ... saction!isInTransactionutils.d ... ePath])savedSt ... tePath]schema. ... = null)(this.i ... = null)this.is ... == nullthis.is ... d(path)this.is ... odified{\n    c ... h);\n  }if (!Ar ... se;\n  }if (val ... se;\n  }const elif (!(e ... ;\n    }!(el in ... cument)(el ins ... cument)el inst ... ocumentconst m ... elName;el.cons ... delNameel.constructormodelName == nullif (el. ... ;\n    }el.cons ...  != refDocumen ... e.$set;Documen ... ype.setDocumen ... lse;\n};Documen ... alse;\n}Documen ... dModifyfunctio ... alse;\n}{\n  if  ... alse;\n}if (opt ... se;\n  }options ... odifiedif (thi ... ue;\n  }if (pat ... ue;\n  }path in ... odify')this.$_ ... odify')this.$_ ... tePathsval === ... d(path)val === void 0!this.$ ... d(path)this.$_ ... d(path){\n    / ... ue;\n  }val === ... fault')path in ... fault')this.$_ ... fault'){\n    / ... se;\n  }if (thi ... se;\n  }this.$p ... iorVal)this.$p ... ocumentthis.$p ... d(path)deepEqu ... iorVal)if (!de ... ue;\n  }!deepEq ...  this))deepEqu ...  this))priorVa ... , this)priorVa ... definedutils.g ... , this)if (!co ... ue;\n  }!constr ... cting))!constr ... fault')!constr ... defined!constr ... == nullval !== nullval !== undefineddeepEqu ... cting))schema. ... ucting)schema.getDefaultDocumen ... \n  }\n};Documen ... }\n  }\n}Documen ... .$__set{\n  Emb ... }\n  }\n}Embedde ... ment');Embedde ... ument')'./type ... cument'./types/arraySubdocument/types/arraySubdocumentconst s ... orVal);shouldM ... iorVal)this.$__shouldModifyif (thi ... }\n    }this.$_ ... Atomicsdelete  ... s[path]Object. ... tomics)delete  ... tomics;delete  ... Atomicsthis.ma ... oMark);this.ma ... ToMark)Mongoos ... ray'));Mongoos ... rray'))(Mongoo ... rray'))Mongoos ... array')require ... array')./types/array/types/arrayval &&  ... ay(val)utils.i ... ay(val)utils.i ... seArrayval._re ... , val);val._re ... ', val)val._registerAtomicutils.i ... ntArrayisMongo ... ntArrayval.for ...      })item && ... = val);item && ...  = val)item && ... ntArrayitem.__parentArray(item._ ...  = val)item.__ ... y = valArray.i ... iorVal)Array.i ... ay(val)utils.i ... iorVal){\n    v ...   }\n  }val[arr ... ymbol];priorVa ... Symbol]doc != nulldoc.$isNew = false;doc.$isNew = falselet obj = this._doc;obj = this._docl = parts.lengthlet cur = '';cur = ''i < lconst next = i + 1;next = i + 1const l ...  === l;last = next === lnext === lcur +=  ... ts[i]);cur +=  ... rts[i])(cur ?  ... rts[i])cur ? ' ... arts[i]'.' + parts[i]special ... rts[i])if (las ... }\n    }obj instanceof Mapobj.set ... , val);obj.set ... ], val)obj.setobj.$isSingleNestedif (!(p ...       }!(parts[i] in obj)(parts[i] in obj)parts[i] in objobj[parts[i]] = val;obj[parts[i]] = valobj[parts[i]]obj._do ...  = val;obj._do ... ] = valobj._doc[parts[i]]if (sho ...       }obj.mar ... ts[i]);obj.mar ... rts[i])obj.markModifiedconst i ... of Map;isMap = ... eof Maplet val ... ts[i]];value = ... rts[i]]isMap ? ... rts[i]]obj.get(parts[i])obj.getobj = value;obj = valuevalue & ... mbeddedvalue i ... mbeddedvalue & ... eNestedvalue & ... (value)value.$ ... eNestedvalue = {};value = {}obj.set ... value);obj.set ...  value)obj[par ...  value;obj[par ... = valueDocumen ... oc);\n};Documen ... doc);\n}Documen ... etValuefunctio ... doc);\n}{\n  if  ... doc);\n}if (typ ...  );\n  }typeof  ... y(path)!Array.isArray(path)Array.isArray(path){\n    t ...  );\n  }throw n ... \n    );new Typ ... `\n    )`Invali ... path})`Invalid ... . Got "Invalid `path`. Must be either string or array. Got "return  ... ._doc);utils.g ... s._doc)Documen ... pe.$incif (val ...  1;\n  }{\n    val = 1;\n  }val = 1;val = 1if (Arr ... is;\n  }{\n    p ... is;\n  }path.fo ...  val));path.fo ... , val))path.forEach(p) =>  ... p, val)this.$inc(p, val)this.$incconst s ... (path);if (sch ... is;\n  }schemaType == nullthis.$_ ... 'throw'this.$_ ... == trueschemaT ... Number'schemaType.instanceconst c ... ) || 0;current ... h) || 0this.$_ ... h) || 0let sho ...  false;let valToSet = null;valToSet = nulllet valToInc = val;valToInc = valtry {\n  ... ));\n  }val = s ... t(val);val = s ... st(val)schemaType.cast(val)valToSe ...  this);valToSe ... , this)schemaT ... , this)currentValue + valvalToIn ... tValue;valToIn ... ntValuevalToSe ... ntValueshouldSet = true;catch ( ... ));\n  }this.in ...  err));this.in ... , err))new Mon ... h, err)if (sho ... t);\n  }{\n    t ... t);\n  }this.$_ ...  || {};this.$_ ... s || {}this.$_ ... oInc };this.$_ ... ToInc }{ $inc: valToInc }$inc: valToIncthis.$_ ... lToInc;this.$_ ... alToIncthis.$_ ... h].$incthis.$_ ... ToSet);this.$_ ... lToSet){\n  uti ... this;\n}utils.s ... ._doc);utils.s ... s._doc)utils.setValueDocumen ... obj;\n};Documen ...  obj;\n}Documen ... ype.get{\n  let ...  obj;\n}let adhoc;options == null{\n    o ... {};\n  }options = {};options = {}if (typ ... s);\n  }adhoc = ... tions);adhoc = ... ptions)const n ... edPath;noDotte ... tedPathoptions.noDottedPathlet sch ... (path);noDotte ... h(path)if (sch ...   }\n  }schema.applyGettersif (noD ... bj;\n  }{\n    l ... bj;\n  }let obj ... [path];obj = t ... c[path]this._doc[path]if (adh ... ;\n    }obj = a ... t(obj);obj = a ... st(obj)adhoc.cast(obj)adhoc.castschema  ... = falseoptions ... = falseschema  ... 'Mixed'schema. ... 'Mixed'virtual ... h(path)if (vir ... ;\n    }virtual != nullschema = virtual;schema = virtualconst h ... !== -1;hasDot  ...  !== -1path.in ...  !== -1const p ... [path];pieces  ...  [path]hasDot  ...  [path]typeof  ... ces[0]]this.$_ ... ces[0]]pieces[0]pieces[ ... es[0]];pieces[ ... ces[0]]l = pieces.lengthobj && obj._docobj = void 0;obj = void 0obj = o ... lse });obj = o ... alse })obj.get ... alse })pieces[i]if (i = ... ;\n    }i === l - 1l - 1obj = u ... , obj);obj = u ... ], obj)utils.g ... ], obj)obj = o ... es[i]];obj = obj[pieces[i]]obj[pieces[i]]if (adh ... j);\n  }{\n    o ... j);\n  }if (sch ... });\n  }{\n    o ... s);\n  }obj = s ...  this);obj = s ... , this)if (thi ... });\n  }this.$_ ... irtualsthis.$_ ... .nestedreturn  ... ath });applyVi ... path })clone(obj) || {}clone(obj){ path: path }path: pathDocumen ... pe.get;Documen ... Symbol]Documen ... pe.$getDocumen ... th);\n};Documen ... ath);\n}Documen ... $__path{\n  con ... ath);\n}const a ... cPaths;adhocs  ... ocPathsconst a ... : null;adhocTy ...  : nulladhocs  ...  : nulladhocs  ... y(path)adhocs. ... y(path)adhocs. ... ropertyif (adh ... pe;\n  }{\n    r ... pe;\n  }return adhocType;Documen ... ;\n  }\n}this.$_ ... alStatethis.$_ ... .modifyif (sco ... pe;\n  }scope ! ... ocumentscope != null{\n    t ... pe;\n  }this.$_ ... oScopesthis.$_ ...  scope;this.$_ ... = scopeDocumen ... alStateconst s ... dState;const s ... = path;savedSt ...  = pathif (sav ...   }\n  }const f ... f('.');firstDo ... Of('.')savedSt ... Of('.')savedSt ... indexOfconst t ... stDot);topLeve ... rstDot)firstDo ... rstDot)firstDot === -1savedSt ... rstDot)savedStatePath.sliceif (!sa ... ;\n    }!savedS ... elPath)savedSt ... elPath)savedSt ... Path));savedSt ... lPath))savedSt ... elPath]clone(t ... lPath))this.$_ ... elPath)this.$_ ... t(path)this.$_ ... hs.initif (thi ... h];\n  }{\n    d ... h];\n  }Documen ... $ignore{\n  thi ... ath);\n}this.$_ ... .ignoreDocumen ... '));\n};Documen ... y'));\n}Documen ... edPathsfunctio ... y'));\n}{\n  ret ... y'));\n}return  ... ify'));Object. ... dify'))Documen ... = 0;\n};Documen ... == 0;\n}Documen ... isEmptyfunctio ... == 0;\n}{\n  con ... == 0;\n}const i ... se\n  };isEmpty ... lse\n  }{\n    m ... lse\n  }minimize: trueif (arg ...  0;\n  }argumen ... h !== 0{\n    c ...  0;\n  }v = this.$get(path)this.$get(path)if (v = ... ;\n    }v == nulltypeof vutils.isPOJO(v)return _isEmpty(v);_isEmpty(v)return  ...  === 0;Object. ... tions))v.toObj ... ptions)v.toObjectif (v = ... ue;\n  }typeof  ... rray(v)Array.isArray(v)Object.keys(v)if (!_i ... ;\n    }!_isEmpty(v[key])_isEmpty(v[key])v[key]Documen ... lt);\n};Documen ... ult);\n}functio ... ult);\n}{\n  opt ... ult);\n}const d ... ify'));directM ... dify'))const r ...  Set();result = new Set()new Set()let j = 0;len = d ... .lengthdirectM ... .lengthconst p ... ths[i];path =  ... aths[i]directM ... aths[i]const p ... (path);parts = ... s(path)parentPaths(path)pLen = parts.lengthfor (j  ... ;\n    }j < pLenresult. ... ts[j]);result.add(parts[j])result.addparts[j]if (!op ... ;\n    }!option ... hildrenoptions ... hildrenlet cur ... (path);cur = t ... t(path)if (typ ... }\n    }typeof curcur !== nullcur._doccur = cur._doc;cur = cur._doclen = cur.lengthcur.lengthArray.isArray(cur)for (ii ...       }ii < lenconst s ... ' + ii;subPath ... .' + iipath + '.' + iiif (!re ...       }!result.has(subPath)result.has(subPath)result.hasresult.add(subPath);result.add(subPath)cur[ii] ... ii].$__cur[ii] != nullcur[ii]cur[ii].$__const m ... aths();modifie ... Paths()cur[ii] ... Paths()cur[ii] ... edPathslet iii = 0;iii = 0const i ... length;iiiLen  ... .lengthmodified.lengthiii < iiiLen++iiiresult. ... [iii]);result. ... d[iii])subPath ... ed[iii]subPath + '.'modified[iii]const k ... s(cur);keys =  ... ys(cur)Object.keys(cur)result. ... s[ii]);result. ... ys[ii])path +  ... eys[ii]keys[ii]return  ... esult);Array.from(result)Documen ... dPaths;Documen ... dPaths]Documen ... y');\n};Documen ... fy');\n}functio ... fy');\n}{\n  if  ... fy');\n}const i ... tomics;ignoreA ... Atomicsoptions ... Atomicsconst d ... modify;directM ... .modifydirectM ... athsObjthis.$_ ... .statesif (dir ... ;\n    }directM ... == nulltypeof pathspaths = ... t(' ');paths = ... it(' ')paths.i ... it(' ')paths.i ...  === -1paths.indexOf(' ')paths.indexOf[paths]paths.split(' ')paths.splitif (dir ...       }directM ... != nulldirectM ... j[path]const m ... ths]();modifie ... aths]()this[do ... aths]()this[do ... dPaths]isModif ... \n    })paths.s ... \n    })paths.some!!~modi ... f(path)!~modif ... f(path)~modifi ... f(path)modifie ... f(path)modified.indexOflet dir ... hsObj);directM ... thsObj)Object. ... thsObj)if (ign ... ;\n    }directM ...     });directM ...      })directM ... .filterpath => ...       }value = ... e(path)value ! ... definedvalue ! ... != nullvalue != nullvalue[a ... != nullvalue[a ... Symbol]value[a ... definedvalue[a ... l].$setdirectM ... hs.somereturn  ... + '.');mod === ...  + '.')mod === pathpath.st ...  + '.')path.startsWithmod + '.'return  ... dify');this.$_ ... hs.someDocumen ... dified]Documen ... h));\n};Documen ... th));\n}Documen ... Defaultfunctio ... th));\n}{\n  if  ... th));\n}if (pat ... ');\n  }return  ... ault');if (typ ... h);\n  }typeof  ...  === -1path.indexOf(' '){\n    r ... h);\n  }let paths = path;paths = pathif (!Ar ... ');\n  }!Array. ... (paths)Array.isArray(paths)return  ... path));paths.s ... (path))path => ... y(path)Documen ... Deleted{\n    r ... ed;\n  }return  ... eleted;!!this.$__.isDeleted!this.$__.isDeletedthis.$__.isDeletedthis.$_ ...  !!val;this.$_ ... = !!val!!val!valconst r ... (path);res = t ... y(path)res ||  ...  === -1pieces  ... it('.')i < pie ... gth - 1pieces.length - 1pieces. ... in('.')pieces. ... 1).joinpieces. ...  i + 1)pieces.sliceconst s ... bpath);subdoc  ... ubpath)this.$get(subpath)if (sub ...       }subdoc  ... n('.'))subdoc  ... != nullsubdoc != nullsubdoc.$__ != nullsubdoc.$__subdoc. ... n('.'))subdoc. ... odifiedpieces.slice(i + 1)path => ... d(path)Documen ... .isInitreturn  ... init');this.$_ ... 'init')Documen ... ive;\n};Documen ... sive;\n}Documen ... electedfunctio ... sive;\n}{\n  if  ... sive;\n}if (!pa ... se;\n  }!pathif (pat ...  0;\n  }path === '_id'return  ...  !== 0;this.$_ ... d !== 0this.$_ ... ted._idpath =  ... t(' ');path =  ... it(' ')path.split(' ')return  ... ed(p));path.so ... ted(p))path.somep => th ... cted(p)this.$_ ... cted(p)const p ... ected);paths = ... lected)Object. ... lected)let inc ... = null;inclusive = nullpaths.l ... = '_id'paths.length === 1paths[0] === '_id'paths[0]{\n    / ...  0;\n  }this.$_ ... d === 0for (co ... ak;\n  }const cur{\n    i ... ak;\n  }cur === '_id'if (!is ... ;\n    }!isDefi ... d[cur])isDefin ... d[cur])this.$_ ... ed[cur]inclusi ... d[cur];inclusi ... ed[cur]!!this. ... ed[cur]!this.$ ... ed[cur]if (inc ... ue;\n  }inclusive === nullif (pat ... ve;\n  }path in ... elected{\n    r ... ve;\n  }return inclusive;const p ...  + '.';pathDot = path + '.'cur.sta ... athDot)cur.startsWithreturn  ... athDot;inclusi ... pathDotcur !== pathDotpathDot ...  + '.')pathDot.startsWithcur + '.'return !inclusive;!inclusiveDocumen ... lected;this.is ... cted(p)this.is ... electedif (thi ... ve;\n  }Documen ...  });\n};Documen ...   });\n}Documen ... alidatetypeof  ... alidate'Docume ... llback'Document.prototype.validate() no longer accepts a callbackthis.$o ... idate';this.$o ... lidate'this.$opif (arg ...   }\n  }typeof  ... nts[0])!Array. ... nts[0])options ... nts[0];options ... ents[0]pathsTo ... = null;pathsTo ...  = nullif (opt ... ');\n  }options ... string'typeof  ... sToSkipconst i ... === -1;isOnePa ...  === -1options ...  === -1options ... Of(' ')options ... indexOfoptions ... t(' ');options ... it(' ')isOnePa ... it(' ')[option ... ToSkip]options ... p.splitconst _ ... eCheck;_skipPa ... teCheckoptions ... teCheckthis.$i ... != null{\n    / ... nts\n  }this.$_ ... teCheckthis.$__.validating!_skipP ... teCheckthrow n ... (this);new Par ... r(this)if (!_s ... ue;\n  }this.$_ ... = true;this.$_ ...  = truethis.$_ ...     });this.$_ ... \n    })this.$__validate(error) ... ;\n    }this.$op = null;this.$op = nullerror != nullDocumen ... lidate;_evalua ... nctionsconst r ... ire'));require ... uire'))Object. ... uire'))doc.$__ ... quire')doc.$__ ... tePathslen = r ... .lengthrequire ... .lengthconst p ... lds[i];path =  ... elds[i]requiredFields[i]p = doc ... h(path)doc.$__ ... h(path)doc.$__schema.pathif (p ! ... }\n    }p != nu ... nction'p != nulltypeof  ... edValuep.origi ... edValueorigina ... edValuedoc.$__ ...  || {};doc.$__ ... d || {}doc.$__ ... equireddoc.$__ ... , doc);doc.$__ ... c, doc)doc.$__ ... d[path]p.origi ... c, doc)p.origi ... ue.callfunctio ... ons];\n}{\n  con ... ons];\n}const d ... s = {};doValid ... ns = {}_evalua ... s(doc);_evalua ... ns(doc)let pat ... \n  }));paths = ... ;\n  }))new Set ... ;\n  }))Object. ... e;\n  })Object. ... .filter{\n    i ... ue;\n  }!doc.$_ ... d(path)doc.$__ ... d(path)doc.$__isSelected!doc.$i ... d(path)doc.$is ... d(path)doc.$isModifiedpath.endsWith('.$*')path.endsWith.$*doc.$__ ... != nullpath in ... equiredreturn  ... [path];Object. ... Paths);Object. ... oPaths)Object. ... init'))doc.$__ ... 'init')doc.$__ ... odify')Object. ... ault'))doc.$__ ... fault')if (p.e ... ;\n    }p.endsWith('.$*')p.endsWithpaths.add(p);paths.add(p)paths.addif (!is ...   }\n  }!isNestedValidateconst t ... s = [];topLevelSubdocs = []schemaT ... eNestedsubdoc  ... t(path)doc.$get(path)doc.$gettopLeve ... ubdoc);topLeve ... subdoc)topLevelSubdocs.pushschemaT ... ntArrayconst a ... (path);arr = doc.$get(path)if (arr ...       }arr && arr.lengtharr.lengthconst subdocdoc.modifiedPaths()doc.modifiedPathssubdoc.$basePathconst f ... rent();fullPat ... arent()subdoc. ... arent()subdoc. ... oParent$__path ... oParentsubdoc. ... Paths()subdoc.modifiedPathsconst modifiedPathpaths.d ... dPath);paths.d ... edPath)paths.deletefullPat ... iedPathfullPat ... c + '.'const s ... rent();subdocP ... arent()subdoc.$parent()subdoc.$parentsubdocParent == nullthrow n ... rent');new Err ... arent')'Cannot ... parent'Cannot validate subdocument that does not have a parentdoc.$is ... Subdoc)doc.$is ... dPaths)!subdoc ... Subdoc)subdocP ... Subdoc)subdocP ... ropertysubdocP ... odify')subdocP ... tePathssubdocP ... vePathssubdocParent.$__subdocP ... Defaultpaths.a ... ubdoc);paths.a ... Subdoc)doc.$__ ... oScopesdoc.$__ ... s = {};doc.$__ ... es = {}doc.$__ ... rent();doc.$__ ... arent()doc.$__ ... Subdoc]subdoc. ... Element$isDocu ... Elementsubdoc.__parentArraydoValid ... true };doValid ...  true }doValid ... Subdoc]{ skipS ...  true }skipSch ... s: truesubdoc. ... != nullsubdoc.__indexdoValid ... _index;doValid ... __indexdoValid ... ].indexconst _ ... (path);_pathTy ... h(path)if (!_p ... ;\n    }!_pathTypeif (_pa ... }\n    }_pathTy ... ntArrayconst pif (p = ...       }p == nu ...  + '.')p == null_pathType.path + '.'_pathType.pathpaths.delete(p);paths.delete(p)!_pathT ... ocArray!_pathT ... h === 0!_pathType.caster_pathType.caster_pathTy ... h === 0_pathTy ... .length_pathType.validators_pathTy ... ocArray$parent ... ocArraypaths.delete(path);paths.delete(path)if (_pa ... ;\n    }_pathTy ... seArray!_pathT ... ntArray!_pathT ... seArray_pathTy ... emaType_pathTy ... idatorsif (Arr ... p);\n  }Array.i ... lidate)paths = ... idate);paths = ... lidate)_handle ... lidate)_handle ... alidateArray.i ... ToSkip){\n    p ... p);\n  }paths = ... oSkip);paths = ... ToSkip)_handle ... ToSkip)_addArr ... paths);_addArr ...  paths)_addArr ... alidateconst f ... true };flatten ...  true }{ skipArrays: true }skipArrays: trueconst pathToCheckdoc.$__ ... oCheck]doc.$__schema.nestedlet _v  ... Check);_v = do ... oCheck)doc.$__ ... oCheck)isMongooseObject(_v)_v = _v ... lse });_v = _v ... alse })_v.toOb ... alse })_v.toObjectconst f ... chema);flat =  ... schema)flatten ... schema)Object. ... (path))Object.keys(flat)!doc.$_ ... y(path)doc.$__ ... y(path)doc.$__ ... ropertydoc.$__ ... edPaths_pathTy ... string'typeof  ... ay.path_pathTy ... ay.pathpaths.a ... .path);paths.a ... y.path)!_pathT ... hemaMap_pathTy ... hemaMapval.keys()val.keyspaths.a ... + key);paths.a ...  + key)paths = ... paths);paths = ... (paths)Array.from(paths)return  ... tions];[paths, ... ptions]!_pathT ... uired))(!Array ... uired))!Array. ... quired)!Array. ... ntArray!Array. ... thType)Array.i ... thType)!(_path ... quired)(_pathT ... quired)_pathTy ... equired_pathTy ... Options_pushNe ...  path);_pushNe ... , path)_pushNe ... ayPathsconst n ... length;numElem ... .lengthj < numElementsArray.i ... val[j])val[j]_pushNe ... ' + j);_pushNe ... .' + j)path + '.' + jpaths.a ... ' + j);paths.a ... .' + j)Documen ...   }\n\n};Documen ... \n  }\n\n}functio ... \n  }\n\n}{\n  if  ... \n  }\n\n}this.$_ ... alidatethis.$_ ... sToSavethis.$__.saveOptions!pathsToValidate{\n    p ... e];\n  }pathsTo ... oSave];pathsTo ... ToSave][...thi ... ToSave]...this ... sToSavecallbac ... lidate;callbac ... alidateoptions = null;options = nullcallback = options;callback = optionsconst h ... tions);hasVali ... ptions)hasVali ... yOptionoptions ... bject')(typeof ... bject')('valid ... ptions)'valida ... options'valida ... edOnly'const p ... | null;pathsTo ... || null(option ... || null(option ... ToSkip)options ... sToSkiplet sho ... edOnly;shouldV ... iedOnlyif (has ... ly;\n  }{\n    s ... ly;\n  }shouldV ... edOnly;!!optio ... iedOnly!option ... iedOnlyoptions ... iedOnlythis.$_ ... iedOnlyconst v ... lPaths;validat ... llPathsoptions ... llPathsthrow n ... kip`');new Typ ... Skip`')'Cannot ... oSkip`'Cannot set both `validateAllPaths` and `pathsToSkip`throw n ... ate`');new Typ ... date`')'Cannot ... idate`'Cannot set both `validateAllPaths` and `pathsToValidate`if (has ... ;\n    }hasVali ... iedOnlythrow n ... nly`');new Typ ... Only`')'Cannot ... dOnly`'Cannot set both `validateAllPaths` and `validateModifiedOnly`const _ ...  }\n  };_comple ...   }\n  }() => { ...   }\n  }let val ... nError;validat ... onErrorthis.$_ ... onErrorif (sho ... }\n    }shouldV ... != nullvalidat ... != nullconst e ... rrors);errors  ... errors)Object. ... errors)validat ... .errorsconst errPath!this.$ ... rrPath)this.$i ... rrPath)delete  ... rPath];delete  ... rrPath]validat ... rrPath]validat ... void 0;validat ...  void 0this.$_ ... d = {};this.$_ ... ed = {}this.$_ ... equiredthis.$e ... _this);this.$e ...  _this)this.co ... _this);this.co ...  _this)!this[d ... stError!this[d ... Parent]this[do ... Parent]validat ... stErrorvalidat ... rs[key]this.in ... [key]);this.in ... s[key])return  ... nError;let paths;let doV ... ByPath;doValid ... sByPathif (val ... 1];\n  }{\n    p ... {};\n  }paths = ... aths));paths = ... paths))new Set ... paths))!schema ... seArrayschemaT ... seArrayval = t ... e(path)if (!va ...       }paths = [...paths];paths = [...paths][...paths]...pathsdoValid ... h = {};doValid ... th = {}{\n    c ... 1];\n  }const p ... idate);pathDet ... lidate)_getPat ... lidate)options ... alidatepaths = ... ils[0];paths = ... ails[0]shouldV ... ails[0]pathDet ... (path))pathDet ... .filterpathDetails[0](path)  ... d(path)doValid ... ils[1];doValid ... ails[1]pathDetails[1]pathsTo ... t(' ');pathsTo ... it(' ')pathsTo ... e.splitpaths.length === 0const e ... lete();error = _complete()_complete()_this.$ ...      })_this.$ ... xecPost_this.$ ... s.hooks_this.$__schema.s_this.$__schemavalidate:error[_this]callbac ... _this);callbac ...  _this)const v ... d = {};validated = {}let total = 0;total = 0let pat ... ToSave;pathsTo ... sToSaveArray.i ... ToSave)pathsTo ... oSave);pathsTo ... ToSave)new Set(pathsToSave)if (!pa ...       }!pathsT ... s(path)pathsTo ... s(path)pathsToSave.hasvalidatePath(path);validatePath(path)path == ... d[path]validated[path]validat ... = true;validat ...  = truetotal++;total++_this.$ ... h(path)_this.$__schema.pathreturn  ... lete();--total ... plete()--totalcomplete()if (!_t ...       }!_this. ... d(path)_this.$isValid(path)_this.$isValid--total ... lete();schemaT ... pe.pathschemaT ... != nullschemaT ... Symbol]path != ... pe.pathschemaType.pathlet val ... (path);val = _ ... e(path)_this.$ ... e(path)_this.$__getValuelet pop;if ((po ...       }(pop =  ... (path))pop = _ ... d(path)_this.$ ... d(path)_this.$populatedval = pop;val = popval !=  ... pulatedval !=  ... != nullval = val._doc._id;val = val._doc._idconst s ...  _this;scope = ...   _this_this.$ ...   _this_this.$ ... oScopes_this.$ ... != null_this.$__path in ... oScopes_this.$ ... s[path]const d ...      };doValid ...       }...doVa ... h[path]doValid ... h[path]_nested ... e: trueschemaT ... tions);schemaT ... ptions)schemaT ... alidateconst i ... tArray;isSubdo ... ntArrayschemaT ... ocumentif (isS ...       }isSubdo ... onErrorerr ins ... onError_this.i ...  true);_this.i ... , true)_this.invalidatefunctio ...  ret;\n}{\n  con ...  ret;\n}const _ ... idate);_pathsT ... lidate)new Set ... lidate)const p ... ap([]);parentP ... Map([])new Map([])let cur = pieces[0];cur = pieces[0]i < pieces.lengthlet i = 1i = 1parentP ...  path);parentP ... , path)parentPaths.setcur = c ... ces[i];cur = c ... eces[i]cur + ' ... eces[i]ret = new Set()_pathsT ... s(path)_pathsToValidate.hasret.add(path);ret.add(path)ret.addparentP ... s(path)parentPaths.hasret.add ... path));ret.add ... (path))parentP ... t(path)parentPaths.getreturn ret;functio ... ths);\n}{\n  pat ... ths);\n}pathsTo ... oSkip);pathsTo ... ToSkip)new Set(pathsToSkip)paths = ... as(p));paths = ... has(p))Array.f ... has(p))Array.f ... .filterp => !p ... .has(p)!pathsToSkip.has(p)pathsToSkip.has(p)pathsToSkip.hasreturn  ... paths);new Set(paths)Documen ... err;\n};Documen ...  err;\n}Documen ... ateSync{\n  con ...  err;\n}if (arg ... ll;\n  }argumen ... object'{\n    o ... ll;\n  }let pat ... ToSkip;pathsTo ... sToSkippathsTo ...  === -1pathsTo ... Of(' ')pathsTo ... indexOf[pathsToValidate]typeof  ...  !== -1typeof pathsToSkippathsTo ...  !== -1pathsToSkip.indexOfpathsToSkip.splitlet ski ... dators;skipSch ... s = {};skipSch ... rs = {}const p ... oSkip);pathDet ... ToSkip)_getPat ... ToSkip)skipSch ... ils[1];skipSch ... ails[1]const v ... g = {};validating = {}len = paths.lengthvalidating[path]p = _th ... h(path)if (!p) ... ;\n    }!pif (!_t ... ;\n    }const e ...     });err = p ... \n    })p.doVal ... \n    })p.doValidateSync{\n      ... s\n    }skipSch ... s[path]validat ... iedOnlyp.$isSi ... ntArrayp.$isSi ... ocumentp.$isSingleNestedp.$isAr ... ocumentp.$isMo ... ntArrayconst e ... nError;err = _ ... onError_this.$ ... onError_this.$ ... efined;_this.$ ... defined_this.$ ... _this);_this.$ ...  _this)_this.$emit_this.c ... _this);_this.c ...  _this)_this.c ... or.emit_this.constructorif (err ...   }\n  }err.errorserr.err ... stErrorerr.errors[key]_this.i ... [key]);_this.i ... s[key])Documen ... ror;\n};Documen ... rror;\n}functio ... rror;\n}{\n  if  ... rror;\n}if (!th ... s);\n  }!this.$ ... onErrorthis.$_ ... (this);this.$_ ... r(this)new Val ... r(this)if (thi ... rn;\n  }this.$_ ... .errorsif (!er ... });\n  }!err || ... string'!errtypeof err{\n    e ... });\n  }err = n ...     });err = n ... \n    })new Val ... \n    }){\n      ... l\n    }message: errtype: k ... efined'kind || ... efined'user definedvalue: valthis.$_ ... === errthis.$_ ... , err);this.$_ ... h, err)this.$_ ... ddErrorDocumen ... rkValidif (!th ... rn;\n  }!this.$ ... s[path]if (Obj ... ll;\n  }if (!do ... rn;\n  }!doc.$_ ... onErrordoc.$__ ... onErrorconst k ... rrors);keys =  ... errors)doc.$__ ... .errorskey.sta ...  + '.')delete  ... s[key];delete  ... rs[key]doc.$__ ... rs[key]{\n    d ... ll;\n  }doc.$__ ... = null;doc.$__ ...  = nullif (sch ... rn;\n  }for (co ... l);\n  }const p ... s[key];path =  ... hs[key]schema.paths[key]path.$i ... == nullpath.$i ... eSetterconst o ... e(key);oldVal  ... ue(key)priorVa ... ue(key)priorVal == nullpriorVal.$__getValuepath.$i ... ldVal);path.$i ... oldVal)path.$i ... er.callDocumen ... ull;\n};Documen ... null;\n}Documen ... isValidfunctio ... null;\n}{\n  if  ... null;\n}this.$_ ... h === 0if (pat ... se;\n  }if (Arr ... l);\n  }path.so ... = null)p => th ... == nullthis.$_ ... rors[p]return  ... = null;Documen ... __resetlet _this = this;const s ... : null;subdocs ...  : null!this.$ ...  : nullthis.$g ... true }){ useCache: true }useCache: trueif (sub ...   }\n  }subdocs ... gth > 0subdocs.length > 0subdocs.lengthsubdoc.$__reset();subdoc.$__reset()subdoc.$__resetthis.$_ ... }\n  });this.$_ ...  }\n  })this.$_ ... forEachthis.$__dirty()this.$__dirtyconst t ... .value;type = dirt.valuedirt.valuetype && ... Symbol]type[ar ... Symbol]type[ar ... ymbol];type[ar ... ] = {};type[ar ... l] = {}this.$_ ... p = {};this.$__.backup = {}this.$__.backupthis.$_ ... ))\n  };this.$_ ... '))\n  }this.$_ ... vePaths{\n    m ... '))\n  }modify: ... dify'))default ... ault'))this.$_ ... nError;this.$_ ... errors;this.$_ ... $errorsthis.$_ ... dify');this.$_ ... s.clearthis.$_ ... ault');this.$_ ... efined;this.$_ ... definedthis.$e ... efined;this.$e ... defined_this = this;this.$_ ... ;\n  });this.$_ ... );\n  })this.$_ ... Paths()functio ... h);\n  }_this.$ ... (path);_this.$ ... require_this.$ ... vePathsDocumen ... doResetthis.$_ ... modify;this.$_ ... efault;this.$_ ... defaultthis.$e ... errors;this.$e ... .errorsconst dirtsubdoc. ... eset();subdoc. ... Reset()subdoc.$__undoResetDocumen ... mal;\n};Documen ... imal;\n}Documen ... __dirtyfunctio ... imal;\n}{\n  con ... imal;\n}let all ... ;\n  });all = t ... };\n  })this.$_ ... };\n  })this.$_ ... ths.mapfunctio ...  };\n  }{\n    r ...  };\n  }return  ... \n    };value:  ... e(path)schema: ... h(path)_this.$__path(path)_this.$__pathall = a ... \n  }));all = a ... ;\n  }))all.con ... ;\n  }))all.concatpath == ... == null_this.$ ... == nullconst a ... lue]));allPath ... alue]))new Map ... alue]))all.fil ... value])all.fil ... ll).mapall.fil ... = null)all.filter(el) => el != nullel != null(el) => ... .value][el.path, el.value]el.pathel.valueconst minimal = [];minimal = []all.for ... }\n  });all.for ...  }\n  })all.forEachif (!it ... ;\n    }!itemlet top = null;top = nullconst a ... .path);array = ... m.path)parentP ... m.path)i < array.length - 1array.length - 1array.lengthif (all ...       }allPath ... ray[i])allPaths.hasarray[i]top = a ... ay[i]);top = a ... ray[i])allPaths.getif (top ... ;\n    }top == nullminimal.push(item);minimal.push(item)minimal.pushtop !=  ... omics()top !=  ... != nulltop != nulltop[arr ... != nulltop[arr ... Symbol]top.hasAtomics()top.hasAtomicstop[arr ... ] = {};top[arr ... l] = {}top[arr ...  = top;top[arr ... t = toptop[arr ... l].$setreturn minimal;Documen ... ema;\n};Documen ... hema;\n}Documen ... tSchemafunctio ... hema;\n}{\n  com ... hema;\n}compile ... tions);compile ... ptions)for (co ... ();\n  }Object. ... rtuals){\n    s ... ();\n  }schema. ... ters();schema. ... tters()schema. ... Gettersschema.virtuals[key]schema. ... chema'){\n    t ... ma;\n  }this.sc ... schema;this.schema = schemathis.$_ ... schema;this.$_ ...  schemathis[do ... schema;this[do ...  schemathis[do ... Symbol]$__getA ... alidate{\n  Doc ...   });\n}Documen ... ray'));Documen ... rray'))(Docume ... rray'))Documen ... Array')'./type ... tArray'./types/documentArray/types/documentArraythis.$_ ... .filterthis.$_ ...  }, [])this.$_ ... .reducethis.$_ ... (this))this.$_ ...    .mapfunctio ... d(this)functio ...  }.bindreturn  ... lue(i);this.$__getValue(i)return  ... length;val &&  ... .lengthreturn  ... array);seed.concat(array)seed.concatreturn doc;Documen ... ocs;\n};Documen ... Docs;\n}Documen ... Subdocsfunctio ... Docs;\n}{\n  if  ... Docs;\n}if (opt ... cs;\n  }options ... subdocsoptions?.useCachethis.$_ ... subdocs{\n    r ... cs;\n  }return  ... ubdocs;const subDocs = [];subDocs = []const n ... s = [];newSubdocs = []doc.$__ ... Schemasconst { model }{ model }const v ... .path);val = d ... l.path)doc.$__ ... l.path)model.pathnewSubd ... h(val);newSubdocs.push(val)newSubdocs.pushif (el  ...       }el != null && el.$__el.$__newSubdocs.push(el);newSubdocs.push(el)val instanceof Mapval.values()val.valuesgetSubdocs(subdoc);getSubdocs(subdoc)subDocs ... bdocs);subDocs ... ubdocs)subDocs.push...newSubdocsgetSubdocs(this);getSubdocs(this)if (thi ... cs;\n  }{\n    t ... cs;\n  }this.$_ ... ubDocs;this.$_ ... subDocsreturn subDocs;const q ... lQueue;q = doc ... llQueuedoc.$__ ... llQueueif (!q. ... rn;\n  }!q.lengthq.lengthconst pairif (pai ... ;\n    }pair[0] ... == 'on'pair[0] ...  'post'pair[0] !== 'pre'pair[0]pair[0] !== 'post'pair[0] !== 'on'doc[pai ... ir[1]);doc[pai ... air[1])doc[pair[0]].applydoc[pair[0]]pair[1]Documen ... eRejectthis.$l ... .lengththis.$l ... error')this.$listenersthis.$e ... , err);this.$e ... ', err)this.co ... .lengththis.co ... stenersthis.co ... error')this.co ... , err);this.co ... ', err)Documen ... ret;\n};Documen ...  ret;\n}Documen ... oObjectconst d ... (json);default ... s(json)this.$_ ... s(json)this.$_ ... Options_defaul ... Optionsconst h ... lues();hasOnly ... alues()hasOnly ... eValuesthis.$_ ... alues()this.$_ ... eValues$__hasO ... eValuesoptions ... } : {};options ...  } : {}utils.i ...  } : {}{ ...options }options ... ions };options ... tions }options ... Optionslet _minimize;if (opt ... ze;\n  }options ... inimize{\n    _ ... ze;\n  }_minimi ... nimize;_minimi ... inimizeif (thi ... ze;\n  }this.$_ ... inimizeif (def ... ze;\n  }default ... != nulldefault ... inimizeoptions ... nimize;if (!ha ... ();\n  }!hasOnl ... eValues{\n    o ... ();\n  }options ...  Map();options ... w Map()options._seenconst d ...  false;depopul ... ? falseoptions ... ? falseoptions ... opulatedefault ... opulateif (dep ... s);\n  }depopul ... pulateddepopul ... sNestedoptions._isNestedthis.$_ ... pulatedclone(t ... ptions)this.$_ ... doc._idthis.$_ ... d.valueif (dep ... ue;\n  }{\n    o ... ue;\n  }options ... = true;options ...  = trueif (def ...   }\n  }options[key] == nulloptions[key]options ... s[key];options ... ns[key]defaultOptions[key]options.json = json;options.json = jsonoptions.jsonconst p ... ptions;parentO ... Optionsoptions ... : null;options ...  : nullthis.$i ...  : nullconst s ...  false;schemaF ... ? falseoptions ... ldsOnlydefault ... ldsOnlyif (has ... {};\n  }hasOnly ... jectIds!option ... jectIdsoptions ... jectIds{\n    / ... y);\n  }ret = t ... sOnly);ret = t ... dsOnly)this.$_ ... dsOnly)this.$_ ... Shallowif (sch ... {};\n  }{\n    r ...   }\n  }ret = {};ret = {}value === undefinedlet pat ... = path;pathToSet = pathlet objToSet = ret;objToSet = retsegment ... it('.')pathToS ... h - 1];pathToS ... th - 1]segment ... th - 1]segments.length - 1segments.lengthi < seg ... gth - 1objToSe ...  ?? {};objToSe ... ] ?? {}objToSe ... nts[i]]segments[i]objToSe ... ts[i]];objToSe ... = null;objToSe ...  = nullobjToSet[pathToSet]objToSe ... tions);objToSe ... ptions)clone(v ... ptions){\n    r ... {};\n  }ret = c ...  || {};ret = c ... ) || {}clone(t ... ) || {}const g ...  false;getters ... ? falseoptions ... gettersdefault ... gettersif (get ...   }\n  }applyGe ... , ret);applyGe ... s, ret)ret = m ...  || {};ret = m ... ) || {}minimize(ret) || {}minimize(ret)const v ... efined;virtual ... definedoptions ... irtualsdefault ... irtualsparentO ... irtualsif (vir ... s);\n  }virtual ...  false)(getter ...  false)getters ... = falsevirtuals !== falseapplyVi ... tions);applyVi ... ptions)if (opt ... y];\n  }options ... sionKey{\n    d ... y];\n  }delete  ... onKey];delete  ... ionKey]ret[thi ... ionKey]const t ... ? true;transfo ... ?? trueoptions ... ?? trueoptions ... ansformlet tra ... efined;transfo ... definedif (tra ... rm;\n  }transform === true{\n    t ... rm;\n  }transfo ... nsform;transfo ... ansformdefault ... ansformif (typ ... rm;\n  }typeof transformif (tra ... t);\n  }{\n    a ... t);\n  }applySc ... , ret);applySc ... s, ret)applySc ... nsformsif (opt ... t);\n  }options ... jection{\n    o ... t);\n  }omitDes ... , ret);omitDes ... s, ret)typeof  ... unctionconst x ... tions);xformed ... ptions)transfo ... ptions)typeof xformedret = xformed;ret = xformedDocumen ... Shallowconst ret = {};this._doc != nullschemaF ... s._doc)const v ... c[key];value = ... oc[key]ret[key ... value);ret[key ... (value)ret[key]ret[key] = value;ret[key] = valuethis.$t ... ptions)this.$toObjectfunctio ... json;\n}{\n  con ... json;\n}const v ... rtuals;virtual ... irtualsconst p ... tuals);paths = ... rtuals)const numPaths = i;numPaths = ilet assignPath;let cur = self._doc;cur = self._docself._doclet v;const a ... : true;aliases ...  : truetypeof  ...  : truetypeof  ... liases)(toObje ... liases)toObjec ... aliaseslet vir ... = null;virtual ...  = nullArray.i ... rtuals){\n    v ... s);\n  }virtual ... tuals);virtual ... rtuals)new Set ... rtuals)if (opt ...   }\n  }virtual ... paths);virtual ... (paths)i < opt ... .lengthif (vir ...       }virtual ... kip[i])virtualsToApply.hasoptions ... Skip[i]virtual ... ip[i]);virtual ... .deleteif (!cu ... on;\n  }{\n    r ... on;\n  }return json;for (i  ...  v;\n  }i < numPaths{\n    p ...  v;\n  }virtual ... s(path)virtual ... != null!virtua ... s(path)if (!al ... ;\n    }!aliase ... y(path)!aliasesschema. ... y(path)schema.aliasesassignPath = path;assignPath = pathoptions.path != null!path.s ...  + '.')options.path + '.'assignP ... h + 1);assignP ... th + 1)path.su ... th + 1)path.substringoptions ... gth + 1options.path.lengthif (ass ... ;\n    }assignP ... == pathassignP ...  === -1assignP ... Of('.')assignPath.indexOfassignPath === pathv = vir ...  self);v = vir ... , self)virtual ... , self)virtual ... Gettersvirtuals[path]if (v = ...       }v === void 0v = clo ... tions);v = clo ... ptions)clone(v, options)json[as ... h] = v;json[assignPath] = vjson[assignPath]assignP ... it('.')assignPath.splitclone(s ... ptions)self.get(path)self.getplen = parts.lengthcur = json;cur = jsonj < plen - 1plen - 1cur[par ...  || {};cur[par ... ] || {}cur[parts[j]]cur[parts[j]] || {}cur = cur[parts[j]];cur = cur[parts[j]]cur[par ... ]] = v;cur[par ... 1]] = vcur[parts[plen - 1]]parts[plen - 1]last = plen - 1let branch = json;branch = jsonlet part;cur = self._doc;if (!se ... ;\n    }let ii = 0part = parts[ii];part = parts[ii]parts[ii]v = cur[part];v = cur[part]cur[part]if (bra ...       }branch  ... object'branch != nulltypeof branchif (ii  ...       }ii === lastbranch[ ...      );branch[ ...       )branch[part]schema. ...       )schema.paths[path]Array.i ... emaTypeArray.i ... [part])schema. ... emaTypei < bra ... .lengthbranch[part].lengthbranch[part][i]if (par ...       }part in curbranch[part] = v;branch[part] = vbranch  ...  = {});branch  ... ] = {})branch[ ... ] = {})(branch[part] = {})branch[part] = {}cur = v;cur = vconst p ... || {});paths = ...  || {})schema.paths || {}const c ... f._doc;const s ... [path];schemat ... s[path]const t ... nsform;topLeve ... ansformtopLeve ... unctionschemat ... ansformschematype.optionsschemat ... Optionsschemat ... tructorconst e ... nsform;embedde ... ansformembedde ... unctionschemat ... optionsschemat ... emaTypeval = s ... t(path)self.$get(path)self.$getval === undefinedconst t ... , val);transfo ... f, val)topLeve ... f, val)topLeve ... on.callthrowEr ... Value);throwEr ... dValue)utils.s ...  json);utils.s ... , json)const v ... t(val);vals =  ... at(val)[].concat(val)[].concati < vals.lengthvals.lengthconst t ... ls[i]);transfo ... als[i])embedde ... als[i])embedde ... on.callvals[i]vals[i] ... dValue;vals[i] ... edValuejson[path] = vals;json[path] = valsjson[path]if (isP ... ');\n  }isPromi ... dValue)throw n ... ise.');new Err ... mise.')'`trans ... omise.''`trans ...  + path'`trans ... path `'`transform` function must be synchronous, but the transform on path `'` retu ... omise.'` returned a promise.let sel ... lected;selecte ... electedself.$__.selectedif (sel ... a);\n  }selected === void 0selected = {};selected = {}queryhe ... chema);queryhe ... schema)queryhe ... lyPathsif (sel ... on;\n  }selecte ... h === 0selected == nullif (sel ... ;\n    }selecte ... d[path]selecte ... != nullselected[path]!selected[path]delete json[path];delete json[path]Documen ... ue);\n};Documen ... rue);\n}Documen ... .toJSONfunctio ... rue);\n}{\n  ret ... rue);\n}this.$t ... , true){\n  return this;\n}Documen ... .parentif (thi ... nt;\n  }this.$i ... pulated{\n    r ... nt;\n  }return  ... parent;this.$__.parentDocumen ... parent;Documen ... $parentDocumen ... inspectconst i ... tions);isPOJO  ... ptions)let opts;if (isP ... se;\n  }{\n    o ... se;\n  }opts = options;opts = optionsopts.mi ...  false;opts.mi ... = falseopts.minimizeconst r ... ject();ret = a ... bject()argumen ... bject()arguments.length > 0this.toObject(opts)if (ret ... }';\n  }ret == null{\n    / ... }';\n  }return  ... + ' }';'Mongoo ...  + ' }''Mongoo ... ' + ret'Mongoo ... ent { 'MongooseDocument {  }if (ins ... pect;\n}inspect.custom{\n  //  ... pect;\n}Documen ... nspect;Documen ... custom]Documen ... et);\n};Documen ... ret);\n}Documen ... oStringfunctio ... ret);\n}{\n  con ... ret);\n}const r ... pect();ret = this.inspect()this.inspect()this.inspectif (typ ... et;\n  }typeof ret{\n    r ... et;\n  }return inspect(ret);inspect(ret)Documen ... cid;\n};Documen ... ocid;\n}Documen ... .equalsfunctio ... ocid;\n}{\n  if  ... ocid;\n}if (!do ... se;\n  }const t ... '_id');tid = t ... ('_id')this.$_ ... ('_id')const d ...  : doc;docid = ... ) : docdoc.$__ ... ) : docdoc.$__ != nulldoc.$__ ... ('_id')if (!ti ... c);\n  }!tid && !docid!tid!docid{\n    r ... c);\n  }deepEqual(this, doc)return  ...  docid;tid &&  ... = docidtid && tid.equalstid.equalstid.equals(docid)tid === docidDocumen ... hs);\n};Documen ... ths);\n}Documen ... opulateasync f ... ths);\n}{\n  con ... ths);\n}const pop = {};pop = {}typeof  ... th - 1]args[ar ... th - 1]args.length - 1args.lengthDocument.prototype.populate() no longer accepts a callbackargs.length !== 0const r ...  args);res = u ... , args)utils.p ... , args)utils.populate.applyutils.populateconst p ... Optionspop[pop ... ptions;pop[pop ... Optionspop[pop ... s.path]populateOptions.pathconst p ... s(pop);paths = ... ls(pop)utils.o ... ls(pop)utils.object.valslet top ... ructor;topLeve ... tructorthis.$__isNestedtopLeve ... ructor;this.$_ ... tructorthis.$_ ... Symbol]nestedP ... tedPaththis.$__.nestedPathpaths.f ...     });paths.f ... \n    })paths.forEachpopulat ... s.path;populat ... ns.pathnestedP ... ns.pathnestedPath + '.'const s ... sion();session ... ssion()path => ... }\n    }path.options == nullpath.optionspath.op ... sion };path.op ... ssion }{ session: session }session: sessionif (!(' ...       }path.op ... ession;path.op ... sessionpath.options.sessionpaths.f ... ;\n  });paths.f ... l;\n  })p => {\n ... el;\n  }{\n    p ... el;\n  }p._loca ... lModel;p._loca ... elModelp._localModeltopLeve ...  paths)topLeve ... opulateDocumen ... ult;\n};Documen ... sult;\n}Documen ... tedDocsfunctio ... sult;\n}{\n  let ... sult;\n}let keys = [];keys = []if (thi ... ));\n  }{\n    k ... ));\n  }keys =  ... ated));keys =  ... lated))keys.co ... lated))keys.concatlet result = [];result = []const v ... t(key);value = ... et(key)this.$get(key)result  ... value);result  ... (value)result.concat(value)result.concatvalue i ... ocumentresult.push(value);result.push(value)result.pushDocumen ... val;\n};Documen ...  val;\n}Documen ... pulated{\n  //  ...  val;\n}if (val ... ed;\n  }val ==  ... == trueval === true!this.$__.populatedconst _ ... : path;_path = ...  : pathpath.en ...  : pathpath.re ... $/, '')path.replace\.\$\*$\$\*const v ... _path];v = thi ... [_path]this.$_ ... [_path]if (v)  ... ;\n    }return  ... .value;val === ... v.valuev.valuethis.$_ ...  = {});this.$_ ... d = {})(this.$ ... d = {})this.$_ ... ions };this.$_ ... tions }{ value ... tions }options: optionsthis.$p ... ubpath)const r ... n('.');rest =  ... in('.')subdoc. ... tions);subdoc. ... ptions)subdoc.$populatedDocumen ... ulated;path.fo ... lues));path.fo ... alues))p => th ... values)this.$a ... values)this.$a ... pulatedif (arg ... s);\n  }arguments.length > 1this.$set(values);this.$set(values)if (!th ... `);\n  }throw n ... ated`);new Mon ... lated`)`Expect ... ulated`path.in ... it(' ')let populatedIds;const v ... ) : [];virtual ... s) : []this.$$ ... s) : []this.$$ ... irtualsconst p ...  || {};populat ... d || {}this.$_ ... d || {}if (arg ... is;\n  }const virtualKeydelete  ... alKey];delete  ... ualKey]this.$$ ... ualKey]this._d ... ualKey]populat ... ualKey]const k ... lated);keys =  ... ulated)populat ... d(key);populat ... ed(key)this.$populated(key)if (!po ...       }!populatedIdsdelete  ... d[key];delete  ... ed[key]populated[key]Array.i ... tedIds)const a ... ._doc);arr = u ... s._doc)arr.isMongooseArrayconst r ... _array;rawArra ... __arrayarr.__arrayi < rawArray.lengthrawArray.lengthconst s ... ray[i];subdoc = rawArray[i]rawArray[i]subdoc == nullrawArra ... oc._id;rawArra ... doc._idsubdoc  ... doc._idsubdoc  ... ocumentsubdoc._doc._idsubdoc._docsubdoc._idconst singlePathpopulat ... ePath);populat ... lePath)this.$p ... lePath)delete  ... ePath];delete  ... lePath]populat ... lePath]if (vir ... }\n    }virtual ...  !== -1virtual ... lePath)virtualKeys.indexOfthis.$$ ... lePath]this._d ... lePath]if (pop ... }\n    }Documen ...  '';\n};Documen ... | '';\n}Documen ... ullPathfunctio ... | '';\n}{\n  //  ... | '';\n}return path || '';path || ''Documen ... ges;\n};Documen ... nges;\n}Documen ... Changesfunctio ... nges;\n}{\n  con ... nges;\n}const d ... elta();delta = ... delta()this.$__delta()this.$__deltaconst c ... ] : {};changes ... 1] : {}delta ? ... 1] : {}delta[1]return changes;Documen ... ta];\n};Documen ... lta];\n}Documen ... __deltafunctio ... lta];\n}{\n  con ... lta];\n}const d ... irty();dirty = ... dirty()const o ... rrency;optimis ... urrencythis.$_ ... urrencyArray.i ... rrency)const o ... rency);optCon  ... rrency)new Set ... rrency)modPath ... Paths()this.modifiedPaths()this.modifiedPathsif (mod ...       }modPath ... (path))modPaths.findpath => ... s(path)optCon.has(path)optCon.hasthis.$_ ... _WHERE;this.$_ ... N_WHEREthis.$__.versiondirty.l ... N_WHEREdirty.lengthif (!di ... rn;\n  }!dirty. ... version!dirty.lengthVERSION ... versionconst where = {};where = {}const delta = {};delta = {}len = dirty.lengthconst d ... t = [];divergent = []let d = 0;d = 0where._ ... oc._id;where._ ... doc._idwhere._idif ((wh ... });\n  }(where  ... != null(where  ... | null)where & ... || nullwhere & ... _id.$__where && where._idwhere._id.$__where._ ... rue });where._ ... true })where._id.toObject{ trans ...  true }depopulate: trued < len++dconst d ... rty[d];data = dirty[d]dirty[d]let val ... .value;value = data.valuedata.valueconst m ... value);match = ...  value)checkDi ...  value)data.pathdiverge ... match);diverge ... (match)divergent.pushconst p ...  true);pop = t ... , true)this.$p ... , true)if (!po ... }\n    }!pop && ... elected!poppathSpl ... it('.')data.path.split('.')data.path.splitconst t ... lit[0];top = pathSplit[0]pathSplit[0]this.$_ ... emMatchthis.$_ ... ed[top]pathSpl ... efined'pathSpl ... 1] == 0pathSplit.length > 1pathSplit.lengthpathSplit[1] == 0pathSplit[1]typeof where[top]where[top]where[t ... d[top];where[t ... ed[top]pathSplit[1] = '$';pathSplit[1] = '$'data.pa ... n('.');data.pa ... in('.')pathSplit.join('.')pathSplit.joindiverge ... .path);diverge ... a.path)this.$i ... electedthis.$i ... a.path)this.$isDefaultdata.pa ... a.path)data.pa ...  === -1data.pa ... Of('.')data.path.indexOfisPathE ... a.path)const p ... .path);pathsTo ... a.path)parentP ... a.path)pathsTo ...  path))pathsToCheck.findpath => ... , path)isPathE ... , path)this.$__.isSelectedif (div ... ntinue;divergent.lengthoperand ... nset');operand ... unset')$unsetunsetoperand ...  null);operand ... , null)if (uti ... }\n    }utils.i ... Symbol]utils.i ... $path()utils.i ... (value)value.$path()value.$pathhandleA ... value);handleA ...  value)value[M ... (value)value[M ... Symbol]Mongoos ... hSymbolvalue = ... ject();value = ... bject()value.toObject()operand ... value);operand ...  value)this.$_ ... a.path]const v ... .path];val = t ... a.path]const o ... y(val);op = firstKey(val)firstKey(val)operand ... ], op);operand ... p], op)val[op]value = ...     });value = ...      })clone(v ...      })omitUndefined: true_isNested: trueif (div ... t);\n  }return  ... rgent);new Div ... ergent)if (thi ... a);\n  }{\n    t ... a);\n  }this.$_ ... delta);this.$_ ...  delta)this.$__versionif (Obj ... l];\n  }Object.keys(delta){\n    r ... l];\n  }return  ...  null];[where, null]return  ... delta];[where, delta]{\n  //  ... }\n  }\n}pop = d ... , true)doc.$po ... , true)doc.$populatedif (!po ...   }\n  }doc.$__.selectedconst t ... .')[0];top = p ... '.')[0]path.split('.')[0]doc.$__ ... + '.$']top + '.$'.$return top;if (!(p ... return;!(pop & ... array))(pop && ... array))pop &&  ... (array)utils.i ... (array)const c ... lect));check = ... elect))pop.opt ... elect))pop.opt ... ns.skippop.opt ... limit')pop.options.matchpop.optionspop.options.optionsutils.o ... limit')pop.options.select(pop.op ... elect))pop.opt ... select)pop.opt ... d === 0pop.opt ... ect._id/\s?-_i ... select)/\s?-_id\s?/.test\s?-_id\s?\s?-_idif (che ...   }\n  }const a ... ymbol];atomics ... Symbol]array[a ... Symbol]if (Obj ... ;\n    }Object. ... cs.$popObject. ... cs.$setObject.keys(atomics)atomics.$setatomics.$popreturn path;op || (op = '$set');op || (op = '$set')(op = '$set')op = '$set'if (!de ... ] = {};!delta[op]delta[op]delta[op] = {};delta[op] = {}delta[o ...  = val;delta[o ... ] = valdelta[op][data.path]if (sel ... return;self.$_ ... = falseself.$_ ... sionKeyself.$_ ... optionsif (sho ... return;shouldS ... a.path)if (VER ... return;VERSION ... ersion)(VERSIO ... ersion)self.$__.versionif (sel ... rn;\n  }self.$_ ... urrencyswitch  ... rn;\n  }case '$set':case '$unset':case '$pop':case '$pull':$pullcase '$pullAll':$pullAllpullAllcase '$push':$pushcase '$addToSet':addToSetcase '$ ...  break;incdefault ... return;if (op  ... RE;\n  }op ===  ... '$pull'op ===  ... ullAll'op ===  ... dToSet'op === '$push'op === '$addToSet'op === '$pullAll'op === '$pull'if (/\. ... ;\n    }/\.\d+\ ... a.path)/\.\d+\ ... $/.test\.\d+\.|\.\d+$\.\d+\.\.\d+$self.$_ ... ON_ALL;self.$_ ... ION_ALLself.$_ ... ON_INC;self.$_ ... ION_INCif (/^\ ... RE;\n  }/^\$p/.test(op)/^\$p/.test^\$p{\n    / ... LL;\n  }if (Arr ... RE;\n  }if (/\. ... RE;\n  }{\n    / ... RE;\n  }self.$_ ... _WHERE;self.$_ ... N_WHEREif (del ... rn;\n  }delta.$ ... a.path]delta.$set{\n    / ... rn;\n  }if (typ ... rn;\n  }typeof  ... Atomicsvalue.$__getAtomics{\n    v ... rn;\n  }value.$ ... \n    })value.$ ... forEachvalue.$ ... omics()const o ... mic[0];op = atomic[0]atomic[0]const v ... mic[1];val = atomic[1]atomic[1]operand ... l, op);operand ... al, op)const o ... omics);ops = O ... tomics)let i = ops.length;i = ops.lengthlet op;if (i = ... e);\n  }i === 0value = ... rue });value = ... true })value.t ... true }){ depop ...  true }depopulate: 1value = ... ueOf();value = ... lueOf()functio ... em;\n  }{\n    r ... em;\n  }return  ...  : mem;utils.i ...   : memutils.i ... ct(mem)mem.toO ... true })mem.toObjectwhile ( ... p);\n  }{\n    o ... p);\n  }op = ops[i];val = atomics[op];val = atomics[op]atomics[op]utils.i ... ct(val)val = v ... rue });val = v ... true })val.toO ... true })val = val.map(iter);val = val.map(iter)val.map(iter)val = val.valueOf();val = val.valueOf()if (op  ... ;\n    }val = { ...  val };val = { $each: val }{ $each: val }$each: valfunctio ... ath];\n}{\n  con ... ath];\n}const s ... ioning;skipVer ... sioningself.$_ ... sioningif (!sk ...  false;!skipVersioningpath =  ... , '.');path =  ... /, '.')path.re ... /, '.')skipVersioning[path]Documen ... Doc;\n};Documen ... dDoc;\n}Documen ... .$clonefunctio ... dDoc;\n}{\n  con ... dDoc;\n}const M ... ructor;Model = ... tructorconst c ... odel();clonedD ... Model()new Model()clonedD ... $isNew;clonedD ... .$isNewclonedDoc.$isNewclonedD ... rue });clonedD ... true })clonedDoc._docclone(t ... true }){ retai ...  true }retainD ... s: trueif (thi ... he;\n  }{\n    c ... he;\n  }const C ... ructor;Cache = ... tructorthis.$__.constructorconst c ... ache();clonedC ... Cache()new Cache()Object. ... is.$__)if (key ...       }key === ... ePaths'clonedC ... [key]);clonedC ... _[key])clonedCache[key]clone(this.$__[key])this.$__[key]Object. ... hs }));Object. ... ths }))clonedC ... vePathsclone({ ... aths }){ ...th ... Paths }...this ... vePathsclonedD ... dCache;clonedD ... edCacheclonedDoc.$__return clonedDoc;Documen ...   );\n};Documen ... \n  );\n}Documen ... napshot$create ... napshot{\n  con ... \n  );\n}const s ... kMap();subdocS ... akMap()new WeakMap()subdocS ... one());subdocS ... lone())subdocSnapshot.setchild.$ ... clone()child.$ ... s.clonechild.$ ... vePathsreturn  ... on\n  );new Mod ... ion\n  )this.$_ ... clone()this.$_ ... s.clone$restor ... napshotthis.$_ ... lone();snapsho ... clone()snapsho ... s.clonesnapshot.activePathsthis.$_ ... ersion;this.$_ ... versionsnapshot.versionif (sna ...       }snapsho ... (child)snapsho ... hot.hassnapsho ... napshotchild.$ ... child);child.$ ... (child)snapsho ... hot.getthis.$_ ... init');this.$_ ... on = 0;this.$__.version = 0child.$ ... aths();child.$ ... Paths()child.$ ... edPathsDocumen ... }));\n};Documen ...  }));\n}Documen ... eValuesfunctio ...  }));\n}{\n  ret ...  }));\n}return  ... \n  }));!this.$ ... ;\n  }))!this.$ ... pulated(this._ ... ;\n  }))this._d ... );\n  })Object. ... );\n  })Object. ... ).everyv => {\n ... ');\n  }return  ... l128');v == nu ... al128')v == nu ... ectId')v == nu ... ray(v))v == nu ... object'(utils. ... ray(v))utils.i ... rray(v)utils.i ... ject(v)utils.isNativeObject!Array.isArray(v)isBsonT ... al128')Documen ... _WHERE;Documen ... N_WHEREDocumen ... ON_INC;Documen ... ION_INCDocument.VERSION_INCDocumen ... ON_ALL;Documen ... ION_ALLDocument.VERSION_ALL/home/insomnia/repos/mongoose/lib/documentProvider.js
 * Returns the Document constructor for the current context
 *
 * @api private
 './document.js'BrowserDocument'./browserDocument.js'isBrowserdocumentProviderReturns the Document constructor for the current contextconst D ... t.js');Documen ... nt.js')require ... nt.js')./document.jsconst B ... t.js');Browser ... nt.js')'./brow ... ent.js'./browserDocument.js/browserDocumentlet isB ...  false;isBrowser = falsemodule. ... ent;\n};module. ... ment;\n}functio ... ment;\n}{\n  if  ... ment;\n}if (isB ... nt;\n  }return  ... cument;return Document;module. ... lag;\n};module. ... flag;\n}module. ... Browserfunctio ... flag;\n}{\n  isB ... flag;\n}isBrowser = flag;isBrowser = flag/home/insomnia/repos/mongoose/lib/driver.jslet driver = null;driver = nullmodule. ... ver;\n};module. ... iver;\n}functio ... iver;\n}{\n  return driver;\n}return driver;module. ... = v;\n};module. ...  = v;\n}functio ...  = v;\n}{\n  driver = v;\n}driver = v;driver = v/home/insomnia/repos/mongoose/lib/drivers/browser/binary.js/home/insomnia/repos/mongoose/lib/drivers/browser/home/insomnia/repos/mongoose/lib/driversrequire ... .Binarymodule. ... Binary;module. ...  Binaryexports = Binary/home/insomnia/repos/mongoose/lib/drivers/browser/decimal128.jsrequire ... imal128/home/insomnia/repos/mongoose/lib/drivers/browser/index.js'Cannot create a collection from browser library''Cannot create a connection from browser library'exports ... y');\n};exports ... ry');\n}exports.Collectionfunctio ... ry');\n}{\n  thr ... ry');\n}throw n ... rary');new Err ... brary')'Cannot ... ibrary'Cannot create a collection from browser libraryexports.ConnectionCannot create a connection from browser libraryexports ... n() {};exports ... on() {}exports ... eResult/home/insomnia/repos/mongoose/lib/drivers/browser/objectid.js!
 * [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) ObjectId
 * @constructor NodeMongoDbObjectId
 * @see ObjectId
 /*!\n *  ... tId\n */
 * Getter for convenience with populate, see gh-6115
 * @api private
 ObjectIDGetter for convenience with populate, see gh-6115const O ... jectID;ObjectI ... bjectIDrequire ... bjectIDObjectId.prototype{\n  enu ... ;\n  }\n}get: fu ... is;\n  }exports = ObjectId/home/insomnia/repos/mongoose/lib/drivers/node-mongodb-native/bulkWriteResult.js/home/insomnia/repos/mongoose/lib/drivers/node-mongodb-native'mongodb/lib/bulk/common'require ... eResult'mongod ... common'mongodb/lib/bulk/common/home/insomnia/repos/mongoose/lib/drivers/node-mongodb-native/collection.js
 * A [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) collection implementation.
 *
 * All methods methods from the [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) driver are copied and wrapped in queue management.
 *
 * @inherits Collection https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html
 * @api private
 !
 * Inherit from abstract Collection.
 /*!\n *  ... on.\n */
 * Called when the connection opens.
 *
 * @api private
 
 * Called when the connection closes
 *
 * @api private
 
 * Helper to get the collection, in case `this.collection` isn't set yet.
 * May happen if `bufferCommands` is false and created the model when
 * Mongoose was disconnected.
 *
 * @api private
 
 * Copy the collection methods and make them subject to queues
 * @param {Number|String} I
 * @api private
  If user force closed, queueing will hang forever. See #5664// If u ... e #5664 Collection operation may throw because of max bson size, catch it here// Coll ... it here See gh-3906// See gh-3906 Janky hack to work around gh-3005 until we can get rid of the mongoose// Jank ... ongoose collection abstraction// coll ... raction Skip properties with getters because they may throw errors (gh-8528)// Skip ... h-8528)
 * Debug print helper
 *
 * @api public
 * @method $print
 
 * Formatter for debug print args
 *
 * @api public
 * @method $format
 
 * Debug print helper
 * @param {Any} representation
 * @api private
  `sub` indicates `format()` was called recursively, so skip cloning because we already// `sub ... already did a deep clone on the top-level object.// did  ... object. `session.toBSON()` throws an error. This means we throw errors// `ses ...  errors in debug mode when using transactions, see gh-6712. As a// in d ... 2. As a workaround, catch `toBSON()` errors, try to serialize without// work ... without `toBSON()`, and rethrow if serialization still fails.// `toB ...  fails. If there was an error with `toBSON()` and the object wasn't// If t ...  wasn't already converted to a string representation, rethrow it.// alre ... row it. Open to better ideas on how to handle this.// Open ... e this.
 * Retrieves information about this collections indexes.
 *
 * @method getIndexes
 * @api public
 MongooseCollection'../../collection''../../error/mongooseError''mongodb''../../types/objectid''../../helpers/getConstructorName''../../options'formatToObjectOptionscopyTrustedSymbolNativeCollection_getCollectionsyncCollectionMethodsglobalDebugconnectionDebuglastArgopId'Connection was force closed'_args'buffer'collectionOperationCallbackremoved'Operation `''()` buffering timed out after ''buffer-end''operation-end'argsToAdd$printToStream$print'operation-start''Cannot call `''()` before initial connection ''is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if ''you have `bufferCommands = false`.'moduleName'\x1B[0;36mMongoose:\x1B[0m ''Mongoose: 'functionCall$format'('')'inspectablerepresentationformatObjectId'ObjectId("'toHexString'")'formatDate'ISODate("''new Date("''../../helpers/clone'constructorName'Binary''BinData('sub_type', "''base64''Date'numKeys_constructorName'ClientSession''ClientSession("'/\n/g/\s{2,}/gindexInformationA [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) collection implementation.

All methods methods from the [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) driver are copied and wrapped in queue management.Collection https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html
Called when the connection opens.Helper to get the collection, in case `this.collection` isn't set yet.
May happen if `bufferCommands` is false and created the model when
Mongoose was disconnected.Copy the collection methods and make them subject to queuesIDebug print helperFormatter for debug print argsRetrieves information about this collections indexes.const M ... tion');Mongoos ... ction')../../collection/collection'../../ ... eError'../../error/mongooseErrorrequire ... lectionrequire('mongodb')'../../ ... jectid'../../types/objectid'../../ ... orName'../../helpers/getConstructorName../../optionsconst s ... ream');stream  ... tream')const f ... lse });formatT ... alse })formatT ... Options{ ...in ... false }...inte ... OptionscopyTru ... : false{\n  thi ... nts);\n}this.co ... = null;this.co ...  = nullthis.collectionthis.Pr ... romise;this.Pr ... Promisethis.Promiseoptions ... Promiseoptions.Promisethis.mo ... elName;this.mo ... delNamethis.modelNameoptions.modelNamedelete  ... elName;delete  ... delNameMongoos ... ments);Mongoos ... uments)Mongoos ... n.applyNativeC ... ototypeMongoos ... ototypeNativeC ... ion;\n};NativeC ... tion;\n}NativeC ... .onOpenfunctio ... tion;\n}{\n  thi ... tion;\n}this.co ... .name);this.co ... s.name)this.co ... lectionthis.conn.dbMongoos ... (this);Mongoos ... l(this)Mongoos ... en.callMongoos ... .onOpenreturn  ... ection;NativeC ... ce);\n};NativeC ... rce);\n}NativeC ... onClosefunctio ... rce);\n}{\n  Mon ... rce);\n}Mongoos ... force);Mongoos ...  force)Mongoos ... se.callMongoos ... onCloseNativeC ... ull;\n};NativeC ... null;\n}NativeC ... lectionif (thi ... on;\n  }this.conn.db != nullconst s ... true };syncCol ...  true }syncCol ... Methods{ watch ...  true }watch: truefind: trueaggregate: true{\n  Nat ... \n  };\n}NativeC ...  }\n  };NativeC ...   }\n  }NativeC ... type[i]const c ... tion();collect ... ction()this._g ... ction()this._getCollectionconst a ... ments);args =  ... uments)Array.f ... uments)const g ... .debug;globalD ... s.debug_this & ... s.debug_this & ... options_this & ... nn.base_this & ... is.conn_this.conn_this.conn.base_this.c ... options_this.c ... s.debugconst c ... .debug;connect ... s.debug_this.conn.optionsconst d ... nDebug;debug = ... onDebugconnect ... onDebugconnect ... == nullconst l ... h - 1];lastArg ... th - 1]argumen ... th - 1]arguments.length - 1const o ... ctId();opId =  ... ectId()this.co ... eClosedconst e ... osed');error = ... losed')new Mon ... losed')'Connec ... closed'Connection was force closedargs.le ... nction'args.length > 0args[ar ... error);args[ar ... (error)let _args = args;_args = argslet callback = null;callback = nullthis._s ... .bufferthis.co ...     });this.co ...      })this.conn.emit_id: opId_this.modelNamecollect ... is.name_this.namemethod: iargs: argslet callback;let promise = null;promise = nullif (syn ...       }syncCol ... nction'syncCol ... hods[i]typeof lastArgthis.ad ... _args);this.ad ...  _args)this.addQueuecallback = lastArg;callback = lastArgpromise ...     });promise ...      })new thi ...      })callbac ...      };callbac ...       }collect ... allbackif (tim ...       }_args = ... back]);_args = ... lback])args.co ... lback])args.concat[callback]lastArg ... uments)lastArg.applyargs.sl ... lback])args.sl ... .concatargs.sl ... th - 1)args.slicetimeout ... outMS);timeout ... eoutMS)setTime ... eoutMS)const r ... _args);removed ...  _args)this.re ...  _args)this.removeQueueif (rem ...       }'Operat ...  + 'ms''Operat ... meoutMS'Operat ... after ''Operat ... '.' + i'Operat ... e + '.''Operat ... is.nameOperation `'()` bu ... after '()` buffering timed out after const e ... ssage);err = n ... essage)this.co ... err });this.co ...  err })buffer-end{ _id:  ... : err }error: errif (!sy ...       }!syncCo ... nction'!syncCo ... hods[i]return promise;if (!sy ... ;\n    }_this.c ... err });_this.c ...  err })_this.conn.emitoperation-end_this.c ... res });_this.c ...  res }){ _id:  ... : res }result: resif (deb ... }\n    }typeof debuglet arg ... = null;argsToAdd = nullargsToA ... h - 1);argsToA ... th - 1)argsToAdd = args;argsToAdd = argsdebug.a ... oAdd));debug.a ... ToAdd))debug.apply[_this. ... sToAdd)[_this. ... .concat[_this.name, i]if (deb ...       }debug i ... ritablestream.Writablethis.$p ... debug);this.$p ...  debug)this.$printToStreamconst c ... .color;color = ... g.colordebug.c ... g.colordebug.color == nulldebug.colorconst s ... .shell;shell = ... g.shelldebug.s ... g.shelldebug.shell == nulldebug.shellthis.$p ... shell);this.$p ...  shell)this.$printthis.co ... rgs });this.co ... args })operation-start{ _id:  ... _args }params: _argsif (col ...       }collection == nullconst m ... lse`.';message ... alse`.''Cannot ... alse`.''Cannot ... )` if ''Cannot ... ction ''Cannot ... '.' + i'Cannot ... e + '.''Cannot ... is.nameCannot call `'()` be ... ction '()` before initial connection 'is com ... )` if 'is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if 'you ha ... alse`.'you have `bufferCommands = false`.const r ...  - 1));result  ... h - 1))collect ... h - 1))collection[i].applycollection[i]_args.s ... th - 1)_args.slice_args.length - 1_args.lengththis.co ... ult });this.co ... sult }){ _id:  ... esult }lastArg ... result)lastArg.callret = c ...  _args)collect ...  _args)ret !=  ... nction'ret != nulltypeof ret.thenret.thenret.the ...       )result  ...       }lastArg ... esult);lastArg(error);lastArg(error)this.co ... ror });this.co ... rror }){ _id:  ... error }for (co ... key);\n}{\n  //  ... key);\n}const d ... , key);descrip ... e, key)Object. ... e, key)if (des ... ue;\n  }descrip ... defineddescriptor.get{\n    continue;\n  }if (typ ... ue;\n  }typeof  ... pe[key]Collect ... pe[key]iter(key);iter(key)NativeC ... ms);\n};NativeC ... ams);\n}NativeC ... .$printfunctio ... ams);\n}{\n  con ... ams);\n}const m ... ose: ';moduleN ... oose: 'color ? ... oose: ''\x1B[0 ... 1B[0m '[0;36mMongoose:[0m Mongoose: const f ... n('.');functio ... in('.')[name, i].join('.')[name, i].join[name, i]const _args = [];_args = []j >= 0--jlet j = ... gth - 1j = args.length - 1this.$f ... .lengththis.$f ... rgs[j])this.$formatargs[j]_args.u ... hell));_args.u ... shell))_args.unshiftthis.$f ...  shell)const p ...  + ')';params  ... ) + ')''(' + _ ... ) + ')''(' + _ ... n(', ')_args.join(', ')_args.joinconsole ... arams);console ... params)console.infomoduleN ...  paramsmoduleN ... ionCallNativeC ... 8');\n};NativeC ... f8');\n}NativeC ... oStreamfunctio ... f8');\n}{\n  con ... f8');\n}_args.u ... s[j]));_args.u ... gs[j]))stream. ... utf8');stream. ... 'utf8')stream.writefunctio ...  paramsNativeC ... ll);\n};NativeC ... ell);\n}NativeC ... $formatfunctio ... ell);\n}{\n  con ... ell);\n}const t ... of arg;type = typeof argif (typ ... urn '';type == ... efined'type === 'undefined'return  ... shell);format( ...  shell)const r ...  }\n  };ret = { ... ; }\n  }{\n    i ... ; }\n  }inspect ... tion; }functio ... tion; }{ retur ... tion; }return  ... tation;if (uti ... ct;\n  }util.inspect.custom{\n    r ... ct;\n  }ret[uti ... nspect;ret[uti ... inspectret[uti ... custom]ret.inspectformat(o, true)functio ... ")');\n}{\n  x[k ... ")');\n}x[key]  ...  '")');x[key]  ... + '")')x[key]inspect ... + '")')'Object ...  + '")''Object ... tring()ObjectId("x[key].toHexString()x[key].toHexStringif (she ... ');\n  }{\n    x ... ');\n  }'ISODat ...  + '")''ISODat ... tring()ISODate("x[key].toUTCString()x[key].toUTCString'new Da ...  + '")''new Da ... tring()new Date("functio ... ' ');\n}{\n  if  ... ' ');\n}if (obj ... ();\n  }obj &&  ... nction'typeof obj.toBSONobj.toBSONobj = obj.toBSON();obj = obj.toBSON()obj.toBSON()'../../ ... /clone'../../helpers/clonelet x = ... tions);x = sub ... ptions)sub ? o ... ptions)clone(o ... ptions)const c ... ame(x);constru ... Name(x)getCons ... Name(x)if (con ...   }\n  }constru ... Binary'{\n    x ... )';\n  }x = 'Bi ... + '")';x = 'Bi ...  + '")''BinDat ...  + '")''BinDat ... ase64')'BinDat ... + ', "''BinDat ... ub_typeBinData(x.sub_type, "x.toString('base64')x.toStringbase64constru ... jectId'x = ins ...  '")');x = ins ... + '")')x.toHexString()x.toHexStringconstru ...  'Date'x.toUTCString()x.toUTCStringconstru ... Object'const k ... eys(x);keys =  ... keys(x)Object.keys(x)numKeys ... .lengthi < numKeysif (x[k ...       }typeof x[key].toBSONx[key].toBSONx[key]  ... BSON();x[key]  ... oBSON()x[key].toBSON()error = _error;error = _errorconst _ ... [key]);_constr ... x[key])getCons ... x[key])if (_co ...       }_constr ... Binary'x[key]  ... + '")';x[key]  ...  + '")'x[key].sub_typex[key]. ... ase64')x[key]. ... oStringx[key].buffer_constr ... Object'x[key]  ...  true);x[key]  ... , true)format(x[key], true)_constr ... jectId'formatO ... , key);formatO ... x, key)_constr ...  'Date'formatD ... shell);formatD ...  shell)_constr ... ession''Client ...  + '")''Client ... ('hex')ClientSession("(\n      ... ('hex')(\n      ... oString(\n      ...       )x[key]  ... r || ''x[key]  ... .bufferx[key]  ... ].id.idx[key]  ... key].idx[key].idx[key].id.idx[key].id.id.bufferArray.i ... x[key])x[key]  ... p(map);x[key]  ... ap(map)x[key].map(map)x[key].mapif (sub ...  x;\n  }{\n    return x;\n  }return x;return  ... , ' ');util.\n  ... g, ' ')util.\n  ... replaceutil.\n  ... /g, '')util.\n  ...  color)util.\n    inspect\s{2,}NativeC ... mation;NativeC ... rmationNativeC ... Indexes/home/insomnia/repos/mongoose/lib/drivers/node-mongodb-native/connection.js
 * A [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) connection implementation.
 *
 * @inherits Connection
 * @api private
  Tracks the last time (as unix timestamp) the connection received a// Trac ... eived a serverHeartbeatSucceeded or serverHeartbeatFailed event from the underlying MongoClient.// serv ... Client. If we haven't received one in a while (like due to a frozen AWS Lambda container) then// If w ... r) then `readyState` is likely stale.// `rea ...  stale.
 * Expose the possible connection states.
 * @api public
 !
 * Inherits from Connection.
 
 * Switches to a different database using the same connection pool.
 *
 * Returns a new connection object, with the new db. If you set the `useCache`
 * option, `useDb()` will cache connections by `name`.
 *
 * **Note:** Calling `close()` on a `useDb()` connection will close the base connection as well.
 *
 * @param {String} name The database name
 * @param {Object} [options]
 * @param {Boolean} [options.useCache=false] If true, cache results so calling `useDb()` multiple times with the same name only creates 1 connection object.
 * @param {Boolean} [options.noListener=false] If true, the new connection object won't listen to any events on the base connection. This is better for memory usage in cases where you're calling `useDb()` for every request.
 * @return {Connection} New Connection Object
 * @api public
  Return immediately if cached// Retu ...  cached we have to manually copy all of the attributes...// we h ... utes... First, when we create another db object, we are not guaranteed to have a// Firs ...  have a db object to work with. So, in the case where we have a db object and it// db o ...  and it is connected, we can just proceed with setting everything up. However, if// is c ... ver, if we do not have a db or the state is not connected, then we need to wait on// we d ... wait on the 'open' event of the connection before doing the rest of the setup// the  ... e setup the 'connected' event is the first time we'll have access to the db object// the  ...  object push onto the otherDbs stack, this is used when state changes// push ... changes push onto the relatedDbs cache, this is used when state changes
 * Runs a [db-level aggregate()](https://www.mongodb.com/docs/manual/reference/method/db.aggregate/) on this connection's underlying `db`
 *
 * @param {Array} pipeline
 * @param {Object} [options]
 /**\n *  ... ns]\n */
 * Removes the database connection with the given name created with `useDb()`.
 *
 * Throws an error if the database connection was not found.
 *
 * #### Example:
 *
 *     // Connect to `initialdb` first
 *     const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/initialdb').asPromise();
 *
 *     // Creates an un-cached connection to `mydb`
 *     const db = conn.useDb('mydb');
 *
 *     // Closes `db`, and removes `db` from `conn.relatedDbs` and `conn.otherDbs`
 *     await conn.removeDb('mydb');
 *
 * @method removeDb
 * @memberOf Connection
 * @param {String} name The database name
 * @return {Connection} this
 
 * Closes the connection
 *
 * @param {Boolean} [force]
 * @return {Connection} this
 * @api private
  Defer because the driver will wait at least 1ms before finishing closing// Defe ... closing the pool, see https://github.com/mongodb-js/mongodb-core/blob/a8f8e4ce41936babc3b9112bf42d609779f03b39/lib/connection/pool.js#L1026-L1030.// the  ... -L1030. If there's queued operations, you may still get some background work// If t ... nd work after the callback is called.// afte ... called.
 * Implementation of `listDatabases()` for MongoDB driver
 *
 * @return Promise
 * @api public
  Backwards compat// Backwards compat
 * Given a connection, which may or may not have encrypted models, build
 * a schemaMap and/or an encryptedFieldsMap for the connection, combining all models
 * into a single schemaMap and encryptedFields map.
 *
 * @returns the generated schemaMap and encryptedFieldsMap
  /**\n *  ... ap\n  */ If discriminators are configured for the collection, there might be multiple models// If d ...  models pointing to the same namespace.  For this scenario, we merge all the schemas for each namespace// poin ... mespace into a single schema and then generate a schemaMap/encryptedFieldsMap for the combined schema.// into ... schema. If we aren't disconnected, we assume this reconnect is due to a// If w ... ue to a socket timeout. If there's no activity on a socket for// sock ... ket for `socketTimeoutMS`, the driver will attempt to reconnect and emit// `soc ... nd emit this event.// this event. Emit disconnected if we've lost connectivity to the primary// Emit ... primary Implicitly emits 'disconnected'// Impl ... nected'MongooseConnection'../../connection''../../error/index''../../connectionState''../../../package.json'processConnectionOptions'../../helpers/processConnectionOptions''../../helpers/timers''../../utils''../../schema'NativeConnection_listeningnewConn_parentwireup'noListener'noListenerdbsNo connections to database "" foundadmin'The `uri` parameter to `openUri()` must be a 'string, got "". Make sure the first parameter to '`mongoose.connect()` or `mongoose.createConnection()` is a string.''Connection has been closed and destroyed, and cannot be used for re-opening the connection. ''Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.''Can\'t call `openUri()` on an active connection with ''different connection strings. Make sure you aren\'t calling `mongoose.connect()` ''multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections''autoCreate''sanitizeFilter''autoSearchIndex'_connectionOptionsdbName$dbNamehasUserDefinedProperty'driverInfo'driverInfoschemaMapencryptedFieldsMap_buildEncryptionSchemasautoEncryption'Must provide `autoEncryption` when connecting with encrypted schemas.'_setClientqeMappingscsfleMappingsencryptedModels_hasEncryptedFieldsmappingsencryptionType'csfle'??=isNonRootDiscriminatordiscriminatorMappingisRootrootSchema_baseSchemaeachPath_hasEncryptedFieldCannot have duplicate keys in discriminators with encryption. key=fromEntries_buildSchemaMap_buildEncryptedFields'Must call `setClient()` with an instance of MongoClient''Cannot call `setClient()` on a connection that is already connected.''Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.'hostsdatabaseName_handleReconnect'reconnect''reconnected''Single''serverDescriptionChanged'newDescription'Unknown''ReplicaSet''topologyDescriptionChanged''ReplicaSetWithPrimary''serverHeartbeatSucceeded'monitorCommands'commandStarted''commandFailed''commandSucceeded'A [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) connection implementation.Expose the possible connection states.Switches to a different database using the same connection pool.

Returns a new connection object, with the new db. If you set the `useCache`
option, `useDb()` will cache connections by `name`.

**Note:** Calling `close()` on a `useDb()` connection will close the base connection as well.If true, the new connection object won't listen to any events on the base connection. This is better for memory usage in cases where you're calling `useDb()` for every request.
Removes the database connection with the given name created with `useDb()`.

Throws an error if the database connection was not found.

#### Example:

// Connect to `initialdb` first
const conn = await mongoose.createConnection('mongodb://127.0.0.1:27017/initialdb').asPromise();

// Creates an un-cached connection to `mydb`
const db = conn.useDb('mydb');

// Closes `db`, and removes `db` from `conn.relatedDbs` and `conn.otherDbs`
await conn.removeDb('mydb');Implementation of `listDatabases()` for MongoDB driverGiven a connection, which may or may not have encrypted models, build
a schemaMap and/or an encryptedFieldsMap for the connection, combining all models
into a single schemaMap and encryptedFields map.the generated schemaMap and encryptedFieldsMap../../connection/connection../../error/index'../../ ... nState'../../connectionStateconst m ... godb');mongodb ... ngodb')'../../ ... e.json'../../../package.jsonconst p ... ions');process ... tions')process ... Options'../../ ... ptions'../../helpers/processConnectionOptions/helpers/processConnectionOptionsconst s ... imeout;setTime ... Timeoutrequire ... Timeoutrequire ... imers')'../../ ... timers'../../helpers/timers/helpers/timers../../utilsrequire ... chema')../../schema{\n  Mon ... null;\n}this._l ...  false;this._l ... = falsethis._listeningNativeC ... STATES;NativeC ...  STATESNativeC ... .STATESNativeC ... onn;\n};NativeC ... Conn;\n}NativeC ... e.useDbfunctio ... Conn;\n}{\n  //  ... Conn;\n}if (opt ... e];\n  }options ... s[name]this.re ... s[name]{\n    r ... e];\n  }const n ... ctor();newConn ... uctor()new thi ... uctor()newConn.name = name;newConn.name = namenewConn.namenewConn ... s.base;newConn ... is.basenewConn.basenewConn ... s = {};newConn ... ns = {}newConn.collectionsnewConn.models = {};newConn.models = {}newConn.modelsnewConn ... eplica;newConn ... replicanewConn.replicanewConn ... onfig);newConn ... config)newConn.configObject. ... config)newConn ... s.name;newConn ... is.namenewConn ... ptions;newConn ... optionsnewConn.optionsnewConn ... yState;newConn ... dyStatenewConn._readyStatenewConn ... Called;newConn ... eCallednewConn._closeCallednewConn ... Opened;newConn ... sOpenednewConn._hasOpenednewConn ...  false;newConn ... = falsenewConn._listeningnewConn ... = this;newConn ...  = thisnewConn._parentnewConn ... s.host;newConn ... is.hostnewConn.hostthis.hostnewConn ... s.port;newConn ... is.portnewConn.portthis.portnewConn ... s.user;newConn ... is.usernewConn.usernewConn ... s.pass;newConn ... is.passnewConn.passnewConn ... client;newConn ... .clientnewConn.client_this.clientthis.db ... nnected{\n    wireup();\n  }wireup();wireup()this._q ... eup });this._q ... reup }){ fn: wireup }fn: wireup{\n    n ... ();\n  }const _opts = {};_opts = {}options ... tener')_opts.n ... stener;_opts.n ... istener_opts.noListenernewConn ... _opts);newConn ...  _opts)newConn.db_this.c ...  _opts)_this.client.dbnewConn ... beatAt;newConn ... tbeatAt_this._ ... tbeatAtnewConn.onOpen();newConn.onOpen()newConn.onOpenif (opt ... n);\n  }{\n    t ... n);\n  }this.ot ... wConn);this.ot ... ewConn)this.otherDbs.pushnewConn ... (this);newConn ... h(this)newConn ... bs.pushnewConn.otherDbsif (opt ... bs;\n  }options ... seCache{\n    t ... bs;\n  }this.re ... ewConn;this.re ... newConnthis.re ... n.name]newConn ... tedDbs;newConn ... atedDbsnewConn.relatedDbsreturn newConn;NativeC ... {});\n};NativeC ...  {});\n}NativeC ... gregatefunctio ...  {});\n}{\n  ret ...  {});\n}return  ... ?? {});new thi ...  ?? {})new thi ... .optionnew thi ... peline)new thi ... .appendnew thi ... , this)this.base.Aggregateoptions ?? {}NativeC ... me);\n};NativeC ... ame);\n}NativeC ... emoveDbconst d ...  name);dbs = t ... = name)this.ot ... = name)this.otherDbs.filterdb => d ... == namedb.name === namedb.nameif (!db ... `);\n  }!dbs.lengthdbs.lengththrow n ... ound`);new Mon ... found`)`No con ...  found`No conn ... abase "for (co ... ue;\n  }db._clo ... = true;db._clo ...  = truedb._closeCalleddb._des ... = true;db._des ...  = truedb._destroyCalleddb._rea ... nected;db._rea ... nnecteddb._readyStatedb.$was ... = true;db.$was ...  = truedb.$wasForceClosedthis.ot ...  name);db.name !== nameNativeC ... his;\n};NativeC ... this;\n}NativeC ... doCloseif (thi ... is;\n  }this.client == nulllet ski ...  false;skipClo ... = false{\n    s ... ce;\n  }skipClo ... Client;skipClo ... eClientforce.s ... eClientforce = force.force;force = force.forceif (ski ... is;\n  }this.cl ... (force)this.client.closeawait n ... e, 1));await n ... ve, 1))new Pro ... ve, 1))resolve ... lve, 1)setTime ... lve, 1)NativeC ... s();\n};NativeC ... es();\n}NativeC ... tabasesasync f ... es();\n}{\n  awa ... es();\n}return  ... ases();await t ... bases()this.db ... bases()this.db ... tabasesthis.db.admin()this.db.adminNativeC ... eClienttypeof urithrow n ... ing.');new Mon ... ring.')'The `u ... tring.''The `u ... er to `'The `u ...  be a 'The `uri` parameter to `openUri()` must be a `string ... er to `". Make ... ter to '`mongo ... tring.'`mongoose.connect()` or `mongoose.createConnection()` is a string.if (thi ...  );\n  }new Mon ... '\n    )'Connec ... ct()`.''Connec ... tion. 'Connection has been closed and destroyed, and cannot be used for re-opening the connection. 'Please ... ct()`.'Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.Connection has been closed and destroyed, and cannot be used for re-opening the connection Please create a new connection with `mongoose` or `mongoosethis._c ... !== uri'Can\'t ... ctions''Can\'t ... ct()` ''Can\'t ...  with 'Can't call `openUri()` on an active connection with 'differ ... ct()` 'different connection strings. Make sure you aren't calling `mongoose.connect()` 'multip ... ctions'multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connectionsCan't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connectionsCan't call `openUri` on an active connection with different connection strings Make sure you aren't calling `mongoose` multiple times See: https://mongoosejscom/docs/connectionshtml#multiple_connectionsprocess ... ptions){\n\n     ...   }\n  }const a ... oIndex;options ... toIndexoptions.configif (aut ... ;\n    }autoIndex != nullthis.co ...  false;this.co ... = falseautoIndex !== falsedelete  ... config;delete  ... .configdelete  ... oIndex;delete  ... toIndexif ('au ... ;\n    }'autoCr ... optionsthis.co ... Create;!!options.autoCreate!options.autoCreatedelete  ... Create;delete  ... oCreateif ('sa ... ;\n    }'saniti ... optionsthis.co ... Filter;this.co ... eFilterdelete  ... Filter;delete  ... eFilter'autoSe ... optionsthis.co ... hIndex;options ... chIndexdelete  ... hIndex;delete  ... chIndexif ('bu ... ;\n    }'buffer ... optionsthis.co ... eoutMS;options ... meoutMSdelete  ... eoutMS;delete  ... meoutMSoptions ... ns.passoptions ... h || {}options.authoptions.auth || {}options ... s.user;options ... ns.useroptions ... sernameoptions ... s.pass;options ... asswordthis.us ... s.user;this.us ... ns.userthis.pa ... s.pass;this.pa ... ns.passdelete options.user;delete options.userdelete options.pass;delete options.passoptions ... ommandsthis.co ... mmands;delete  ... mmands;delete  ... ommandsthis._c ... ptions;this._c ... optionsthis._c ... Optionsconst d ... dbName;dbName  ... .dbNameif (dbN ... me;\n  }dbName != null{\n    t ... me;\n  }this.$d ... dbName;this.$d ...  dbNamethis.$dbNamedelete  ... dbName;delete  ... .dbNameif (!ut ...  };\n  }!utils. ... rInfo')utils.h ... rInfo')utils.h ... ropertyhasUser ... ropertyoptions ... \n    };options ... n\n    }options.driverInfo{\n      ... n\n    }name: 'Mongoose'version: pkg.versionpkg.versionconst { ... emas();{ schem ... hemas(){ schem ... dsMap }this._b ... hemas()this._b ... Schemas_buildE ... Schemasif ((Ob ... ');\n  }(Object ... ryption(Object ... length)Object. ... emaMap)Object. ... ldsMap)!option ... ryptionoptions ... ryptionthrow n ... mas.');new Err ... emas.')'Must p ... hemas.'Must provide `autoEncryption` when connecting with encrypted schemas.Must provide `autoEncryption` when connecting with encrypted schemasif (Obj ... ap;\n  }{\n    o ... ap;\n  }options ... emaMap;options ... hemaMapoptions ... ldsMap;options ... eldsMapthis._c ...  = uri;this._c ... g = urilet client;client  ... tions);client  ... ptions)new mon ... ptions)mongodb.MongoClientthis.cl ... client;this.client = clientclient. ... ers(0);client. ... ners(0)client. ... stenersawait c ... nect();await c ... nnect()_setCli ... bName);_setCli ... dbName)_setCli ... .name);_setCli ... b.name)NativeC ...   };\n};NativeC ... \n  };\n}NativeC ... Schemasconst q ... s = {};qeMappings = {}csfleMappings = {}const e ... lds());encrypt ... elds())Object. ... elds())model = ... ields()model.s ... ields()model.s ... dFieldsfor (co ... a);\n  }{\n    c ... a);\n  }const { ...  model;{ schem ... = model{ schem ... ame } }collect ... nName }{ collectionName }const n ... Name}`;namespa ... nName}``${this ... nName}`const m ... ppings;mapping ... appingsschema. ... appingsschema. ... 'csfle'schema. ... nType()schema. ... ionTypecsflemapping ... e() });mapping ... pe() })mappings[namespace]new Sch ... pe() }){ encry ... ype() }encrypt ... nType()const i ... isRoot;isNonRo ... .isRootisNonRo ... minatorschema. ... .isRootschema. ... Mapping!schema ... .isRootif (isN ... ;\n    }const r ... Schema;rootSch ... eSchemaschema._baseSchemaschema. ...      })schema.eachPath(pathna ...       }if (roo ... return;rootSch ... thname)rootSchema.pathif (!ma ... return;!mappin ... thname)mapping ... thname)mapping ... edFieldnew Err ... name}`)`Cannot ... hname}`Cannot  ... n. key=mapping ... chema);mapping ... schema)mapping ... ce].addconst s ... )\n  ));schemaM ... ])\n  ))Object. ... ])\n  ))Object.fromEntriesObject. ... )])\n  )Object. ... gs).mapObject. ... ppings)([names ... Map()])[namespace, schema][namesp ... aMap()]schema. ... maMap()schema. ... hemaMapconst e ... )\n  ));encrypt ... ])\n  ))([names ... lds()])[namesp ... elds()]schema. ... ields()schema. ... dFields_buildE ... dFieldsreturn  ... ap\n  };{\n    s ... Map\n  }NativeC ... tClientif (!(c ... ');\n  }!(clien ... Client)(client ... Client)client  ... oClientthrow n ... ient');new Mon ... lient')'Must c ... Client'Must call `setClient()` with an instance of MongoClientMust call `setClient` with an instance of MongoClientthrow n ... ted.');new Mon ... cted.')'Cannot ... ected.'Cannot call `setClient()` on a connection that is already connected.Cannot call `setClient` on a connection that is already connectedif (cli ... ');\n  }client. ... == nullclient.topologythrow n ... yet.');new Mon ...  yet.')'Cannot ... n yet.'Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.` with a MongoClient that you have not called `connect` on yetthis._c ... .s.url;this._c ... t.s.urlclient.s.urlclient.sclient. ... .dbNameclient.s.optionsconst d ... t.db();db = db ... nt.db()dbName  ... nt.db()client.db(dbName)client.dbclient.db()conn.db = db;conn.db = dbconn.dbconn.cl ... client;conn.client = clientconn.clientconn.ho ... void 0;conn.ho ...  void 0conn.hostclient  ...  void 0client  ... 0].hostclient  ... osts[0]client  ... s.hostsclient  ... optionsclient  ... lient.sclient. ... s.hostsclient. ... osts[0]client. ... 0].hostconn.po ... void 0;conn.po ...  void 0conn.portclient  ... 0].portclient. ... 0].portconn.na ... seName;conn.na ... aseNameconn.namedbName  ... aseNamedb.databaseNameconn._c ... Called;conn._c ... eCalledconn._closeCalledclient._closeCalled_handle ...   }\n  }conn.re ... nnectedconn.readyStateconn.re ... nected;conn.em ... nect');conn.em ... nnect')conn.emitreconnectconn.em ... cted');conn.em ... ected')reconnectedconn.onOpen();conn.onOpen()conn.onOpenconst t ...  || '';type =  ... e || ''client  ... e || ''client  ... on.typeclient  ... riptionclient  ... opologyclient. ... riptionclient. ... on.typeif (typ ... });\n  }type === 'Single'Singleclient. ...     });client. ... \n    })client.on'server ... hanged'serverDescriptionChangedev => { ... }\n    }const n ... iption;newDesc ... riptionev.newDescriptionif (new ...       }newDesc ... nknown'newDescription.typeUnknown_handleReconnect();_handleReconnect()type.st ... caSet')type.startsWithReplicaSet'topolo ... hanged'topologyDescriptionChangedconst d ... iption;descrip ... riptionconn.re ... rimary'descrip ... rimary'description.type'Replic ... rimary'ReplicaSetWithPrimaryconn._l ... = null;conn._l ...  = nullconn._l ... tbeatAtclient. ... ;\n  });client. ... );\n  })'server ... ceeded'serverHeartbeatSucceededconn._l ... .now();conn._l ... e.now()if (opt ... ));\n  }client. ... data));client. ...  data))commandStarted(data)  ... , data)conn.em ... , data)commandFailedcommandSucceededconn.collectionsconn.co ... Open();conn.co ... nOpen()conn.co ... .onOpenconn.collections[i]/home/insomnia/repos/mongoose/lib/drivers/node-mongodb-native/index.js'./bulkWriteResult''./collection''./connection'ClientEncryptionexports ... sult');exports ... esult')./bulkWriteResult/bulkWriteResultexports ... tion');exports ... ction')./collection./connectionexports ... yption;exports ... ryptionrequire ... ryption/home/insomnia/repos/mongoose/lib/error/browserMissingSchema.js/home/insomnia/repos/mongoose/lib/error
 * MissingSchema Error constructor.
 !
 * exports
 /*!\n * exports\n */'./mongooseError''Schema hasn\'t been registered for document.\n''Use mongoose.Document(name, schema)''MongooseError'MissingSchema Error constructor../mongooseError/mongooseErrorclass M ... ;\n  }\n}constru ... ');\n  }() {\n   ... ');\n  }{\n    s ... ');\n  }super(' ... ema)');super(' ... hema)')'Schema ... chema)''Schema ... ent.\n'Schema hasn't been registered for document.
'Use mo ... chema)'Use mongoose.Document(name, schema)Schema hasn't been registered for document.
Use mongoose.Document(name, schema)Schema hasn't been registered for document
Use mongoose(name, schema)name, schemaObject. ... or'\n});Object. ... ror'\n})Missing ... ototype{\n  val ... rror'\n}value:  ... eError'module. ... aError;module. ... maError/home/insomnia/repos/mongoose/lib/error/bulkSaveIncompleteError.js
 * If the underwriting `bulkWrite()` for `bulkSave()` succeeded, but wasn't able to update or
 * insert all documents, we throw this error.
 *
 * @api private
 MongooseBulkSaveIncompleteErrordocumentsbulkWriteResultmatchedCountinsertedCountpreviewnumDocumentsNotUpdated.bulkSave() was not able to update  of the given documents due to incorrect version or optimistic concurrency, document ids: 'MongooseBulkSaveIncompleteError'If the underwriting `bulkWrite()` for `bulkSave()` succeeded, but wasn't able to update or
insert all documents, we throw this error.constru ... ed;\n  }(modelN ... ed;\n  }{\n    c ... ed;\n  }const m ... t ?? 0;matched ... nt ?? 0bulkWri ... nt ?? 0bulkWri ... edCountconst i ... t ?? 0;inserte ... nt ?? 0let pre ... (', ');preview ... n(', ')documen ... n(', ')documen ... d).joindocumen ... oc._id)documents.mapdoc => doc._idif (pre ... ;\n    }preview.length > 100preview.lengthpreview ...  '...';preview ... + '...'preview ... 0, 100)preview.sliceconst n ... dCount;numDocu ... edCountnumDocu ... Updateddocumen ... edCountdocuments.lengthsuper(` ... iew}`);super(` ... view}`)`${mode ... eview}`.bulkSa ... update  of the ... t ids: this.do ... uments;this.do ... cumentsthis.documentsthis.bu ... Result;this.bu ... eResultthis.bulkWriteResultthis.nu ... pdated;this.nu ... Updated'Mongoo ... eError'module. ... teError/home/insomnia/repos/mongoose/lib/error/bulkWriteError.js
 * If `bulkWrite()` or `insertMany()` has validation errors, but
 * all valid operations succeed, and 'throwOnValidationError' is true,
 * Mongoose will throw this error.
 *
 * @api private
 './'rawResult failed with  Mongoose validation errors: 'MongooseBulkWriteError'If `bulkWrite()` or `insertMany()` has validation errors, but
all valid operations succeed, and 'throwOnValidationError' is true,
Mongoose will throw this error.const M ... ('./');Mongoos ... e('./')require('./')./constru ... on;\n  }(valida ... on;\n  }{\n    l ... on;\n  }validat ... n(', ')validat ... e).joinvalidat ... essage)validationErrors.mape => e.messagepreview.length > 200preview ... 0, 200)`${oper ... eview}` Mongoo ... rrors: this.va ... Errors;this.va ... nErrorsthis.re ... esults;this.re ... resultsthis.resultsthis.ra ... Result;this.ra ... wResultthis.rawResultthis.op ... ration;this.op ... erationthis.operation/home/insomnia/repos/mongoose/lib/error/cast.js
 * Casting Error constructor.
 *
 * @param {String} type
 * @param {String} value
 * @inherits MongooseError
 * @api private
  If no args, assume we'll `init()` later.// If n ...  later.!
   * ignore
   /*!\n    ... e\n   */
   * ignore
   * @param {Readonly<CastError>} other
   * @api private
   /**\n    ... e\n   */getValueTypemessageFormatgetMessageFormatformatMessagesetModel'CastError'/^'|'$/g_castErrorMessage'{KIND}''{VALUE}''{PATH}''{MODEL}'valueTypeMsg' (type ''Cast to '' failed for value '' at path "'' for model "''AssertionError''Error'' because of "'Casting Error constructor.MongooseError
Readonly.<CastError>Readonlyclass C ... ;\n  }\n}(type,  ...   }\n  }const v ... value);valueTy ... (value)getValueType(value)const m ... aType);message ... maType)getMess ... maType)const m ... eason);msg = f ... reason)formatM ... reason)super(msg);super(msg)this.in ... aType);this.in ... maType)this.initsuper(f ... age());super(f ... sage())formatMessage()toJSON( ...  };\n  }() {\n   ...  };\n  }stringV ... ngValuethis.stringValuevalueTy ... lueTypethis.valueTypekind: this.kindthis.kindvalue: this.valuethis.valuepath: this.paththis.pathreason: this.reasonthis.reasonname: this.namemessage ... messagethis.messageinit(ty ... e);\n  }(type,  ... e);\n  }this.st ... value);this.st ... (value)getStri ... (value)this.me ... aType);this.me ... maType)this.messageFormatthis.kind = type;this.kind = typethis.value = value;this.value = valuethis.path = path;this.path = paththis.re ... reason;this.reason = reasonthis.va ... value);this.va ... (value)copy(ot ... pe;\n  }(other) ... pe;\n  }this.me ... Format;this.me ... eFormatother.messageFormatthis.st ... gValue;this.st ... ngValueother.stringValuethis.ki ... r.kind;this.ki ... er.kindother.kindthis.va ... .value;this.va ... r.valueother.valuethis.pa ... r.path;this.pa ... er.pathother.paththis.re ... .reasonother.reasonthis.me ... essage;this.me ... messageother.messagethis.va ... ueType;this.va ... lueTypeother.valueTypesetMode ... e);\n  }(model) ... e);\n  }this.me ... eType);this.me ... ueType)formatM ... ueType)CastError.prototypevalue: 'CastError'functio ... alue;\n}{\n  let ... alue;\n}let str ... value);stringV ... (value)util.inspect(value)stringV ... , '"');stringV ... g, '"')stringValue.replace^'|'$^'''$if (!st ... "';\n  }!string ... th('"')stringV ... th('"')stringV ... rtsWith{\n    s ... "';\n  }stringV ...  + '"';stringV ... e + '"''"' + s ... e + '"''"' + stringValuereturn stringValue;functio ... name;\n}{\n  if  ... name;\n}return '' + value;'' + valueconst t ...  value;t = typeof valueif (t ! ...  t;\n  }t !== 'object'{\n    return t;\n  }return t;if (typ ...  t;\n  }typeof  ... tructorvalue.constructorreturn  ... r.name;value.c ... or.nameconst m ... | null;message ... || nullschemaT ... || nullschemaT ... Messageif (typ ... at;\n  }typeof messageFormat{\n    r ... at;\n  }return  ... Format;{\n    c ... et;\n  }const s ... value);let ret ...  path);ret = m ... , path)message ... , path)message ... replacemessage ... gValue)message ... , kind){KIND}{VALUE}{PATH}model != nullret = r ... lName);ret = r ... elName)ret.rep ... elName)ret.replace{MODEL}{\n    r ... d);\n  }return  ...  kind);const v ... ' : '';valueTy ... )' : ''' (type ... e + ')'' (type ... lueType (type let ret ...  + '"';ret = ' ... h + '"''Cast t ... h + '"''Cast t ...  + path'Cast t ... path "''Cast t ... TypeMsg'Cast t ... ngValue'Cast t ... value ''Cast to ' + kindCast to  failed for value  at path "ret +=  ...  + '"';ret +=  ... e + '"'' for m ... e + '"'' for m ... delName for model "if (rea ... ;\n    }reason  ... 'Error'reason  ... nError'reason  ... nction'reason != nullreason.constructorreason. ... nError'reason. ... or.namereason. ... 'Error'' becau ... e + '"'' becau ... or.name because of "/home/insomnia/repos/mongoose/lib/error/createCollectionsError.js
 * createCollections Error constructor
 *
 * @param {String} message
 * @param {String} errorsMap
 * @inherits MongooseError
 * @api private
 'CreateCollectionsError'createCollections Error constructorconstru ... ap;\n  }(messag ... ap;\n  }{\n    s ... ap;\n  }super(message);super(message)this.er ... orsMap;this.er ... rorsMapthis.errorsCreateC ... ototypevalue:  ... sError''Create ... sError'module. ... nsError/home/insomnia/repos/mongoose/lib/error/divergentArray.js
 * DivergentArrayError constructor.
 * @param {Array<String>} paths
 * @api private
  TODO write up a docs page (FAQ) and link to it// TODO ... k to it'For your own good, using `document.save()` to update an array ''which was selected using an $elemMatch projection OR ''populated using skip, limit, query conditions, or exclusion of ''the _id field when the operation results in a $pop or $set of ''the entire array is not supported. The following ''path(s) would have been modified unsafely:\n''\n  ''Use Model.updateOne() to update these arrays instead.''DivergentArrayError'DivergentArrayError constructor.class D ... ;\n  }\n}constru ... g);\n  }(paths) ... g);\n  }{\n    c ... g);\n  }const m ... tead.';msg = ' ... stead.''For yo ... stead.''For yo ...  + '\n''For yo ... '\n  ')'For yo ...  + '  ''For yo ... ely:\n''For yo ... owing ''For yo ... et of ''For yo ... on of ''For yo ... on OR ''For yo ... array 'For your own good, using `document.save()` to update an array 'which  ... on OR 'which was selected using an $elemMatch projection OR 'popula ... on of 'populated using skip, limit, query conditions, or exclusion of 'the _i ... et of 'the _id field when the operation results in a $pop or $set of 'the en ... owing 'the entire array is not supported. The following 'path(s ... ely:\n'path(s) would have been modified unsafely:
paths.join('\n  ')paths.join
  'Use Mo ... stead.'Use Model.updateOne() to update these arrays instead.Diverge ... ototypevalue:  ... yError''Diverg ... yError'module. ... yError;module. ... ayError/home/insomnia/repos/mongoose/lib/error/eachAsyncMultiError.js
 * If `eachAsync()` is called with `continueOnError: true`, there can be
 * multiple errors. This error class contains an `errors` property, which
 * contains an array of all errors that occurred in `eachAsync()`.
 *
 * @api private
 
   * @param {String} connectionString
   /**\n    ... g\n   */EachAsyncMultiErroreachAsync() finished with  errors: 'EachAsyncMultiError'If `eachAsync()` is called with `continueOnError: true`, there can be
multiple errors. This error class contains an `errors` property, which
contains an array of all errors that occurred in `eachAsync()`.connectionStringclass E ... ;\n  }\n}constru ... rs;\n  }(errors ... rs;\n  }{\n    l ... rs;\n  }errors. ... n(', ')errors. ... e).joinerrors. ... essage)errors.mappreview.length > 50preview.slice(0, 50)`eachAs ... eview}`eachAsy ... d with errors.lengththis.er ... errors;this.errors = errorsEachAsy ... ototypevalue:  ... iError''EachAs ... iError'module. ... iError;module. ... tiError/home/insomnia/repos/mongoose/lib/error/index.js
 * MongooseError constructor. MongooseError is the base class for all
 * Mongoose-specific errors.
 *
 * #### Example:
 *
 *     const Model = mongoose.model('Test', new mongoose.Schema({ answer: Number }));
 *     const doc = new Model({ answer: 'not a number' });
 *     const err = doc.validateSync();
 *
 *     err instanceof mongoose.Error.ValidationError; // true
 *
 * @constructor Error
 * @param {String} msg Error message
 * @inherits Error https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error
 
 * The name of the error. The name uniquely identifies this Mongoose error. The
 * possible values are:
 *
 * - `MongooseError`: general Mongoose error
 * - `CastError`: Mongoose could not convert a value to the type defined in the schema path. May be in a `ValidationError` class' `errors` property.
 * - `DivergentArrayError`: You attempted to `save()` an array that was modified after you loaded it with a `$elemMatch` or similar projection
 * - `MissingSchemaError`: You tried to access a model with [`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.model()) that was not defined
 * - `DocumentNotFoundError`: The document you tried to [`save()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.save()) was not found
 * - `ValidatorError`: error from an individual schema path's validator
 * - `ValidationError`: error returned from [`validate()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate()) or [`validateSync()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.validateSync()). Contains zero or more `ValidatorError` instances in `.errors` property.
 * - `MissingSchemaError`: You called `mongoose.Document()` without a schema
 * - `ObjectExpectedError`: Thrown when you set a nested path to a non-object value with [strict mode set](https://mongoosejs.com/docs/guide.html#strict).
 * - `ObjectParameterError`: Thrown when you pass a non-object value to a function which expects an object as a paramter
 * - `OverwriteModelError`: Thrown when you call [`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.model()) to re-define a model that was already defined.
 * - `ParallelSaveError`: Thrown when you call [`save()`](https://mongoosejs.com/docs/api/model.html#Model.prototype.save()) on a document when the same document instance is already saving.
 * - `StrictModeError`: Thrown when you set a path that isn't the schema and [strict mode](https://mongoosejs.com/docs/guide.html#strict) is set to `throw`.
 * - `VersionError`: Thrown when the [document is out of sync](https://mongoosejs.com/docs/guide.html#versionKey)
 *
 * @api public
 * @property {String} name
 * @memberOf Error
 * @instance
 
 * The default built-in validator error messages.
 *
 * @see Error.messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 * @memberOf Error
 * @static
 /**\n *  ... tic\n */ backward compat// backward compat
 * An instance of this error class will be thrown when mongoose failed to
 * cast a value.
 *
 * @api public
 * @memberOf Error
 * @static
 
 * An instance of this error class will be thrown when `save()` fails
 * because the underlying
 * document was not found. The constructor takes one parameter, the
 * conditions that mongoose passed to `updateOne()` when trying to update
 * the document.
 *
 * @api public
 * @memberOf Error
 * @static
 
 * An instance of this error class will be thrown when [validation](https://mongoosejs.com/docs/validation.html) failed.
 * The `errors` property contains an object whose keys are the paths that failed and whose values are
 * instances of CastError or ValidationError.
 *
 * @api public
 * @memberOf Error
 * @static
 
 * A `ValidationError` has a hash of `errors` that contain individual
 * `ValidatorError` instances.
 *
 * #### Example:
 *
 *     const schema = Schema({ name: { type: String, required: true } });
 *     const Model = mongoose.model('Test', schema);
 *     const doc = new Model({});
 *
 *     // Top-level error is a ValidationError, **not** a ValidatorError
 *     const err = doc.validateSync();
 *     err instanceof mongoose.Error.ValidationError; // true
 *
 *     // A ValidationError `err` has 0 or more ValidatorErrors keyed by the
 *     // path in the `err.errors` property.
 *     err.errors['name'] instanceof mongoose.Error.ValidatorError;
 *
 *     err.errors['name'].kind; // 'required'
 *     err.errors['name'].path; // 'name'
 *     err.errors['name'].value; // undefined
 *
 * Instances of `ValidatorError` have the following properties:
 *
 * - `kind`: The validator's `type`, like `'required'` or `'regexp'`
 * - `path`: The path that failed validation
 * - `value`: The value that failed validation
 *
 * @api public
 * @memberOf Error
 * @static
 
 * An instance of this error class will be thrown when you call `save()` after
 * the document in the database was changed in a potentially unsafe way. See
 * the [`versionKey` option](https://mongoosejs.com/docs/guide.html#versionKey) for more information.
 *
 * @api public
 * @memberOf Error
 * @static
 
 * An instance of this error class will be thrown when you call `save()` multiple
 * times on the same document in parallel. See the [FAQ](https://mongoosejs.com/docs/faq.html) for more
 * information.
 *
 * @api public
 * @memberOf Error
 * @static
 
 * Thrown when a model with the given name was already registered on the connection.
 * See [the FAQ about `OverwriteModelError`](https://mongoosejs.com/docs/faq.html#overwrite-model-error).
 *
 * @api public
 * @memberOf Error
 * @static
 
 * Thrown when you try to access a model that has not been registered yet
 *
 * @api public
 * @memberOf Error
 * @static
 
 * Thrown when some documents failed to save when calling `bulkSave()`
 *
 * @api public
 * @memberOf Error
 * @static
 
 * Thrown when the MongoDB Node driver can't connect to a valid server
 * to send an operation to.
 *
 * @api public
 * @memberOf Error
 * @static
 
 * An instance of this error will be thrown if you used an array projection
 * and then modified the array in an unsafe way.
 *
 * @api public
 * @memberOf Error
 * @static
 
 * Thrown when your try to pass values to model constructor that
 * were not specified in schema or change immutable properties when
 * `strict` mode is `"throw"`
 *
 * @api public
 * @memberOf Error
 * @static
 
 * An instance of this error class will be returned when mongoose failed to
 * populate with a path that is not existing.
 *
 * @api public
 * @memberOf Error
 * @static
 messages'./messages'Messages'./cast''./notFound''./validation''./validator'VersionError'./version'ParallelSaveError'./parallelSave''./overwriteModel''./missingSchema''./bulkSaveIncompleteError'MongooseServerSelectionError'./serverSelection''./divergentArray''./strict'StrictPopulateError'./strictPopulate'MongooseError constructor. MongooseError is the base class for all
Mongoose-specific errors.

#### Example:

const Model = mongoose.model('Test', new mongoose.Schema({ answer: Number }));
const doc = new Model({ answer: 'not a number' });
const err = doc.validateSync();

err instanceof mongoose.Error.ValidationError; // trueError message
Error https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/ErrorThe name of the error. The name uniquely identifies this Mongoose error. The
possible values are:

- `MongooseError`: general Mongoose error
- `CastError`: Mongoose could not convert a value to the type defined in the schema path. May be in a `ValidationError` class' `errors` property.
- `DivergentArrayError`: You attempted to `save()` an array that was modified after you loaded it with a `$elemMatch` or similar projection
- `MissingSchemaError`: You tried to access a model with [`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.model()) that was not defined
- `DocumentNotFoundError`: The document you tried to [`save()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.save()) was not found
- `ValidatorError`: error from an individual schema path's validator
- `ValidationError`: error returned from [`validate()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate()) or [`validateSync()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.validateSync()). Contains zero or more `ValidatorError` instances in `.errors` property.
- `MissingSchemaError`: You called `mongoose.Document()` without a schema
- `ObjectExpectedError`: Thrown when you set a nested path to a non-object value with [strict mode set](https://mongoosejs.com/docs/guide.html#strict).
- `ObjectParameterError`: Thrown when you pass a non-object value to a function which expects an object as a paramter
- `OverwriteModelError`: Thrown when you call [`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.model()) to re-define a model that was already defined.
- `ParallelSaveError`: Thrown when you call [`save()`](https://mongoosejs.com/docs/api/model.html#Model.prototype.save()) on a document when the same document instance is already saving.
- `StrictModeError`: Thrown when you set a path that isn't the schema and [strict mode](https://mongoosejs.com/docs/guide.html#strict) is set to `throw`.
- `VersionError`: Thrown when the [document is out of sync](https://mongoosejs.com/docs/guide.html#versionKey)Error
The default built-in validator error messages.Error.messages https://mongoosejs.com/docs/api/error.html#Error.messages
@staticAn instance of this error class will be thrown when mongoose failed to
cast a value.An instance of this error class will be thrown when `save()` fails
because the underlying
document was not found. The constructor takes one parameter, the
conditions that mongoose passed to `updateOne()` when trying to update
the document.An instance of this error class will be thrown when [validation](https://mongoosejs.com/docs/validation.html) failed.
The `errors` property contains an object whose keys are the paths that failed and whose values are
instances of CastError or ValidationError.A `ValidationError` has a hash of `errors` that contain individual
`ValidatorError` instances.

#### Example:

const schema = Schema({ name: { type: String, required: true } });
const Model = mongoose.model('Test', schema);
const doc = new Model({});

// Top-level error is a ValidationError, **not** a ValidatorError
const err = doc.validateSync();
err instanceof mongoose.Error.ValidationError; // true

// A ValidationError `err` has 0 or more ValidatorErrors keyed by the
// path in the `err.errors` property.
err.errors['name'] instanceof mongoose.Error.ValidatorError;

err.errors['name'].kind; // 'required'
err.errors['name'].path; // 'name'
err.errors['name'].value; // undefined

Instances of `ValidatorError` have the following properties:

- `kind`: The validator's `type`, like `'required'` or `'regexp'`
- `path`: The path that failed validation
- `value`: The value that failed validationAn instance of this error class will be thrown when you call `save()` after
the document in the database was changed in a potentially unsafe way. See
the [`versionKey` option](https://mongoosejs.com/docs/guide.html#versionKey) for more information.An instance of this error class will be thrown when you call `save()` multiple
times on the same document in parallel. See the [FAQ](https://mongoosejs.com/docs/faq.html) for more
information.Thrown when a model with the given name was already registered on the connection.
See [the FAQ about `OverwriteModelError`](https://mongoosejs.com/docs/faq.html#overwrite-model-error).Thrown when you try to access a model that has not been registered yetThrown when some documents failed to save when calling `bulkSave()`Thrown when the MongoDB Node driver can't connect to a valid server
to send an operation to.An instance of this error will be thrown if you used an array projection
and then modified the array in an unsafe way.Thrown when your try to pass values to model constructor that
were not specified in schema or change immutable properties when
`strict` mode is `"throw"`An instance of this error class will be returned when mongoose failed to
populate with a path that is not existing.exports ... seErrorMongoos ... ages');Mongoos ... sages')Mongoos ... essagesrequire ... sages')./messages/messagesMongoos ... ssages;Mongoos ... cast');Mongoos ... /cast')require('./cast')./cast/castMongoos ... ound');Mongoos ... Found')Mongoos ... ndErrorDocumen ... ndErrorrequire ... Found')./notFound/notFoundMongoos ... tion');Mongoos ... ation')./validation/validationMongoos ... ator');Mongoos ... dator')Mongoos ... orError./validator/validatorMongoos ... sion');Mongoos ... rsion')require('./version')./version/versionMongoos ... Save');Mongoos ... lSave')Mongoos ... veErrorrequire ... lSave')./parallelSave/parallelSaveMongoos ... odel');Mongoos ... Model')./overwriteModel/overwriteModelMongoos ... hema');Mongoos ... chema')./missingSchema/missingSchemaMongoos ... rror');'./bulk ... eError'./bulkSaveIncompleteError/bulkSaveIncompleteError./serverSelection/serverSelectionMongoos ... rray');Mongoos ... Array')Mongoos ... ayError./divergentArray/divergentArrayMongoos ... rict');Mongoos ... trict')require('./strict')./strict/strictMongoos ... late');Mongoos ... ulate')require ... ulate')./strictPopulate/strictPopulate/home/insomnia/repos/mongoose/lib/error/invalidSchemaOption.js
 * InvalidSchemaOption Error constructor.
 * @param {String} name
 * @api private
 InvalidSchemaOptionErrorCannot create use schema for property "" because the schema has the  option enabled.'InvalidSchemaOptionError'InvalidSchemaOption Error constructor.class I ... ;\n  }\n}Invalid ... onError(name,  ... g);\n  }const m ... bled.`;msg = ` ... abled.``Cannot ... abled.`Cannot  ... perty "" becau ... as the Invalid ... ototypevalue:  ... nError''Invali ... nError'module. ... nError;module. ... onError/home/insomnia/repos/mongoose/lib/error/messages.js
 * The default built-in validator error messages. These may be customized.
 *
 *     // customize within each schema or globally like so
 *     const mongoose = require('mongoose');
 *     mongoose.Error.messages.String.enum  = "Your custom message for {PATH}.";
 *
 * Error messages support basic templating. Mongoose will replace the following strings with the corresponding value.
 *
 * - `{PATH}` is replaced with the invalid document path
 * - `{VALUE}` is replaced with the invalid value
 * - `{TYPE}` is replaced with the validator type such as "regexp", "min", or "user defined"
 * - `{MIN}` is replaced with the declared min value for the Number.min validator
 * - `{MAX}` is replaced with the declared max value for the Number.max validator
 *
 * Click the "show code" link below to see all defaults.
 *
 * @static
 * @memberOf MongooseError
 * @api public
 general'Validator failed for path `{PATH}` with value `{VALUE}`''Path `{PATH}` is required.''Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).''Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).''`{VALUE}` is not a valid enum value for path `{PATH}`.''Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).''Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).''Path `{PATH}` is invalid ({VALUE}).'minlength'Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).'maxlength'Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH}).'The default built-in validator error messages. These may be customized.

// customize within each schema or globally like so
const mongoose = require('mongoose');
mongoose.Error.messages.String.enum  = "Your custom message for {PATH}.";

Error messages support basic templating. Mongoose will replace the following strings with the corresponding value.

- `{PATH}` is replaced with the invalid document path
- `{VALUE}` is replaced with the invalid value
- `{TYPE}` is replaced with the validator type such as "regexp", "min", or "user defined"
- `{MIN}` is replaced with the declared min value for the Number.min validator
- `{MAX}` is replaced with the declared max value for the Number.max validator

Click the "show code" link below to see all defaults.const m ... s = {};msg = m ... ts = {}module. ... ts = {}exports = {}msg.Doc ... = null;msg.Doc ...  = nullmsg.Doc ... ndErrormsg.general = {};msg.general = {}msg.generalmsg.gen ... LUE}`';msg.gen ... ALUE}`'msg.general.default'Valida ... ALUE}`'Validator failed for path `{PATH}` with value `{VALUE}`msg.gen ... ired.';msg.gen ... uired.'msg.general.required'Path ` ... uired.'Path `{PATH}` is required.msg.Number = {};msg.Number = {}msg.Numbermsg.Num ... IN}).';msg.Num ... MIN}).'msg.Number.min'Path ` ... MIN}).'Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).msg.Num ... AX}).';msg.Num ... MAX}).'msg.Number.max'Path ` ... MAX}).'Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).msg.Num ... TH}`.';msg.Num ... ATH}`.'msg.Number.enum'`{VALU ... ATH}`.'`{VALUE}` is not a valid enum value for path `{PATH}`.msg.Date = {};msg.Date = {}msg.Datemsg.Dat ... IN}).';msg.Dat ... MIN}).'msg.Date.minPath `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).msg.Dat ... AX}).';msg.Dat ... MAX}).'msg.Date.maxPath `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).msg.String = {};msg.String = {}msg.Stringmsg.Str ... TH}`.';msg.Str ... ATH}`.'msg.String.enummsg.Str ... UE}).';msg.Str ... LUE}).'msg.String.match'Path ` ... LUE}).'Path `{PATH}` is invalid ({VALUE}).msg.Str ... TH}).';msg.Str ... GTH}).'msg.String.minlength'Path ` ... GTH}).'Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).msg.String.maxlengthPath `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})./home/insomnia/repos/mongoose/lib/error/missingSchema.js
 * MissingSchema Error constructor.
 * @param {String} name
 * @api private
 'Schema hasn\'t been registered for model "''".\n''Use mongoose.model(name, schema)''MissingSchemaError'(name)  ... g);\n  }const m ... hema)';msg = ' ... chema)''Schema ...  '".\n''Schema ...  + name'Schema ... odel "'Schema hasn't been registered for model "".
Use mongoose.model(name, schema)value:  ... aError'/home/insomnia/repos/mongoose/lib/error/mongooseError.jsclass M ... ror { }constru ... rgs); }(...arg ... rgs); }{ super(...args); }super(...args);super(...args)...args/home/insomnia/repos/mongoose/lib/error/notFound.js
 * OverwriteModel Error constructor.
 * @api private
 numAffected'No document found for query "''" on model "''DocumentNotFoundError'OverwriteModel Error constructor.constru ... er;\n  }(filter ... er;\n  }{\n    l ... er;\n  }let msg;const m ... ssages;message ... essagesif (mes ... ;\n    }message ... != nullmessage ... ndErrormsg = t ... dError;msg = t ... ndErrortypeof  ... ndErrormessage ...  model)msg = ' ...  + '"';msg = ' ... l + '"''No doc ... l + '"''No doc ... + model'No doc ... odel "''No doc ... filter)'No doc ... uery "'No document found for query "util.inspect(filter)" on model "this.re ... result;this.result = resultthis.resultthis.nu ... fected;this.nu ... ffectedthis.numAffectedthis.fi ... filter;this.filter = filterthis.filterthis.query = filter;this.query = filtervalue:  ... dError''Docume ... dError'module. ... dError;module. ... ndError/home/insomnia/repos/mongoose/lib/error/objectExpected.js
 * Strict mode error constructor
 *
 * @param {string} type
 * @param {string} value
 * @api private
 typeDescription'primitive value''Tried to set nested object field `'\` to  \`'`''ObjectExpectedError'Strict mode error constructorclass O ... ;\n  }\n}constru ... th;\n  }(path,  ... th;\n  }{\n    c ... th;\n  }const t ... value';typeDes ...  value'Array.i ...  value'primitive valuesuper(' ... + '`');super(' ...  + '`')'Tried  ... l + '`''Tried  ... ` + val'Tried  ... on} \``'Tried  ...  + path'Tried  ... ield `'Tried to set nested object field ``\` to  ... on} \``` to  `ObjectE ... ototype'Object ... dError'module. ... edError/home/insomnia/repos/mongoose/lib/error/objectParameter.js
 * Constructor for errors that happen when a parameter that's expected to be
 * an object isn't an object
 *
 * @param {Any} value
 * @param {String} paramName
 * @param {String} fnName
 * @api private
 paramNamefnName'Parameter "''" to ''() must be an object, got "''" (type ''ObjectParameterError'Constructor for errors that happen when a parameter that's expected to be
an object isn't an object(value, ... ');\n  }super(' ... + ')');super(' ...  + ')')'Parame ... e + ')''Parame ... f value'Parame ... (type ''Parame ... tring()'Parame ...  got "''Parame ...  fnName'Parame ... '" to ''Parame ... ramNameParameter "" to '() mus ...  got "'() must be an object, got "value:  ... rError''Object ... rError'module. ... rError;module. ... erError/home/insomnia/repos/mongoose/lib/error/overwriteModel.js
 * OverwriteModel Error constructor.
 * @param {String} name
 * @api private
 'Cannot overwrite `''` model once compiled.''OverwriteModelError'(name)  ... ');\n  }super(' ... led.');super(' ... iled.')'Cannot ... piled.''Cannot ...  + nameCannot overwrite `'` mode ... piled.'` model once compiled.Overwri ... ototypevalue:  ... lError''Overwr ... lError'module. ... lError;module. ... elError/home/insomnia/repos/mongoose/lib/error/parallelSave.js
 * ParallelSave Error constructor.
 *
 * @param {Document} doc
 * @api private
 'Can\'t save() the same doc multiple times in parallel. Document: ''ParallelSaveError'ParallelSave Error constructor.class P ... ;\n  }\n}constru ... d);\n  }(doc) { ... d);\n  }{\n    c ... d);\n  }const m ... ent: ';msg = ' ... ment: ''Can\'t ... ment: 'Can't save() the same doc multiple times in parallel. Document: Can't save the same doc multiple times in parallel Document: super(m ... c._id);super(m ... oc._id)msg + doc._doc._idParalle ... ototypemodule. ... veError/home/insomnia/repos/mongoose/lib/error/parallelValidate.js
 * ParallelValidate Error constructor.
 *
 * @param {Document} doc
 * @api private
 'Can\'t validate() the same doc multiple times in parallel. Document: ''ParallelValidateError'ParallelValidate Error constructor.Can't validate() the same doc multiple times in parallel. Document: Can't validate'Parall ... eError'/home/insomnia/repos/mongoose/lib/error/serverSelection.js
   * MongooseServerSelectionError constructor
   *
   * @api private
    Special message for a case that is likely due to IP whitelisting issues.// Spec ... issues.allServersUnknown'../helpers/topology/allServersUnknown'isAtlas'../helpers/topology/isAtlas'isSSLError'../helpers/topology/isSSLError'atlasMessage'Could not connect to any servers in your MongoDB Atlas cluster. ''One common reason is that you\'re trying to access the database from ''an IP that isn\'t whitelisted. Make sure your current IP address is on your Atlas ''cluster\'s IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/'sslMessage'Mongoose is connecting with SSL enabled, but the server is ''not accepting SSL connections. Please ensure that the MongoDB server you are ''connecting to is configured to accept SSL connections. Learn more: ''https://mongoosejs.com/docs/tutorials/ssl.html'isAtlasWhitelistError'bad auth''Authentication failed'cause'MongooseServerSelectionError'MongooseServerSelectionError constructorconst a ... nown');allServ ... known')require ... known')'../hel ... nknown'../helpers/topology/allServersUnknown/helpers/topology/allServersUnknownconst i ... tlas');isAtlas ... Atlas')require ... Atlas')'../hel ... sAtlas'../helpers/topology/isAtlas/helpers/topology/isAtlasconst i ... rror');isSSLEr ... Error')'../hel ... LError'../helpers/topology/isSSLError/helpers/topology/isSSLErrorconst a ... list/';atlasMe ... elist/''Could  ... elist/''Could  ... Atlas ''Could  ...  from ''Could  ... ster. 'Could not connect to any servers in your MongoDB Atlas cluster. 'One co ...  from 'One common reason is that you're trying to access the database from 'an IP  ... Atlas 'an IP that isn't whitelisted. Make sure your current IP address is on your Atlas 'cluste ... elist/'cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/Could not connect to any servers in your MongoDB Atlas cluster One common reason is that you're trying to access the database from an IP that isn't whitelisted Make sure your current IP address is on your Atlas cluster's IP whitelist: https://wwwcom/docs/atlas/security-whitelist/const s ... .html';sslMess ... l.html''Mongoo ... l.html''Mongoo ... more: ''Mongoo ... u are ''Mongoo ... er is 'Mongoose is connecting with SSL enabled, but the server is 'not ac ... u are 'not accepting SSL connections. Please ensure that the MongoDB server you are 'connec ... more: 'connecting to is configured to accept SSL connections. Learn more: 'https: ... l.html'https://mongoosejs.com/docs/tutorials/ssl.htmlMongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.htmlMongoose is connecting with SSL enabled, but the server is not accepting SSL connections Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections Learn more: https://mongoosejscom/docs/tutorials/sslassimil ... is;\n  }(err) { ... is;\n  }{\n    c ... is;\n  }const r ... reason;reason = err.reasonerr.reasonisAtlas ...  === -1isAtlas ... stErrorisAtlas ... reason)isAtlas(reason)allServ ... reason)err.mes ...  === -1err.mes ...  auth')err.message.indexOfbad autherr.mes ... ailed')'Authen ... failed'Authentication failedif (isA ... ;\n    }this.me ... Messageif (isS ... ;\n    }isSSLError(reason)key !== 'name'this[ke ... r[key];this[key] = err[key]this[key]err[key]this.cause = reason;this.cause = reasonthis.cause'Mongoo ... nError'/home/insomnia/repos/mongoose/lib/error/setOptionError.js!
 * Module requirements
 /*!\n *  ... nts\n */
 * Mongoose.set Error
 *
 * @api private
 * @inherits MongooseError
 
   * Console.log helper
   /**\n    ... r\n   */
   * inspect helper
   * @api private
   
  * add message
  * @param {String} key
  * @param {String|Error} error
  * @api private
  /**\n  * ... te\n  */
 * Helper for JSON.stringify
 * Ensure `name` and `message` show up in toJSON output re: gh-9847
 * @api private
 
   * Error for the "errors" array in "SetOptionError" with consistent message
   * @param {String} key
   /**\n    ... y\n   */!
 * Module exports
 /*!\n *  ... rts\n */combinePathErrors'../helpers/error/combinePathErrors'SetOptionErroroptionKey'toJSON''SetOptionError'SetOptionInnerError" is not a valid option to setMongoose.set ErrorConsole.log helperinspect helperadd messageHelper for JSON.stringify
Ensure `name` and `message` show up in toJSON output re: gh-9847Error for the "errors" array in "SetOptionError" with consistent messageconst c ... rors');combine ... rrors')require ... rrors')'../hel ... Errors'../helpers/error/combinePathErrors/helpers/error/combinePathErrorsclass S ... ;\n  }\n}constru ... {};\n  }() {\n   ... {};\n  }{\n    s ... {};\n  }super('');super('')this.errors = {};this.errors = {}toStrin ... s);\n  }() {\n   ... s);\n  }combine ... s(this)inspect ... s);\n  }Object. ... , this)new Err ... essage)addErro ... s);\n  }(key, e ... s);\n  }{\n    i ... s);\n  }error i ... onErrorconst { ...  error;{ errors } = error{ errors }Object.keys(errors)const optionKeythis.ad ... nKey]);this.ad ... onKey])this.addErrorerrors[optionKey]this.er ...  error;this.er ... = errorthis.errors[key]this.me ... (this);this.me ... s(this)if (uti ... pect;\n}SetOpti ... nspect;SetOpti ... inspectSetOpti ... custom]SetOpti ... ototypewritable: falsevalue:  ... });\n  }return  ... age });Object. ... sage }){ name: ... ssage }constru ... `);\n  }(key) { ... `);\n  }{\n    s ... `);\n  }super(` ...  set`);super(` ... o set`)`"${key ... to set`" is no ...  to setSetOpti ... rError;SetOpti ... erError/home/insomnia/repos/mongoose/lib/error/strict.js
 * Strict mode error constructor
 *
 * @param {String} path
 * @param {String} [msg]
 * @param {Boolean} [immutable]
 * @inherits MongooseError
 * @api private
 immutable'Field `''` is not in schema and strict ''mode is set to throw.''StrictModeError'{\n    m ... th;\n  }msg = m ... hrow.';msg = m ... throw.'msg ||  ... throw.''Field  ... throw.''Field  ... trict ''Field `' + pathField `'` is n ... trict '` is not in schema and strict 'mode i ... throw.'mode is set to throw.this.is ... utable;this.is ... mutablethis.is ... leError!!immutable!immutableStrictM ... ototypemodule. ... deError/home/insomnia/repos/mongoose/lib/error/strictPopulate.js
 * Strict mode error constructor
 *
 * @param {String} path
 * @param {String} [msg]
 * @inherits MongooseError
 * @api private
 'Cannot populate path `''` because it is not in your schema. ''Set the `strictPopulate` option to false to override.''StrictPopulateError'msg = m ... ride.';msg = m ... rride.'msg ||  ... rride.''Cannot ... rride.''Cannot ... hema. ''Cannot ...  + path'Cannot ... path `'Cannot populate path `'` beca ... hema. '` because it is not in your schema. 'Set th ... rride.'Set the `strictPopulate` option to false to override.StrictP ... ototype'Strict ... eError'/home/insomnia/repos/mongoose/lib/error/syncIndexes.js
 * SyncIndexes Error constructor.
 *
 * @param {String} message
 * @param {String} errorsMap
 * @inherits MongooseError
 * @api private
 'SyncIndexesError'SyncIndexes Error constructor.SyncInd ... ototypemodule. ... esError/home/insomnia/repos/mongoose/lib/error/validation.js
 * Document Validation Error
 *
 * @api private
 * @param {Document} [instance]
 * @inherits MongooseError
 
  * add message
  * @param {String} path
  * @param {String|Error} error
  * @api private
  '../helpers/getConstructorName'_message'model'' validation failed''Validation failed'': 'errorPath'ValidationError'Document Validation Error'../hel ... orName'../helpers/getConstructorNameclass V ... ;\n  }\n}(instan ...   }\n  }let _message;if (get ... ;\n    }getCons ... 'model'getCons ... stance)_messag ... ailed';_messag ... failed'instanc ... failed'instanc ... delNameinstance.constructor validation failedValidation failedsuper(_message);super(_message)this._m ... essage;this._m ... messagethis._messageif (ins ... ;\n    }instanc ... errors;instanc ... .errorsinstance.$errorsthis.na ... s(this)this.name + ': '(path,  ... s);\n  }const errorPaththis.ad ... Path]);this.ad ... rPath])`${path ... rPath}`errors[errorPath]this.errors[path]this._m ... s(this)this._message + ': 'Validat ... nspect;Validat ... inspectValidat ... custom]Validat ... ototype/home/insomnia/repos/mongoose/lib/error/validator.js
 * Schema validator error
 *
 * @param {Object} properties
 * @param {Document} doc
 * @api private
 
   * toString helper
   * TODO remove? This defaults to `${this.name}: ${this.message}`
   * @api private
   
   * Ensure `name` and `message` show up in toJSON output re: gh-9296
   * @api private
   
 * The object used to define this validator. Not enumerable to hide
 * it from `require('util').inspect()` output re: gh-3925
 * @api private
  Exposed for testing// Expo ... testing
 * Formats error messages
 * @api private
 'ValidatorError''properties'propertyNames'message''{''}'Schema validator errortoString helper
TODO remove? This defaults to `${this.name}: ${this.message}`Ensure `name` and `message` show up in toJSON output re: gh-9296The object used to define this validator. Not enumerable to hide
it from `require('util').inspect()` output re: gh-3925Formats error messages(proper ... on;\n  }let msg ... essage;msg = p ... messageproperties.messageif (!ms ... ;\n    }!msgmsg = M ... efault;msg = M ... defaultMongoos ... defaultMongoos ... generalconst m ... , doc);message ... s, doc)formatM ... s, doc)propert ... age });propert ... sage }){ message: message }message: messagethis.pr ... erties;this.pr ... pertiesthis.propertiesthis.ki ... s.type;this.ki ... es.typeproperties.typethis.pa ... s.path;this.pa ... es.pathproperties.paththis.va ... s.valueproperties.valueproperties.reasontoStrin ... ge;\n  }() {\n   ... ge;\n  }{\n    r ... ge;\n  }return this.message;toJSON( ... s);\n  }Object. ... ull\n});Object. ... null\n}){\n  enu ...  null\n}value: nullValidat ... essage;Validat ... Messagefunctio ...  msg;\n}{\n  if  ...  msg;\n}if (typ ... c);\n  }typeof msgmsg(properties, doc)const p ... rties);propert ... erties)Object. ... erties)const propertyNamepropert ... essage'msg = m ... Name]);msg = m ... yName])msg.rep ... yName])msg.replace'{' + p ... ) + '}''{' + p ... rCase()propert ... rCase()propert ... perCasepropert ... tyName]return msg;module. ... orError/home/insomnia/repos/mongoose/lib/error/version.js
 * Version Error constructor.
 *
 * @param {Document} doc
 * @param {Number} currentVersion
 * @param {Array<String>} modifiedPaths
 * @api private
 currentVersionmodifiedPathsStr'No matching document found for id "''" version '' modifiedPaths "''VersionError'Version Error constructor.constru ... hs;\n  }(doc, c ... hs;\n  }{\n    c ... hs;\n  }modifie ... n(', ')modifiedPaths.joinsuper(' ... + '"');super(' ...  + '"')'No mat ... r + '"''No mat ... athsStr'No mat ... aths "''No mat ... Version'No mat ... rsion ''No mat ... doc._id'No mat ... r id "'No matching document found for id "" version  modifiedPaths "this.ve ... ersion;this.ve ... Versionthis.versionthis.mo ... dPaths;this.mo ... edPathsVersion ... ototype/home/insomnia/repos/mongoose/lib/helpers/aggregate/prepareDiscriminatorPipeline.js/home/insomnia/repos/mongoose/lib/helpers/aggregate/home/insomnia/repos/mongoose/lib/helpers If the first pipeline stage is a match and it doesn't specify a `__t`// If t ... a `__t` key, add the discriminator key to it. This allows for potential// key, ... tential aggregation query optimizations not to be disturbed by this feature.// aggr ... eature. `originalPipeline` is a ref, so there's no need for// `ori ... eed for aggregate._pipeline = originalPipeline// aggr ... ipelineoriginalPipelinefilterKey$matchmodule. ... }\n  }\n}const d ... apping;discrim ... Mappingschema  ... Mappingif (dis ...   }\n  }discrim ... .isRoot!discri ... .isRootconst o ... peline;origina ... ipelineconst f ... ng.key;filterK ... ing.key(prefix ... ing.key(prefix ... prefix)prefix. ...  prefixprefix.length > 0prefix.lengthprefix + '.'discrim ... ing.keyconst d ... .value;discrim ... g.valueif (ori ... ;\n    }origina ... rValue)origina ... .$matchorigina ... != nulloriginalPipeline[0](origin ... rValue)origina ... orValueorigina ... definedorigina ... terKey]origina ... rValue;origina ... geoNearorigina ...  || {};origina ... y || {}origina ... r.queryorigina ... $searchif (ori ...       }originalPipeline[1]const match = {};match = {}match[f ... rValue;match[f ... orValuematch[filterKey]origina ... tch });origina ... atch })origina ... .splice{ $match: match }$match: matchorigina ... unshift/home/insomnia/repos/mongoose/lib/helpers/aggregate/stringifyFunctionOperators.jsstagecanHaveAccumulator$bucket$bucketAutohandleAccumulatorstageTypestageOptions$function$accumulator'accumulate''merge''finalize'if (!Ar ... rn;\n  }!Array. ... peline)const stagestage == nullconst c ... etAuto;canHave ... ketAutostage.$ ... ketAutostage.$ ... $bucketstage.$groupstage.$bucketstage.$bucketAutoif (can ... }\n    }canHave ... != nullObject. ... ulator)handleA ... [key]);handleA ... r[key])canHave ... or[key]const s ... ge)[0];stageTy ... age)[0]Object. ... age)[0]Object.keys(stage)if (sta ... }\n    }stageTy ... object'typeof  ... geType]stage[stageType]const s ... eType];stageOp ... geType]if (sta ...       }stageOp ... nction'stageOp ... != nullstageOptions[key]stageOp ... unctiontypeof  ... on.bodystageOp ... on.bodystageOp ... ring();stageOp ... tring()stageOp ... oStringstage.$facet != nullstage.$facetObject. ... $facet)stringi ... [key]);stringi ... t[key])stage.$facet[key]if (ope ... rn;\n  }operato ... == nulloperator == nulloperato ... mulator['init' ... alize']accumulatefinalizetypeof  ... or[key]operato ... or[key]operato ... [key]);operato ... r[key])String( ... r[key])/home/insomnia/repos/mongoose/lib/helpers/arrayDepth.jsarrayDepthcontainsNonArrayItem_resmodule. ... yDepth;module. ... ayDepthfunctio ...  res;\n}{\n  if  ...  res;\n}if (!Ar ...  };\n  }!Array.isArray(arr)Array.isArray(arr)return  ... true };{ min:  ...  true }max: 0contain ... m: trueif (arr ...  };\n  }arr.length === 0{ min:  ... false }min: 1max: 1contain ... : falsearr.len ... arr[0])arr.length === 1!Array. ... arr[0])Array.i ... arr[0])arr[0]const r ... rr[0]);res = a ... arr[0])arrayDepth(arr[0])for (le ... em;\n  }i < arr.length{\n    c ... em;\n  }const _ ... rr[i]);_res =  ... arr[i])arrayDepth(arr[i])arr[i]if (_re ... ;\n    }_res.min < res.min_res.minres.minres.min = _res.min;res.min = _res.min_res.max > res.max_res.maxres.maxres.max = _res.max;res.max = _res.maxres.con ... ayItem;res.con ... rayItem_res.co ... rayItemres.min ... in + 1;res.min ... min + 1res.min + 1res.max ... ax + 1;res.max ... max + 1res.max + 1/home/insomnia/repos/mongoose/lib/helpers/clone.js
 * Object clone with Mongoose natives support.
 *
 * If options.minimize is true, creates a minimal data object. Empty objects and undefined values will not be cloned. This makes the data payload sent to MongoDB as small as possible.
 *
 * Functions and primitives are never cloned.
 *
 * @param {Object} obj the object to clone
 * @param {Object} options
 * @param {Boolean} isArrayChild true if cloning immediately underneath an array. Special case for minimize.
 * @return {Object} the cloned object
 * @api private
  ignore// ignore object created with Object.create(null)// obje ... e(null) If we're cloning this object to go into a MongoDB command,// If w ... ommand, and there's a `toBSON()` function, assume this object will be// and  ... will be stored as a primitive in MongoDB and doesn't need to be cloned.// stor ... cloned. Don't pass `isArrayChild` down// Don' ... d` downDecimal'./specialProperties''./isMongooseObject''./getFunctionName''./isBsonType''../types/array/isMongooseArray''./isObject''./isPOJO'symbols'./symbols'trustedSymbol'./query/trusted'isArrayChild'Double'cloneArray$__parentobjConstructorcloneObject'RegExp'cloneRegExpflattenDecimalsschemaTypeSymbolseenhasKeysObject clone with Mongoose natives support.

If options.minimize is true, creates a minimal data object. Empty objects and undefined values will not be cloned. This makes the data payload sent to MongoDB as small as possible.

Functions and primitives are never cloned.the object to clone
true if cloning immediately underneath an array. Special case for minimize.
the cloned object
const s ... ties');special ... rties')require ... rties')'./spec ... erties'./specialProperties/specialProperties./isMongooseObject/isMongooseObjectgetFunc ... nName')require ... nName')./getFunctionName/getFunctionName./isBsonType/isBsonTypeconst i ... eArray;isMongo ... seArrayrequire ... seArray'../typ ... eArray'../types/array/isMongooseArray/types/array/isMongooseArray./isObject/isObjectconst i ... POJO');isPOJO  ... sPOJO')require('./isPOJO')./isPOJO/isPOJOconst s ... bols');symbols ... mbols')require('./symbols')./symbols/symbolsconst t ... Symbol;trusted ... dSymbolrequire ... usted')./query/trusted/query/trustedfunctio ... ild);\n}{\n  if  ... ild);\n}if (isB ... e);\n  }isBsonT ... ouble')new BSO ... .value)obj.valueif (typ ... bj;\n  }if (Arr ... s);\n  }cloneAr ... ptions)isMongo ... y : objisMongooseArray(obj)obj.__arrayif (isM ... et;\n  }isMongo ... ct(obj){\n    i ... et;\n  }if (opt ... }\n    }options ... cumentsconst c ... lone();clonedD ... clone()obj.$clone()obj.$cloneobj.__index != nullobj.__indexclonedD ... _index;clonedD ... __indexclonedDoc.__indexobj.__p ... != nullobj.__parentArrayclonedD ... tArray;clonedD ... ntArrayclonedD ... parent;clonedD ... _parentclonedDoc.$__parentobj.$__parentif (isP ... ;\n    }isPOJO( ... != nullisPOJO(obj)obj._doc != nullreturn obj._doc;options ... nction'options ... ns.jsontypeof obj.toJSONobj.toJSONret = o ... tions);ret = o ... ptions)obj.toJSON(options)obj.toO ... ptions)obj.toObjectconst o ... ructor;objCons ... tructorobj.constructorswitch  ... ;\n    }getFunc ... ructor)case 'O ... Child);return  ... Child);cloneOb ... yChild)case 'D ... (+obj);return  ... (+obj);new obj ... r(+obj)+objcase 'R ... p(obj);return  ... p(obj);cloneRegExp(obj)default ...  break;if (isB ... d);\n  }{\n    i ... d);\n  }return obj.toJSON();obj.toJSON()return  ... bj.id);new ObjectId(obj.id)obj.idif (isB ... ));\n  }{\n    i ... ));\n  }options ... ecimalsDecimal ... ring())Decimal.fromStringobj.toString()obj.toStringif (!ob ... d);\n  }!objCon ... ct(obj)!objConstructorisObject(obj)if (typ ... ();\n  }obj[sym ... Symbol]symbols ... eSymbolreturn obj.clone();obj.clone()obj.cloneif (opt ... bj;\n  }options ... ns.bsonoptions.bsontypeof obj.valueOfobj.valueOfobj.valueOf()module. ...  clone;module. ... = cloneconst m ... nimize;minimiz ... inimizeconst o ... efined;omitUnd ... definedconst s ... ._seen;seen =  ... s._seenoptions ... s._seenlet hasKeys;if (see ... t);\n  }seen && ... as(obj)seen.has(obj)seen.has{\n    r ... j);\n  }return  ... t(obj);seen.get(obj)seen.get{\n    s ... t);\n  }seen.set(obj, ret);seen.set(obj, ret)seen.setif (tru ... l];\n  }trusted ... = falsetrustedSymbol in objoptions ... dSymbolret[tru ... ymbol];ret[tru ... Symbol]ret[trustedSymbol]obj[trustedSymbol]const key = keys[i];special ... as(key)const v ... false);val = c ...  false)clone(o ...  false)if ((mi ... ;\n    }(minimi ... efined'(minimi ... efined)minimiz ... definedminimize === falsedelete ret[key];delete ret[key]if (min ... ;\n    }minimiz ... fined')minimize !== true(typeof ... fined')hasKeys ...  true);hasKeys ... = true)(hasKeys = true)hasKeys = trueret[key] = val;ret[key] = valreturn  ...  : ret;minimiz ... t : retminimiz ... ayChild!isArrayChildhasKeys && ret{\n  let ...  ret;\n}len = arr.lengthconst r ... y(len);ret = new Array(len)new Array(len)for (i  ... e);\n  }ret[i]  ...  true);ret[i]  ... , true)ret[i]clone(a ... , true)const r ... flags);ret = n ... .flags)new Reg ... .flags)regexp.sourceregexp.flagsif (ret ... ex;\n  }ret.las ... stIndexret.lastIndexregexp.lastIndex{\n    r ... ex;\n  }ret.las ... tIndex;/home/insomnia/repos/mongoose/lib/helpers/common.js Avoid going into mixed paths if schema is specified// Avoi ... ecified'../error'keySchemaisNestedshouldFlattenrecursiona circular reference in the update value, updateValue:

updatePath: 'Mongoos ... error')require('../error')../error/errorexports ... latten;exports ... flattenexports.flattenexports ... dPaths;exports ... edPathsif (upd ... });\n  }update  ... update)isMongo ... update)!Buffer ... update)Buffer. ... update){\n    k ... });\n  }keys =  ... || {});update. ... ) || {}update. ... alse })update.toObject{ trans ... false }update || {}path =  ... ' : '';path =  ... .' : ''path ?  ... .' : ''const v ... e[key];val = update[key]update[key]result[ ...  = val;result[ ... ] = valresult[path + key]path + keyconst k ... + key);keySche ...  + key)schema  ...  + key)schema  ... ma.pathschema. ...  + key)const i ... + key];isNeste ...  + key]schema  ...  + key]schema  ... .nestedschema. ...  + key]if (key ... ntinue;keySche ... 'Mixed'keySchema.instanceshouldFlatten(val)options ... ay(val)options ... pArraysoptions.skipArraysconst kresult[k] = flat[k];result[k] = flat[k]result[k]flat[k]if (isN ... }\n    }if (p.s ...       }p.start ... erty(p)path + key + '.'!result ... erty(p)result. ... erty(p)result. ... ropertyresult[p] = void 0;result[p] = void 0result[p]if (upd ... rn;\n  }update  ... object'update == nulltypeof updateif (rec ...  };\n  }recursion == nullrecursi ... \n    };recursi ... )\n    }raw: {  ...  path }{ update, path }trace: new WeakSet()new WeakSet()if (rec ... `);\n  }recursi ... update)recursion.trace.hasrecursion.tracethrow n ... th}'`);new Mon ... ath}'`)`a circ ... path}'`a circu ... Value:\nutil.in ... h: 1 })recursion.raw.updaterecursion.raw{ showH ... th: 1 }showHidden: falsedepth: 1\nupdatePath: 'recursion.raw.pathrecursi ... pdate);recursion.trace.addresult  ...  || {};result  ... t || {}result || {}let val ... e[key];const _ ...  + key;_path = path + keyresult[ ... = true;result[_path] = trueresult[_path]if (!Bu ... ;\n    }!Buffer ... ct(val)!Buffer ... er(val)Buffer.isBuffer(val)isMongo ... ct(val)if (sho ... ;\n    }modifie ... rsion);modifie ... ursion)recursi ... .deletefunctio ... ary);\n}{\n  ret ... ary);\n}return  ... inary);val &&\n ... Binary)val &&\n ... al128')val &&\n ... Buffer)val &&\n ...  !== 0)val &&\n ... ectId')val &&\n ... f Date)val &&\n ... object'!(val i ... f Date)(val in ... f Date)val instanceof Date!isBson ... ectId')(!Array ...  !== 0)!Array. ... h !== 0!(val i ... Buffer)(val in ... Buffer)val ins ...  Buffer!isBson ... al128')!(val i ... Binary)(val in ... Binary)val ins ...  Binary/home/insomnia/repos/mongoose/lib/helpers/createJSONSchemaTypeDefinition.js
 * Handles creating `{ type: 'object' }` vs `{ bsonType: 'object' }` vs `{ bsonType: ['object', 'null'] }`
 *
 * @param {String} type
 * @param {String} bsonType
 * @param {Boolean} useBsonType
 * @param {Boolean} isRequired
 createJSONSchemaTypeArraybsonTypeuseBsonTypeisRequiredHandles creating `{ type: 'object' }` vs `{ bsonType: 'object' }` vs `{ bsonType: ['object', 'null'] }`createJ ... peArrayif (use ...  };\n  }if (isR ... ;\n    }return { bsonType };{ bsonType }return  ... ll'] };{ bsonT ... ull'] }bsonTyp ... 'null'][bsonType, 'null']return { type };{ type }{ type: ... ull'] }type: [type, 'null'][type, 'null']/home/insomnia/repos/mongoose/lib/helpers/cursor/eachAsync.js/home/insomnia/repos/mongoose/lib/helpers/cursor
 * Execute `fn` for every document in the cursor. If `fn` returns a promise,
 * will wait for the promise to resolve before iterating on to the next one.
 * Returns a promise that resolves when done.
 *
 * @param {Function} next the thunk to call to get the next document
 * @param {Function} fn
 * @param {Object} options
 * @param {Number} [options.batchSize=null] if set, Mongoose will call `fn` with an array of at most `batchSize` documents, instead of a single document
 * @param {Number} [options.parallel=1] maximum number of `fn` calls that Mongoose will run in parallel
 * @param {AbortSignal} [options.signal] allow cancelling this eachAsync(). Once the abort signal is fired, `eachAsync()` will immediately fulfill the returned promise (or call the callback) and not fetch any more documents.
 * @return {Promise}
 * @api public
 * @method eachAsync
  We may end up calling `next()` multiple times on an exhausted// We m ... hausted cursor, which leads to an error. In case cursor is exhausted,// curs ... austed, just treat it as if the cursor returned no document, which is// just ... hich is how a cursor indicates it is exhausted.// how  ... austed. Kick off the subsequent `next()` before handling the result, but// Kick ... lt, but make sure we know that we still have a result to handle re: #8422// make ... : #8422 If the current documents size is less than the provided batch size don't process the documents yet// If t ... nts yet `next()` can only execute one at a time, so make sure we always execute// `nex ... execute `next()` in series, while still allowing multiple `fn()` instances to run// `nex ...  to run in parallel.// in parallel.'../../error/eachAsyncMultiError''../immediate'parallelaggregatedErrorsasyncQueueaborted'abort''batchSize must be a number''batchSize must be an integer''batchSize must be at least 1'iteratefinalCallbackhandleResultsInProgresscurrentDocumentIndexcreateFetchdocumentsBatchdrained'MongoCursorExhaustedError'finalErrcreateEachAsyncMultiErrorhandleNextResulthandleNextResultCallBackdocsToProcess-='`eachAsync()` promise rejected without error'inProgress_stepthe thunk to call to get the next document
maximum number of `fn` calls that Mongoose will run in parallel
allow cancelling this eachAsync(). Once the abort signal is fired, `eachAsync()` will immediately fulfill the returned promise (or call the callback) and not fetch any more documents.
options.signalAbortSignal=AbortSignalconst E ... rror');EachAsy ... Error')'../../ ... iError'../../error/eachAsyncMultiError/error/eachAsyncMultiError../immediate/immediateconst p ... l || 1;paralle ... el || 1options ... el || 1const b ... chSize;batchSi ... tchSizeconst s ... signal;signal  ... .signalconst c ... nError;continu ... OnErroraggrega ... rs = []const e ... ueue();enqueue ... Queue()asyncQueue()let aborted = false;aborted = falseif (sig ... ;\n    }signal != nullif (sig ...       }signal.abortedreturn  ... (null);resolve(null)signal. ... rue });signal. ... true })signal. ... isteneraborted = true;aborted = trueif (bat ... }\n    }batchSize != nulltypeof batchSizethrow n ... mber');new Typ ... umber')'batchS ... number'batchSize must be a numberif (!Nu ...       }!Number ... chSize)Number. ... chSize)throw n ... eger');new Typ ... teger')'batchS ... nteger'batchSize must be an integerif (bat ...       }batchSize < 1throw n ... st 1');new Typ ... ast 1')'batchS ... east 1'batchSize must be at least 1iterate ...     });iterate ... \n    })let han ... ss = 0;handleR ... ess = 0handleR ... rogresslet cur ... ex = 0;current ... dex = 0let error = null;error = nulli < parallelenqueue ... tch());enqueue ... etch())createFetch()let doc ... h = [];documentsBatch = []let drained = false;drained = falsereturn fetch;if (dra ...       }drained || abortednext(fu ...     });next(fu ...      })err.nam ... dError'err.name'MongoC ... dError'MongoCursorExhaustedErrordoc = null;doc = nullaggrega ... h(err);aggrega ... sh(err)aggrega ... rs.pusherror = err;error = errfinalCallback(err);finalCallback(err)drained = true;drained = trueif (han ...       }handleR ... ss <= 0const f ...  error;finalEr ...   errorcontinu ...   errorcreateE ... Errors)createE ... tiErrorfinalCa ... alErr);finalCa ... nalErr)batchSi ... .lengthdocumen ... .lengthhandleN ... lBack);handleN ... llBack)current ... Index++handleN ... allBack++handl ... ogress;++handl ... rogressimmedia ... one());immedia ... done())() => done()documen ... h(doc);documen ... sh(doc)documentsBatch.pushdocumen ... tchSizeimmedia ... etch));immedia ... fetch))() => enqueue(fetch)enqueue(fetch)docsToP ... h : docbatchSi ... h : dochandleR ... length;handleR ... .lengthdocumentsBatch = [];--handl ... ogress;--handl ... rogressif ((dr ...       }(draine ... ss <= 0(drained || aborted)return  ... alErr);let maybePromise;maybePr ... oc, i);maybePr ... doc, i)fn(doc, i)catch ( ... ;\n    }if (may ... ;\n    }functio ... ull); }{ callback(null); }callback(null);callback(null)callbac ... ror'));callbac ... rror'))error | ... error')new Err ... error')'`eachA ...  error'`eachAsync()` promise rejected without error`eachAsync` promise rejected without errorconst _queue = [];_queue = []let inP ... = null;inProgress = nulllet id = 0;id = 0functio ... n);\n  }{\n    i ... n);\n  }inProgr ... h === 0inProgress === null_queue.length === 0_queue.lengthinProgress = id++;inProgress = id++id++return fn(_step);fn(_step)_queue.push(fn);_queue.push(fn)_queue.pushif (_qu ... ;\n    }_queue.length !== 0const f ... hift();fn = _queue.shift()_queue.shift()_queue.shiftfn(_step);inProgress = null;functio ... ors);\n}{\n  if  ... ors);\n}if (agg ... ll;\n  }aggrega ... h === 0aggrega ... .lengthreturn  ... rrors);new Eac ... Errors)/home/insomnia/repos/mongoose/lib/helpers/discriminator/applyEmbeddedDiscriminators.js/home/insomnia/repos/mongoose/lib/helpers/discriminatorapplyEmbeddedDiscriminatorsoverwriteExisting_applyDiscriminators_appliedDiscriminatorsdiscriminatormodule. ... nators;module. ... inatorsapplyEm ... inatorsif (see ... rn;\n  }seen.has(schema)seen.add(schema);seen.add(schema)seen.add{\n    c ... ue;\n  }schemaT ... s[path]!schemaType.schemaschemaType.schemaapplyEm ...  seen);applyEm ... , seen)!schema ... inatorsschemaT ... inatorsschemaT ... xisting_applie ... inators!overwriteExistingschemaT ... .keys()schemaT ... rs.keysconst d ... atorKeyconst { ... orKey);{\n      ... torKey)schema: ... rSchemaschemaT ... torKey)schemaT ... ors.getschemaT ...      );schemaT ...       )schemaT ... minatoroverwri ... optionsoverwri ... g: trueschemaT ... = true;schemaT ...  = true/home/insomnia/repos/mongoose/lib/helpers/discriminator/areDiscriminatorValuesEqual.js'../isBsonType'areDiscriminatorValuesEqual../isBsonTypemodule. ... lse;\n};module. ... alse;\n}areDisc ... esEqualif (typ ...  b;\n  }typeof atypeof b{\n    r ...  b;\n  }return a === b;a === bif (isB ... ();\n  }a.toStr ... tring()a.toString()a.toStringb.toString()b.toString/home/insomnia/repos/mongoose/lib/helpers/discriminator/checkEmbeddedDiscriminatorKeyProjection.jscheckEmbeddedDiscriminatorKeyProjectionuserProjectionaddedPathsuserProjectedInPath_discriminatorKeycheckEm ... jectionconst u ... false);userPro ...  false)Object. ...  false)Object. ...  reduceObject. ... ection)(cur, k ...  + '.')cur ||  ...  + '.')const _ ... torKey;_discri ... atorKeypath +  ... atorKeyif (!us ... 1);\n  }!userPr ... atorKey!userPr ... h === 1!userProjectedInPathaddedPa ... h === 1addedPaths.lengthaddedPa ... atorKeyaddedPaths[0]{\n    s ... 1);\n  }selecte ... y), 1);selecte ... ey), 1)selected.spliceselecte ... torKey)selected.indexOf/home/insomnia/repos/mongoose/lib/helpers/discriminator/getConstructor.js
 * Find the correct constructor, taking into account discriminators
 * @api private
 getDiscriminatorByValue'./getDiscriminatorByValue'getConstructorConstructordefaultDiscriminatorValueconstructorByValueFind the correct constructor, taking into account discriminatorsgetDisc ... Value')getDisc ... ByValue'./getD ... yValue'./getDiscriminatorByValue/getDiscriminatorByValuemodule. ... tor;\n};module. ... ctor;\n}functio ... ctor;\n}default ... orValue{\n  con ... ctor;\n}Constru ... atorKeyConstru ... optionsConstructor.schemalet dis ... rKey]);discrim ... orKey])(value  ... orKey])value ! ... torKey]value[d ... torKey]if (dis ... ue;\n  }discrim ... rValue;discrim ... orValueif (Con ...   }\n  }Constru ... != nullConstru ... inatorsif (Con ... }\n    }Constru ... rValue]Constru ... Value];const c ... Value);constru ... rValue)getDisc ... rValue)Constru ... yValue;Constru ... ByValuereturn Constructor;/home/insomnia/repos/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js
 * returns discriminator by discriminatorMapping.value
 *
 * @param {Object} discriminators
 * @param {string} value
 * @api private
 './areDiscriminatorValuesEqual'returns discriminator by discriminatorMapping.valueconst a ... qual');areDisc ... Equal')require ... Equal')'./areD ... sEqual'./areDiscriminatorValuesEqual/areDiscriminatorValuesEqualmodule. ... ull;\n};module. ... null;\n}if (dis ... ll;\n  }Object. ... nators)const i ... [name];it = di ... s[name]discriminators[name]it.sche ...  value)it.sche ... Mappingit.schemaareDisc ...  value)it.sche ... g.valuereturn it;/home/insomnia/repos/mongoose/lib/helpers/discriminator/getSchemaDiscriminatorByValue.js
 * returns discriminator by discriminatorMapping.value
 *
 * @param {Schema} schema
 * @param {string} value
 * @api private
 if (sch ... ll;\n  }schema  ... == nullconst d ... s[key];discrim ... rs[key]schema. ... rs[key]if (dis ... ;\n    }if (are ... ;\n    }return  ... Schema;/home/insomnia/repos/mongoose/lib/helpers/discriminator/mergeDiscriminatorSchema.js
 * Merges `from` into `to` without overwriting existing properties.
 *
 * @param {Object} to
 * @param {Object} from
 * @param {String} [path]
 * @api private
  Skip merging schemas if we're creating a discriminator schema and// Skip ... ema and base schema has a given path as a single nested but discriminator schema// base ...  schema has the path as a document array, or vice versa (gh-9534)// has  ... h-9534)schemaMerge'../schema/merge''../../helpers/specialProperties''../../helpers/isBsonType''../../helpers/isObject'mergeDiscriminatorSchema'discriminators''base''_applyDiscriminators''_userProvidedOptions''options''tree'$isMongooseDocumentArrayElementMerges `from` into `to` without overwriting existing properties.const s ... erge');schemaM ... merge')require ... merge')../schema/merge/schema/merge'../../ ... erties'../../helpers/specialProperties/helpers/specialProperties'../../ ... onType'../../helpers/isBsonType'../../ ... Object'../../helpers/isObjectmergeDi ... rSchemaconst k ... (from);keys =  ... s(from)Object.keys(from)path = path || '';path = path || ''seen =  ... kSet();seen =  ... akSet()seen || ... akSet()seen.has(from)seen.add(from);seen.add(from){\n    k ...   }\n  }key = keys[i++];key = keys[i++]keys[i++]if (!pa ... }\n    }key === ...  'tree'key === ... ptions'key === ... nators'key === ...  'base'key === 'base''_apply ... nators''_userP ... ptions'key === 'options'key === 'tree'path == ... fSchemapath == ... != nullpath === 'tree'from != nullfrom.in ... fSchemaif (to[ ... ;\n    }to[key] == nullto[key]to[key] = from[key];to[key] = from[key]from[key]if (isO ... ;\n    }isObject(from[key])if (!is ...       }!isObject(to[key])isObject(to[key])to[key] = {};to[key] = {}if (fro ...       }from[key] != nullif ((fr ...       }(from[k ... lement)(from[k ... Nested)(from[k ... tArray)from[ke ... ntArrayfrom[ke ... eNestedto[key] ... ntArrayto[key] ... eNestedfrom[ke ... Element$isMong ... Elementto[key] ... Elementfrom[ke ... fSchemaif (to[ ...       }to[key] ... fSchemaschemaM ...  true);schemaM ... , true)from[key].clone()from[key].cloneto[key] ... lone();to[key] ... clone()if (isB ...       }to[key] ... [key]);to[key] ... m[key])new Obj ... m[key])mergeDi ...  seen);mergeDi ... , seen)path ?  ... y : keyif (fro ... e);\n  }from != ... fSchemato.tree ... .tree);to.tree ... o.tree)to.treeObject. ... o.tree)from.tree/home/insomnia/repos/mongoose/lib/helpers/document/applyDefaults.js/home/insomnia/repos/mongoose/lib/helpers/document Non-function defaults should always run **before** setters// Non- ... setters apply defaults to all non-excluded fields// appl ...  fields selected field// selected fieldisNestedProjection'../projection/isNestedProjection'isBeforeSettershasSubpaths$runBeforeSettersapplyChangeTrackingisNeste ... ction')'../pro ... ection'../projection/isNestedProjection/projection/isNestedProjectionconst s ... acking;options ... rackinglet def;if (p = ... ;\n    }p === ' ... .skipIddoc.$__.skipIdpath[le ... == '$*'path[len - 1]let doc_ = doc._doc;doc_ = doc._docdoc_ == nullconst p ... ath[j];piece = path[j]path[j]const h ... tArray;hasSubp ... ntArraytype.$i ... ntArraytype.$isSingleNestedif ((cu ...       }(curPat ... rPath])(curPat ... Path]))curPath ... rPath])!isNest ... rPath])isNeste ... rPath])fields[curPath](j ===  ... rPath])j === l ... urPath]j === l ... != nullj === l ... ubpathshasIncl ... != nullif (has ...       }doc_[pi ...  void 0isBefor ... != nulltypeof  ... ltValueif (!ty ...       }!type.d ... Setterstype.de ... Setters!isBeforeSetterspathsTo ... urPath]pathsToSkip[curPath]if (fie ...       }fields  ... == nullexclude !== nullif (p i ...       }p in fieldsdef = t ... false);doc.inv ... p, err)typeof defdoc_[piece] = def;doc_[piece] = defapplyCh ... cking);applyCh ... acking)doc_ = doc_[piece];doc_ = doc_[piece]{\n  doc ... ;\n  }\n}doc.$__ ... lPath);doc.$__ ... llPath)doc.$__ ... defaultif (!sk ... ));\n  }!skipPa ... != null!skipPa ... eNested!skipPa ... ocument!skipPa ... rackingdoc.$isSubdocumentdoc.$isSingleNesteddoc.$pa ... != nulldoc.$parent()doc.$parent{\n    d ... ));\n  }doc.$pa ... Path));doc.$pa ... lPath))doc.$pa ... defaultdoc.$pa ... vePathsdoc.$parent().$__doc.$__ ... oParent/home/insomnia/repos/mongoose/lib/helpers/document/applyTimestamps.js
 * Apply a given schema's timestamps to the given POJO
 *
 * @param {Schema} schema
 * @param {Object} obj
 * @param {Object} [options]
 * @param {Boolean} [options.isUpdate=false] if true, treat this as an update: just set updatedAt, skip setting createdAt. If false, set both createdAt and updatedAt
 * @param {Function} [options.currentTime] if set, Mongoose will call this function to get the current time.
 
 * Apply timestamps to any subdocuments
 *
 * @param {Schema} schema subdocument schema
 * @param {Object} res subdocument
 * @param {Object} [options]
 * @param {Boolean} [options.isUpdate=false] if true, treat this as an update: just set updatedAt, skip setting createdAt. If false, set both createdAt and updatedAt
 * @param {Function} [options.currentTime] if set, Mongoose will call this function to get the current time.
 
 * Apply timestamps to a given document. Does not apply timestamps to subdocuments: use `applyTimestampsToChildren` instead
 *
 * @param {Schema} schema
 * @param {Object} obj
 * @param {Object} [options]
 * @param {Boolean} [options.isUpdate=false] if true, treat this as an update: just set updatedAt, skip setting createdAt. If false, set both createdAt and updatedAt
 * @param {Function} [options.currentTime] if set, Mongoose will call this function to get the current time.
 handleTimestampOption'../schema/handleTimestampOption'applyTimestampsapplyTimestampsToChildrenapplyTimestampsToDocchildSchema_obj'createdAt'updatedAt'updatedAt'tsisUpdateApply a given schema's timestamps to the given POJOif true, treat this as an update: just set updatedAt, skip setting createdAt. If false, set both createdAt and updatedAt
options.isUpdateif set, Mongoose will call this function to get the current time.options.currentTimeApply timestamps to any subdocumentssubdocument schema
subdocument
Apply timestamps to a given document. Does not apply timestamps to subdocuments: use `applyTimestampsToChildren` insteadconst h ... tion');handleT ... ption')handleT ... pOption'../sch ... Option'../schema/handleTimestampOption/schema/handleTimestampOptionmodule. ... stamps;module. ... estampsapplyTi ... tions);applyTi ... ptions)applyTi ... hildrenschema.childSchemasconst childSchemaconst _ ... l.path;_path = ... el.pathchildSc ... el.pathchildSchema.modelconst _ ... schema;childSchema.schema!_pathconst _ ... , res);_obj =  ... h, res)mpath.g ... h, res)mpath.getif (_ob ... ;\n    }_obj == ...  === 0)_obj == null(Array. ...  === 0)Array.i ... h === 0Array.isArray(_obj)_obj.fl ... h === 0_obj.fl ... .length_obj.flat(Infinity)_obj.flatif (obj ... rn;\n  }obj ==  ... object'if (Arr ... rn;\n  }{\n    f ... rn;\n  }schema. ... gth > 0schema. ... torKey]const k ... ng.key;key = d ... ing.keyconst v ... .value;value = ... g.valueobj[key] == valueschema  ... inator;schema  ... minatorconst c ... edAt');created ... tedAt')handleT ... tedAt')schema. ... estampsconst u ... edAt');updated ... tedAt')const c ... ntTime;current ... entTimeoptions?.currentTimelet ts = null;ts = nullif (cur ... ();\n  }currentTime != nullts = currentTime();ts = currentTime()currentTime()if (sch ... ();\n  }schema.base?.nowschema.basets = sc ... .now();ts = sc ... e.now()schema.base.now()schema.base.nowts = new Date();ts = new Date()if (cre ... ts;\n  }created ... sUpdatecreated ... == nullobj[cre ... == nullobj[createdAt]!options?.isUpdateoptions?.isUpdate{\n    o ... ts;\n  }obj[createdAt] = ts;obj[createdAt] = tsif (upd ... ts;\n  }obj[updatedAt] = ts;obj[updatedAt] = tsobj[updatedAt]/home/insomnia/repos/mongoose/lib/helpers/document/applyVirtuals.js
 * Apply a given schema's virtuals to a given POJO
 *
 * @param {Schema} schema
 * @param {Object} obj
 * @param {Array<string>} [virtuals] optional whitelist of virtuals to apply
 * @returns
 
 * Apply virtuals to any subdocuments
 *
 * @param {Schema} schema subdocument schema
 * @param {Object} res subdocument
 * @param {Array<String>} [virtuals] optional whitelist of virtuals to apply
 
 * Apply virtuals to a given document. Does not apply virtuals to subdocuments: use `applyVirtualsToChildren` instead
 *
 * @param {Schema} schema
 * @param {Object} doc
 * @param {Array<String>} [virtuals] optional whitelist of virtuals to apply
 * @returns
 virtualsForChildrentoApplyapplyVirtualsToChildrenapplyVirtualsToDocattachedVirtualsvirtualsForChildvirtualTypespisPopulateVirtualjustOneApply a given schema's virtuals to a given POJOoptional whitelist of virtuals to apply
Apply virtuals to any subdocumentsoptional whitelist of virtuals to applyArray.<String>=Apply virtuals to a given document. Does not apply virtuals to subdocuments: use `applyVirtualsToChildren` insteadmodule. ... rtuals;module. ... irtualsfunctio ... ply);\n}{\n  if  ... ply);\n}let vir ... rtuals;let toApply = null;toApply = nullvirtual ... n = [];virtual ... en = []toApply = [];toApply = []const virtualvirtual.length === 1virtual.lengthtoApply ... al[0]);toApply ... ual[0])toApply.pushvirtual[0]virtual ... rtual);virtual ... irtual)virtual ... en.pushapplyVi ... ldren);applyVi ... ildren)applyVi ... hildrenreturn  ... Apply);applyVi ... oApply)let att ...  false;attache ... = falseif (Arr ... }\n    }virtual ... d = [];virtual ... ld = []virtual[0] == _pathvirtual ... ce(1));virtual ... ice(1))virtual ... ld.pushvirtual.slice(1)virtual.slicevirtual ... h === 0virtual ... .lengthapplyVi ... Child);applyVi ... rChild)attache ... = true;attache ...  = truevirtuals.length!attachedVirtualsapplyVi ... tuals);applyVi ... rtuals)virtuals == nullfor (co ... al;\n  }schema. ... irtual]const v ... rtual];virtual ... irtual]sp = Ar ... it('.')Array.i ... it('.')Array.i ... irtual)virtual ... it('.')virtual ...  === -1virtual.indexOf('.')virtual.indexOf[virtual]virtual.split('.')virtual.splitlet cur = obj;cur = obji < sp.length - 1sp.length - 1sp.lengthcur[sp[ ... ] : {};cur[sp[ ... ]] : {}cur[sp[i]]sp[i]sp[i] i ... ]] : {}sp[i] in curcur = cur[sp[i]];cur = cur[sp[i]]let val ... , obj);val = v ... ], obj)virtual ... ], obj)cur[sp[ ... h - 1]]sp[sp.length - 1]const i ... fPath);isPopul ... efPath)virtual ... efPath)virtualType.options(virtua ... efPath)virtual ... refPathvirtual ... ons.refif (isP ... }\n    }isPopul ... definedvirtual ... justOneval = null;val = nullval = [];val = []cur[sp[ ...  = val;cur[sp[ ... ] = val/home/insomnia/repos/mongoose/lib/helpers/document/cleanModifiedSubpaths.jsskipDocArraysdeletedclearPathcleanParent'Infinite subdocument loop: subdoc with _id '' is a parent of itself'module. ... ted;\n};module. ... eted;\n}functio ... eted;\n}{\n  opt ... eted;\n}const s ... Arrays;skipDoc ... cArraysoptions ... cArrayslet deleted = 0;deleted = 0if (!do ... ed;\n  }return deleted;if (ski ... }\n    }const s ... dPath);schemaT ... edPath)doc.$__ ... edPath)if (mod ... }\n    }modifie ...  + '.')modifie ... rtsWithdoc.$__ ... dPath);doc.$__ ... earPath++deleted;++deletedcleanPa ... dPath);cleanPa ... edPath)if (see ... ');\n  }seen.has(doc)throw n ... self');new Err ... tself')'Infini ... itself''Infini ... doc._id'Infini ... h _id 'Infinite subdocument loop: subdoc with _id ' is a  ... itself' is a parent of itselfconst p ... rent();parent  ... arent()const n ... + path;newPath ...  + pathdoc.$__ ...  + pathdoc.$__ ... ) + '.'doc.$__ ...  false)parent. ... wPath);parent. ... ewPath)parent. ... earPathparent. ... vePathsparent.$__if (par ... n);\n  }parent. ... ocument{\n    c ... n);\n  }cleanPa ...  seen);cleanPa ... , seen)/home/insomnia/repos/mongoose/lib/helpers/document/compile.js
 * Compiles schemas.
 * @param {Object} tree
 * @param {Any} proto
 * @param {String} prefix
 * @param {Object} options
 * @api private
 
 * Defines the accessor named prop on the incoming prototype.
 * @param {Object} options
 * @param {String} options.prop
 * @param {Boolean} options.subprops
 * @param {Any} options.prototype
 * @param {String} [options.prefix]
 * @param {Object} options.options
 * @api private
  save scope for nested getters/setters// save ... setters Convert top-level to POJO, but leave subdocs hydrated so `$set`// Conv ...  `$set` can handle them. See gh-9293.// can  ... h-9293. gets descriptors for all properties of `object`// gets ... object` makes all properties non-enumerable to match previous behavior to #2211// make ... o #2211'../../helpers/symbols'_isEmptyOptionsnoDottedPathGetOptions'../../document'limbhasSubpropsuseGetOptions'$__schema''toObject''$__get''$__isNested''$isEmpty''$__parent'$__get'$__''$errors''_doc''__parentArray''__index''$isDocumentArrayElement'Compiles schemas.Defines the accessor named prop on the incoming prototype.options.propoptions.subpropsoptions.prototypeoptions.prefix'../../ ... ymbols'../../helpers/symbolslet Document;const i ... isPOJO;isPOJO  ... .isPOJOexports ... ompile;exports ... compileexports.compileexports ... ineKey;exports ... fineKeyexports.defineKeyconst _ ... lse\n});_isEmpt ... alse\n})Object. ... alse\n}){\n  min ... false\n}const n ... rue\n});noDotte ... true\n})noDotte ... Options{\n  noD ...  true\n}noDottedPath: true{\n  Doc ... ;\n  }\n}Documen ... ment');Documen ... ument')../../documentoptions.typeKeyObject.keys(tree)const l ... e[key];limb = tree[key]tree[key]const h ... type));hasSubp ... .type))isPOJO( ... .type))isPOJO( ... gth > 0isPOJO(limb)Object.keys(limb)(!limb[ ... .type))!limb[t ... e.type)!limb[typeKey]limb[typeKey](typeKe ... e.type)typeKey ... pe.typetypeKey ... b.type)typeKey === 'type'isPOJO(limb.type)limb.typelimb.type.typesubprop ...  : nullhasSubp ...  : nulldefineK ... ons });defineK ... ions }){ prop: ... tions }subprops: subpropsprototype: protoprefix: prefix{ prop, ... tions }const p ... + prop;path =  ...  + prop(prefix ...  + prop(prefix ... ' : '')useGetO ... Optionsprefix  ... OptionsObject.freeze({})if (sub ... });\n  }get: fu ...       }!this.$__.gettersthis.$__.gettersthis.$_ ... rs = {}const n ... this));nested  ... (this))Object. ... (this))getOwnP ... s(this)if (!pr ...       }nested. ... = this;nested. ...  = thisnested. ... Symbol]nested.$__nested. ... = path;nested. ...  = pathnested. ... tedPathObject. ...      })value:  ... .schemaprototype.schema__schemavalue:  ...       }return  ...    }));clone(_ ...     }))_this.g ...      })_this.getvirtual ... || nullthis && ... || nullthis && ... irtualsthis && ... oObjectthis && ... optionsthis && ... .schemathis.schema.optionsthis.sc ... oObjectthis.sc ... irtuals__getthis && this.schemathis && ... .toJSONthis.sc ... .toJSON__isNestedvalue: truethis.ge ... ) || {}this.ge ... ptions)this.get__parentvalue: thisthis.$_ ... nested;this.$_ ...  nestedset: fu ...       }if (v ! ...       }v != nu ... sNestedv != nullv.$__isNestedv = v.$__get();v = v.$__get()v.$__get()v.$__getif (v i ...       }v insta ... sNestedv insta ... ocument!v.$__isNestedv = v.$ ... tions);v = v.$ ... ptions)v.$toOb ... ptions)v.$toObjectconst d ... | this;doc = t ... || thisthis.$_ ... || thisdoc.$set(path, v);doc.$set(path, v)doc.$setthis[ge ...       )this[getSymbol].callthis[getSymbol]this.$s ... th, v);this.$s ... ath, v)this.$set.callObject. ... ;\n  });Object. ... object)functio ... se;\n  }const s ... === -1;skip =  ...  === -1[\n      ...  === -1[\n      ... Of(key)[\n      ... indexOf__'$isDoc ... lement'isDocumentArrayElementif (ski ... ;\n    }result[ ... , key);result[ ... t, key)result[key]Object. ... t, key)result[ ...  false;result[ ... = falseresult[ ... merable/home/insomnia/repos/mongoose/lib/helpers/document/getDeepestSubdocumentForPath.js
 * Find the deepest subdocument along a given path to ensure setter functions run
 * with the correct subdocument as `this`. If no subdocuments, returns the top-level
 * document.
 *
 * @param {Document} doc
 * @param {String[]} parts
 * @param {Schema} schema
 * @returns Document
 curSchemacurSchemaTypenewSubdocFind the deepest subdocument along a given path to ensure setter functions run
with the correct subdocument as `this`. If no subdocuments, returns the top-level
document.module. ... doc;\n};module. ... bdoc;\n}functio ... bdoc;\n}{\n  let ... bdoc;\n}let cur ... rts[0];curPath = parts[0]let cur ... schema;curSchema = schemalet subdoc = doc;subdoc = docconst c ... rPath);curSche ... urPath)curSchema.pathcurSche ... .schemacurSchemaType.schemalet new ... rPath);newSubd ... urPath)subdoc.get(curPath)subdoc.getcurSche ... schema;curPath ... i + 1];curPath ... [i + 1]parts[i + 1]Array.i ... urPath)Array.i ... Subdoc)!isNaN(curPath)isNaN(curPath)newSubd ... rPath];newSubd ... urPath]newSubdoc[curPath]curPath = '';newSubdoc == nullsubdoc = newSubdoc;subdoc = newSubdoc'.' + parts[i + 1]return subdoc;/home/insomnia/repos/mongoose/lib/helpers/document/getEmbeddedDiscriminatorPath.js
 * Like `schema.path()`, except with a document, because impossible to
 * determine path type without knowing the embedded discriminator key.
 *
 * @param {Document} doc
 * @param {String|String[]} path
 * @param {Object} [options]
 * @api private
  Are we getting the whole schema or just the type, 'real', 'nested', etc.// Are  ... ', etc.'../get''../discriminator/getSchemaDiscriminatorByValue''schema.options.discriminatorKey'Like `schema.path()`, except with a document, because impossible to
determine path type without knowing the embedded discriminator key.get = r ... ./get')require('../get')../get/get'../dis ... yValue'../discriminator/getSchemaDiscriminatorByValue/discriminator/getSchemaDiscriminatorByValuemodule. ... ype;\n};module. ... Type;\n}functio ... Type;\n}{\n  opt ... Type;\n}const t ... peOnly;typeOnl ... ypeOnlyoptions.typeOnlyconst p ... ('.'));parts = ... t('.'))Array.i ... t('.'))(path.i ... t('.'))let sch ... = null;schemaType = nulllet typ ... fined';type =  ... efined'getSche ... .schemagetSche ... orKey))doc.get ... torKey)doc.getdoc.sch ... atorKeyschemaT ... bpath);schemaT ... ubpath)schema.path(subpath)type =  ... fined';schemaT ... 'Mixed'return  ... maType;typeOnl ... emaTypetype =  ... bpath);type =  ... ubpath)schema. ... ubpath)schema.pathTypeif ((sc ... ;\n    }(schema ... != null(schema ... lement)schemaT ... Elementconst d ... Key'));discrim ... rKey'))doc.get ... rKey'))subpath ... orKey')subpath + '.'get(sch ... orKey')'schema ... torKey'schema.options.discriminatorKeyparts.slice(i + 1)getEmbe ... ptions)doc.get(subpath)/home/insomnia/repos/mongoose/lib/helpers/document/handleSpreadDoc.js
 * Using spread operator on a Mongoose document gives you a
 * POJO that has a tendency to cause infinite recursion. So
 * we use this function on `set()` to prevent that.
 keysToSkipincludeExtraKeysextraKeys'symbol'Using spread operator on a Mongoose document gives you a
POJO that has a tendency to cause infinite recursion. So
we use this function on `set()` to prevent that.const k ... doc']);keysToS ... _doc'])new Set ... _doc'])['__ind ... '_doc']module. ... n v;\n};module. ... rn v;\n}functio ... rn v;\n}{\n  if  ... rn v;\n}if (uti ... oc;\n  }v.$__ != nullv.$__v._doc != null{\n    i ... oc;\n  }if (inc ... ;\n    }const e ... s = {};extraKeys = {}typeof  ... symbol'typeof keykey[0] === '$'key[0]keysToSkip.has(key)keysToSkip.hasextraKe ... v[key];extraKe ...  v[key]extraKeys[key]return  ... Keys };{ ...v. ... aKeys }...v._doc...extraKeysreturn v._doc;/home/insomnia/repos/mongoose/lib/helpers/each.jsremainingif (arr ... ();\n  }let rem ... length;remaini ... .lengthlet err = null;err = nullconst vcb(v, f ...     });cb(v, f ... \n    })if (_er ...       }_err != nullerr = _err;err = _errif (--r ...       }--remaining <= 0--remaining/home/insomnia/repos/mongoose/lib/helpers/error/combinePathErrors.js/home/insomnia/repos/mongoose/lib/helpers/errormsgsmodule. ...  ');\n};module. ... , ');\n}functio ... , ');\n}{\n  con ... , ');\n}err.errors || {}const msgs = [];msgs = []for (le ... e);\n  }{\n    k ... e);\n  }err === ... rs[key]msgs.pu ... ssage);msgs.pu ... essage)msgs.pushkey + ' ... messagekey + ': 'err.err ... messagereturn  ... (', ');msgs.join(', ')msgs.join/home/insomnia/repos/mongoose/lib/helpers/firstKey.jsmodule. ... [0];\n};module. ... )[0];\n}functio ... )[0];\n}{\n  if  ... )[0];\n}if (obj ... ll;\n  }return  ... bj)[0];Object.keys(obj)[0]/home/insomnia/repos/mongoose/lib/helpers/get.js
 * Simplified lodash.get to work around the annoying null quirk. See:
 * https://github.com/lodash/lodash/issues/3659
 * @api private
  `lib/cast.js` depends on being able to get dotted paths in updates,// `lib ... pdates, like `{ $set: { 'a.b': 42 } }`// like ... 42 } }`isPathArraygetPropertySimplified lodash.get to work around the annoying null quirk. See:
https://github.com/lodash/lodash/issues/3659module. ... cur;\n};module. ...  cur;\n}functio ...  cur;\n}{\n  let ...  cur;\n}let parts;let isP ...  false;isPathArray = false{\n    i ... ');\n  }const _ ...  path);_v = ge ... , path)getProp ... , path)if (_v  ...       }_v == nullreturn def;return _v;isPathArray = true;isPathArray = trueparts = path;parts = pathparts.length === 1const _ ... ts[0]);_v = ge ... rts[0])getProp ... rts[0])let rest = path;rest = pathconst part!isPath ... != null!isPathArraycur[rest] != nullcur[rest]return cur[rest];cur = g ...  part);cur = g ... , part)getProp ... , part)rest =  ... h + 1);rest =  ... th + 1)rest.su ... th + 1)rest.substrpart.length + 1part.lengthreturn  ...  : cur;cur ==  ... f : curfunctio ... rop];\n}{\n  if  ... rop];\n}if (obj ... p);\n  }{\n    r ... p);\n  }return  ... (prop);obj.get(prop)return obj[prop];obj[prop]/home/insomnia/repos/mongoose/lib/helpers/getConstructorName.js
 * If `val` is an object, returns constructor name, if possible. Otherwise returns undefined.
 * @api private
 If `val` is an object, returns constructor name, if possible. Otherwise returns undefined.module. ... ame;\n};module. ... name;\n}if (val ...  0;\n  }if (typ ...  0;\n  }val.constructor.name/home/insomnia/repos/mongoose/lib/helpers/getDefaultBulkwriteResult.jsnInsertednUpsertednMatchednModifiednRemovedupsertedwriteErrorsinsertedIdswriteConcernErrors{\n  ret ... \n  };\n}return  ... []\n  };{\n    o ...  []\n  }ok: 1nInserted: 0nUpserted: 0nMatched: 0nModified: 0nRemoved: 0upserted: []writeErrors: []insertedIds: []writeCo ... ors: []/home/insomnia/repos/mongoose/lib/helpers/getFunctionName.jsfunctionNameRE/^function\s*([^\s(]+)/const f ... s(]+)/;functio ... \s(]+)//^funct ... \s(]+)/^function\s*([^\s(]+)([^\s(]+)[^\s(]+[^\s(]module. ...   );\n};module. ... \n  );\n}{\n  ret ... \n  );\n}return  ... 1]\n  );(\n    f ... [1]\n  )fn.name ...  [])[1](fn.toS ...  [])[1](fn.toS ...  || [])fn.toSt ... ) || []fn.toSt ... NameRE)fn.toSt ... ).matchfn.toString().trim()fn.toString().trimfn.toString()fn.toString/home/insomnia/repos/mongoose/lib/helpers/immediate.js!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 /*!\n *  ... 074\n */ Fallback for browser build// Fall ... r buildconst n ... cb, 0);nextTic ... (cb, 0)typeof  ... (cb, 0)typeof processtypeof  ... extTickprocess.nextTickprocess ... rocess)process ... ck.bindcb => s ... (cb, 0)setTimeout(cb, 0)module. ... cb);\n};module. ... (cb);\n}functio ... (cb);\n}{\n  ret ... (cb);\n}return nextTick(cb);nextTick(cb)/home/insomnia/repos/mongoose/lib/helpers/indexes/applySchemaCollation.js/home/insomnia/repos/mongoose/lib/helpers/indexesisTextIndex'./isTextIndex'applySchemaCollationindexKeysindexOptions'collation'const i ... ndex');isTextI ... Index')require ... Index')./isTextIndex/isTextIndexif (isT ... rn;\n  }isTextI ... exKeys)if (sch ... on;\n  }schemaO ... ation')schemaO ... roperty!indexO ... ation')indexOp ... ation')indexOp ... ropertyindexOp ... lation;indexOp ... llationschemaO ... llation/home/insomnia/repos/mongoose/lib/helpers/indexes/decorateDiscriminatorIndexOptions.js If the model is a discriminator and has an index, add a// If t ... , add a partialFilterExpression by default so the index will only apply// part ... y apply to that discriminator.// to t ... inator.decorateDiscriminatorIndexOptionsdiscriminatorName'sparse'partialFilterExpressionmodule. ... ons;\n};module. ... ions;\n}decorat ... Options{\n  //  ... ions;\n}schema. ... g.valueif (dis ... me;\n  }discrim ... ptions)!('spar ... ptions)('spars ... ptions)'sparse ... Options{\n    c ... me;\n  }indexOp ...  || {};indexOp ... n || {}indexOp ... ressionpartial ... ressionindexOp ... orName;indexOp ... torNameindexOp ... torKey]return indexOptions;/home/insomnia/repos/mongoose/lib/helpers/indexes/getRelatedIndexes.jshasDollarKeys'../query/hasDollarKeys'getRelatedSchemaIndexesschemaIndexesgetRelatedIndexesindexesindexesTypegetRelatedDBIndexesdbIndexes'db'isChildDiscriminatorModelgetPartialFilterExpression'$eq'const h ... Keys');hasDoll ... rKeys')require ... rKeys')'../que ... arKeys'../query/hasDollarKeys/query/hasDollarKeysgetRela ... Indexesreturn  ... '\n  });getRela ... a'\n  }){\n    b ... ma'\n  }baseMod ... delNamemodel.s ... Mappingindexes ... Indexesindexes ... schema'getRela ... b'\n  }){\n    b ... db'\n  }indexes: dbIndexesindexesType: 'db'module. ... exes\n};module. ... dexes\n}{\n  get ... dexes\n}{\n  bas ... sType\n}const d ... ng.key;if (!di ... es;\n  }!discriminatorKey{\n    r ... es;\n  }return indexes;const i ... lName);isChild ... elName)isChild ... orModelBoolean ... elName)if (isC ... });\n  }indexes ... \n    })indexes.filterindex = ... ;\n    }const p ... sType);partial ... esType)getPart ... esType)getPart ... ressionreturn  ... rValue;partial ... orValuepartial ... torKey]indexes ... );\n  })index = ... ));\n  }return  ... Key]));!partia ... rKey]))!partia ... torKey]!partia ... ression(hasDol ... rKey]))hasDoll ... orKey])!('$eq' ... orKey])('$eq'  ... orKey])'$eq' i ... torKey]$eqif (ind ... on;\n  }{\n    c ... on;\n  }const o ... dex[1];options = index[1]index[1]options ... ressionindex.p ... ression/home/insomnia/repos/mongoose/lib/helpers/indexes/isDefaultIdIndex.js Mongoose syntax// Mongoose syntaxisDefaultIdIndex'hashed''key'module. ... d');\n};module. ... id');\n}functio ... id');\n}{\n  if  ... id');\n}if (Arr ... d';\n  }Array.isArray(index)const k ... ex[0]);keys =  ... dex[0])Object. ... dex[0])index[0]return  ... ashed';keys.le ... hashed'keys.le ... = '_id'keys.length === 1keys[0] === '_id'keys[0]index[0 ... hashed'index[0]._idhashedtypeof indexconst k ... ', {});key = g ... y', {})get(ind ... y', {})return  ... '_id');Object. ... ('_id')Object.keys(key)key.has ... ('_id')key.hasOwnProperty/home/insomnia/repos/mongoose/lib/helpers/indexes/isIndexEqual.js
 * Given a Mongoose index definition (key + options objects) and a MongoDB server
 * index definition, determine if the two indexes are equal.
 *
 * @param {Object} schemaIndexKeysObject the Mongoose index spec
 * @param {Object} options the Mongoose index definition's options
 * @param {Object} dbIndex the index in MongoDB as returned by `listIndexes()`
 * @api private
  Special case: text indexes have a special format in the db. For example,// Spec ... xample, `{ name: 'text' }` becomes:// `{ n ... ecomes: {// {   v: 2,//   v: 2,   key: { _fts: 'text', _ftsx: 1 },//   ke ... x: 1 },   name: 'name_text',//   na ... _text',   ns: 'test.tests',//   ns ... tests',   background: true,//   ba ... : true,   weights: { name: 1 },//   we ... e: 1 },   default_language: 'english',//   de ... glish',   language_override: 'language',//   la ... guage',   textIndexVersion: 3//   te ... sion: 3// }isIndexEqualschemaIndexKeysObjectdbIndextextIndexVersion_fts_ftsxweights'weights.''default_language''english'optionKeys'unique''partialFilterExpression''expireAfterSeconds'definedKeysschemaCollationdbCollationoptschemaIndexKeysdbIndexKeysGiven a Mongoose index definition (key + options objects) and a MongoDB server
index definition, determine if the two indexes are equal.the Mongoose index spec
the Mongoose index definition's options
the index in MongoDB as returned by `listIndexes()`
module. ... rue;\n};module. ... true;\n}schemaI ... sObject{\n  //  ... true;\n}if (dbI ... ue;\n  }dbIndex ... != nulldbIndex ... Versiondelete  ... y._fts;delete  ... ey._ftsdbIndex.key._ftsdbIndex.keydelete  ... ._ftsx;delete  ... y._ftsxdbIndex.key._ftsxconst w ... .key };weights ... x.key }{ ...db ... x.key }...dbIndex.weightsdbIndex.weights...dbIndex.keyObject.keys(weights)Object. ... Object)!(prop  ... Object)(prop i ... Object)prop in ... sObjectconst w ... [prop];weight  ... s[prop]weights[prop]if (wei ...       }weight  ... = null)weight  ... + prop)get(opt ... + prop)'weights.' + propweights.!(weigh ... = null)(weight ... = null)weight  ... == nullweight === 1get(opt ... == nulloptions ... guage']default_languagedbIndex ... guage']dbIndex ... == nulldbIndex ... nglish'englishconst o ... n'\n  ];optionK ... on'\n  ][\n    ' ... on'\n  ]'partia ... ession'expireAfterSecondsif (!(k ... ;\n    }!(key i ... bIndex)!(key in options)(key in options)key in options!(key in dbIndex)(key in dbIndex)key in dbIndexkey === 'collation'dbIndex[key] == nulldbIndex[key]const d ... ation);defined ... lation)Object. ... lation)const s ... lation;schemaC ... llationconst d ... lation;dbColla ... llationdbIndex.collationconst optif (get ...       }get(sch ... n, opt)get(dbC ... n, opt)!utils. ... x[key])utils.d ... x[key])const s ... bject);schemaI ... Object)const d ... x.key);dbIndex ... ex.key)Object. ... ex.key)if (sch ... se;\n  }schemaI ... .lengthdbIndexKeys.lengthi < sch ... .lengthschemaI ... Keys[i]schemaIndexKeys[i]dbIndexKeys[i]!utils. ... ys[i]])utils.d ... ys[i]])schemaI ... eys[i]]dbIndex ... eys[i]]/home/insomnia/repos/mongoose/lib/helpers/indexes/isIndexSpecEqual.js
 * Compares two index specifications to determine if they are equal.
 *
 * #### Example:
 *     isIndexSpecEqual({ a: 1, b: 1 }, { a: 1, b: 1 }); // true
 *     isIndexSpecEqual({ a: 1, b: 1 }, { b: 1, a: 1 }); // false
 *     isIndexSpecEqual({ a: 1, b: -1 }, { a: 1, b: 1 }); // false
 *
 * @param {Object} spec1 The first index specification to compare.
 * @param {Object} spec2 The second index specification to compare.
 * @returns {Boolean} Returns true if the index specifications are equal, otherwise returns false.
 isIndexSpecEqualspec1spec2spec1Keysspec2KeysCompares two index specifications to determine if they are equal.

#### Example:
isIndexSpecEqual({ a: 1, b: 1 }, { a: 1, b: 1 }); // true
isIndexSpecEqual({ a: 1, b: 1 }, { b: 1, a: 1 }); // false
isIndexSpecEqual({ a: 1, b: -1 }, { a: 1, b: 1 }); // falseThe first index specification to compare.
The second index specification to compare.
Returns true if the index specifications are equal, otherwise returns false.const s ... spec1);spec1Ke ... (spec1)Object.keys(spec1)const s ... spec2);spec2Ke ... (spec2)Object.keys(spec2)if (spe ... se;\n  }spec1Ke ... .lengthspec1Keys.lengthspec2Keys.lengthi < spec1Keys.lengthconst k ... eys[i];key = spec1Keys[i]spec1Keys[i]key !== ... c2[key]key !== spec2Keys[i]spec2Keys[i]spec1[k ... c2[key]spec1[key]spec2[key]/home/insomnia/repos/mongoose/lib/helpers/indexes/isTextIndex.js
 * Returns `true` if the given index options have a `text` option.
 'text'Returns `true` if the given index options have a `text` option.module. ... dex;\n};module. ... ndex;\n}functio ... ndex;\n}{\n  let ... ndex;\n}let isT ...  false;isTextIndex = falseObject. ... exKeys)if (ind ... ;\n    }indexKe ...  'text'indexKeys[key]isTextIndex = true;isTextIndex = truereturn isTextIndex;/home/insomnia/repos/mongoose/lib/helpers/indexes/isTimeseriesIndex.js
 * Returns `true` if the given index matches the schema's `timestamps` options
 isTimeseriesIndextimeseriestimeFieldmetaFieldReturns `true` if the given index matches the schema's `timestamps` optionsmodule. ... = 1;\n};module. ... == 1;\n}functio ... == 1;\n}{\n  if  ... == 1;\n}schemaO ... == nullschemaO ... eseriesconst { ... series;{ timeF ... eseries{ timeF ... Field }typeof timeFieldtypeof metaFieldreturn  ...  === 1;Object. ... ] === 1Object. ... h === 2dbIndex ... ] === 1dbIndex ... eField]dbIndex ... aField]/home/insomnia/repos/mongoose/lib/helpers/isAsyncFunction.jsisAsyncFunction'AsyncFunction'return  ... n'\n  );(\n    t ... on'\n  )v.constructorv.const ... nction'v.constructor.nameAsyncFunction/home/insomnia/repos/mongoose/lib/helpers/isBsonType.js
 * Get the bson type, if it exists
 * @api private
 typename_bsontypeGet the bson type, if it existsreturn  ... me\n  );(\n    o ... ame\n  )obj !=  ... ypenameobj._bs ... ypenameobj._bsontypemodule. ... onType;module. ... sonType/home/insomnia/repos/mongoose/lib/helpers/isMongooseObject.js
 * Returns if `v` is a mongoose object that has a `toObject()` method we can use.
 *
 * This is for compatibility with libs like Date.js which do foolish things to Natives.
 *
 * @param {Any} v
 * @api private
  Array or Document Array// Arra ... t Array Document// Document Buffer// Buffer Map// MapisMongooseBuffer$isMongooseMapReturns if `v` is a mongoose object that has a `toObject()` method we can use.

This is for compatibility with libs like Date.js which do foolish things to Natives.return  ...  )\n  );(\n    v ...   )\n  )v != nu ... p\n    )(\n      ... p\n    )isMongo ... ooseMapisMongo ... eBufferisMongo ... != nullisMongooseArray(v)v.isMongooseBufferv.$isMongooseMap/home/insomnia/repos/mongoose/lib/helpers/isObject.js
 * Determines if `arg` is an object.
 *
 * @param {Object|Array|String|Function|RegExp|any} arg
 * @api private
 * @return {Boolean}
 '[object Object]'Determines if `arg` is an object.(Object|Array|String|Function|RegExp|any)return  ... ]'\n  );(\n    B ... t]'\n  )Buffer. ... bject]'Buffer.isBuffer(arg)Object. ... bject]'Object. ... ll(arg)Object. ... ng.call[object Object]/home/insomnia/repos/mongoose/lib/helpers/isPOJO.js Prototype may be null if you used `Object.create(null)`// Prot ... (null)` Checking `proto`'s constructor is safe because `getPrototypeOf()`// Chec ... peOf()` explicitly crosses the boundary from object data to object metadata// expl ... etadatamodule. ... ct';\n};module. ... ect';\n}functio ... ect';\n}{\n  if  ... ect';\n}if (arg ... se;\n  }arg ==  ... object'const p ... f(arg);proto = ... Of(arg)Object. ... Of(arg)return  ... bject';!proto  ... Object'!protoproto.c ... Object'proto.c ... or.nameproto.constructor/home/insomnia/repos/mongoose/lib/helpers/isPromise.jsfunctio ... ion';\n}{\n  ret ... ion';\n}return  ... ction';!!val & ... nction'!!val & ... ction')(typeof ... ction')typeof val.thenval.thenmodule. ... romise;module. ... Promise/home/insomnia/repos/mongoose/lib/helpers/isSimpleValidator.js
 * Determines if `arg` is a flat object.
 *
 * @param {Object|Array|String|Function|RegExp|any} arg
 * @api private
 * @return {Boolean}
 isSimpleValidatorDetermines if `arg` is a flat object.module. ... ult;\n};module. ... sult;\n}let result = true;result = truetypeof obj[keys[i]]obj[keys[i]]obj[key ... == nullresult = false;result = false/home/insomnia/repos/mongoose/lib/helpers/minimize.js
 * Minimizes an object, removing undefined values and empty objects
 *
 * @param {Object} object to minimize
 * @return {Object|undefined}
 * @api private
 '../utils'Minimizes an object, removing undefined values and empty objectsto minimize
{ isPOJ ... utils'){ isPOJO }require('../utils')../utilsmodule. ... nimize;module. ... inimizefunctio ... ined;\n}{\n  con ... ined;\n}let i = keys.length;i = keys.lengthwhile ( ... ue;\n  }{\n    k ... ue;\n  }val = obj[key];val = obj[key]isPOJO(val)obj[key ... e(val);obj[key ... ze(val)minimize(val)if (und ... ;\n    }undefin ... bj[key]delete obj[key];delete obj[key]hasKeys = true;return  ... efined;hasKeys ... defined/home/insomnia/repos/mongoose/lib/helpers/model/applyDefaultsToPOJO.js/home/insomnia/repos/mongoose/lib/helpers/modelapplyDefaultsToPOJOskipCastschema.paths[p]typeof doc_[piece]applyDe ... chema);applyDe ... schema)type.caster.schematype.castertype.$i ... piece])Array.i ... piece])doc_[pi ... hema));doc_[pi ... chema))doc_[piece].forEachel => a ... schema)type.schemaconst d ... rue });def = t ... true })type.ge ... true }){ skipCast: true }skipCast: truetype.$i ... ay(def)Array.isArray(def)def.for ... hema));def.for ... chema))def.forEachdoc_[piece] == nulldoc_[piece] = {};/home/insomnia/repos/mongoose/lib/helpers/model/applyHooks.js
 * Register hooks for this model
 *
 * @param {Model} model
 * @param {Schema} schema
 * @param {Object} options
 * @api private
  Built-in hooks rely on hooking internal functions in order to support// Buil ... support promises and make it so that `doc.save.toString()` provides meaningful// prom ... ningful information.// information. If user has overwritten the method, don't apply built-in middleware// If u ... dleware Support hooks for custom methods// Supp ... methods Only use `checkForPromise` for custom methods, because mongoose// Only ... ongoose query thunks are not as consistent as I would like about returning// quer ... turning a nullish value rather than the query. If a query thunk returns// a nu ... returns a query, `checkForPromise` causes infinite recursion// a qu ... cursion Don't wrap if there are no hooks for the custom method to avoid// Don' ... o avoid surprises. Also, `createWrapper()` enforces consistent async,// surp ...  async, so wrapping a sync method would break it.// so w ... eak it.'../../schema/symbols'promiseOrCallback'../promiseOrCallback'middlewareFunctionsalreadyHookedFunctionsflatMapkareemOptionsuseErrorHandlersnumCallbackParamsnullResultByDefaultcontextParameterobjToDecorate$appliedHookschildModelisChildSchemamiddlewarehook'document'builtInMiddleware$__originalValidateinternalMethodsToWraptoWrap'$__originalValidate'wrappedcreateWrappercreateWrapperSynccustomMethodscustomMethodOptionscheckForPromisehasHooksoriginalMethodargsWithoutCallbackRegister hooks for this model../../schema/symbolsconst p ... back');promise ... lback')require ... lback')'../pro ... llback'../promiseOrCallback/promiseOrCallbackmodule. ... yHooks;module. ... lyHooksapplyHo ... nit'\n];applyHo ... init'\n]applyHo ... nctions[\n  'de ... init'\n]const a ... }`])));already ... n}`])))already ... nctionsnew Set ... n}`])))applyHo ... fn}`]))applyHo ... flatMapfn => ( ... {fn}`])([fn, `$__${fn}`])[fn, `$__${fn}`]`$__${fn}`{\n  opt ... ;\n  }\n}const k ... ue\n  };kareemO ... rue\n  }{\n    u ... rue\n  }useErro ... s: truenumCallbackParams: 1nullRes ... t: truecontext ... r: trueconst o ... totype;objToDe ... ototypeoptions ... ototypeoptions.decorateDocmodel.$ ... = true;model.$ ...  = truemodel.$appliedHooksconst t ... s[key];type =  ... hs[key]let chi ... = null;childModel = nullchildMo ... caster;childMo ... .casterchildMo ... ructor;childMo ... tructortype.Constructorif (chi ... ;\n    }childMo ... edHooksisChildSchema: trueif (chi ... }\n    }childMo ... != nullchildMo ... inatorsconst k ... ators);keys =  ... nators)applyHo ... tions);applyHo ... ptions)childMo ... rs[key]childMo ... .schemaconst m ...     });middlew ... \n    })schema. ...  filterschema.s.hooksschema.shook => ... ;\n    }if (hoo ...       }hook.na ... eteOne'hook.na ... ateOne'hook.namereturn  ... ment'];!!hook['document']!hook['document']hook['document']hook.na ...  'init'hook.na ... remove'hook.name === 'init'hook['d ... ument']hook['d ... == nullhook.qu ... != nullhook.query != nullhook.queryhook.do ... != nullhook.documentreturn  ...  false;hook.do ... = falseschema. ... k.name]return  ... eware];!hook.f ... leware]hook.fn ... leware]hook.fnsymbols ... dlewaremodel._ ... leware;model._ ... dlewaremodel._middlewareobjToDe ... lidate;objToDe ... alidateconst i ... date'];interna ... idate']interna ... sToWrapoptions ... idate']options ... dSchema['save' ... teOne']['save', 'validate']for (co ... ed;\n  }const t ... thod}`;toWrap  ... ethod}`method  ... ethod}`method  ... lidate''$__ori ... lidate'__originalValidate`$__${method}`const w ... tions);wrapped ... ptions)middlew ... ptions)middlew ... WrapperobjToDe ... toWrap]objToDe ... rapped;objToDe ... wrappedobjToDe ... thod}`]objToDe ... tions);objToDe ... ptions)objToDe ... $__initmiddlew ... perSyncconst c ... thods);customM ... ethods)Object. ... ethods)const c ... e\n  });customM ... ue\n  })Object. ... ue\n  }){\n    / ... rue\n  }checkFo ... e: trueif (alr ... ;\n    }already ... method)already ... ons.has!middle ... method)middlew ... method)middleware.hasHooksconst o ... ethod];origina ... method]objToDe ... method]objToDe ... \n    };objToDe ... ;\n    }Array.p ... uments)Array.p ... ce.callconst c ... .pop();cb = ar ... ).pop()args.slice(-1).pop()args.slice(-1).popargs.slice(-1)const a ... : args;argsWit ...  : argstypeof  ...  : argstypeof cbreturn  ... vents);promise ... events)return  ... ack]));this[`$ ... back]))this[`$ ... ].applythis[`$__${method}`]argsWit ... lback])argsWit ... .concatmodel.events/home/insomnia/repos/mongoose/lib/helpers/model/applyMethods.js
 * Register methods for this model
 *
 * @param {Model} model
 * @param {Schema} schema
 * @api private
  Avoid making custom methods if user sets a method to itself, e.g.// Avoi ... f, e.g. `schema.method(save, Document.prototype.save)`. Can happen when// `sch ... en when calling `loadClass()` with a class that `extends Document`. See gh-12254// call ... h-12254 Recursively call `applyMethods()` on child schemas// Recu ... schemasapplyMethods'../../model''You have a method and a property in your schema both ''named "'reservedmethodOptions..suppressWarningmongoose: the method name "" is used by mongoose 'internally, overwriting it may cause bugs. If you\'re sure you know ''what you\'re doing, you can suppress this error by using '\`schema.method('', fn, { suppressWarning: true })\`.$appliedMethodsRegister methods for this modelconst M ... odel');Model = ... model')require ... model')../../model/modelconst h = {};h = {}schema. ... method]h[k] =  ... (this);h[k] =  ... d(this)h[k]schema. ... d(this)schema. ... k].bindschema. ... hod][k]return h;const f ... ethod];fn = sc ... method]schema. ... method)'You ha ... d + '"''You ha ...  method'You ha ... amed "''You ha ...  both 'You have a method and a property in your schema both named "typeof  ...  === fntypeof fnModel.p ...  === fnModel.p ... method]Model.prototypedelete  ... ethod];delete  ... method]schema. ...  false)schema.reserved!get(sc ...  false)get(sch ...  false)`method ... arning`utils.w ... )\`.`);utils.w ... })\`.`)utils.warn`mongoo ...  })\`.``mongoo ... using '`mongoo ...  know '`mongoo ... goose `mongoos ...  name "" is us ... ngoose 'intern ...  know 'internally, overwriting it may cause bugs. If you're sure you know 'what y ... using 'what you're doing, you can suppress this error by using `\`sche ...  })\`.``schema.method('', fn,  ... e })\`.', fn, { suppressWarning: true })`.model.p ... ] = fn;model.p ... d] = fnmodel.p ... method]apply(m ... chema);apply(m ... schema)model.$ ... Methodstype.$i ... Methods!type.c ... Methodstype.ca ... MethodsapplyMe ... chema);applyMe ... schema)!type.C ... Methodstype.Co ... Methods/home/insomnia/repos/mongoose/lib/helpers/model/applyStaticHooks.js If the custom static overwrites an existing middleware, don't apply// If t ... t apply middleware to it by default. This avoids a potential backwards breaking// midd ... reaking change with plugins like `mongoose-delete` that use statics to overwrite// chan ... erwrite built-in Mongoose functions.// buil ... ctions. Special case: can't use `Kareem#wrap()` because it doesn't currently// Spec ... rrently support wrapped functions that return a promise.// supp ... romise.'../../constants'applyStaticHooks$__insertManyoriginalnumArgspostCalledconst { ... ants');{ query ... tants'){ query ... tions }require ... tants')../../constants/constantsconst m ...   ])\n);middlew ... \n  ])\n)Array.f ... \n  ])\n)new Set ... ns\n  ])[\n    . ... ons\n  ]...quer ... nctions...aggr ... nctions...mode ... nctions...docu ... nctionsconst k ...  1\n  };kareemO ... : 1\n  }{\n    u ... : 1\n  }model.$ ... tions);model.$ ... ptions)model.$__insertManyhooks.c ... ptions)hooks.createWrapperhooks = ... ;\n  });hooks = ... e;\n  })hooks.f ... e;\n  })hooks.filterhook => ... se;\n  }if (mid ... ;\n    }middlew ...  !== -1middlew ... k.name)middlew ... indexOfreturn !!hook.model;!!hook.model!hook.modelhook.modelhook.model !== falseObject.keys(statics)if (hoo ... ;\n    }hooks.hasHooks(key)hooks.hasHooksconst o ... l[key];origina ... el[key]model[key]model[k ...      };model[k ...       }numArgs ... .lengthconst l ... : null;lastArg ...  : nullnumArgs ...  : nullnumArgs > 0argumen ... gs - 1]numArgs - 1const c ... : null;cb = ty ...  : nulltypeof  ...  : nullconst a ... s - 1);args =  ... gs - 1)Array.p ... gs - 1)Array.p ...    callcb == n ... rgs - 1cb == nullhooks.e ...     });hooks.e ...      })hooks.execPrelet postCalled = 0;postCalled = 0const r ... post));ret = o ... (post))origina ... (post))original.applyargs.concat(post)ret.the ... (err));ret.the ... t(err))res =>  ... l, res)post(null, res)err => post(err)post(err)if (pos ...       }postCalled++ > 0postCalled++hooks.execPost[res]callback(null, res);callback(null, res)/home/insomnia/repos/mongoose/lib/helpers/model/applyStatics.js
 * Register statics for this model
 * @param {Model} model
 * @param {Schema} schema
 * @api private
 applyStaticsRegister statics for this modelfor (co ... i];\n  }{\n    m ... i];\n  }model[i ... ics[i];model[i ... tics[i]model[i]schema.statics[i]/home/insomnia/repos/mongoose/lib/helpers/model/castBulkWrite.js
 * Given a model and a bulkWrite op, return a thunk that handles casting and
 * validating the individual op.
 * @param {Model} originalModel
 * @param {Object} op
 * @param {Object} [options]
 * @api private
  set `skipId`, otherwise we get "_id field cannot be changed"// set  ... hanged"
 * gets discriminator model if discriminator key is present in object
 * @api private
 
 * gets timestamps option for a given operation. If the option is set within an individual operation, use it. Otherwise, use the global timestamps option configured in the `bulkWrite` options. Overall default is `true`.
 * @api private
 '../../helpers/discriminator/getDiscriminatorByValue''../update/applyTimestampsToChildren'applyTimestampsToUpdate'../update/applyTimestampsToUpdate''../../cast'castUpdate'../query/castUpdate''../clone'decorateUpdateWithVersionKey'../update/decorateUpdateWithVersionKey'setDefaultsOnInsert'../setDefaultsOnInsert'originalModel'insertOne'castInsertOnecastUpdateOnecastUpdateManycastReplaceOnecastDeleteOnecastDeleteManyInvalid op passed to \`bulkWrite()\`: decideModelByObjectgetTimestampsOptinitializeTimestampsskipValidation'filter''Must provide a filter object.''update''Must provide an update object.'_addDiscriminatorToObjectdoInitTimestampsglobalSetDefaultsOnInsertshouldSetDefaultsOnInsertarrayFiltersoverwriteDiscriminatorKey'replacement'opCommandopLevelOptbulkLevelOptGiven a model and a bulkWrite op, return a thunk that handles casting and
validating the individual op.gets discriminator model if discriminator key is present in objectgets timestamps option for a given operation. If the option is set within an individual operation, use it. Otherwise, use the global timestamps option configured in the `bulkWrite` options. Overall default is `true`.'../../ ... yValue'../../helpers/discriminator/getDiscriminatorByValue/helpers/discriminator/getDiscriminatorByValueconst a ... dren');applyTi ... ldren')'../upd ... ildren'../update/applyTimestampsToChildren/update/applyTimestampsToChildrenconst a ... date');applyTi ... pdate')applyTi ... oUpdaterequire ... pdate')'../upd ... Update'../update/applyTimestampsToUpdate/update/applyTimestampsToUpdateconst c ... cast');cast =  ... /cast')../../castconst c ... date');castUpd ... pdate')'../que ... Update'../query/castUpdate/query/castUpdaterequire('../clone')../clone/cloneconst d ... nKey');decorat ... onKey')decorat ... sionKeyrequire ... onKey')'../upd ... ionKey'../update/decorateUpdateWithVersionKey/update/decorateUpdateWithVersionKeyconst { ... util');{ inspe ... 'util'){ inspect }const s ... sert');setDefa ... nsert')require ... nsert')'../set ... Insert'../setDefaultsOnInsert/setDefaultsOnInsertnow = o ... e.now()origina ... e.now()origina ... ase.noworiginalModel.baseif (op[ ...  };\n  }op['insertOne']return  ... (err));callbac ... k(err))module. ... k(err))module. ... s).thenmodule. ... ptions)module. ... sertOne() => callback(null)op['updateOne'](callba ... }\n    }module. ... , now);module. ... s, now)module. ... dateOneop['updateMany']module. ... ateManyop['replaceOne'](callba ... ;\n    }module. ... (err));module. ... laceOneop['deleteOne']module. ... One']);module. ... eOne'])module. ... leteOneop['deleteMany']module. ... any']);module. ... Many'])module. ... eteManyconst e ... op)}`);error = ... (op)}`)new Mon ... (op)}`)`Invali ... t(op)}`Invalid ... e()\`: Invalid op passed to `bulkWrite()`: inspect(op)callbac ... , null)module. ... One;\n};module. ... tOne;\n}async f ... tOne;\n}{\n  con ... tOne;\n}const m ... ent']);model = ... ment'])decideM ... ment'])insertO ... ument']const d ... ent']);doc = n ... ment'])new mod ... ment'])if (mod ... ();\n  }model.s ... estampsgetTime ... ptions){\n    d ... ();\n  }doc.ini ... amps();doc.ini ... tamps()doc.ini ... estamps{\n    d ... n);\n  }doc.$se ... ssion);doc.$se ... ession)doc.$sessionconst v ... ionKey;version ... sionKeymodel?. ... sionKeymodel?. ... optionsmodel?.schemaif (ver ...  0;\n  }version ... == nulldoc[ver ... == nulldoc[versionKey]{\n    d ...  0;\n  }doc[versionKey] = 0;doc[versionKey] = 0insertO ...  = doc;insertO ... ] = docif (opt ... ne;\n  }options ... idationinsertO ... idation{\n    r ... ne;\n  }return insertOne;await i ... date();await i ... idate()insertO ... idate()insertO ... alidatemodule. ... eOne;\n}functio ... eOne;\n}{\n  if  ... eOne;\n}if (!up ... ');\n  }!updateOne['filter']updateOne['filter']new Err ... ject.')'Must p ... bject.'Must provide a filter object.Must provide a filter object!updateOne['update']updateOne['update']Must provide an update object.Must provide an update objectconst m ... ter']);model = ... lter'])decideM ... lter'])options ... .strictmodel.s ... .strictconst u ... ate']);update  ... date'])clone(u ... date'])_addDis ... ter']);_addDis ... lter'])_addDis ... oObjectdoInitT ... ptions)if (mod ... });\n  }const c ... atedAt;created ... eatedAtmodel.s ... eatedAtconst u ... atedAt;updated ... datedAtmodel.s ... datedAtapplyTi ... e, {});applyTi ... te, {})if (doI ... a);\n  }{\n    a ... a);\n  }applyTi ... chema);applyTi ... schema)const g ... Insert;globalS ... nInsertorigina ... nInsertorigina ... optionsconst s ... Insert;shouldS ... nInsertupdateO ... nInsertupdateO ... == nullif (sho ... });\n  }shouldS ... = falsesetDefa ...     });setDefa ... \n    })setDefa ... t: trueupsert: ... .upsertupdateOne.upsertdecorat ... ey\n  );decorat ... Key\n  )model.s ... sionKeyupdateO ... t\n  });updateO ... rt\n  })cast(mo ... rt\n  }){\n    s ... ert\n  }strict: strictupdateO ... ter']);updateO ... lter'])castUpd ... lter']){\n    s ... Key\n  }arrayFi ... FiltersupdateO ... Filtersoverwri ... atorKeyupdateO ... atorKeyreturn updateOne;module. ... ']);\n};module. ... r']);\n}functio ... r']);\n}{\n  if  ... r']);\n}!update ... ilter']updateMany['filter']!update ... pdate']updateMany['update']updateM ... nInsertupdateM ... == nullupdateMany.upsertapplyTi ... ], {});applyTi ... '], {})updateM ... t\n  });updateM ... rt\n  })updateM ... ter']);updateM ... lter'])updateM ... FiltersupdateM ... atorKeymodule. ... N();\n};module. ... ON();\n}async f ... ON();\n}{\n  con ... ON();\n}replaceOne['filter']replace ... t\n  });replace ... rt\n  })replaceOne.upsertconst d ...  true);doc = n ... , true)new mod ... , true)replace ... ement']replacementreplace ...  = doc;replace ... ] = docif (opt ... rn;\n  }replace ... idationreplace ... BSON();replace ... oBSON()replace ... .toBSONawait r ... date();await r ... idate()replace ... idate()replace ... alidate{\n  con ... r']);\n}deleteOne['filter']deleteO ... ter']);deleteO ... lter'])cast(mo ... lter'])deleteMany['filter']deleteM ... ter']);deleteM ... lter'])module. ... Many\n};module. ... eMany\n}{\n  ins ... eMany\n}insertO ... sertOneupdateO ... dateOneupdateM ... ateManyreplace ... laceOnedeleteO ... leteOnedeleteM ... eteManyif (sch ... ue;\n  }obj[sch ... .value;obj[sch ... g.valueobj[sch ... ng.key]schema. ... ing.key{\n  con ... odel;\n}model.s ... atorKeyif (obj ... el;\n  }object  ... torKey)object != nullobject. ... torKey)object. ... ropertymodel = ...  model;model = ... | modelgetDisc ... | modelgetDisc ... orKey])model.discriminatorsobject[ ... torKey]const o ... stamps;opLevel ... estampsopCommand.timestampsconst b ... stamps;bulkLev ... estampsif (opL ... pt;\n  }opLevelOpt != null{\n    r ... pt;\n  }return opLevelOpt;if (bul ... pt;\n  }bulkLevelOpt != nullreturn bulkLevelOpt;/home/insomnia/repos/mongoose/lib/helpers/model/decorateBulkWriteResult.jsresultOrErrormodule. ... ror;\n};module. ... rror;\n}{\n  res ... rror;\n}resultO ...  || {};resultO ... e || {}resultO ... ongooseresultO ... Errors;resultO ... nErrorsresultO ... esults;resultO ... resultsreturn  ... rError;/home/insomnia/repos/mongoose/lib/helpers/model/discriminator.js
 * Validate fields declared on the child schema when either schema is configured for encryption.  Specifically, this function ensures that:
 *
 * - any encrypted fields are declared on exactly one of the schemas (not both)
 * - encrypted fields cannot be declared on either the parent or child schema, where the other schema declares the same field without encryption.
 *
 * @param {Schema} parentSchema
 * @param {Schema} childSchema
 
   * @param {Iterable<string>} i1
   * @param {Iterable<string>} i2
   /**\n    ... 2\n   */ Even if `applyPluginsToDiscriminators` isn't set, we should still apply// Even ... l apply global plugins to schemas embedded in the discriminator schema (gh-7370)// glob ... h-7370) Retain original schema before merging base schema// Reta ...  schema Find conflicting paths: if something is a path in the base schema// Find ...  schema and a nested path in the child schema, overwrite the base schema path.// and  ... a path. See gh-6076// See gh-6076 Shallow clone `obj` so we can add additional properties without modifying original// Shal ... riginal schema. `Schema.prototype.clone()` copies `obj` by reference, no cloning.// sche ... loning. Clean up conflicting paths _after_ merging re: gh-6076// Clea ... gh-6076 Rebuild schema models because schemas may have been merged re: #7884// Rebu ... : #7884 Use `schema.options` in `deepEqual()` because of `discriminatorKey`// Use  ... torKey` set above. We don't allow customizing discriminator key, always// set  ...  always overwrite. See gh-9238// over ... gh-9238 reset just in case Schema#requiredPaths() was called on either schema// rese ...  schema merges base schema into new discriminator schema and sets new type field.// merg ...  field.'../../schema/mixed'applyBuiltinPlugins'../schema/applyBuiltinPlugins''../document/compile''../../helpers/discriminator/mergeDiscriminatorSchema'CUSTOMIZABLE_DISCRIMINATOR_OPTIONSvalidateDiscriminatorSchemasForEncryptionparentSchemaallSharedNestedPathssetIntersectionallNestedPathsencrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=i1i2s1yieldtiedValuemergeHooks'You must pass a valid discriminator Schema''Discriminator "''" can only be a discriminator of the root model'applyPluginsToDiscriminators'options.applyPluginsToDiscriminators'_applyPluginsskipTopLevelexistingPath'select'$skipDiscriminatorCheckbaseSchemaAddition'" cannot have field with name "'baseSchemaautobaseSchemaPathsconflictingPaths_gatherChildSchemasconflictingPath'Can\'t set discriminator key "'userProvidedOptions_key'Can\'t customize discriminator option '' (can only modify '_requiredpaths'Discriminator with name "''" already exists'Validate fields declared on the child schema when either schema is configured for encryption.  Specifically, this function ensures that:

- any encrypted fields are declared on exactly one of the schemas (not both)
- encrypted fields cannot be declared on either the parent or child schema, where the other schema declares the same field without encryption.Iterable.<string>Mixed = ... mixed')../../schema/mixedapplyBu ... ugins')'../sch ... lugins'../schema/applyBuiltinPlugins/schema/applyBuiltinPlugins'../doc ... ompile'../document/compile/document/compileconst m ... hema');mergeDi ... chema')'../../ ... Schema'../../helpers/discriminator/mergeDiscriminatorSchema/helpers/discriminator/mergeDiscriminatorSchemaconst C ... true\n};CUSTOMI ...  true\n}CUSTOMI ... OPTIONS{\n  toJ ...  true\n}toJSON: truetoObject: true_id: trueid: truemethods: truestatics: truevalidat ... ryptionif (par ... return;parentS ... == nullparentS ... nType()parentS ... ionTypechildSc ... == nullchildSc ... nType()childSc ... ionTypeconst a ... a)\n  );allShar ... ma)\n  )setInte ... ma)\n  )allNest ... Schema)parentS ... d(path)parentS ... edFieldchildSc ... d(path)childSc ... edFieldthrow n ... ath}`);new Err ... path}`)`encryp ... {path}`encrypt ... . path=functio ... )];\n  }{\n    r ... )];\n  }return  ... aths)];[...Obj ... Paths)]...Obje ... .paths)...Obje ... dPaths)Object. ... dPaths)schema. ... edPathsconst s ... et(i1);s1 = new Set(i1)new Set(i1)if (s1. ...       }s1.has(item)s1.hasyield item;yield itemmodule. ... ema;\n};module. ... hema;\n}{\n  if  ... hema;\n}if (!(s ... ');\n  }throw n ... hema');new Err ... chema')'You mu ... Schema'You must pass a valid discriminator SchemamergeHo ... eHooks;mergeHo ... geHooksmergeHooks == nullif (mod ... ');\n  }model.s ... .isRoot!model. ... .isRootnew Err ... model')'Discri ...  model''Discri ...  + nameDiscriminator "'" can  ...  model'" can only be a discriminator of the root modelif (app ... a);\n  }const a ... eHooks;applyPl ... geHooksapplyPl ... inatorsget(mod ... geHooksget(mod ...  false)'option ... nators'options.applyPluginsToDiscriminators!mergeHooksmodel.b ...     });model.b ... \n    })model.b ... PluginsskipTop ... inators!applyP ... inatorsif (!me ... a);\n  }applyBu ... chema);applyBu ... schema)const k ... torKey;key = m ... atorKeyconst e ... h(key);existin ... th(key)model.s ... th(key)model.schema.pathif (exi ... });\n  }existingPath != null!utils. ... elect')utils.h ... elect')existingPath.optionsexistin ... = true;existin ...  = trueexistin ... .selectexistin ... orCheck$skipDi ... orCheckconst b ... n = {};baseSch ... on = {}baseSch ... \n    };baseSch ... e\n    }baseSch ... on[key]default: void 0select: true$skipDi ... k: truebaseSch ... String;baseSch ...  StringbaseSch ... ypeKey]model.s ... typeKeymodel.s ... ition);model.s ... dition)model.schema.adddefineK ...     });defineK ... \n    })prototy ... ototypeschema. ... orCheckschema. ... options'Discri ... y + '"''Discri ... ' + key'Discri ... name "''" cann ... name "'" cannot have field with name "let value = name;value = nameif ((ty ... ue;\n  }(typeof ... != null(typeof ... length)typeof tiedValuetiedValue.lengthtiedValue != nullvalue = tiedValue;value = tiedValuevalidat ... chema);validat ... schema)functio ... ema\n  }{\n    / ... ema\n  }schema. ... Schema;schema. ... eSchemabaseSch ... ns.autobaseSch ... optionsbaseSchema.paths._idbaseSchema.paths!baseSc ... ns.autoschema. ... '_id');schema.remove('_id')schema.removeconst b ... paths);baseSch ... .paths)const c ... s = [];conflic ... hs = []conflic ... (path);conflic ... h(path)conflic ... hs.pushconst s ... 0, -1);sp = pa ... (0, -1)path.sp ... (0, -1)path.sp ... ).sliceconst piececur +=  ...  piece;cur +=  ... + piece(cur.le ... + piece(cur.le ... ' : '')cur.len ... .' : ''schema. ... f Mixedschema.paths[cur]schema. ... hs[cur]schema. ... .obj };schema. ... a.obj }schema.obj{ ...schema.obj }...schema.objmergeDi ... chema);mergeDi ... Schema)schema. ... emas();schema. ... hemas()schema. ... Schemasconst c ... ingPathdelete  ... gPath];delete  ... ngPath]schema. ... ngPath]schema. ... forEachobj =>  ... ;\n    }obj.mod ... chema);obj.mod ... schema)obj.mod ... tSchemaobj.model.prototypeobj.modelobj.schemaconst obj = {};obj = {}obj[key ... \n    };obj[key ... e\n    }default: valuenewName ... value))newName === value(Array. ... value))Array.i ...  value)utils.d ...  value)'Can\'t ... y + '"''Can\'t ... ' + key'Can\'t ...  key "'Can't set discriminator key "obj[key ... String;obj[key ...  Stringobj[key ... ypeKey]schema. ... typeKeyexistin ...  Stringexistin ... ypeKey]schema.add(obj);schema.add(obj)schema.addschema. ... alse };schema. ... false }{ key:  ... false }key: keyvalue: valueisRoot: falsebaseSch ... lectionbaseSchema.optionsschema. ... ection;schema. ... lectionconst t ... toJSON;toJSON  ... .toJSONschema. ... .toJSONconst t ... Object;toObjec ... oObjectschema. ... oObjectconst _ ... ns._id;_id = s ... ons._idconst i ... ons.id;id = sc ... ions.idschema.options.idconst k ... tions);keys =  ... ptions)schema. ... torKey;baseSch ... atorKeyuserPro ... Optionsconst _keyif (!CU ...       }!CUSTOM ... S[_key]CUSTOMI ... S[_key]_key in ... [_key])_key in ... Options!utils. ... [_key])utils.d ... [_key])schema.options[_key]baseSch ... s[_key]throw n ...   ')');new Err ...    ')')'Can\'t ...     ')''Can\'t ... n(', ')'Can\'t ... odify ''Can\'t ...  + _key'Can\'t ... ption 'Can't customize discriminator option  (can only modify Object. ... S).joinObject. ... PTIONS)schema. ... tions);schema. ... ptions)clone(b ... ptions)schema. ... [_key];schema. ... s[_key]userPro ... s[_key]if (toJ ... toJSON;schema. ... toJSON;schema. ...  toJSONif (toO ... Object;schema. ... Object;typeof _idschema. ...  = _id;schema. ... d = _idschema. ... d = id;schema. ... id = idif (mer ... ;\n    }schema. ... hooks);schema. ... .hooks)model.s ... .hooks)model.s ... s.mergemodel.schema.s.hooksmodel.schema.sif (app ... ;\n    }schema. ... ugins);schema. ... lugins)schema.pluginsArray.p ... lugins)baseSchema.pluginsschema. ... Queue);schema. ... lQueue)schema.callQueuebaseSch ... lQueue)baseSch ... .concatbaseSchema.callQueuedelete  ... dpaths;delete  ... edpathsschema. ... edpathsmerge(s ... chema);merge(s ... schema)if (!mo ... {};\n  }!model. ... inators{\n    m ... {};\n  }model.d ... s = {};model.d ... rs = {}if (!mo ...  };\n  }!model. ... Mapping{\n    m ...  };\n  }model.s ... true };model.s ...  true }{ key:  ...  true }isRoot: truemodel.s ... inatorsmodel.s ... s = {};model.s ... rs = {}model.s ... schema;model.s ...  schemamodel.s ... s[name]model.d ... xistingmodel.d ... eModelsmodel.d ... s[name]!schema ... eModelsschema. ... eModelsthrow n ... ists');new Err ... xists')'Discri ... exists'Discriminator with name "" already existsreturn schema;/home/insomnia/repos/mongoose/lib/helpers/model/pushNestedArrayPaths.jspushNestedArrayPathsnestedArrayif (nes ... rn;\n  }nestedArray == nulli < nes ... .lengthnestedArray.lengthArray.i ... ray[i])nestedArray[i]pushNes ... ' + i);pushNes ... .' + i)path + '.' + ipaths.p ... ' + i);paths.p ... .' + i)paths.push/home/insomnia/repos/mongoose/lib/helpers/omitUndefined.jsmodule. ... val;\n};module. ...  val;\n}val ==  ... object'i >= 0--ilet i = ... gth - 1i = val.length - 1val[i] === undefinedval.splice(i, 1);val.splice(i, 1)val[key] === void 0delete val[key];delete val[key]/home/insomnia/repos/mongoose/lib/helpers/once.jscalledmodule. ...   };\n};module. ... \n  };\n}let called = false;called = falseif (cal ... ;\n    }called = true;called = truefn.appl ... uments)fn.apply/home/insomnia/repos/mongoose/lib/helpers/parallelLimit.jsparallelLimitfnsnumInProgressnumFinished'Limit must be positive'_start_donemodule. ... lLimit;module. ... elLimitlet num ... ss = 0;numInProgress = 0let numFinished = 0;numFinished = 0if (lim ... ');\n  }limit <= 0throw n ... tive');new Err ... itive')'Limit  ... sitive'Limit must be positiveif (fns ... ]);\n  }fns.length === 0fns.length{\n    r ... ]);\n  }return  ... l, []);callback(null, [])for (le ... ();\n  }i < fns ... < limiti < fns.lengthi < limit{\n    _start();\n  }_start();_start()functio ... ss;\n  }{\n    f ... ss;\n  }fns[num ... ress));fns[num ... gress))fns[num ... ogress]numFini ... rogress_done(n ... ogress)++numInProgress;++numInProgress(err, r ... }\n    }--numInProgress;--numInProgress++numFinished;++numFinishedresults ...  = res;results[index] = resresults[index]if (num ...       }numFini ... .lengthcallbac ... esults)/home/insomnia/repos/mongoose/lib/helpers/path/parentPaths.js/home/insomnia/repos/mongoose/lib/helpers/pathdotRE/\./gconst dotRE = /\./g;dotRE = /\./gmodule. ... ret;\n};module. ...  ret;\n}{\n  if  ...  ret;\n}if (pat ... h];\n  }{\n    r ... h];\n  }return [path];const p ... dotRE);pieces  ... (dotRE)path.split(dotRE)for (le ... ur;\n  }{\n    c ... ur;\n  }cur +=  ... ces[i];cur +=  ... eces[i](cur.le ... eces[i](cur.length !== 0)cur.length !== 0'.' + pieces[i]ret[i] = cur;ret[i] = cur/home/insomnia/repos/mongoose/lib/helpers/path/setDottedPath.js'../specialProperties'setDottedPath'../spe ... erties'../specialPropertiesif (pat ... rn;\n  }{\n    i ... rn;\n  }special ... s(path)const l ... .pop();last = parts.pop()parts.pop()parts.popfor (co ... t];\n  }{\n    i ... t];\n  }special ... s(part)cur[part] == nullcur[part] = {};cur[part] = {}cur = cur[part];cur = cur[part]if (!sp ... al;\n  }!specia ... s(last)special ... s(last){\n    c ... al;\n  }cur[last] = val;cur[last] = valcur[last]/home/insomnia/repos/mongoose/lib/helpers/pluralize.js
 * Pluralization rules.
 
 * Uncountable words.
 *
 * These words are applied while processing the argument to `toCollectionName`.
 * @api public
 
 * Pluralize function.
 *
 * @author TJ Holowaychuk (extracted from _ext.js_)
 * @param {String} string to pluralize
 * @api private
 pluralization/human$/gi'humans'/(m)an$/gi'$1en'/(pe)rson$/gi'$1ople'/(child)$/gi'$1ren'/^(ox)$/gi/(ax|test)is$/gi'$1es'/(octop|vir)us$/gi'$1i'/(alias|status)$/gi/(bu)s$/gi'$1ses'/(buffal|tomat|potat)o$/gi'$1oes'/([ti])um$/gi'$1a'/sis$/gi'ses'/(?:([^f])fe|([lr])f)$/gi'$1$2ves'/(hive)$/gi'$1s'/([^aeiouy]|qu)y$/gi'$1ies'/(x|ch|ss|sh)$/gi/(matr|vert|ind)ix|ex$/gi'$1ices'/([m|l])ouse$/gi'$1ice'/(kn|w|l)ife$/gi'$1ives'/(quiz)$/gi'$1zes'/^goose$/i'geese'/s$/gi's'/([^a-z])$/'$1'/$/giuncountables'advice''energy''excretion''digestion''cooperation''health''justice''labour''machinery''equipment''information''pollution''sewage''paper''money''species''series''rain''rice''fish''sheep''moose''deer''news''expertise''status''media'Pluralization rules.Uncountable words.

These words are applied while processing the argument to `toCollectionName`.Pluralize function.TJ Holowaychuk (extracted from _ext.js_)
to pluralize
exports ... 's']\n];exports ...  's']\n]exports ... ization[\n  [/h ...  's']\n][/human ... umans']human$humanhumans[/(m)an$/gi, '$1en'](m)an$(m)$1en1en[/(pe)r ... 1ople'](pe)rson$(pe)person$1ople1ople[/(chil ... $1ren'](child)$(child)$1ren1ren[/^(ox)$/gi, '$1en']^(ox)$(ox)ox[/(ax|t ... '$1es'](ax|test)is$(ax|test)ax|testax$1es1es[/(octo ...  '$1i'](octop|vir)us$(octop|vir)octop|viroctopvirus$1i1i[/(alia ... '$1es'](alias|status)$(alias|status)alias|statusalias[/(bu)s ... $1ses'](bu)s$(bu)bu$1ses1ses[/(buff ... $1oes']/(buffa ... t)o$/gi(buffal|tomat|potat)o$(buffal|tomat|potat)buffal|tomat|potatbuffaltomatpotat$1oes1oes[/([ti] ...  '$1a']([ti])um$([ti])[ti]um$1a1a[/sis$/gi, 'ses']sis$sisses[/(?:([ ... $2ves']/(?:([^ ... )f)$/gi(?:([^f])fe|([lr])f)$(?:([^f])fe|([lr])f)([^f])fe|([lr])f([^f])fe([^f])[^f]fe([lr])f([lr])[lr]$1$2ves2ves[/(hive)$/gi, '$1s'](hive)$(hive)hive$1s1s[/([^ae ... $1ies']([^aeiouy]|qu)y$([^aeiouy]|qu)[^aeiouy]|qu[^aeiouy]uqu$1ies1ies[/(x|ch ... '$1es'](x|ch|ss|sh)$(x|ch|ss|sh)x|ch|ss|shss[/(matr ... 1ices']/(matr| ... |ex$/gi(matr|vert|ind)ix|ex$(matr|vert|ind)ix(matr|vert|ind)matr|vert|indmatrvertindixex$ex$1ices1ices[/([m|l ... $1ice']([m|l])ouse$([m|l])[m|l]ouse$1ice1ice[/(kn|w ... 1ives'](kn|w|l)ife$(kn|w|l)kn|w|lknife$1ives1ives[/(quiz ... $1zes'](quiz)$(quiz)quiz$1zes1zes[/^goos ... geese']^goose$goosegeese[/s$/gi, 's']s$[/([^a-z])$/, '$1']([^a-z])$([^a-z])[^a-z][/$/gi, 's']const r ... zation;rules = ... izationexports ... dia'\n];exports ... edia'\n]exports.uncountables[\n  'ad ... edia'\n]adviceenergyexcretiondigestioncooperationjusticelabourmachineryequipmentinformationpollutionsewagepapermoneyspeciesseriesrainricefishsheepmoosedeernewsexpertiseconst u ... tables;uncount ... ntablesfunctio ...  str;\n}{\n  let ...  str;\n}let found;str = s ... Case();str = s ... rCase()str.toLowerCase()str.toLowerCaseif (!~u ...   }\n  }!~uncou ... Of(str)~uncoun ... Of(str)uncount ... Of(str)uncountables.indexOffound = ...     });found = ... \n    })rules.f ... \n    })rules.filterreturn  ... le[0]);str.match(rule[0])str.matchrule[0]if (fou ... ;\n    }found[0]return  ... 0][1]);str.rep ... [0][1])str.replacefound[0][0]found[0][1]return str;/home/insomnia/repos/mongoose/lib/helpers/populate/assignRawDocsToIdStructure.js/home/insomnia/repos/mongoose/lib/helpers/populate
 * Assign `vals` returned by mongo query to the `rawIds`
 * structure returned from utils.getVals() honoring
 * query sort order if specified by user.
 *
 * This can be optimized.
 *
 * Rules:
 *
 *   if the value of the path is not an array, use findOne rules, else find.
 *   for findOne the results are assigned directly to doc path (including null results).
 *   for find, if user specified sort order, results are assigned directly
 *   else documents are put back in original order of array if found in results
 *
 * @param {Array} rawIds
 * @param {Array} resultDocs
 * @param {Array} resultOrder
 * @param {Object} options
 * @param {Boolean} recursed
 * @api private
  honor user specified sort order, unless we're populating a single// hono ...  single virtual underneath an array (e.g. populating `employees.mostRecentShift` where// virt ... ` where `mostRecentShift` is a virtual with `justOne`)// `mos ... stOne`) handle [ [id0, id2], [id3] ]// hand ... [id3] ] keep nulls for findOne unless sorting, which always// keep ...  always removes them (backward compat)// remo ... compat) Workaround for gh-15315 because Mongoose UUIDs don't use BSON UUIDs yet.// Work ... Ds yet. If user wants separate copies of same doc, use this option// If u ...  option If result arrays, rely on the MongoDB server response for ordering// If r ... rdering apply findOne behavior - if document in results, assign, else assign null// appl ... gn null reassign the documents based on corrected order// reas ... d order forEach skips over sparse entries in arrays so we// forE ... s so we can safely use this to our advantage dealing with sorted// can  ...  sorted result sets too.// result sets too.leanPopulateMap'./leanPopulateMap''../symbols'assignRawDocsToIdStructurekHasArray'mongoose#assignRawDocsToIdStructure#hasArray'rawIdsresultDocsresultOrderrecursednewOrdersortingnullIfNotFound$nullIfNotFoundsidtoUUID_resultOrderretainNullValuesAssign `vals` returned by mongo query to the `rawIds`
structure returned from utils.getVals() honoring
query sort order if specified by user.

This can be optimized.

Rules:

if the value of the path is not an array, use findOne rules, else find.
for findOne the results are assigned directly to doc path (including null results).
for find, if user specified sort order, results are assigned directly
else documents are put back in original order of array if found in resultsconst l ... eMap');leanPop ... teMap')require ... teMap')./leanPopulateMap/leanPopulateMap../symbolsmodule. ... ucture;module. ... ructureassignR ... ructureconst k ... rray');kHasArr ... Array')Symbol( ... Array')'mongoo ... sArray'mongoose#assignRawDocsToIdStructure#hasArrayconst newOrder = [];newOrder = []const s ... th > 1;sorting ... gth > 1options ... gth > 1options ... justOneoptions.isVirtualoptions.justOnerawIds.length > 1rawIds.lengthoptions.sortconst n ... tFound;nullIfN ... otFoundoptions ... otFoundlet doc;let sid;let id;if (uti ... ay;\n  }utils.i ... rawIds){\n    r ... ay;\n  }rawIds  ... _array;rawIds  ... __arrayrawIds.__arraylen = rawIds.lengthif (sor ...   }\n  }sorting ... definedsorting && recursedoptions[kHasArray]options ...  false;Array.i ... r[key])resultOrder[key]id = rawIds[i];id = rawIds[i]rawIds[i]Array.isArray(id)assignR ...  true);assignR ... , true)newOrder.push(id);newOrder.push(id)newOrder.pushif (id  ... ;\n    }id ===  ... = falseid === nullsorting === falseif (id? ... ;\n    }id?.con ... nction'id?.con ... e === 4id?.con ... Binary'id?.con ... r?.nameid?.constructorid.sub_type === 4id.sub_typetypeof id.toUUIDid.toUUIDsid = S ... UID());sid = S ... UUID())String(id.toUUID())id.toUUID()id?.con ... Buffer'id._subtype === 4id._subtypesid = String(id);sid = String(id)String(id)doc = r ... s[sid];doc = r ... cs[sid]resultDocs[sid]const _ ... t(doc);_model  ... et(doc)leanPop ... et(doc)leanPopulateMap.getdoc = clone(doc);doc = clone(doc)clone(doc)leanPop ... model);leanPop ... _model)leanPopulateMap.setdoc = d ... ._doc);doc = d ... c._doc)doc.con ... c._doc)doc.con ... hydratedoc.constructorif (rec ... ;\n    }if (sor ...       }const _ ... r[sid];_result ... er[sid]resultOrder[sid]newOrder.push(doc);newOrder.push(doc)newOrde ...  = doc;newOrde ... ] = docnewOrde ... tOrder]if (id  ...       }id != n ... != nullid != nullid[mode ... != nullid[modelSymbol]newOrde ...  : id);newOrde ... l : id)options ... ll : idoptions ... lValuesnewOrde ... | null;newOrde ... || nullnewOrder[i]doc || nullrawIds.length = 0;rawIds.length = 0if (new ... });\n  }newOrder.lengthnewOrde ...     });newOrde ... \n    })newOrder.forEachrawIds[i] = doc;rawIds[i] = doc/home/insomnia/repos/mongoose/lib/helpers/populate/assignVals.js Options that aren't explicitly listed in `populateOptions`// Opti ... ptions` `o.options` contains options explicitly listed in `populateOptions`, like// `o.o ... `, like `match` and `limit`.// `mat ... limit`. replace the original ids in our intermediate _ids structure// repl ... ructure with the documents found by query// with ... y query now update the original documents being populated using the// now  ... ing the result structure that contains real documents.// resu ... uments. Skip maps re: gh-12494// Skip ... h-12494 Might be an embedded discriminator (re: gh-9244) with multiple models, so make sure to pick the right// Migh ... e right model before assigning.// mode ... igning. Since we don't want to have to create a new mongoosearray, make sure to// Sinc ... sure to modify the array in place// modi ... n place If we're populating a map, the existing value will be an object, so// If w ... ect, so we need to transform again// we n ... m again If we pass the first check, also make sure the local field's schematype// If w ... ematype is map (re: gh-6460)// is m ... h-6460) If virtual populate and doc is already init-ed, need to walk through// If v ... through the actual doc to set rather than setting `_doc` directly// the  ... irectly Handle setting paths underneath maps using $* by converting arrays into maps of values// Hand ...  values If we get to an array with a dotted path, like `arr.foo`, don't set// If w ... n't set `foo` on the array.// `foo ...  array. If nothing to set, avoid creating an unnecessary array. Otherwise// If n ... herwise we'll end up with a single doc in the array with only defaults.// we'l ... faults. See gh-8342, gh-8455// See  ... gh-8455 If the property in MongoDB is a primitive, we won't be able to populate// If t ... opulate the nested path, so skip it. See gh-7545// the  ... gh-7545 If lean, need to check that each individual virtual respects// If l ... espects `justOne`, because you may have a populated virtual with `justOne`// `jus ... ustOne` underneath an array. See gh-6867// unde ... gh-6867 If setting underneath an array of populated subdocs, we may have an// If s ... have an array of arrays. See gh-7573// arra ... gh-7573
 * 1) Apply backwards compatible find/findOne behavior to sub documents
 *
 *    find logic:
 *      a) filter out non-documents
 *      b) remove _id from sub docs when user specified
 *
 *    findOne
 *      a) if no doc found, set to null
 *      b) remove _id from sub docs when user specified
 *
 * 2) Remove _ids when specified by users query.
 *
 * background:
 * _ids are left in the query even when user excludes them so
 * that population mapping can occur.
 * @param {Any} val
 * @param {Object} assignmentOpts
 * @param {Object} populateOptions
 * @param {Function} [populateOptions.transform]
 * @param {Boolean} allIds
 * @api private
  find logic// find logic findOne// findOne
 * Remove _id from `subdoc` if user specified "lean" query option
 * @param {Document} subdoc
 * @param {Object} assignmentOpts
 * @api private
 
 * Determine if `obj` is something we can set a populated path to. Can be a
 * document, a lean document, or an array/map that contains docs.
 * @param {Any} obj
 * @api private
 MongooseMap'../../types/map'SkipPopulateValue'./skipPopulateValue''./assignRawDocsToIdStructure'getVirtual'./getVirtual'lookupLocalFields'./lookupLocalFields''./markArraySubdocsPopulated'sift'sift'assignValsuserOptions'allOptions.options.options''allOptions.options'populatedModeloriginalIdsallIdsrawDocsrawOrdersetValueIndex_allIdsvalueFilter_docPopulatedModelexistingValvalueToSetoriginalSchemaisDoc_getSchema'$isSchemaMap'allOptionsisArrayIndexunpopulatedValuesassignmentOptsuserSpecifiedTransformnumValuesisPopulatedObjectmaybeRemoveIdoriginalLimitrLenexcludeId1) Apply backwards compatible find/findOne behavior to sub documents

find logic:
a) filter out non-documents
b) remove _id from sub docs when user specified

findOne
a) if no doc found, set to null
b) remove _id from sub docs when user specified

2) Remove _ids when specified by users query.

background:
_ids are left in the query even when user excludes them so
that population mapping can occur.populateOptions.transformRemove _id from `subdoc` if user specified "lean" query optionDetermine if `obj` is something we can set a populated path to. Can be a
document, a lean document, or an array/map that contains docs.const M ... /map');Mongoos ... s/map')require ... s/map')../../types/map/types/mapconst S ... alue');SkipPop ... Value')'./skip ... eValue'./skipPopulateValue/skipPopulateValueconst a ... ture');assignR ... cture')require ... cture')'./assi ... ucture'./assignRawDocsToIdStructure/assignRawDocsToIdStructureconst g ... tual');getVirt ... rtual')require ... rtual')./getVirtual/getVirtualconst l ... elds');lookupL ... ields')require ... ields')'./look ... Fields'./lookupLocalFields/lookupLocalFields'./mark ... ulated'./markArraySubdocsPopulated/markArraySubdocsPopulatedconst s ... efault;sift =  ... defaultrequire ... defaultrequire('sift'){ popul ... mbols'){ popul ... ymbol }const u ... ons'));userOpt ... ions'))Object. ... ions'))get(o,  ... tions')'allOpt ... ptions'allOptions.options.optionsallOptions.optionsconst p ... l\n  });populat ... al\n  })Object. ... al\n  })o.options{\n    j ... ual\n  }justOne: o.justOneo.justOneisVirtu ... Virtualo.isVirtualpopulat ... irtual;populat ... Virtualpopulat ... otFoundconst p ... dModel;populat ... edModelo.populatedModelconst o ... awIds);origina ... rawIds)[].concat(o.rawIds)o.rawIdso.allId ... llIds);o.allId ... allIds)o.allIds[].concat(o.allIds)assignR ... tions);assignR ... ptions)o.rawDocso.rawOrderconst docs = o.docs;docs = o.docso.docsconst r ... rawIds;rawIds = o.rawIdsconst o ... ptions;options = o.optionsconst c ... irtual;count = ... Virtualo.count ... Virtualo.countlet set ... ex = 0;setValueIndex = 0{\n    + ... s);\n  }++setValueIndex;++setValueIndexif (cou ... ;\n    }val ins ... teValuereturn val.val;val.valconst _ ... Ids[i];_allIds ... lIds[i]o.allIds[i]if (o.p ... ;\n    }o.path. ... ('.$*')o.path.endsWitho.pathreturn  ... llIds);valueFi ... allIds)if (o.j ... ;\n    }o.justO ... ay(val)o.justOne === trueconst ret = [];ret = []_docPop ... et(doc)if (_do ...       }_docPop ... edModel_docPop ... == nullret.push(doc);ret.push(doc)ret.pushval.len ... .lengthret.lengthArray.p ... l, []);Array.p ... al, [])Array.p ... p.applyi < ret.lengthval[i] = ret[i];val[i] = ret[i]o.justOne === false[val]o.justO ... allIds)Array.i ... allIds)return  ...  - 1]);valueFi ... x - 1])val ==  ... ex - 1]_allIds ... ex - 1]setValueIndex - 1i < docs.lengthdocs.lengthsetValueIndex = 0;const _ ... o.path;_path = ...  o.patho.path. ...  o.patho.path.slice(0, -3)o.path.slice-3const e ... ields);existin ... Fields)mpath.g ... Fields)docs[i]if (exi ... ;\n    }existin ...  _path)existingVal == null!getVir ...  _path)getVirt ...  _path)o.origi ... .schemao.originalModellet valueToSet;valueTo ... ds[i]);valueTo ... Ids[i])numDocs(rawIds[i])Array.i ... .match)o.matchvalueTo ... v))[0];valueTo ... (v))[0]Array.i ... (v))[0]Array.i ... Ids[i])rawIds[ ... i])(v))rawIds[i].filterv => v  ... [i])(v)v == nu ... [i])(v)sift(o.match[i])(v)sift(o.match[i])o.match[i][rawIds ... (v))[0][rawIds ... i])(v))[rawIds[i]].filter[rawIds[i]]valueTo ... Ids[i];valueTo ... wIds[i]const o ... schema;origina ... .schemaconst i ... = null;isDoc = ... != nullget(doc ... != nullget(doc ... , null)let isM ... ngVal);isMap = ... ingVal)isDoc ? ... ingVal)existin ... eof Maputils.i ... ingVal)isMap = ... aMap');isMap = ... maMap')isMap & ... maMap')get(ori ... maMap')origina ... (_path)origina ... tSchemaisSchemaMapif (!o. ... ;\n    }!o.isVi ... & isMap!o.isVirtualconst _ ... ngVal);_keys = ... ingVal)existin ... ingVal)Array.f ... keys())existingVal.keys()existingVal.keysObject. ... ingVal)valueTo ... Map());valueTo ...  Map())valueToSet.reduce(cur, v ...       }cur.set ... i], v);cur.set(_keys[i], v)cur.set_keys[i]return cur;if (isD ... ;\n    }isDoc & ... eToSet)Array.i ... eToSet)const valval.$__ ... ocs[i];val.$__ ... docs[i]val.$__.parentisDoc & ... != nullvalueToSet != nullvalueTo ... != nullvalueToSet.$__valueTo ... ocs[i];valueTo ... docs[i]valueTo ... .parentif (o.i ... ;\n    }o.isVirtual && isDocdocs[i] ... tions);docs[i] ... ptions)docs[i].$populatedo.justO ... inalIdsoriginalIds[0]o.allOptionsvalueTo ... 0 : v);valueTo ...  0 : v)valueToSet.mapv => v  ... d 0 : vv == nu ... d 0 : vmpath.s ...      );mpath.s ...       )obj[part] = val;obj[part] = valobj[part]return obj[part];obj ins ... == '$*'part === '$*'return  ... ues()];[...obj.values()]...obj.values()obj.values()obj.values_path.split('.')_path.splitlet cur = docs[i];cur = docs[i]j < parts.length - 1Array.i ... rts[j])!utils. ... rts[j])utils.i ... rts[j])utils.isArrayIndexparts[j] === '$*'cur[par ... == nullconst c ... n('.');curPath ... in('.')parts.s ...  j + 1)j + 1const s ... rPath);schemat ... urPath)origina ... urPath)valueTo ... seArrayvalueToSet == nullcur[parts[j]] = {};cur[parts[j]] = {}docs[i].$__o.allOp ... .model;o.allOp ... s.modelo.allOp ... Symbol]o.allOptions.optionso.allOptions.modelo.unpop ... lues[i]o.unpopulatedValuesvalueTo ... s[i] };valueTo ... es[i] }valueTo ... pulated{ value ... es[i] }value:  ... lues[i]valueTo ... ooseMapvalueTo ... eof Map!valueT ... ooseMapvalueTo ... aType);valueTo ... maType)new Mon ... maType)docs[i] ... emaTypedocs[i] ... (_path)docs[i].schema.pathdocs[i].schemampath.s ... false);mpath.s ...  false)markArr ... ions]);markArr ... tions])[o.allO ... ptions]functio ...  : 1;\n}{\n  if  ...  : 1;\n}if (Arr ... th;\n  }{\n    / ... th;\n  }if (v.s ... ;\n    }v.some( ... = null)v.someel => A ... == nullArray.i ... == nullArray.isArray(el)el === nullv.map(e ...      })v.mapel => { ...       }el == nullel.filt ... .lengthel.filt ... = null)el.filterel => el != nullv.filte ... .lengthv.filte ... = null)v.filterreturn  ...  0 : 1;v == null ? 0 : 1functio ... Ids);\n}{\n  con ... Ids);\n}userSpe ... nction'userSpe ... ansformpopulat ... ansformconst t ... v => v;transfo ...  v => vuserSpe ...  v => vv => vif (Arr ... al;\n  }{\n    / ... al;\n  }numValu ... .lengthi < numValueslet subdoc = val[i];subdoc = val[i]const _ ... allIds;_allIds ...  allIdsArray.i ...  allIdsallIds[i]!isPopu ... ansform!isPopu ... = null)!isPopu ... subdoc)isPopul ... subdoc)(!popul ... = null)!popula ... != null!popula ... lValuespopulat ... lValues!userSp ... ansform!popula ... == nullif (use ...       }subdoc  ... llIds);subdoc  ... allIds)transfo ... allIds)isPopul ...  : nullmaybeRe ... tOpts);maybeRe ... ntOpts)ret.push(subdoc);ret.push(subdoc)if (ass ...       }assignm ... alLimitret.len ... alLimitconst r ... length;rLen = ret.lengthwhile ( ... ;\n    }val.length > rLenfor (i  ...       }i < rLenif (isP ... s);\n  }isPopul ... JO(val)isPopul ... ct(val){\n    m ... s);\n  }if (pop ... [];\n  }populat ... = falsepopulat ... justOne{\n    return [];\n  }return [];val ==  ... allIds)subdoc  ... cludeIdassignm ... cludeIdtypeof  ... etValuesubdoc.$__setValuedelete  ... oc._id;delete  ... doc._iddelete subdoc._id;delete subdoc._idfunctio ... obj);\n}{\n  if  ... obj);\n}if (obj ... se;\n  }return  ... s(obj);Array.i ... as(obj)Array.i ... ooseMapobj.$isMongooseMapleanPop ... as(obj)leanPopulateMap.has/home/insomnia/repos/mongoose/lib/helpers/populate/createPopulateQueryFilter.js
 * Optionally filter out invalid ids that don't conform to foreign field's schema
 * to avoid cast errors (gh-7706)
 * @param {Array} ids
 * @param {SchemaType} foreignSchemaType
 * @param {Boolean} [skipInvalidIds]
 * @api private
 
 * Format `mod.match` given that it may be an array that we need to $or if
 * the client has multiple docs with match functions
 * @param {Array|Any} match
 * @api private
 '../path/parentPaths''../query/trusted'createPopulateQueryFilter_match_foreignFieldskipInvalidIds_formatMatchforeignSchemaType_filterInvalidIdsuserSpecifiedMatch_parentPathsOptionally filter out invalid ids that don't conform to foreign field's schema
to avoid cast errors (gh-7706)Format `mod.match` given that it may be an array that we need to $or if
the client has multiple docs with match functions(Array|Any)'../pat ... tPaths'../path/parentPaths/path/parentPathsconst { ... sted');{ trust ... usted'){ trusted }../query/trustedmodule. ... tch;\n};module. ... atch;\n}functio ... atch;\n}createP ... yFilter{\n  con ... atch;\n}const m ... match);match = ... _match)_formatMatch(_match)if (_fo ...   }\n  }_foreig ... e === 1_foreignField.sizeconst f ... ld)[0];foreign ... eld)[0]Array.f ... eld)[0]Array.f ... nField)const f ... Field);foreign ... nField)model.s ... nField)if (for ... ;\n    }foreign ... ['_id']foreign ... = '_id'!match['_id']match['_id']ids = _ ... idIds);ids = _ ... lidIds)_filter ... lidIds)match[f ... ids });match[f ...  ids })match[foreignField]trusted ...  ids }){ $in: ids }$in: idsconst u ... eld] };userSpe ... ield] }hasDoll ... ield] }hasDoll ... Field]){ $eq:  ... ield] }$eq: ma ... nField]match[f ... atch };match[f ... Match }{ ...tr ... Match }...trus ...  ids })...user ... edMatchconst _ ... Field);_parent ... nField)parentP ... nField)i < _pa ... gth - 1_parent ... gth - 1_parentPaths.lengthconst c ... ths[i];cur = _ ... aths[i]_parentPaths[i]match[c ... != nullmatch[cur] != nullmatch[cur]match[c ... emMatchmatch[c ... ids });match[c ...  ids })match[c ... h + 1)]foreign ... th + 1)foreignField.slicecur.length + 1delete  ... Field];delete  ... nField]const $or = [];$or = []Array.i ... ch.$or)match.$ormatch.$ ... $or }];match.$ ...  $or }]match.$and[{ $or: ...  $or }]{ $or: match.$or }$or: match.$or{ $or: $or }$or: $ordelete match.$or;delete match.$ormatch.$or = $or;match.$or = $orconst foreignFieldif (for ...       }$or.pus ... s } });$or.pus ... ds } })$or.push{ [fore ... ids } }[foreig ... : ids }return match;{\n  ids ...   });\n}ids = i ... alue));ids = i ... Value))ids.fil ... Value))ids.filterv => !( ... eValue)!(v ins ... eValue)(v inst ... eValue)v insta ... teValueif (!sk ... ds;\n  }!skipInvalidIdsreturn ids;ids.fil ...  }\n  })id => { ...   }\n  }foreign ... st(id);foreign ... ast(id)foreign ... pe.castfunctio ... tch);\n}{\n  if  ... tch);\n}if (Arr ... ]);\n  }Array.isArray(match)match.length > 1match.lengthreturn  ... m))) };{ $or:  ...  m))) }$or: [] ... }, m)))[].conc ... }, m)))match.m ... {}, m))match.mapm => Ob ... ({}, m)Object.assign({}, m)return  ... ch[0]);Object. ... tch[0])match[0]return  ... match);Object. ...  match)/home/insomnia/repos/mongoose/lib/helpers/populate/getModelsMapForPopulate.js Populating a nested path should always be a no-op re: #9073.// Popu ...  #9073. People shouldn't do this, but apparently they do.// Peop ... hey do. Special case: populating a path that's a DocumentArray unless// Spec ...  unless there's an explicit `ref` or `refPath` re: gh-8946// ther ... gh-8946 No-op if no `ref` set. See gh-11538// No-o ... h-11538 Dedupe, because `refPath` can return duplicates of the same model name,// Dedu ... l name, and that causes perf issues.// and  ... issues. `justOne = null` means we don't know from the schema whether the end// `jus ... the end result should be an array or a single doc. This can result from// resu ... lt from populating a POJO using `Model.populate()`// popu ... late()` Skip Mixed types because we explicitly don't do casting on those.// Skip ...  those. Get local fields// Get local fields query options// query options `modelNameForFind` is the discriminator value, so we might need// `mod ... ht need find the discriminated model name// find ... el name Ensure correct context for ref functions: subdoc, not top-level doc. See gh-8469// Ensu ... gh-8469 `Model.populate()` on a POJO with no known local model. Default to using the `Model`// `Mod ... `Model` localField and foreignField// loca ... gnField `match`// `match` `PopulateOptions#connection`: if the model is passed as a string, the// `Pop ... ng, the connection matters because different connections have different models.// conn ... models. Used internally for checking what model was used to populate this// Used ... te this path.// path. If this connection has a parent from `useDb()`, bubble up to parent's models /* If t ... dels */ Get Local fields// Get Local fields
 * Retrieve the _id of `val` if a Document or Array of Documents.
 *
 * @param {Array|Document|Any} val
 * @param {Schema} schema
 * @return {Array|Document|Any}
 * @api private
  `populate('map')` may be an object if populating on a doc that hasn't// `pop ...  hasn't been hydrated yet// been hydrated yet The intent here is we should only flatten the object if we expect// The  ...  expect to get a Map in the end. Avoid doing this for mixed types.// to g ...  types. If doc has already been hydrated, e.g. `doc.populate('map')`// If d ... 'map')` then `val` will already be a map// then ... e a map Re: gh-8452. Embedded discriminators may not have `refPath`, so clear// Re:  ... o clear out embedded discriminator docs that don't have a `refPath` on the// out  ...  on the populated path.// populated path.
 * Throw an error if there are any $where keys
 '../discriminator/getDiscriminatorByValue''../getConstructorName'getSchemaTypes'./getSchemaTypes'modelNamesFromRefPath'./modelNamesFromRefPath'StrictPopulate'../../error/strictPopulate'getModelsMapForPopulatemodelNameFromQueryavailablemodelSchema_virtualRes_virtualPopulateallSchemaTypesisStrictPopulateDisabledstrictPopulate_fullPathforceRepopulateisUnderneathDocArray'options.sort''Cannot populate with `sort` on path '' because it is a subproperty of a document array'isRefPathnormalizedRefPathmodelNamesInOrder'Embedded''._id'_getModelNamesaddModelNamesToMapschemasArray_modelNames'options.populate''justOne'_getLocalFieldValues'match'hasMatchFunctionthrowOn$whereembeddedDiscriminatorModelNames_findRefPathForDiscriminatorssubdocPathsubdocsBeingPopulated_queryProjectionschemaForCurrentDocmodelForCurrentDocdiscriminatorModel_getModelFromConn_arrayPath'options.ref'handleRefFunction'options.refPath'virtualPrefixnestedSchemaPath'skip'perDocumentLimit'perDocumentLimit'Cannot populate virtual \`\` on model \`\`, because options \`localField\` and / or \`foreignField\` are missing_getModelNamesForPopulatebaseMatch'virtual.options.match''virtual.options.options.match'convertTo_idcloneArraysflatModelNamesmodelNamesForRefPathmatchIdsToRefPaths'options.perDocumentLimit'currentOptions'options.options'refPathsrefPathToFindlocalFieldPathType_getPathTypelocalFieldPathlocalFieldGetters_populateOptions'getters''options.getters'hydratedDoclocalFieldValuelocalFieldHydratedValuelocalFieldArrVallocalFieldArrIndexrawVal$schema_castForPopulateremnantdocValue'Cannot use $where filter with populate() match'Retrieve the _id of `val` if a Document or Array of Documents.(Array|Document|Any)Throw an error if there are any $where keys../discriminator/getDiscriminatorByValue/discriminator/getDiscriminatorByValue'../get ... orName'../getConstructorName/getConstructorNameconst g ... ypes');getSche ... Types')require ... Types')./getSchemaTypes/getSchemaTypesconst m ... Path');modelNa ... fPath')modelNa ... RefPathrequire ... fPath')'./mode ... efPath'./modelNamesFromRefPath/modelNamesFromRefPathconst S ... late');StrictP ... ulate')'../../ ... pulate'../../error/strictPopulate/error/strictPopulategetMode ... opulatelen = docs.lengthconst map = [];map = []modelNa ... s.modeloptions ... delNamelet refPath;let modelNames;const a ... e = {};available = {}const m ... schema;modelSc ... .schemaif (opt ... [];\n  }options ... s.path]options._localModeloptions ... .nestedoptions ... .schemaconst _ ... .path);_virtua ... s.path)getVirt ... s.path)const v ... irtual;virtual ... virtual_virtua ... virtual_virtualRes == null_virtualRes.virtualreturn  ... alRes);_virtua ... ualRes)let all ... .path);allSche ... s.path)getSche ... s.path)allSche ...  null);allSche ... = null)Array.i ... = null)Array.i ... aTypes)[allSch ... = null)[allSch ... .filter[allSchemaTypes]v => v != nullconst i ...  false;isStric ... = falseisStric ... isabledif (!is ... h);\n  }!isStri ... != null!isStri ... h === 0!isStri ... isabledallSche ... h === 0allSche ... .lengthreturn  ... .path);new Str ... s.path)options ... ns.pathoptions._fullPath{\n    d ...   }\n  }doc = docs[i];doc = docs[i]let justOne = null;justOne = nulldoc.$__ ... s.path)doc.pop ... s.path)doc.populatedconst f ... pulate;forceRe ... opulatedoc.con ... opulatedoc.con ... optionsdoc.constructor.baseforceRe ... = falseconst d ... Schema;docSche ... lSchemadoc !=  ... lSchemadoc !=  ... != nullschema  ... .path);schema  ... s.path)schema  ... ntArrayconst i ... cArray;isUnder ... ocArrayschema  ... ocArrayschema. ... ocArrayif (isU ... ;\n    }isUnder ... != nullget(opt ... != nullget(opt ... .sort')return  ... rray');new Mon ... array')'Cannot ...  array''Cannot ... ns.path'Cannot ...  path 'Cannot populate with `sort` on path ' becau ...  array' because it is a subproperty of a document arraymodelNames = null;modelNames = nulllet isR ...  false;isRefPath = falselet nor ... = null;normali ...  = nullschemaOptions = nulllet mod ... = null;modelNa ...  = nullschema  ... bedded'schema. ... bedded'data =  ...       }localFi ...  '._id'options ...  '._id'._idforeignField: '_id'justOne: trueconst r ... model);res = _ ...  model)_getMod ...  model)const u ... , doc);unpopul ... h, doc)mpath.g ... h, doc)const i ... Value);id = mp ... dValue)mpath.g ... dValue)addMode ... Value);addMode ... dValue)res.modelNamesschemas ...  schemaconst _schemalet _modelNames;let res;res = _ ... model);_modelN ... lNames;_modelN ... elNamesisRefPa ... efPath;isRefPa ... RefPathres.isRefPathnormali ... efPath;normali ... refPathres.refPathjustOne ... ustOne;justOne ... justOneres.justOnereturn error;if (isR ...       }!res.isRefPathif (!_m ...       }!_modelNamesmodelNa ...  || [];modelNa ... s || []modelNames || []const modelNamemodelNa ...  === -1modelNa ... elName)modelNames.indexOfmodelNa ... lName);modelNames.pushmodelNa ... lNames;modelNa ... elNamesschemaO ...  null);schemaO ... , null)get(sch ... , null)modelNa ... ames));modelNa ... Names))Array.f ... Names))new Set(modelNames)if (!mo ...       }!modelNamesconst data = {};data = {}const l ... s.path;localFi ... ns.pathconst f ...  '_id';foreignField = '_id'if ('ju ... }\n    }'justOn ...  void 0'justOne' in optionsoptions ...  void 0if (sch ... }\n    }schema  ... Symbol]schema[ ... Symbol]options ... ma.pathoptions ... a.path)options ... ndsWith'.' + schema.pathjustOne ... eArray;justOne ... seArrayArray.i ... seArrayschema. ... eArray)schema.everyschema  ... seArraydata.is ...  false;data.is ... = falsedata.isVirtualdata.ju ... ustOne;data.ju ... justOnedata.justOnedata.lo ... lField;data.lo ... alFielddata.localFielddata.fo ... nField;data.fo ... gnFielddata.foreignFieldconst r ... chema);ret = _ ... schema)_getLoc ... schema)const i ...  doc));id = St ... , doc))String( ... , doc))utils.g ... d, doc)options ...  : ret;options ... ) : retoptions._docs[id]options._docsArray.i ... ) : retArray.isArray(ret)ret.slice()ret.slicelet mat ...  null);match = ... , null)get(opt ... , null)const h ... ction';hasMatc ... nction'typeof matchmatch = ... , doc);match = ... c, doc)match.call(doc, doc)match.callthrowOn ... match);throwOn$where(match)data.match = match;data.match = matchdata.matchdata.ha ... nction;data.ha ... unctiondata.is ... efPath;data.is ... RefPathdata.isRefPathdata.mo ... nOrder;data.mo ... InOrderconst e ... , ret);embedde ... h, ret)embedde ... elNames_findRe ... h, ret)_findRe ... inatorsaddMode ... tions);addMode ... ptions)return map;{\n    l ...  };\n  }origina ...  schemaschema  ... 'Array'schema. ... 'Array'schema  ... caster;schema  ... .casterschema.casterschema  ... hemaMapref = s ... ons.refschema  ... ons.refschema  ... optionsrefPath ... efPath;schema  ... refPathschema  ... omQueryschema  ...    !ref!ref!refPath!modelNameFromQueryreturn  ... null };{ modelNames: null }modelNames: nullmodelNa ... Query];modelNa ... mQuery][modelNameFromQuery]if (ref ... }\n    }refPath != nulltypeof refPathconst s ... h - 1);subdocP ... th - 1)options ... th - 1)options.path.sliceoptions ... gth - 1schema.path.lengthconst v ... ields);vals =  ... Fields)const s ...  : []);subdocs ... ] : [])subdocs ... pulatedArray.i ... ] : [])Array.isArray(vals)utils.a ... n(vals)utils.array.flattenutils.array(vals ? [vals] : [])vals ? [vals] : [][vals]modelNa ...  Set();modelNa ... w Set()refPath ... .path);refPath ... s.path)refPath.callmodelNa ... name));modelNa ... (name))modelNa ... forEachmodelNa ... ection)name => ... d(name)modelNames.add(name)modelNames.addmodelNa ... Names);modelNa ... lNames)Array.f ... lNames)modelNa ... ction);isRefPath = true;isRefPath = truelet ref;let sch ... entDoc;let dis ... rValue;let mod ...  model;modelFo ... = model!schema ... , doc))!schema ... atorKey(discri ... , doc))discrim ... y, doc)utils.g ... y, doc)const d ...  model;discrim ... | modelmodelFo ... rModel;modelFo ... orModelmodelFo ... Value);modelFo ... rValue)_getMod ... rValue)schemaF ... .path);schemaF ... s.path)modelFo ... s.path)modelFo ... tSchemamodelFo ... .schemaschemaF ... .casterschemaF ... caster;schemaF ... schema;schemaF ...  schemaorigina ... ('.$*')origina ... ndsWithoriginalSchema.pathjustOne ... ayPath;justOne ... rayPath!origin ... rayPath!origin ... seArrayorigina ... seArrayorigina ... rayPathschemaF ... != null!schema ... rayPathschemaF ... seArrayschemaF ... rayPathif ((re ...       }(ref =  ... != null(ref =  ... .ref'))ref = g ... s.ref')get(sch ... s.ref')options.refschemaF ... c.path)schemaF ... nction'typeof refoptions ... c.path)'.' + s ... oc.pathschemaF ... oc.pathschemaF ... .lengthmodelNa ... bdoc));modelNa ... ubdoc))handleR ... subdoc)subdocs ... h === 0subdocs ... .lengthmodelNa ...  doc)];modelNa ... , doc)][handle ... , doc)]handleR ... f, doc)ref = h ... , doc);ref = h ... f, doc)modelNames = [ref];modelNames = [ref][ref]if ((sc ...       }(schema ... Path'))schemaF ... fPath')get(sch ... fPath')options.refPathif (!mo ... }\n    }modelNa ... lName];modelNa ... elName][model.modelName]return  ... Path };{ model ... fPath }justOne: justOneisRefPath: isRefPathrefPath: refPathif (!Ar ... ;\n    }!Array. ... lNames)Array.i ... lNames)modelNa ... Names];modelNa ... lNames][modelNames]functio ...  map;\n}{\n  con ...  map;\n}let localField;virtual ... .' : ''_virtua ... .' : ''_virtua ... emaPath_virtua ... h + '.'typeof  ... alFieldoptions.localFieldlocalFi ... lField;localFi ... alFieldvirtual ... alFieldvirtual.optionslocalFi ... , doc);localFi ... c, doc)virtual ... c, doc)virtual ... ld.callArray.i ... lField)localFi ... field);localFi ...  field)virtual ...  field)virtual ... eld.mapfield = ... + fieldvirtual ... + fielddata.co ... .count;data.co ... s.countdata.countvirtual ... s.countvirtual ... 'skip')virtual.options.skip!option ... 'skip')options ... 'skip')options ... s.skip;options ... ns.skipoptions.skipvirtual ... limit')virtual ... s.limit!option ... limit')options ... limit')options ... .limit;options ... s.limitoptions.limitvirtual ... Limit')virtual ... ntLimit!option ... Limit')options ... Limit')options ... tLimit;options ... ntLimitlet for ... nField;foreign ... gnFieldvirtual ... gnFieldif (!lo ... ;\n    }!localF ... gnField!localField!foreignFieldreturn  ... sing`);new Mon ... ssing`)`Cannot ... issing`Cannot  ... tual \`Cannot populate virtual `` on model `\`, bec ... missing`, because options `localField` and / or `foreignField` are missingtypeof localFieldlocalField.calltypeof foreignFieldforeign ... , doc);foreign ... c, doc)foreignField.callif ('ju ... ;\n    }modelNa ... e(doc);modelNa ... te(doc)virtual ... te(doc)virtual ... opulate_getMod ... opulate!!virtu ... justOne!virtua ... justOnedata.is ... = true;data.is ...  = truevirtual.options.refdata.vi ... irtual;data.vi ... virtualdata.virtualconst b ...  null);baseMat ... , null)get(dat ... , null)'virtua ... .match'virtual.options.matchvirtual.options.options.matchlet mat ... eMatch;match = ... seMatchget(opt ... seMatchlet has ... ction';match = ... rtual);match = ... irtual)match.c ... irtual)Array.i ... nField)localFi ... .lengthlocalField.lengthforeignField.lengthmatch = ... match);match = ...  match)i < loc ... .lengthmatch[f ... chema);match[f ... schema)match[f ... eld[i]]foreignField[i]convert ... schema)localField[i]hasMatc ... = true;hasMatc ...  = truelocalFi ... eld[0];localFi ... ield[0]localField[0]foreign ... eld[0];foreign ... ield[0]foreignField[0]const r ... rtual);ret = _ ... irtual)_getLoc ... irtual)addMode ... , doc);addMode ... t, doc)const c ... del.db;connect ... odel.dboptions ... odel.dboptions.connectionunpopul ... dValue;unpopul ... edValueunpopul ...  void 0if (Arr ... e);\n  }Array.i ... dValue){\n    u ... e);\n  }unpopul ... Value);unpopul ... dValue)utils.c ... dValue)utils.cloneArraysif (mod ... rn;\n  }modelNames == nullconst f ... Names);flatMod ... lNames)utils.a ... lNames)let k = ... length;k = fla ... .lengthflatMod ... .lengthlet mod ... mes[k];modelNa ... ames[k]flatModelNames[k]options ... Symbol]Model = ... .model;Model = ... s.modelmodelNa ... Symbol]Model = modelName;Model = modelNamemodelNa ... elName;Model = ... lName);Model = ... elName)_getMod ... elName)ret !== void 0Model = null;Model = nulllet ids = ret;ids = retconst m ... lNames;data.mo ... elNamesif (dat ... ;\n    }data.is ... .lengthdata.is ... ay(ret)ret.len ... .lengthmodelNa ... .lengthids = m ... lName);ids = m ... elName)matchId ... elName)const p ... tLimit;perDocu ... ntLimit'option ... tLimit'options.perDocumentLimitif (!av ... }\n    }!availa ... != null!availa ... elName]available[modelName]perDocu ... != nullconst c ...      };current ...       }model: Modeldata.is ... tions')get(dat ... tions')current ... tions);current ... ptions)current ... optionsclone(d ... ptions)data.vi ... optionsdata.virtual.optionsschemaO ... != nullutils.mergeoptions ...  Model;options ... = Modelcurrent ...  Model;current ... = Modelcurrent ... Symbol]availab ...      };availab ...       }match:  ... a.matchdata.ha ... a.match[data.match]docs: [doc]ids: [ids][ids]allIds: [ret][ret]unpopul ... dValue][unpopulatedValue]localFi ... Field])new Set ... Field])[data.localField]foreign ... Field])[data.foreignField]count: data.count[popula ... : Modelmap.pus ... Name]);map.pus ... lName])map.pushavailab ... Field);availab ... lField)availab ... eld.addavailab ... alFieldavailab ... nField)availab ... gnFieldavailab ... h(doc);availab ... sh(doc)availab ... cs.pushavailab ... e].docsavailab ... h(ids);availab ... sh(ids)availab ... ds.pushavailab ... me].idsavailab ... h(ret);availab ... sh(ret)availab ... .allIdsavailab ... Value);availab ... dValue)availab ... es.pushavailab ... dValuesavailab ... match);availab ... .match)availab ... ch.pushavailab ... ].match{\n  /*  ... ame);\n}if (con ... e);\n  }conn.mo ... != nullconn.mo ... == nullconn.mo ... elName]conn.modelsconn._parent != nullconn._parentreturn  ... lName);conn.mo ... elName)conn.modelfunctio ... n [];\n}{\n  if  ... n [];\n}if (!Ar ... [];\n  }!Array. ... fPaths)Array.i ... fPaths){\n    r ... [];\n  }return  ...   : [];refPath ...    : []refPath ... hToFindArray.i ... : [ids]Array.isArray(ids)utils.a ... en(ids)return  ... Find));ids.fla ... oFind))ids.flatMap(id, in ... ToFind)matchId ... ToFind)refPaths[index]functio ...  ref;\n}{\n  if  ...  ref;\n}!ref[modelSymbol]ref[modelSymbol]ref.call(doc, doc)ref.callreturn ref;const l ... Field);localFi ... lField)model.s ... lField)model.s ... athTypeconst l ... schema;localFi ... .schemalocalFi ...  'real'const l ... s : [];localFi ... rs : []localFi ... getterslocalFi ... bedded'localFi ... != nulllocalFi ... nstancelocalField + '._id'const _ ... ', {});_popula ... s', {})get(opt ... s', {})const g ... false);getters ...  false)'getter ...  false)'getter ... Options_popula ... gettersget(vir ...  false)if (loc ... a);\n  }localFi ... h !== 0const h ... e(doc);hydrate ... te(doc)(doc.$_ ... te(doc)(doc.$__ != null)model.hydrate(doc)model.hydrateconst l ... , doc);localFi ... d, doc)const l ... edDoc);localFi ... tedDoc)localFi ... edValueutils.g ... tedDoc)localFi ... (0, -1)localFi ... ).slicelocalFi ... it('.')localField.splitreturn  ... dex]));localFi ... ndex]))localFieldValue.map(localF ... Index])localFi ... Index])localFi ... GetterslocalFi ... rIndex]return  ... edDoc);{\n    r ... a);\n  }return  ... chema);return val._doc._id;val !=  ... emaMap)val._id != nullval._id(schema ... emaMap)!schema.$isSchemaMapreturn val._id;const r ...  : val;rawVal  ... y : valval.__a ... y : valval.__array != nullval.__arrayi < rawVal.lengthrawVal.lengthif (raw ...       }rawVal[ ... != nullrawVal[i] != nullrawVal[i]rawVal[i].$__rawVal[ ... oc._id;rawVal[ ... doc._idrawVal[i]._doc._idrawVal[i]._docutils.i ... chema()val.$schema()val.$schemareturn  ... ent());val.$sc ... rent())val.$sc ... opulateval.$parent()val.$parentreturn  ... t(val);if (get ... et;\n  }getCons ... = null)getCons ... me(val)(schema ... = null)schema[ ... == nullret.push(val[key]);ret.push(val[key])return  ... ues());Array.f ... lues())functio ... ames;\n}{\n  //  ... ames;\n}if (!da ... rn;\n  }!data.i ... == null!data.isRefPathnormali ... == nullnormali ... it('.')normali ... h.splitlet mod ... void 0;modelNames = void 0const p ... ces[i];piece = pieces[i]cur = c ...  piece;cur = c ... + piececur + ( ... + piececur + ( ...  : '.')(cur.le ...  : '.')cur.len ... ' : '.'cur.length === 0const s ... h(cur);schemat ... th(cur)modelSc ... th(cur)modelSchema.pathschemat ... h !== 0schemat ... inatorsconst s ... , doc);subdocs ... r, doc)utils.g ... r, doc)const r ... h + 1);remnant ... th + 1)options ... th + 1)options ... bstringschemat ... atorKeymodelNames = [];modelNames = []const d ... ubdoc);discrim ... subdoc)utils.g ... subdoc)const d ... rName];discrim ... orName]schemat ... orName]discrim ... .schemadiscriminator.schemaconst _ ... mnant);_path = ... emnant)discrim ... emnant)discrim ... ma.pathif (_pa ...       }_path = ... == null_path == null_path.o ... == null_path.o ... refPath_path.optionsdocValu ... subdoc)data.lo ... th + 1)data.lo ... bstringret.for ...     });ret.for ...      })ret.forEach(v, i)  ...       }v === docValueret[i]  ... lue(v);ret[i]  ... alue(v)SkipPopulateValue(v)const m ... ubdoc);modelNa ... subdoc)return modelNames;if (mat ... rn;\n  }match == nullObject.keys(match)key === '$where'throw n ... atch');new Mon ... match')'Cannot ...  match'Cannot use $where filter with populate() matchCannot use where filter with populate matchmatch[k ... object'match[key] != nullmatch[key]typeof match[key]throwOn ... [key]);throwOn ... h[key])/home/insomnia/repos/mongoose/lib/helpers/populate/getSchemaTypes.js
 * Given a model and its schema, find all possible schema types for `path`,
 * including searching through discriminators. If `doc` is specified, will
 * use the doc's values for discriminator keys when searching, otherwise
 * will search all discriminators.
 *
 * @param {Model} model
 * @param {Schema} schema
 * @param {Object} doc POJO
 * @param {string} path
 * @api private
  array of Mixed?// array of Mixed? Now that we found the array, we need to check if there// Now  ... f there are remaining document paths to look up for casting.// are  ... asting. Also we need to handle array.$.path since schema.path// Also ... ma.path doesn't work for that.// does ... r that. If there is no foundschema.schema we are dealing with// If t ... ng with a path like array.$// a pa ... array.$ comments.$// comments.$ comments.$.comments.$.title// comm ... $.title Nested arrays. Drill down to the bottom of the nested array.// Nest ...  array. Populated using lean, `leanPopulateMap` value is the foreign model// Popu ... n model look for arrays// look for arrays Re: gh-5628, because `schema.path()` doesn't take $ into account.// Re:  ... ccount.pathschematopLevelDocdiscfoundschematrypathschemasdiscriminatorKeyPath_retcasterConstructordiscriminatorPathsGiven a model and its schema, find all possible schema types for `path`,
including searching through discriminators. If `doc` is specified, will
use the doc's values for discriminator keys when searching, otherwise
will search all discriminators.POJO
module. ... []);\n};module. ...  []);\n}functio ...  []);\n}{\n  con ...  []);\n}pathsch ... h(path)const t ...  = doc;topLevelDoc = docif (pat ... ma;\n  }{\n    r ... ma;\n  }return pathschema;doc[dis ... != nulldoc[dis ... torKey]const d ... rKey]);model.d ... != nullreturn  ... }, []);Object. ...  }, [])Object. ... .reduce(arr, n ...       }const d ... [name];disc =  ... s[name]arr.con ...  path))arr.concatgetSche ... , path)disc.schemalet p = ... th + 1;p = parts.length + 1parts.length + 1let foundschema;let trypath;p--trypath ... n('.');trypath ... in('.')parts.s ... p).joinparts.slice(0, p)foundsc ... ypath);foundsc ... rypath)schema.path(trypath)if (fou ...       }foundschema == nullfoundschema.casterfoundsc ... f Mixedreturn  ... caster;let schemas = null;schemas = nullfoundsc ... != nullfoundschema.schemafoundsc ... inatorstrypath ... atorKeytrypath + '.'foundsc ... atorKeyfoundsc ... optionsconst k ... ] : [];keys =  ... [] : []subdoc  ... [] : []mpath.g ... ) || []mpath.g ... subdoc)schemas ... }, []);schemas ...  }, [])tiedVal ... g.valuediscrim ... inator]doc ==  ...  !== -1keys.in ...  !== -1keys.in ... inator)keys.indexOfkeys.in ... dValue)cur.pus ... ator]);cur.pus ... nator])cur.pushif (p ! ...       }p !== p ... .schemap !== parts.lengthparts[p] === '$'parts[p]if (p + ...       }p + 1 = ... .lengthp + 1return foundschema;ret = s ...      );ret = s ...       )search( ...       )parts.slice(p + 1)subdoc  ...  : nullnestedP ... (0, p))nestedPath.concatret.$pa ... chema);ret.$pa ... schema)ret.$pa ... ocArray(founds ... schema)foundsc ... dschemafoundsc ... eNestedschemas ... gth > 0schemas != nullschemas.length > 0schemas.lengthret = [];const schemaconst _ ...      );_ret =  ...       )parts.slice(p)if (_re ...       }_ret != null_ret.$p ... chema);_ret.$p ... schema)_ret.$p ... ocArrayret.$pa ... cArray;ret.push(_ret);ret.push(_ret)p !== p ... seArrayfoundsc ... seArrayfoundsc ... tructorlet typ ... schema;type = foundschematype.$i ... seArray!type.$ ... ntArraytype =  ... ructor;type =  ... tructortype.ca ... tructorconst r ...      );type.sc ... inatorsconst d ... s = [];discrim ... hs = []const d ... torNametype.sc ... .schematype.sc ... orName]const r ... , p)));ret = s ... 0, p)))search( ... 0, p)))discrim ... h(ret);discrim ... sh(ret)discrim ... hs.pushdiscrim ... gth > 0return  ... rPaths;foundsc ... hemaMapfoundsc ... emaTypefullPat ... in('.')nestedP ... in('.')nestedP ... ]).joinnestedP ... ypath])[trypath]if (top ...       }topLeve ... .lengthtopLeve ... , true)topLeve ... Doc.$__topLevelDoc != nulltopLevelDoc.$__topLeve ... pulatedp < parts.lengthconst m ... ymbol];model = ... Symbol]topLeve ... Symbol]topLeve ... optionsconst _ ... ypath);_val =  ... rypath)get(top ... rypath)if (_va ...       }_val != nullconst m ... (_val);model = ... t(_val)Array.i ... t(_val)Array.i ... gth > 0Array.isArray(_val)_val.length > 0_val.lengthleanPop ... val[0])_val[0]leanPop ... t(_val)schema  ...  : nullmodel ! ...  : null(schema ... schema)schema. ...  schemaparts[i] === '$'parts[i] = '0';parts[i] = '0'return  ... c, []);search( ... oc, [])/home/insomnia/repos/mongoose/lib/helpers/populate/getVirtual.jsvirtualFromDiscriminatormodule. ... irtual;module. ... Virtualif (sch ...  };\n  }schema. ... s[name]return  ... id 0 };{ virtu ... oid 0 }virtual ... s[name]path: void 0name.split('.')name.splitlet nes ... h = '';nestedS ... th = ''for (le ... ll;\n  }cur +=  ... rts[i];cur +=  ... arts[i](cur.le ... arts[i]cur.length > 0schema.virtuals[cur]if (i = ...       }i === p ... gth - 1{ virtu ... aPath }virtual ... ls[cur]path: n ... emaPathschema.nested[cur]schema. ... .schemaschema. ... s[rest]i === p ... gth - 2parts.length - 2virtual ... s[rest]nestedS ... in('.')[nested ... in('.')[nested ... v).join[nested ... => !!v)[nested ... .filter[nested ... h, cur]v => !!v!!v!vi + 1 < ... inatorsconst r ...  rest);res = g ... , rest)getVirt ... , rest)res != nullconst _ ... n('.');_path = ... in('.')[nested ...  filter[nested ... maPath]res.nestedSchemaPathvirtual: res.virtualres.virtualnestedS ... : _pathnestedS ...  + cur;nestedS ... ) + cur(nested ... ) + cur(nested ... ' : '')nestedS ... .' : ''nestedS ... gth > 0nestedS ... .lengthcur = '';++i;[nested ... , '$*']nestedS ... ' + cur(nested ... ' + cur(nested ...  + '$*'const v ...  name);virtual ... , name)virtual ... minatorgetVirt ... , name)if (vir ... inator;return  ... inator;/home/insomnia/repos/mongoose/lib/helpers/populate/leanPopulateMap.jsmodule. ... kMap();module. ... akMap()/home/insomnia/repos/mongoose/lib/helpers/populate/lookupLocalFields.js Support populating paths under maps using `map.$*.subpath`// Supp ... ubpath`module. ... th];\n};module. ... ath];\n}{\n  if  ... ath];\n}if (cur ... ur;\n  }{\n    r ... ur;\n  }if (cur ... oc;\n  }cur._doc != null{\n    c ... oc;\n  }if (arg ... al;\n  }cur.set(path, val);cur.set(path, val)cur[path] = val;cur[path] = valcur[path]if (pat ... ]);\n  }path === '$*'return  ... [key]);cur ins ... r[key])cur.values()cur.valuesObject. ... r[key])Object.keys(cur).mapkey => cur[key]cur[key]if (cur ... h);\n  }cur.get(path)return cur[path];/home/insomnia/repos/mongoose/lib/helpers/populate/markArraySubdocsPopulated.js
 * If populating a path within a document array, make sure each
 * subdoc within the array knows its subpaths are populated.
 *
 * #### Example:
 *
 *     const doc = await Article.findOne().populate('comments.author');
 *     doc.comments[0].populated('author'); // Should be set
 *
 * @param {Document} doc
 * @param {Object} [populated]
 * @api private
 If populating a path within a document array, make sure each
subdoc within the array knows its subpaths are populated.

#### Example:

const doc = await Article.findOne().populate('comments.author');
doc.comments[0].populated('author'); // Should be setif (doc ... rn;\n  }doc._do ... h === 0doc._do ... == nulldoc._doc._id == nullpopulated == nullpopulat ... h === 0populated.lengthid = St ... oc._id)String(doc._doc._id)if (ite ... ;\n    }const p ... m.path;path = item.pathconst v ... bpath);val = d ... ubpath)j < val.lengthval[j]. ...  item);val[j]. ... , item)val[j].populateditem._d ... [id][j]item._d ... == nullitem._docs[id][j]/home/insomnia/repos/mongoose/lib/helpers/populate/modelNamesFromRefPath.js If populated path has numerics, the end `refPath` should too. For example,// If p ... xample, if populating `a.0.b` instead of `a.b` and `b` has `refPath = a.c`, we// if p ... .c`, we should return `a.0.c` for the refPath.// shou ... efPath. 2nd, 4th, etc. will be numeric props. For example: `[ 'a', '.0.', 'b' ]`// 2nd, ...  'b' ]`'../projection/isPathExcluded'hasNumericPropRE/(\.\d+$|\.\d+\.)/gqueryProjection'refPath `''` must not be excluded in projection, got 'chunks'Can\'t populate individual element in an array'_refPath_remaining'Could not normalize ref path, chunk '' not in populated path'refValue'../pro ... cluded'../projection/isPathExcluded/projection/isPathExcludedconst h ... +\.)/g;hasNume ... d+\.)/g(\.\d+$|\.\d+\.)\.\d+$|\.\d+\.module. ... mes;\n};module. ... ames;\n}{\n  if  ... ames;\n}if (ref ... [];\n  }typeof  ... efPath)queryPr ... != nullisPathE ... efPath)throw n ... tion));new Mon ... ction))'refPat ... ection)'refPat ... , got ''refPat ... refPathrefPath `'` must ... , got '` must not be excluded in projection, got util.in ... ection)if (has ... es;\n  }hasNume ... edPath)hasNume ... RE.testconst c ... ropRE);chunks  ... PropRE)populat ... PropRE)populatedPath.splitif (chu ... ;\n    }chunks[ ...  === ''chunks[ ... th - 1]chunks.length - 1chunks.lengththrow n ... rray');new Err ... array')'Can\'t ...  array'Can't populate individual element in an arraylet _refPath = '';_refPath = ''let _re ... efPath;_remaining = refPathi < chunks.lengthi += 2const c ... nks[i];chunk = chunks[i]chunks[i]_remain ...  + '.')_remain ... rtsWithchunk + '.'_refPat ... i + 1];_refPat ... [i + 1]_remain ... [i + 1]_remain ... length)_remaining.substringchunk.lengthchunks[i + 1]_remain ... h + 1);_remain ... th + 1)chunk.length + 1i === c ... gth - 1_refPat ... aining;_refPat ... maining_remaining = '';_remaining = ''throw n ... path');new Err ...  path')'Could  ... d path''Could  ... + chunk'Could  ... chunk 'Could not normalize ref path, chunk ' not i ... d path' not in populated pathconst r ... ields);refValu ... Fields)let mod ... Value];modelNa ... fValue]Array.i ... fValue]Array.i ... fValue)[refValue]if (mod ... e];\n  }modelSc ... efPath)modelSchema != nullmodelSc ... ropertymodelSchema.virtuals{\n    m ... )];\n  }[modelS ... , doc)]modelSc ... 0, doc)modelSc ... GettersmodelSc ... efPath]{\n    m ... e];\n  }modelNa ... Value];/home/insomnia/repos/mongoose/lib/helpers/populate/removeDeselectedForeignField.jsparseProjection'../projection/parseProjection'removeDeselectedForeignFieldforeignFieldsprojection'options.select'const p ... tion');parsePr ... ction')../projection/parseProjection/projection/parseProjectionremoveD ... gnFieldproject ... , true)parsePr ... , true)options.selectif (pro ... rn;\n  }projection == nullif (!pr ... ;\n    }!projec ... nField)project ... nField)project ... roperty'-' + foreignFieldmpath.u ... ._doc);mpath.u ... l._doc)mpath.unsetmpath.u ... , val);mpath.u ... d, val)/home/insomnia/repos/mongoose/lib/helpers/populate/setPopulatedVirtualValue.js
 * Set a populated virtual value on a document's `$$populatedVirtuals` value
 *
 * @param {*} populatedVirtuals A document's `$$populatedVirtuals`
 * @param {*} name The virtual name
 * @param {*} v The result of the populate query
 * @param {*} options The populate options. This function handles `justOne` and `count` options.
 * @returns {Array<Document>|Document|Object|Array<Object>} the populated virtual value that was set
 setPopulatedVirtualValuepopulatedVirtualsSet a populated virtual value on a document's `$$populatedVirtuals` valueA document's `$$populatedVirtuals`
The virtual name
The result of the populate query
The populate options. This function handles `justOne` and `count` options.
the populated virtual value that was set(Array.<Document>|Document|Object|Array.<Object>)module. ... me];\n};module. ... ame];\n}setPopu ... alValueif (opt ... });\n  }options ... s.countoptions.countpopulat ...      v;populat ...       vpopulat ... s[name]Array.i ...       vtypeof  ... s[name]populat ... : null;populat ...  : nullpopulat ...  : [v];populat ... ] : [v]Array.i ... ] : [v]v == null ? [] : [v][v]populat ...     });populat ... \n    })populat ... .filterdoc &&  ... object'typeof doc/home/insomnia/repos/mongoose/lib/helpers/populate/skipPopulateValue.jsmodule. ... his;\n};module. ... this;\n}if (!(t ... l);\n  }!(this  ... eValue)(this i ... eValue)this in ... teValuereturn  ... e(val);new Ski ... ue(val)this.val = val;this.val = valthis.val/home/insomnia/repos/mongoose/lib/helpers/populate/validateRef.jsvalidateRef'Invalid ref at path "''". Got 'module. ... ateRef;module. ... dateRef{\n  if  ...  }));\n}throw n ...  0 }));new Mon ... : 0 }))'Invali ... h: 0 })'Invali ... . Got ''Invali ...  + path'Invali ... path "'Invalid ref at path "". Got util.in ... h: 0 }){ depth: 0 }depth: 0/home/insomnia/repos/mongoose/lib/helpers/printJestWarning.jsjestSUPPRESS_JEST_WARNINGS'Mongoose: looks like you\'re trying to test a Mongoose app ''with Jest\'s default jsdom test environment. Please make sure you read ''Mongoose\'s docs on configuring Jest to test Node.js apps: ''https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true ''to hide this warning.'clock'with Jest\'s mock timers enabled. Please make sure you read 'if (typ ... ;\n  }\n}typeof  ... ARNINGStypeof jest!proces ... ARNINGSprocess ... ARNINGSSUPPRES ... ARNINGS{\n    u ... ');\n  }utils.w ... ing.');utils.w ... ning.')'Mongoo ... rning.''Mongoo ...  true ''Mongoo ... apps: ''Mongoo ...  read ''Mongoo ... e app 'Mongoose: looks like you're trying to test a Mongoose app 'with J ...  read 'with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: 'https: ...  true 'https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true 'to hid ... rning.'to hide this warning.Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment Please make sure you read Mongoose's docs on configuring Jest to test Nodejs apps: https://mongoosejscom/docs/jest Set the SUPPRESS_JEST_WARNINGS to true to hide this warningif (set ... ');\n  }setTime ... nction'setTime ... != nullsetTimeout.clocktypeof  ... ck.DatesetTime ... ck.Datewith Jest's mock timers enabled. Please make sure you read Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled/home/insomnia/repos/mongoose/lib/helpers/processConnectionOptions.js don't silently override user-provided indexing options// don' ... options if user has not explicitly set any auto-indexing options,// if u ... ptions, we can silently default them all to false// we c ... o false'./clone''../error/index'getUriReadPreferenceclonedOptsresolvedOpts'primary''primaryPreferred'resolveOptsConflictssetsIndexOptionssetsSecondaryReadthrowReadPreferenceErrordefaultIndexOptsToFalseconfigIdxprefString'secondary''secondaryPreferred'/(?:&|\?)readPreference=(\w+)(?:&|$)/'MongoDB prohibits index creation on connections that read from ''non-primary replicas.  Connections that set "readPreference" to "secondary" or ''"secondaryPreferred" may not opt-in to the following connection options: ''autoCreate, autoIndex'require('./clone')./clone../error/indexfunctio ... Opts;\n}{\n  con ... Opts;\n}const o ... s : {};opts =  ... ns : {}options ... ns : {}const r ... e(uri);readPre ... ce(uri)opts.re ... ce(uri)opts.readPreferencegetUriR ... ce(uri)const c ... (opts);clonedO ... e(opts)clone(opts)const r ... edOpts;resolve ... nedOpts(readPr ... nedOpts(readPr ... erred')readPre ... ferred'readPre ... rimary'primaryprimaryPreferredresolve ... edOpts)return resolvedOpts;if (set ... s);\n  }setsInd ... d(pref)setsInd ... s(opts)setsSec ... d(pref)throwRe ... rror();throwRe ... Error()throwRe ... ceErrorreturn  ... (opts);default ... e(opts)default ... ToFalsefunctio ... dex);\n}{\n  con ... dex);\n}const c ... oIndex;configI ... toIndexopts.co ... toIndexopts.configconst { ... = opts;{ autoC ...  = opts{ autoC ... Index }return  ... Index);!!(conf ... oIndex)!(confi ... oIndex)(config ... oIndex)configI ... oCreatefunctio ... ed');\n}{\n  ret ... ed');\n}return  ... rred');!!(pref ... erred')!(prefS ... erred')(prefSt ... erred')prefStr ... ferred'prefStr ... ondary'secondarysecondaryPreferred{\n  con ... null;\n}const e ... :&|$)/;exp = / ... ?:&|$)//(?:&|\ ... ?:&|$)/(?:&|\?)readPreference=(\w+)(?:&|$)(?:&|\?)&|\?\?readPreference=(\w+)(?:&|$)&|$const m ... tring);match = ... String)exp.exe ... String)exp.execreturn  ... : null;match ? ...  : nullfunctio ... opts;\n}{\n  opt ... opts;\n}opts.co ... alse };opts.co ... false }{ autoIndex: false }autoIndex: falseopts.au ...  false;opts.au ... = falseopts.autoCreateopts.autoIndexreturn opts;{\n  thr ... \n  );\n}throw n ... x'\n  );new Mon ... ex'\n  )'MongoD ... oIndex''MongoD ... ions: ''MongoD ... y" or ''MongoD ...  from 'MongoDB prohibits index creation on connections that read from 'non-pr ... y" or 'non-primary replicas.  Connections that set "readPreference" to "secondary" or '"secon ... ions: '"secondaryPreferred" may not opt-in to the following connection options: 'autoCr ... oIndex'autoCreate, autoIndexMongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndexMongoDB prohibits index creation on connections that read from non-primary replicas  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex/home/insomnia/repos/mongoose/lib/helpers/projection/applyProjection.js/home/insomnia/repos/mongoose/lib/helpers/projection'./hasIncludedChildren''./isExclusive'isInclusive'./isInclusive'applyProjection_hasIncludedChildrenapplyExclusiveProjectionapplyInclusiveProjectionprojectionLimbconst h ... dren');hasIncl ... ldren')'./hasI ... ildren'./hasIncludedChildren/hasIncludedChildren./isExclusive/isExclusiveisInclu ... usive')./isInclusive/isInclusiverequire ... .isPOJOif (pro ... oc;\n  }{\n    r ... oc;\n  }if (doc ... oc;\n  }if (isI ... ue;\n  }isInclu ... ection){\n    e ... se;\n  }exclude = false;exclude = falseif (isE ... ue;\n  }isExclu ... ection){\n    e ... ue;\n  }exclude = true;exclude = trueif (exc ... n);\n  }exclude == null{\n    _ ... n);\n  }_hasInc ... ction);_hasInc ... ection)hasIncl ... ection)return  ... ldren);applyEx ... ildren)applyEx ... jectionapplyIn ... ildren)applyIn ... jectiondoc ==  ... object'return  ... efix));doc.map ... refix))el => a ... prefix)applyEx ... prefix)const r ... .doc };ret = { ...doc }project ... ection;project ... jectionprefix  ... jection(projec ...  || {})projectionLimb || {}Object.keys(ret)const f ...  : key;fullPat ... y : keyprefix + '.' + keyproject ... ty(key)project ... llPath)isPOJO( ... b[key])isPOJO( ... lPath])projection[fullPath]projectionLimb[key]ret[key ... lPath);ret[key ... llPath)applyEx ... llPath)hasIncl ... llPath]applyIn ... prefix)applyIn ... llPath)/home/insomnia/repos/mongoose/lib/helpers/projection/hasIncludedChildren.js
 * Creates an object that precomputes whether a given path has child fields in
 * the projection.
 *
 * #### Example:
 *
 *     const res = hasIncludedChildren({ 'a.b.c': 0 });
 *     res.a; // 1
 *     res['a.b']; // 1
 *     res['a.b.c']; // 1
 *     res['a.c']; // undefined
 *
 * @param {Object} fields
 * @api private
 Creates an object that precomputes whether a given path has child fields in
the projection.

#### Example:

const res = hasIncludedChildren({ 'a.b.c': 0 });
res.a; // 1
res['a.b']; // 1
res['a.b.c']; // 1
res['a.c']; // undefinedmodule. ... ren;\n};module. ... dren;\n}functio ... dren;\n}{\n  con ... dren;\n}const h ... n = {};hasIncl ... en = {}const k ... ields);keys =  ... fields)key.ind ...  === -1key.indexOf('.')key.indexOfhasIncl ... y] = 1;hasIncl ... ey] = 1hasIncl ... en[key]key.split('.')key.splitlet c = parts[0];c = parts[0]hasIncl ... c] = 1;hasIncl ... [c] = 1hasIncl ... dren[c]c = c + ... i + 1];c = c + ... [i + 1]c + '.' ... [i + 1]c + '.'return  ... ildren;/home/insomnia/repos/mongoose/lib/helpers/projection/isDefiningProjection.js `undefined` or `null` become exclusive projections// `und ... ections Only cases where a value does **not** define whether the whole projection// Only ... jection is inclusive or exclusive are `$meta` and `$slice`.// is i ... slice`.'$meta''$slice'{\n    / ... l);\n  }return  ... n val);!('$met ... in val)!('$meta' in val)('$meta' in val)'$meta' in val!('$slice' in val)('$slice' in val)'$slice' in val$slice/home/insomnia/repos/mongoose/lib/helpers/projection/isExclusive.js Does this projection explicitly define inclusion/exclusion?// Does ... lusion? Explicitly avoid `$meta` and `$slice`// Expl ... $slice`'./isDefiningProjection''../isPOJO'ki'./isDe ... ection'./isDefiningProjection/isDefiningProjectionrequire('../isPOJO')../isPOJOmodule. ... ude;\n};module. ... lude;\n}functio ... lude;\n}{\n  if  ... lude;\n}if (pro ... ll;\n  }const k ... ction);keys =  ... ection)if (key ...   }\n  }{\n    e ... id;\n  }exclude ... on._id;exclude ... ion._id!projection._idprojection._idki < keys.length++kilet ki = 0ki = 0const k ... ys[ki];key = keys[ki]keys[ki]key !== ... n[key])key !== '_id'isDefin ... n[key])projection[key]exclude ... n[key];exclude ... on[key]isPOJO( ... on[key]isPOJO( ... n[key])(isExcl ... xclude)isExclu ... excludeisExclu ... n[key])!projection[key]exclude != nullreturn exclude;/home/insomnia/repos/mongoose/lib/helpers/projection/isInclusive.js Plus paths can't define the projection (see gh-7050)// Plus ... h-7050) If field is truthy (1, true, etc.) and not an object, then this// If f ... en this projection must be inclusive. If object, assume its $meta, $slice, etc.// proj ... e, etc.numProps'+'if (pro ... se;\n  }const p ... ction);props = ... ection)numProp ... .lengthprops.lengthif (num ... se;\n  }numProps === 0i < numPropsconst p ... ops[i];prop = props[i]props[i]prop.startsWith('+')prop.startsWithif (isD ... }\n    }isDefin ... n[prop]isDefin ... [prop])projection[prop]!!projection[prop]!projection[prop]isPOJO( ... [prop])return  ... prop]);isInclu ... [prop])return  ... [prop];/home/insomnia/repos/mongoose/lib/helpers/projection/isNestedProjection.jsval.$sl ... == nullval.$slice == nullval.$sliceval.$el ... == nullval.$elemMatchval.$meta == nullval.$metaval.$ == nullval.$/home/insomnia/repos/mongoose/lib/helpers/projection/isPathExcluded.js
 * Determines if `path` is excluded by `projection`
 *
 * @param {Object} projection
 * @param {String} path
 * @return {Boolean}
 * @api private
 'inclusive''exclusive'Determines if `path` is excluded by `projection`projection._id === 0paths = ... ection)let type = null;type = nullconst _pathisDefin ... _path])projection[_path]type =  ... usive';type =  ... lusive'project ... lusive'project ... ] === 1projection[path]if (typ ...  1;\n  }type === 'inclusive'{\n    r ...  1;\n  }return  ...  !== 1;project ... ] !== 1type === 'exclusive'project ... ] === 0/home/insomnia/repos/mongoose/lib/helpers/projection/isPathSelectedInclusive.jsisPathSelectedInclusiveisPathS ... clusive{\n  con ... alse;\n}const c ... t('.');chunks  ... it('.')let j;let numKeys;cur +=  ... nks[i];cur +=  ... unks[i]cur.len ... unks[i]'' + chunks[i]fields[cur]keys =  ... ields);numKeys ... length;for (j  ...       }j < numKeyskeys[i] ... ) !== 0keys[i] ... ) === 0keys[i] ...  + '.')keys[i].indexOfkeys[i] ... f(path)/home/insomnia/repos/mongoose/lib/helpers/projection/isSubpath.js
 * Determines if `path2` is a subpath of or equal to `path1`
 *
 * @param {string} path1
 * @param {string} path2
 * @return {Boolean}
 * @api private
 isSubpathpath1path2Determines if `path2` is a subpath of or equal to `path1`module. ... .');\n};module. ... '.');\n}functio ... '.');\n}{\n  ret ... '.');\n}path1 = ...  + '.')path1 === path2path2.s ...  + '.')path2.startsWithpath1 + '.'/home/insomnia/repos/mongoose/lib/helpers/projection/parseProjection.js
 * Convert a string or array into a projection object, retaining all
 * `-` and `+` paths.
 /**\n *  ... hs.\n */retainMinusPaths'[object Arguments]'Convert a string or array into a projection object, retaining all
`-` and `+` paths.const t ... peof v;type = typeof vif (typ ... /);\n  }type === 'string'{\n    v ... /);\n  }v = v.split(/\s+/);v = v.split(/\s+/)v.split(/\s+/)v.splitif (!Ar ...  v;\n  }!Array. ... ments]'Object. ... ments]'Object. ... call(v)[object Arguments]{\n    return v;\n  }len = v.lengthv.lengthfor (le ... de;\n  }{\n    l ... de;\n  }let field = v[i];field = v[i]v[i]if (!fi ... ;\n    }'-' ==  ... ? 0 : 1'-' == field[0]if (!re ... ;\n    }!retain ... e === 0!retainMinusPathsret[fie ... nclude;ret[field] = includeret[field]/home/insomnia/repos/mongoose/lib/helpers/promiseOrCallback.js'./immediate'emittedSymbol'mongoose#emitted'ee./immediateconst e ... tted');emitted ... itted')Symbol( ... itted')mongoose#emittedmodule. ...  });\n};module. ...   });\n}fn(func ...      })if (ee  ...       }ee != n ... Symbol]ee != n ... gth > 0ee != n ... != nullee != nullee.listeners != nullee.listenersee.list ... gth > 0ee.list ... .lengthee.list ... error')!error[ ... Symbol]error[emittedSymbol]error[e ... = true;error[e ...  = trueee.emit ... error);ee.emit ...  error)ee.emitimmedia ...      })callbac ... ments);callbac ... uments)callback.applyPromise ... romise;Promise ... Promiseglobal.Promise{\n    f ... });\n  }fn(func ...     });fn(func ... \n    })arguments.length > 2return  ... s, 1));resolve ... ts, 1))Array.p ... nts, 1)/home/insomnia/repos/mongoose/lib/helpers/query/applyGlobalOption.js/home/insomnia/repos/mongoose/lib/helpers/queryconnectionOptionsbaseOptionsapplyGlobalOption'maxTimeMS''allowDiskUse'optionNamefunctio ... MS');\n}{\n  app ... MS');\n}applyGl ... meMS');applyGl ... imeMS')maxTimeMSfunctio ... se');\n}{\n  app ... se');\n}applyGl ... kUse');applyGl ... skUse')module. ... kUse\n};module. ... skUse\n}{\n  app ... skUse\n}if (uti ... rn;\n  }utils.h ... onName)if (uti ... e];\n  }{\n    o ... e];\n  }options ... nName];options ... onName]options[optionName]connect ... onName]baseOpt ... onName]/home/insomnia/repos/mongoose/lib/helpers/query/cast$expr.js avoid casting '$add' or '$subtract', because expressions can be either number or date,// avoi ... r date, and we don't have a good way of inferring which arguments should be numbers and which should// and  ...  should be dates.// be dates. Preserve the value if it represents a path or if it's null// Pres ... 's null { $op: <number> }// { $op: <number> } { $op: [<number>, <number>] }// { $o ... ber>] } { $op: [expression, expression] }// { $o ... sion] } The `$literal` expression can make an object a literal// The  ... literal https://www.mongodb.com/docs/manual/reference/operator/aggregation/literal/#mongodb-expression-exp.-literal// http ... literal'../../error/cast''../../error/strict''../../cast/number''../omitUndefined'booleanComparisoncomparisonOperator'$cmp''$lt''$lte''$gt''$gte'arithmeticOperatorArray'$multiply''$divide''$log''$mod''$trunc''$avg''$max''$min''$stdDevPop''$stdDevSamp''$sum'arithmeticOperatorNumber'$abs''$exp''$ceil''$floor''$ln''$log10''$sqrt''$sin''$cos''$tan''$asin''$acos''$atan''$atan2''$asinh''$acosh''$atanh''$sinh''$cosh''$tanh''$degreesToRadians''$radiansToDegrees'arrayElementOperators'$arrayElemAt''$first''$last'dateOperators'$year''$month''$week''$dayOfMonth''$dayOfYear''$hour''$minute''$second''$isoDayOfWeek''$isoWeekYear''$isoWeek''$millisecond'expressionOperator'`$expr` must be an object or boolean literal'_castExpressionisPath$ifNull$switchcastComparisoncastArithmeticcastNumberOperatorcastIn$size$round'$round'isLiteral'$in''Path must be an array for $in''Comparison operator must be an array of length 2'lhsis$literal$literal/^cast/'.$literal'../../error/cast../../error/strictconst c ... mber');castNum ... umber')require ... umber')../../cast/number/cast/numberconst o ... ined');omitUnd ... fined')require ... fined')../omitUndefined/omitUndefinedconst b ... $or']);boolean ... '$or'])new Set ... '$or'])['$and', '$or']orconst c ... gte']);compari ... $gte'])new Set ... $gte'])['$cmp' ... '$gte']$cmpcmplt$ltelte$gt$gteconst a ... um'\n]);arithme ... sum'\n])arithme ... orArraynew Set ... sum'\n])[\n  //  ... $sum'\n]$multiply$dividedivide$log$mod$trunc$avgavg$max$min$stdDevPopstdDevPop$stdDevSampstdDevSamp$sumsumconst a ... es'\n]);arithme ... ees'\n])arithme ... rNumbernew Set ... ees'\n])[\n  '$a ... rees'\n]$abs$exp$ceil$floor$lnln$log10$sqrt$sin$cos$tan$asin$acos$atan$atan2$asinh$acosh$atanh$sinh$cosh$tanh$degreesToRadiansdegreesToRadians$radiansToDegreesradiansToDegreesconst a ... st'\n]);arrayEl ... ast'\n])arrayEl ... eratorsnew Set ... ast'\n])[\n  '$a ... last'\n]$arrayElemAtarrayElemAt$first$lastconst d ... nd'\n]);dateOpe ... ond'\n])new Set ... ond'\n])[\n  '$y ... cond'\n]$year$month$weekweek$dayOfMonthdayOfMonth$dayOfYeardayOfYear$hour$minute$second$isoDayOfWeekisoDayOfWeek$isoWeekYearisoWeekYear$isoWeekisoWeek$millisecondmillisecondconst e ... not']);express ... $not'])new Set(['$not'])['$not']module. ... ry);\n};module. ... ery);\n}functio ... ery);\n}{\n  if  ... ery);\n}val === nullthrow n ... eral');new Err ... teral')'`$expr ... iteral'`$expr` must be an object or boolean literalexpr` must be an object or boolean literalreturn  ... Query);_castEx ... tQuery)if (isP ... al;\n  }isPath( ... == nullisPath(val)val.$cond != nullval.$condArray.i ... .$cond)val.$co ... uery));val.$co ... Query))val.$cond.mapexpr => ... tQuery)val.$co ... Query);val.$co ... tQuery)val.$cond.ifval.$cond.thenval.$cond.elseval.$ifNull != nullval.$ifNull{\n    v ... ));\n  }val.$if ... uery));val.$if ... Query))val.$ifNull.mapv => _c ... tQuery)val.$switch != nullval.$switchArray.i ... anches)val.$switch.branchesval.$sw ... uery));val.$sw ... Query))val.$sw ... hes.mapif ('de ... ;\n    }'defaul ... $switchval.$sw ... Query);val.$sw ... tQuery)val.$switch.defaultif (boo ... ;\n    }boolean ... as(key)boolean ... son.hasval[key ... uery));val[key ... Query))val[key].mapif (com ... ;\n    }compari ... as(key)compari ... tor.hasval[key ... Query);val[key ... tQuery)castCom ... tQuery)if (ari ... ;\n    }arithme ... as(key)arithme ... ray.hascastAri ... tQuery)arithme ... ber.hascastNum ... tQuery)if (exp ... ;\n    }express ... as(key)express ... tor.hasif (val ... y);\n  }val.$in{\n    v ... y);\n  }val.$in ... Query);val.$in ... tQuery)castIn( ... tQuery)val.$sizeval.$si ... Query);val.$si ... tQuery)val.$roundconst $ ... $round;$round = val.$round!Array. ... gth > 2!Array. ... gth < 1!Array. ... $round)Array.i ... $round)$round.length < 1$round.length$round.length > 2throw n ... ound');new Cas ... round')val.$ro ... uery));val.$ro ... Query))$round. ... Query))$round.mapv => ca ... tQuery)omitUndefined(val);omitUndefined(val)if (!is ... al;\n  }!isLiteral(val)isLiteral(val)try {\n  ... l);\n  }return  ... r(val);castNumber(val)catch ( ... l);\n  }{\n    t ... l);\n  }throw n ... , val);new Cas ... ', val)functio ... \n  ];\n}{\n  con ... \n  ];\n}const path = val[1];path = val[1]val[1]!isPath(path)isPath(path)const s ... val[0];search = val[0]const s ... ce(1));schemat ... ice(1))schema. ... ice(1))path.slice(1)path.sliceif (sch ...  0;\n  }schematype === null{\n    i ...  0;\n  }if (str ... ;\n    }strictQ ... = falsethrow n ... '$in');new Str ... ('$in')if (!sc ... ');\n  }throw n ...  $in');new Err ... r $in')'Path m ... or $in'Path must be an array for $inPath must be an array for return  ... th\n  ];[\n    s ... ath\n  ]schemat ... search)schemat ... ntArrayschemat ... pe.castschemat ... er.castif (!Ar ...   }\n  }val.map ...  }\n  })v => {\n ...   }\n  }!isLiteral(v)isLiteral(v)return  ... ber(v);castNumber(v)throw n ... r', v);new Cas ... er', v)!Array. ... h !== 2val.length !== 2throw n ... th 2');new Err ... gth 2')'Compar ... ngth 2'Comparison operator must be an array of length 2val[0]  ... Query);val[0]  ... tQuery)const lhs = val[0];lhs = val[0]if (isL ... ]);\n  }isLiteral(val[1])let path = null;path = nullschematype = nulllet caster = null;caster = nullisPath(lhs)path = lhs.slice(1);path = lhs.slice(1)lhs.slice(1)lhs.slicetypeof lhslhs != nullObject.keys(lhs)dateOpe ... s[key])dateOpe ... as(key)dateOperators.hasisPath(lhs[key])lhs[key]path =  ...  + key;path =  ... ' + keylhs[key ... ' + keylhs[key ... ) + '.'lhs[key].slice(1)lhs[key].slicecaster = castNumber;caster = castNumberarrayEl ... s[key])arrayEl ... as(key)arrayEl ... ors.hasschemat ... ce(1));schemat ... maType;schemat ... caster;schemat ... .casteris$lite ... != nulltypeof val[1]val[1] != nullval[1]. ... != nullval[1].$literalif (is$ ...       }val[1]  ... ral) };val[1]  ... eral) }{ $lite ... eral) }$litera ... iteral)schemat ... iteral)schematype.castval[1]  ... al[1]);val[1]  ... val[1])schemat ... val[1])if (cas ... ;\n    }caster != nullcaster( ... iteral)new Cas ... teral')caster. ... t/, '')caster.name.replacecaster.name^castpath + '.$literal'.$literalcaster(val[1])path != ... == truepath != nullstrictQuery === truepath != ... 'throw'{\n    v ... ]);\n  }_castEx ... val[1]){\n  ret ...  '$';\n}typeof  ... === '$'val[0] === '$'typeof  ... == '$')Object. ... == '$')Object. ... l).findkey =>  ... === '$'{\n    / ... ll;\n  }val.$literal != nullval.$literal/home/insomnia/repos/mongoose/lib/helpers/query/castFilterPath.js'./isOperator'castFilterPath./isOperator/isOperator{\n  con ...  val;\n}const a ... rator);if (!an ...  );\n  }schemat ... x\n    )const $cond = ks[k];const n ... $cond];if ($co ... ;\n    }nested  ... .caster!schematype.casterconst _ ... ested);/home/insomnia/repos/mongoose/lib/helpers/query/castUpdate.js
 * Casts an update op based on the given schema
 *
 * @param {Schema} schema
 * @param {Object} obj
 * @param {Object} [options]
 * @param {Boolean|String} [options.strict] defaults to true
 * @param {Query} context passed to setters
 * @return {Boolean} true iff the update is non-empty
 * @api private
  Update pipeline// Update pipeline fix up $set sugar// fix up $set sugar cast each value// cast each value Trick the driver into allowing empty upserts to work around// Tric ...  around https://github.com/mongodb/node-mongodb-native/pull/2490// http ... ll/2490 Shallow clone to avoid passing defaults in re: gh-13962// Shal ... h-13962
 * Walk each path of obj and cast its values
 * according to its schema.
 *
 * @param {Schema} schema
 * @param {Object} obj part of a query
 * @param {String} op the atomic operator ($pull, $set, etc)
 * @param {Object} [options]
 * @param {Boolean|String} [options.strict]
 * @param {Query} context
 * @param {Object} filter
 * @param {String} pref path prefix (internal only)
 * @return {Bool} true if this path has keys to update
 * @api private
  `$pull` is special because we need to cast the RHS as a query, not as// `$pu ...  not as an update.// an update. watch for embedded doc schemas// watc ... schemas embedded doc schema// embe ...  schema $currentDate can take an object// $cur ...  object gh-2314// gh-2314 we should be able to set a schema-less field// we s ... s field to an empty object literal// to a ... literal You can use `$setOnInsert` with immutable keys// You  ... le keys If no schema type, check for embedded discriminators because the// If n ... use the filter or update may imply an embedded discriminator type. See #8378// filt ... e #8378 Even if strict is `throw`, avoid throwing an error because of// Even ... ause of virtuals because of #6731// virt ... f #6731 Setting a nested dotted path that's in the schema. We don't allow paths with '.' in// Sett ...  '.' in a schema, so replace the dotted path with a nested object to avoid ending up with// a sc ... up with dotted properties in the updated object. See (gh-10200)// dott ... -10200)
 * These operators should be cast to numbers instead
 * of their path schema type.
 * @api private
 
 * These ops require no casting because the RHS doesn't do anything.
 * @api private
 
 * These operators require casting docs
 * to real Documents for Update operations.
 * @api private
 
 * Casts `val` according to `schema` and atomic `op`.
 *
 * @param {SchemaType} schema
 * @param {Object} val
 * @param {String} op the atomic operator ($pull, $set, etc)
 * @param {String} $conditional
 * @param {Query} context
 * @param {String} path
 * @api private
  non-existing schema path// non- ... ma path console.log('CastUpdateVal', path, op, val, schema);// cons ... chema); Cast values for ops that add data to MongoDB.// Cast ... ongoDB. Ensures embedded documents get ObjectIds etc.// Ensu ... ds etc. Null and undefined not allowed for $pop, $inc// Null ... p, $inc Support `$inc` with long, int32, etc. (gh-4283)// Supp ... h-4283)SchemaString'../../schema/string''../../error/validation''./getEmbeddedDiscriminatorPath'handleImmutable'./handleImmutable'moveImmutableProperties'../update/moveImmutableProperties''../path/setDottedPath'mongodbUpdateOperators'$currentDate''$mul''$rename''$setOnInsert''$bit'castPipelineOperatorbyValuehasDollarKeywalkUpdatePath'Invalid atomic update value for ''. ''Expected an object, received '$setOnInsert'Invalid $unset in pipeline, must be '' a string or an array of strings''$project''Invalid $project in pipeline, must be an object''$addFields''Invalid '' in pipeline, must be an object''$replaceRoot''$replaceWith''Invalid update pipeline operator: "'aggregatedError'Can\'t modify discriminator key "''" on discriminator model'_appendErrorcastOps'$each'castUpdateVal$position_strict.$rename|=checkPathisStrict/real|nested/'String'multipleCastErrornumberOpsnoCastOpsoverwriteOps$conditionalschemaArrayDepthadditionalNestingtmp$typeskipQueryCastForUpdate$fullPath/\d+$/Casts an update op based on the given schemadefaults to true
true iff the update is non-empty
Walk each path of obj and cast its values
according to its schema.part of a query
the atomic operator ($pull, $set, etc)
path prefix (internal only)
true if this path has keys to update
BoolThese operators should be cast to numbers instead
of their path schema type.These ops require no casting because the RHS doesn't do anything.These operators require casting docs
to real Documents for Update operations.Casts `val` according to `schema` and atomic `op`.const S ... ring');SchemaS ... tring')'../../ ... string'../../schema/string/schema/string'../../ ... dation'../../error/validation'./getE ... orPath'./getEmbeddedDiscriminatorPath/getEmbeddedDiscriminatorPathconst h ... able');handleI ... table')require ... table')./handleImmutable/handleImmutableconst m ... ties');moveImm ... rties')moveImm ... perties'../upd ... erties'../update/moveImmutableProperties/update/moveImmutablePropertiesconst s ... Path');setDott ... dPath')require ... dPath')'../pat ... edPath'../path/setDottedPath/path/setDottedPathconst { ... ions');{ inter ... tions'){ inter ... tions }const m ... it'\n]);mongodb ... bit'\n])mongodb ... eratorsnew Set ... bit'\n])[\n  '$c ... $bit'\n]$currentDatecurrentDate$mulmul$renamesetOnInsert$bitbitif (obj ... ed;\n  }if (Arr ... bj;\n  }{\n    c ... bj;\n  }len = obj.lengthobj.lengthconst o ... bj[i]);ops = O ... obj[i])Object.keys(obj[i])obj[i][ ... ][op]);obj[i][ ... i][op])obj[i][op]castPip ... i][op])schema  ... object'schema  ... torKey)filter != nullutils.h ... torKey)typeof  ... torKey]filter[ ... torKey]{\n    c ... ma;\n  }const b ... Value);byValue ... rValue)context ... inatorscontext.modelschema. ... schema)schema. ... rValue](byValu ... schema)byValue ... .schemabyValue.schemaschema  ... atorKeyoptions ... atorKeyobj.$set != nullobj.$setobj.$se ... torKey]{\n    m ... t);\n  }moveImm ... ntext);moveImm ... ontext)const o ... s(obj);ops = O ... ys(obj)let has ...  false;hasDollarKey = falsefilter  ...  || {};filter  ... r || {}filter || {}!mongod ... has(op)mongodb ... has(op)mongodb ... ors.has!ret.$setret.$setret.$set = obj.$set;ret.$set = obj.$setret.$set = {};ret.$set = {}ret.$se ... bj[op];ret.$se ... obj[op]ret.$set[op]obj[op]ops.splice(i, 1);ops.splice(i, 1)ops.spliceif (!~o ... $set');!~ops.i ... '$set')~ops.indexOf('$set')ops.indexOf('$set')ops.indexOfops.push('$set');ops.push('$set')ops.pushop === '$set'ret[op] = obj[op];ret[op] = obj[op]ret[op]i = ops.length;val = ret[op];val = ret[op]hasDoll ... h('$');hasDoll ... th('$')op.startsWith('$')op.startsWithval !=  ... val.$__ret[op] = val;ret[op] = valval &&\n ... has(op)val &&\n ... er(val)walkUpd ... ilter);walkUpd ... filter)const m ... of val;msg = ' ... eof val'Invali ... eof val'Invali ... eived ''Invali ...  + '. ''Invali ...  ' + op'Invali ... e for 'Invalid atomic update value for . 'Expect ... eived 'Expected an object, received new Error(msg)if (op. ... ;\n    }op.star ... ct(val)utils.isEmptyObjectdelete ret[op];delete ret[op]if (Obj ...  };\n  }Object. ... .upsertObject.keys(filter){\n    / ...  };\n  }return  ... er } };{ $setO ... ter } }$setOnI ... ilter }{ ...filter }...filterfunctio ... '"');\n}{\n  if  ... '"');\n}if (op  ... al;\n  }op === '$unset'typeof  ... ring'))(!Array ... ring'))!Array. ... tring')val.fin ... tring')val.findv => ty ... string'throw n ... ings');new Mon ... rings')'Invali ... trings''Invali ... st be 'Invalid $unset in pipeline, must be ' a str ... trings' a string or an array of stringsInvalid $unset in pipeline, must be  a string or an array of stringsInvalid unset in pipeline, must be  a string or an array of stringsop === '$project'new Mon ... bject')Invalid $project in pipeline, must be an objectproject in pipeline, must be an objectop ===  ...  '$set'op === '$addFields''Invalid ' + op' in pi ... object' in pipeline, must be an objectop ===  ... ceWith'op ===  ... ceRoot'$replaceWithnew Mon ...  + '"')'Invali ... p + '"''Invali ... "' + op'Invali ... tor: "'Invalid update pipeline operator: "functio ... Keys;\n}{\n  con ... Keys;\n}const p ... ' : '';pref ?  ... .' : ''pref + '.'let hasKeys = false;hasKeys = falselet agg ... = null;aggrega ...  = nullstrictM ... .strictstrict != nullif (op  ... }\n    }schemat ... + key);schemat ...  + key)schema._getSchemaschematype == nullconst _ ... tions);_res =  ... ptions)_res.sc ... != null_res.schematypeschemat ... matype;schemat ... ematypeobj[key ... ntext);obj[key ... ontext)const d ... : key);discrim ...  : key)(prefix ...  : key)if (\n   ... }\n    }schema. ... bj[key]!option ... atorKeystrictM ... 'throw'const e ... odel');err = n ... model')'Can\'t ...  model''Can\'t ... atorKeyCan't modify discriminator key "'" on d ...  model'" on discriminator modelaggrega ... Error);aggrega ... dError)_append ... dError)if (get ... }\n    }if (op  ...       }op !==  ... ontext)op !==  ... Insert'handleI ... ontext)schemat ... castOpsop in castOpsif ('$e ...       }'$each' in valobj[key ...      };obj[key ...       }$each:  ...  + key)castUpd ...  + key)val.$eachval.$slice != nullobj[key ... ce | 0;obj[key ... ice | 0obj[key].$sliceval.$slice | 0val.$sortobj[key ... .$sort;obj[key ... l.$sortobj[key].$sortval.$po ... != nullval.$positionobj[key ... ition);obj[key ... sition)obj[key].$positioncastNum ... sition)schemat ... eNestedconst _ ... strict;_strict ...  strictstrict  ...  strictstrict == nullschemat ... .strictobj[key ... ict });obj[key ... rict })schemat ... rict }){ strict: _strict }strict: _strictobj[key ... + key);obj[key ...  + key)obj[key] === void 0if ((op ...       }(op === ... matype)(op === ... tDate')op ===  ... ntDate'(op in  ... matype)op in c ... ematypeop === '$rename'const s ... name`);schemat ... ename`)new Sch ... ename`)`${pref ... rename`const p ... + key);pathToC ...  + key)(prefix + key)const v ... Check);v = sch ... oCheck)schema. ... oCheck)schema._getPathTypelet _st ... strict;_strict = strictif (v & ...       }v && v. ... == nullv && v.schemav.schema_strict == null_strict ... strict;_strict ... .strictv.schem ... .strictv.schema.optionsif (v.p ...       }v.pathT ... efined'v.pathTypeif (_st ...       }_strict === 'throw'throw n ... Check);new Str ... oCheck)hasKeys ... === 0);hasKeys ...  === 0)walkUpd ...  === 0)walkUpd ...  + key)(utils. ...  === 0)utils.i ... h === 0utils.isObject(val)const c ...  + key;checkPa ... x + key(key == ... x + key(key == ...  '$in')key === ... = '$in'key === ...  '$and'key === ... = '$or'key === '$each'key === '$or'key === '$and'key === '$in'schemat ... kPath);schemat ... ckPath)schema. ... ckPath)let pat ... kPath);pathDet ... ckPath)pathDet ... s.type;pathDet ... es.type_res.typelet isS ... strict;isStrict = strictpathDet ... == nullpathDet ... .schemapathDetails.schemaisStric ... strict;isStric ... .strictpathDet ... .strictpathDet ... optionsconst s ... hType);skip =  ... thType)isStric ... thType)isStric ... ematype!/real| ... thType)/real|n ... thType)/real|nested/.testreal|nestedpathDetails.pathTypeisStric ... == nullisStrict === 'throw'schema. ... ckPath]throw n ... + key);new Str ...  + key)obj[key] == nullthrow n ... name`);new Cas ... ename`)schemat ... ontext)if (pre ...       }prefix. ...  === -1prefix.length === 0isStric ... != nullisStrict !== falsesetDott ...  key));setDott ... + key))Array.i ... '$each'Array.i ... $push')Array.i ... j[key])(op === ... $push')op ===  ... '$push'key !== '$each'schemat ... Symbol]obj[key ... key] };obj[key ... [key] }{ $each: obj[key] }$each: obj[key]if (agg ... or;\n  }aggrega ... != nullthrow a ... dError;return hasKeys;if (typ ... or;\n  }typeof  ... stErrortypeof query!query. ... stErrorquery.o ... stErroraggrega ... rror();aggrega ... Error()new Val ... Error()aggrega ... error);aggrega ...  error)aggrega ... ddErrorreturn  ... dError;const n ... c: 1\n};numberO ... nc: 1\n}{\n  $po ... nc: 1\n}$pop: 1$inc: 1const n ... t: 1\n};noCastO ... et: 1\n}{\n  $unset: 1\n}$unset: 1const c ... t: 1\n};castOps ... rt: 1\n}{\n  $pu ... rt: 1\n}$push: 1$addToSet: 1$set: 1$setOnInsert: 1const o ... t: 1\n};overwri ... rt: 1\n}{\n  $se ... rt: 1\n}functio ... ext);\n}{\n  if  ... ext);\n}if (!sc ... al;\n  }op in numberOpsconst c ... (val));cond =  ... y(val))schema. ... y(val))schema. ... castOps(utils. ... y(val))if (con ... mp;\n  }cond && ... Ops[op]!overwriteOps[op]overwriteOps[op]{\n    / ... mp;\n  }let sch ... th = 0;schemaArrayDepth = 0let cur = schema;cur = schemacur.$isMongooseArray++schemaArrayDepth;++schemaArrayDepthcur = cur.caster;cur = cur.castercur.casterlet arrayDepth = 0;arrayDepth = 0let _val = val;_val = val++arrayDepth;++arrayDepth_val = _val[0];_val = _val[0]const a ... yDepth;additio ... ayDepthschemaA ... ayDeptharrayDe ... ayDepthval = [val];val = [val]let tmp ... ntext);tmp = s ... ontext)schema. ... ontext)Array.i ... : [val]i < add ... Nestingtmp = tmp[0];tmp = tmp[0]tmp[0]return tmp;op in noCastOpsif (op  ...   }\n  }throw n ... .path);new Cas ... a.path)op === '$inc'schema.castForQueryif (op  ... l);\n  }{\n    i ... l);\n  }return  ... type };{ $type: val.$type }$type: val.$typeval.$typereturn Boolean(val);Boolean(val)if (mon ...  );\n  }mongodb ... tional)schema. ... t\n    )if (ove ...  );\n  }{\n    c ...  );\n  }const s ... \d+$/);skipQue ... /\d+$/)skipQue ... rUpdateval !=  ... /\d+$/)val !=  ... seArrayschema.$fullPath!schema ... /\d+$/)schema. ... /\d+$/)schema. ... h.match\d+$const a ... = null;applySe ... != nullschema[ ... != nullskipQue ... Setters/home/insomnia/repos/mongoose/lib/helpers/query/getEmbeddedDiscriminatorPath.js
 * Like `schema.path()`, except with a document, because impossible to
 * determine path type without knowing the embedded discriminator key.
 * @param {Schema} schema
 * @param {Object} [update]
 * @param {Object} [filter]
 * @param {String} path
 * @param {Object} [options]
 * @api private
 cleanPositionalOperators'../schema/cleanPositionalOperators'updatedPathsByArrayFilter'../update/updatedPathsByArrayFilter'updatedPathsByFilterstartIndexoriginalSubpathdiscriminatorValuePathdiscriminatorFilterPathwrapperPath/\.\d+$/'$elemMatch.'discriminatorKeyUpdatePathschemaKeyarrayFilterKeyconst c ... tors');cleanPo ... ators')cleanPo ... erators'../sch ... rators'../schema/cleanPositionalOperators/schema/cleanPositionalOperatorsconst u ... lter');updated ... ilter')updated ... yFilterrequire ... ilter')'../upd ... Filter'../update/updatedPathsByArrayFilter/update/updatedPathsByArrayFiltermodule. ... e };\n};module. ... pe };\n}functio ... pe };\n}{\n  con ... pe };\n}update  ...  || {};update  ... e || {}const a ... s : [];arrayFi ... rs : []options ... rs : []options ... ilters)Array.i ... ilters)options.arrayFiltersconst u ... pdate);updated ... update)let startIndex = 0;startIndex = 0const o ... n('.');origina ... in('.')subpath ... ubpath)cleanPo ... ubpath)schemat ... bpath);schemat ... ubpath)if ((sc ... }\n    }schemat ... Elementconst k ... rKey');key = g ... orKey')const d ...  + key;discrim ... ' + keydiscrim ... luePathsubpath + '.' + keyconst d ... , '.');discrim ... /, '.')discrim ... terPathdiscrim ... replacelet dis ... = null;discrim ...  = nulldiscrim ...  filterdiscrim ... ePath];discrim ... uePath]filter[ ... uePath]discrim ... rPath];discrim ... erPath]filter[ ... erPath]const w ... /, '');wrapper ... $/, '')subpath ... $/, '')subpath.replaceget(fil ... != nullget(fil ...  + key)filter[wrapperPath]'$elemMatch.' + key$elemMatch.discrim ... h[key];discrim ... ch[key]filter[ ... ch[key]filter[ ... emMatchdiscrim ... atePathorigina ... ' + keyorigina ... h + '.'discrim ...  updatediscrim ... tePath]update[ ... tePath]update[ ... uePath]Object. ... Filter)const filterKeyconst s ...  + key;schemaK ... ' + keyupdated ... ' + keyupdated ... ] + '.'updated ... terKey]const a ...  + key;arrayFi ... ' + keyfilterK ... ' + keyfilterKey + '.'schemaK ... terPathconst f ... rKey));filter  ... erKey))arrayFi ... erKey))arrayFilters.findfilter  ... terKey)filter. ... terKey)filter. ... ropertyif (fil ...       }discrim ... erKey];discrim ... terKey]filter[ ... terKey]getDisc ... torKey)schemat ... (rest);schemat ... h(rest)discrim ... h(rest)schema  ... Schema;schema  ... rSchemastartIndex = i + 1;startIndex = i + 1type =  ... (rest);type =  ... e(rest)discrim ... e(rest)discrim ... athType{ type: ... atype }type: type/home/insomnia/repos/mongoose/lib/helpers/query/handleImmutable.js
 * Handle immutable option for a given path when casting updates based on options
 *
 * @param {SchemaType} schematype the resolved schematype for this path
 * @param {Boolean | 'throw' | null} strict whether strict mode is set for this query
 * @param {Object} obj the object containing the value being checked so we can delete
 * @param {String} key the key in `obj` which we are checking for immutability
 * @param {String} fullPath the full path being checked
 * @param {Object} options the query options
 * @param {Query} ctx the query. Passed as `this` and first param to the `immutable` option, if `immutable` is a function
 * @returns true if field was removed, false otherwise
 Field  is immutable and strict = 'throw'Handle immutable option for a given path when casting updates based on optionsthe resolved schematype for this path
whether strict mode is set for this query
(Boolean|'throw'|null)the object containing the value being checked so we can delete
the key in `obj` which we are checking for immutability
the full path being checked
the query. Passed as `this` and first param to the `immutable` option, if `immutable` is a function
true if field was removed, false otherwiseschemat ... mutable!schematype.options!schema ... mutablelet imm ... utable;immutab ... mutableif (typ ... x);\n  }typeof immutableimmutab ... , ctx);immutab ... x, ctx)immutable.callif (!im ... se;\n  }if (str ... se;\n  }strict === falseif (str ... `);\n  }throw n ... row'`);new Str ... hrow'`)`Field  ... throw'` is imm ... 'throw'/home/insomnia/repos/mongoose/lib/helpers/query/handleReadPreferenceAliases.jshandleReadPreferenceAliases'p''pp''sp''n''nearest'module. ... ref;\n};module. ... pref;\n}functio ... pref;\n}handleR ... Aliases{\n  swi ... pref;\n}switch  ... ak;\n  }pref = 'primary';pref = 'primary'pppref =  ... erred';pref =  ... ferred'pref = 'secondary';pref = 'secondary'case 'n ...  break;pref = 'nearest';pref = 'nearest'nearestreturn pref;/home/insomnia/repos/mongoose/lib/helpers/query/hasDollarKeys.js{\n\n  if ... alse;\n}keys[i][0] === '$'keys[i][0]/home/insomnia/repos/mongoose/lib/helpers/query/isOperator.jsspecialKeys'$ref''$id''$db'const s ... db'\n]);special ... $db'\n])new Set ... $db'\n])[\n  '$r ... '$db'\n]$ref$id$dbreturn  ... h)\n  );(\n    p ... th)\n  )path[0] ... s(path)path[0] === '$'path[0]!specia ... s(path)specialKeys.has/home/insomnia/repos/mongoose/lib/helpers/query/sanitizeFilter.js'./hasDollarKeys''./trusted'subfilterfilterKeys./hasDollarKeys/hasDollarKeys{ trustedSymbol }require('./trusted')./trusted/trustedmodule. ... ter;\n};module. ... lter;\n}functio ... lter;\n}{\n  if  ... lter;\n}if (fil ... er;\n  }filter  ... object'filter == nulltypeof filter{\n    r ... er;\n  }return filter;if (Arr ... er;\n  }Array.i ... filter){\n    f ... er;\n  }const subfiltersanitiz ... ilter);sanitiz ... filter)const f ... ilter);filterK ... filter)const v ... r[key];value = filter[key]filter[key]value ! ... Symbol]value[trustedSymbol]sanitiz ... value);sanitiz ... (value)hasDollarKeys(value)const k ... value);keys =  ... (value)Object.keys(value)keys.le ... = '$eq'keys[0] === '$eq'filter[ ... key] };filter[ ... [key] }{ $eq: filter[key] }$eq: filter[key]/home/insomnia/repos/mongoose/lib/helpers/query/sanitizeProjection.jssanitizeProjectioni < keys.lengthtypeof  ... eys[i]]projection[keys[i]]project ... ]] = 1;project ... i]] = 1/home/insomnia/repos/mongoose/lib/helpers/query/selectPopulatedFields.js'../projection/isExclusive''../projection/isInclusive'selectPopulatedFieldsuserProvidedFieldsisPathInFields'../pro ... lusive'../projection/isExclusive/projection/isExclusive../projection/isInclusive/projection/isInclusiveselectP ... dFieldsif (pop ... rn;\n  }populat ... == nullconst p ... tions);paths = ... ptions)userPro ...  || {};userPro ... s || {}if (isI ...   }\n  }isInclusive(fields)!isPath ... , path)isPathI ... , path)fields[path] = 1;fields[path] = 1fields[path]userPro ... ] === 0userPro ... s[path]delete fields[path];delete fields[path]populat ... refPathpopulat ... s[path]!isPath ... efPath)isPathI ... efPath)fields[refPath] = 1;fields[refPath] = 1fields[refPath]userPro ... efPath]delete  ... fPath];delete  ... efPath]if (isE ...   }\n  }userPro ... == nullfor (le ... i];\n  }{\n    i ... i];\n  }if (use ... ;\n    }userPro ... != nulluserPro ... ds[cur]userPro ... + '.$']cur + '.$'/home/insomnia/repos/mongoose/lib/helpers/query/trusted.js'mongoose#trustedSymbol'const t ... mbol');trusted ... ymbol')Symbol( ... ymbol')'mongoo ... Symbol'mongoose#trustedSymbolexports ... Symbol;exports ... dSymbolexports ... obj;\n};exports ...  obj;\n}exports.trustedobj[tru ... = true;obj[tru ...  = true/home/insomnia/repos/mongoose/lib/helpers/query/validOps.jsmodule. ... nctionsrequire ... nctions/home/insomnia/repos/mongoose/lib/helpers/schema/addAutoId.js/home/insomnia/repos/mongoose/lib/helpers/schemaaddAutoIdmodule. ... bj);\n};module. ... obj);\n}{\n  con ... obj);\n}const _ ... ue } };_obj =  ... rue } }{ _id:  ... rue } }_id: { auto: true }{ auto: true }auto: true_obj._i ... ectId';_obj._i ... jectId'_obj._i ... ypeKey]_obj._idschema.add(_obj);schema.add(_obj)/home/insomnia/repos/mongoose/lib/helpers/schema/applyBuiltinPlugins.jsbuiltinPlugins'../../plugins'deduplicateconst b ... gins');builtin ... ugins')../../plugins/pluginsmodule. ... ns);\n};module. ... ins);\n}functio ... ins);\n}{\n  for ... ins);\n}Object. ... lugins)const pluginplugin( ... rue });plugin( ... true }){ dedup ...  true }deduplicate: trueObject. ...  concatObject. ... e } }))Object. ...     mapfn => ( ... ue } })({ fn,  ... ue } }){ fn, o ... rue } }opts: { ...  true }/home/insomnia/repos/mongoose/lib/helpers/schema/applyPlugins.js Recompile schema because plugins may have changed it, see gh-7572// Reco ... gh-7572cacheKeypluginTagsapplyPluginsToChildSchemasschema[cacheKey]schema[ ... = true;schema[ ...  = trueif (!op ...   }\n  }!option ... opLeveloptions.skipTopLevellet plu ... = null;pluginTags = nullconst t ... ].tags;tags =  ... 1].tagsplugin[ ... 1].tagsplugin[1] == nullplugin[1]plugin[1].tags!Array.isArray(tags)Array.isArray(tags)schema. ... in[1]);schema. ... gin[1])schema.pluginplugin[0]pluginT ... || []);pluginT ...  || [])new Set ...  || [])schema. ... s || []schema. ... ginTagsif (!ta ...       }!tags.f ... s(tag))tags.fi ... s(tag))tags.findtag =>  ... as(tag)pluginTags.has(tag)pluginTags.hasoptions ... SchemasapplyPl ... Schemasconst t ... [path];type =  ... s[path]type.schema != nullapplyPl ... heKey);applyPl ... cheKey)type.ca ... chema);type.ca ... schema)type.ca ... tSchematype.ca ... ototypeif (dis ... rn;\n  }const a ... nators;options ... inatorsfor (co ... y);\n  }{\n    c ... y);\n  }{ skipT ... ators }/home/insomnia/repos/mongoose/lib/helpers/schema/applyReadConcern.js Don't apply default read concern to operations in transactions,// Don' ... ctions, because you shouldn't set read concern on individual operations// beca ... rations within a transaction.// with ... action. See: https://www.mongodb.com/docs/manual/reference/read-concern/// See: ... oncern/applyReadConcernoptions.readConcernoptions ... sactionconst l ... .level;level = ... ?.levelschema. ... ?.levelschema. ... Concernif (lev ...  };\n  }level != nulloptions ... evel };options ... level }{ level }/home/insomnia/repos/mongoose/lib/helpers/schema/applyWriteConcern.js Don't apply default write concern to operations in transactions, because setting write concern on an operation in a transaction is an error// beca ... n error See: https://www.mongodb.com/docs/manual/reference/write-concern/applyWriteConcernwriteConcern'w''j''wtimeout'wtimeoutoptions.writeConcernconst w ...  ?? {};writeCo ... n ?? {}schema. ... n ?? {}if (Obj ...   }\n  }Object. ... th != 0Object. ... oncern)options ... n = {};options ... rn = {}!('w' i ... != null!('w' in options)('w' in options)'w' in optionswriteCo ... != nullwriteConcern.woptions ... cern.w;options ... ncern.w!('j' i ... != null!('j' in options)('j' in options)'j' in optionswriteConcern.joptions ... cern.j;options ... ncern.j!('wtim ... != null!('wtim ... ptions)('wtime ... ptions)'wtimeo ... optionswriteCo ... timeoutoptions ... imeout;options ... timeout/home/insomnia/repos/mongoose/lib/helpers/schema/cleanPositionalOperators.js
 * For consistency's sake, we replace positional operator `$` and array filters
 * `$[]` and `$[foo]` with `0` when looking up schema paths.
 /\.\$(\[[^\]]*\])?(?=\.)/g'.0'/\.\$(\[[^\]]*\])?$/gFor consistency's sake, we replace positional operator `$` and array filters
`$[]` and `$[foo]` with `0` when looking up schema paths.module. ... 0');\n};module. ... .0');\n}functio ... .0');\n}{\n  ret ... .0');\n}return  ...  '.0');path.\n  ... , '.0')path.\n  ... replacepath.\n    replace/\.\$(\ ... ?=\.)/g\.\$(\[[^\]]*\])?(?=\.)(\[[^\]]*\])?(\[[^\]]*\])\[[^\]]*\]\[[^\]]*[^\]]\](?=\.).0/\.\$(\ ... \])?$/g\.\$(\[[^\]]*\])?$/home/insomnia/repos/mongoose/lib/helpers/schema/getIndexes.js
 * Gather all indexes defined in the schema, including single nested,
 * document arrays, and embedded discriminators.
 * @param {Schema} schema
 * @api private
  Ignore infinitely nested schemas, if we've already seen this schema// Igno ...  schema along this path there must be a cycle// alon ... a cycle If looking at an embedded discriminator schema, don't look at paths// If l ... t paths that the// that the Retained to minimize risk of backwards breaking changes due to// Reta ...  due to gh-6113// gh-6113
   * Checks for indexes added to subdocs using Schema.index().
   * These indexes need their paths prefixed properly.
   *
   * schema._indexes = [ [indexObj, options], [indexObj, options] ..]
   * @param {Schema} schema
   * @param {String} prefix
   * @api private
    use forward iteration, order matters// use  ... mattershelperIsObject'../isObject''../indexes/decorateDiscriminatorIndexOptions'schemaStackindexTypesindexByNamecollectIndexes_duplicateKeyErrorMessage_duplicateKeyErrorMessagesByPath'options.excludeIndexes''schemaOptions.excludeIndexes''schema.options.excludeIndexes'discriminatorKeys_indexisDescendingIndex'ascending''asc''background'_autoIndexfixSubIndexPaths_indexessubindexesindexObjklennewindexnewIndexOptionsGather all indexes defined in the schema, including single nested,
document arrays, and embedded discriminators.Checks for indexes added to subdocs using Schema.index().
These indexes need their paths prefixed properly.

schema._indexes = [ [indexObj, options], [indexObj, options] ..]const h ... ject');helperI ... bject')../isObjectconst d ... ions');decorat ... tions')'../ind ... ptions'../indexes/decorateDiscriminatorIndexOptions/indexes/decorateDiscriminatorIndexOptions{\n  let ... }\n  }\n}let indexes = [];indexes = []schemaS ... akMap()const i ... xTypes;indexTy ... exTypesschema. ... exTypesschema.constructorconst i ...  Map();indexBy ... w Map()collect ... chema);collect ... schema)schemaS ... schema)schemaStack.hasschemaS ...  true);schemaS ... , true)schemaStack.setconst k ... paths);keys =  ... .paths)if (bas ...       }baseSch ... hs[key]baseSchema != nullpath._d ... != nullpath._d ... Message_duplic ... Messageschema. ...  || {};schema. ... h || {}schema. ... sByPath_duplic ... sByPathschema. ... essage;schema. ... Messageschema. ... th[key]path.$i ... eNestedpath.$i ... ntArraypath.$isSingleNestedget(pat ... == trueget(pat ... dexes')'option ... ndexes'options.excludeIndexesexcludeIndexes'schema ... ndexes'schemaOptions.excludeIndexesschema.options.excludeIndexescollect ... + '.');collect ...  + '.')path.schemaprefix + key + '.'path.sc ... != nullpath.sc ... inatorsconst d ... ators);discrim ... nators)const i ... index);index = ... _index)path._i ... _index)path._index(path.c ... _index)path.ca ... ._indexpath.casterpath.caster._indexindex ! ... definedindex ! ... == nullindex !== falseindex !== nullindex !== undefinedconst field = {};field = {}isObjec ... (index)helperI ... (index)const o ... x : {};options ... ex : {}isObjec ... ex : {}const t ...  false;type =  ...   falsetypeof  ...   falseisObjec ...   falseindex.typetype && ...  !== -1indexTy ...  !== -1indexTy ... f(type)indexTypes.indexOffield[p ... = type;field[p ...  = typefield[prefix + key]options.textfield[p ... 'text';field[p ...  'text'delete options.text;delete options.textlet isD ...  false;isDesce ... = falseindex = ...  'desc'index = ... ending'index === 'desc'isDesce ... = true;isDesce ...  = trueindex = ... = 'asc'ascendingindex === 'asc'ascisDesce ...  false;isDesce ... === -1;isDesce ...  === -1Number(index) === -1Number(index)field[p ... -1 : 1;field[p ...  -1 : 1isDesce ...  -1 : 1delete options.type;delete options.typeoptions.type!('back ... ptions)('backg ... ptions)'backgr ... optionsoptions.backgroundschema. ... toIndexoptions ... oIndex;options._autoIndexconst i ... s.name;indexNa ... ns.nameoptions ... ns.nameoptions.nametypeof indexNameindexBy ... exName)indexByName.hasObject. ... field);Object. ...  field)indexByName.getindexes ... ions]);indexes ... tions])indexes.push[field, options]indexBy ... field);indexBy ...  field)indexByName.setschemaS ... chema);schemaStack.deletefixSubI ... refix);fixSubI ... prefix)schema._indexesdecorat ... tions);decorat ... ptions)indexes ... dexes);indexes ... ndexes)indexes.concatconst s ... ndexes;subinde ... indexeslen = s ... .lengthsubindexes.lengthconst i ... [i][0];indexOb ... s[i][0]subindexes[i][0]subindexes[i]const i ... [i][1];indexOp ... s[i][1]subindexes[i][1]const k ... exObj);keys =  ... dexObj)Object. ... dexObj)const k ... length;klen = keys.lengthconst newindex = {};newindex = {}j < klenconst key = keys[j];key = keys[j]keys[j]newinde ... j[key];newinde ... bj[key]newinde ...  + key]indexObj[key]const n ... tions);newInde ... ptions)indexOp ... != nullindexOptions != nullnewInde ... n = {};newInde ... on = {}newInde ... ressionconst p ... ession;Object. ... ession)newInde ... n[key];newInde ... on[key]newInde ...  + key]partial ... on[key][newind ... ptions]/home/insomnia/repos/mongoose/lib/helpers/schema/getKeysInSchemaOrder.jsschemaKeysvalKeysmodule. ... eys;\n};module. ... keys;\n}functio ... keys;\n}{\n  con ... keys;\n}const s ... .tree);schemaK ... a.tree)path != ... a.tree)Object. ... h, {}))get(sch ... th, {})const v ... (val));valKeys ... s(val))new Set ... s(val))if (val ... s);\n  }valKeys.size > 1valKeys.size{\n    k ... s);\n  }keys = new Set();keys = new Set()valKeys.has(key)valKeys.haskeys.add(key);keys.add(key)keys.addif (!ke ...       }!keys.has(key)keys.has(key)keys.haskeys =  ... (keys);keys =  ... m(keys)Array.from(keys)keys =  ... lKeys);keys =  ... alKeys)Array.from(valKeys)return keys;/home/insomnia/repos/mongoose/lib/helpers/schema/getPath.js
 * Behaves like `Schema#path()`, except for it also digs into arrays without
 * needing to put `.0.`, so `getPath(schema, 'docArr.elProp')` works.
 * @api private
 numberRE/^\d+$/getPathdiscriminatorValueMapBehaves like `Schema#path()`, except for it also digs into arrays without
needing to put `.0.`, so `getPath(schema, 'docArr.elProp')` works.const n ... ^\d+$/;numberRE = /^\d+$/^\d+$module. ... type;\n}functio ... type;\n}discrim ... alueMap{\n  let ... type;\n}if (sch ... pe;\n  }return schematype;let isArray = false;isArray = falseisArray ... (piece)numberRE.test(piece)numberRE.testcur.len ... + piececur + '.' + pieceschemat ... h(cur);schema.path(cur)!isArra ... ntArray!isArrayisArray = true;isArray = truediscrim ... ap[cur]schema. ... p[cur]]/home/insomnia/repos/mongoose/lib/helpers/schema/getSubdocumentStrictValue.js
 * Find the `strict` mode setting for the deepest subdocument along a given path
 * to ensure we have the correct default value for `strict`. When setting values
 * underneath a subdocument, we should use the subdocument's `strict` setting by
 * default, not the top-level document's.
 *
 * @param {Schema} schema
 * @param {String[]} parts
 * @returns {boolean | 'throw' | undefined}
 Find the `strict` mode setting for the deepest subdocument along a given path
to ensure we have the correct default value for `strict`. When setting values
underneath a subdocument, we should use the subdocument's `strict` setting by
default, not the top-level document's.(boolean|'throw'|undefined)module. ... ict;\n};module. ... rict;\n}functio ... rict;\n}{\n  if  ... rict;\n}if (par ... ed;\n  }let cur = parts[0];cur = parts[0]let str ... efined;strict = undefinedconst c ... h(cur);curSche ... th(cur)strict  ... strict;curSche ... .strictcurSche ... optionscur = c ... i + 1];cur = c ... [i + 1]curSche ... [i + 1]curSche ... i + 1])curSche ... ntArray!isNaN(parts[i + 1])isNaN(parts[i + 1])cur +=  ... i + 1];cur +=  ... [i + 1]cur.len ... [i + 1]('.' + parts[i + 1])return strict;/home/insomnia/repos/mongoose/lib/helpers/schema/handleIdOption.js'./addAutoId'handleIdOptionconst a ... toId');addAuto ... utoId')require ... utoId')./addAutoId/addAutoIdif (opt ... ma;\n  }options._id == nulloptions._idschema  ... lone();schema  ... clone()schema.clone()schema.cloneif (!op ... ue;\n  }!options._id{\n    s ... se;\n  }schema. ...  false;schema. ... = falseif (!sc ... ue;\n  }!schema.paths['_id']schema.paths['_id']addAutoId(schema);addAutoId(schema)schema. ... = true;schema. ...  = true/home/insomnia/repos/mongoose/lib/helpers/schema/handleTimestampOption.jsmodule. ... Option;module. ... pOptionif (typ ... op;\n  }{\n    r ... op;\n  }return prop;typeof arg[prop]arg[prop]arg[pro ...  : nullif (!(p ... op;\n  }!(prop in arg)(prop in arg)prop in argreturn arg[prop];/home/insomnia/repos/mongoose/lib/helpers/schema/idGetter.js ensure the documents receive an id getter unless disabled// ensu ... isabled
 * Returns this documents _id cast to a string.
 * @api private
 addIdGetterautoIdGetter'id'idGetterReturns this documents _id cast to a string.{\n  //  ... hema;\n}const a ... ons.id;autoIdG ... ions.id!schema ... ions.id!schema ... ['_id']!schema.paths['id']schema.paths['id']if (!au ... ma;\n  }!autoIdGetterschema. ... ases.idschema.aliases.idschema. ... etter);schema. ... Getter)schema. ... d').getschema.virtual('id')schema.virtualthis._id != null/home/insomnia/repos/mongoose/lib/helpers/schema/merge.jss2skipConflictingPathspathsToAdd_isMerging{\n  con ... lse);\n}const p ... .tree);paths = ... 2.tree)Object.keys(s2.tree)s2.treeconst p ... d = {};pathsToAdd = {}{\n    i ... y];\n  }skipCon ... s[key])(s1.pat ... s[key])s1.path ... hs[key]s1.path ... ed[key]s1.paths[key]s1.pathss1.nested[key]s1.nesteds1.sing ... hs[key]s1.singleNestedPathspathsTo ... e[key];pathsTo ... ee[key]pathsToAdd[key]s2.tree[key]s1.opti ... = true;s1.opti ...  = trues1.opti ... Mergings1.optionss1.add( ...  null);s1.add( ... , null)s1.adddelete  ... erging;delete  ... Mergings1.call ... Queue);s1.call ... lQueue)s1.callQueues1.callQueue.concats2.callQueues1.meth ... thods);s1.meth ... ethods)s1.methods2.methodss1.stat ... atics);s1.stat ... tatics)s1.statics2.staticss2._use ... Optionsconst [ ...  value][option, value]if (!(o ... ;\n    }!(optio ... ptions)(option ... ptions)option  ... Optionss1._use ... Optionss1.set( ... value);s1.set( ...  value)s1.sets2.queryconst query{\n    s ... y];\n  }s1.quer ... query];s1.quer ... [query]s1.query[query]s1.querys2.query[query]s2.virtualss1.virt ... lone();s1.virt ... clone()s1.virtuals[virtual]s1.virtualss2.virt ... clone()s2.virt ... ].clones2.virtuals[virtual]s1._ind ... || []);s1._ind ...  || [])s1._indexess1._indexes.concats2._indexes || []s2._indexess1.s.ho ... false);s1.s.ho ...  false)s1.s.hooks.merges1.s.hookss1.ss2.s.hookss2.s/home/insomnia/repos/mongoose/lib/helpers/schematype/handleImmutable.js/home/insomnia/repos/mongoose/lib/helpers/schematype$immutablecreateImmutableSetterimmutableSetter_priorVal_immutable_value'Path `''` is immutable ''and strict mode is set to throw.'if (sch ... er;\n  }{\n    s ... r);\n  }schemat ... table);schemat ... utable)schemat ... eSettercreateI ... utable)createI ... eSetterschematype.pathschemat ... etter);schemat ... Setter)schematype.set{\n    s ... er;\n  }schematype.settersschemat ...  filterfn => f ... eSetterfn !==  ... eSetterdelete  ... Setter;delete  ... eSetterreturn  ... e;\n  };this == ... == nullthis == nullthis.$__ == nullthis.isNewconst _ ... utable;_immuta ... mutabletypeof  ... mutableimmutab ... , this)!_immutable_value  ... e(path)this.$_ ...  _valuev !== _valuethrow n ...  true);new Str ... , true)'Path ` ... throw.''Path ` ... table ''Path `' + pathPath `` is immutable 'and st ... throw.'and strict mode is set to throw.return _value;/home/insomnia/repos/mongoose/lib/helpers/setDefaultsOnInsert.js
 * Applies defaults to update and findOneAndUpdate operations.
 *
 * @param {Object} filter
 * @param {Schema} schema
 * @param {Object} castedDoc
 * @param {Object} options
 * @method setDefaultsOnInsert
 * @api private
  Defaults will be set later, since we're overwriting we'll cast// Defa ... ll cast the whole update to a document// the  ... ocument Skip single nested paths if underneath a map// Skip ... h a map Skip defaults underneath maps. We should never do `$setOnInsert` on a path with `$*`// Skip ... th `$*` Is any parent path of `path` modified?// Is a ... dified? Is any child of `path` modified?'./common''./get'castedDocupdatedKeysupdatedValueshasDollarUpdateconditionKeysnumConditionKeysmodifiedKeysparentPathApplies defaults to update and findOneAndUpdate operations.const m ... dPaths;modifie ... edPathsrequire('./common')./common/commonrequire('./get')./getmodule. ... Doc;\n};module. ... dDoc;\n}{\n  opt ... dDoc;\n}options ... nInsertschema. ... nInsertschema.base.optionsif (!op ... oc;\n  }!option ... = false!options.upsertreturn castedDoc;castedDoc || {}const u ... s = {};updatedKeys = {}updatedValues = {}const modified = {};modified = {}hasDoll ... = falsekeys[i] ... th('$')keys[i].startsWithmodifie ... ified);modifie ... dified)castedDoc[keys[i]]hasDoll ... = true;hasDoll ...  = trueif (!ha ... d);\n  }!hasDollarUpdate{\n    m ... d);\n  }const p ... ilter);paths = ... filter)numPath ... .lengthfor (le ... ue;\n  }conditi ... r[path]filter[path]if (con ... }\n    }conditi ... object'typeof conditionconst c ... ition);conditi ... dition)Object. ... dition)numCond ... .lengthconditionKeys.lengthj < numConditionKeysconditi ... th('$')conditi ... rtsWithconditionKeys[j]hasDollarKey = true;hasDollarKey = trueupdated ... = true;updated ...  = trueupdatedKeys[path]modifie ... = true;modifie ...  = truemodified[path]options ... rUpdateoptions ... erwriteoptions.overwrite{\n    / ... oc;\n  }schema. ... ;\n  });schema. ... f;\n  })functio ... ef;\n  }{\n    / ... ef;\n  }schemaT ... ns.autoschemaT ... = '_id'schemaType.optionsdef = s ... , true)schemaT ... Defaultif (isM ... ;\n    }isModif ... , path)schemaT ... s('$*')schemaT ... ncludesschemaT ... tPath()schemaType.splitPathcastedD ...  || {};castedD ... c || {}castedD ... t || {}castedD ... nInsertget(cas ... == nullget(castedDoc, path)castedD ...  = def;castedD ... ] = defcastedD ... t[path]updated ...  = def;updated ... ] = defupdatedValues[path]sp = path.split('.')let cur = sp[0];cur = sp[0]sp[0]i < sp.lengthmodified[cur]cur += '.' + sp[i];cur += '.' + sp[i]'.' + sp[i]const m ... ified);Object. ... dified)modifiedKeys.lengthparentP ... h + '.'modifie ... entPathmodifie ... th + 1)modifiedPath.slicepath.length + 1/home/insomnia/repos/mongoose/lib/helpers/specialProperties.js'__proto__''prototype'module. ... ype']);module. ... type'])new Set ... type'])['__pro ... otype']/home/insomnia/repos/mongoose/lib/helpers/symbols.js'mongoose#Array#atomicsBackup''mongoose#Array#_atomics'arrayParentSymbol'mongoose#Array#_parent'arrayPathSymbol'mongoose#Array#_path'arraySchemaSymbol'mongoose#Array#_schema''mongoose#documentArrayParent'documentIsSelected'mongoose#Document#isSelected''mongoose#Document#isModified''mongoose#Document#modifiedPaths''mongoose#Document#schema''mongoose#Document#get''mongoose#Model'objectIdSymbol'mongoose#ObjectId''mongoose#PopulateOptions#Model''mongoose#schemaType''mongoose#ClientSession#newDocuments''mongoose#Document#scope'validatorErrorSymbol'mongoose#validatorError'exports ... ckup');exports ... ackup')exports ... pSymbolSymbol( ... ackup')'mongoo ... Backup'mongoose#Array#atomicsBackupexports ... mics');exports ... omics')exports ... sSymbolSymbol( ... omics')'mongoo ... tomics'mongoose#Array#_atomicsexports ... rent');exports ... arent')exports ... tSymbolSymbol( ... arent')'mongoo ... parent'mongoose#Array#_parentexports ... path');exports ... _path')exports ... hSymbolSymbol( ... _path')'mongoo ... #_path'mongoose#Array#_pathexports ... aSymbolSymbol( ... chema')'mongoo ... schema'mongoose#Array#_schemaexports ... yParent'mongoo ... Parent'mongoose#documentArrayParentexports ... cted');exports ... ected')exports ... electedSymbol( ... ected')'mongoo ... lected'mongoose#Document#isSelectedexports ... fied');exports ... ified')exports ... odifiedSymbol( ... ified')'mongoo ... dified'mongoose#Document#isModifiedexports ... aths');exports ... Paths')Symbol( ... Paths')'mongoo ... dPaths'mongoose#Document#modifiedPathsmongoose#Document#schemaexports ... #get');exports ... t#get')exports.getSymbolSymbol( ... t#get')'mongoo ... nt#get'mongoose#Document#getexports ... odel');exports ... Model')exports.modelSymbolSymbol( ... Model')mongoose#Modelexports ... ctId');exports ... ectId')Symbol( ... ectId')mongoose#ObjectIdexports ... lSymbol'mongoo ... #Model'mongoose#PopulateOptions#Modelexports ... aType')exports ... eSymbolSymbol( ... aType')'mongoo ... maType'mongoose#schemaTypeexports ... ents');exports ... ments')exports ... cumentsSymbol( ... ments')'mongoo ... uments'mongoose#ClientSession#newDocumentsexports ... cope');exports ... scope')exports.scopeSymbolSymbol( ... scope')'mongoo ... #scope'mongoose#Document#scopeexports ... rror');exports ... Error')exports ... rSymbolSymbol( ... Error')'mongoo ... rError'mongoose#validatorError/home/insomnia/repos/mongoose/lib/helpers/timers.jsexports ... imeout;exports ... Timeoutexports.setTimeout/home/insomnia/repos/mongoose/lib/helpers/timestamps/setDocumentTimestamps.js/home/insomnia/repos/mongoose/lib/helpers/timestampssetDocumentTimestampstimestampOptionskipUpdatedAtskipCreatedAtdefaultTimestampsetDocu ... estampsskipUpd ... = falsetimesta ... = falsetimesta ... != nulltimesta ... datedAtskipCre ... = falsetimesta ... eatedAtconst d ... .now();default ... e.now()current ... e.now()doc.own ... e.now()doc.own ... ase.nowdoc.own ... or.basedoc.own ... tructordoc.ownerDocument()doc.ownerDocumentif (!sk ... });\n  }!skipCr ... atedAt)!skipCr ... eatedAt!skipCr ... cument)!skipCreatedAt(doc.is ... cument)doc.isN ... ocumentdoc.isNew!doc.$_ ... atedAt)doc.$__ ... atedAt)doc.$se ... rue });doc.$se ... true }){ overw ...  true }if (!sk ... s);\n  }!skipUp ... fied())!skipUp ... datedAt!skipUpdatedAt(doc.is ... fied())doc.isN ... ified()doc.$isModified(){\n    l ... s);\n  }let ts  ... estamp;ts = de ... mestampdoc.isN ... != nullcreatedAt != nullts = do ... tedAt);ts = do ... atedAt)doc.$se ... t, ts);doc.$se ... At, ts)/home/insomnia/repos/mongoose/lib/helpers/timestamps/setupTimestamps.js Replacing with null update should still trigger timestamps// Repl ... estamps'./setDocumentTimestamps'replaceOpssetupTimestampschildHasTimestampwithTimestamp'currentTime'schemaAdditionsbaseImmutableCreatedAt'timestamps.createdAt.immutable'timestampsPreSave'$__.saveOptions.timestamps'_setTimestampsOnUpdategetUpdatesetUpdateconst s ... amps');setDocu ... tamps')require ... tamps')'./setD ... stamps'./setDocumentTimestamps/setDocumentTimestampsconst r ... ce'\n]);replace ... ace'\n])new Set ... ace'\n])[\n  're ... lace'\n]const c ... stamp);childHa ... estamp)schema. ... estamp)schema. ... as.findfunctio ... ts;\n  }{\n    c ... ts;\n  }const t ... stamps;ts = s. ... estampss.schem ... estampss.schema.optionss.schemareturn !!ts;!!ts!tsif (!ti ... rn;\n  }!timest ... mestamp!timestamps!childHasTimestampconst c ...   null;current ...    nulltimesta ...    nulltimesta ... tTime')timestamps != nulltimesta ... ropertytimesta ... entTimeconst s ... s = {};schemaAdditions = {}schema. ... edAt };schema. ... tedAt }schema.$timestamps{ creat ... tedAt }createdAt: createdAtupdatedAt: updatedAtif (cre ...  };\n  }created ... atedAt]!schema ... atedAt]schema. ... atedAt]const b ... : null;baseImm ...  : nullbaseImm ... eatedAtschema. ...  : nullschema.base != nullschema. ... table')schema.base.get'timest ... utable'timestamps.createdAt.immutableconst i ... : true;immutab ...  : truebaseImm ...  : truebaseImm ... != nullschemaA ... able };schemaA ... table }schemaA ... atedAt]{ [sche ... table }[schema ... ]: Dateschema. ...  'type'if (upd ... te;\n  }updated ... atedAt]{\n    s ... te;\n  }schemaA ... = Date;schemaA ...  = Dateschema. ... itions)schema. ... );\n  })schema.preconst t ... amps');timesta ... tamps')get(thi ... tamps')'$__.sa ... stamps'$__.saveOptions.timestampssetDocu ... tedAt);setDocu ... atedAt)schema. ... s;\n  };schema. ... is;\n  }const t ... .now();ts = cu ... e.now()this.co ... e.now()this.co ... ase.nowthis.co ... or.baseif (cre ... ;\n    }created ... atedAt)!this.get(createdAt)this.get(createdAt)this.$s ... t, ts);this.$s ... At, ts)if (upd ... ;\n    }updated ... atedAt)!this.get(updatedAt)this.get(updatedAt)subdoc. ... estampssubdoc. ... amps();subdoc. ... tamps()_setTim ... = true;_setTim ...  = true_setTim ... leware]_setTim ... nUpdateconst o ... alse };opts =  ... false }{ query ... false }query: truemodel: falseschema. ... pdate);schema. ... Update)now = c ... e.now()this.mo ... e.now()this.model.base.nowthis.model.baseif (rep ... ;\n    }replace ... == nullreplace ... his.op)replaceOps.hasthis.opthis.ge ... == nullthis.getUpdate()this.getUpdatethis.setUpdate({});this.setUpdate({})this.setUpdateapplyTi ... \n    );applyTi ... )\n    )this.model.schema/home/insomnia/repos/mongoose/lib/helpers/topology/allServersUnknown.js/home/insomnia/repos/mongoose/lib/helpers/topologytopologyDescription'TopologyDescription'servermodule. ... n');\n};module. ... wn');\n}functio ... wn');\n}{\n  if  ... wn');\n}if (get ... se;\n  }getCons ... iption'getCons ... iption)'Topolo ... iption'TopologyDescriptionconst s ... ues());servers ... lues())topolog ... alues()topolog ... .valuestopolog ... serversreturn  ... nown');servers ... known')servers.length > 0servers.lengthservers.everyserver  ... nknown'server. ... nknown'server.type/home/insomnia/repos/mongoose/lib/helpers/topology/isAtlas.js
 * @typedef { import('mongodb').TopologyDescription } TopologyDescription
 
 * Checks if topologyDescription contains servers connected to an atlas instance
 *
 * @param  {TopologyDescription} topologyDescription
 * @returns {boolean}
 '.mongodb.net'27017Checks if topologyDescription contains servers connected to an atlas instanceif (top ... se;\n  }topolog ... e === 0topolog ... rs.sizeconst serverif (ser ... ;\n    }server. ... = 27017server. ... = falseserver. ... b.net')server.host.endsWithserver.host.mongodb.netserver.port/home/insomnia/repos/mongoose/lib/helpers/topology/isSSLError.jsnonSSLMessage'Client network socket disconnected before secure TLS ''connection was established'descriptionsdescrconst n ... ished';nonSSLM ... lished''Client ... lished''Client ... e TLS 'Client network socket disconnected before secure TLS 'connec ... lished'connection was establishedClient network socket disconnected before secure TLS connection was establishedmodule. ... -1);\n};module. ...  -1);\n}functio ...  -1);\n}{\n  if  ...  -1);\n}const d ... ues());descrip ... lues())return  ... == -1);descrip ... !== -1)descrip ... gth > 0descriptions.lengthdescriptions.everydescr = ...  !== -1descr.e ...  !== -1descr.errordescr.e ... essage)descr.e ... indexOfdescr.error.message/home/insomnia/repos/mongoose/lib/helpers/update/applyTimestampsToChildren.js/home/insomnia/repos/mongoose/lib/helpers/update Replace positional operator `$` and array filters `$[]` and `$[.*]`// Repl ... `$[.*]` Single nested is easy// Sing ... is easy_applyTimestampToUpdateOperatorapplyTimestampsToUpdateKeyupdateKeys/\.\$\./i/.\$$/applyTimestampsToDocumentArrayapplyTimestampsToSingleNestedkeyToSearchparentSchemaTypesparentSchemaTypechildPathmodule. ... ildren;module. ... hildrenconst k ... pdate);keys =  ... update)Object.keys(update)const h ... = '$');hasDoll ... == '$')keys.so ... == '$')keys.someif (has ...   }\n  }update.$push_applyT ... $push);_applyT ... .$push)_applyT ... peratorupdate.$addToSet_applyT ... ToSet);_applyT ... dToSet)if (upd ... }\n    }update.$set != nullupdate.$setconst k ... .$set);keys =  ... e.$set)Object. ... e.$set)applyTi ... , now);applyTi ... t, now)applyTi ... dateKeyupdate. ... != nullupdate.$setOnInsertconst k ... nsert);keys =  ... Insert)Object. ... Insert)const u ... = '$');updateK ... == '$')key =>  ... !== '$'key[0] !== '$'for (co ... w);\n  }{\n    a ... w);\n  }applyTi ... e, now)Object.keys(op)const $ ... , ''));$path = ... /, ''))schema. ... /, ''))key.rep ... $/, '')key.rep ... replacekey.rep ... i, '.')key.replace\.\$\..\$$if (op[ ...       }op[key] ... estampsop[key] ... ntArrayop[key] ...   $pathop[key]$path.$ ... ntArray$path.s ... estamps$path.schema.options$path.schematimesta ... estampsop[key].$eachop[key] ...     });op[key] ...      })op[key] ... forEachif (upd ...       }updatedAt != nullsubdoc[ ...  = now;subdoc[ ... ] = nowsubdoc[updatedAt]if (cre ...       }subdoc[createdAt]op[key] ...  = now;op[key] ... ] = nowop[key][updatedAt]op[key][createdAt]applyTi ... ntArrayschemat ... estampsfor (le ... a);\n  }{\n    i ... a);\n  }arr[i][ ...  = now;arr[i][ ... ] = nowarr[i][updatedAt]arr[i][createdAt]applyTi ... eNested{\n  con ... ema);\n}{\n    a ... rn;\n  }if (upd ... ow;\n  }{\n    s ... ow;\n  }if (cre ... ow;\n  }const k ... s(key);keyToSe ... rs(key)cleanPo ... rs(key)const p ... earch);path =  ... Search)schema. ... Search)if (!pa ... rn;\n  }parentS ... es = []keyToSe ... it('.')keyToSearch.spliti > 0i = pie ... gth - 1const s ... ('.'));s = sch ... n('.'))schema. ... n('.'))pieces. ... i).joinpieces.slice(0, i)if (s ! ... ;\n    }s != nu ... Nested)s != null(s.$isM ... Nested)s.$isMo ... eNesteds.$isMo ... ntArrays.$isSingleNestedparentS ... : s });parentS ... e: s })parentS ... es.push{ paren ... pe: s }parentP ... in('.')key.spl ... in('.')key.spl ... i).joinkey.spl ... e(0, i)key.split('.').sliceparentSchemaType: sArray.i ... e[key])applyTi ... h, now)if (upd ...   }\n  }update[ ... eNestedparentS ... gth > 0parentS ... .lengthconst p ... ntPath;parentP ... entPathitem.parentPathconst p ... maType;parentS ... emaTypeitem.pa ... emaTypeparentS ... estampsparentS ... optionsparentS ... .schemaif (!ti ...       }!timest ... == nullupdatedAt == nullparentS ... eNestedupdate[ ...  = now;update[ ... ] = nowupdate[ ... atedAt]parentP ... datedAtparentPath + '.'parentS ... ntArraylet chi ... h + 1);childPa ... th + 1)key.sub ... th + 1)key.substringparentP ... gth + 1parentPath.lengthif (/^\ ...       }/^\d+$/ ... ldPath)/^\d+$/.testupdate[ ... ldPath]parentP ... ildPathchildPa ... Of('.')childPath.indexOfchildPa ... ldPath;childPa ... ildPathfirstDo ... ildPathfirstDot !== -1childPa ... rstDot)childPath.substringpath.sc ... te[key]path.sc ...  schemapath.schema != nullpath.sc ... estampspath.schema.optionsif (!ti ... ;\n    }/home/insomnia/repos/mongoose/lib/helpers/update/applyTimestampsToUpdate.js Support skipping timestamps at the query level, see gh-6980// Supp ... gh-6980 Update with aggregation pipeline// Upda ... ipelinecurrentUpdateisReplace_updates'timestamps'timestampSetmodule. ... Update;module. ... oUpdatefunctio ... ates;\n}{\n  con ... ates;\n}const u ... Update;updates ... tUpdatelet _up ... pdates;_updates = updatesconst t ...  true);timesta ... , true)get(opt ... , true)if (!ti ... te;\n  }updates == nullreturn  ... Update;timestamps.createdAttimestamps.updatedAtif (isR ... es;\n  }{\n    i ... es;\n  }current ... te.$setcurrentUpdate.$setcurrent ... e.$set;updates.$set = {};updates.$set = {}updates.$set_update ... s.$set;_update ... es.$setif (!sk ... ;\n    }!skipUp ... atedAt]!curren ... atedAt]current ... atedAt]_update ...  = now;_update ... ] = now_updates[updatedAt]!skipCr ... atedAt]_updates[createdAt]return updates;current ...  || {};current ... e || {}currentUpdate || {}if (Arr ... es;\n  }Array.i ... pdates){\n    / ... es;\n  }updates ... w } });updates ... ow } })updates.push{ $set: ... now } }$set: { ... : now }{ [updatedAt]: now }[updatedAt]: nowupdates ...  || {};updates ... t || {}updates.$set || {}if (!sk ...   }\n  }!skipUp ... tedAt])(!curre ... tedAt])!curren ... entDatecurrent ... entDatetimestampSet = falseupdated ...  !== -1updated ... Of('.')updatedAt.indexOfupdatedAt.split('.')updatedAt.splitremnant ... in('.')pieces.slice(-i)-istart = ... in('.')pieces.slice(0, -i)current ... != nullcurrentUpdate[start]current ...  = now;current ... ] = nowcurrent ... emnant]timestampSet = true;timestampSet = truecurrent ... [start]!timestampSetupdates ...  = now;updates ... ] = nowupdates ... atedAt]updates ... atedAt)updates ... ropertydelete  ... tedAt];delete  ... atedAt]updates[updatedAt]if (cre ... }\n    }created ...  !== -1created ... Of('.')createdAt.indexOfcreatedAt.split('.')createdAt.splitupdates.$setOnInsertif (Obj ... et;\n  }Object. ... s.$set){\n    d ... et;\n  }delete updates.$set;delete updates.$set/home/insomnia/repos/mongoose/lib/helpers/update/castArrayFilters.js Map to store discriminator values for embedded documents in the array filters.// Map  ... ilters. This is used to handle cases where array filters target specific embedded document types.// This ...  types. If there are multiple array filters in the path being updated, make sure// If t ... ke sure to replace them so we can get the schema path.// to r ... a path. For now, treat `strictQuery = true` and `strictQuery = 'throw'` as// For  ... ow'` as equivalent for casting array filters. `strictQuery = true` doesn't// equi ... doesn't quite work in this context because we never want to silently strip out// quit ... rip out array filters, even if the path isn't in the schema.// arra ... schema.'../query/castFilterPath''../schema/getPath''./updatedPathsByArrayFilter'castArrayFilters_castArrayFiltersGot null array filter in dotfilterWildcardPathbaseFilterPathbaseSchematypefilterBaseSchemafilterPathRelativeToBasefilterPathCould not find path "" in schemaconst c ... Path');castFil ... rPath')'../que ... erPath'../query/castFilterPath/query/castFilterPathgetPath ... tPath')require ... tPath')../schema/getPath/schema/getPath'./upda ... Filter'./updatedPathsByArrayFilter/updatedPathsByArrayFilter{\n  con ... ery);\n}const a ... ilters;query.o ... Filtersconst u ... date();update  ... pdate()query.getUpdate()query.getUpdatequery.schemalet str ... strict;strictQ ... .strictif (que ... ct;\n  }query._ ... != nullquery._ ... .strict{\n    s ... ct;\n  }strictQ ... strict;if (que ... ry;\n  }query.m ... != nullquery.m ... ctQueryquery.m ... optionsquery.model.base{\n    s ... ry;\n  }strictQ ... tQuery;strictQ ... ctQueryif (sch ... ry;\n  }schema. ... ctQueryquery._ ... ctQuery_castAr ... query);_castAr ...  query)!Array. ... ilters)const d ... p = {};discrim ... ap = {}const filterif (fil ... ;\n    }throw n ... ers}`);new Err ... ters}`)`Got nu ... lters}`Got nul ... ter in const k ...  null);keys =  ... = null)Object. ... = null)key =>  ... != nullfilter[key] != nullkeys.length === 0const f ... eys[0];firstKey = keys[0]if (fir ... ;\n    }firstKe ... = '$or'firstKey === '$and'firstKey === '$or'const d ... f('.');dot = f ... Of('.')firstKe ... Of('.')firstKey.indexOfconst f ... , dot);filterW ... 0, dot)dot === ... 0, dot)dot === -1firstKe ... 0, dot)firstKey.substringupdated ... == nullupdated ... rdPath]const b ... \n    );baseFil ... ]\n    )cleanPo ... ]\n    )const b ... ueMap);baseSch ... lueMap)getPath ... lueMap)let fil ... : null;filterB ...  : nullbaseSch ...  : nullbaseSch ... != nullbaseSch ... .schemafilterB ... torKey]filterB ... != nullfilterB ... inatorsfilterW ... atorKeyfilterW ... h + '.'filterB ... atorKeyfilterB ... optionsfilterB ... Schema;filterB ... eSchemafilterB ... orKey]]discrim ... orKey];updated ... er[key]dot = k ... Of('.')let fil ... g(dot);filterP ... ng(dot)filterP ... eToBasedot === ... ng(dot)key.substring(dot)filterP ... == nullfilterB ... == nullfilterP ... oBase);filterP ... ToBase)cleanPo ... ToBase)schemat ... ueMap);schemat ... lueMap)!strictQueryconst f ... ToBase;baseFil ...  + '.0'baseFil ... eToBasethrow n ... hema`);new Err ... chema`)`Could  ... schema`Could n ...  path "typeof filter[key]filter[ ... [key]);filter[ ... r[key])castFil ... r[key])schemat ... r[key])/home/insomnia/repos/mongoose/lib/helpers/update/decorateUpdateWithVersionKey.js
 * Decorate the update with a version key, if necessary
 * @api private
 './modifiedPaths'updatedPathsDecorate the update with a version key, if necessaryconst m ... aths');modifie ... Paths')./modifiedPaths/modifiedPathsif (!ve ... rn;\n  }!versio ...  false)!versionKey!(optio ...  false)(option ...  false)options ... .upsertmodifie ... update)if (!up ...   }\n  }!update ... ionKey]updated ... ionKey]update[ ... y] = 0;update[ ... ey] = 0update[versionKey]if (!up ...       }!update.$setOnInsertupdate. ... t = {};update. ... rt = {}update. ... y] = 0;update. ... ey] = 0update. ... ionKey]/home/insomnia/repos/mongoose/lib/helpers/update/modifiedPaths.js
 * Given an update document with potential update operators (`$set`, etc.)
 * returns an object whose keys are the directly modified paths.
 *
 * If there are any top-level keys that don't start with `$`, we assume those
 * will get wrapped in a `$set`. The Mongoose Query is responsible for wrapping
 * top-level keys in `$set`.
 *
 * @param {Object} update
 * @return {Object} modified
 _modifiedPaths'../common'withoutDollarKeysGiven an update document with potential update operators (`$set`, etc.)
returns an object whose keys are the directly modified paths.

If there are any top-level keys that don't start with `$`, we assume those
will get wrapped in a `$set`. The Mongoose Query is responsible for wrapping
top-level keys in `$set`.const _ ... dPaths;_modifi ... edPathsrequire('../common')../commonmodule. ... res;\n};module. ...  res;\n}{\n  con ...  res;\n}const res = {};res = {}const w ... s = {};without ... ys = {}_modifi ... , res);_modifi ... ', res)without ... e[key];without ... te[key]without ... ys[key]/home/insomnia/repos/mongoose/lib/helpers/update/moveImmutableProperties.js
 * Given an update, move all $set on immutable properties to $setOnInsert.
 * This should only be called for upserts, because $setOnInsert bypasses the
 * strictness check for immutable properties.
 isDollarKey_walkUpdatePath'options.immutable'Given an update, move all $set on immutable properties to $setOnInsert.
This should only be called for upserts, because $setOnInsert bypasses the
strictness check for immutable properties.module. ... \n\n  }\n}functio ... \n\n  }\n}{\n  if  ... \n\n  }\n}for (co ...  }\n\n  }{\n    c ...  }\n\n  }const i ... h('$');isDolla ... th('$')key === '$set'const u ... [key]);updated ... e[key])Object. ... e[key])_walkUp ... , ctx);_walkUp ... e, ctx)!isDollarKeylet imm ...  null);immutab ... , null)options.immutableif (imm ... rn;\n  }immutable == nullif (!im ... rn;\n  }update. ...  || {};update. ... t || {}update. ... [path];update. ... p[path]update. ... t[path]op[path]delete op[path];delete op[path]/home/insomnia/repos/mongoose/lib/helpers/update/removeUnusedArrayFilters.js
 * MongoDB throws an error if there's unused array filters. That is, if `options.arrayFilters` defines
 * a filter, but none of the `update` keys use it. This should be enough to filter out all unused array
 * filters.
 removeUnusedArrayFilters_checkSingleFilterKeyarrayFilter'$['MongoDB throws an error if there's unused array filters. That is, if `options.arrayFilters` defines
a filter, but none of the `update` keys use it. This should be enough to filter out all unused array
filters.removeU ... Filtersconst u ... ), []);updateK ... r), [])Object. ... r), [])Object. ... [key]))key =>  ... e[key])(cur, a ... at(arr)cur.concat(arr)cur.concatarrayFi ... );\n  })arrayFilters.filterobj =>  ... s);\n  }return  ... eKeys);_checkS ... teKeys)_checkS ... lterKeyconst f ... er)[0];firstKe ... ter)[0]Object. ... ter)[0]if (fir ... ll;\n  }{\n    i ... ll;\n  }!Array. ... stKey])Array.i ... stKey])arrayFi ... rstKey]arrayFi ... != nullarrayFi ... eKeys))arrayFi ... y].findfilter  ... teKeys)const a ... stDot);arrayFi ... rstDot)firstKe ... rstDot)firstKey.sliceupdateK ... != nullupdateK ... + ']'))updateKeys.findkey =>  ...  + ']')key.inc ...  + ']')key.includes'$[' +  ... y + ']''$[' +  ... lterKey$[/home/insomnia/repos/mongoose/lib/helpers/update/updatedPathsByArrayFilter.js/\$\[[^\]]+\]/gfirstMatchPath '' contains the same array filter multiple timesmodule. ... {});\n};module. ...  {});\n}{\n  if  ...  {});\n}if (upd ... {};\n  }{\n    return {};\n  }return {};return  ... }, {});Object. ...  }, {})(cur, p ... ur;\n  }const m ... +\]/g);matches ... ]+\]/g)path.ma ... ]+\]/g)path.match\$\[[^\]]+\][^\]]+matches == nullconst matchconst f ... match);firstMa ... (match)path.indexOf(match)if (fir ...       }path.la ... (match)path.lastIndexOfthrow n ... imes`);new Err ... times`)`Path ' ...  times`' conta ... e timescur[mat ... , '0');cur[mat ... g, '0')cur[mat ... h - 1)]match.s ... th - 1)match.substringmatch.length - 1path.\n  ... g, '0')path.\n  ... ch - 1)path.\n  ... bstringfirstMatch - 1/home/insomnia/repos/mongoose/lib/helpers/updateValidators.js
 * Applies validators and defaults to update and findOneAndUpdate operations,
 * specifically passing a null doc as `this` to validators and defaults
 *
 * @param {Query} query
 * @param {Schema} schema
 * @param {Object} castedDoc
 * @param {Object} options
 * @method runValidatorsOnUpdate
 * @api private
  With `$pull` we might flatten `$in`. Skip stuff nested under `$in`// With ... r `$in` for the rest of the logic, it will get handled later.// for  ...  later.'../error/validation''./schema/cleanPositionalOperators'isPullarrayAtomicUpdatesupdatedPathnumUpdatesvalidatorsToExecutealreadyValidatedschemaPath'.$in.'updateValidatorstoreSubdocValidationErrorarrayUpdatesarrayUpdategetValidationCallback'query'atomicUpdatenumValidatorsvalidatorApplies validators and defaults to update and findOneAndUpdate operations,
specifically passing a null doc as `this` to validators and defaultsrunValidatorsOnUpdate'../err ... dation'../error/validation'./sche ... rators'./schema/cleanPositionalOperatorslet upd ... s = {};const isPull = {};isPull = {}const a ... s = {};arrayAt ... es = {}let currentUpdate;if (key ... }\n    }keys[i] ... dToSet'keys[i] === '$push'const _ ... s[i]]);_keys = ... ys[i]])Object. ... ys[i]])ii < _keys.lengthcurrent ... s[ii]];current ... ys[ii]]castedD ... ys[ii]]_keys[ii]current ... e.$eachcurrentUpdate.$eacharrayAt ... $each);arrayAt ... .$each)arrayAt ... ys[ii]](arrayA ... .$each)(arrayA ...  concat(arrayA ...  || [])arrayAt ... ] || []arrayAt ... date]);arrayAt ... pdate])(arrayA ... pdate])[currentUpdate]const p ... (flat);paths = ... s(flat)j < numPathsconst u ... hs[j]);updated ... ths[j])cleanPo ... ths[j])paths[j]updated ... es('$')updatedPath.includeskey === ... ullAll'key === ... '$pull'key === ... Insert'key === '$pull'key === '$pullAll'updated ... hs[j]];updated ... ths[j]]updated ... edPath]flat[paths[j]]isPull[ ... llAll';isPull[ ... ullAll'isPull[updatedPath]key === '$unset'updated ... efined;updated ... definedif (!ha ... s);\n  }updated ... chema);updated ... schema)updated ... alues);updated ... Values)Object. ... Values)const u ... alues);updates ... Values)numUpda ... .lengthupdates.lengthconst v ... e = [];validat ... te = []const a ... d = [];already ... ed = []const c ...  query;context = queryconst s ... es[i]);schemaP ... tes[i])schema. ... tes[i])updates[i]schemaPath == nullschemaP ... ates[i]schemaP ... 'Mixed'schemaPath.instanceschemaPath.pathif (v & ... }\n    }v && Ar ... (v.$in)Array.isArray(v.$in)v.$inv.$in.f ...     });v.$in.f ...      })v.$in.forEachvalidat ...     });validat ...      })validat ... te.pushschemaP ... rue });schemaP ... true })schemaP ... alidateerr.pat ... .' + i;err.pat ... n.' + ierr.pathupdates ... n.' + iupdates[i] + '.$in.'.$in.validat ... h(err);validat ... sh(err){ updat ...  true }updateV ... r: trueisPull[ ... seArrayisPull[updates[i]]schemaP ... seArrayschemaP ... != nullschemaP ... Elementalready ... es[i]);already ... tes[i])already ... ed.pushconst _ ... s[key];_err =  ... rs[key]_err.pa ...  + key;_err.pa ... ' + key_err.pathupdates ... ' + keyupdates[i] + '.'validat ... (_err);validat ... h(_err)err.pat ... tes[i];err.pat ... ates[i]updates ...  + '.')updates ... rtsWithschemaP ... eNestedschemaP ... onErrorschemaP ... = falseschemaPath.schemaschemaP ... optionsstoreSu ... onErrorfor (i  ... ]);\n  }i < numUpdatesiter(i, ... s[i]]);iter(i, ... es[i]])updated ... tes[i]]const a ... dates);arrayUp ... pdates)Object. ... pdates)const arrayUpdatelet sch ... pdate);schemaP ... Update)schemaP ... ntArrayschemaP ...  null);schemaP ... : null)arrayAt ... Update]getVali ... llback)getVali ... allbackoptions ... 'query'options.contextschemaP ...  '.0');schemaP ... + '.0')schema. ... + '.0')arrayUpdate + '.0'const atomicUpdateif (cal ... rn;\n  }{\n    l ... rn;\n  }let num ... length;numVali ... .lengthif (num ... ;\n    }numValidators === 0_done(callback)const validatorif (--n ...       }--numValidators <= 0--numValidators_done(callback);return  ...  }\n  };functio ... l);\n  }const e ... (null);err = n ... r(null)new Val ... r(null)const v ... onErrorerr.add ... Error);err.add ... nError)err.addErrorvalidationError.patherr.pat ... Update;err.pat ... yUpdate/home/insomnia/repos/mongoose/lib/index.jsmongodbDriver'./drivers/node-mongodb-native''./mongoose'const m ... tive');mongodb ... ative')require ... ative')'./driv ... native'./drivers/node-mongodb-native/drivers/node-mongodb-nativerequire ... river);require ... Driver)require ... goose')./mongoose/mongoosemongoos ... river);mongoos ... Driver)mongoos ... godb');mongoos ... ngodb')mongoos ... e.mongo/home/insomnia/repos/mongoose/lib/internal.js!
 * Dependencies
  what we want to populate in this doc// what ... his doc the _ids that have been populated
 * If `false`, this document was not the result of population.
 * If `true`, this document is a populated doc underneath another doc
 * If an object, this document is a populated doc and the `value` property of the
 * object contains the original depopulated value.
 StateMachine'./stateMachine'ActiveRosterctor'ignore'shardvalsaveErrorremovinginsertingsavingIf `false`, this document was not the result of population.
If `true`, this document is a populated doc underneath another doc
If an object, this document is a populated doc and the `value` property of the
object contains the original depopulated value.const S ... hine');StateMa ... chine')require ... chine')./stateMachine/stateMachineconst A ... nore');ActiveR ... gnore')StateMa ... gnore')StateMachine.ctormodule. ... lCache;module. ... alCacheexports ... alCachefunctio ... er();\n}{\n  thi ... er();\n}this.ac ... ster();this.ac ... oster()this.activePathsnew ActiveRoster()Interna ... = true;Interna ...  = trueInterna ... ictModeInterna ... ototypeInterna ... efined;Interna ... definedInterna ... ullPathInterna ... electedInterna ... hardvalInterna ... veErrorInterna ... onErrorInterna ... ocPathsInterna ... emovingInterna ... sertingInterna ... .savingInterna ... versionInterna ... ype._idInterna ... ocumentInterna ... opulateInterna ... pulatedInterna ... AtomicsInterna ...  false;Interna ... = falseInterna ... e.scopeInterna ... = null;Interna ...  = nullInterna ... sessionInterna ... oScopesInterna ... equired/home/insomnia/repos/mongoose/lib/model.js
 * A Model is a class that's your primary tool for interacting with MongoDB.
 * An instance of a Model is called a [Document](https://mongoosejs.com/docs/api/document.html#Document).
 *
 * In Mongoose, the term "Model" refers to subclasses of the `mongoose.Model`
 * class. You should not use the `mongoose.Model` class directly. The
 * [`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()) and
 * [`connection.model()`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.model()) functions
 * create subclasses of `mongoose.Model` as shown below.
 *
 * #### Example:
 *
 *     // `UserModel` is a "Model", a subclass of `mongoose.Model`.
 *     const UserModel = mongoose.model('User', new Schema({ name: String }));
 *
 *     // You can use a Model to create new documents using `new`:
 *     const userDoc = new UserModel({ name: 'Foo' });
 *     await userDoc.save();
 *
 *     // You also use a model to create queries:
 *     const userFromDb = await UserModel.findOne({ name: 'Foo' });
 *
 * @param {Object} doc values for initial set
 * @param {Object} [fields] optional object containing the fields that were selected in the query which returned this document. You do **not** need to set this parameter to ensure Mongoose handles your [query projection](https://mongoosejs.com/docs/api/query.html#Query.prototype.select()).
 * @param {Boolean} [skipId=false] optional boolean. If true, mongoose doesn't add an `_id` field to the document.
 * @inherits Document https://mongoosejs.com/docs/api/document.html
 * @event `error`: If listening to this event, 'error' is emitted when a document was saved and an `error` occurred. If not listening, the event bubbles to the connection used to create this Model.
 * @event `index`: Emitted after `Model#ensureIndexes` completes. If an error occurred it is passed with the event.
 * @event `index-single-start`: Emitted when an individual index starts within `Model#ensureIndexes`. The fields and options being used to build the index are also passed with the event.
 * @event `index-single-done`: Emitted when an individual index finishes within `Model#ensureIndexes`. If an error occurred it is passed with the event. The fields, options, and index name are also passed.
 * @api public
 
 * Inherits from Document.
 *
 * All Model.prototype features are available on
 * top level (non-sub) documents.
 * @api private
 
 * Connection the model uses.
 *
 * @api public
 * @property db
 * @memberOf Model
 * @instance
 
 * Changes the Connection instance this model uses to make requests to MongoDB.
 * This function is most useful for changing the Connection that a Model defined using `mongoose.model()` uses
 * after initialization.
 *
 * #### Example:
 *
 *     await mongoose.connect('mongodb://127.0.0.1:27017/db1');
 *     const UserModel = mongoose.model('User', mongoose.Schema({ name: String }));
 *     UserModel.connection === mongoose.connection; // true
 *
 *     const conn2 = await mongoose.createConnection('mongodb://127.0.0.1:27017/db2').asPromise();
 *     UserModel.useConnection(conn2); // `UserModel` now stores documents in `db2`, not `db1`
 *
 *     UserModel.connection === mongoose.connection; // false
 *     UserModel.connection === conn2; // true
 *
 *     conn2.model('User') === UserModel; // true
 *     mongoose.model('User'); // Throws 'MissingSchemaError'
 *
 * Note: `useConnection()` does **not** apply any [connection-level plugins](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.plugin()) from the new connection.
 * If you use `useConnection()` to switch a model's connection, the model will still have the old connection's plugins.
 *
 * @function useConnection
 * @param [Connection] connection The new connection to use
 * @return [Model] this
 * @api public
 
 * The collection instance this model uses.
 * A Mongoose collection is a thin wrapper around a [MongoDB Node.js driver collection]([MongoDB Node.js driver collection](https://mongodb.github.io/node-mongodb-native/Next/classes/Collection.html)).
 * Using `Model.collection` means you bypass Mongoose middleware, validation, and casting.
 *
 * This property is read-only. Modifying this property is a no-op.
 *
 * @api public
 * @property collection
 * @memberOf Model
 * @instance
 
 * Internal collection the model uses.
 *
 * This property is read-only. Modifying this property is a no-op.
 *
 * @api private
 * @property collection
 * @memberOf Model
 * @instance
 
 * The name of the model
 *
 * @api public
 * @property modelName
 * @memberOf Model
 * @instance
 
 * Additional properties to attach to the query when calling `save()` and
 * `isNew` is false.
 *
 * @api public
 * @property $where
 * @memberOf Model
 * @instance
 
 * If this is a discriminator model, `baseModelName` is the name of
 * the base model.
 *
 * @api public
 * @property baseModelName
 * @memberOf Model
 * @instance
 
 * Event emitter that reports any errors that occurred. Useful for global error
 * handling.
 *
 * #### Example:
 *
 *     MyModel.events.on('error', err => console.log(err.message));
 *
 *     // Prints a 'CastError' because of the above handler
 *     await MyModel.findOne({ _id: 'Not a valid ObjectId' }).catch(noop);
 *
 * @api public
 * @property events
 * @fires error whenever any query or model function errors
 * @memberOf Model
 * @static
 
 * Compiled middleware for this model. Set in `applyHooks()`.
 *
 * @api private
 * @property _middleware
 * @memberOf Model
 * @static
  Only set session from asyncLocalStorage if `session` option wasn't originally passed in options// Only ... options send entire doc// send entire doc documents must have an _id else mongoose won't know// docu ... 't know what to update later if more changes are made. the user// what ... he user wouldn't know what _id was generated by mongodb either// woul ...  either nor would the ObjectId generated by mongodb necessarily// nor  ... ssarily match the schema definition.// matc ... nition. Make it possible to retry the insert// Make ...  insert Make sure we don't treat it as a new object on error,// Make ...  error, since it already exists// sinc ...  exists store the modified paths before the document is reset in case we need to generate version error.// stor ...  error. Skip checking if write succeeded if writeConcern is set to// Skip ...  set to unacknowledged writes, because otherwise `numAffected` will always be 0// unac ... ys be 0 was this an update that required a version bump?// was  ... n bump? the update failed. pass an error back// the  ... or back increment version if was successful// incr ... cessful
 * Saves this document by inserting a new document into the database if [document.isNew](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew) is `true`,
 * or sends an [updateOne](https://mongoosejs.com/docs/api/document.html#Document.prototype.updateOne()) operation with just the modified paths if `isNew` is `false`.
 *
 * #### Example:
 *
 *     product.sold = Date.now();
 *     product = await product.save();
 *
 * If save is successful, the returned promise will fulfill with the document
 * saved.
 *
 * #### Example:
 *
 *     const newProduct = await product.save();
 *     newProduct === product; // true
 *
 * @param {Object} [options] options optional options
 * @param {Session} [options.session=null] the [session](https://www.mongodb.com/docs/manual/reference/server-sessions/) associated with this save operation. If not specified, defaults to the [document's associated session](https://mongoosejs.com/docs/api/document.html#Document.prototype.session()).
 * @param {Object} [options.safe] (DEPRECATED) overrides [schema's safe option](https://mongoosejs.com/docs/guide.html#safe). Use the `w` option instead.
 * @param {Boolean} [options.validateBeforeSave] set to false to save without validating.
 * @param {Boolean} [options.validateModifiedOnly=false] if `true`, Mongoose will only validate modified paths, as opposed to modified paths and `required` paths.
 * @param {Number|String} [options.w] set the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#w-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.j] set to true for MongoDB to wait until this `save()` has been [journaled before resolving the returned promise](https://www.mongodb.com/docs/manual/reference/write-concern/#j-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Number} [options.wtimeout] sets a [timeout for the write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern).
 * @param {Boolean} [options.checkKeys=true] the MongoDB driver prevents you from saving keys that start with '$' or contain '.' by default. Set this option to `false` to skip that check. See [restrictions on field names](https://docs.mongodb.com/manual/reference/limits/#mongodb-limit-Restrictions-on-Field-Names)
 * @param {Boolean} [options.timestamps=true] if `false` and [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this `save()`.
 * @param {Array} [options.pathsToSave] An array of paths that tell mongoose to only validate and save the paths in `pathsToSave`.
 * @throws {DocumentNotFoundError} if this [save updates an existing document](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew) but the document doesn't exist in the database. For example, you will get this error if the document is [deleted between when you retrieved the document and when you saved it](documents.html#updating).
 * @return {Promise}
 * @api public
 * @see middleware https://mongoosejs.com/docs/middleware.html
 
 * Appends versioning to the where and update clauses.
 *
 * @api private
 * @method $__version
 * @memberOf Model
 * @instance
  this is an insert// this is an insert updates// updates only apply versioning if our versionKey was selected. else// only ... d. else there is no way to select the correct version. we could fail// ther ... ld fail fast here and force them to include the versionKey but// fast ... Key but thats a bit intrusive. can we do this automatically?// that ... ically? $push $addToSet don't need the where clause set// $pus ... use set Version key is getting set, means we'll increment the doc's version// Vers ... version after a successful save, so we should set the incremented version so// afte ... sion so future saves don't fail (gh-5779)// futu ... h-5779)
 * Signal that we desire an increment of this documents version.
 *
 * #### Example:
 *
 *     const doc = await Model.findById(id);
 *     doc.increment();
 *     await doc.save();
 *
 * @see versionKeys https://mongoosejs.com/docs/guide.html#versionKey
 * @memberOf Model
 * @method increment
 * @api public
 
 * Returns a query object
 *
 * @api private
 * @method $__where
 * @memberOf Model
 * @instance
 
 * Delete this document from the db. Returns a Query instance containing a `deleteOne` operation by this document's `_id`.
 *
 * #### Example:
 *
 *     await product.deleteOne();
 *     await Product.findById(product._id); // null
 *
 * Since `deleteOne()` returns a Query, the `deleteOne()` will **not** execute unless you use either `await`, `.then()`, `.catch()`, or [`.exec()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.exec())
 *
 * #### Example:
 *
 *     product.deleteOne(); // Doesn't do anything
 *     product.deleteOne().exec(); // Deletes the document, returns a promise
 *
 * @return {Query} Query
 * @api public
 
 * Returns the model instance used to create this document if no `name` specified.
 * If `name` specified, returns the model with the given `name`.
 *
 * #### Example:
 *
 *     const doc = new Tank({});
 *     doc.$model() === Tank; // true
 *     await doc.$model('User').findById(id);
 *
 * @param {String} [name] model name
 * @method $model
 * @api public
 * @return {Model}
 
 * Returns the model instance used to create this document if no `name` specified.
 * If `name` specified, returns the model with the given `name`.
 *
 * #### Example:
 *
 *     const doc = new Tank({});
 *     doc.$model() === Tank; // true
 *     await doc.$model('User').findById(id);
 *
 * @param {String} [name] model name
 * @method model
 * @api public
 * @return {Model}
 
 * Returns a document with `_id` only if at least one document exists in the database that matches
 * the given `filter`, and `null` otherwise.
 *
 * Under the hood, `MyModel.exists({ answer: 42 })` is equivalent to
 * `MyModel.findOne({ answer: 42 }).select({ _id: 1 }).lean()`
 *
 * #### Example:
 *
 *     await Character.deleteMany({});
 *     await Character.create({ name: 'Jean-Luc Picard' });
 *
 *     await Character.exists({ name: /picard/i }); // { _id: ... }
 *     await Character.exists({ name: /riker/i }); // null
 *
 * This function triggers the following middleware.
 *
 * - `findOne()`
 *
 * @param {Object} filter
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @return {Query}
 
 * Adds a discriminator type.
 *
 * #### Example:
 *
 *     function BaseSchema() {
 *       Schema.apply(this, arguments);
 *
 *       this.add({
 *         name: String,
 *         createdAt: Date
 *       });
 *     }
 *     util.inherits(BaseSchema, Schema);
 *
 *     const PersonSchema = new BaseSchema();
 *     const BossSchema = new BaseSchema({ department: String });
 *
 *     const Person = mongoose.model('Person', PersonSchema);
 *     const Boss = Person.discriminator('Boss', BossSchema);
 *     new Boss().__t; // "Boss". `__t` is the default `discriminatorKey`
 *
 *     const employeeSchema = new Schema({ boss: ObjectId });
 *     const Employee = Person.discriminator('Employee', employeeSchema, 'staff');
 *     new Employee().__t; // "staff" because of 3rd argument above
 *
 * @param {String} name discriminator model name
 * @param {Schema} schema discriminator model schema
 * @param {Object|String} [options] If string, same as `options.value`.
 * @param {String} [options.value] the string stored in the `discriminatorKey` property. If not specified, Mongoose uses the `name` parameter.
 * @param {Boolean} [options.clone=true] By default, `discriminator()` clones the given `schema`. Set to `false` to skip cloning.
 * @param {Boolean} [options.overwriteModels=false] by default, Mongoose does not allow you to define a discriminator with the same name as another discriminator. Set this to allow overwriting discriminators with the same name.
 * @param {Boolean} [options.mergeHooks=true] By default, Mongoose merges the base schema's hooks with the discriminator schema's hooks. Set this option to `false` to make Mongoose use the discriminator schema's hooks instead.
 * @param {Boolean} [options.mergePlugins=true] By default, Mongoose merges the base schema's plugins with the discriminator schema's plugins. Set this option to `false` to make Mongoose use the discriminator schema's plugins instead.
 * @return {Model} The newly created discriminator model
 * @api public
  apply methods and statics// appl ... statics
 * Make sure `this` is a model
 * @api private
  Check context, because it is easy to mistakenly type// Chec ... ly type `new Model.discriminator()` and get an incomprehensible error// `new ... e error Model (class) features// Mode ... eatures!
 * Give the constructor the ability to emit events.
 
 * This function is responsible for initializing the underlying connection in MongoDB based on schema options.
 * This function performs the following operations:
 *
 * - `createCollection()` unless [`autoCreate`](https://mongoosejs.com/docs/guide.html#autoCreate) option is turned off
 * - `ensureIndexes()` unless [`autoIndex`](https://mongoosejs.com/docs/guide.html#autoIndex) option is turned off
 * - `createSearchIndex()` on all schema search indexes if `autoSearchIndex` is enabled.
 *
 * Mongoose calls this function automatically when a model is a created using
 * [`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()) or
 * [`connection.model()`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.model()), so you
 * don't need to call `init()` to trigger index builds.
 *
 * However, you _may_ need to call `init()`  to get back a promise that will resolve when your indexes are finished.
 * Calling `await Model.init()` is helpful if you need to wait for indexes to build before continuing.
 * For example, if you want to wait for unique indexes to build before continuing with a test case.
 *
 * #### Example:
 *
 *     const eventSchema = new Schema({ thing: { type: 'string', unique: true } })
 *     // This calls `Event.init()` implicitly, so you don't need to call
 *     // `Event.init()` on your own.
 *     const Event = mongoose.model('Event', eventSchema);
 *
 *     await Event.init();
 *     console.log('Indexes are done building!');
 *
 * @api public
 * @returns {Promise}
  No base.options here because we don't want to take the base value if the connection hasn't// No b ...  hasn't set it yet// set it yet `autoCreate` may later be set when the connection is opened, so wait for connect before checking// `aut ... hecking
 * Create the collection for this model. By default, if no indexes are specified,
 * mongoose will not create the collection for the model until any documents are
 * created. Use this method to create the collection explicitly.
 *
 * Note 1: You may need to call this before starting a transaction
 * See https://www.mongodb.com/docs/manual/core/transactions/#transactions-and-operations
 *
 * Note 2: You don't have to call this if your schema contains index or unique field.
 * In that case, just use `Model.init()`
 *
 * #### Example:
 *
 *     const userSchema = new Schema({ name: String })
 *     const User = mongoose.model('User', userSchema);
 *
 *     User.createCollection().then(function(collection) {
 *       console.log('Collection is created!');
 *     });
 *
 * @api public
 * @param {Object} [options] see [MongoDB driver docs](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#createCollection)
 * @returns {Promise}
  do nothing// do nothing
 * Makes the indexes in MongoDB match the indexes defined in this model's
 * schema. This function will drop any indexes that are not defined in
 * the model's schema except the `_id` index, and build any indexes that
 * are in your schema but not in MongoDB.
 *
 * See the [introductory blog post](https://thecodebarbarian.com/whats-new-in-mongoose-5-2-syncindexes)
 * for more information.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: { type: String, unique: true } });
 *     const Customer = mongoose.model('Customer', schema);
 *     await Customer.collection.createIndex({ age: 1 }); // Index is not in schema
 *     // Will drop the 'age' index and create an index on `name`
 *     await Customer.syncIndexes();
 *
 * You should be careful about running `syncIndexes()` on production applications under heavy load,
 * because index builds are expensive operations, and unexpected index drops can lead to degraded
 * performance. Before running `syncIndexes()`, you can use the [`diffIndexes()` function](#Model.diffIndexes())
 * to check what indexes `syncIndexes()` will drop and create.
 *
 * #### Example:
 *
 *     const { toDrop, toCreate } = await Model.diffIndexes();
 *     toDrop; // Array of strings containing names of indexes that `syncIndexes()` will drop
 *     toCreate; // Array of strings containing names of indexes that `syncIndexes()` will create
 *
 * @param {Object} [options] options to pass to `ensureIndexes()`
 * @param {Boolean} [options.background=null] if specified, overrides each index's `background` property
 * @param {Boolean} [options.hideIndexes=false] set to `true` to hide indexes instead of dropping. Requires MongoDB server 4.4 or higher
 * @return {Promise}
 * @api public
 
 * Create an [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/).
 * This function only works when connected to MongoDB Atlas.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: { type: String, unique: true } });
 *     const Customer = mongoose.model('Customer', schema);
 *     await Customer.createSearchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });
 *
 * @param {Object} description index options, including `name` and `definition`
 * @param {String} description.name
 * @param {Object} description.definition
 * @return {Promise}
 * @api public
 
 * Update an existing [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/).
 * This function only works when connected to MongoDB Atlas.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: { type: String, unique: true } });
 *     const Customer = mongoose.model('Customer', schema);
 *     await Customer.updateSearchIndex('test', { mappings: { dynamic: true } });
 *
 * @param {String} name
 * @param {Object} definition
 * @return {Promise}
 * @api public
 
 * Delete an existing [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) by name.
 * This function only works when connected to MongoDB Atlas.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: { type: String, unique: true } });
 *     const Customer = mongoose.model('Customer', schema);
 *     await Customer.dropSearchIndex('test');
 *
 * @param {String} name
 * @return {Promise}
 * @api public
 
 * List all [Atlas search indexes](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) on this model's collection.
 * This function only works when connected to MongoDB Atlas.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: { type: String, unique: true } });
 *     const Customer = mongoose.model('Customer', schema);
 *
 *     await Customer.createSearchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });
 *     const res = await Customer.listSearchIndexes(); // Includes `[{ name: 'test' }]`
 *
 * @param {Object} [options]
 * @return {Promise<Array>}
 * @api public
 
 * Does a dry-run of `Model.syncIndexes()`, returning the indexes that `syncIndexes()` would drop and create if you were to run `syncIndexes()`.
 *
 * #### Example:
 *
 *     const { toDrop, toCreate } = await Model.diffIndexes();
 *     toDrop; // Array of strings containing names of indexes that `syncIndexes()` will drop
 *     toCreate; // Array of index specs containing the keys of indexes that `syncIndexes()` will create
 *
 * @param {Object} [options]
 * @param {Boolean} [options.indexOptionsToCreate=false] If true, `toCreate` will include both the index spec and the index options, not just the index spec
 * @return {Promise<Object>} contains the indexes that would be dropped in MongoDB and indexes that would be created in MongoDB as `{ toDrop: string[], toCreate: string[] }`.
 /**\n *  ... }`.\n */ Never try to drop `_id` index, MongoDB server doesn't allow it// Neve ... llow it Timeseries collections have a default index on { timeField: 1, metaField: 1 }.// Time ... d: 1 }.
 * Deletes all indexes that aren't defined in this model's schema. Used by
 * `syncIndexes()`.
 *
 * The returned promise resolves to a list of the dropped indexes' names as an array
 *
 * @param {Object} [options]
 * @param {Array<String>} [options.toDrop] if specified, contains a list of index names to drop
 * @param {Boolean} [options.hideIndexes=false] set to `true` to hide indexes instead of dropping. Requires MongoDB server 4.4 or higher
 * @return {Promise<Array<String>>} list of dropped or hidden index names
 * @api public
 
 * Lists the indexes currently defined in MongoDB. This may or may not be
 * the same as the indexes defined in your schema depending on whether you
 * use the [`autoIndex` option](https://mongoosejs.com/docs/guide.html#autoIndex) and if you
 * build indexes manually.
 *
 * @return {Promise}
 * @api public
 
 * Sends `createIndex` commands to mongo for each index declared in the schema.
 * The `createIndex` commands are sent in series.
 *
 * #### Example:
 *
 *     await Event.ensureIndexes();
 *
 * After completion, an `index` event is emitted on this `Model` passing an error if one occurred.
 *
 * #### Example:
 *
 *     const eventSchema = new Schema({ thing: { type: 'string', unique: true } })
 *     const Event = mongoose.model('Event', eventSchema);
 *
 *     Event.on('index', function (err) {
 *       if (err) console.error(err); // error occurred during index creation
 *     });
 *
 * _NOTE: It is not recommended that you run this in production. Index creation may impact database performance depending on your load. Use with caution._
 *
 * @param {Object} [options] internal options
 * @return {Promise}
 * @api public
 
 * Similar to `ensureIndexes()`, except for it uses the [`createIndex`](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#createIndex)
 * function.
 *
 * @param {Object} [options] internal options
 * @return {Promise}
 * @api public
  Indexes are created one-by-one to support how MongoDB < 2.4 deals// Inde ... 4 deals with background indexes.// with ... ndexes. If buffering is off, do this manually.// If b ... nually. Just in case `createIndex()` throws a sync error// Just ... c error
 * Creates all [Atlas search indexes](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) defined in this model's schema.
 * This function only works when connected to MongoDB Atlas.
 *
 * #### Example:
 *
 *     const schema = new Schema({
 *       name: String,
 *       description: String
 *     });
 *     schema.searchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });
 *     const Product = mongoose.model('Product', schema);
 *
 *     // Creates the search index defined in the schema
 *     await Product.createSearchIndexes();
 *
 * @api public
 * @return {Promise} resolves to the results of creating the search indexes
 /**\n *  ... xes\n */
 * Schema the model uses.
 *
 * @property schema
 * @static
 * @api public
 * @memberOf Model
 
 * Connection instance the model uses.
 *
 * @property db
 * @static
 * @api public
 * @memberOf Model
 
 * Collection the model uses.
 *
 * @property collection
 * @api public
 * @memberOf Model
 
 * Internal collection the model uses.
 *
 * @property collection
 * @api private
 * @memberOf Model
 
 * Base Mongoose instance the model uses.
 *
 * @property base
 * @api public
 * @memberOf Model
 
 * Registered discriminators for this model.
 *
 * @property discriminators
 * @api public
 * @memberOf Model
 
 * Translate any aliases fields/conditions so the final query or document object is pure
 *
 * #### Example:
 *
 *     await Character.find(Character.translateAliases({
 *        '': 'Eddard Stark' // Alias for 'name'
 *     });
 *
 * By default, `translateAliases()` overwrites raw fields with aliased fields.
 * So if `n` is an alias for `name`, `{ n: 'alias', name: 'raw' }` will resolve to `{ name: 'alias' }`.
 * However, you can set the `errorOnDuplicates` option to throw an error if there are potentially conflicting paths.
 * The `translateAliases` option for queries uses `errorOnDuplicates`.
 *
 * #### Note:
 *
 * Only translate arguments of object type anything else is returned raw
 *
 * @param {Object} fields fields/conditions that may contain aliased keys
 * @param {Boolean} [errorOnDuplicates] if true, throw an error if there's both a key and an alias for that key in `fields`
 * @return {Object} the translated 'pure' fields/conditions
  Alias found,// Alias found, Alias not found, so treat as un-aliased key// Alia ... sed key Check if aliased path is a schema// Chec ...  schema We'll be using the translated key instead// We'l ... instead Delete from map// Delete from map Delete from object// Dele ...  object Fields is an object (query conditions or document fields)// Fiel ... fields) A Map was supplied// A Ma ... upplied Infer a regular object was supplied// Infe ... upplied Recursively translate nested queries// Recu ... queries Don't know typeof fields// Don' ...  fields
 * Deletes the first document that matches `conditions` from the collection.
 * It returns an object with the property `deletedCount` indicating how many documents were deleted.
 *
 * #### Example:
 *
 *     await Character.deleteOne({ name: 'Eddard Stark' }); // returns {deletedCount: 1}
 *
 * #### Note:
 *
 * This function triggers `deleteOne` query hooks. Read the
 * [middleware docs](https://mongoosejs.com/docs/middleware.html#naming) to learn more.
 *
 * @param {Object} conditions
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @api public
 
 * Deletes all of the documents that match `conditions` from the collection.
 * It returns an object with the property `deletedCount` containing the number of documents deleted.
 *
 * #### Example:
 *
 *     await Character.deleteMany({ name: /Stark/, age: { $gte: 18 } }); // returns {deletedCount: x} where x is the number of documents deleted.
 *
 * #### Note:
 *
 * This function triggers `deleteMany` query hooks. Read the
 * [middleware docs](https://mongoosejs.com/docs/middleware.html#naming) to learn more.
 *
 * @param {Object} conditions
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @api public
 
 * Finds documents.
 *
 * Mongoose casts the `filter` to match the model's schema before the command is sent.
 * See our [query casting tutorial](https://mongoosejs.com/docs/tutorials/query_casting.html) for
 * more information on how Mongoose casts `filter`.
 *
 * #### Example:
 *
 *     // find all documents
 *     await MyModel.find({});
 *
 *     // find all documents named john and at least 18
 *     await MyModel.find({ name: 'john', age: { $gte: 18 } }).exec();
 *
 *     // executes, name LIKE john and only selecting the "name" and "friends" fields
 *     await MyModel.find({ name: /john/i }, 'name friends').exec();
 *
 *     // passing options
 *     await MyModel.find({ name: /john/i }, null, { skip: 10 }).exec();
 *
 * @param {Object|ObjectId} filter
 * @param {Object|String|String[]} [projection] optional fields to return, see [`Query.prototype.select()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.select())
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @see field selection https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
 * @see query casting https://mongoosejs.com/docs/tutorials/query_casting.html
 * @api public
 
 * Finds a single document by its _id field. `findById(id)` is equivalent to `findOne({ _id: id })`.
 *
 * The `id` is cast based on the Schema before sending the command.
 *
 * This function triggers the following middleware.
 *
 * - `findOne()`
 *
 * #### Example:
 *
 *     // Find the adventure with the given `id`, or `null` if not found
 *     await Adventure.findById(id).exec();
 *
 *     // select only the adventures name and length
 *     await Adventure.findById(id, 'name length').exec();
 *
 * @param {Any} id value of `_id` to query by
 * @param {Object|String|String[]} [projection] optional fields to return, see [`Query.prototype.select()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.select())
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @return {Query}
 * @see field selection https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
 * @see lean queries https://mongoosejs.com/docs/tutorials/lean.html
 * @see findById in Mongoose https://masteringjs.io/tutorials/mongoose/find-by-id
 * @api public
 
 * Finds one document.
 *
 * The `conditions` are cast to their respective SchemaTypes before the command is sent.
 *
 * *Note:* `conditions` is optional, and if `conditions` is null or undefined,
 * mongoose will send an empty `findOne` command to MongoDB, which will return
 * an arbitrary document. If you're querying by `_id`, use `findById()` instead.
 *
 * #### Example:
 *
 *     // Find one adventure whose `country` is 'Croatia', otherwise `null`
 *     await Adventure.findOne({ country: 'Croatia' }).exec();
 *
 *     // Model.findOne() no longer accepts a callback
 *
 *     // Select only the adventures name and length
 *     await Adventure.findOne({ country: 'Croatia' }, 'name length').exec();
 *
 * @param {Object} [conditions]
 * @param {Object|String|String[]} [projection] optional fields to return, see [`Query.prototype.select()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.select())
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @see field selection https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
 * @see lean queries https://mongoosejs.com/docs/tutorials/lean.html
 * @api public
 
 * Estimates the number of documents in the MongoDB collection. Faster than
 * using `countDocuments()` for large collections because
 * `estimatedDocumentCount()` uses collection metadata rather than scanning
 * the entire collection.
 *
 * #### Example:
 *
 *     const numAdventures = await Adventure.estimatedDocumentCount();
 *
 * @param {Object} [options]
 * @return {Query}
 * @api public
 
 * Counts number of documents matching `filter` in a database collection.
 *
 * #### Example:
 *
 *     const count = await Adventure.countDocuments({ type: 'jungle' });
 *     console.log('there are %d jungle adventures', count);
 *
 * If you want to count all documents in a large collection,
 * use the [`estimatedDocumentCount()` function](https://mongoosejs.com/docs/api/model.html#Model.estimatedDocumentCount())
 * instead. If you call `countDocuments({})`, MongoDB will always execute
 * a full collection scan and **not** use any indexes.
 *
 * The `countDocuments()` function is similar to `count()`, but there are a
 * [few operators that `countDocuments()` does not support](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments).
 * Below are the operators that `count()` supports but `countDocuments()` does not,
 * and the suggested replacement:
 *
 * - `$where`: [`$expr`](https://www.mongodb.com/docs/manual/reference/operator/query/expr/)
 * - `$near`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$center`](https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center)
 * - `$nearSphere`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$centerSphere`](https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere)
 *
 * @param {Object} filter
 * @return {Query}
 * @api public
 
 * Creates a Query for a `distinct` operation.
 *
 * #### Example:
 *
 *     const query = Link.distinct('url');
 *     query.exec();
 *
 * @param {String} field
 * @param {Object} [conditions] optional
 * @param {Object} [options] optional
 * @return {Query}
 * @api public
 
 * Creates a Query, applies the passed conditions, and returns the Query.
 *
 * For example, instead of writing:
 *
 *     User.find({ age: { $gte: 21, $lte: 65 } });
 *
 * we can instead write:
 *
 *     User.where('age').gte(21).lte(65).exec();
 *
 * Since the Query class also supports `where` you can continue chaining
 *
 *     User
 *     .where('age').gte(21).lte(65)
 *     .where('name', /^b/i)
 *     ... etc
 *
 * @param {String} path
 * @param {Object} [val] optional value
 * @return {Query}
 * @api public
  eslint// eslint
 * Creates a `Query` and specifies a `$where` condition.
 *
 * Sometimes you need to query for things in mongodb using a JavaScript expression. You can do so via `find({ $where: javascript })`, or you can use the mongoose shortcut method $where via a Query chain or from your mongoose Model.
 *
 *     Blog.$where('this.username.indexOf("val") !== -1').exec(function (err, docs) {});
 *
 * @param {String|Function} argument is a javascript string or anonymous function
 * @method $where
 * @memberOf Model
 * @return {Query}
 * @see Query.$where https://mongoosejs.com/docs/api/query.html#Query.prototype.$where
 * @api public
 
 * Issues a mongodb findOneAndUpdate command.
 *
 * Finds a matching document, updates it according to the `update` arg, passing any `options`. A Query object is returned.
 *
 * #### Example:
 *
 *     A.findOneAndUpdate(filter, update, options);  // returns Query
 *     A.findOneAndUpdate(filter, update);           // returns Query
 *     A.findOneAndUpdate(filter);                   // returns Query
 *     A.findOneAndUpdate();                         // returns Query
 *
 *     // Other supported syntaxes
 *     // Note that calling `Query#findOneAndUpdate()` with 1 arg will treat the arg as `update`, NOT `filter`
 *     A.find(filter).findOneAndUpdate(update);
 *
 * #### Note:
 *
 * All top level update keys which are not `atomic` operation names are treated as set operations:
 *
 * #### Example:
 *
 *     const query = { name: 'borne' };
 *     Model.findOneAndUpdate(query, { name: 'jason bourne' }, options);
 *
 *     // is sent as
 *     Model.findOneAndUpdate(query, { $set: { name: 'jason bourne' }}, options);
 *
 * #### Note:
 *
 * `findOneAndX` and `findByIdAndX` functions support limited validation that
 * you can enable by setting the `runValidators` option.
 *
 * If you need full-fledged validation, use the traditional approach of first
 * retrieving the document.
 *
 *     const doc = await Model.findById(id);
 *     doc.name = 'jason bourne';
 *     await doc.save();
 *
 * @param {Object} [conditions]
 * @param {Object} [update]
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {String} [options.returnDocument='before'] Has two possible values, `'before'` and `'after'`. By default, it will return the document before the update was applied.
 * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and [the Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Object|String|String[]} [options.projection=null] optional fields to return, see [`Query.prototype.select()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.select())
 * @param {Boolean} [options.new=false] if true, return the modified document rather than the original
 * @param {Object|String} [options.fields] Field selection. Equivalent to `.select(fields).findOneAndUpdate()`
 * @param {Number} [options.maxTimeMS] puts a time limit on the query - requires mongodb >= 2.6.0
 * @param {Object|String} [options.sort] if multiple docs are found by the conditions, sets the sort order to choose which doc to update.
 * @param {Boolean} [options.runValidators] if true, runs [update validators](https://mongoosejs.com/docs/validation.html#update-validators) on this command. Update validators validate the update operation against the model's schema
 * @param {Boolean} [options.setDefaultsOnInsert=true] If `setDefaultsOnInsert` and `upsert` are true, mongoose will apply the [defaults](https://mongoosejs.com/docs/defaults.html) specified in the model's schema if a new document is created
 * @param {Boolean} [options.includeResultMetadata] if true, returns the [raw result from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html)
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @return {Query}
 * @see Tutorial https://mongoosejs.com/docs/tutorials/findoneandupdate.html
 * @see mongodb https://www.mongodb.com/docs/manual/reference/command/findAndModify/
 * @api public
 
 * Issues a mongodb findOneAndUpdate command by a document's _id field.
 * `findByIdAndUpdate(id, ...)` is equivalent to `findOneAndUpdate({ _id: id }, ...)`.
 *
 * Finds a matching document, updates it according to the `update` arg,
 * passing any `options`, and returns the found document (if any).
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndUpdate()`
 *
 * #### Example:
 *
 *     A.findByIdAndUpdate(id, update, options)  // returns Query
 *     A.findByIdAndUpdate(id, update)           // returns Query
 *     A.findByIdAndUpdate()                     // returns Query
 *
 * #### Note:
 *
 * All top level update keys which are not `atomic` operation names are treated as set operations:
 *
 * #### Example:
 *
 *     Model.findByIdAndUpdate(id, { name: 'jason bourne' }, options)
 *
 *     // is sent as
 *     Model.findByIdAndUpdate(id, { $set: { name: 'jason bourne' }}, options)
 *
 * #### Note:
 *
 * `findOneAndX` and `findByIdAndX` functions support limited validation. You can
 * enable validation by setting the `runValidators` option.
 *
 * If you need full-fledged validation, use the traditional approach of first
 * retrieving the document.
 *
 *     const doc = await Model.findById(id)
 *     doc.name = 'jason bourne';
 *     await doc.save();
 *
 * @param {Object|Number|String} id value of `_id` to query by
 * @param {Object} [update]
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {String} [options.returnDocument='before'] Has two possible values, `'before'` and `'after'`. By default, it will return the document before the update was applied.
 * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and [the Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Object|String} [options.sort] if multiple docs are found by the conditions, sets the sort order to choose which doc to update.
 * @param {Boolean} [options.runValidators] if true, runs [update validators](https://mongoosejs.com/docs/validation.html#update-validators) on this command. Update validators validate the update operation against the model's schema
 * @param {Boolean} [options.setDefaultsOnInsert=true] If `setDefaultsOnInsert` and `upsert` are true, mongoose will apply the [defaults](https://mongoosejs.com/docs/defaults.html) specified in the model's schema if a new document is created
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Boolean} [options.new=false] if true, return the modified document rather than the original
 * @param {Object|String} [options.select] sets the document fields to return.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @return {Query}
 * @see Model.findOneAndUpdate https://mongoosejs.com/docs/api/model.html#Model.findOneAndUpdate()
 * @see mongodb https://www.mongodb.com/docs/manual/reference/command/findAndModify/
 * @api public
  if a model is passed in instead of an id// if a ... f an id
 * Issue a MongoDB `findOneAndDelete()` command.
 *
 * Finds a matching document, removes it, and returns the found document (if any).
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndDelete()`
 *
 * #### Example:
 *
 *     A.findOneAndDelete(conditions, options)  // return Query
 *     A.findOneAndDelete(conditions) // returns Query
 *     A.findOneAndDelete()           // returns Query
 *
 * `findOneAndX` and `findByIdAndX` functions support limited validation. You can
 * enable validation by setting the `runValidators` option.
 *
 * If you need full-fledged validation, use the traditional approach of first
 * retrieving the document.
 *
 *     const doc = await Model.findById(id)
 *     doc.name = 'jason bourne';
 *     await doc.save();
 *
 * @param {Object} conditions
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Object|String|String[]} [options.projection=null] optional fields to return, see [`Query.prototype.select()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.select())
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {Object|String} [options.sort] if multiple docs are found by the conditions, sets the sort order to choose which doc to update.
 * @param {Object|String} [options.select] sets the document fields to return.
 * @param {Number} [options.maxTimeMS] puts a time limit on the query - requires mongodb >= 2.6.0
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @api public
 
 * Issue a MongoDB `findOneAndDelete()` command by a document's _id field.
 * In other words, `findByIdAndDelete(id)` is a shorthand for
 * `findOneAndDelete({ _id: id })`.
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndDelete()`
 *
 * @param {Object|Number|String} id value of `_id` to query by
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @see Model.findOneAndDelete https://mongoosejs.com/docs/api/model.html#Model.findOneAndDelete()
 * @see mongodb https://www.mongodb.com/docs/manual/reference/command/findAndModify/
 /**\n *  ... fy/\n */
 * Issue a MongoDB `findOneAndReplace()` command.
 *
 * Finds a matching document, replaces it with the provided doc, and returns the document.
 *
 * This function triggers the following query middleware.
 *
 * - `findOneAndReplace()`
 *
 * #### Example:
 *
 *     A.findOneAndReplace(filter, replacement, options)  // return Query
 *     A.findOneAndReplace(filter, replacement) // returns Query
 *     A.findOneAndReplace()                    // returns Query
 *
 * @param {Object} filter Replace the first document that matches this filter
 * @param {Object} [replacement] Replace with this document
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {String} [options.returnDocument='before'] Has two possible values, `'before'` and `'after'`. By default, it will return the document before the update was applied.
 * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and [the Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Object|String|String[]} [options.projection=null] optional fields to return, see [`Query.prototype.select()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.select())
 * @param {Object|String} [options.sort] if multiple docs are found by the conditions, sets the sort order to choose which doc to update.
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {Object|String} [options.select] sets the document fields to return.
 * @param {Number} [options.maxTimeMS] puts a time limit on the query - requires mongodb >= 2.6.0
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @api public
 
 * Shortcut for saving one or more documents to the database.
 * `MyModel.create(docs)` does `new MyModel(doc).save()` for every doc in
 * docs.
 *
 * This function triggers the following middleware.
 *
 * - `save()`
 *
 * #### Example:
 *
 *     // Insert one new `Character` document
 *     await Character.create({ name: 'Jean-Luc Picard' });
 *
 *     // Insert multiple new `Character` documents
 *     await Character.create([{ name: 'Will Riker' }, { name: 'Geordi LaForge' }]);
 *
 *     // Create a new character within a transaction. Note that you **must**
 *     // pass an array as the first parameter to `create()` if you want to
 *     // specify options.
 *     await Character.create([{ name: 'Jean-Luc Picard' }], { session });
 *
 * @param {Array|Object} docs Documents to insert, as a spread or array
 * @param {Object} [options] Options passed down to `save()`. To specify `options`, `docs` **must** be an array, not a spread. See [Model.save](https://mongoosejs.com/docs/api/model.html#Model.prototype.save()) for available options.
 * @param {Boolean} [options.ordered] saves the docs in series rather than parallel.
 * @param {Boolean} [options.aggregateErrors] Aggregate Errors instead of throwing the first one that occurs. Default: false
 * @return {Promise}
 * @api public
  For backwards compatibility with 6.x, because of gh-5061 Mongoose 6.x and// For  ... 6.x and older would treat a falsy last arg as a callback. We don't want to throw// olde ... o throw an error here, because it would look strange if `Test.create({}, void 0)`// an e ... oid 0)` threw a callback error. But we also don't want to create an unnecessary document.// thre ... cument. Probably means the user is running into the common mistake of trying// Prob ...  trying to use a spread to specify options, see gh-7535// to u ... gh-7535 dont pass on the option to "$save"// dont ... "$save"
 * Shortcut for saving one document to the database.
 * `MyModel.insertOne(obj, options)` is almost equivalent to `new MyModel(obj).save(options)`.
 * The difference is that `insertOne()` checks if `obj` is already a document, and checks for discriminators.
 *
 * This function triggers the following middleware.
 *
 * - `save()`
 *
 * #### Example:
 *
 *     // Insert one new `Character` document
 *     const character = await Character.insertOne({ name: 'Jean-Luc Picard' });
 *     character.name; // 'Jean-Luc Picard'
 *
 *     // Create a new character within a transaction.
 *     await Character.insertOne({ name: 'Jean-Luc Picard' }, { session });
 *
 * @param {Object|Document} doc Document to insert, as a POJO or Mongoose document
 * @param {Object} [options] Options passed down to `save()`.
 * @return {Promise<Document>} resolves to the saved document
 * @api public
 
 * _Requires a replica set running MongoDB >= 3.6.0._ Watches the
 * underlying collection for changes using
 * [MongoDB change streams](https://www.mongodb.com/docs/manual/changeStreams/).
 *
 * This function does **not** trigger any middleware. In particular, it
 * does **not** trigger aggregate middleware.
 *
 * The ChangeStream object is an event emitter that emits the following events:
 *
 * - 'change': A change occurred, see below example
 * - 'error': An unrecoverable error occurred. In particular, change streams currently error out if they lose connection to the replica set primary. Follow [this GitHub issue](https://github.com/Automattic/mongoose/issues/6799) for updates.
 * - 'end': Emitted if the underlying stream is closed
 * - 'close': Emitted if the underlying stream is closed
 *
 * #### Example:
 *
 *     const doc = await Person.create({ name: 'Ned Stark' });
 *     const changeStream = Person.watch().on('change', change => console.log(change));
 *     // Will print from the above `console.log()`:
 *     // { _id: { _data: ... },
 *     //   operationType: 'delete',
 *     //   ns: { db: 'mydb', coll: 'Person' },
 *     //   documentKey: { _id: 5a51b125c5500f5aa094c7bd } }
 *     await doc.deleteOne();
 *
 * @param {Array} [pipeline]
 * @param {Object} [options] see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#watch)
 * @param {Boolean} [options.hydrate=false] if true and `fullDocument: 'updateLookup'` is set, Mongoose will automatically hydrate `fullDocument` into a fully fledged Mongoose document
 * @return {ChangeStream} mongoose-specific change stream wrapper, inherits from EventEmitter
 * @api public
 
 * _Requires MongoDB >= 3.6.0._ Starts a [MongoDB session](https://www.mongodb.com/docs/manual/release-notes/3.6/#client-sessions)
 * for benefits like causal consistency, [retryable writes](https://www.mongodb.com/docs/manual/core/retryable-writes/),
 * and [transactions](https://thecodebarbarian.com/a-node-js-perspective-on-mongodb-4-transactions.html).
 *
 * Calling `MyModel.startSession()` is equivalent to calling `MyModel.db.startSession()`.
 *
 * This function does not trigger any middleware.
 *
 * #### Example:
 *
 *     const session = await Person.startSession();
 *     let doc = await Person.findOne({ name: 'Ned Stark' }, null, { session });
 *     await doc.deleteOne();
 *     // `doc` will always be null, even if reading from a replica set
 *     // secondary. Without causal consistency, it is possible to
 *     // get a doc back from the below query if the query reads from a
 *     // secondary that is experiencing replication lag.
 *     doc = await Person.findOne({ name: 'Ned Stark' }, null, { session, readPreference: 'secondary' });
 *
 * @param {Object} [options] see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html#startSession)
 * @param {Boolean} [options.causalConsistency=true] set to false to disable causal consistency
 * @return {Promise<ClientSession>} promise that resolves to a MongoDB driver `ClientSession`
 * @api public
 
 * Shortcut for validating an array of documents and inserting them into
 * MongoDB if they're all valid. This function is faster than `.create()`
 * because it only sends one operation to the server, rather than one for each
 * document.
 *
 * Mongoose always validates each document **before** sending `insertMany`
 * to MongoDB. So if one document has a validation error, no documents will
 * be saved, unless you set
 * [the `ordered` option to false](https://www.mongodb.com/docs/manual/reference/method/db.collection.insertMany/#error-handling).
 *
 * This function does **not** trigger save middleware.
 *
 * This function triggers the following middleware.
 *
 * - `insertMany()`
 *
 * #### Example:
 *
 *     const docs = await Movies.insertMany([
 *       { name: 'Star Wars' },
 *       { name: 'The Empire Strikes Back' }
 *     ]);
 *     docs[0].name; // 'Star Wars'
 *
 *     // Return raw result from MongoDB
 *     const result = await Movies.insertMany([
 *       { name: 'Star Wars' },
 *       { name: 'The Empire Strikes Back' }
 *     ], { rawResult: true });
 *
 * @param {Array|Object|*} doc(s)
 * @param {Object} [options] see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#insertMany)
 * @param {Boolean} [options.ordered=true] if true, will fail fast on the first error encountered. If false, will insert all the documents it can and report errors later. An `insertMany()` with `ordered = false` is called an "unordered" `insertMany()`.
 * @param {Boolean} [options.rawResult=false] if false, the returned promise resolves to the documents that passed mongoose document validation. If `true`, will return the [raw result from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/InsertManyResult.html) with a `mongoose` property that contains `validationErrors` and `results` if this is an unordered `insertMany`.
 * @param {Boolean} [options.lean=false] if `true`, skips hydrating the documents. This means Mongoose will **not** cast, validate, or apply defaults to any of the documents passed to `insertMany()`. This option is useful if you need the extra performance, but comes with data integrity risk. Consider using with [`castObject()`](https://mongoosejs.com/docs/api/model.html#Model.castObject()) and [`applyDefaults()`](https://mongoosejs.com/docs/api/model.html#Model.applyDefaults()).
 * @param {Number} [options.limit=null] this limits the number of documents being processed (validation/casting) by mongoose in parallel, this does **NOT** send the documents in batches to MongoDB. Use this option if you're processing a large number of documents and your app is running out of memory.
 * @param {String|Object|Array} [options.populate=null] populates the result documents. This option is a no-op if `rawResult` is set.
 * @param {Boolean} [options.throwOnValidationError=false] If true and `ordered: false`, throw an error if one of the operations failed validation, but all valid operations completed successfully.
 * @return {Promise} resolving to the raw result from the MongoDB driver if `options.rawResult` was `true`, or the documents that passed validation, otherwise
 * @api public
 
 * ignore
 *
 * @param {Array} arr
 * @param {Object} options
 * @param {Function} callback
 * @api private
 * @memberOf Model
 * @method $__insertMany
 * @static
  If option `lean` is set to true bypass validation and hydration// If o ... dration we have to execute callback at the nextTick to be compatible// we h ... patible with parallelLimit, as `results` variable has TDZ issue if we// with ... e if we execute the callback synchronously// exec ... onously If option `lean` is set to true bypass validation// If o ... idation We filter all failed pre-validations by removing nulls// We f ... g nulls Make sure validation errors are in the same order as the// Make ...  as the original documents, so if both doc1 and doc2 both fail validation,// orig ... dation, `Model.insertMany([doc1, doc2])` will always have doc1's validation// `Mod ... idation error before doc2's. Re: gh-12791.// erro ... -12791. Quickly escape while there aren't any valid docAttributes// Quic ... ributes Decorate with mongoose validation errors in case of unordered,// Deco ... rdered, because then still do `insertMany()`// beca ... Many()` `writeErrors` is a property reported by the MongoDB driver,// `wri ... driver, just not if there's only 1 error.// just ...  error. `insertedDocs` is a Mongoose-specific property// `ins ... roperty
 * Sends multiple `insertOne`, `updateOne`, `updateMany`, `replaceOne`,
 * `deleteOne`, and/or `deleteMany` operations to the MongoDB server in one
 * command. This is faster than sending multiple independent operations (e.g.
 * if you use `create()`) because with `bulkWrite()` there is only one round
 * trip to MongoDB.
 *
 * Mongoose will perform casting on all operations you provide.
 * The only exception is [setting the `update` operator for `updateOne` or `updateMany` to a pipeline](https://www.mongodb.com/docs/manual/reference/method/db.collection.bulkWrite/#updateone-and-updatemany): Mongoose does **not** cast update pipelines.
 *
 * This function does **not** trigger any middleware, neither `save()`, nor `update()`.
 * If you need to trigger
 * `save()` middleware for every document use [`create()`](https://mongoosejs.com/docs/api/model.html#Model.create()) instead.
 *
 * #### Example:
 *
 *     Character.bulkWrite([
 *       {
 *         insertOne: {
 *           document: {
 *             name: 'Eddard Stark',
 *             title: 'Warden of the North'
 *           }
 *         }
 *       },
 *       {
 *         updateOne: {
 *           filter: { name: 'Eddard Stark' },
 *           // If you were using the MongoDB driver directly, you'd need to do
 *           // `update: { $set: { title: ... } }` but mongoose adds $set for
 *           // you.
 *           update: { title: 'Hand of the King' }
 *         }
 *       },
 *       {
 *         deleteOne: {
 *           filter: { name: 'Eddard Stark' }
 *         }
 *       }
 *     ]).then(res => {
 *      // Prints "1 1 1"
 *      console.log(res.insertedCount, res.modifiedCount, res.deletedCount);
 *     });
 *
 *     // Mongoose does **not** cast update pipelines, so no casting for the `update` option below.
 *     // Mongoose does still cast `filter`
 *     await Character.bulkWrite([{
 *       updateOne: {
 *         filter: { name: 'Annika Hansen' },
 *         update: [{ $set: { name: 7 } }] // Array means update pipeline, so Mongoose skips casting
 *       }
 *     }]);
 *
 * The [supported operations](https://www.mongodb.com/docs/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite) are:
 *
 * - `insertOne`
 * - `updateOne`
 * - `updateMany`
 * - `deleteOne`
 * - `deleteMany`
 * - `replaceOne`
 *
 * @param {Array} ops
 * @param {Object} [ops.insertOne.document] The document to insert
 * @param {Object} [ops.insertOne.timestamps=true] If false, do not apply [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) to the operation
 * @param {Object} [ops.updateOne.filter] Update the first document that matches this filter
 * @param {Object} [ops.updateOne.update] An object containing [update operators](https://www.mongodb.com/docs/manual/reference/operator/update/)
 * @param {Boolean} [ops.updateOne.upsert=false] If true, insert a doc if none match
 * @param {Boolean} [ops.updateOne.timestamps=true] If false, do not apply [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) to the operation
 * @param {Object} [ops.updateOne.collation] The [MongoDB collation](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-collations) to use
 * @param {Array} [ops.updateOne.arrayFilters] The [array filters](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-36-array-filters.html) used in `update`
 * @param {Object} [ops.updateMany.filter] Update all the documents that match this filter
 * @param {Object} [ops.updateMany.update] An object containing [update operators](https://www.mongodb.com/docs/manual/reference/operator/update/)
 * @param {Boolean} [ops.updateMany.upsert=false] If true, insert a doc if no documents match `filter`
 * @param {Boolean} [ops.updateMany.timestamps=true] If false, do not apply [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) to the operation
 * @param {Object} [ops.updateMany.collation] The [MongoDB collation](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-collations) to use
 * @param {Array} [ops.updateMany.arrayFilters] The [array filters](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-36-array-filters.html) used in `update`
 * @param {Object} [ops.deleteOne.filter] Delete the first document that matches this filter
 * @param {Object} [ops.deleteMany.filter] Delete all documents that match this filter
 * @param {Object} [ops.replaceOne.filter] Replace the first document that matches this filter
 * @param {Object} [ops.replaceOne.replacement] The replacement document
 * @param {Boolean} [ops.replaceOne.upsert=false] If true, insert a doc if no documents match `filter`
 * @param {Object} [ops.replaceOne.timestamps=true] If false, do not apply [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) to the operation
 * @param {Object} [options]
 * @param {Boolean} [options.ordered=true] If true, execute writes in order and stop at the first error. If false, execute writes in parallel and continue until all writes have either succeeded or errored.
 * @param {Boolean} [options.timestamps=true] If false, do not apply [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) to any operations. Can be overridden at the operation-level.
 * @param {ClientSession} [options.session=null] The session associated with this bulk write. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {String|number} [options.w=1] The [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/). See [`Query#w()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.w()) for more information.
 * @param {number} [options.wtimeout=null] The [write concern timeout](https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout).
 * @param {Boolean} [options.j=true] If false, disable [journal acknowledgement](https://www.mongodb.com/docs/manual/reference/write-concern/#j-option)
 * @param {Boolean} [options.skipValidation=false] Set to true to skip Mongoose schema validation on bulk write operations. Mongoose currently runs validation on `insertOne` and `replaceOne` operations by default.
 * @param {Boolean} [options.bypassDocumentValidation=false] If true, disable [MongoDB server-side schema validation](https://www.mongodb.com/docs/manual/core/schema-validation/) for all writes in this bulk.
 * @param {Boolean} [options.throwOnValidationError=false] If true and `ordered: false`, throw an error if one of the operations failed validation, but all valid operations completed successfully. Note that Mongoose will still send all valid operations to the MongoDB server.
 * @param {Boolean|"throw"} [options.strict=null] Overwrites the [`strict` option](https://mongoosejs.com/docs/guide.html#strict) on schema. If false, allows filtering and writing fields not defined in the schema for all writes in this bulk.
 * @return {Promise} resolves to a [`BulkWriteOpResult`](https://mongodb.github.io/node-mongodb-native/4.9/classes/BulkWriteResult.html) if the operation succeeds
 * @api public
 
 * Takes an array of documents, gets the changes and inserts/updates documents in the database
 * according to whether or not the document is new, or whether it has changes or not.
 *
 * `bulkSave` uses `bulkWrite` under the hood, so it's mostly useful when dealing with many documents (10K+)
 *
 * `bulkSave()` throws errors under the following conditions:
 *
 * - one of the provided documents fails validation. In this case, `bulkSave()` does not send a `bulkWrite()`, and throws the first validation error.
 * - `bulkWrite()` fails (for example, due to being unable to connect to MongoDB or due to duplicate key error)
 * - `bulkWrite()` did not insert or update **any** documents. In this case, `bulkSave()` will throw a DocumentNotFound error.
 *
 * Note that `bulkSave()` will **not** throw an error if only some of the `save()` calls succeeded.
 *
 * @param {Array<Document>} documents
 * @param {Object} [options] options passed to the underlying `bulkWrite()`
 * @param {Boolean} [options.timestamps] defaults to `null`, when set to false, mongoose will not add/update timestamps to the documents.
 * @param {ClientSession} [options.session=null] The session associated with this bulk write. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {String|number} [options.w=1] The [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/). See [`Query#w()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.w()) for more information.
 * @param {number} [options.wtimeout=null] The [write concern timeout](https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout).
 * @param {Boolean} [options.j=true] If false, disable [journal acknowledgement](https://www.mongodb.com/docs/manual/reference/write-concern/#j-option)
 * @param {Boolean} [options.validateBeforeSave=true] set to `false` to skip Mongoose validation on all documents
 * @return {BulkWriteResult} the return value from `bulkWrite()`
 /**\n *  ... ()`\n */ If not a MongoBulkWriteError, treat this as all documents failed to save.// If n ... o save.
 * Apply defaults to the given document or POJO.
 *
 * @param {Object|Document} obj object or document to apply defaults on
 * @returns {Object|Document}
 * @api public
 
 * Apply this model's virtuals to a given POJO. Virtuals execute with the POJO as the context `this`.
 *
 * #### Example:
 *
 *     const userSchema = new Schema({ name: String });
 *     userSchema.virtual('upper').get(function() { return this.name.toUpperCase(); });
 *     const User = mongoose.model('User', userSchema);
 *
 *     const obj = { name: 'John' };
 *     User.applyVirtuals(obj);
 *     obj.name; // 'John'
 *     obj.upper; // 'JOHN', Mongoose applied the return value of the virtual to the given object
 *
 * @param {Object} obj object or document to apply virtuals on
 * @param {Array<string>} [virtualsToApply] optional whitelist of virtuals to apply
 * @returns {Object} obj
 * @api public
  Nothing to do if this is already a hydrated document - it should already have virtuals// Noth ... irtuals
 * Apply this model's timestamps to a given POJO, including subdocument timestamps
 *
 * #### Example:
 *
 *     const userSchema = new Schema({ name: String }, { timestamps: true });
 *     const User = mongoose.model('User', userSchema);
 *
 *     const obj = { name: 'John' };
 *     User.applyTimestamps(obj);
 *     obj.createdAt; // 2024-06-01T18:00:00.000Z
 *     obj.updatedAt; // 2024-06-01T18:00:00.000Z
 *
 * @param {Object} obj object or document to apply virtuals on
 * @param {Object} [options]
 * @param {Boolean} [options.isUpdate=false] if true, treat this as an update: just set updatedAt, skip setting createdAt. If false, set both createdAt and updatedAt
 * @param {Function} [options.currentTime] if set, Mongoose will call this function to get the current time.
 * @returns {Object} obj
 * @api public
  Nothing to do if this is already a hydrated document - it should already have timestamps// Noth ... estamps
 * Cast the given POJO to the model's schema
 *
 * #### Example:
 *
 *     const Test = mongoose.model('Test', Schema({ num: Number }));
 *
 *     const obj = Test.castObject({ num: '42' });
 *     obj.num; // 42 as a number
 *
 *     Test.castObject({ num: 'not a number' }); // Throws a ValidationError
 *
 * @param {Object} obj object or document to cast
 * @param {Object} options options passed to castObject
 * @param {Boolean} options.ignoreCastErrors If set to `true` will not throw a ValidationError and only return values that were successfully cast.
 * @returns {Object} POJO casted to the model's schema
 * @throws {ValidationError} if casting failed for at least one path
 * @api public
 
 * Build bulk write operations for `bulkSave()`.
 *
 * @param {Array<Document>} documents The array of documents to build write operations of
 * @param {Object} options
 * @param {Boolean} options.skipValidation defaults to `false`, when set to true, building the write operations will bypass validating the documents.
 * @param {Boolean} options.timestamps defaults to `null`, when set to false, mongoose will not add/update timestamps to the documents.
 * @return {Array<Promise>} Returns a array of all Promises the function executes to be awaited.
 * @api private
  If shard key is set, add shard keys to _filter_ condition to right shard is targeted// If s ... argeted
 * Shortcut for creating a new Document from existing raw data, pre-saved in the DB.
 * The document returned has no paths marked as modified initially.
 *
 * #### Example:
 *
 *     // hydrate previous data into a Mongoose document
 *     const mongooseCandy = Candy.hydrate({ _id: '54108337212ffb6d459f854c', type: 'jelly bean' });
 *
 * @param {Object} obj
 * @param {Object|String|String[]} [projection] optional projection containing which fields should be selected for this document
 * @param {Object} [options] optional options
 * @param {Boolean} [options.setters=false] if true, apply schema setters when hydrating
 * @param {Boolean} [options.hydratedPopulatedDocs=false] if true, populates the docs if passing pre-populated data
 * @return {Document} document instance
 * @api public
 
 * Same as `updateOne()`, except MongoDB will update _all_ documents that match
 * `filter` (as opposed to just the first one) regardless of the value of
 * the `multi` option.
 *
 * **Note** updateMany will _not_ fire update middleware. Use `pre('updateMany')`
 * and `post('updateMany')` instead.
 *
 * #### Example:
 *
 *     const res = await Person.updateMany({ name: /Stark$/ }, { isDeleted: true });
 *     res.matchedCount; // Number of documents matched
 *     res.modifiedCount; // Number of documents modified
 *     res.acknowledged; // Boolean indicating the MongoDB server received the operation. This may be false if Mongoose did not send an update to the server because the update was empty.
 *     res.upsertedId; // null or an id containing a document that had to be upserted.
 *     res.upsertedCount; // Number indicating how many documents had to be upserted. Will either be 0 or 1.
 *
 *     // Other supported syntaxes
 *     await Person.find({ name: /Stark$/ }).updateMany({ isDeleted: true }); // Using chaining syntax
 *     await Person.find().updateMany({ isDeleted: true }); // Set `isDeleted` on _all_ Person documents
 *
 * This function triggers the following middleware.
 *
 * - `updateMany()`
 *
 * @param {Object} filter
 * @param {Object|Array} update. If array, this update will be treated as an update pipeline and not casted.
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Object} [options.writeConcern=null] sets the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/) for replica sets. Overrides the [schema-level write concern](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @return {Query}
 * @see Query docs https://mongoosejs.com/docs/queries.html
 * @see MongoDB docs https://www.mongodb.com/docs/manual/reference/command/update/#update-command-output
 * @see UpdateResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/UpdateResult.html
 * @api public
 
 * Update _only_ the first document that matches `filter`.
 *
 * - Use `replaceOne()` if you want to overwrite an entire document rather than using atomic operators like `$set`.
 *
 * #### Example:
 *
 *     const res = await Person.updateOne({ name: 'Jean-Luc Picard' }, { ship: 'USS Enterprise' });
 *     res.matchedCount; // Number of documents matched
 *     res.modifiedCount; // Number of documents modified
 *     res.acknowledged; // Boolean indicating the MongoDB server received the operation. This may be false if Mongoose did not send an update to the server because the update was empty.
 *     res.upsertedId; // null or an id containing a document that had to be upserted.
 *     res.upsertedCount; // Number indicating how many documents had to be upserted. Will either be 0 or 1.
 *
 *     // Other supported syntaxes
 *     await Person.findOne({ name: 'Jean-Luc Picard' }).updateOne({ ship: 'USS Enterprise' }); // Using chaining syntax
 *     await Person.updateOne({ ship: 'USS Enterprise' }); // Updates first doc's `ship` property
 *
 * This function triggers the following middleware.
 *
 * - `updateOne()`
 *
 * @param {Object} filter
 * @param {Object|Array} update. If array, this update will be treated as an update pipeline and not casted.
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Object} [options.writeConcern=null] sets the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/) for replica sets. Overrides the [schema-level write concern](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @return {Query}
 * @see Query docs https://mongoosejs.com/docs/queries.html
 * @see MongoDB docs https://www.mongodb.com/docs/manual/reference/command/update/#update-command-output
 * @see UpdateResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/UpdateResult.html
 * @api public
 
 * Replace the existing document with the given document (no atomic operators like `$set`).
 *
 * #### Example:
 *
 *     const res = await Person.replaceOne({ _id: 24601 }, { name: 'Jean Valjean' });
 *     res.matchedCount; // Number of documents matched
 *     res.modifiedCount; // Number of documents modified
 *     res.acknowledged; // Boolean indicating the MongoDB server received the operation.
 *     res.upsertedId; // null or an id containing a document that had to be upserted.
 *     res.upsertedCount; // Number indicating how many documents had to be upserted. Will either be 0 or 1.
 *
 * This function triggers the following middleware.
 *
 * - `replaceOne()`
 *
 * @param {Object} filter
 * @param {Object} doc
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Object} [options.writeConcern=null] sets the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/) for replica sets. Overrides the [schema-level write concern](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query}
 * @see Query docs https://mongoosejs.com/docs/queries.html
 * @see UpdateResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/UpdateResult.html
 * @return {Query}
 * @api public
 
 * Common code for `updateOne()`, `updateMany()`, `replaceOne()`, and `update()`
 * because they need to do the same thing
 * @api private
  gh-2406// gh-2406 make local deep copy of conditions// make ... ditions
 * Performs [aggregations](https://www.mongodb.com/docs/manual/aggregation/) on the models collection.
 *
 * The `aggregate` itself is returned.
 *
 * This function triggers the following middleware.
 *
 * - `aggregate()`
 *
 * #### Example:
 *
 *     // Find the max balance of all accounts
 *     const res = await Users.aggregate([
 *       { $group: { _id: null, maxBalance: { $max: '$balance' }}},
 *       { $project: { _id: 0, maxBalance: 1 }}
 *     ]);
 *
 *     console.log(res); // [ { maxBalance: 98000 } ]
 *
 *     // Or use the aggregation pipeline builder.
 *     const res = await Users.aggregate().
 *       group({ _id: null, maxBalance: { $max: '$balance' } }).
 *       project('-id maxBalance').
 *       exec();
 *     console.log(res); // [ { maxBalance: 98 } ]
 *
 * #### Note:
 *
 * - Mongoose does **not** cast aggregation pipelines to the model's schema because `$project` and `$group` operators allow redefining the "shape" of the documents at any stage of the pipeline, which may leave documents in an incompatible format. You can use the [mongoose-cast-aggregation plugin](https://github.com/AbdelrahmanHafez/mongoose-cast-aggregation) to enable minimal casting for aggregation pipelines.
 * - The documents returned are plain javascript objects, not mongoose documents (since any shape of document can be returned).
 *
 * #### More About Aggregations:
 *
 * - [Mongoose `Aggregate`](https://mongoosejs.com/docs/api/aggregate.html)
 * - [An Introduction to Mongoose Aggregate](https://masteringjs.io/tutorials/mongoose/aggregate)
 * - [MongoDB Aggregation docs](https://www.mongodb.com/docs/manual/applications/aggregation/)
 *
 * @see Aggregate https://mongoosejs.com/docs/api/aggregate.html#Aggregate()
 * @see MongoDB https://www.mongodb.com/docs/manual/applications/aggregation/
 * @param {Array} [pipeline] aggregation pipeline as an array of objects
 * @param {Object} [options] aggregation options
 * @return {Aggregate}
 * @api public
 
 * Casts and validates the given object against this model's schema, passing the
 * given `context` to custom validators.
 *
 * #### Example:
 *
 *     const Model = mongoose.model('Test', Schema({
 *       name: { type: String, required: true },
 *       age: { type: Number, required: true }
 *     });
 *
 *     try {
 *       await Model.validate({ name: null }, ['name'])
 *     } catch (err) {
 *       err instanceof mongoose.Error.ValidationError; // true
 *       Object.keys(err.errors); // ['name']
 *     }
 *
 * @param {Object} obj
 * @param {Object|Array|String} pathsOrOptions
 * @param {Object} [context]
 * @return {Promise<Object>} casted and validated copy of `obj` if validation succeeded
 * @api public
  For convenience, if we're validating a document or an object, make `context` default to// For  ... ault to the model so users don't have to always pass `context`, re: gh-10132, gh-10346// the  ... h-10346
 * Populates document references.
 *
 * Changed in Mongoose 6: the model you call `populate()` on should be the
 * "local field" model, **not** the "foreign field" model.
 *
 * #### Available top-level options:
 *
 * - path: space delimited path(s) to populate
 * - select: optional fields to select
 * - match: optional query conditions to match
 * - model: optional name of the model to use for population
 * - options: optional query options like sort, limit, etc
 * - justOne: optional boolean, if true Mongoose will always set `path` to a document, or `null` if no document was found. If false, Mongoose will always set `path` to an array, which will be empty if no documents are found. Inferred from schema by default.
 * - strictPopulate: optional boolean, set to `false` to allow populating paths that aren't in the schema.
 * - forceRepopulate: optional boolean, defaults to `true`. Set to `false` to prevent Mongoose from repopulating paths that are already populated
 *
 * #### Example:
 *
 *     const Dog = mongoose.model('Dog', new Schema({ name: String, breed: String }));
 *     const Person = mongoose.model('Person', new Schema({
 *       name: String,
 *       pet: { type: mongoose.ObjectId, ref: 'Dog' }
 *     }));
 *
 *     const pets = await Pet.create([
 *       { name: 'Daisy', breed: 'Beagle' },
 *       { name: 'Einstein', breed: 'Catalan Sheepdog' }
 *     ]);
 *
 *     // populate many plain objects
 *     const users = [
 *       { name: 'John Wick', dog: pets[0]._id },
 *       { name: 'Doc Brown', dog: pets[1]._id }
 *     ];
 *     await User.populate(users, { path: 'dog', select: 'name' });
 *     users[0].dog.name; // 'Daisy'
 *     users[0].dog.breed; // undefined because of `select`
 *
 * @param {Document|Array} docs Either a single document or array of documents to populate.
 * @param {Object|String} options Either the paths to populate or an object specifying all parameters
 * @param {string} [options.path=null] The path to populate.
 * @param {string|PopulateOptions} [options.populate=null] Recursively populate paths in the populated documents. See [deep populate docs](https://mongoosejs.com/docs/populate.html#deep-populate).
 * @param {boolean} [options.retainNullValues=false] By default, Mongoose removes null and undefined values from populated arrays. Use this option to make `populate()` retain `null` and `undefined` array entries.
 * @param {boolean} [options.getters=false] If true, Mongoose will call any getters defined on the `localField`. By default, Mongoose gets the raw value of `localField`. For example, you would need to set this option to `true` if you wanted to [add a `lowercase` getter to your `localField`](https://mongoosejs.com/docs/schematypes.html#schematype-options).
 * @param {boolean} [options.clone=false] When you do `BlogPost.find().populate('author')`, blog posts with the same author will share 1 copy of an `author` doc. Enable this option to make Mongoose clone populated docs before assigning them.
 * @param {Object|Function} [options.match=null] Add an additional filter to the populate query. Can be a filter object containing [MongoDB query syntax](https://www.mongodb.com/docs/manual/tutorial/query-documents/), or a function that returns a filter object.
 * @param {Boolean} [options.skipInvalidIds=false] By default, Mongoose throws a cast error if `localField` and `foreignField` schemas don't line up. If you enable this option, Mongoose will instead filter out any `localField` properties that cannot be casted to `foreignField`'s schema type.
 * @param {Number} [options.perDocumentLimit=null] For legacy reasons, `limit` with `populate()` may give incorrect results because it only executes a single query for every document being populated. If you set `perDocumentLimit`, Mongoose will ensure correct `limit` per document by executing a separate query for each document to `populate()`. For example, `.find().populate({ path: 'test', perDocumentLimit: 2 })` will execute 2 additional queries if `.find()` returns 2 documents.
 * @param {Boolean} [options.strictPopulate=true] Set to false to allow populating paths that aren't defined in the given model's schema.
 * @param {Object} [options.options=null] Additional options like `limit` and `lean`.
 * @param {Function} [options.transform=null] Function that Mongoose will call on every populated document that allows you to transform the populated document.
 * @param {Boolean} [options.forceRepopulate=true] Set to `false` to prevent Mongoose from repopulating paths that are already populated
 * @param {Boolean} [options.ordered=false] Set to `true` to execute any populate queries one at a time, as opposed to in parallel. Set this option to `true` if populating multiple paths or paths with multiple models in transactions.
 * @return {Promise}
 * @api public
  normalized paths// normalized paths each path has its own query options and must be executed separately// each ... arately Populate in series, primarily for transactions because MongoDB doesn't support multiple operations on// Popu ... ions on one transaction in parallel.// one  ... rallel. Note that if _any_ path has `ordered`, we make the top-level populate `ordered` as well.// Note ... s well. By default, populate in parallel// By d ... arallel!
 * Populates `docs` for a single `populateOptions` instance.
  normalize single / multiple docs passed// norm ...  passed no need to include undefined values in our query// no n ... r query Lean transform may delete `_id`, which would cause assignment// Lean ... ignment to fail. So delay running lean transform until _after_// to f ... _after_ `_assign()`// `_assign()` Ensure that we set to 0 or empty array even// Ensu ... ay even if we don't actually execute a query to make sure there's a value// if w ... a value and we know this path was populated for future sets. See gh-7731, gh-8230// and  ... gh-8230 override the exclusion from the query so we can use the _id// over ... the _id for document matching during assignment. we'll delete the// for  ... ete the _id back off before returning the result.// _id  ... result. preserve original select conditions by copying// pres ... copying If models but no docs, skip further deep populate.// If m ... pulate. If no models and no docs to populate but we have a nested populate,// If n ... pulate, probably a case of unnecessarily populating a non-ref path re: gh-8946// prob ... gh-8946 If we're doing virtual populate and projection is inclusive and foreign// If w ... foreign field is not selected, automatically select it because mongoose needs it.// fiel ... eds it. If projection is exclusive and client explicitly unselected the foreign// If p ... foreign field, that's the client's fault.// fiel ...  fault. If using count, still need the `foreignField` so we can match counts// If u ...  counts to documents, otherwise we would need a separate `count()` for every doc.// to d ... ry doc. If we need to sub-populate, call populate recursively// If w ... rsively If subpopulating on a discriminator, skip check for non-existent// If s ... xistent paths. Because the discriminator may not have the path defined.// path ... efined. Clone because `assignRawDocsToIdStructure` will mutate the array// Clon ... e array optimization:// optimization: record the document positions as returned by// reco ... rned by the query result.// the query result. May need to store multiple docs with the same id if there's multiple models// May  ...  models if we have discriminators or a ref function. But avoid converting to an array// if w ... n array if we have multiple queries on the same model because of `perDocumentLimit` re: gh-9906// if w ... gh-9906 flag each as result of population// flag ... ulation If virtual, make sure to not mutate original field// If v ... l field
 * Compiler utility.
 *
 * @param {String|Function} name model name or class extending Model
 * @param {Schema} schema
 * @param {String} collectionName
 * @param {Connection} connection
 * @param {Mongoose} base mongoose instance
 * @api private
  add versioning to top level documents only// add  ... ts only generate new class// gene ... w class If discriminator key is set, use the discriminator instead (gh-7586)// If d ... h-7586) Otherwise, just use the top-level model// Othe ... l model Create custom query constructor// Crea ... tructor
 * If auto encryption is enabled, returns a ClientEncryption instance that is configured with the same settings that
 * Mongoose's underlying MongoClient is using.  If the client has not yet been configured, returns null.
 *
 * @returns {ClientEncryption | null}
 /**\n *  ... ll}\n */
 * Update this model to use the new connection, including updating all internal
 * references and creating a new `Collection` instance using the new connection.
 * Not for external use, only used by `setDriver()` to ensure that you can still
 * call `setDriver()` after creating a model using `mongoose.model()`.
 *
 * @param {Connection} newConnection the new connection to use
 * @api private
 
 * Register custom query methods for this model
 *
 * @param {Model} model
 * @param {Schema} schema
 * @api private
 
 * Subclass this model with `conn`, `schema`, and `collection` settings.
 *
 * @param {Connection} conn
 * @param {Schema} [schema]
 * @param {String} [collection]
 * @return {Model}
 * @api private
 * @memberOf Model
 * @static
 * @method __subclass
  subclass model using this connection and collection name// subc ... on name Errors handled internally, so ignore// Erro ...  ignore
 * Apply changes made to this model's schema after this model was compiled.
 * By default, adding virtuals and other properties to a schema after the model is compiled does nothing.
 * Call this function to apply virtuals and properties that were added later.
 *
 * #### Example:
 *
 *     const schema = new mongoose.Schema({ field: String });
 *     const TestModel = mongoose.model('Test', schema);
 *     TestModel.schema.virtual('myVirtual').get(function() {
 *       return this.field + ' from myVirtual';
 *     });
 *     const doc = new TestModel({ field: 'Hello' });
 *     doc.myVirtual; // undefined
 *
 *     TestModel.recompileSchema();
 *     doc.myVirtual; // 'Hello from myVirtual'
 *
 * @return {undefined}
 * @api public
 * @memberOf Model
 * @static
 * @method recompileSchema
 
 * Helper for console.log. Given a model named 'MyModel', returns the string
 * `'Model { MyModel }'`.
 *
 * #### Example:
 *
 *     const MyModel = mongoose.model('Test', Schema({ name: String }));
 *     MyModel.inspect(); // 'Model { Test }'
 *     console.log(MyModel); // Prints 'Model { Test }'
 *
 * @api public
 
 * Return the MongoDB namespace for this model as a string. The namespace is the database name, followed by '.', followed by the collection name.
 *
 * #### Example:
 *
 *     const conn = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
 *     const TestModel = conn.model('Test', mongoose.Schema({ name: String }));
 *
 *     TestModel.namespace(); // 'mydb.tests'
 *
 * @api public
 !
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 /*!\n *  ... or.\n */'./aggregate''./error/notFound'Kareem'./error/overwriteModel'SaveOptions'./options/saveOptions''./error/version''./error/parallelSave'applyDefaultsHelper'./helpers/model/applyDefaultsToPOJO''./helpers/discriminator/applyEmbeddedDiscriminators''./helpers/model/applyMethods''./helpers/projection/applyProjection''./helpers/schema/applyReadConcern''./helpers/indexes/applySchemaCollation''./helpers/model/applyStaticHooks''./helpers/model/applyStatics'applyTimestampsHelper'./helpers/document/applyTimestamps''./helpers/schema/applyWriteConcern'applyVirtualsHelper'./helpers/document/applyVirtuals''./helpers/populate/assignVals''./helpers/populate/createPopulateQueryFilter''./helpers/update/decorateUpdateWithVersionKey''./helpers/model/discriminator''./helpers/each''./helpers/discriminator/getDiscriminatorByValue''./helpers/populate/getModelsMapForPopulate''./helpers/indexes/isDefaultIdIndex''./helpers/indexes/isIndexEqual''./helpers/indexes/isTimeseriesIndex''./helpers/indexes/getRelatedIndexes''./helpers/indexes/decorateDiscriminatorIndexOptions''./helpers/projection/isPathSelectedInclusive''./helpers/populate/leanPopulateMap''./helpers/parallelLimit''./helpers/model/pushNestedArrayPaths''./helpers/populate/removeDeselectedForeignField''./helpers/path/setDottedPath''./error/bulkSaveIncompleteError'modelCollectionSymbol'mongoose#Model#collection'modelDbSymbol'mongoose#Model#db'subclassedSymbol'mongoose#Model#subclassed'saveToObjectOptions'2nd argument to `Model` constructor must be a POJO or string, ''**not** a schema. Make sure you\'re calling `mongoose.model()`, not ''`mongoose.Model()`.''First argument to `Model` constructor must be an object, ''**not** a string. Make sure you\'re calling `mongoose.model()`, not '$isMongooseModelPrototypeuseConnection'Please provide a connection.'$collection$__collection_applyCustomWhere$__handleSave'checkKeys'checkKeys'document must have an _id before saving'_setIsNewpathToSave$__whereupdateOphandleEmptyUpdateoptionsWithCustomValuesdocumentExists$__save_transformDuplicateKeyError'save:error'versionBumpdoIncrement$versionErrorgenerateVersionErrordefaultPaths'Model.prototype.save() no longer accepts a callback'parallelSave$saveincrement_where'No _id found on document!''Model.prototype.deleteOne() no longer accepts a callback'queryPreDeleteOnecallSubdocPreHooksskipIfAlreadyDeletedcallSubdocPostHooksqueryPostDeleteOne$model_checkContext'exists''Model.exists() no longer accepts a callback'setOptions'The provided class '' must extend Model'mergePlugins'discriminator'$globalPluginsApplied'baseModelName'submodel'`Model.''()` cannot run without a ''model as `this`. Make sure you are calling `MyModel.''()` ''where `MyModel` is a Mongoose model.''model as `this`. Make sure you are not calling ''`new Model.''()`''Model.init() no longer accepts a callback'_ensureIndexes'autoIndex'ensureIndexes_automatic_createSearchIndexescreateSearchIndexes_createCollection_catch$caught'Model.createCollection() no longer accepts a callback'shouldSkipcollectionOptionscappedclusteredIndex'MongoServerError'48'syncIndexes''Model.syncIndexes() no longer accepts a callback'diffIndexesResultdiffIndexesindexOptionsToCreatedroppedcleanIndexestoDropcreateIndexestoCreatecreateSearchIndex'createSearchIndex'updateSearchIndex'updateSearchIndex'dropSearchIndex'dropSearchIndex'listSearchIndexes'listSearchIndexes'listIndexescodeName'NamespaceNotFound'getIndexesToDropgetIndexesToCreateschemaIndexOptions'cleanIndexes''Model.cleanIndexes() no longer accepts a callback'_dropIndexeshideIndexescollModdropIndex'listIndexes''Model.listIndexes() no longer accepts a callback''ensureIndexes''Model.ensureIndexes() no longer accepts a callback''createIndexes''Model.createIndexes() no longer accepts a callback'indexError'mongoose: Cannot specify a custom index on `_id` for ''model name "''", ''MongoDB does not allow overwriting the default `_id` index. See ''https://bit.ly/mongodb-id-index'indexSingleDone'index-single-done'indexSingleStart'index-single-start'baseSchemaIndexesindexFields'createSearchIndexes'searchIndex_searchIndexestranslateAliaseserrorOnDuplicates'translateAliases'translatedfieldKeyscurrentSchemaProvided object has both field "" and its alias "translatedKeyconditionsmq'Model.deleteMany() no longer accepts a callback''Model.find() no longer accepts a callback''findById''Model.findById() no longer accepts a callback''Model.findOne() no longer accepts a callback''Model.countDocuments() no longer accepts a callback''Model.distinct() no longer accepts a callback''where''Model.findOneAndUpdate() no longer accepts a callback''findByIdAndUpdate''Model.findByIdAndUpdate() no longer accepts a callback''Model.findOneAndDelete() no longer accepts a callback'findByIdAndDelete'findByIdAndDelete''Model.findByIdAndDelete() no longer accepts a callback''Model.findOneAndReplace() no longer accepts a callback''Model.create() no longer accepts a callback''create'hasCallback'WARNING: to pass a `session` to `Model.create()` in ''Mongoose, you **must** pass an array as the first argument. See: ''https://mongoosejs.com/docs/api/model.html#Model.create()'immediateErroraggregateErrors'Cannot call `create()` with a session and multiple documents unless `ordered: true` is set'" not found for model "toSaveallSettled'fulfilled'firstError" not found for model "'watch''fullDocument''startSession''Model.insertMany() no longer accepts a callback'validationErrorsToOriginalOrdertoExecutecreatedNewDoc'arr.'originalDocIndexvalidDocIndexToOriginalIndexdocAttributeserr1err2acknowledgeddocObjectsshouldSetTimestampsattributeinsertedDocshasWriteErrorserroredIndexesoriginalIndexfirstErroredIndexisErroredsetIsNewForInsertedDoc'Model.bulkWrite() no longer accepts a callback'_skipCastBulkWritewriteErrorsByIndexwriteErrorbulkSavebuildPreSavePromisewriteOperationsbuildBulkWriteOperationsbulkWriteError'MongoBulkWriteError'successfulDocumentsdocumentErrorwriteErrorDocumentIdhandleSuccessfulWritecastObjectcastNonArraysOptioncastNonArraysignoreCastErrorsbulkSave expects an array of documents to be passed, received \`\` insteadsetDefaultOptionsdocuments. was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).validateBeforeSaveisANewDocumentwriteOperationinjectTimestampsOptionisDocumentWithChangesshardKey'hydrate'createModel'updateMany `update` parameter cannot be nullish'_update'Model.aggregate() no longer accepts a callback'pathsOrOptions'Model.validate() no longer accepts a callback'settle_checkDone'populate''Model.populate() no longer accepts a callback'_populatePathpromisesexcludeIdRegexcludeIdRegGlobal/\s?-_id\s?/gmodelsMaphasOne_leanTransform_assign'-_id'_execPopulateQueryvalsFromDbsubPopulateselectedInclusivelybasePath__valversioningEnabledexecPreSync'createModel'Discriminator_preCompile_applyQueryMiddlewareapplyQueryMethodsclientEncryption'The mongodb driver must be used to obtain a ClientEncryption object.'autoEncryptionOptionskeyVaultNamespacekeyVaultClientkmsProviderscredentialProvidersproxyOptionstlsOptions$__updateConnectionnewConnectionsubclass'collection'toCollectionNamerecompileSchema_defaultToObjectOptionsMapModel { queryMiddlewarecontexts_getContexts_queryMiddlewareA Model is a class that's your primary tool for interacting with MongoDB.
An instance of a Model is called a [Document](https://mongoosejs.com/docs/api/document.html#Document).

In Mongoose, the term "Model" refers to subclasses of the `mongoose.Model`
class. You should not use the `mongoose.Model` class directly. The
[`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()) and
[`connection.model()`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.model()) functions
create subclasses of `mongoose.Model` as shown below.

#### Example:

// `UserModel` is a "Model", a subclass of `mongoose.Model`.
const UserModel = mongoose.model('User', new Schema({ name: String }));

// You can use a Model to create new documents using `new`:
const userDoc = new UserModel({ name: 'Foo' });
await userDoc.save();

// You also use a model to create queries:
const userFromDb = await UserModel.findOne({ name: 'Foo' });values for initial set
optional object containing the fields that were selected in the query which returned this document. You do **not** need to set this parameter to ensure Mongoose handles your [query projection](https://mongoosejs.com/docs/api/query.html#Query.prototype.select()).
optional boolean. If true, mongoose doesn't add an `_id` field to the document.
Document https://mongoosejs.com/docs/api/document.html
`error`: If listening to this event, 'error' is emitted when a document was saved and an `error` occurred. If not listening, the event bubbles to the connection used to create this Model.
`index`: Emitted after `Model#ensureIndexes` completes. If an error occurred it is passed with the event.
`index-single-start`: Emitted when an individual index starts within `Model#ensureIndexes`. The fields and options being used to build the index are also passed with the event.
`index-single-done`: Emitted when an individual index finishes within `Model#ensureIndexes`. If an error occurred it is passed with the event. The fields, options, and index name are also passed.
Inherits from Document.

All Model.prototype features are available on
top level (non-sub) documents.Connection the model uses.Model
Changes the Connection instance this model uses to make requests to MongoDB.
This function is most useful for changing the Connection that a Model defined using `mongoose.model()` uses
after initialization.

#### Example:

await mongoose.connect('mongodb://127.0.0.1:27017/db1');
const UserModel = mongoose.model('User', mongoose.Schema({ name: String }));
UserModel.connection === mongoose.connection; // true

const conn2 = await mongoose.createConnection('mongodb://127.0.0.1:27017/db2').asPromise();
UserModel.useConnection(conn2); // `UserModel` now stores documents in `db2`, not `db1`

UserModel.connection === mongoose.connection; // false
UserModel.connection === conn2; // true

conn2.model('User') === UserModel; // true
mongoose.model('User'); // Throws 'MissingSchemaError'

Note: `useConnection()` does **not** apply any [connection-level plugins](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.plugin()) from the new connection.
If you use `useConnection()` to switch a model's connection, the model will still have the old connection's plugins.@functionconnection The new connection to use
[Model] this
The collection instance this model uses.
A Mongoose collection is a thin wrapper around a [MongoDB Node.js driver collection]([MongoDB Node.js driver collection](https://mongodb.github.io/node-mongodb-native/Next/classes/Collection.html)).
Using `Model.collection` means you bypass Mongoose middleware, validation, and casting.

This property is read-only. Modifying this property is a no-op.Internal collection the model uses.

This property is read-only. Modifying this property is a no-op.The name of the modelAdditional properties to attach to the query when calling `save()` and
`isNew` is false.If this is a discriminator model, `baseModelName` is the name of
the base model.Event emitter that reports any errors that occurred. Useful for global error
handling.

#### Example:

MyModel.events.on('error', err => console.log(err.message));

// Prints a 'CastError' because of the above handler
await MyModel.findOne({ _id: 'Not a valid ObjectId' }).catch(noop);fires@fireserror whenever any query or model function errors
Compiled middleware for this model. Set in `applyHooks()`.Saves this document by inserting a new document into the database if [document.isNew](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew) is `true`,
or sends an [updateOne](https://mongoosejs.com/docs/api/document.html#Document.prototype.updateOne()) operation with just the modified paths if `isNew` is `false`.

#### Example:

product.sold = Date.now();
product = await product.save();

If save is successful, the returned promise will fulfill with the document
saved.

#### Example:

const newProduct = await product.save();
newProduct === product; // truethe [session](https://www.mongodb.com/docs/manual/reference/server-sessions/) associated with this save operation. If not specified, defaults to the [document's associated session](https://mongoosejs.com/docs/api/document.html#Document.prototype.session()).
if `true`, Mongoose will only validate modified paths, as opposed to modified paths and `required` paths.
the MongoDB driver prevents you from saving keys that start with '$' or contain '.' by default. Set this option to `false` to skip that check. See [restrictions on field names](https://docs.mongodb.com/manual/reference/limits/#mongodb-limit-Restrictions-on-Field-Names)
An array of paths that tell mongoose to only validate and save the paths in `pathsToSave`.
options.pathsToSaveif this [save updates an existing document](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew) but the document doesn't exist in the database. For example, you will get this error if the document is [deleted between when you retrieved the document and when you saved it](documents.html#updating).
Appends versioning to the where and update clauses.Signal that we desire an increment of this documents version.

#### Example:

const doc = await Model.findById(id);
doc.increment();
await doc.save();versionKeys https://mongoosejs.com/docs/guide.html#versionKey
Returns a query objectDelete this document from the db. Returns a Query instance containing a `deleteOne` operation by this document's `_id`.

#### Example:

await product.deleteOne();
await Product.findById(product._id); // null

Since `deleteOne()` returns a Query, the `deleteOne()` will **not** execute unless you use either `await`, `.then()`, `.catch()`, or [`.exec()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.exec())

#### Example:

product.deleteOne(); // Doesn't do anything
product.deleteOne().exec(); // Deletes the document, returns a promiseQuery
Returns the model instance used to create this document if no `name` specified.
If `name` specified, returns the model with the given `name`.

#### Example:

const doc = new Tank({});
doc.$model() === Tank; // true
await doc.$model('User').findById(id);model name
Returns a document with `_id` only if at least one document exists in the database that matches
the given `filter`, and `null` otherwise.

Under the hood, `MyModel.exists({ answer: 42 })` is equivalent to
`MyModel.findOne({ answer: 42 }).select({ _id: 1 }).lean()`

#### Example:

await Character.deleteMany({});
await Character.create({ name: 'Jean-Luc Picard' });

await Character.exists({ name: /picard/i }); // { _id: ... }
await Character.exists({ name: /riker/i }); // null

This function triggers the following middleware.

- `findOne()`Adds a discriminator type.

#### Example:

function BaseSchema() {
Schema.apply(this, arguments);

this.add({
name: String,
createdAt: Date
});
}
util.inherits(BaseSchema, Schema);

const PersonSchema = new BaseSchema();
const BossSchema = new BaseSchema({ department: String });

const Person = mongoose.model('Person', PersonSchema);
const Boss = Person.discriminator('Boss', BossSchema);
new Boss().__t; // "Boss". `__t` is the default `discriminatorKey`

const employeeSchema = new Schema({ boss: ObjectId });
const Employee = Person.discriminator('Employee', employeeSchema, 'staff');
new Employee().__t; // "staff" because of 3rd argument abovediscriminator model name
discriminator model schema
If string, same as `options.value`.
the string stored in the `discriminatorKey` property. If not specified, Mongoose uses the `name` parameter.
options.valueBy default, `discriminator()` clones the given `schema`. Set to `false` to skip cloning.
by default, Mongoose does not allow you to define a discriminator with the same name as another discriminator. Set this to allow overwriting discriminators with the same name.
By default, Mongoose merges the base schema's hooks with the discriminator schema's hooks. Set this option to `false` to make Mongoose use the discriminator schema's hooks instead.
options.mergeHooksBy default, Mongoose merges the base schema's plugins with the discriminator schema's plugins. Set this option to `false` to make Mongoose use the discriminator schema's plugins instead.
options.mergePluginsThe newly created discriminator model
Make sure `this` is a modelThis function is responsible for initializing the underlying connection in MongoDB based on schema options.
This function performs the following operations:

- `createCollection()` unless [`autoCreate`](https://mongoosejs.com/docs/guide.html#autoCreate) option is turned off
- `ensureIndexes()` unless [`autoIndex`](https://mongoosejs.com/docs/guide.html#autoIndex) option is turned off
- `createSearchIndex()` on all schema search indexes if `autoSearchIndex` is enabled.

Mongoose calls this function automatically when a model is a created using
[`mongoose.model()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()) or
[`connection.model()`](https://mongoosejs.com/docs/api/connection.html#Connection.prototype.model()), so you
don't need to call `init()` to trigger index builds.

However, you _may_ need to call `init()`  to get back a promise that will resolve when your indexes are finished.
Calling `await Model.init()` is helpful if you need to wait for indexes to build before continuing.
For example, if you want to wait for unique indexes to build before continuing with a test case.

#### Example:

const eventSchema = new Schema({ thing: { type: 'string', unique: true } })
// This calls `Event.init()` implicitly, so you don't need to call
// `Event.init()` on your own.
const Event = mongoose.model('Event', eventSchema);

await Event.init();
console.log('Indexes are done building!');Create the collection for this model. By default, if no indexes are specified,
mongoose will not create the collection for the model until any documents are
created. Use this method to create the collection explicitly.

Note 1: You may need to call this before starting a transaction
See https://www.mongodb.com/docs/manual/core/transactions/#transactions-and-operations

Note 2: You don't have to call this if your schema contains index or unique field.
In that case, just use `Model.init()`

#### Example:

const userSchema = new Schema({ name: String })
const User = mongoose.model('User', userSchema);

User.createCollection().then(function(collection) {
console.log('Collection is created!');
});Makes the indexes in MongoDB match the indexes defined in this model's
schema. This function will drop any indexes that are not defined in
the model's schema except the `_id` index, and build any indexes that
are in your schema but not in MongoDB.

See the [introductory blog post](https://thecodebarbarian.com/whats-new-in-mongoose-5-2-syncindexes)
for more information.

#### Example:

const schema = new Schema({ name: { type: String, unique: true } });
const Customer = mongoose.model('Customer', schema);
await Customer.collection.createIndex({ age: 1 }); // Index is not in schema
// Will drop the 'age' index and create an index on `name`
await Customer.syncIndexes();

You should be careful about running `syncIndexes()` on production applications under heavy load,
because index builds are expensive operations, and unexpected index drops can lead to degraded
performance. Before running `syncIndexes()`, you can use the [`diffIndexes()` function](#Model.diffIndexes())
to check what indexes `syncIndexes()` will drop and create.

#### Example:

const { toDrop, toCreate } = await Model.diffIndexes();
toDrop; // Array of strings containing names of indexes that `syncIndexes()` will drop
toCreate; // Array of strings containing names of indexes that `syncIndexes()` will createoptions to pass to `ensureIndexes()`
if specified, overrides each index's `background` property
set to `true` to hide indexes instead of dropping. Requires MongoDB server 4.4 or higher
options.hideIndexesCreate an [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/).
This function only works when connected to MongoDB Atlas.

#### Example:

const schema = new Schema({ name: { type: String, unique: true } });
const Customer = mongoose.model('Customer', schema);
await Customer.createSearchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });index options, including `name` and `definition`
description.namedescription.definitionUpdate an existing [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/).
This function only works when connected to MongoDB Atlas.

#### Example:

const schema = new Schema({ name: { type: String, unique: true } });
const Customer = mongoose.model('Customer', schema);
await Customer.updateSearchIndex('test', { mappings: { dynamic: true } });Delete an existing [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) by name.
This function only works when connected to MongoDB Atlas.

#### Example:

const schema = new Schema({ name: { type: String, unique: true } });
const Customer = mongoose.model('Customer', schema);
await Customer.dropSearchIndex('test');List all [Atlas search indexes](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) on this model's collection.
This function only works when connected to MongoDB Atlas.

#### Example:

const schema = new Schema({ name: { type: String, unique: true } });
const Customer = mongoose.model('Customer', schema);

await Customer.createSearchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });
const res = await Customer.listSearchIndexes(); // Includes `[{ name: 'test' }]`Promise.<Array>Does a dry-run of `Model.syncIndexes()`, returning the indexes that `syncIndexes()` would drop and create if you were to run `syncIndexes()`.

#### Example:

const { toDrop, toCreate } = await Model.diffIndexes();
toDrop; // Array of strings containing names of indexes that `syncIndexes()` will drop
toCreate; // Array of index specs containing the keys of indexes that `syncIndexes()` will createIf true, `toCreate` will include both the index spec and the index options, not just the index spec
options.indexOptionsToCreatecontains the indexes that would be dropped in MongoDB and indexes that would be created in MongoDB as `{ toDrop: string[], toCreate: string[] }`.Deletes all indexes that aren't defined in this model's schema. Used by
`syncIndexes()`.

The returned promise resolves to a list of the dropped indexes' names as an arrayif specified, contains a list of index names to drop
options.toDroplist of dropped or hidden index names
Promise.<Array.<String>>Lists the indexes currently defined in MongoDB. This may or may not be
the same as the indexes defined in your schema depending on whether you
use the [`autoIndex` option](https://mongoosejs.com/docs/guide.html#autoIndex) and if you
build indexes manually.Sends `createIndex` commands to mongo for each index declared in the schema.
The `createIndex` commands are sent in series.

#### Example:

await Event.ensureIndexes();

After completion, an `index` event is emitted on this `Model` passing an error if one occurred.

#### Example:

const eventSchema = new Schema({ thing: { type: 'string', unique: true } })
const Event = mongoose.model('Event', eventSchema);

Event.on('index', function (err) {
if (err) console.error(err); // error occurred during index creation
});

_NOTE: It is not recommended that you run this in production. Index creation may impact database performance depending on your load. Use with caution._Similar to `ensureIndexes()`, except for it uses the [`createIndex`](https://mongodb.github.io/node-mongodb-native/4.9/classes/Db.html#createIndex)
function.Creates all [Atlas search indexes](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) defined in this model's schema.
This function only works when connected to MongoDB Atlas.

#### Example:

const schema = new Schema({
name: String,
description: String
});
schema.searchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });
const Product = mongoose.model('Product', schema);

// Creates the search index defined in the schema
await Product.createSearchIndexes();resolves to the results of creating the search indexesSchema the model uses.Connection instance the model uses.Collection the model uses.Internal collection the model uses.Base Mongoose instance the model uses.Registered discriminators for this model.Translate any aliases fields/conditions so the final query or document object is pure

#### Example:

await Character.find(Character.translateAliases({
'': 'Eddard Stark' // Alias for 'name'
});

By default, `translateAliases()` overwrites raw fields with aliased fields.
So if `n` is an alias for `name`, `{ n: 'alias', name: 'raw' }` will resolve to `{ name: 'alias' }`.
However, you can set the `errorOnDuplicates` option to throw an error if there are potentially conflicting paths.
The `translateAliases` option for queries uses `errorOnDuplicates`.

#### Note:

Only translate arguments of object type anything else is returned rawfields/conditions that may contain aliased keys
if true, throw an error if there's both a key and an alias for that key in `fields`
the translated 'pure' fields/conditionsDeletes the first document that matches `conditions` from the collection.
It returns an object with the property `deletedCount` indicating how many documents were deleted.

#### Example:

await Character.deleteOne({ name: 'Eddard Stark' }); // returns {deletedCount: 1}

#### Note:

This function triggers `deleteOne` query hooks. Read the
[middleware docs](https://mongoosejs.com/docs/middleware.html#naming) to learn more.If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
options.translateAliasesDeletes all of the documents that match `conditions` from the collection.
It returns an object with the property `deletedCount` containing the number of documents deleted.

#### Example:

await Character.deleteMany({ name: /Stark/, age: { $gte: 18 } }); // returns {deletedCount: x} where x is the number of documents deleted.

#### Note:

This function triggers `deleteMany` query hooks. Read the
[middleware docs](https://mongoosejs.com/docs/middleware.html#naming) to learn more.Finds documents.

Mongoose casts the `filter` to match the model's schema before the command is sent.
See our [query casting tutorial](https://mongoosejs.com/docs/tutorials/query_casting.html) for
more information on how Mongoose casts `filter`.

#### Example:

// find all documents
await MyModel.find({});

// find all documents named john and at least 18
await MyModel.find({ name: 'john', age: { $gte: 18 } }).exec();

// executes, name LIKE john and only selecting the "name" and "friends" fields
await MyModel.find({ name: /john/i }, 'name friends').exec();

// passing options
await MyModel.find({ name: /john/i }, null, { skip: 10 }).exec();(Object|ObjectId)optional fields to return, see [`Query.prototype.select()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.select())
(Object|String|Array.<String>)=(Object|String|Array.<String>)field selection https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
query casting https://mongoosejs.com/docs/tutorials/query_casting.html
Finds a single document by its _id field. `findById(id)` is equivalent to `findOne({ _id: id })`.

The `id` is cast based on the Schema before sending the command.

This function triggers the following middleware.

- `findOne()`

#### Example:

// Find the adventure with the given `id`, or `null` if not found
await Adventure.findById(id).exec();

// select only the adventures name and length
await Adventure.findById(id, 'name length').exec();value of `_id` to query by
lean queries https://mongoosejs.com/docs/tutorials/lean.html
findById in Mongoose https://masteringjs.io/tutorials/mongoose/find-by-id
Finds one document.

The `conditions` are cast to their respective SchemaTypes before the command is sent.

*Note:* `conditions` is optional, and if `conditions` is null or undefined,
mongoose will send an empty `findOne` command to MongoDB, which will return
an arbitrary document. If you're querying by `_id`, use `findById()` instead.

#### Example:

// Find one adventure whose `country` is 'Croatia', otherwise `null`
await Adventure.findOne({ country: 'Croatia' }).exec();

// Model.findOne() no longer accepts a callback

// Select only the adventures name and length
await Adventure.findOne({ country: 'Croatia' }, 'name length').exec();Estimates the number of documents in the MongoDB collection. Faster than
using `countDocuments()` for large collections because
`estimatedDocumentCount()` uses collection metadata rather than scanning
the entire collection.

#### Example:

const numAdventures = await Adventure.estimatedDocumentCount();Counts number of documents matching `filter` in a database collection.

#### Example:

const count = await Adventure.countDocuments({ type: 'jungle' });
console.log('there are %d jungle adventures', count);

If you want to count all documents in a large collection,
use the [`estimatedDocumentCount()` function](https://mongoosejs.com/docs/api/model.html#Model.estimatedDocumentCount())
instead. If you call `countDocuments({})`, MongoDB will always execute
a full collection scan and **not** use any indexes.

The `countDocuments()` function is similar to `count()`, but there are a
[few operators that `countDocuments()` does not support](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments).
Below are the operators that `count()` supports but `countDocuments()` does not,
and the suggested replacement:

- `$where`: [`$expr`](https://www.mongodb.com/docs/manual/reference/operator/query/expr/)
- `$near`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$center`](https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center)
- `$nearSphere`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$centerSphere`](https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere)Creates a Query for a `distinct` operation.

#### Example:

const query = Link.distinct('url');
query.exec();Creates a Query, applies the passed conditions, and returns the Query.

For example, instead of writing:

User.find({ age: { $gte: 21, $lte: 65 } });

we can instead write:

User.where('age').gte(21).lte(65).exec();

Since the Query class also supports `where` you can continue chaining

User
.where('age').gte(21).lte(65)
.where('name', /^b/i)
... etcoptional value
Creates a `Query` and specifies a `$where` condition.

Sometimes you need to query for things in mongodb using a JavaScript expression. You can do so via `find({ $where: javascript })`, or you can use the mongoose shortcut method $where via a Query chain or from your mongoose Model.

Blog.$where('this.username.indexOf("val") !== -1').exec(function (err, docs) {});is a javascript string or anonymous function
argumentQuery.$where https://mongoosejs.com/docs/api/query.html#Query.prototype.$where
Issues a mongodb findOneAndUpdate command.

Finds a matching document, updates it according to the `update` arg, passing any `options`. A Query object is returned.

#### Example:

A.findOneAndUpdate(filter, update, options);  // returns Query
A.findOneAndUpdate(filter, update);           // returns Query
A.findOneAndUpdate(filter);                   // returns Query
A.findOneAndUpdate();                         // returns Query

// Other supported syntaxes
// Note that calling `Query#findOneAndUpdate()` with 1 arg will treat the arg as `update`, NOT `filter`
A.find(filter).findOneAndUpdate(update);

#### Note:

All top level update keys which are not `atomic` operation names are treated as set operations:

#### Example:

const query = { name: 'borne' };
Model.findOneAndUpdate(query, { name: 'jason bourne' }, options);

// is sent as
Model.findOneAndUpdate(query, { $set: { name: 'jason bourne' }}, options);

#### Note:

`findOneAndX` and `findByIdAndX` functions support limited validation that
you can enable by setting the `runValidators` option.

If you need full-fledged validation, use the traditional approach of first
retrieving the document.

const doc = await Model.findById(id);
doc.name = 'jason bourne';
await doc.save();Has two possible values, `'before'` and `'after'`. By default, it will return the document before the update was applied.
options.returnDocumentif truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and [the Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
if true, and no documents found, insert a new document
options.projectionif true, return the modified document rather than the original
options.newField selection. Equivalent to `.select(fields).findOneAndUpdate()`
options.fieldsputs a time limit on the query - requires mongodb >= 2.6.0
if multiple docs are found by the conditions, sets the sort order to choose which doc to update.
if true, runs [update validators](https://mongoosejs.com/docs/validation.html#update-validators) on this command. Update validators validate the update operation against the model's schema
options.runValidatorsIf `setDefaultsOnInsert` and `upsert` are true, mongoose will apply the [defaults](https://mongoosejs.com/docs/defaults.html) specified in the model's schema if a new document is created
options.setDefaultsOnInsertif true, returns the [raw result from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html)
options.includeResultMetadataMongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
options.overwriteDiscriminatorKeyTutorial https://mongoosejs.com/docs/tutorials/findoneandupdate.html
mongodb https://www.mongodb.com/docs/manual/reference/command/findAndModify/
Issues a mongodb findOneAndUpdate command by a document's _id field.
`findByIdAndUpdate(id, ...)` is equivalent to `findOneAndUpdate({ _id: id }, ...)`.

Finds a matching document, updates it according to the `update` arg,
passing any `options`, and returns the found document (if any).

This function triggers the following middleware.

- `findOneAndUpdate()`

#### Example:

A.findByIdAndUpdate(id, update, options)  // returns Query
A.findByIdAndUpdate(id, update)           // returns Query
A.findByIdAndUpdate()                     // returns Query

#### Note:

All top level update keys which are not `atomic` operation names are treated as set operations:

#### Example:

Model.findByIdAndUpdate(id, { name: 'jason bourne' }, options)

// is sent as
Model.findByIdAndUpdate(id, { $set: { name: 'jason bourne' }}, options)

#### Note:

`findOneAndX` and `findByIdAndX` functions support limited validation. You can
enable validation by setting the `runValidators` option.

If you need full-fledged validation, use the traditional approach of first
retrieving the document.

const doc = await Model.findById(id)
doc.name = 'jason bourne';
await doc.save();(Object|Number|String)if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
sets the document fields to return.
Model.findOneAndUpdate https://mongoosejs.com/docs/api/model.html#Model.findOneAndUpdate()
Issue a MongoDB `findOneAndDelete()` command.

Finds a matching document, removes it, and returns the found document (if any).

This function triggers the following middleware.

- `findOneAndDelete()`

#### Example:

A.findOneAndDelete(conditions, options)  // return Query
A.findOneAndDelete(conditions) // returns Query
A.findOneAndDelete()           // returns Query

`findOneAndX` and `findByIdAndX` functions support limited validation. You can
enable validation by setting the `runValidators` option.

If you need full-fledged validation, use the traditional approach of first
retrieving the document.

const doc = await Model.findById(id)
doc.name = 'jason bourne';
await doc.save();Issue a MongoDB `findOneAndDelete()` command by a document's _id field.
In other words, `findByIdAndDelete(id)` is a shorthand for
`findOneAndDelete({ _id: id })`.

This function triggers the following middleware.

- `findOneAndDelete()`Model.findOneAndDelete https://mongoosejs.com/docs/api/model.html#Model.findOneAndDelete()
mongodb https://www.mongodb.com/docs/manual/reference/command/findAndModify/Issue a MongoDB `findOneAndReplace()` command.

Finds a matching document, replaces it with the provided doc, and returns the document.

This function triggers the following query middleware.

- `findOneAndReplace()`

#### Example:

A.findOneAndReplace(filter, replacement, options)  // return Query
A.findOneAndReplace(filter, replacement) // returns Query
A.findOneAndReplace()                    // returns QueryReplace the first document that matches this filter
Replace with this document
Shortcut for saving one or more documents to the database.
`MyModel.create(docs)` does `new MyModel(doc).save()` for every doc in
docs.

This function triggers the following middleware.

- `save()`

#### Example:

// Insert one new `Character` document
await Character.create({ name: 'Jean-Luc Picard' });

// Insert multiple new `Character` documents
await Character.create([{ name: 'Will Riker' }, { name: 'Geordi LaForge' }]);

// Create a new character within a transaction. Note that you **must**
// pass an array as the first parameter to `create()` if you want to
// specify options.
await Character.create([{ name: 'Jean-Luc Picard' }], { session });Documents to insert, as a spread or array
(Array|Object)Options passed down to `save()`. To specify `options`, `docs` **must** be an array, not a spread. See [Model.save](https://mongoosejs.com/docs/api/model.html#Model.prototype.save()) for available options.
saves the docs in series rather than parallel.
Aggregate Errors instead of throwing the first one that occurs. Default: false
options.aggregateErrorsShortcut for saving one document to the database.
`MyModel.insertOne(obj, options)` is almost equivalent to `new MyModel(obj).save(options)`.
The difference is that `insertOne()` checks if `obj` is already a document, and checks for discriminators.

This function triggers the following middleware.

- `save()`

#### Example:

// Insert one new `Character` document
const character = await Character.insertOne({ name: 'Jean-Luc Picard' });
character.name; // 'Jean-Luc Picard'

// Create a new character within a transaction.
await Character.insertOne({ name: 'Jean-Luc Picard' }, { session });Document to insert, as a POJO or Mongoose document
(Object|Document)Options passed down to `save()`.
resolves to the saved document
Promise.<Document>_Requires a replica set running MongoDB >= 3.6.0._ Watches the
underlying collection for changes using
[MongoDB change streams](https://www.mongodb.com/docs/manual/changeStreams/).

This function does **not** trigger any middleware. In particular, it
does **not** trigger aggregate middleware.

The ChangeStream object is an event emitter that emits the following events:

- 'change': A change occurred, see below example
- 'error': An unrecoverable error occurred. In particular, change streams currently error out if they lose connection to the replica set primary. Follow [this GitHub issue](https://github.com/Automattic/mongoose/issues/6799) for updates.
- 'end': Emitted if the underlying stream is closed
- 'close': Emitted if the underlying stream is closed

#### Example:

const doc = await Person.create({ name: 'Ned Stark' });
const changeStream = Person.watch().on('change', change => console.log(change));
// Will print from the above `console.log()`:
// { _id: { _data: ... },
//   operationType: 'delete',
//   ns: { db: 'mydb', coll: 'Person' },
//   documentKey: { _id: 5a51b125c5500f5aa094c7bd } }
await doc.deleteOne();see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#watch)
if true and `fullDocument: 'updateLookup'` is set, Mongoose will automatically hydrate `fullDocument` into a fully fledged Mongoose document
mongoose-specific change stream wrapper, inherits from EventEmitter
_Requires MongoDB >= 3.6.0._ Starts a [MongoDB session](https://www.mongodb.com/docs/manual/release-notes/3.6/#client-sessions)
for benefits like causal consistency, [retryable writes](https://www.mongodb.com/docs/manual/core/retryable-writes/),
and [transactions](https://thecodebarbarian.com/a-node-js-perspective-on-mongodb-4-transactions.html).

Calling `MyModel.startSession()` is equivalent to calling `MyModel.db.startSession()`.

This function does not trigger any middleware.

#### Example:

const session = await Person.startSession();
let doc = await Person.findOne({ name: 'Ned Stark' }, null, { session });
await doc.deleteOne();
// `doc` will always be null, even if reading from a replica set
// secondary. Without causal consistency, it is possible to
// get a doc back from the below query if the query reads from a
// secondary that is experiencing replication lag.
doc = await Person.findOne({ name: 'Ned Stark' }, null, { session, readPreference: 'secondary' });Shortcut for validating an array of documents and inserting them into
MongoDB if they're all valid. This function is faster than `.create()`
because it only sends one operation to the server, rather than one for each
document.

Mongoose always validates each document **before** sending `insertMany`
to MongoDB. So if one document has a validation error, no documents will
be saved, unless you set
[the `ordered` option to false](https://www.mongodb.com/docs/manual/reference/method/db.collection.insertMany/#error-handling).

This function does **not** trigger save middleware.

This function triggers the following middleware.

- `insertMany()`

#### Example:

const docs = await Movies.insertMany([
{ name: 'Star Wars' },
{ name: 'The Empire Strikes Back' }
]);
docs[0].name; // 'Star Wars'

// Return raw result from MongoDB
const result = await Movies.insertMany([
{ name: 'Star Wars' },
{ name: 'The Empire Strikes Back' }
], { rawResult: true });(s)
(Array|Object|*)see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#insertMany)
if true, will fail fast on the first error encountered. If false, will insert all the documents it can and report errors later. An `insertMany()` with `ordered = false` is called an "unordered" `insertMany()`.
if false, the returned promise resolves to the documents that passed mongoose document validation. If `true`, will return the [raw result from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/InsertManyResult.html) with a `mongoose` property that contains `validationErrors` and `results` if this is an unordered `insertMany`.
options.rawResultif `true`, skips hydrating the documents. This means Mongoose will **not** cast, validate, or apply defaults to any of the documents passed to `insertMany()`. This option is useful if you need the extra performance, but comes with data integrity risk. Consider using with [`castObject()`](https://mongoosejs.com/docs/api/model.html#Model.castObject()) and [`applyDefaults()`](https://mongoosejs.com/docs/api/model.html#Model.applyDefaults()).
this limits the number of documents being processed (validation/casting) by mongoose in parallel, this does **NOT** send the documents in batches to MongoDB. Use this option if you're processing a large number of documents and your app is running out of memory.
populates the result documents. This option is a no-op if `rawResult` is set.
(String|Object|Array)=If true and `ordered: false`, throw an error if one of the operations failed validation, but all valid operations completed successfully.
options.throwOnValidationErrorresolving to the raw result from the MongoDB driver if `options.rawResult` was `true`, or the documents that passed validation, otherwise
Sends multiple `insertOne`, `updateOne`, `updateMany`, `replaceOne`,
`deleteOne`, and/or `deleteMany` operations to the MongoDB server in one
command. This is faster than sending multiple independent operations (e.g.
if you use `create()`) because with `bulkWrite()` there is only one round
trip to MongoDB.

Mongoose will perform casting on all operations you provide.
The only exception is [setting the `update` operator for `updateOne` or `updateMany` to a pipeline](https://www.mongodb.com/docs/manual/reference/method/db.collection.bulkWrite/#updateone-and-updatemany): Mongoose does **not** cast update pipelines.

This function does **not** trigger any middleware, neither `save()`, nor `update()`.
If you need to trigger
`save()` middleware for every document use [`create()`](https://mongoosejs.com/docs/api/model.html#Model.create()) instead.

#### Example:

Character.bulkWrite([
{
insertOne: {
document: {
name: 'Eddard Stark',
title: 'Warden of the North'
}
}
},
{
updateOne: {
filter: { name: 'Eddard Stark' },
// If you were using the MongoDB driver directly, you'd need to do
// `update: { $set: { title: ... } }` but mongoose adds $set for
// you.
update: { title: 'Hand of the King' }
}
},
{
deleteOne: {
filter: { name: 'Eddard Stark' }
}
}
]).then(res => {
// Prints "1 1 1"
console.log(res.insertedCount, res.modifiedCount, res.deletedCount);
});

// Mongoose does **not** cast update pipelines, so no casting for the `update` option below.
// Mongoose does still cast `filter`
await Character.bulkWrite([{
updateOne: {
filter: { name: 'Annika Hansen' },
update: [{ $set: { name: 7 } }] // Array means update pipeline, so Mongoose skips casting
}
}]);

The [supported operations](https://www.mongodb.com/docs/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite) are:

- `insertOne`
- `updateOne`
- `updateMany`
- `deleteOne`
- `deleteMany`
- `replaceOne`The document to insert
ops.insertOne.documentIf false, do not apply [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) to the operation
ops.insertOne.timestampsUpdate the first document that matches this filter
ops.updateOne.filterAn object containing [update operators](https://www.mongodb.com/docs/manual/reference/operator/update/)
ops.updateOne.updateIf true, insert a doc if none match
ops.updateOne.upsertops.updateOne.timestampsThe [MongoDB collation](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-collations) to use
ops.updateOne.collationThe [array filters](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-36-array-filters.html) used in `update`
ops.updateOne.arrayFiltersUpdate all the documents that match this filter
ops.updateMany.filterops.updateMany.updateIf true, insert a doc if no documents match `filter`
ops.updateMany.upsertops.updateMany.timestampsops.updateMany.collationops.updateMany.arrayFiltersDelete the first document that matches this filter
ops.deleteOne.filterDelete all documents that match this filter
ops.deleteMany.filterops.replaceOne.filterThe replacement document
ops.replaceOne.replacementops.replaceOne.upsertops.replaceOne.timestampsIf true, execute writes in order and stop at the first error. If false, execute writes in parallel and continue until all writes have either succeeded or errored.
If false, do not apply [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) to any operations. Can be overridden at the operation-level.
The session associated with this bulk write. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
The [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/). See [`Query#w()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.w()) for more information.
(String|number)=(String|number)The [write concern timeout](https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout).
If false, disable [journal acknowledgement](https://www.mongodb.com/docs/manual/reference/write-concern/#j-option)
Set to true to skip Mongoose schema validation on bulk write operations. Mongoose currently runs validation on `insertOne` and `replaceOne` operations by default.
options.skipValidationIf true, disable [MongoDB server-side schema validation](https://www.mongodb.com/docs/manual/core/schema-validation/) for all writes in this bulk.
options.bypassDocumentValidationIf true and `ordered: false`, throw an error if one of the operations failed validation, but all valid operations completed successfully. Note that Mongoose will still send all valid operations to the MongoDB server.
Overwrites the [`strict` option](https://mongoosejs.com/docs/guide.html#strict) on schema. If false, allows filtering and writing fields not defined in the schema for all writes in this bulk.
resolves to a [`BulkWriteOpResult`](https://mongodb.github.io/node-mongodb-native/4.9/classes/BulkWriteResult.html) if the operation succeeds
Takes an array of documents, gets the changes and inserts/updates documents in the database
according to whether or not the document is new, or whether it has changes or not.

`bulkSave` uses `bulkWrite` under the hood, so it's mostly useful when dealing with many documents (10K+)

`bulkSave()` throws errors under the following conditions:

- one of the provided documents fails validation. In this case, `bulkSave()` does not send a `bulkWrite()`, and throws the first validation error.
- `bulkWrite()` fails (for example, due to being unable to connect to MongoDB or due to duplicate key error)
- `bulkWrite()` did not insert or update **any** documents. In this case, `bulkSave()` will throw a DocumentNotFound error.

Note that `bulkSave()` will **not** throw an error if only some of the `save()` calls succeeded.options passed to the underlying `bulkWrite()`
defaults to `null`, when set to false, mongoose will not add/update timestamps to the documents.
set to `false` to skip Mongoose validation on all documents
the return value from `bulkWrite()`Apply defaults to the given document or POJO.object or document to apply defaults on
Apply this model's virtuals to a given POJO. Virtuals execute with the POJO as the context `this`.

#### Example:

const userSchema = new Schema({ name: String });
userSchema.virtual('upper').get(function() { return this.name.toUpperCase(); });
const User = mongoose.model('User', userSchema);

const obj = { name: 'John' };
User.applyVirtuals(obj);
obj.name; // 'John'
obj.upper; // 'JOHN', Mongoose applied the return value of the virtual to the given objectobject or document to apply virtuals on
obj
Apply this model's timestamps to a given POJO, including subdocument timestamps

#### Example:

const userSchema = new Schema({ name: String }, { timestamps: true });
const User = mongoose.model('User', userSchema);

const obj = { name: 'John' };
User.applyTimestamps(obj);
obj.createdAt; // 2024-06-01T18:00:00.000Z
obj.updatedAt; // 2024-06-01T18:00:00.000Zif set, Mongoose will call this function to get the current time.
Cast the given POJO to the model's schema

#### Example:

const Test = mongoose.model('Test', Schema({ num: Number }));

const obj = Test.castObject({ num: '42' });
obj.num; // 42 as a number

Test.castObject({ num: 'not a number' }); // Throws a ValidationErrorobject or document to cast
options passed to castObject
If set to `true` will not throw a ValidationError and only return values that were successfully cast.
options.ignoreCastErrorsPOJO casted to the model's schema
if casting failed for at least one path
Build bulk write operations for `bulkSave()`.The array of documents to build write operations of
defaults to `false`, when set to true, building the write operations will bypass validating the documents.
Returns a array of all Promises the function executes to be awaited.
Array.<Promise>Shortcut for creating a new Document from existing raw data, pre-saved in the DB.
The document returned has no paths marked as modified initially.

#### Example:

// hydrate previous data into a Mongoose document
const mongooseCandy = Candy.hydrate({ _id: '54108337212ffb6d459f854c', type: 'jelly bean' });optional projection containing which fields should be selected for this document
if true, apply schema setters when hydrating
options.settersif true, populates the docs if passing pre-populated data
options.hydratedPopulatedDocsSame as `updateOne()`, except MongoDB will update _all_ documents that match
`filter` (as opposed to just the first one) regardless of the value of
the `multi` option.

**Note** updateMany will _not_ fire update middleware. Use `pre('updateMany')`
and `post('updateMany')` instead.

#### Example:

const res = await Person.updateMany({ name: /Stark$/ }, { isDeleted: true });
res.matchedCount; // Number of documents matched
res.modifiedCount; // Number of documents modified
res.acknowledged; // Boolean indicating the MongoDB server received the operation. This may be false if Mongoose did not send an update to the server because the update was empty.
res.upsertedId; // null or an id containing a document that had to be upserted.
res.upsertedCount; // Number indicating how many documents had to be upserted. Will either be 0 or 1.

// Other supported syntaxes
await Person.find({ name: /Stark$/ }).updateMany({ isDeleted: true }); // Using chaining syntax
await Person.find().updateMany({ isDeleted: true }); // Set `isDeleted` on _all_ Person documents

This function triggers the following middleware.

- `updateMany()`If array, this update will be treated as an update pipeline and not casted.
update.null(Object|Array)sets the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/) for replica sets. Overrides the [schema-level write concern](https://mongoosejs.com/docs/guide.html#writeConcern)
If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Does nothing if schema-level timestamps are not set.
Query docs https://mongoosejs.com/docs/queries.html
MongoDB docs https://www.mongodb.com/docs/manual/reference/command/update/#update-command-output
UpdateResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/UpdateResult.html
Update _only_ the first document that matches `filter`.

- Use `replaceOne()` if you want to overwrite an entire document rather than using atomic operators like `$set`.

#### Example:

const res = await Person.updateOne({ name: 'Jean-Luc Picard' }, { ship: 'USS Enterprise' });
res.matchedCount; // Number of documents matched
res.modifiedCount; // Number of documents modified
res.acknowledged; // Boolean indicating the MongoDB server received the operation. This may be false if Mongoose did not send an update to the server because the update was empty.
res.upsertedId; // null or an id containing a document that had to be upserted.
res.upsertedCount; // Number indicating how many documents had to be upserted. Will either be 0 or 1.

// Other supported syntaxes
await Person.findOne({ name: 'Jean-Luc Picard' }).updateOne({ ship: 'USS Enterprise' }); // Using chaining syntax
await Person.updateOne({ ship: 'USS Enterprise' }); // Updates first doc's `ship` property

This function triggers the following middleware.

- `updateOne()`Replace the existing document with the given document (no atomic operators like `$set`).

#### Example:

const res = await Person.replaceOne({ _id: 24601 }, { name: 'Jean Valjean' });
res.matchedCount; // Number of documents matched
res.modifiedCount; // Number of documents modified
res.acknowledged; // Boolean indicating the MongoDB server received the operation.
res.upsertedId; // null or an id containing a document that had to be upserted.
res.upsertedCount; // Number indicating how many documents had to be upserted. Will either be 0 or 1.

This function triggers the following middleware.

- `replaceOne()`Common code for `updateOne()`, `updateMany()`, `replaceOne()`, and `update()`
because they need to do the same thingPerforms [aggregations](https://www.mongodb.com/docs/manual/aggregation/) on the models collection.

The `aggregate` itself is returned.

This function triggers the following middleware.

- `aggregate()`

#### Example:

// Find the max balance of all accounts
const res = await Users.aggregate([
{ $group: { _id: null, maxBalance: { $max: '$balance' }}},
{ $project: { _id: 0, maxBalance: 1 }}
]);

console.log(res); // [ { maxBalance: 98000 } ]

// Or use the aggregation pipeline builder.
const res = await Users.aggregate().
group({ _id: null, maxBalance: { $max: '$balance' } }).
project('-id maxBalance').
exec();
console.log(res); // [ { maxBalance: 98 } ]

#### Note:

- Mongoose does **not** cast aggregation pipelines to the model's schema because `$project` and `$group` operators allow redefining the "shape" of the documents at any stage of the pipeline, which may leave documents in an incompatible format. You can use the [mongoose-cast-aggregation plugin](https://github.com/AbdelrahmanHafez/mongoose-cast-aggregation) to enable minimal casting for aggregation pipelines.
- The documents returned are plain javascript objects, not mongoose documents (since any shape of document can be returned).

#### More About Aggregations:

- [Mongoose `Aggregate`](https://mongoosejs.com/docs/api/aggregate.html)
- [An Introduction to Mongoose Aggregate](https://masteringjs.io/tutorials/mongoose/aggregate)
- [MongoDB Aggregation docs](https://www.mongodb.com/docs/manual/applications/aggregation/)Aggregate https://mongoosejs.com/docs/api/aggregate.html#Aggregate()
aggregation options
Casts and validates the given object against this model's schema, passing the
given `context` to custom validators.

#### Example:

const Model = mongoose.model('Test', Schema({
name: { type: String, required: true },
age: { type: Number, required: true }
});

try {
await Model.validate({ name: null }, ['name'])
} catch (err) {
err instanceof mongoose.Error.ValidationError; // true
Object.keys(err.errors); // ['name']
}(Object|Array|String)casted and validated copy of `obj` if validation succeeded
Populates document references.

Changed in Mongoose 6: the model you call `populate()` on should be the
"local field" model, **not** the "foreign field" model.

#### Available top-level options:

- path: space delimited path(s) to populate
- select: optional fields to select
- match: optional query conditions to match
- model: optional name of the model to use for population
- options: optional query options like sort, limit, etc
- justOne: optional boolean, if true Mongoose will always set `path` to a document, or `null` if no document was found. If false, Mongoose will always set `path` to an array, which will be empty if no documents are found. Inferred from schema by default.
- strictPopulate: optional boolean, set to `false` to allow populating paths that aren't in the schema.
- forceRepopulate: optional boolean, defaults to `true`. Set to `false` to prevent Mongoose from repopulating paths that are already populated

#### Example:

const Dog = mongoose.model('Dog', new Schema({ name: String, breed: String }));
const Person = mongoose.model('Person', new Schema({
name: String,
pet: { type: mongoose.ObjectId, ref: 'Dog' }
}));

const pets = await Pet.create([
{ name: 'Daisy', breed: 'Beagle' },
{ name: 'Einstein', breed: 'Catalan Sheepdog' }
]);

// populate many plain objects
const users = [
{ name: 'John Wick', dog: pets[0]._id },
{ name: 'Doc Brown', dog: pets[1]._id }
];
await User.populate(users, { path: 'dog', select: 'name' });
users[0].dog.name; // 'Daisy'
users[0].dog.breed; // undefined because of `select`Either a single document or array of documents to populate.
(Document|Array)Either the paths to populate or an object specifying all parameters
By default, Mongoose removes null and undefined values from populated arrays. Use this option to make `populate()` retain `null` and `undefined` array entries.
If true, Mongoose will call any getters defined on the `localField`. By default, Mongoose gets the raw value of `localField`. For example, you would need to set this option to `true` if you wanted to [add a `lowercase` getter to your `localField`](https://mongoosejs.com/docs/schematypes.html#schematype-options).
By default, Mongoose throws a cast error if `localField` and `foreignField` schemas don't line up. If you enable this option, Mongoose will instead filter out any `localField` properties that cannot be casted to `foreignField`'s schema type.
options.skipInvalidIdsFor legacy reasons, `limit` with `populate()` may give incorrect results because it only executes a single query for every document being populated. If you set `perDocumentLimit`, Mongoose will ensure correct `limit` per document by executing a separate query for each document to `populate()`. For example, `.find().populate({ path: 'test', perDocumentLimit: 2 })` will execute 2 additional queries if `.find()` returns 2 documents.
Set to false to allow populating paths that aren't defined in the given model's schema.
options.strictPopulateSet to `true` to execute any populate queries one at a time, as opposed to in parallel. Set this option to `true` if populating multiple paths or paths with multiple models in transactions.
Compiler utility.model name or class extending Model
mongoose instance
If auto encryption is enabled, returns a ClientEncryption instance that is configured with the same settings that
Mongoose's underlying MongoClient is using.  If the client has not yet been configured, returns null.(ClientEncryption|null)Update this model to use the new connection, including updating all internal
references and creating a new `Collection` instance using the new connection.
Not for external use, only used by `setDriver()` to ensure that you can still
call `setDriver()` after creating a model using `mongoose.model()`.the new connection to use
Register custom query methods for this modelSubclass this model with `conn`, `schema`, and `collection` settings.Apply changes made to this model's schema after this model was compiled.
By default, adding virtuals and other properties to a schema after the model is compiled does nothing.
Call this function to apply virtuals and properties that were added later.

#### Example:

const schema = new mongoose.Schema({ field: String });
const TestModel = mongoose.model('Test', schema);
TestModel.schema.virtual('myVirtual').get(function() {
return this.field + ' from myVirtual';
});
const doc = new TestModel({ field: 'Hello' });
doc.myVirtual; // undefined

TestModel.recompileSchema();
doc.myVirtual; // 'Hello from myVirtual'Helper for console.log. Given a model named 'MyModel', returns the string
`'Model { MyModel }'`.

#### Example:

const MyModel = mongoose.model('Test', Schema({ name: String }));
MyModel.inspect(); // 'Model { Test }'
console.log(MyModel); // Prints 'Model { Test }'Return the MongoDB namespace for this model as a string. The namespace is the database name, followed by '.', followed by the collection name.

#### Example:

const conn = mongoose.createConnection('mongodb://127.0.0.1:27017/mydb');
const TestModel = conn.model('Test', mongoose.Schema({ name: String }));

TestModel.namespace(); // 'mydb.tests'const A ... gate');Aggrega ... egate')require ... egate')./aggregate/aggregateconst D ... ment');const D ... ound');Documen ... Found')./error/notFound/error/notFoundconst K ... reem');Kareem  ... areem')const O ... odel');Overwri ... Model')'./erro ... eModel'./error/overwriteModel/error/overwriteModelconst S ... ions');SaveOpt ... tions')./options/saveOptions/options/saveOptionsconst V ... sion');Version ... rsion')require ... rsion')./error/version/error/versionconst P ... Save');Paralle ... lSave')'./erro ... elSave'./error/parallelSave/error/parallelSaveconst a ... POJO');applyDe ... oPOJO')require ... oPOJO')'./help ... ToPOJO'./helpers/model/applyDefaultsToPOJO/helpers/model/applyDefaultsToPOJOconst a ... tors');applyEm ... ators')'./help ... nators'./helpers/discriminator/applyEmbeddedDiscriminators/helpers/discriminator/applyEmbeddedDiscriminatorsconst a ... hods');applyMe ... thods')require ... thods')'./help ... ethods'./helpers/model/applyMethods/helpers/model/applyMethodsconst a ... tion');applyPr ... ction')./helpers/projection/applyProjection/helpers/projection/applyProjectionconst a ... cern');applyRe ... ncern')require ... ncern')'./help ... oncern'./helpers/schema/applyReadConcern/helpers/schema/applyReadConcernapplySc ... ation')'./help ... lation'./helpers/indexes/applySchemaCollation/helpers/indexes/applySchemaCollationapplySt ... Hooks')'./help ... cHooks'./helpers/model/applyStaticHooks/helpers/model/applyStaticHooksconst a ... tics');applySt ... atics')require ... atics')'./help ... tatics'./helpers/model/applyStatics/helpers/model/applyStaticsconst a ... amps');applyTi ... tamps')applyTi ... sHelper'./help ... stamps'./helpers/document/applyTimestamps/helpers/document/applyTimestampsapplyWr ... ncern')./helpers/schema/applyWriteConcern/helpers/schema/applyWriteConcernconst a ... uals');applyVi ... tuals')require ... tuals')'./help ... rtuals'./helpers/document/applyVirtuals/helpers/document/applyVirtualsconst a ... Vals');assignV ... nVals')require ... nVals')'./help ... gnVals'./helpers/populate/assignVals/helpers/populate/assignValsconst c ... lter');createP ... ilter')'./help ... Filter'./helpers/populate/createPopulateQueryFilter/helpers/populate/createPopulateQueryFilter'./help ... ionKey'./helpers/update/decorateUpdateWithVersionKey/helpers/update/decorateUpdateWithVersionKeyconst d ... ator');discrim ... nator')require ... nator')'./help ... inator'./helpers/model/discriminator/helpers/model/discriminatorconst e ... each');each =  ... /each')require ... /each')./helpers/each/helpers/each./helpers/discriminator/getDiscriminatorByValueconst g ... late');getMode ... ulate')'./help ... pulate'./helpers/populate/getModelsMapForPopulate/helpers/populate/getModelsMapForPopulateisDefau ... Index')'./help ... dIndex'./helpers/indexes/isDefaultIdIndex/helpers/indexes/isDefaultIdIndexconst i ... qual');isIndex ... Equal')'./help ... xEqual'./helpers/indexes/isIndexEqual/helpers/indexes/isIndexEqualisTimes ... Index')'./help ... sIndex'./helpers/indexes/isTimeseriesIndex/helpers/indexes/isTimeseriesIndexconst { ... exes');{\n  get ... dexes')'./help ... ndexes'./helpers/indexes/getRelatedIndexes/helpers/indexes/getRelatedIndexes'./help ... ptions'./helpers/indexes/decorateDiscriminatorIndexOptions/helpers/indexes/decorateDiscriminatorIndexOptionsisPathS ... usive')./helpers/projection/isPathSelectedInclusive/helpers/projection/isPathSelectedInclusive'./help ... ateMap'./helpers/populate/leanPopulateMap/helpers/populate/leanPopulateMapconst p ... imit');paralle ... Limit')require ... Limit')'./help ... lLimit'./helpers/parallelLimit/helpers/parallelLimitpushNes ... Paths')'./help ... yPaths'./helpers/model/pushNestedArrayPaths/helpers/model/pushNestedArrayPathsconst r ... ield');removeD ... Field')require ... Field')'./help ... nField'./helpers/populate/removeDeselectedForeignField/helpers/populate/removeDeselectedForeignField'./help ... edPath'./helpers/path/setDottedPath/helpers/path/setDottedPath./error/bulkSaveIncompleteError/error/bulkSaveIncompleteErrorconst m ... tion');modelCo ... ction')modelCo ... nSymbolSymbol( ... ction')'mongoo ... ection'mongoose#Model#collectionconst m ... l#db');modelDb ... el#db')Symbol( ... el#db')mongoose#Model#dbconst s ... ssed');subclas ... assed')Symbol( ... assed')'mongoo ... lassed'mongoose#Model#subclassedconst { ... cument;{ VERSI ... ocument{ VERSI ... N_ALL }const s ... rue\n});saveToO ... true\n}){\n  bson: true\n}bson: truefunctio ... pId);\n}{\n  if  ... pId);\n}if (fie ... ');\n  }fields  ...  Schemanew Typ ... l()`.')'2nd ar ... el()`.''2nd ar ... , not ''2nd ar ... ring, '2nd argument to `Model` constructor must be a POJO or string, '**not* ... , not '**not** a schema. Make sure you're calling `mongoose.model()`, not '`mongo ... el()`.'`mongoose.Model()`.'First  ... el()`.''First  ... , not ''First  ... ject, 'First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not Documen ... kipId);Documen ... skipId)Document.callModel.p ... = true;Model.p ...  = trueModel.p ... ototypeModel.prototype.db;Model.prototype.dbModel.u ... his;\n};Model.u ... this;\n}Model.useConnectionif (!co ... ');\n  }!connectionthrow n ... ion.');new Err ... tion.')'Please ... ction.'Please provide a connection.Please provide a connectionif (thi ... l];\n  }{\n    d ... l];\n  }delete  ... lName];delete  ... elName]this.db ... elName]this.db.modelsdelete  ... ype.db;delete  ... type.dbthis.prototype.dbthis.prototypedelete  ... ymbol];delete  ... Symbol]this.pr ... Symbol]delete  ... ection;delete  ... lectionthis.pr ... lectionthis.db ... ection;this.db = connectionconnect ... ptions)connect ... lectionconnection.optionsthis.pr ... ection;this.pr ... nectionthis.co ... ection;this.$_ ... ection;this.$_ ... lectionthis.$__collectionconnect ... = this;connect ...  = thisconnect ... elName]connection.modelsModel.p ... ection;Model.p ... lectionModel.p ... elName;Model.p ... delNameModel.p ... $where;Model.p ... .$whereModel.events;Model.eventsModel._middleware;Model._middlewaredoc.$where == nulldoc.$whereObject. ... $where){\n    w ... y];\n  }where[k ... e[key];where[k ... re[key]where[key]doc.$where[key]Model.p ... \n  }\n};Model.p ... ;\n  }\n}Model.p ... dleSavesaveOptions = {}applyWr ... tions);applyWr ... ptions)typeof  ... ConcernsaveOpt ... n = {};saveOpt ... rn = {}saveOpt ... Concernif ('w' ... ;\n    }'w' in  ... ConcernsaveOpt ... cern.w;saveOpt ... ncern.wif ('j' ... ;\n    }'j' in  ... ConcernsaveOpt ... cern.j;saveOpt ... ncern.jif ('wt ... ;\n    }'wtimeo ... ConcernsaveOpt ... imeout;saveOpt ... timeoutsaveOpt ... ions.w;saveOpt ... tions.wsaveOptions.wsaveOpt ... ions.j;saveOpt ... tions.jsaveOptions.jsaveOptions.wtimeoutif ('ch ... ys;\n  }'checkK ... options{\n    s ... ys;\n  }saveOpt ... ckKeys;saveOpt ... eckKeysthis[mo ... Store()this[mo ... etStorethis[mo ... Storagethis[mo ... l].basethis[modelDbSymbol]{\n    s ... on;\n  }saveOpt ... ession;saveOpt ... sessionsaveOptions.session{\n    / ... on;\n  }const o ... tions);obj = t ... ptions)if ((ob ... ;\n    }(obj || ...  void 0(obj || {})._id(obj || {})callbac ... ing'));callbac ... ving'))new Mon ... aving')'docume ... saving'document must have an _id before savingthis.$_ ... , obj);this.$_ ... e, obj)this[mo ... \n    );this[mo ... }\n    )this[mo ... s).thenthis[mo ... ptions)this[mo ... sertOnethis[mo ... Symbol]ret =>  ... l, ret)callback(null, ret)_setIsN ...  true);_setIsN ... , true)callback(err, null);callback(err, null)this.$__reset();this.$__reset()this.$__reset_setIsN ... false);_setIsN ...  false)this.$__.insertingthis.$_ ...  false;delta[1]['$set']options ... es(key)options ... ncludesoptions ... == '.')options ... ve.somepathToS ... === '.'key.sli ... === '.'key.sli ... hToSavekey.sli ... length)key.slicepathToSave.lengthkey.cha ... === '.'key.cha ... length)key.charAtdelete  ... ][key];delete  ... '][key]delta[1 ... '][key]{\n    i ...  );\n  }if (del ... ;\n    }delta i ... seErrorcallback(delta);callback(delta)const w ... ta[0]);where = ... lta[0])this.$_ ... lta[0])this.$__wheredelta[0]if (whe ... ;\n    }where i ... seErrorcallback(where);callback(where)_applyC ... where);_applyC ...  where)const u ... lta[1];update = delta[1]Object. ... update)const updateOpupdateOp == nullObject. ... dateOp)updateO ... object'updateOp[key]typeof updateOp[key]if (!ut ...       }!utils. ... p[key])utils.i ... p[key])minimiz ... [key]);minimiz ... p[key])Object. ... p[key])delete  ... p[key];delete updateOp[key]update.$unsetupdate.$unset || {}update. ... y] = 1;update. ... ey] = 1update.$unset[key]this[mo ... dateOneret =>  ...       }ret = { ... here };ret = { ... where }{ $where: where }$where: whereret.$where = where;ret.$where = whereret.$wherecallback(null, ret);this.$__undoReset();this.$__undoReset()this.$__undoReset{\n    h ... rn;\n  }handleE ... (this);handleE ... l(this)handleE ... te.callthis.$_ ... lt')));this.$_ ... ult')))this.mo ... ult')))this.mo ... .concatfunctio ... k);\n  }{\n    c ... k);\n  }options ... mValuesconst w ... here();where = ... where()this.$__where()optimis ... rrency)!Array. ... rrency)const k ... ionKey;key = t ... sionKeyconst v ... e(key);val = t ... ue(key)this.$_ ... ue(key)where[key] = val;where[key] = valapplyRe ... alues);applyRe ... Values)this.co ... lback);this.co ... llback)this.co ...  .catchthis.co ...   .thenthis.co ... Values)this.co ... findOnedocumen ...       }const m ...  0 : 1;matched ... ? 0 : 1!docume ... ? 0 : 1!documentExistscallbac ... unt });callbac ... ount }){ $wher ... Count }Model.p ...  });\n};Model.p ...   });\n}Model.p ... $__save{\n  thi ...   });\n}this.$__handleSave(error, ... s);\n  }error = ... error);error = ... (error)this.$_ ... (error)this.$_ ... eyError_transf ... eyErrorconst h ... .hooks;hooks = ... s.hooksthis.$_ ... s.hooksthis.$__schema.ssave:error[this]callbac ...  this);callbac ... , this)let numAffected = 0;numAffected = 0const w ...      0;writeCo ...       0options ...       0options ... tions.wif (wri ... }\n    }writeConcern !== 0result != nullArray.i ... result)numAffe ... length;numAffe ... .lengthresult.lengthresult. ... != nullresult.matchedCountnumAffe ... dCount;numAffe ... edCountnumAffe ... result;numAffected = resultversion ... versionif (ver ...       }version ... serting!this.$__.insertingconst d ... rsion);doIncre ... ersion)const v ... ) || 0;version ... y) || 0this.$_ ... y) || 0numAffected <= 0const e ... Paths);err = t ... dPaths)this.$_ ... dPaths)new Ver ... dPaths)callback(err, this)if (doI ...       }this.$_ ... n + 1);this.$_ ... on + 1)version + 1result  ... ed <= 0error = ... esult);error = ... result)new Doc ... result)result.$wherethis.co ... delNamethis.$__.savingthis.$_ ... e = {};this.$_ ... te = {}this.$e ... ected);this.$e ... fected)this.co ... ected);this.co ... fected)callback(null, this)functio ... hs));\n}{\n  con ... hs));\n}key = d ... sionKeydoc.$__ ... sionKeydoc.$__ ... optionsif (!ke ... ll;\n  }!keydoc.$__ ... y) || 0doc.$__getValue(key)return  ... aths));new Ver ... Paths))modifie ... tPaths)modifiedPaths.concatModel.p ... his;\n};Model.p ... this;\n}Model.prototype.save'Model. ... llback'Model.prototype.save() no longer accepts a callbacklet parallelSave;this.$op = 'save';this.$op = 'save'{\n    p ... s);\n  }paralle ... (this);paralle ... r(this)new Sav ... ptions)this.$s ... ssion);this.$s ... ession)if (thi ... ps;\n  }{\n    o ... ps;\n  }options ... stamps;options ... estampsthis.$_ ... ))\n  );this.$_ ... '))\n  )generat ... '))\n  )if (par ... ve;\n  }{\n    t ... ve;\n  }this.$_ ... lSave);this.$_ ... elSave)this.$__handleRejectthrow parallelSave;this.$_ ... ptions;this.$__savethis.$_ ... error);Model.p ... e.save;Model.p ... pe.saveModel.p ... e.$saveModel.p ... }\n  }\n}Model.p ... versionif (whe ... rn;\n  }where === truesetDott ... ey, 0);setDott ... key, 0)this.$_ ... ey, 0);this.$_ ... key, 0)if (key ... rn;\n  }key === false!this.$ ... ed(key)this.$_ ... ed(key)if (VER ... ue;\n  }value = ... ue(key)if (val ...  value;where[key] = value;where[key] = valueif (VER ...   }\n  }get(del ... != nullget(del ... , null)++delta.$set[key];++delta.$set[key]delta.$set[key]delta.$ ...  || {};delta.$ ... c || {}delta.$incdelta.$inc || {}delta.$inc[key] = 1;delta.$inc[key] = 1delta.$inc[key]Model.p ... crementthis.$_ ... ON_ALL;this.$_ ... ION_ALLModel.p ... ere;\n};Model.p ... here;\n}Model.p ... __wherefunctio ... here;\n}{\n  whe ... here;\n}where | ...  = {});where | ... e = {})(where = {})if (!wh ... id;\n  }!where._id{\n    w ... id;\n  }this._d ...  void 0return  ... ent!');new Mon ... ment!')'No _id ... ument!'No _id found on document!return where;Model.p ... ery;\n};Model.p ... uery;\n}Model.p ... leteOneModel.prototype.deleteOne() no longer accepts a callbackif (!op ... {};\n  }if (whe ... re;\n  }where i ... f Error{\n    t ... re;\n  }throw where;self.co ... ptions)self.co ... leteOne{\n    e ... b);\n  }each(se ... }, cb);each(se ...  }, cb)self.$g ... bdocs()self.$getAllSubdocs(subdoc ... ;\n    }subdoc. ... ], cb);subdoc. ... c], cb)subdoc. ... execPresubdoc. ... dlewaresubdoc.constructor[subdoc]self.$__.isDeletedreturn  ... ion());cb(Kare ... tion())Kareem. ... ction()Kareem. ... unctionsubdoc. ... }, cb);subdoc. ... {}, cb)subdoc. ... xecPostModel.p ... me);\n};Model.p ... ame);\n}Model.p ... .$model{\n  if  ... ame);\n}if (arg ... or;\n  }return  ... ructor;return  ... (name);this[mo ... l(name)this[mo ... ].modelModel.p ... $model;Model.p ... e.modelModel.e ... ery;\n};Model.e ... uery;\n}Model.exists{\n  _ch ... uery;\n}_checkC ... ists');_checkC ... xists')Model.exists() no longer accepts a callbackthis.fi ... ptions)this.fi ... Optionsthis.fi ...  lean()this.fi ...    leanthis.fi ... d: 1 })this.fi ...  selectthis.findOne(filter)this.findOne{ _id: 1 }_id: 1Model.d ... n d;\n};Model.d ... rn d;\n}Model.discriminatorfunctio ... rn d;\n}{\n  let ... rn d;\n}{\n    m ...   }\n  }model = name;model = namename =  ... model);name =  ... (model)utils.g ... (model)utils.g ... ionNameif (!(m ... ;\n    }!(model ...  Model)(model. ...  Model)model.p ... f Modelnew Mon ... Model')'The pr ...  Model''The pr ...  + name'The pr ... class 'The provided class  must extend Modelconst v ... ptions;value = ... optionsutils.i ... optionsconst c ... : true;clone = ...  : truetypeof options.cloneconst m ... : true;mergePl ...  : truetypeof  ... Pluginsoverwri ... : falsetypeof  ... : falsetypeof  ... eModelsoptions ... eModels_checkC ... ator');_checkC ... nator')if (uti ... a);\n  }schema  ... & cloneschema  ...  Schemaschema  ... odels);schema  ... Models)discrim ... Models)if (thi ... e);\n  }this.db ... eModelsthis.db.models[name]!overwriteModelsnew Ove ... r(name)schema. ... minatorschema. ... Applied$global ... Appliedmodel = ... .name);model = ... n.name)this.db ... n.name)model || namethis.$_ ... on.namethis.di ...  model;this.di ... = modelthis.di ... s[name]this.discriminatorsd = thi ... s[name]d.prototypeObject. ... e\n  });Object. ... se\n  }){\n    v ... lse\n  }value:  ... delNameapplySt ... chema);applySt ... schema)this[su ... != nullthis[su ... Symbol]const submodelsubmode ...  || {};submode ... s || {}submode ... inatorssubmode ... .name);submode ... n.name)submode ... s[name]model._ ... n.name)submode ... on.namesubmodel.collectionreturn d;if (ctx ... ');\n  }ctx ==  ...  globalctx == nullctx === globalthrow n ... del.');new Mon ... odel.')'`Model ... model.''`Model ...  '()` ''`Model ...  fnName'`Model ... Model.''`Model ... out a ''`Model.' + fnName`Model.'()` ca ... out a '()` cannot run without a 'model  ... Model.'model as `this`. Make sure you are calling `MyModel.()` 'where  ... model.'where `MyModel` is a Mongoose model.ctx[mod ... == nullctx[modelSymbol]throw n ... '()`');new Mon ...  '()`')'`Model ... + '()`''`Model ... lling ''model  ... lling 'model as `this`. Make sure you are not calling `new Model.()`{\n  Mod ... e[i];\n}Model[i ... ype[i];Model[i ... type[i]Model[i]Model.i ... nit;\n};Model.i ... init;\n}Model.initfunctio ... init;\n}{\n  _ch ... init;\n}_checkC ... init');_checkC ... 'init')Model.init() no longer accepts a callbackthis.sc ...  this);this.sc ... , this)this.schema.emitif (thi ... it;\n  }this.$init != nullthis.$init{\n    r ... it;\n  }return this.$init;const c ... his.db;conn = this.dbconst _ ... );\n  };_ensure ... });\n  }async() ... });\n  }const a ... \n    );autoInd ... s\n    )utils.g ... s\n    )utils.getOptionconn.configconn.base.optionsconn.baseif (!au ... ;\n    }!autoIndexawait t ... true })this.en ... true })this.ensureIndexes{ _automatic: true }_automatic: true_create ... ();\n  }async() ... ();\n  }autoSea ... s\n    )!autoSearchIndexreturn  ... exes();await t ... dexes()this.cr ... dexes()this.cr ... Indexes{\n    l ... ();\n  }let aut ... \n    );autoCre ... t\n    )utils.g ... t\n    )autoCreate == nullawait c ... (true);await c ... t(true)conn._w ... t(true)conn._waitForConnectautoCre ...      );autoCre ...       )utils.g ...       )!autoCreatereturn  ... tion();await t ... ction()this.cr ... ction()this.cr ... lectionthis.$i ... xes());this.$i ... exes())_create ... exes())_create ...    then_createCollection()() => _ ... dexes()_ensureIndexes()_create ... dexes()const _ ... .catch;_catch  ... t.catchthis.$init.catchthis.$i ... );\n  };this.$i ... s);\n  }_this.$ ... = true;_this.$caught = true_this.$caught_catch. ... uments)_catch.apply_this.$initModel.c ... ion;\n};Model.c ... tion;\n}Model.c ... lectionasync f ... tion;\n}{\n  _ch ... tion;\n}_checkC ... tion');_checkC ... ction')Model.createCollection() no longer accepts a callbackconst s ... ;\n  });shouldS ... );\n  })this.ho ...     });this.ho ... \n    })this.hooks.execPrethis.hooks[options](err) = ... ;\n    }return  ... (true);resolve(true)const c ... ptions;collect ... Optionsthis && ... Optionsthis.sc ... Optionsif (col ... s);\n  }collect ... != nullthis && ... llationthis.sc ... llationif (sch ... s);\n  }schemaC ... != null{ colla ... ation }collati ... llationconst c ... capped;capped  ... .cappedthis && ... .cappedthis.sc ... .cappedif (cap ...   }\n  }capped != nulltypeof capped{ cappe ... apped }capped: truesize: capped{ capped: true }const t ... series;timeser ... eseriesthis && ... eseriesthis.sc ... eseriesif (tim ...   }\n  }timeseries != null{ timeseries }options ... Secondsoptions.expiresutils.e ... tions);utils.e ... ptions)utils.expiresthis.sc ... != nullthis.sc ... Secondsoptions ... econds;this.sc ... expiresoptions ... xpires;options ... expiresconst c ... dIndex;cluster ... edIndexthis && ... edIndexthis.sc ... edIndexif (clu ... s);\n  }cluster ... != null{ clust ... rue } }cluster ...  true }{ ...cl ...  true }...clusteredIndexif (!sh ... ;\n    }!shouldSkipawait t ... tions);this.$_ ... ionNameerr !=  ... !== 48)(err.na ... !== 48)err.nam ...  !== 48err.nam ... rError'MongoServerErrorerr.code !== 48err.codeconst _ ...  err };_opts = ... : err }{ error: err }this.ho ...      })this.hooks.execPost(err) = ...       }[this.$__collection]Model.s ... ped;\n};Model.s ... pped;\n}Model.syncIndexesasync f ... pped;\n}{\n  _ch ... pped;\n}_checkC ... exes');_checkC ... dexes')Model.syncIndexes() no longer accepts a callbackconst a ... ? true;autoCre ... ?? trueoptions ... oCreateoptions?.autoCreatethis.sc ... oCreatethis.db ... oCreatethis.db.configif (aut ...   }\n  }await t ... tion();diffInd ... true })this.di ... true })this.diffIndexes{ index ...  true }indexOp ... e: trueconst d ... rop });dropped ... Drop })await t ... Drop })this.cl ... Drop })this.cleanIndexes{ ...op ... oDrop }toDrop: ... .toDropdiffInd ... .toDropawait t ... ate });await t ... eate })this.cr ... eate })this.createIndexes{ ...op ... reate }toCreat ... oCreatediffInd ... oCreatereturn dropped;Model.c ... on);\n};Model.c ... ion);\n}Model.c ... chIndex{\n  _ch ... ion);\n}_checkC ... ndex');_checkC ... Index')return  ... ption);await t ... iption)this.$_ ... iption)this.$_ ... chIndexModel.u ... on);\n};Model.u ... ion);\n}Model.u ... chIndexreturn  ... ition);await t ... nition)this.$_ ... nition)Model.d ... me);\n};Model.d ... ame);\n}Model.d ... chIndexasync f ... ame);\n}{\n  _ch ... ame);\n}await t ... x(name)this.$_ ... x(name)Model.l ... y();\n};Model.l ... ay();\n}Model.l ... Indexes{\n  _ch ... ay();\n}this.$_ ... IndexesModel.d ... e };\n};Model.d ... te };\n}Model.diffIndexesasync f ... te };\n}{\n  if  ... te };\n}const model = this;model = thislet dbI ... ;\n  });dbIndex ... r;\n  })await m ... r;\n  })model.l ... r;\n  })model.l ... ).catchmodel.listIndexes()model.listIndexeserr =>  ... rr;\n  }err.cod ... tFound'err.codeNameNamespaceNotFoundif (dbI ... [];\n  }dbIndex ... defined{\n    d ... [];\n  }dbIndexes = [];dbIndexes = []dbIndex ... dexes);dbIndex ... ndexes)getRela ... ndexes)const s ... xes());schemaI ... exes())getRela ... exes())schema.indexes()schema.indexesconst t ... dexes);toDrop  ... ndexes)getInde ... ndexes)const t ... tions);toCreat ... ptions)getInde ... ptions)return  ... eate };{ toDrop, toCreate }functio ... eate;\n}{\n  con ... eate;\n}const toCreate = [];toCreate = []indexOp ... ? falseconst [ ... ptions][schema ... ptions]let found = false;found = falseconst o ... ions));options ... tions))decorat ... tions))const indexif (isD ...       }isDefau ... (index)if (\n   ...       }isIndex ... x.name)isIndex ...  index)!toDrop ... x.name)toDrop. ... x.name)toDrop.includesindex.namefound = true;found = trueif (!fo ... }\n    }!foundtoCreat ... ions]);toCreat ... tions])toCreate.pushtoCreat ... bject);toCreat ... Object)return toCreate;functio ... Drop;\n}{\n  con ... Drop;\n}const toDrop = [];toDrop = []const dbIndex{\n    l ... e);\n  }isDefau ... bIndex)if (isT ... ;\n    }isTimes ... ptions)applySc ... tions);applySc ... ptions)if (isI ...       }isIndex ... bIndex)toDrop. ... .name);toDrop.pushdbIndex.namereturn toDrop;Model.c ... ns);\n};Model.c ... ons);\n}Model.cleanIndexes{\n  _ch ... ons);\n}Model.cleanIndexes() no longer accepts a callbackArray.i ... toDrop)options ... .toDropconst r ... tions);await _ ... ptions)_dropIn ... ptions)const r ... exes();res = a ... dexes()await m ... dexes()model.diffIndexes()model.diffIndexesres.toDropasync f ... Drop;\n}{\n  if  ... Drop;\n}if (toD ... [];\n  }toDrop.length === 0toDrop.lengthmodel.$__collectionoptions ... Indexes{\n    a ... ));\n  }await P ...    }));await P ...     }))Promise ...     }))toDrop. ... \n    })toDrop.mapindexNa ... ;\n    }model.d ...      })model.db.db.commandmodel.db.dbcollMod ... ionNamecollect ... ionNameindex:  ...  true }{ name: ...  true }name: indexNamehidden: trueawait P ... ame)));await P ... Name)))Promise ... Name)))toDrop. ... xName))indexNa ... exName)collect ... exName)collection.dropIndexModel.listIndexesModel.listIndexes() no longer accepts a callbackthis.$_ ... .bufferthis.$_ ... solve);this.$_ ... esolve)this.$_ ... ddQueuethis.$_ ... Array()this.$_ ... toArraythis.$_ ... dexes()Model.e ...  });\n};Model.e ...   });\n}Model.ensureIndexes{\n  _ch ...   });\n}Model.ensureIndexes() no longer accepts a callback_ensure ...     });_ensure ... \n    })Model.createIndexesModel.createIndexes() no longer accepts a callbackthis.en ... ptions)const i ... exes();indexes ... dexes()Array.i ... dexes()Array.i ... Create)options?.toCreateoptions.toCreatemodel.s ... dexes()model.schema.indexeslet indexError;const d ... );\n  };done =  ... r);\n  }functio ... r);\n  }err &&  ... $caught!model.$caughtmodel.$caughtmodel.e ... , err);model.e ... ', err)model.emitmodel.e ... Error);model.e ... xError)err || indexErrorcallbac ... Error);callbac ... xError)utils.w ... ndex');utils.w ... index')'mongoo ... -index''mongoo ... . See ''mongoo ... + '", ''mongoo ... delName'mongoo ... name "''mongoo ... ` for 'mongoose: Cannot specify a custom index on `_id` for model name "", 'MongoD ... . See 'MongoDB does not allow overwriting the default `_id` index. See 'https: ... -index'https://bit.ly/mongodb-id-indexif (!in ... rn;\n  }!indexes.lengthindexes.lengthconst i ... );\n  };indexSi ... e);\n  }{\n    m ... e);\n  }model.e ...  name);model.e ... , name)index-single-doneindexSi ... s);\n  }model.e ... tions);model.e ... ptions)index-single-startconst b ... Schema;baseSch ... eSchemamodel.s ... eSchemaconst b ... ) : [];baseSch ... () : []baseSchema.indexes()baseSchema.indexesimmedia ... }\n  });immedia ...  }\n  })options ... lectionoptions._automatic!model. ... lectionmodel.c ... e, []);model.c ... te, [])model.c ... ddQueuecreate();create()functio ...  );\n  }model.s ...  false)model.s ... = falsemodel.s ... toIndex(model. ...  false)model.s ... == nullmodel.d ... = falsemodel.d ... toIndexmodel.db.configconst i ... hift();index = ... shift()indexes.shift()indexes.shiftif (!in ... ;\n    }!indexindex[1 ... = falseindex[1]._autoIndexreturn create();baseSch ... index))baseSch ... es.findi => ut ...  index)utils.d ...  index)const i ... ex[0]);indexFi ... dex[0])clone(index[0])const i ... ex[1]);indexOp ... dex[1])clone(index[1])indexOp ... toIndexindexSi ... tions);indexSi ... ptions)if ('ba ... ;\n    }indexOp ... ground;indexOp ... kgroundpromise ... tions);promise ... ptions)model.c ... teIndexif (!in ...       }!indexErrorindexError = err;indexError = errpromise ... \n    );promise ... }\n    )promise.thenname => ...       }indexSi ...  name);indexSi ... , name)Model.c ... lts;\n};Model.c ... ults;\n}Model.c ... Indexesasync f ... ults;\n}{\n  _ch ... ults;\n}'create ... ndexes'for (co ... ));\n  }this.sc ... Indexesconst searchIndexresults ... ndex));results ... Index))results.pushawait t ... hIndex)this.cr ... hIndex)this.cr ... chIndexreturn results;Model.schema;Model.schemaModel.db;Model.dbModel.collection;Model.collectionModel.$__collection;Model.$__collectionModel.base;Model.baseModel.d ... nators;Model.discriminatorsModel.t ... \n  }\n};Model.t ... ;\n  }\n}Model.t ... Aliases{\n  _ch ... ;\n  }\n}_checkC ... ases');_checkC ... iases')const t ... s;\n  };transla ... ds;\n  }(key, v ... ds;\n  }{\n    l ... ds;\n  }let alias;const t ... d = [];translated = []const f ... t('.');fieldKe ... it('.')current ... .schemaconst n ... eys[i];name = fieldKeys[i]fieldKeys[i]current ... s[name]current ... aliasesalias = ... [name];alias = ... s[name]errorOn ...  fieldsalias in fieldsthrow n ... as}"`);new Mon ... ias}"`)`Provid ... lias}"`Provide ... field "transla ... alias);transla ... (alias)translated.pushalias = name;alias = nametransla ... (name);transla ... h(name)if (cur ... = null;current ... [alias]currentSchema.pathscurrent ... schema;current ... = null;currentSchema = nullconst t ... n('.');transla ... in('.')translated.join('.')translated.joinif (fie ...  value;fields  ... eof Mapfields. ... value);fields. ...  value)fields.setfields[ ...  value;fields[ ... = valuefields[ ... tedKey]if (tra ... }\n    }transla ... !== keyfields.delete(key);fields.delete(key)fields.deletedelete fields[key];delete fields[key]fields[key]return fields;if (typ ... ds;\n  }{\n    / ... ds;\n  }if (fie ... }\n    }new Map(fields)const fieldfields  ... ld[1]);fields  ... eld[1])transla ... eld[1])field[1]fields  ... [key]);fields  ... s[key])transla ... s[key])Array.i ... s[key])fields[ ... y][i]);fields[ ... ey][i])fields[key][i]this.tr ... ey][i])this.tr ... Aliasesthis.tr ... [key]);this.tr ... s[key])Model.d ... ns);\n};Model.d ... ons);\n}Model.deleteOne_checkC ... eOne');_checkC ... teOne')const m ... ction);mq = ne ... ection)new thi ... ection)this.Querymq.setO ... tions);mq.setO ... ptions)mq.setOptionsmq.dele ... itions)mq.deleteOneModel.deleteMany_checkC ... Many');_checkC ... eMany')Model.deleteMany() no longer accepts a callbackmq.deleteManyModel.f ... ns);\n};Model.f ... ons);\n}Model.find_checkC ... find');_checkC ... 'find')typeof arguments[3]arguments[3]Model.find() no longer accepts a callbackmq.sele ... ction);mq.sele ... ection)mq.selectmq.find(conditions)mq.findModel.findById_checkC ... ById');_checkC ... dById')Model.findById() no longer accepts a callback{ _id: id }_id: idModel.findOne_checkC ... dOne');_checkC ... ndOne')Model.findOne() no longer accepts a callbackmq.find ... itions)mq.findOneModel.e ... ns);\n};Model.e ... ons);\n}Model.e ... ntCountestimat ... ntCount_checkC ... ount');_checkC ... Count')mq.esti ... ptions)mq.esti ... ntCountModel.countDocuments_checkC ... ents');_checkC ... ments')Model.countDocuments() no longer accepts a callbackmq.coun ... itions)mq.countDocumentsModel.distinct_checkC ... inct');_checkC ... tinct')Model.distinct() no longer accepts a callbackmq.dist ... itions)mq.distinctModel.w ... ts);\n};Model.w ... nts);\n}Model.where{\n  _ch ... nts);\n}_checkC ... here');_checkC ... where')void val;void valconst m ... nd({});mq = ne ... ind({})new thi ... ind({})new thi ... n).findmq.wher ... uments)mq.where.applymq.whereModel.$ ... ts);\n};Model.$ ... nts);\n}Model.$wheremq.$whe ... uments)mq.$where.applymq.$whereModel.f ... dUpdate_checkC ... date');_checkC ... pdate')Model.findOneAndUpdate() no longer accepts a callbacklet fields;if (opt ... on;\n  }{\n    f ... on;\n  }fields  ... ection;fields  ... jectionupdate  ... e\n  });update  ... ue\n  })clone(u ... ue\n  }){\n    d ... rue\n  }decorat ... onKey);decorat ... ionKey)this.sc ... sionKeymq.select(fields);mq.select(fields)mq.find ... ptions)mq.findOneAndUpdateModel.findByIdAndUpdate() no longer accepts a callbackif (id  ... id;\n  }id inst ... ocument{\n    i ... id;\n  }id = id._doc._id;id = id._doc._idid._doc._idid._docthis.fi ... te.callthis.fi ... dUpdateModel.f ... dDelete_checkC ... lete');_checkC ... elete')Model.findOneAndDelete() no longer accepts a callbackif (opt ... ed;\n  }{\n    f ... ed;\n  }fields  ... select;fields  ... .selectoptions ... efined;mq.findOneAndDeleteModel.findByIdAndDelete() no longer accepts a callbackthis.fi ... dDeleteModel.f ... Replace_checkC ... lace');_checkC ... place')Model.findOneAndReplace() no longer accepts a callbackmq.findOneAndReplaceModel.c ... res;\n};Model.c ...  res;\n}Model.createModel.create() no longer accepts a callback_checkC ... eate');_checkC ... reate')let args;this.sc ... atorKey{\n    a ... {};\n  }args = doc;args = docoptions ... s : {};options ... object'last =  ... th - 1]hasCall ... nction'typeof lastif (has ... }\n    }args =  ... ments];args.le ... & !lastargs.length > 1!lastargs.pop();args.pop()args.popargs.le ... ssion')args.le ... ession'args.le ...    lastargs.le ... == nullargs.le ... != nullargs.length === 2args[0] != nullargs[0]args[1] != nullargs[1]args[0] ... == nullargs[0].sessiongetCons ... ession'getCons ... ession)last.session!this.s ... ssion')this.sc ... ssion')this.schema.pathutils.w ... te()');utils.w ... ate()')'WARNIN ... eate()''WARNIN ...  See: ''WARNIN ... )` in 'WARNING: to pass a `session` to `Model.create()` in 'Mongoo ...  See: 'Mongoose, you **must** pass an array as the first argument. See: 'https: ... eate()'https://mongoosejs.com/docs/api/model.html#Model.create()args.length === 0Array.i ...  : nulllet res = [];immedia ...  : truetypeof  ... eErrorsoptions ... eErrors!option ... eErrorsdelete  ... Errors;delete  ... eErrors!options.orderedthrow n ...  set');new Mon ... s set')'Cannot ... is set'Cannot call `create()` with a session and multiple documents unless `ordered: true` is setCannot call `create` with a session and multiple documents unless `ordered: true` is set{\n    f ... es;\n  }i < args.lengthconst doc = args[i];doc = args[i]args[i]const M ...   this;Model = ...    thisthis.di ...    thisthis.di ... != nullthis.di ... orKey])this.di ... orKey]]if (Mod ...       }Model == nullthrow n ... me}"`);new Mon ... ame}"`)`Discri ... Name}"``Discri ... " not ``found  ... Name}"`let toSave = doc;toSave = docif (!(t ...       }!(toSav ...  Model)(toSave ...  Model)toSave  ... f ModeltoSave  ... oSave);toSave  ... toSave)new Model(toSave)toSave. ... ptions)toSave.$saveres.push(toSave);res.push(toSave)if (!im ...       }!immediateErrorres.push(err);res.push(err)if (!im ...   }\n  }{\n    r ... n);\n  }res = a ...    }));res = a ...     }))Promise.allSettledargs.ma ... \n    })args.mapasync d ... ;\n    }return toSave;res = r ... eason);res = r ... reason)res.map ... reason)res.mapresult  ... .reasonresult. ... .reasonresult. ... filled'result.statusfulfilledresult.valueresult.reasonlet fir ... = null;firstError = nullasync d ... }\n    }!firstErrorfirstError = err;firstError = errthrow firstError;if (!Ar ... 0];\n  }!Array. ... h === 1!Array.isArray(doc)args.length === 1{\n    r ... 0];\n  }return res[0];Model.i ... ns);\n};Model.i ... ons);\n}Model.insertOne_checkC ... tOne');_checkC ... rtOne')if (Mod ...  );\n  }new Mon ... `\n    )" not f ... model "if (!(d ... c);\n  }!(doc i ...  Model)(doc in ...  Model)doc instanceof Model{\n    d ... c);\n  }doc = n ... l(doc);doc = new Model(doc)new Model(doc)await d ... ptions)doc.$save(options)doc.$saveModel.w ... ns);\n};Model.w ... ons);\n}Model.watch_checkC ... atch');_checkC ... watch')const c ...  }\n  };changeS ...   }\n  }cb => { ...   }\n  }pipelin ...  || [];pipelin ... e || []pipeline || []prepare ... ment');prepare ... ument')this.$_ ...      })this.$_ ... n.watchoptions ... = this;options.model = thisModel.s ... ts);\n};Model.s ... nts);\n}Model.startSession_checkC ... sion');_checkC ... ssion')this.db ... uments)this.db ... n.applythis.db.startSessionModel.i ...  });\n};Model.i ...   });\n}Model.insertMany_checkC ... tMany')Model.insertMany() no longer accepts a callbackthis.$__insertManyModel.$ ...  });\n};Model.$ ...   });\n}Model.$__insertManycallbac ... s.noop;callbac ... ls.nooputils.noopconst l ... | 1000;limit = ... || 1000options ... || 1000const r ... Result;rawResu ... wResult!!options.rawResult!options.rawResultconst o ... : true;ordered ...  : truetypeof  ... orderedthrowOn ... : falsetypeof  ... onErrorconst l ... s.lean;lean =  ... ns.lean!!options.lean!options.leanthis.db ... Store()this.db ... etStorethis.db ... Storagethis.db.baseif (!Ar ... r];\n  }{\n    a ... r];\n  }arr = [arr];arr = [arr][arr]const v ...  Map();validat ... w Map()validat ... alOrderconst r ... ength);results ... length)ordered ... length)new Arr ... length)toExecu ... \n    })arr.map ... \n    })arr.map(doc, i ... ;\n    }if (lea ...       }return  ...  doc));immedia ... , doc))() => c ... l, doc)let cre ...  false;created ... = falseif (!(d ...       }!(doc i ...  _this)(doc in ...  _this)doc instanceof _thisdoc !=  ... object'return  ... any'));callbac ... Many'))new Obj ... tMany')'arr.' + indexarr.doc = n ... s(doc);doc = new _this(doc)new _this(doc)created ... = true;createdNewDoc = truedoc.$va ...      );doc.$va ...       )doc.$va ... l).thendoc.$va ... : null)doc.$validatecreated ...  : null{ _skip ...  true }_skipPa ... k: true() => { ... doc); }{ callb ... doc); }if (ord ...       }ordered === falsevalidat ... (error)validat ... index);validat ...  index)validat ... der.setresults ...  error;results ... = errorparalle ... ;\n  });paralle ... );\n  })origina ... w Map()validDo ... w Map()validDo ... alIndexorigina ... i], i);origina ... [i], i)originalDocIndex.setdocAttr ... \n    })docs.fi ... \n    })docs.filterreturn doc != null;i < doc ... .lengthdocAttributes.lengthvalidDo ... s[i]));validDo ... es[i]))validDo ... dex.setorigina ... tes[i])originalDocIndex.getdocAttributes[i]validat ... rs.sort(err1,  ...       }return  ... (err2);validat ... t(err2)validat ... t(err1)validat ... der.getdocAttr ... h === 0if (thr ...       }return  ...     ));callbac ...      ))const r ...      };res = { ...       }acknowledged: trueinsertedCount: 0insertedIds: {}decorat ... rrors);decorat ... Errors)callback(null, []);docObje ... \n    })lean ?  ... \n    })docAttributes.mapdoc[doc ... y] = 0;doc[doc ... ey] = 0doc[doc ... ionKey]const s ... false);shouldS ...  false)(!optio ...  false)(!optio ... estamps(!doc.$ ...  false)!doc.$_ ... = false!doc.$__doc.$__ ... = falsedoc.$__.timestampsdoc.$__ ... alues()doc.$__ ... eValuesreturn  ... llow();doc.$__ ... allow()doc.$__ ... Shallowdoc.toO ... ptions)_this.$ ... \n    );_this.$ ... }\n    )_this.$ ... s).then_this.$ ... ptions)_this.$ ... ertMany_this.$__collectionif (!le ...       }!leanconst attributeattribu ... eset();attribute.$__reset()attribute.$__resetordered ... gth > 0ordered ... onErrori < results.lengthresults.lengthresults ...  void 0results ... ocs[i];results[i] = docs[i]_this.p ...       )_this.p ... e).then_this.p ... pulate)_this.populatedocs => ... ocs); }{ callb ... ocs); }callbac ...  docs);callback(null, docs)err.ins ... ibutes;err.ins ... ributeserr.insertedDocscallbac ... butes);callbac ... ibutes)error.w ... != nullerror.w ... == nullerror.writeErrors(error. ... != null(error. ... Errors)error.r ... eErrorserror.r ... .resulterror.resulterror.result.resulterror.w ... Errors;error.w ... eErrorsconst h ... Errors;hasWrit ... eErrorserror & ... eErrorsconst e ... ndex));errored ... index))new Set ... index))(error  ... .index)(error  ... []).map(error  ...  || [])error & ... s || []err => err.indexerr.indexi < err ... .lengtherror.w ... .lengthconst o ... index);origina ... .index)validDo ... .index)validDo ... dex.geterror.w ... ].indexerror.writeErrors[i]error.w ... ndex };error.w ... Index }{ ...er ... Index }...erro ... rors[i]index: originalIndexif (!or ...       }!orderedresults ... ors[i];results ... rors[i]results ... lIndex]error.r ... esults;error.r ... resultserror.resultslet fir ... x = -1;firstEr ... ex = -1error.i ...     });error.i ...      })error.insertedDocsdocAttr ...      })docAttr ...     mapdocAttr ...  filter(doc, i ...       }const i ... has(i);isError ... .has(i)!hasWri ... .has(i)!hasWriteErrorserrored ... .has(i)erroredIndexes.hasfirstEr ... ex > -1return  ... dIndex;i < fir ... edIndexif (isE ...       }firstEr ... ex = i;firstEr ... dex = ireturn !isErrored;!isErroredsetIsNe ... rtedDocdoc.$__reset();doc.$__reset()doc.$__resetrawResu ... = falsedoc.$isNew = val;doc.$isNew = valdoc.$em ... , val);doc.$em ... ', val)doc.$emitdoc.con ... , val);doc.con ... ', val)doc.constructor.emitsubdocs ... true })doc.$ge ... true })doc.$getAllSubdocs{\n    s ... l);\n  }subdoc.$isNew = val;subdoc.$isNew = valsubdoc.$isNewsubdoc. ... , val);subdoc. ... ', val)subdoc.$emitModel.b ... res;\n};Model.b ...  res;\n}Model.bulkWrite{\n  _ch ...  res;\n}_checkC ... rite');_checkC ... Write')Model.bulkWrite() no longer accepts a callback[ops, options]return resolve(err);resolve(err)if (sho ... 0];\n  }return  ... rgs[0];shouldSkip.args[0]shouldSkip.argsif (ops ... lt;\n  }ops.length === 0{\n    c ... lt;\n  }const b ... false);bulkWri ...  false)bulkWri ... .n = 0;bulkWri ... t.n = 0bulkWriteResult.ndecorat ... ], []);decorat ... [], [])return  ... Result;const v ... ions));validat ... tions))options ... lkWriteops.map ... tions))ops.mapop => c ... ptions)castBul ... ptions)each(va ...     });each(va ...      })(fn, cb) => fn(cb)fn(cb)this.$_ ... lkWritevalidations.lengthvalidOp ...    }));validOp ...     }))ops.map ...      })(op, i) ...       }if (i > ...       }i >= va ... .lengthreturn i;validations[i]err == nullresolve(i);resolve(i)validat ... err });validat ...  err }){ index ... : err }results[i] = err;results[i] = errvalidOp ...  null);validOp ... = null)validOp ... .filterindex = ... != nullindex != nullvalidOp ...  => i);validOp ... ) => i)ops.map ... ) => i)(op, i) => iconst v ... ndex]);validOp ... index])validOp ... t().mapvalidOp ... .sort()validOpIndexes.sortindex => ops[index]ops[index]bulkWri ... sult();bulkWri ... esult()bulkWri ... .result[res, e ... ror]));[res, e ... rror]))await t ... rror]))this.$_ ... rror]))this.$_ ...   catchthis.$_ ... null]))this.$_ ...    thenerror = ... error])([null, error])[null, error]const w ... x = {};writeEr ... ex = {}error?.writeErrorsconst writeErrorwriteEr ... eError;writeEr ... teErrorwriteEr ... .index]writeError.err.indexwriteError.errresults ... ? null;results ... ?? nullwriteEr ... ?? nullwriteEr ... ndex[i]Model.b ... ult;\n};Model.b ... sult;\n}Model.bulkSave{\n  opt ... sult;\n}const documentdocumen ...  || {};documen ... s || {}documen ... Optionsdocument.$__documen ... stamps;documen ... estampsdocumen ... != nullawait P ... ons)));await P ... ions)))Promise ... ions)))documen ... tions))doc =>  ... ptions)buildPr ... ptions)writeOp ... ptions)this.bu ... ptions)this.bu ... rationsbuildBu ... rationsconst o ... ions };opts =  ... tions }{ skipV ... tions }skipValidation: true_skipCa ... e: trueconst { ... })\n  );{ bulkW ...  })\n  ){ bulkW ... Error }await t ...  })\n  )this.bu ...  })\n  )this.bu ... s).thenthis.bu ... , opts)this.bulkWrite(res) = ... null })({ bulk ... null }){ bulkW ...  null }bulkWriteResult: resbulkWriteError: null(err) = ...  err })({ bulk ...  err }){ bulkW ... : err }bulkWri ... t: nullbulkWriteError: errif (bul ... or;\n  }bulkWri ... eError'bulkWri ... != nullbulkWriteError.name'MongoB ... eError'MongoBulkWriteErrorthrow b ... eError;if (wri ...  );\n  }writeOp ... teErrorwriteOp ... .lengthwriteOp ... gth > 0matched ... .lengthmatched ... edCount!bulkWriteErrornew Mon ... t\n    )const s ... s = [];success ... ts = []i < documents.lengthconst d ... nts[i];documen ... ents[i]documents[i]bulkWri ... \n    })bulkWri ... rs.findbulkWri ... eErrorswriteEr ... ;\n    }const w ... .q._id;writeEr ... p.q._idwriteEr ... .op._idwriteError.err.opwriteError.err.op.qwriteEr ... tring()writeEr ... oStringdocumen ... tring()documen ... oStringdocument._doc._iddocument._docdocumen ... == nullsuccess ... ument);success ... cument)success ... ts.pushawait P ... ent)));await P ... ment)))Promise ... ment)))success ... ument))success ... nts.mapdocumen ... cument)handleS ... cument)handleS ... ulWritedocumen ... execPredocumen ... s.hooksdocument.schema.sdocument.schemareturn  ... \n\n  });new Pro ... ;\n\n  })(resolv ... );\n\n  }{\n    i ... );\n\n  }document.$isNewdocument.$__reset();document.$__reset()document.$__resetdocumen ... xecPost[document]Model.a ... doc;\n};Model.a ...  doc;\n}Model.applyDefaults{\n  if  ...  doc;\n}{\n    a ... oc;\n  }applyDe ... clude);applyDe ... xclude)doc.$__.fieldsdoc.$__.excludedoc.$getAllSubdocs()subdoc.$__.fieldssubdoc.$__.excludeModel.a ... obj;\n};Model.a ...  obj;\n}Model.applyVirtualsapplyVi ... Apply);Model.a ... estampsModel.c ... ret;\n};Model.c ...  ret;\n}Model.castObject{\n  opt ...  ret;\n}let sch ... schema;schema = this.schemaobj[dis ... != nullobj[dis ... torKey]const v ...  path);val = get(obj, path)get(obj, path)pushNes ...  path);pushNes ... , path)let val ... oid 0);val = g ... void 0)get(obj ... void 0)let cur = ret;cur = retcur[pie ... == nullcur[pieces[i]]cur[pie ... } : [];cur[pie ... {} : []isNaN(p ... {} : []isNaN(pieces[i + 1])pieces[i + 1]cur = c ... es[i]];cur = cur[pieces[i]]const c ... Arrays;castNon ... nArraysschemaT ... nArraysschemaT ... optionsschemaT ... tructor!castNonArraysOptionif (!op ...       }!option ... tErrorsoptions ... tErrorserror = ... rror();error = ... Error()error | ... Error()error.a ...  val));error.a ... , val))error.addErrornew Obj ... h, val)cur[pie ...      ];cur[pie ...       ]cur[pie ... h - 1]]pieces[ ... th - 1]Model.c ... r, val)Model.c ... ct.callschemaType.casterval = M ... , val);val = M ... r, val)error.a ... , err);error.a ... h, err)cur[pie ...  = val;cur[pie ... ] = valif (err ... or;\n  }Model.b ... \n  }\n};Model.b ... }\n  }\n}Model.b ... rationsif (!Ar ... `);\n  }!Array. ... uments)Array.i ... uments)throw n ... tead`);new Err ... stead`)`bulkSa ... nstead`bulkSav ... ived \`bulkSave expects an array of documents to be passed, received `setDefaultOptions();setDefaultOptions()const w ...  null);writeOp ... = null)documen ... = null)documen ... .filterdocumen ... l;\n  })(docume ... ll;\n  }if (!op ... }\n    }!option ... idation!(docum ... cument)(docume ... cument)documen ... ocumentthrow n ... nt).`);new Err ... ent).`)`docume ... ment).` was no ... ument).options ... oreSaveconst e ... Sync();err = d ... eSync()documen ... eSync()documen ... ateSyncconst i ... .isNew;isANewD ... t.isNewdocument.isNewconst w ... nt } };writeOp ... ent } }{ inser ... ent } }insertO ... ument }{ document }utils.i ... tamps);utils.i ... stamps)utils.i ... sOptioninjectT ... sOptionwriteOp ... sertOnereturn  ... ration;document.$__delta()document.$__deltaconst i ... ta[0]);isDocum ... lta[0])isDocum ... Changesdelta ! ... lta[0])delta != null!utils. ... lta[0])utils.i ... lta[0])documen ... lta[0])document.$__whereconst c ... lta[1];changes = delta[1]const s ... ardKey;shardKe ... hardKeythis.sc ... hardKeyif (sha ...       }const p ... rdKey);paths = ... ardKey)Object. ... ardKey)where[p ... hs[i]];where[p ... ths[i]]where[paths[i]]document[paths[i]]documen ... delta);documen ...  delta)document.$__versionconst w ... es } };writeOp ... ges } }{ updat ... ges } }updateO ... anges }{ filte ... anges }filter: whereupdate: changeswriteOp ... dateOneop => op !== nullop !== nullreturn  ... ations;Model.h ... ent;\n};Model.h ... ment;\n}Model.hydrate{\n  _ch ... ment;\n}_checkC ... rate');_checkC ... drate')if (pro ... n);\n  }projection != nullobj !=  ... != nullobj = o ... tions);obj = o ... ptions)obj = a ... ction);obj = a ... ection)applyPr ... ection)const d ... ction);documen ... ection)require ... ection)require ... teModeldocumen ... tions);documen ... ptions)document.$initreturn document;Model.u ... ns);\n};Model.u ... ons);\n}Model.updateManyif (upd ... ');\n  }throw n ... lish');new Mon ... llish')'update ... ullish'updateMany `update` parameter cannot be nullish_update ... ptions)Model.updateOneModel.r ... ns);\n};Model.r ... ons);\n}Model.replaceOne_checkC ... ceOne')const v ... | null;version ... || nullthis && ... sionKeyversion ... ionKey]!doc[versionKey]{\n  con ... ons);\n}new mod ... ection)model.Queryif (con ... s);\n  }conditi ... ocumentconditi ... ject();conditi ... bject()conditions.toObjectconditi ... tions);conditi ... itions)clone(conditions)typeof  ... ptions)model & ... || nullmodel & ... sionKeymodel & ... optionsmodel & ... .schemamq[op]( ... ptions)mq[op]Model.a ... ate;\n};Model.a ... gate;\n}Model.aggregatefunctio ... gate;\n}{\n  _ch ... gate;\n}_checkC ... gate');_checkC ... egate')Model.aggregate() no longer accepts a callbackconst a ... || []);aggrega ...  || [])new Agg ...  || [])aggrega ... (this);aggrega ... l(this)aggregate.modelaggrega ... tions);aggrega ... ptions)aggregate.optionreturn aggregate;Model.v ...  });\n};Model.v ...   });\n}Model.validateif ((ar ... bj;\n  }(argume ... th < 3)arguments.length < 3{\n    / ... bj;\n  }context = obj;context = objtypeof contextModel.validate() no longer accepts a callbacklet pat ... paths);pathsOr ... != nullconst _ ... paths);_pathsT ... (paths)typeof  ... (paths)typeof  ... Optionsnew Set ... t(' '))pathsOr ... it(' ')pathsOrOptions.splitArray.i ... (paths)Array.i ... ptions)new Set ... ptions)paths = ...     });paths = ... \n    })paths.filterp => {\n ... ;\n    }pathsOr ... sToSkippathsOr ... x == p)pathsOr ... ip.findx => x == px == ppathsOr ... udes(p)pathsOr ... ncludesp.split('.')_pathsT ... as(cur)cur += '.' + piece;cur += '.' + piecereturn  ... has(p);_pathsT ... .has(p)!schema ... ntArrayobj = t ... t(obj);obj = t ... ct(obj)this.castObject(obj)this.castObject{\n    e ...   }\n  }error.errors || {}error.errorspaths.delete(key);paths.delete(key)let rem ... s.size;remaini ... hs.sizepaths.sizenew Pro ...  }\n  })(resolv ...   }\n  }if (rem ... ;\n    }remaining === 0return settle();settle()_checkDone();_checkDone()const v ... oid 0);schemaT ... ath });schemaT ... path })resolve(obj);resolve(obj)Model.p ... ocs;\n};Model.p ... docs;\n}Model.populateasync f ... docs;\n}{\n  _ch ... docs;\n}_checkC ... late');_checkC ... ulate')Model.populate() no longer accepts a callbackutils.p ... (paths)if (pat ... cs;\n  }return docs;if (pat ... s);\n  }paths.f ... rdered)paths.findp => p.orderedp.orderedawait _ ...  path);await _ ... , path)_popula ... , path){\n    / ... s);\n  }const promises = [];promises = []promise ... path));promise ...  path))promises.pushawait P ... mises);await P ... omises)Promise ... omises)const e ... id\s?/;exclude ... _id\s?/const e ... d\s?/g;exclude ... id\s?/gif (pop ...   }\n  }populat ... opulateif (pop ... ;\n    }populat ... != nullpopulat ... alModelpopulat ... Optionspopulat ... .schemapopulat ... pulate;model.b ... != nullmodel.b ... opulateif (!Ar ... s];\n  }!Array.isArray(docs)Array.isArray(docs){\n    d ... s];\n  }docs = [docs];docs = [docs][docs]docs.le ... efined)docs.length === 0docs.ev ... efined)docs.everyutils.i ... definedconst m ... tions);modelsM ... ptions)getMode ... ptions)if (mod ... ap;\n  }modelsM ... seError{\n    t ... ap;\n  }throw modelsMap;len = m ... .lengthmodelsMap.lengthlet vals = [];vals = []{\n    / ... em;\n  }return  ... = item;undefined !== itemlet hasOne = false;hasOne = falseconst params = [];params = []for (le ... ]);\n  }{\n    c ... ]);\n  }const m ... Map[i];mod = modelsMap[i]modelsMap[i]let sel ... select;select  ... .selectmod.options.selectmod.optionslet ids ... atten);ids = u ... latten)utils.a ... latten)mod.idsids = u ... e(ids);ids = u ... ue(ids)utils.a ... ue(ids)utils.array.uniqueassignmentOpts = {}assignm ... void 0;assignm ...  void 0assignmentOpts.sortmod &&\n ...  void 0mod &&\n ... ns.sortmod &&\n ... optionsmod.options.optionsmod.opt ... ns.sortassignm ... === 0);assignm ...  === 0)exclude ...  === 0)exclude ... select)excludeIdReg.test(select ...  === 0)select  ... d === 0select._id === 0select._idmod.opt ... ansformmod.opt ... ns.leanmod.opt ... optionsmod.opt ... nsform;mod.opt ... = true;mod.opt ...  = trueif (ids ... ;\n    }ids.len ... efined)ids.length === 0ids.lengthids.eve ... efined)ids.every_assign ... tOpts);_assign ... ntOpts)hasOne = true;hasOne = truetypeof  ... gnFieldpopulat ... gnFieldmod.for ... lear();mod.for ... clear()mod.for ... d.clearmod.foreignFieldmod.for ... Field);mod.for ... nField)mod.foreignField.addconst m ... idIds);match = ... lidIds)createP ... lidIds)mod.matchmod.modelmod.opt ... alidIdsif (ass ... }\n    }typeof selectselect  ... , ' ');select  ... l, ' ')select. ... l, ' ')select.replaceArray.i ... select)select  ... -_id');select  ... '-_id')select. ... '-_id')select.filterfield = ...  '-_id'field !== '-_id'select  ... lect };select  ... elect }{ ...select }...selectdelete select._id;delete select._idmod.opt ... != nullmod.opt ... s.limitassignm ... .limit;assignm ... s.limitmod.options.limitparams. ... Opts]);params. ... tOpts])params.push[mod, m ... ntOpts]if (!ha ... rn;\n  }!hasOnemodelsM ... h !== 0const o ...    }));opts =  ...     }))utils.p ...     }))utils.p ... te).maputils.p ... pulate)pop =>  ...      })path: p ... op.pathpopulat ... op.pathpopulat ... h + '.'pop.pathmodel.p ... , opts)model.populateif (pop ... s);\n  }populat ... orderedconst arrawait _ ... b); });await _ ... Db); })_execPo ... Db); })_execPo ... r).then_execPo ... l, arr)_execPo ... y.applyvalsFro ... mDb); }{ vals  ... mDb); }vals =  ... romDb);vals =  ... FromDb)vals.co ... FromDb)vals.concatpromise ... ); }));promise ... b); }))const mod = arr[0];mod = arr[0]const a ... arr[3];assignm ...  arr[3]arr[3]mod.opt ... h(val);mod.opt ... sh(val)mod.opt ... cs.pushmod.opt ... ildDocsremoveD ...  vals);removeD ... , vals)arr[0].foreignFieldarr[0].optionsmod.opt ... m(doc);mod.opt ... rm(doc){\n  let ... \n  );\n}let sub ... ulate);subPopu ... pulate)clone(m ... pulate)mod.options.populatequeryOp ... ptions){\n    s ... mit\n  }skip: m ... ns.skipmod.options.skiplimit:  ... s.limitmod.opt ... ntLimitif (mod ... ip;\n  }mod.count{\n    d ... ip;\n  }delete  ... s.skip;delete  ... ns.skipqueryOptions.skipif (que ... th;\n  }queryOp ... != nullqueryOp ... ntLimit{\n    q ... it;\n  }queryOp ... tLimit;queryOptions.limitdelete  ... tLimit;delete  ... ntLimit{\n    q ... th;\n  }queryOp ... length;queryOp ... .lengthmod.ids.lengthmod.mod ... ptions)mod.model.findforeign ... ively()query.s ... ively()query.s ... usively!isPath ... nField)isPathS ... nField)query._fieldsquery.s ... Field);query.s ... nField)if (sub ... e);\n  }mod.mod ... != nullmod.mod ... delNameArray.i ... pulate)subPopu ... se; });subPopu ... lse; })subPopulate.forEachpop =>  ... alse; }{ pop.s ... alse; }pop.str ...  false;pop.str ... = falsepop.strictPopulatetypeof subPopulatesubPopu ... alse };subPopu ... false }{ path: ... false }path: subPopulatestrictP ... : falsesubPopu ...  false;subPopu ... = falsesubPopu ... opulateconst b ... s.path;basePat ... ns.pathmod.opt ... ns.pathmod.opt ... ullPathmod.options.pathconst poppop._fu ... p.path;pop._fu ... op.pathpop._fullPathbasePat ... op.pathbasePath + '.'subPopu ... e.path;subPopu ... te.pathsubPopu ... ullPathbasePat ... te.pathsubPopulate.pathquery.p ... ulate);query.p ... pulate)query.populatereturn  ...  }\n  );query.e ...   }\n  )query.exec().thenquery.exec()docs => ... ;\n    }leanPop ... .model)const i ... irtual;mod.isVirtualconst j ... ustOne;mod.justOnelet _val;const l ...  false;lean =  ... | falseoptions ... ns.leanoptions.options.leanlen = vals.lengthconst rawOrder = {};rawOrder = {}const rawDocs = {};rawDocs = {}const a ... llIds);allIds  ... allIds)clone(mod.allIds)mod.allIdsval = vals[i];val = vals[i]_val =  ... , val);_val =  ... d, val)utils.g ... d, val)_val =  ... _val));_val =  ... (_val))utils.a ... (_val))utils.a ... n(_val)let __valif (__v ...       }__val i ... ocument__val = ... oc._id;__val = ... doc._id__val._doc._id__val._doc__val?. ... nction'__val?. ... e === 4__val?. ... Binary'__val?. ... r?.name__val?.constructor__val.sub_type === 4__val.sub_typetypeof __val.toUUID__val.toUUIDkey = S ... UID());key = S ... UUID())String( ... UUID())__val.toUUID()__val?. ... Buffer'__val._subtype === 4__val._subtypekey = String(__val);key = String(__val)String(__val)rawDocs[key]rawDocs ... h(val);rawDocs ... sh(val)rawDocs[key].pushrawOrde ... ush(i);rawOrde ... push(i)rawOrder[key].pushrawOrder[key]rawDocs ... , val];rawDocs ... ], val][rawDocs[key], val]rawOrde ... y], i];rawOrde ... ey], i][rawOrder[key], i]if (isV ...       }isVirtu ... justOne!justOnerawDocs ...  [val];rawDocs[key] = [val]rawOrder[key] = [i];rawOrder[key] = [i][i]rawDocs[key] = val;rawDocs[key] = valrawOrder[key] = i;rawOrder[key] = i_val in ... ocument_val =  ... oc._id;_val = _val._doc._id_val._doc._id_val._doc_val?.c ... nction'_val?.c ... e === 4_val?.c ... Binary'_val?.c ... r?.name_val?.constructor_val.sub_type === 4_val.sub_typetypeof _val.toUUID_val.toUUID_val.toUUID()_val?.c ... Buffer'_val._subtype === 4_val._subtypekey = String(_val);key = String(_val)String(_val)isVirtu ... l._id))isVirtu ... tructorrawDocs ... tructor(rawDoc ... l._id))(rawDoc ... ]._id))rawDocs ... y]._id)rawDocs ... ocumentString( ... oc._id)rawDocs ... doc._idrawDocs[key]._docString( ... y]._id)rawDocs[key]._id(val in ... l._id))val ins ... al._id)String(val._doc._id)String(val._id)val.$__ ... _val };val.$__ ...  _val }{ value: _val }value: _valassignV ... h\n  });assignV ... ch\n  }){\n    o ... tch\n  }originalModel: modelrawIds: ... .allIdsmod.isV ... .allIdsallIds: allIdsunpopul ... dValuesmod.unp ... dValuesrawDocs: rawDocsrawOrder: rawOrderdocs: mod.docsmod.docspath: options.pathoptions ... entOptsjustOne: mod.justOneallOptions: modpopulat ... d.modellean: leanvirtual: mod.virtualmod.virtualcount: mod.countmatch: mod.matchModel.c ... del;\n};Model.c ... odel;\n}Model.compileconst v ...  false;version ... = falseschema. ... sionKeyif (ver ... o);\n  }!schema ... ionKey]schema. ... ionKey]{\n    / ... o);\n  }const o = {};o = {}o[schem ... Number;o[schem ...  Numbero[schem ... ionKey]schema.add(o);schema.add(o)if (typ ...  };\n  }typeof  ... f Modelname.pr ... f Modelname.prototype{\n    m ... ue;\n  }name = model.name;name = model.namemodel.nameschema. ... false);schema.loadClassmodel.p ... = true;model.p ...  = truemodel.p ... ototypemodel = ... \n    };model = ... ;\n    }model.h ... , doc);model.h ... ', doc)model.h ... PreSync!(this  ...  model)(this i ...  model)this in ... f modelreturn  ... kipId);new mod ... skipId)model.d ... == nulldoc[dis ... == nullModel.c ... kipId);Model.c ... skipId)Model.callconst D ... rKey]);Discrim ... orKey])model.d ... orKey])model.d ... orKey]]if (Dis ...       }Discrim ... != nullnew Dis ... skipId)model.h ... lone();model.h ... clone()schema. ... clone()schema.s.hooks.clonemodel.base = base;model.base = basemodel.m ... = name;model.m ...  = nameif (!(m ... e);\n  }{\n    O ... e);\n  }Object. ... Model);Object. ...  Model)model.m ... );\n  };model.m ... e);\n  }model.modelthis.db.model(name)model.d ... ection;model.d ... nectionmodel.p ... ection;model.p ... nectionmodel.p ... Symbol]model.d ... efined;model.d ... definedmodel.p ... definedmodel.p ... inatorsmodel[m ... = true;model[m ...  = truemodel[modelSymbol]model.e ... tter();model.e ... itter()schema. ... pile();schema._preCompile()schema._preCompileconst _ ...  || {};_userPr ... s || {}schema. ... s || {}const c ... me\n  };collect ... ame\n  }{\n    s ... ame\n  }capped: ... .cappedschema. ... .cappedmodel.base.PromisemodelName: nameif (sch ... te;\n  }schema. ...  void 0schema. ... oCreate{\n    c ... te;\n  }collect ... Create;collect ... oCreateconst c ... ns\n  );collect ... ons\n  )connect ... ons\n  )model.p ... lectionmodel.p ... chema);model.p ... schema)model.p ... tSchemaapplyHo ... chema);applyHo ... schema)applySt ... atics);applySt ... tatics)model.s ... _schemamodel.p ... _schemamodel.c ... ection;model.$ ... ection;model.$ ... lectionmodel.Q ... );\n  };model.Q ... s);\n  }{\n    Q ... s);\n  }Query.a ... ments);Query.a ... uments)Query.applymodel.Q ... ototypemodel.Q ... y.base;model.Q ... ry.basemodel.Query.baseQuery.basemodel.Q ...  Query;model.Q ... = Querymodel.Q ... tructormodel._ ... ware();model._ ... eware()_applyQ ... dlewareapplyQu ... query);applyQu ... .query)schema.queryModel.c ...   );\n};Model.c ... \n  );\n}Model.c ... ryptionconst C ... yption;ClientE ... ryptionthis.ba ... ryptionif (!Cl ... ');\n  }!ClientEncryption'The mo ... bject.'The mongodb driver must be used to obtain a ClientEncryption object.The mongodb driver must be used to obtain a ClientEncryption objectconst c ... client;client  ... .clientthis.co ... .clientthis.co ... n?.connif (!cl ... n null;!clientconst a ... yption;autoEnc ... ryptionautoEnc ... Optionsclient. ... ryptionclient.optionsif (!au ... n null;!autoEn ... Options{\n    k ... Options{\n    k ... ons\n  }new Cli ... s }\n  )keyVaul ...  client{ keyVa ... tions }Model.$ ... ion;\n};Model.$ ... tion;\n}Model.$ ... nectionthis.db ... nectionconst c ... ts\n  );collect ... pts\n  )newConn ... pts\n  )newConn ... lectionthis.co ... ionNamethis.collection.optsmodel.Q ... ods[i];model.Q ... hods[i]model.Q ... type[i]methods[i]Model._ ... del;\n};Model._ ... odel;\n}Model.__subclass{\n  //  ... odel;\n}const M ... );\n  };Model = ... d);\n  }functio ... d);\n  }if (!(t ... ;\n    }!(this  ...  Model)(this i ...  Model)this in ... f Modelnew Mod ... skipId)_this.c ... kipId);_this.c ... skipId)_this.callObject. ... _this);Object. ...  _this)_this.prototypeModel.db = conn;Model.db = connModel.p ... = conn;Model.p ...  = connModel.p ... Symbol]_this[s ...  || [];_this[s ... ] || []_this[s ... Symbol]_this[s ... Model);_this[s ... (Model)_this[s ... l].pushif (_th ...   }\n  }_this.d ... != null_this.discriminators{\n    M ...   }\n  }Model.d ... s = {};Model.d ... rs = {}Model.d ... ction);Model.d ... ection)Model.d ... rs[key]_this.d ... ection)_this.d ... ubclass_this.d ... rs[key]_this.db_this.d ... .schemas = sch ... _schemaschema  ... string'_this.p ... _schemas.options || {}s.optionss._user ... s || {}s._user ... Optionsif (!co ... ));\n  }collect ... ize());collect ... lize())_this.p ... lize())_this.p ... ction')_this.p ... ema.getutils.t ... lize())utils.t ... ionNamethis.ba ... alize()this.base.pluralizeconst c ... ed\n  };collect ... ped\n  }{\n    s ... ped\n  }s && options.cappedoptions.cappedModel.p ... tions);Model.p ... ptions)conn.co ... ptions)conn.collectionModel.c ... ection;Model.$ ... ection;Model.$ ... lectionModel.i ... => {});Model.i ...  => {})Model.init().catchModel.init()Model.r ... ue);\n};Model.r ... rue);\n}Model.r ... eSchema{\n  thi ... rue);\n}this.pr ... chema);this.pr ... schema)this.pr ... tSchemathis.sc ... inatorsthis.sc ... .keys()this.sc ... rs.keysconst discthis.di ... disc));this.di ... (disc))this.discriminatorthis.sc ... t(disc)this.sc ... ors.getdelete  ... onsMap;delete  ... ionsMapthis.sc ... ionsMap_defaul ... ionsMapapplyEm ...  true);applyEm ... , true)Model.i ...  }`;\n};Model.i ... } }`;\n}Model.inspectfunctio ... } }`;\n}{\n  ret ... } }`;\n}return  ... me} }`;`Model  ... ame} }`Model.n ... ame;\n};Model.n ... Name;\n}functio ... Name;\n}{\n  ret ... Name;\n}return  ... onName;this.db ... ionNamethis.db.name + '.'this.db.nameModel[u ... nspect;Model[u ... inspectModel[u ... custom]Model._ ... are;\n};Model._ ... ware;\n}Model._ ... dlewarefunctio ... ware;\n}{\n  con ... ware;\n}const Q ... .Query;Query = this.Queryconst q ... ;\n  });queryMi ... e;\n  })this.sc ... e;\n  })this.sc ... .filterthis.schema.s.hooksthis.schema.shook => ... ue;\n  }const c ... (hook);context ... s(hook)_getContexts(hook)hook.na ... lidate'return  ... .query;!!contexts.query!contexts.querycontexts.query!!conte ... h === 0Object. ... ntexts)return !!hook.query;!!hook.query!hook.queryQuery.p ... leware;Query.p ... dlewareif (hoo ... ry;\n  }hook.ha ... query')hook.hasOwnPropertyret.que ... .query;ret.que ... k.queryret.queryif (hoo ... nt;\n  }hook.ha ... ument')ret.doc ... cument;ret.doc ... ocumentret.documentmodule. ...  Model;module. ... = Modelexports = Model/home/insomnia/repos/mongoose/lib/modifiedPathsSnapshot.js(subdoc ... on;\n  }this.su ... apshot;this.su ... napshotthis.subdocSnapshotthis.ac ... ePaths;this.ac ... vePathsthis.ve ... version/home/insomnia/repos/mongoose/lib/mongoose.js
 * Mongoose constructor.
 *
 * The exports object of the `mongoose` module is an instance of this class.
 * Most apps will only use this one instance.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     mongoose instanceof mongoose.Mongoose; // true
 *
 *     // Create a new Mongoose instance with its own `connect()`, `set()`, `model()`, etc.
 *     const m = new mongoose.Mongoose();
 *
 * @api public
 * @param {Object} options see [`Mongoose#set()` docs](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.set())
 /**\n *  ... ())\n */ default global options// defa ... options If a user creates their own Mongoose instance, give them a separate copy// If a ... te copy of the `Schema` constructor so they get separate custom types. (gh-6933)// of t ... h-6933) Hack to work around babel's strange behavior with// Hack ... or with `import mongoose, { Schema } from 'mongoose'`. Because `Schema` is not// `imp ...  is not an own property of a Mongoose global, Schema will be undefined. See gh-5648// an o ... gh-5648
 * Expose connection states for user-land
 *
 * @memberOf Mongoose
 * @property STATES
 * @api public
 
 * Expose connection states for user-land
 *
 * @memberOf Mongoose
 * @property ConnectionStates
 * @api public
 
 * Object with `get()` and `set()` containing the underlying driver this Mongoose instance
 * uses to communicate with the database. A driver is a Mongoose-specific interface that defines functions
 * like `find()`.
 *
 * @deprecated
 * @memberOf Mongoose
 * @property driver
 * @api public
 
 * Overwrites the current driver used by this Mongoose instance. A driver is a
 * Mongoose-specific interface that defines functions like `find()`.
 *
 * @memberOf Mongoose
 * @method setDriver
 * @api public
  Update all models that pointed to the old default connection to// Upda ... tion to the new default connection, including collections// the  ... ections
 * Sets mongoose options
 *
 * `key` can be used a object to set multiple options at once.
 * If a error gets thrown for one option, other options will still be evaluated.
 *
 * #### Example:
 *
 *     mongoose.set('test', value) // sets the 'test' option to `value`
 *
 *     mongoose.set('debug', true) // enable logging collection methods + arguments to the console/file
 *
 *     mongoose.set('debug', function(collectionName, methodName, ...methodArgs) {}); // use custom function to log collection methods + arguments
 *
 *     mongoose.set({ debug: true, autoIndex: false }); // set multiple options at once
 *
 * Currently supported options are:
 * - `allowDiskUse`: Set to `true` to set `allowDiskUse` to true to all aggregation operations by default.
 * - `applyPluginsToChildSchemas`: `true` by default. Set to false to skip applying global plugins to child schemas
 * - `applyPluginsToDiscriminators`: `false` by default. Set to true to apply global plugins to discriminator schemas. This typically isn't necessary because plugins are applied to the base schema and discriminators copy all middleware, methods, statics, and properties from the base schema.
 * - `autoCreate`: Set to `true` to make Mongoose call [`Model.createCollection()`](https://mongoosejs.com/docs/api/model.html#Model.createCollection()) automatically when you create a model with `mongoose.model()` or `conn.model()`. This is useful for testing transactions, change streams, and other features that require the collection to exist.
 * - `autoIndex`: `true` by default. Set to false to disable automatic index creation for all models associated with this Mongoose instance.
 * - `bufferCommands`: enable/disable mongoose's buffering mechanism for all connections and models
 * - `bufferTimeoutMS`: If bufferCommands is on, this option sets the maximum amount of time Mongoose buffering will wait before throwing an error. If not specified, Mongoose will use 10000 (10 seconds).
 * - `cloneSchemas`: `false` by default. Set to `true` to `clone()` all schemas before compiling into a model.
 * - `debug`: If `true`, prints the operations mongoose sends to MongoDB to the console. If a writable stream is passed, it will log to that stream, without colorization. If a callback function is passed, it will receive the collection name, the method name, then all arguments passed to the method. For example, if you wanted to replicate the default logging, you could output from the callback `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(', ')})`.
 * - `id`: If `true`, adds a `id` virtual to all schemas unless overwritten on a per-schema basis.
 * - `timestamps.createdAt.immutable`: `true` by default. If `false`, it will change the `createdAt` field to be [`immutable: false`](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.immutable) which means you can update the `createdAt`
 * - `maxTimeMS`: If set, attaches [maxTimeMS](https://www.mongodb.com/docs/manual/reference/operator/meta/maxTimeMS/) to every query
 * - `objectIdGetter`: `true` by default. Mongoose adds a getter to MongoDB ObjectId's called `_id` that returns `this` for convenience with populate. Set this to false to remove the getter.
 * - `overwriteModels`: Set to `true` to default to overwriting models with the same name when calling `mongoose.model()`, as opposed to throwing an `OverwriteModelError`.
 * - `returnOriginal`: If `false`, changes the default `returnOriginal` option to `findOneAndUpdate()`, `findByIdAndUpdate`, and `findOneAndReplace()` to false. This is equivalent to setting the `new` option to `true` for `findOneAndX()` calls by default. Read our [`findOneAndUpdate()` tutorial](https://mongoosejs.com/docs/tutorials/findoneandupdate.html) for more information.
 * - `runValidators`: `false` by default. Set to true to enable [update validators](https://mongoosejs.com/docs/validation.html#update-validators) for all validators by default.
 * - `sanitizeFilter`: `false` by default. Set to true to enable the [sanitization of the query filters](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.sanitizeFilter()) against query selector injection attacks by wrapping any nested objects that have a property whose name starts with `$` in a `$eq`.
 * - `selectPopulatedPaths`: `true` by default. Set to false to opt out of Mongoose adding all fields that you `populate()` to your `select()`. The schema-level option `selectPopulatedPaths` overwrites this one.
 * - `strict`: `true` by default, may be `false`, `true`, or `'throw'`. Sets the default strict mode for schemas.
 * - `strictQuery`: `false` by default. May be `false`, `true`, or `'throw'`. Sets the default [strictQuery](https://mongoosejs.com/docs/guide.html#strictQuery) mode for schemas.
 * - `toJSON`: `{ transform: true, flattenDecimals: true }` by default. Overwrites default objects to [`toJSON()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.toJSON()), for determining how Mongoose documents get serialized by `JSON.stringify()`
 * - `toObject`: `{ transform: true, flattenDecimals: true }` by default. Overwrites default objects to [`toObject()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject())
 *
 * @param {String|Object} key The name of the option or a object of multiple key-value pairs
 * @param {String|Function|Boolean} value The value of the option, unused if "key" is a object
 * @returns {Mongoose} The used Mongoose instnace
 * @api public
  array for errors to collect all errors for all key-value pairs, like ".validate"// arra ... lidate"
 * Gets mongoose options
 *
 * #### Example:
 *
 *     mongoose.get('test') // returns the 'test' value
 *
 * @param {String} key
 * @method get
 * @api public
 
 * Creates a Connection instance.
 *
 * Each `connection` instance maps to a single database. This method is helpful when managing multiple db connections.
 *
 *
 * _Options passed take precedence over options included in connection strings._
 *
 * #### Example:
 *
 *     // with mongodb:// URI
 *     db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port/database');
 *
 *     // and options
 *     const opts = { db: { native_parser: true }}
 *     db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port/database', opts);
 *
 *     // replica sets
 *     db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port,anotherhost:port,yetanother:port/database');
 *
 *     // and options
 *     const opts = { replset: { strategy: 'ping', rs_name: 'testSet' }}
 *     db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port,anotherhost:port,yetanother:port/database', opts);
 *
 *     // initialize now, connect later
 *     db = mongoose.createConnection();
 *     await db.openUri('mongodb://127.0.0.1:27017/database');
 *
 * @param {String} uri mongodb URI to connect to
 * @param {Object} [options] passed down to the [MongoDB driver's `connect()` function](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/MongoClientOptions.html), except for 4 mongoose-specific options explained below.
 * @param {Boolean} [options.bufferCommands=true] Mongoose specific option. Set to false to [disable buffering](https://mongoosejs.com/docs/faq.html#callback_never_executes) on all models associated with this connection.
 * @param {String} [options.dbName] The name of the database you want to use. If not provided, Mongoose uses the database name from connection string.
 * @param {String} [options.user] username for authentication, equivalent to `options.auth.user`. Maintained for backwards compatibility.
 * @param {String} [options.pass] password for authentication, equivalent to `options.auth.password`. Maintained for backwards compatibility.
 * @param {Boolean} [options.autoIndex=true] Mongoose-specific option. Set to false to disable automatic index creation for all models associated with this connection.
 * @param {Class} [options.promiseLibrary] Sets the [underlying driver's promise library](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/MongoClientOptions.html#promiseLibrary).
 * @param {Number} [options.maxPoolSize=5] The maximum number of sockets the MongoDB driver will keep open for this connection. Keep in mind that MongoDB only allows one operation per socket at a time, so you may want to increase this if you find you have a few slow queries that are blocking faster queries from proceeding. See [Slow Trains in MongoDB and Node.js](https://thecodebarbarian.com/slow-trains-in-mongodb-and-nodejs).
 * @param {Number} [options.minPoolSize=1] The minimum number of sockets the MongoDB driver will keep open for this connection. Keep in mind that MongoDB only allows one operation per socket at a time, so you may want to increase this if you find you have a few slow queries that are blocking faster queries from proceeding. See [Slow Trains in MongoDB and Node.js](https://thecodebarbarian.com/slow-trains-in-mongodb-and-nodejs).
 * @param {Number} [options.socketTimeoutMS=0] How long the MongoDB driver will wait before killing a socket due to inactivity _after initial connection_. Defaults to 0, which means Node.js will not time out the socket due to inactivity. A socket may be inactive because of either no activity or a long-running operation. This option is passed to [Node.js `socket#setTimeout()` function](https://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback) after the MongoDB driver successfully completes.
 * @param {Number} [options.family=0] Passed transparently to [Node.js' `dns.lookup()`](https://nodejs.org/api/dns.html#dns_dns_lookup_hostname_options_callback) function. May be either `0`, `4`, or `6`. `4` means use IPv4 only, `6` means use IPv6 only, `0` means try both.
 * @return {Connection} the created Connection object. Connections are not thenable, so you can't do `await mongoose.createConnection()`. To await use `mongoose.createConnection(uri).asPromise()` instead.
 * @api public
 
 * Opens the default mongoose connection.
 *
 * #### Example:
 *
 *     mongoose.connect('mongodb://user:pass@127.0.0.1:port/database');
 *
 *     // replica sets
 *     const uri = 'mongodb://user:pass@127.0.0.1:port,anotherhost:port,yetanother:port/mydatabase';
 *     mongoose.connect(uri);
 *
 *     // with options
 *     mongoose.connect(uri, options);
 *
 *     // Using `await` throws "MongooseServerSelectionError: Server selection timed out after 30000 ms"
 *     // if Mongoose can't connect.
 *     const uri = 'mongodb://nonexistent.domain:27000';
 *     await mongoose.connect(uri);
 *
 * @param {String} uri mongodb URI to connect to
 * @param {Object} [options] passed down to the [MongoDB driver's `connect()` function](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/MongoClientOptions.html), except for 4 mongoose-specific options explained below.
 * @param {Boolean} [options.bufferCommands=true] Mongoose specific option. Set to false to [disable buffering](https://mongoosejs.com/docs/faq.html#callback_never_executes) on all models associated with this connection.
 * @param {Number} [options.bufferTimeoutMS=10000] Mongoose specific option. If `bufferCommands` is true, Mongoose will throw an error after `bufferTimeoutMS` if the operation is still buffered.
 * @param {String} [options.dbName] The name of the database we want to use. If not provided, use database name from connection string.
 * @param {String} [options.user] username for authentication, equivalent to `options.auth.user`. Maintained for backwards compatibility.
 * @param {String} [options.pass] password for authentication, equivalent to `options.auth.password`. Maintained for backwards compatibility.
 * @param {Number} [options.maxPoolSize=100] The maximum number of sockets the MongoDB driver will keep open for this connection. Keep in mind that MongoDB only allows one operation per socket at a time, so you may want to increase this if you find you have a few slow queries that are blocking faster queries from proceeding. See [Slow Trains in MongoDB and Node.js](https://thecodebarbarian.com/slow-trains-in-mongodb-and-nodejs).
 * @param {Number} [options.minPoolSize=0] The minimum number of sockets the MongoDB driver will keep open for this connection.
 * @param {Number} [options.serverSelectionTimeoutMS] If `useUnifiedTopology = true`, the MongoDB driver will try to find a server to send any given operation to, and keep retrying for `serverSelectionTimeoutMS` milliseconds before erroring out. If not set, the MongoDB driver defaults to using `30000` (30 seconds).
 * @param {Number} [options.heartbeatFrequencyMS] If `useUnifiedTopology = true`, the MongoDB driver sends a heartbeat every `heartbeatFrequencyMS` to check on the status of the connection. A heartbeat is subject to `serverSelectionTimeoutMS`, so the MongoDB driver will retry failed heartbeats for up to 30 seconds by default. Mongoose only emits a `'disconnected'` event after a heartbeat has failed, so you may want to decrease this setting to reduce the time between when your server goes down and when Mongoose emits `'disconnected'`. We recommend you do **not** set this setting below 1000, too many heartbeats can lead to performance degradation.
 * @param {Boolean} [options.autoIndex=true] Mongoose-specific option. Set to false to disable automatic index creation for all models associated with this connection.
 * @param {Class} [options.promiseLibrary] Sets the [underlying driver's promise library](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/MongoClientOptions.html#promiseLibrary).
 * @param {Number} [options.socketTimeoutMS=0] How long the MongoDB driver will wait before killing a socket due to inactivity _after initial connection_. A socket may be inactive because of either no activity or a long-running operation. `socketTimeoutMS` defaults to 0, which means Node.js will not time out the socket due to inactivity. This option is passed to [Node.js `socket#setTimeout()` function](https://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback) after the MongoDB driver successfully completes.
 * @param {Number} [options.family=0] Passed transparently to [Node.js' `dns.lookup()`](https://nodejs.org/api/dns.html#dns_dns_lookup_hostname_options_callback) function. May be either `0`, `4`, or `6`. `4` means use IPv4 only, `6` means use IPv6 only, `0` means try both.
 * @param {Boolean} [options.autoCreate=false] Set to `true` to make Mongoose automatically call `createCollection()` on every model created on this connection.
 * @see Mongoose#createConnection https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()
 * @api public
 * @return {Promise} resolves to `this` if connection succeeded
 /**\n *  ... ded\n */
 * Runs `.close()` on all connections in parallel.
 *
 * @return {Promise} resolves when all connections are closed, or rejects with the first error that occurred.
 * @api public
 
 * _Requires MongoDB >= 3.6.0._ Starts a [MongoDB session](https://www.mongodb.com/docs/manual/release-notes/3.6/#client-sessions)
 * for benefits like causal consistency, [retryable writes](https://www.mongodb.com/docs/manual/core/retryable-writes/),
 * and [transactions](https://thecodebarbarian.com/a-node-js-perspective-on-mongodb-4-transactions.html).
 *
 * Calling `mongoose.startSession()` is equivalent to calling `mongoose.connection.startSession()`.
 * Sessions are scoped to a connection, so calling `mongoose.startSession()`
 * starts a session on the [default mongoose connection](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.connection).
 *
 * @param {Object} [options] see the [mongodb driver options](https://mongodb.github.io/node-mongodb-native/4.9/classes/MongoClient.html#startSession)
 * @param {Boolean} [options.causalConsistency=true] set to false to disable causal consistency
 * @return {Promise<ClientSession>} promise that resolves to a MongoDB driver `ClientSession`
 * @api public
 
 * Getter/setter around function for pluralizing collection names.
 *
 * @param {Function|null} [fn] overwrites the function used to pluralize collection names
 * @return {Function|null} the current function used to pluralize collection names, defaults to the legacy function from `mongoose-legacy-pluralize`.
 * @api public
 
 * Defines a model or retrieves it.
 *
 * Models defined on the `mongoose` instance are available to all connection
 * created by the same `mongoose` instance.
 *
 * If you call `mongoose.model()` with twice the same name but a different schema,
 * you will get an `OverwriteModelError`. If you call `mongoose.model()` with
 * the same name and same schema, you'll get the same schema back.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *
 *     // define an Actor model with this mongoose instance
 *     const schema = new Schema({ name: String });
 *     mongoose.model('Actor', schema);
 *
 *     // create a new connection
 *     const conn = mongoose.createConnection(..);
 *
 *     // create Actor model
 *     const Actor = conn.model('Actor', schema);
 *     conn.model('Actor') === Actor; // true
 *     conn.model('Actor', schema) === Actor; // true, same schema
 *     conn.model('Actor', schema, 'actors') === Actor; // true, same schema and collection name
 *
 *     // This throws an `OverwriteModelError` because the schema is different.
 *     conn.model('Actor', new Schema({ name: String }));
 *
 * _When no `collection` argument is passed, Mongoose uses the model name. If you don't like this behavior, either pass a collection name, use `mongoose.pluralize()`, or set your schemas collection name option._
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String }, { collection: 'actor' });
 *
 *     // or
 *
 *     schema.set('collection', 'actor');
 *
 *     // or
 *
 *     const collectionName = 'actor';
 *     const M = mongoose.model('Actor', schema, collectionName);
 *
 * @param {String|Function} name model name or class extending Model
 * @param {Schema} [schema] the schema to use.
 * @param {String} [collection] name (optional, inferred from model name)
 * @param {Object} [options]
 * @param {Boolean} [options.overwriteModels=false] If true, overwrite existing models with the same name to avoid `OverwriteModelError`
 * @return {Model} The model associated with `name`. Mongoose will create the model if it doesn't already exist.
 * @api public
  handle internal options from connection.model()// hand ... model() connection.model() may be passing a different schema for// conn ... ema for an existing model name. in this case don't read from cache.// an e ...  cache. subclass current model with alternate collection Apply relevant "global" options to the schema// Appl ...  schema
 * Removes the model named `name` from the default connection, if it exists.
 * You can use this function to clean up any models you created in your tests to
 * prevent OverwriteModelErrors.
 *
 * Equivalent to `mongoose.connection.deleteModel(name)`.
 *
 * #### Example:
 *
 *     mongoose.model('User', new Schema({ name: String }));
 *     console.log(mongoose.model('User')); // Model object
 *     mongoose.deleteModel('User');
 *     console.log(mongoose.model('User')); // undefined
 *
 *     // Usually useful in a Mocha `afterEach()` hook
 *     afterEach(function() {
 *       mongoose.deleteModel(/.+/); // Delete every model
 *     });
 *
 * @api public
 * @param {String|RegExp} name if string, the name of the model to remove. If regexp, removes all models whose name matches the regexp.
 * @return {Mongoose} this
 
 * Returns an array of model names created on this instance of Mongoose.
 *
 * #### Note:
 *
 * _Does not include names of models created using `connection.model()`._
 *
 * @api public
 * @return {Array}
 
 * Applies global plugins to `schema`.
 *
 * @param {Schema} schema
 * @api private
 
 * Declares a global plugin executed on all Schemas.
 *
 * Equivalent to calling `.plugin(fn)` on each Schema you create.
 *
 * @param {Function} fn plugin callback
 * @param {Object} [opts] optional options
 * @return {Mongoose} this
 * @see plugins https://mongoosejs.com/docs/plugins.html
 * @api public
 
 * The Mongoose module's default connection. Equivalent to `mongoose.connections[0]`, see [`connections`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.connections).
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     mongoose.connect(...);
 *     mongoose.connection.on('error', cb);
 *
 * This is the connection used by default for every model created using [mongoose.model](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()).
 *
 * To create a new connection, use [`createConnection()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()).
 *
 * @memberOf Mongoose
 * @instance
 * @property {Connection} connection
 * @api public
 
 * An array containing all [connections](connection.html) associated with this
 * Mongoose instance. By default, there is 1 connection. Calling
 * [`createConnection()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()) adds a connection
 * to this array.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     mongoose.connections.length; // 1, just the default connection
 *     mongoose.connections[0] === mongoose.connection; // true
 *
 *     mongoose.createConnection('mongodb://127.0.0.1:27017/test');
 *     mongoose.connections.length; // 2
 *
 * @memberOf Mongoose
 * @instance
 * @property {Array} connections
 * @api public
 
 * An integer containing the value of the next connection id. Calling
 * [`createConnection()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()) increments
 * this value.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     mongoose.createConnection(); // id `0`, `nextConnectionId` becomes `1`
 *     mongoose.createConnection(); // id `1`, `nextConnectionId` becomes `2`
 *     mongoose.connections[0].destroy() // Removes connection with id `0`
 *     mongoose.createConnection(); // id `2`, `nextConnectionId` becomes `3`
 *
 * @memberOf Mongoose
 * @instance
 * @property {Number} nextConnectionId
 * @api private
 
 * The Mongoose Aggregate constructor
 *
 * @method Aggregate
 * @api public
 
 * The Base Mongoose Collection class. `mongoose.Collection` extends from this class.
 *
 * @memberOf Mongoose
 * @instance
 * @method Collection
 * @api public
 
 * The Mongoose Collection constructor
 *
 * @memberOf Mongoose
 * @instance
 * @method Collection
 * @api public
 
 * The Mongoose [Connection](https://mongoosejs.com/docs/api/connection.html#Connection()) constructor
 *
 * @memberOf Mongoose
 * @instance
 * @method Connection
 * @api public
 
 * The Base Mongoose Connection class. `mongoose.Connection` extends from this class.
 *
 * @memberOf Mongoose
 * @instance
 * @method Connection
 * @api public
 
 * The Mongoose version
 *
 * #### Example:
 *
 *     console.log(mongoose.version); // '5.x.x'
 *
 * @property version
 * @api public
 
 * The Mongoose constructor
 *
 * The exports of the mongoose module is an instance of this class.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     const mongoose2 = new mongoose.Mongoose();
 *
 * @method Mongoose
 * @api public
 
 * The Mongoose [SchemaType](https://mongoosejs.com/docs/api/schematype.html#SchemaType()) constructor
 *
 * @method SchemaType
 * @api public
 
 * The various Mongoose SchemaTypes.
 *
 * #### Note:
 *
 * _Alias of mongoose.Schema.Types for backwards compatibility._
 *
 * @property SchemaTypes
 * @see Schema.SchemaTypes https://mongoosejs.com/docs/schematypes.html
 * @api public
 
 * The various Mongoose Types.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     const array = mongoose.Types.Array;
 *
 * #### Types:
 *
 * - [Array](https://mongoosejs.com/docs/schematypes.html#arrays)
 * - [Buffer](https://mongoosejs.com/docs/schematypes.html#buffers)
 * - [Embedded](https://mongoosejs.com/docs/schematypes.html#schemas)
 * - [DocumentArray](https://mongoosejs.com/docs/api/documentarraypath.html)
 * - [Decimal128](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.Decimal128)
 * - [ObjectId](https://mongoosejs.com/docs/schematypes.html#objectids)
 * - [Map](https://mongoosejs.com/docs/schematypes.html#maps)
 * - [Subdocument](https://mongoosejs.com/docs/schematypes.html#schemas)
 * - [Int32](https://mongoosejs.com/docs/schematypes.html#int32)
 *
 * Using this exposed access to the `ObjectId` type, we can construct ids on demand.
 *
 *     const ObjectId = mongoose.Types.ObjectId;
 *     const id1 = new ObjectId;
 *
 * @property Types
 * @api public
 
 * The Mongoose [Query](https://mongoosejs.com/docs/api/query.html#Query()) constructor.
 *
 * @method Query
 * @api public
 
 * The Mongoose [Model](https://mongoosejs.com/docs/api/model.html#Model()) constructor.
 *
 * @method Model
 * @api public
 
 * The Mongoose [Document](https://mongoosejs.com/docs/api/document.html#Document()) constructor.
 *
 * @method Document
 * @api public
 
 * The Mongoose DocumentProvider constructor. Mongoose users should not have to
 * use this directly
 *
 * @method DocumentProvider
 * @api public
 
 * The Mongoose ObjectId [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
 * declaring paths in your schema that should be
 * [MongoDB ObjectIds](https://www.mongodb.com/docs/manual/reference/method/ObjectId/).
 * Do not use this to create a new ObjectId instance, use `mongoose.Types.ObjectId`
 * instead.
 *
 * #### Example:
 *
 *     const childSchema = new Schema({ parentId: mongoose.ObjectId });
 *
 * @property ObjectId
 * @api public
 
 * Returns true if Mongoose can cast the given value to an ObjectId, or
 * false otherwise.
 *
 * #### Example:
 *
 *     mongoose.isValidObjectId(new mongoose.Types.ObjectId()); // true
 *     mongoose.isValidObjectId('0123456789ab'); // true
 *     mongoose.isValidObjectId(6); // true
 *     mongoose.isValidObjectId(new User({ name: 'test' })); // true
 *
 *     mongoose.isValidObjectId({ test: 42 }); // false
 *
 * @method isValidObjectId
 * @param {Any} v
 * @returns {boolean} true if `v` is something Mongoose can coerce to an ObjectId
 * @api public
 
 * Returns true if the given value is a Mongoose ObjectId (using `instanceof`) or if the
 * given value is a 24 character hex string, which is the most commonly used string representation
 * of an ObjectId.
 *
 * This function is similar to `isValidObjectId()`, but considerably more strict, because
 * `isValidObjectId()` will return `true` for _any_ value that Mongoose can convert to an
 * ObjectId. That includes Mongoose documents, any string of length 12, and any number.
 * `isObjectIdOrHexString()` returns true only for `ObjectId` instances or 24 character hex
 * strings, and will return false for numbers, documents, and strings of length 12.
 *
 * #### Example:
 *
 *     mongoose.isObjectIdOrHexString(new mongoose.Types.ObjectId()); // true
 *     mongoose.isObjectIdOrHexString('62261a65d66c6be0a63c051f'); // true
 *
 *     mongoose.isObjectIdOrHexString('0123456789ab'); // false
 *     mongoose.isObjectIdOrHexString(6); // false
 *     mongoose.isObjectIdOrHexString(new User({ name: 'test' })); // false
 *     mongoose.isObjectIdOrHexString({ test: 42 }); // false
 *
 * @method isObjectIdOrHexString
 * @param {Any} v
 * @returns {boolean} true if `v` is an ObjectId instance _or_ a 24 char hex string
 * @api public
 
 *
 * Syncs all the indexes for the models registered with this connection.
 *
 * @param {Object} options
 * @param {Boolean} options.continueOnError `false` by default. If set to `true`, mongoose will not throw an error if one model syncing failed, and will return an object where the keys are the names of the models, and the values are the results/errors for each model.
 * @return {Promise} Returns a Promise, when the Promise resolves the value is a list of the dropped indexes.
 /**\n *\n ... es.\n */
 * The Mongoose Decimal128 [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
 * declaring paths in your schema that should be
 * [128-bit decimal floating points](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-decimal.html).
 * Do not use this to create a new Decimal128 instance, use `mongoose.Types.Decimal128`
 * instead.
 *
 * #### Example:
 *
 *     const vehicleSchema = new Schema({ fuelLevel: mongoose.Decimal128 });
 *
 * @property Decimal128
 * @api public
 
 * The Mongoose Mixed [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
 * declaring paths in your schema that Mongoose's change tracking, casting,
 * and validation should ignore.
 *
 * #### Example:
 *
 *     const schema = new Schema({ arbitrary: mongoose.Mixed });
 *
 * @property Mixed
 * @api public
 
 * The Mongoose Date [SchemaType](https://mongoosejs.com/docs/schematypes.html).
 *
 * #### Example:
 *
 *     const schema = new Schema({ test: Date });
 *     schema.path('test') instanceof mongoose.Date; // true
 *
 * @property Date
 * @api public
 
 * The Mongoose Number [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
 * declaring paths in your schema that Mongoose should cast to numbers.
 *
 * #### Example:
 *
 *     const schema = new Schema({ num: mongoose.Number });
 *     // Equivalent to:
 *     const schema = new Schema({ num: 'number' });
 *
 * @property Number
 * @api public
 
 * Mongoose uses this function to get the current time when setting
 * [timestamps](https://mongoosejs.com/docs/guide.html#timestamps). You may stub out this function
 * using a tool like [Sinon](https://www.npmjs.com/package/sinon) for testing.
 *
 * @method now
 * @returns Date the current time
 * @api public
 
 * The Mongoose CastError constructor
 *
 * @method CastError
 * @param {String} type The name of the type
 * @param {Any} value The value that failed to cast
 * @param {String} path The path `a.b.c` in the doc where this cast error occurred
 * @param {Error} [reason] The original error that was thrown
 * @api public
 
 * The [mquery](https://github.com/aheckmann/mquery) query builder Mongoose uses.
 *
 * @property mquery
 * @api public
 
 * Sanitizes query filters against [query selector injection attacks](https://thecodebarbarian.com/2014/09/04/defending-against-query-selector-injection-attacks.html)
 * by wrapping any nested objects that have a property whose name starts with `$` in a `$eq`.
 *
 * ```javascript
 * const obj = { username: 'val', pwd: { $ne: null } };
 * sanitizeFilter(obj);
 * obj; // { username: 'val', pwd: { $eq: { $ne: null } } });
 * ```
 *
 * @method sanitizeFilter
 * @param {Object} filter
 * @returns Object the sanitized object
 * @api public
 
 * Tells `sanitizeFilter()` to skip the given object when filtering out potential [query selector injection attacks](https://thecodebarbarian.com/2014/09/04/defending-against-query-selector-injection-attacks.html).
 * Use this method when you have a known query selector that you want to use.
 *
 * ```javascript
 * const obj = { username: 'val', pwd: trusted({ $type: 'string', $eq: 'my secret' }) };
 * sanitizeFilter(obj);
 *
 * // Note that `sanitizeFilter()` did not add `$eq` around `$type`.
 * obj; // { username: 'val', pwd: { $type: 'string', $eq: 'my secret' } });
 * ```
 *
 * @method trusted
 * @param {Object} obj
 * @returns Object the passed in object
 * @api public
 
 * Use this function in `pre()` middleware to skip calling the wrapped function.
 *
 * #### Example:
 *
 *     schema.pre('save', function() {
 *       // Will skip executing `save()`, but will execute post hooks as if
 *       // `save()` had executed with the result `{ matchedCount: 0 }`
 *       return mongoose.skipMiddlewareFunction({ matchedCount: 0 });
 *     });
 *
 * @method skipMiddlewareFunction
 * @param {any} result
 * @api public
 
 * Use this function in `post()` middleware to replace the result
 *
 * #### Example:
 *
 *     schema.post('find', function(res) {
 *       // Normally you have to modify `res` in place. But with
 *       // `overwriteMiddlewarResult()`, you can make `find()` return a
 *       // completely different value.
 *       return mongoose.overwriteMiddlewareResult(res.filter(doc => !doc.isDeleted));
 *     });
 *
 * @method overwriteMiddlewareResult
 * @param {any} result
 * @api public
 
 * Takes in an object and deletes any keys from the object whose values
 * are strictly equal to `undefined`.
 * This function is useful for query filters because Mongoose treats
 * `TestModel.find({ name: undefined })` as `TestModel.find({ name: null })`.
 *
 * #### Example:
 *
 *     const filter = { name: 'John', age: undefined, status: 'active' };
 *     mongoose.omitUndefined(filter); // { name: 'John', status: 'active' }
 *     filter; // { name: 'John', status: 'active' }
 *
 *     await UserModel.findOne(mongoose.omitUndefined(filter));
 *
 * @method omitUndefined
 * @param {Object} [val] the object to remove undefined keys from
 * @returns {Object} the object passed in
 * @api public
 !
 * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
 * No-op if there is already a default connection.
  default connection// defa ... nection
 * The exports object is an instance of Mongoose.
 *
 * @api private
 './schemaType'VALID_OPTIONS'./validOptions''./model''./plugins'legacyPluralize'./helpers/pluralize''../package.json''./helpers/query/trusted''./helpers/query/sanitizeFilter''./error/setOptionError'defaultMongooseSymbol'mongoose:default'defaultConnectionSymbol'mongoose:defaultConnection''./helpers/printJestWarning'objectIdHexRegexp/^[0-9A-Fa-f]{24}$/AsyncLocalStorage'node:async_hooks'createInitialConnection'createInitialConnection'_createDefaultConnection_pluralizeConnectionStates_mongooseopenConnection'Cannot modify Mongoose driver if a connection is already open. ''Call `mongoose.disconnect()` before modifying the driver'oldDefaultConnectiongetsetOptionsoptionValue'objectIdGetter''transactionAsyncLocalStorage''createConnection''Mongoose.prototype.connect() no longer accepts a callback''Mongoose.prototype.disconnect() no longer accepts a callback''cloneSchemas''overwriteModels''pluralization''$globalPluginsApplied''connection'BaseCollection'Collection''Connection'BaseConnection'./documentProvider'isValid'mquery'overwriteResult'./helpers/omitUndefined'Mongoose constructor.

The exports object of the `mongoose` module is an instance of this class.
Most apps will only use this one instance.

#### Example:

const mongoose = require('mongoose');
mongoose instanceof mongoose.Mongoose; // true

// Create a new Mongoose instance with its own `connect()`, `set()`, `model()`, etc.
const m = new mongoose.Mongoose();see [`Mongoose#set()` docs](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.set())Expose connection states for user-landMongoose
Object with `get()` and `set()` containing the underlying driver this Mongoose instance
uses to communicate with the database. A driver is a Mongoose-specific interface that defines functions
like `find()`.Overwrites the current driver used by this Mongoose instance. A driver is a
Mongoose-specific interface that defines functions like `find()`.Sets mongoose options

`key` can be used a object to set multiple options at once.
If a error gets thrown for one option, other options will still be evaluated.

#### Example:

mongoose.set('test', value) // sets the 'test' option to `value`

mongoose.set('debug', true) // enable logging collection methods + arguments to the console/file

mongoose.set('debug', function(collectionName, methodName, ...methodArgs) {}); // use custom function to log collection methods + arguments

mongoose.set({ debug: true, autoIndex: false }); // set multiple options at once

Currently supported options are:
- `allowDiskUse`: Set to `true` to set `allowDiskUse` to true to all aggregation operations by default.
- `applyPluginsToChildSchemas`: `true` by default. Set to false to skip applying global plugins to child schemas
- `applyPluginsToDiscriminators`: `false` by default. Set to true to apply global plugins to discriminator schemas. This typically isn't necessary because plugins are applied to the base schema and discriminators copy all middleware, methods, statics, and properties from the base schema.
- `autoCreate`: Set to `true` to make Mongoose call [`Model.createCollection()`](https://mongoosejs.com/docs/api/model.html#Model.createCollection()) automatically when you create a model with `mongoose.model()` or `conn.model()`. This is useful for testing transactions, change streams, and other features that require the collection to exist.
- `autoIndex`: `true` by default. Set to false to disable automatic index creation for all models associated with this Mongoose instance.
- `bufferCommands`: enable/disable mongoose's buffering mechanism for all connections and models
- `bufferTimeoutMS`: If bufferCommands is on, this option sets the maximum amount of time Mongoose buffering will wait before throwing an error. If not specified, Mongoose will use 10000 (10 seconds).
- `cloneSchemas`: `false` by default. Set to `true` to `clone()` all schemas before compiling into a model.
- `debug`: If `true`, prints the operations mongoose sends to MongoDB to the console. If a writable stream is passed, it will log to that stream, without colorization. If a callback function is passed, it will receive the collection name, the method name, then all arguments passed to the method. For example, if you wanted to replicate the default logging, you could output from the callback `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(', ')})`.
- `id`: If `true`, adds a `id` virtual to all schemas unless overwritten on a per-schema basis.
- `timestamps.createdAt.immutable`: `true` by default. If `false`, it will change the `createdAt` field to be [`immutable: false`](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.immutable) which means you can update the `createdAt`
- `maxTimeMS`: If set, attaches [maxTimeMS](https://www.mongodb.com/docs/manual/reference/operator/meta/maxTimeMS/) to every query
- `objectIdGetter`: `true` by default. Mongoose adds a getter to MongoDB ObjectId's called `_id` that returns `this` for convenience with populate. Set this to false to remove the getter.
- `overwriteModels`: Set to `true` to default to overwriting models with the same name when calling `mongoose.model()`, as opposed to throwing an `OverwriteModelError`.
- `returnOriginal`: If `false`, changes the default `returnOriginal` option to `findOneAndUpdate()`, `findByIdAndUpdate`, and `findOneAndReplace()` to false. This is equivalent to setting the `new` option to `true` for `findOneAndX()` calls by default. Read our [`findOneAndUpdate()` tutorial](https://mongoosejs.com/docs/tutorials/findoneandupdate.html) for more information.
- `runValidators`: `false` by default. Set to true to enable [update validators](https://mongoosejs.com/docs/validation.html#update-validators) for all validators by default.
- `sanitizeFilter`: `false` by default. Set to true to enable the [sanitization of the query filters](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.sanitizeFilter()) against query selector injection attacks by wrapping any nested objects that have a property whose name starts with `$` in a `$eq`.
- `selectPopulatedPaths`: `true` by default. Set to false to opt out of Mongoose adding all fields that you `populate()` to your `select()`. The schema-level option `selectPopulatedPaths` overwrites this one.
- `strict`: `true` by default, may be `false`, `true`, or `'throw'`. Sets the default strict mode for schemas.
- `strictQuery`: `false` by default. May be `false`, `true`, or `'throw'`. Sets the default [strictQuery](https://mongoosejs.com/docs/guide.html#strictQuery) mode for schemas.
- `toJSON`: `{ transform: true, flattenDecimals: true }` by default. Overwrites default objects to [`toJSON()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.toJSON()), for determining how Mongoose documents get serialized by `JSON.stringify()`
- `toObject`: `{ transform: true, flattenDecimals: true }` by default. Overwrites default objects to [`toObject()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject())The name of the option or a object of multiple key-value pairs
The value of the option, unused if "key" is a object
(String|Function|Boolean)The used Mongoose instnace
Gets mongoose options

#### Example:

mongoose.get('test') // returns the 'test' valueCreates a Connection instance.

Each `connection` instance maps to a single database. This method is helpful when managing multiple db connections.


_Options passed take precedence over options included in connection strings._

#### Example:

// with mongodb:// URI
db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port/database');

// and options
const opts = { db: { native_parser: true }}
db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port/database', opts);

// replica sets
db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port,anotherhost:port,yetanother:port/database');

// and options
const opts = { replset: { strategy: 'ping', rs_name: 'testSet' }}
db = mongoose.createConnection('mongodb://user:pass@127.0.0.1:port,anotherhost:port,yetanother:port/database', opts);

// initialize now, connect later
db = mongoose.createConnection();
await db.openUri('mongodb://127.0.0.1:27017/database');mongodb URI to connect to
passed down to the [MongoDB driver's `connect()` function](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/MongoClientOptions.html), except for 4 mongoose-specific options explained below.
The name of the database you want to use. If not provided, Mongoose uses the database name from connection string.
How long the MongoDB driver will wait before killing a socket due to inactivity _after initial connection_. Defaults to 0, which means Node.js will not time out the socket due to inactivity. A socket may be inactive because of either no activity or a long-running operation. This option is passed to [Node.js `socket#setTimeout()` function](https://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback) after the MongoDB driver successfully completes.
Passed transparently to [Node.js' `dns.lookup()`](https://nodejs.org/api/dns.html#dns_dns_lookup_hostname_options_callback) function. May be either `0`, `4`, or `6`. `4` means use IPv4 only, `6` means use IPv6 only, `0` means try both.
the created Connection object. Connections are not thenable, so you can't do `await mongoose.createConnection()`. To await use `mongoose.createConnection(uri).asPromise()` instead.
Opens the default mongoose connection.

#### Example:

mongoose.connect('mongodb://user:pass@127.0.0.1:port/database');

// replica sets
const uri = 'mongodb://user:pass@127.0.0.1:port,anotherhost:port,yetanother:port/mydatabase';
mongoose.connect(uri);

// with options
mongoose.connect(uri, options);

// Using `await` throws "MongooseServerSelectionError: Server selection timed out after 30000 ms"
// if Mongoose can't connect.
const uri = 'mongodb://nonexistent.domain:27000';
await mongoose.connect(uri);The minimum number of sockets the MongoDB driver will keep open for this connection.
Mongoose#createConnection https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()
resolves to `this` if connection succeededRuns `.close()` on all connections in parallel.resolves when all connections are closed, or rejects with the first error that occurred.
_Requires MongoDB >= 3.6.0._ Starts a [MongoDB session](https://www.mongodb.com/docs/manual/release-notes/3.6/#client-sessions)
for benefits like causal consistency, [retryable writes](https://www.mongodb.com/docs/manual/core/retryable-writes/),
and [transactions](https://thecodebarbarian.com/a-node-js-perspective-on-mongodb-4-transactions.html).

Calling `mongoose.startSession()` is equivalent to calling `mongoose.connection.startSession()`.
Sessions are scoped to a connection, so calling `mongoose.startSession()`
starts a session on the [default mongoose connection](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.connection).Getter/setter around function for pluralizing collection names.overwrites the function used to pluralize collection names
the current function used to pluralize collection names, defaults to the legacy function from `mongoose-legacy-pluralize`.
Defines a model or retrieves it.

Models defined on the `mongoose` instance are available to all connection
created by the same `mongoose` instance.

If you call `mongoose.model()` with twice the same name but a different schema,
you will get an `OverwriteModelError`. If you call `mongoose.model()` with
the same name and same schema, you'll get the same schema back.

#### Example:

const mongoose = require('mongoose');

// define an Actor model with this mongoose instance
const schema = new Schema({ name: String });
mongoose.model('Actor', schema);

// create a new connection
const conn = mongoose.createConnection(..);

// create Actor model
const Actor = conn.model('Actor', schema);
conn.model('Actor') === Actor; // true
conn.model('Actor', schema) === Actor; // true, same schema
conn.model('Actor', schema, 'actors') === Actor; // true, same schema and collection name

// This throws an `OverwriteModelError` because the schema is different.
conn.model('Actor', new Schema({ name: String }));

_When no `collection` argument is passed, Mongoose uses the model name. If you don't like this behavior, either pass a collection name, use `mongoose.pluralize()`, or set your schemas collection name option._

#### Example:

const schema = new Schema({ name: String }, { collection: 'actor' });

// or

schema.set('collection', 'actor');

// or

const collectionName = 'actor';
const M = mongoose.model('Actor', schema, collectionName);the schema to use.
name (optional, inferred from model name)
The model associated with `name`. Mongoose will create the model if it doesn't already exist.
Removes the model named `name` from the default connection, if it exists.
You can use this function to clean up any models you created in your tests to
prevent OverwriteModelErrors.

Equivalent to `mongoose.connection.deleteModel(name)`.

#### Example:

mongoose.model('User', new Schema({ name: String }));
console.log(mongoose.model('User')); // Model object
mongoose.deleteModel('User');
console.log(mongoose.model('User')); // undefined

// Usually useful in a Mocha `afterEach()` hook
afterEach(function() {
mongoose.deleteModel(/.+/); // Delete every model
});Returns an array of model names created on this instance of Mongoose.

#### Note:

_Does not include names of models created using `connection.model()`._Applies global plugins to `schema`.Declares a global plugin executed on all Schemas.

Equivalent to calling `.plugin(fn)` on each Schema you create.The Mongoose module's default connection. Equivalent to `mongoose.connections[0]`, see [`connections`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.connections).

#### Example:

const mongoose = require('mongoose');
mongoose.connect(...);
mongoose.connection.on('error', cb);

This is the connection used by default for every model created using [mongoose.model](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.model()).

To create a new connection, use [`createConnection()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()).An array containing all [connections](connection.html) associated with this
Mongoose instance. By default, there is 1 connection. Calling
[`createConnection()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()) adds a connection
to this array.

#### Example:

const mongoose = require('mongoose');
mongoose.connections.length; // 1, just the default connection
mongoose.connections[0] === mongoose.connection; // true

mongoose.createConnection('mongodb://127.0.0.1:27017/test');
mongoose.connections.length; // 2An integer containing the value of the next connection id. Calling
[`createConnection()`](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.createConnection()) increments
this value.

#### Example:

const mongoose = require('mongoose');
mongoose.createConnection(); // id `0`, `nextConnectionId` becomes `1`
mongoose.createConnection(); // id `1`, `nextConnectionId` becomes `2`
mongoose.connections[0].destroy() // Removes connection with id `0`
mongoose.createConnection(); // id `2`, `nextConnectionId` becomes `3`The Mongoose Aggregate constructorThe Base Mongoose Collection class. `mongoose.Collection` extends from this class.The Mongoose Collection constructorThe Mongoose [Connection](https://mongoosejs.com/docs/api/connection.html#Connection()) constructorThe Base Mongoose Connection class. `mongoose.Connection` extends from this class.The Mongoose version

#### Example:

console.log(mongoose.version); // '5.x.x'The Mongoose constructor

The exports of the mongoose module is an instance of this class.

#### Example:

const mongoose = require('mongoose');
const mongoose2 = new mongoose.Mongoose();The Mongoose [SchemaType](https://mongoosejs.com/docs/api/schematype.html#SchemaType()) constructorSchema.SchemaTypes https://mongoosejs.com/docs/schematypes.html
The various Mongoose Types.

#### Example:

const mongoose = require('mongoose');
const array = mongoose.Types.Array;

#### Types:

- [Array](https://mongoosejs.com/docs/schematypes.html#arrays)
- [Buffer](https://mongoosejs.com/docs/schematypes.html#buffers)
- [Embedded](https://mongoosejs.com/docs/schematypes.html#schemas)
- [DocumentArray](https://mongoosejs.com/docs/api/documentarraypath.html)
- [Decimal128](https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.Decimal128)
- [ObjectId](https://mongoosejs.com/docs/schematypes.html#objectids)
- [Map](https://mongoosejs.com/docs/schematypes.html#maps)
- [Subdocument](https://mongoosejs.com/docs/schematypes.html#schemas)
- [Int32](https://mongoosejs.com/docs/schematypes.html#int32)

Using this exposed access to the `ObjectId` type, we can construct ids on demand.

const ObjectId = mongoose.Types.ObjectId;
const id1 = new ObjectId;The Mongoose [Query](https://mongoosejs.com/docs/api/query.html#Query()) constructor.The Mongoose [Model](https://mongoosejs.com/docs/api/model.html#Model()) constructor.The Mongoose [Document](https://mongoosejs.com/docs/api/document.html#Document()) constructor.The Mongoose DocumentProvider constructor. Mongoose users should not have to
use this directlyThe Mongoose ObjectId [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
declaring paths in your schema that should be
[MongoDB ObjectIds](https://www.mongodb.com/docs/manual/reference/method/ObjectId/).
Do not use this to create a new ObjectId instance, use `mongoose.Types.ObjectId`
instead.

#### Example:

const childSchema = new Schema({ parentId: mongoose.ObjectId });Returns true if Mongoose can cast the given value to an ObjectId, or
false otherwise.

#### Example:

mongoose.isValidObjectId(new mongoose.Types.ObjectId()); // true
mongoose.isValidObjectId('0123456789ab'); // true
mongoose.isValidObjectId(6); // true
mongoose.isValidObjectId(new User({ name: 'test' })); // true

mongoose.isValidObjectId({ test: 42 }); // falsetrue if `v` is something Mongoose can coerce to an ObjectId
Returns true if the given value is a Mongoose ObjectId (using `instanceof`) or if the
given value is a 24 character hex string, which is the most commonly used string representation
of an ObjectId.

This function is similar to `isValidObjectId()`, but considerably more strict, because
`isValidObjectId()` will return `true` for _any_ value that Mongoose can convert to an
ObjectId. That includes Mongoose documents, any string of length 12, and any number.
`isObjectIdOrHexString()` returns true only for `ObjectId` instances or 24 character hex
strings, and will return false for numbers, documents, and strings of length 12.

#### Example:

mongoose.isObjectIdOrHexString(new mongoose.Types.ObjectId()); // true
mongoose.isObjectIdOrHexString('62261a65d66c6be0a63c051f'); // true

mongoose.isObjectIdOrHexString('0123456789ab'); // false
mongoose.isObjectIdOrHexString(6); // false
mongoose.isObjectIdOrHexString(new User({ name: 'test' })); // false
mongoose.isObjectIdOrHexString({ test: 42 }); // falsetrue if `v` is an ObjectId instance _or_ a 24 char hex string
The Mongoose Decimal128 [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
declaring paths in your schema that should be
[128-bit decimal floating points](https://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-decimal.html).
Do not use this to create a new Decimal128 instance, use `mongoose.Types.Decimal128`
instead.

#### Example:

const vehicleSchema = new Schema({ fuelLevel: mongoose.Decimal128 });The Mongoose Mixed [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
declaring paths in your schema that Mongoose's change tracking, casting,
and validation should ignore.

#### Example:

const schema = new Schema({ arbitrary: mongoose.Mixed });The Mongoose Date [SchemaType](https://mongoosejs.com/docs/schematypes.html).

#### Example:

const schema = new Schema({ test: Date });
schema.path('test') instanceof mongoose.Date; // trueThe Mongoose Number [SchemaType](https://mongoosejs.com/docs/schematypes.html). Used for
declaring paths in your schema that Mongoose should cast to numbers.

#### Example:

const schema = new Schema({ num: mongoose.Number });
// Equivalent to:
const schema = new Schema({ num: 'number' });Mongoose uses this function to get the current time when setting
[timestamps](https://mongoosejs.com/docs/guide.html#timestamps). You may stub out this function
using a tool like [Sinon](https://www.npmjs.com/package/sinon) for testing.Date the current time
The Mongoose CastError constructorThe name of the type
The value that failed to cast
The path `a.b.c` in the doc where this cast error occurred
The original error that was thrown
The [mquery](https://github.com/aheckmann/mquery) query builder Mongoose uses.Sanitizes query filters against [query selector injection attacks](https://thecodebarbarian.com/2014/09/04/defending-against-query-selector-injection-attacks.html)
by wrapping any nested objects that have a property whose name starts with `$` in a `$eq`.

```javascript
const obj = { username: 'val', pwd: { $ne: null } };
sanitizeFilter(obj);
obj; // { username: 'val', pwd: { $eq: { $ne: null } } });
```Object the sanitized object
Tells `sanitizeFilter()` to skip the given object when filtering out potential [query selector injection attacks](https://thecodebarbarian.com/2014/09/04/defending-against-query-selector-injection-attacks.html).
Use this method when you have a known query selector that you want to use.

```javascript
const obj = { username: 'val', pwd: trusted({ $type: 'string', $eq: 'my secret' }) };
sanitizeFilter(obj);

// Note that `sanitizeFilter()` did not add `$eq` around `$type`.
obj; // { username: 'val', pwd: { $type: 'string', $eq: 'my secret' } });
```Object the passed in object
Use this function in `pre()` middleware to skip calling the wrapped function.

#### Example:

schema.pre('save', function() {
// Will skip executing `save()`, but will execute post hooks as if
// `save()` had executed with the result `{ matchedCount: 0 }`
return mongoose.skipMiddlewareFunction({ matchedCount: 0 });
});Use this function in `post()` middleware to replace the result

#### Example:

schema.post('find', function(res) {
// Normally you have to modify `res` in place. But with
// `overwriteMiddlewarResult()`, you can make `find()` return a
// completely different value.
return mongoose.overwriteMiddlewareResult(res.filter(doc => !doc.isDeleted));
});Takes in an object and deletes any keys from the object whose values
are strictly equal to `undefined`.
This function is useful for query filters because Mongoose treats
`TestModel.find({ name: undefined })` as `TestModel.find({ name: null })`.

#### Example:

const filter = { name: 'John', age: undefined, status: 'active' };
mongoose.omitUndefined(filter); // { name: 'John', status: 'active' }
filter; // { name: 'John', status: 'active' }

await UserModel.findOne(mongoose.omitUndefined(filter));the object to remove undefined keys from
the object passed in
The exports object is an instance of Mongoose.const S ... Type');SchemaT ... aType')require ... aType')./schemaTypeconst S ... ndex');SchemaT ... index')const V ... Type');Virtual ... lType')const V ... ions');VALID_O ... tions')./validOptions/validOptionsconst T ... ypes');Types = ... types')require('./model')./modelrequire('./plugins')./pluginsconst l ... lize');legacyP ... alize')require ... alize')'./help ... ralize'./helpers/pluralize/helpers/pluralize../package.jsonconst t ... rusted;trusted ... trustedrequire ... trusted'./help ... rusted'./helpers/query/trusted/helpers/query/trustedconst s ... lter');sanitiz ... ilter')./helpers/query/sanitizeFilter/helpers/query/sanitizeFilterconst S ... rror');SetOpti ... Error')'./erro ... nError'./error/setOptionError/error/setOptionErrorconst d ... ault');default ... fault')default ... eSymbolSymbol. ... fault')mongoose:defaultconst d ... tion');default ... ction')default ... nSymbolmongoose:defaultConnectionrequire ... ning');require ... rning')'./help ... arning'./helpers/printJestWarning/helpers/printJestWarningconst o ... {24}$/;objectI ... ]{24}$/^[0-9A-Fa-f]{24}$[0-9A-Fa-f]{24}[0-9A-Fa-f]A-FAFconst { ... ooks');{ Async ... hooks'){ Async ... orage }require ... hooks')node:async_hooksthis.co ... s = [];this.co ... ns = []this.connectionsthis.ne ... Id = 0;this.ne ... nId = 0this.ne ... ctionIdthis.ev ... tter();this.ev ... itter()this.eventsthis.__ ... .get();this.__ ... r.get()this.__driverthis.op ... tions);this.op ... ptions){\n    p ... lse\n  }pluralization: trueautoIndex: trueautoCreate: trueautoSea ... : falseconst c ... ? true;createI ... ?? truecreateI ... nectionutils.g ... ?? trueutils.g ... ptions)'create ... ection'if (cre ... s);\n  }createI ... != nullthis.__ ... != null_create ... (this);_create ... n(this)_create ... nectionthis.op ... ization{\n    t ... ze;\n  }this._p ... ralize;this._p ... uralizethis._pluralize!option ... Symbol]this.Sc ... \n    };this.Sc ... ;\n    }this.Schemathis.base = _this;this.base = _thisSchema. ... uments)Schema.applythis.Sc ... otype);this.Sc ... totype)this.Sc ... ototypeSchema.prototypeObject. ... chema);Object. ... Schema)this.Sc ... = this;this.Sc ...  = thisthis.Schema.basethis.Sc ... Types);this.Sc ... .Types)this.Schema.TypesObject. ... .Types)['Schema', 'model']this[ke ... e[key];this[ke ... pe[key]Mongoos ... pe[key]Mongoose.prototypethis.Sc ... pe.baseif (opt ... ();\n  }options ... Storagethis.tr ... rage();this.tr ... orage()this.tr ... Storagenew Asy ... orage()Object. ... )\n  });Object. ... ))\n  }){\n    c ... ]))\n  }value:  ... ue }]))Object. ... ue }]))Object. ... ns).mapplugin  ... rue }])([plugi ... rue }])[plugin ... true }]Mongoos ... = cast;Mongoos ...  = castMongoos ... pe.castMongoos ... STATES;Mongoos ...  STATESMongoos ... .STATESMongoos ... nStatesMongoos ... driver;Mongoos ...  driverMongoos ... .driverMongoos ... ose;\n};Mongoos ... oose;\n}Mongoos ... tDriverfunctio ... oose;\n}{\n  con ... oose;\n}const _ ... ngoose;_mongoo ... ongoosethis in ... ongooseif (_mo ... se;\n  }_mongoo ...  driver_mongoose.__driverreturn _mongoose;const o ... ected);openCon ... nected)_mongoo ... nected)_mongoo ... ections_mongoo ... ns.findconn => ... nnectedif (ope ... g);\n  }const m ... river';msg = ' ... driver''Cannot ... driver''Cannot ... open. 'Cannot modify Mongoose driver if a connection is already open. 'Call ` ... driver'Call `mongoose.disconnect()` before modifying the driverCannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driverCannot modify Mongoose driver if a connection is already open Call `mongoose` before modifying the driver_mongoo ... driver;Array.i ... lugins)driver.pluginstypeof plugin_mongoo ... lugin);_mongoo ... plugin)_mongoose.pluginif (dri ... s);\n  }driver. ... != nulldriver.SchemaTypes{\n    O ... s);\n  }Object. ... Types);Object. ... aTypes)Connect ... nectiondriver.Connectionconst o ... ons[0];oldDefa ... ions[0]_mongoo ... ions[0]_mongoo ... oose)];_mongoo ... goose)][new Co ... goose)]new Con ... ngoose)_mongoo ... models;_mongoo ... .models_mongoose.modelsif (old ... se;\n  }oldDefa ... == nullmodel.$ ... ns[0]);model.$ ... ons[0])model.$ ... nectionMongoos ... ype.setif (arg ... y];\n  }if (VAL ... ;\n    }VALID_O ...  === -1VALID_O ... Of(key)VALID_O ... indexOfconst e ... rror();new SetOptionError()error.a ... (key));error.a ... r(key))new Set ... or(key)return  ... s[key];_mongoo ... ns[key]_mongoose.optionslet options = {};if (arg ...  };\n  }options ... alue };options ... value }{ [key]: value }[key]: valueif (arg ... ey;\n  }{\n    o ... ey;\n  }options = key;options = keylet err ... efined;error = undefinedconst [ ... nValue][option ... nValue]VALID_O ... ionKey)if (!er ...       }!errorerror.a ... nKey));error.a ... onKey))new Set ... ionKey)_mongoo ... nValue;_mongoo ... onValue_mongoo ... ionKey]optionK ... Getter'objectIdGetter_mongoo ... ototype_mongoo ... bjectId_mongoose.Typesdelete  ... pe._id;delete  ... ype._id_mongoo ... ype._idoptionK ... torage''transa ... torage'optionV ... Storage!_mongo ... Storage_mongoo ... Storage_mongoo ... rage();_mongoo ... orage()!option ... Storage!optionValuedelete  ... torage;delete  ... StorageoptionK ... ection'optionV ... nection!_mongo ... nection_mongoose.connection_create ... goose);_create ... ngoose)optionV ... Symbol]optionV ... = false_mongoo ... Symbol]if (_mo ...       }_mongoo ... h === 0_mongoo ... nnected_mongoo ... dyState_mongoo ... hift();_mongoo ... shift()_mongoo ... s.shiftMongoos ... pe.set;Mongoos ... ype.getMongoos ... onn;\n};Mongoos ... conn;\n}Mongoos ... nectionfunctio ... conn;\n}{\n  con ... conn;\n}_mongoo ... nectionconst c ... goose);conn =  ... ngoose)_mongoo ... (conn);_mongoo ... h(conn)_mongoo ... ns.push_mongoo ... onId++;_mongoo ... ionId++_mongoo ... ctionId_mongoo ...  conn);_mongoo ... , conn)_mongoo ... ts.emit_mongoose.eventsif (arg ... });\n  }conn.op ... rue });conn.op ... true })conn.openUri_fireAndForget: truereturn conn;Mongoos ... se);\n};Mongoos ... ose);\n}Mongoos ... connectasync f ... ose);\n}{\n  if  ... ose);\n}'Mongoo ... llback'Mongoose.prototype.connect() no longer accepts a callbackif (_mo ... e);\n  }_mongoo ... == nullconn =  ... nectionreturn  ... goose);conn.op ... ngoose)conn.op ... s).thenconn.op ... ptions)() => _mongooseMongoos ... )));\n};Mongoos ... ()));\n}async f ... ()));\n}{\n  if  ... ()));\n}Mongoose.prototype.disconnect() no longer accepts a callback_mongoo ... .lengthif (rem ... rn;\n  }remaining <= 0await P ... se()));await P ... ose()))Promise ... ose()))_mongoo ... lose())_mongoo ... ons.mapconn => conn.close()conn.close()conn.closeMongoos ... ts);\n};Mongoos ... nts);\n}Mongoos ... Session_mongoo ... uments)_mongoo ... n.apply_mongoo ... SessionMongoos ... ize;\n};Mongoos ... lize;\n}Mongoos ... uralizefunctio ... lize;\n}{\n  con ... lize;\n}if (arg ... fn;\n  }{\n    _ ... fn;\n  }_mongoo ... e = fn;_mongoo ... ze = fn_mongoose._pluralizereturn  ... ralize;Mongoos ... del;\n};Mongoos ... odel;\n}Mongoos ... e.model{\n    c ... el;\n  }const m ... [name];_mongoo ... s[name]new _mo ... r(name)_mongoo ... maError_mongoose.Errorutils.i ... Schema)new _mo ...  POJO')if (sch ... a);\n  }if (_mo ... ;\n    }_mongoo ... hemas')_mongoose.getcloneSchemas_mongoo ... chema);_mongoo ... schema)_mongoo ... Pluginsconst o ... Models;_mongoo ... eModels_mongoo ... odels')_mongoo ... ropertyif (_mo ... e];\n  }_mongoo ... == true_mongoo ... = false_mongoo ... y(name)options.cacheoverwri ... == true{\n    i ... e];\n  }origina ... fSchema_mongoo ... .schema_mongoo ... elErrorif (col ... ;\n    }_mongoo ... on.name_mongoo ... lectionif (sch ... e);\n  }model = ... ptions)_mongoo ... ptions)_mongoose._model_mongoo ...  model;_mongoo ... = modelMongoos ... ._modelnew _mo ... Model')schema  ... ptions)!('plur ... ptions)('plura ... ptions)'plural ... optionsschema. ... zation;schema. ... ization_mongoo ... izationschema. ... lize())schema. ... ction')schema.get_mongoo ... alize()_mongoose.pluralizeapplyEm ... chema);applyEm ... schema)options ... nectionmodel = ... goose);model = ... ngoose)_mongoo ... ngoose)_mongoo ... compile_mongoose.Modelconnect ... model);connect ...  model)connection.emitschema. ... .keys()schema. ... rs.keysconst { ... (disc);{\n      ... t(disc)schema. ... t(disc)schema. ... ors.getmodel.d ... tions);model.d ... ptions)model.discriminatorMongoos ... teModel_mongoo ... (name);_mongoo ... l(name)_mongoo ... teModelMongoos ... mes;\n};Mongoos ... ames;\n}Mongoos ... elNames{\n  con ... ames;\n}const n ... odels);names = ... models)return names;Mongoos ... d');\n};Mongoos ... ed');\n}Mongoos ... Plugins{\n  con ... ed');\n}_mongoo ... | false_mongoo ... inatorsoptions ...   true;options ...    truetypeof  ...    truetypeof  ... chemas)(_mongo ... chemas)_mongoo ... Schemas_mongoose.plugins'$globa ... pplied'globalPluginsAppliedMongoos ... .plugin_mongoo ... opts]);_mongoo ...  opts])Mongoos ... 0];\n});Mongoos ... [0];\n})Mongoos ... etter__functio ... s[0];\n}{\n  ret ... s[0];\n}return  ... ons[0];this.connections[0]Mongoos ...   }\n});Mongoos ... \n  }\n})if (v i ... ls;\n  }v insta ... nectionthis.__ ... nection{\n    t ... ls;\n  }this.co ... 0] = v;this.co ... [0] = vthis.mo ... models;this.mo ... .modelsv.modelsMongoos ... ctions;Mongoos ... ectionsMongoos ... tionId;Mongoos ... ctionIdMongoos ... regate;Mongoos ... gregateMongoos ... lectionget: fu ... on;\n  }functio ... on;\n  }this.__ ... lectionset: fu ... on;\n  }this.__ ... ection;if (Con ... ;\n    }Mongoos ... ersion;Mongoos ... versionMongoos ... ngoose;Mongoos ... ongooseMongoos ... Schema;Mongoos ...  SchemaMongoos ... .SchemaMongoos ... maType;Mongoos ... emaTypeMongoos ... .Types;Mongoos ... a.TypesMongoos ... maTypesMongoos ... alType;Mongoos ... ualTypeMongoos ...  Types;Mongoos ... = TypesMongoos ... e.TypesMongoos ...  Query;Mongoos ... = QueryMongoos ... e.QueryMongoos ...  Model;Mongoos ... = ModelMongoos ... e.ModelMongoos ... cument;Mongoos ... ocumentMongoos ... ider');Mongoos ... vider')Mongoos ... roviderrequire ... vider')./documentProviderMongoos ... jectId;Mongoos ... bjectIdSchemaTypes.ObjectIdMongoos ... (v);\n};Mongoos ... d(v);\n}functio ... d(v);\n}{\n  con ... d(v);\n}return  ... lid(v);_mongoo ... alid(v)_mongoo ... isValidMongoos ... v));\n};Mongoos ... (v));\n}Mongoos ... xStringfunctio ... (v));\n}{\n  ret ... (v));\n}return  ... st(v));isBsonT ... est(v))(typeof ... est(v))typeof  ... test(v)objectI ... test(v)objectI ... xp.testMongoos ... ns);\n};Mongoos ... ons);\n}Mongoos ... Indexes_mongoo ... IndexesMongoos ... mal128;Mongoos ... imal128SchemaT ... imal128Mongoos ... .Mixed;Mongoos ... s.MixedMongoos ... e.MixedSchemaTypes.MixedMongoos ... s.Date;Mongoos ... es.DateMongoos ... pe.DateSchemaTypes.DateMongoos ... Number;Mongoos ... .NumberSchemaTypes.NumberMongoos ... eError;Mongoos ... seErrorMongoos ... e.ErrorMongoos ... e(); };Mongoos ... te(); }Mongoos ... ype.nowfunctio ... te(); }{ retur ... te(); }Mongoos ... tError;Mongoos ... ions');Mongoos ... tions')Mongoos ... OptionsMongoos ... uery');Mongoos ... query')Mongoos ... .mqueryrequire('mquery')Mongoos ... Filter;Mongoos ... eFilterMongoos ... rusted;Mongoos ... trustedMongoos ... nction;Mongoos ... unctionMongoos ... Result;Mongoos ... eResultKareem. ... eResultMongoos ... ined');Mongoos ... fined')Mongoos ... defined'./help ... efined'./helpers/omitUndefined/helpers/omitUndefinedfunctio ... dels;\n}{\n  if  ... dels;\n}if (mon ... rn;\n  }conn =  ... ction()mongoos ... ction()conn[de ... = true;conn[de ...  = trueconn[de ... Symbol]conn.mo ... models;conn.mo ... .modelsmongoose.modelsconst m ... rue\n});mongoos ... true\n})module. ... true\n})exports ... true\n})new Mon ... true\n}){\n  [de ...  true\n}[defaul ... ]: true/home/insomnia/repos/mongoose/lib/options/populateOptions.js/home/insomnia/repos/mongoose/lib/options
 * The connection used to look up models by name. If not specified, Mongoose
 * will default to using the connection associated with the model in
 * `PopulateOptions#model`.
 *
 * @memberOf PopulateOptions
 * @property {Connection} connection
 * @api public
 '../helpers/clone''Can not use `limit` and `perDocumentLimit` at the same time. Path: `''`.'The connection used to look up models by name. If not specified, Mongoose
will default to using the connection associated with the model in
`PopulateOptions#model`.PopulateOptions
../helpers/cloneclass P ... }\n  }\n}(obj) { ...   }\n  }this._docs = {};this._docs = {}this._docsthis._c ... s = [];this._childDocs = []this._childDocsobj = clone(obj);obj = clone(obj)Object. ... , obj);Object. ... s, obj)typeof  ... opulateobj.subPopulatethis.po ... pulate;this.po ... opulatethis.populateobj.per ... != nullobj.perDocumentLimitobj.limit != nullobj.limitthrow n ...  '`.');new Err ... + '`.')'Can no ...  + '`.''Can no ... bj.path'Can no ... ath: `'Can not use `limit` and `perDocumentLimit` at the same time. Path: `obj.path`./home/insomnia/repos/mongoose/lib/options/propertyOptions.jsmodule. ... d 0\n});module. ... id 0\n})Object. ... id 0\n}){\n  enu ... oid 0\n}value: void 0/home/insomnia/repos/mongoose/lib/options/saveOptions.jsconstru ... ));\n  }(obj) { ... ));\n  }Object. ... (obj));Object. ... e(obj))SaveOpt ... = null;SaveOpt ...  = nullSaveOpt ... subdocsSaveOpt ... ototype/home/insomnia/repos/mongoose/lib/options/schemaArrayOptions.js
 * The options defined on an Array schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ tags: [String] });
 *     schema.path('tags').options; // SchemaArrayOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaArrayOptions
 
 * If this is an array of strings, an array of allowed values for this path.
 * Throws an error if this array isn't an array of strings.
 *
 * @api public
 * @property enum
 * @memberOf SchemaArrayOptions
 * @type {Array}
 * @instance
 
 * If set, specifies the type of this array's values. Equivalent to setting
 * `type` to an array whose first element is `of`.
 *
 * #### Example:
 *
 *     // `arr` is an array of numbers.
 *     new Schema({ arr: [Number] });
 *     // Equivalent way to define `arr` as an array of numbers
 *     new Schema({ arr: { type: Array, of: Number } });
 *
 * @api public
 * @property of
 * @memberOf SchemaArrayOptions
 * @type {Function|String}
 * @instance
 
 * If set to `false`, will always deactivate casting non-array values to arrays.
 * If set to `true`, will cast non-array values to arrays if `init` and `SchemaArray.options.castNonArrays` are also `true`
 *
 * #### Example:
 *
 *     const Model = db.model('Test', new Schema({ x1: { castNonArrays: false, type: [String] } }));
 *     const doc = new Model({ x1: "some non-array value" });
 *     await doc.validate(); // Errors with "CastError"
 *
 * @api public
 * @property castNonArrays
 * @memberOf SchemaArrayOptions
 * @type {Boolean}
 * @instance
 './schemaTypeOptions'SchemaArrayOptions'./propertyOptions''enum''of''castNonArrays'The options defined on an Array schematype.

#### Example:

const schema = new Schema({ tags: [String] });
schema.path('tags').options; // SchemaArrayOptions instanceSchemaTypeOptions
If this is an array of strings, an array of allowed values for this path.
Throws an error if this array isn't an array of strings.SchemaArrayOptions
If set, specifies the type of this array's values. Equivalent to setting
`type` to an array whose first element is `of`.

#### Example:

// `arr` is an array of numbers.
new Schema({ arr: [Number] });
// Equivalent way to define `arr` as an array of numbers
new Schema({ arr: { type: Array, of: Number } });(Function|String)If set to `false`, will always deactivate casting non-array values to arrays.
If set to `true`, will cast non-array values to arrays if `init` and `SchemaArray.options.castNonArrays` are also `true`

#### Example:

const Model = db.model('Test', new Schema({ x1: { castNonArrays: false, type: [String] } }));
const doc = new Model({ x1: "some non-array value" });
await doc.validate(); // Errors with "CastError"SchemaT ... tions')'./sche ... ptions'./schemaTypeOptions/schemaTypeOptionsclass S ... ions {}const o ... ions');opts =  ... tions')./propertyOptions/propertyOptionsObject. ...  opts);Object. ... , opts)SchemaA ... ototype/home/insomnia/repos/mongoose/lib/options/schemaBufferOptions.js
 * The options defined on a Buffer schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ bitmap: Buffer });
 *     schema.path('bitmap').options; // SchemaBufferOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaBufferOptions
 
 * Set the default subtype for this buffer.
 *
 * @api public
 * @property subtype
 * @memberOf SchemaBufferOptions
 * @type {Number}
 * @instance
 SchemaBufferOptions'subtype'The options defined on a Buffer schematype.

#### Example:

const schema = new Schema({ bitmap: Buffer });
schema.path('bitmap').options; // SchemaBufferOptions instanceSet the default subtype for this buffer.subtypeSchemaBufferOptions
SchemaB ... ototype/home/insomnia/repos/mongoose/lib/options/schemaDateOptions.js
 * The options defined on a Date schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ startedAt: Date });
 *     schema.path('startedAt').options; // SchemaDateOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaDateOptions
 
 * If set, Mongoose adds a validator that checks that this path is after the
 * given `min`.
 *
 * @api public
 * @property min
 * @memberOf SchemaDateOptions
 * @type {Date}
 * @instance
 
 * If set, Mongoose adds a validator that checks that this path is before the
 * given `max`.
 *
 * @api public
 * @property max
 * @memberOf SchemaDateOptions
 * @type {Date}
 * @instance
 
 * If set, Mongoose creates a TTL index on this path.
 *
 * mongo TTL index `expireAfterSeconds` value will take 'expires' value expressed in seconds.
 *
 * #### Example:
 *
 *     const schema = new Schema({ "expireAt": { type: Date,  expires: 11 } });
 *     // if 'expireAt' is set, then document expires at expireAt + 11 seconds
 *
 * @api public
 * @property expires
 * @memberOf SchemaDateOptions
 * @type {Date}
 * @instance
 SchemaDateOptions'min''max''expires'The options defined on a Date schematype.

#### Example:

const schema = new Schema({ startedAt: Date });
schema.path('startedAt').options; // SchemaDateOptions instanceIf set, Mongoose adds a validator that checks that this path is after the
given `min`.SchemaDateOptions
If set, Mongoose adds a validator that checks that this path is before the
given `max`.If set, Mongoose creates a TTL index on this path.

mongo TTL index `expireAfterSeconds` value will take 'expires' value expressed in seconds.

#### Example:

const schema = new Schema({ "expireAt": { type: Date,  expires: 11 } });
// if 'expireAt' is set, then document expires at expireAt + 11 secondsSchemaD ... ototype/home/insomnia/repos/mongoose/lib/options/schemaDocumentArrayOptions.js
 * The options defined on an Document Array schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ users: [{ name: string }] });
 *     schema.path('users').options; // SchemaDocumentArrayOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaDocumentOptions
 
 * If `true`, Mongoose will skip building any indexes defined in this array's schema.
 * If not set, Mongoose will build all indexes defined in this array's schema.
 *
 * #### Example:
 *
 *     const childSchema = Schema({ name: { type: String, index: true } });
 *     // If `excludeIndexes` is `true`, Mongoose will skip building an index
 *     // on `arr.name`. Otherwise, Mongoose will build an index on `arr.name`.
 *     const parentSchema = Schema({
 *       arr: { type: [childSchema], excludeIndexes: true }
 *     });
 *
 * @api public
 * @property excludeIndexes
 * @memberOf SchemaDocumentArrayOptions
 * @type {Array}
 * @instance
 
 * If set, overwrites the child schema's `_id` option.
 *
 * #### Example:
 *
 *     const childSchema = Schema({ name: String });
 *     const parentSchema = Schema({
 *       child: { type: childSchema, _id: false }
 *     });
 *     parentSchema.path('child').schema.options._id; // false
 *
 * @api public
 * @property _id
 * @memberOf SchemaDocumentArrayOptions
 * @type {Array}
 * @instance
 SchemaDocumentArrayOptions'excludeIndexes'The options defined on an Document Array schematype.

#### Example:

const schema = new Schema({ users: [{ name: string }] });
schema.path('users').options; // SchemaDocumentArrayOptions instanceSchemaDocumentOptionsIf `true`, Mongoose will skip building any indexes defined in this array's schema.
If not set, Mongoose will build all indexes defined in this array's schema.

#### Example:

const childSchema = Schema({ name: { type: String, index: true } });
// If `excludeIndexes` is `true`, Mongoose will skip building an index
// on `arr.name`. Otherwise, Mongoose will build an index on `arr.name`.
const parentSchema = Schema({
arr: { type: [childSchema], excludeIndexes: true }
});SchemaDocumentArrayOptions
If set, overwrites the child schema's `_id` option.

#### Example:

const childSchema = Schema({ name: String });
const parentSchema = Schema({
child: { type: childSchema, _id: false }
});
parentSchema.path('child').schema.options._id; // falseSchemaD ... Options/home/insomnia/repos/mongoose/lib/options/schemaMapOptions.js
 * The options defined on a Map schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ socialMediaHandles: { type: Map, of: String } });
 *     schema.path('socialMediaHandles').options; // SchemaMapOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaMapOptions
 
 * If set, specifies the type of this map's values. Mongoose will cast
 * this map's values to the given type.
 *
 * If not set, Mongoose will not cast the map's values.
 *
 * #### Example:
 *
 *     // Mongoose will cast `socialMediaHandles` values to strings
 *     const schema = new Schema({ socialMediaHandles: { type: Map, of: String } });
 *     schema.path('socialMediaHandles').options.of; // String
 *
 * @api public
 * @property of
 * @memberOf SchemaMapOptions
 * @type {Function|string}
 * @instance
 SchemaMapOptionsThe options defined on a Map schematype.

#### Example:

const schema = new Schema({ socialMediaHandles: { type: Map, of: String } });
schema.path('socialMediaHandles').options; // SchemaMapOptions instanceIf set, specifies the type of this map's values. Mongoose will cast
this map's values to the given type.

If not set, Mongoose will not cast the map's values.

#### Example:

// Mongoose will cast `socialMediaHandles` values to strings
const schema = new Schema({ socialMediaHandles: { type: Map, of: String } });
schema.path('socialMediaHandles').options.of; // StringSchemaMapOptions
SchemaM ... ototype/home/insomnia/repos/mongoose/lib/options/schemaNumberOptions.js
 * The options defined on a Number schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ count: Number });
 *     schema.path('count').options; // SchemaNumberOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaNumberOptions
 
 * If set, Mongoose adds a validator that checks that this path is at least the
 * given `min`.
 *
 * @api public
 * @property min
 * @memberOf SchemaNumberOptions
 * @type {Number}
 * @instance
 
 * If set, Mongoose adds a validator that checks that this path is less than the
 * given `max`.
 *
 * @api public
 * @property max
 * @memberOf SchemaNumberOptions
 * @type {Number}
 * @instance
 
 * If set, Mongoose adds a validator that checks that this path is strictly
 * equal to one of the given values.
 *
 * #### Example:
 *
 *     const schema = new Schema({
 *       favoritePrime: {
 *         type: Number,
 *         enum: [3, 5, 7]
 *       }
 *     });
 *     schema.path('favoritePrime').options.enum; // [3, 5, 7]
 *
 * @api public
 * @property enum
 * @memberOf SchemaNumberOptions
 * @type {Array}
 * @instance
 
 * Sets default [populate options](https://mongoosejs.com/docs/populate.html#query-conditions).
 *
 * #### Example:
 *
 *     const schema = new Schema({
 *       child: {
 *         type: Number,
 *         ref: 'Child',
 *         populate: { select: 'name' }
 *       }
 *     });
 *     const Parent = mongoose.model('Parent', schema);
 *
 *     // Automatically adds `.select('name')`
 *     Parent.findOne().populate('child');
 *
 * @api public
 * @property populate
 * @memberOf SchemaNumberOptions
 * @type {Object}
 * @instance
 SchemaNumberOptionsThe options defined on a Number schematype.

#### Example:

const schema = new Schema({ count: Number });
schema.path('count').options; // SchemaNumberOptions instanceIf set, Mongoose adds a validator that checks that this path is at least the
given `min`.SchemaNumberOptions
If set, Mongoose adds a validator that checks that this path is less than the
given `max`.If set, Mongoose adds a validator that checks that this path is strictly
equal to one of the given values.

#### Example:

const schema = new Schema({
favoritePrime: {
type: Number,
enum: [3, 5, 7]
}
});
schema.path('favoritePrime').options.enum; // [3, 5, 7]Sets default [populate options](https://mongoosejs.com/docs/populate.html#query-conditions).

#### Example:

const schema = new Schema({
child: {
type: Number,
ref: 'Child',
populate: { select: 'name' }
}
});
const Parent = mongoose.model('Parent', schema);

// Automatically adds `.select('name')`
Parent.findOne().populate('child');SchemaN ... ototype/home/insomnia/repos/mongoose/lib/options/schemaObjectIdOptions.js
 * The options defined on an ObjectId schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ testId: mongoose.ObjectId });
 *     schema.path('testId').options; // SchemaObjectIdOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaObjectIdOptions
 
 * If truthy, uses Mongoose's default built-in ObjectId path.
 *
 * @api public
 * @property auto
 * @memberOf SchemaObjectIdOptions
 * @type {Boolean}
 * @instance
 
 * Sets default [populate options](https://mongoosejs.com/docs/populate.html#query-conditions).
 *
 * #### Example:
 *
 *     const schema = new Schema({
 *       child: {
 *         type: 'ObjectId',
 *         ref: 'Child',
 *         populate: { select: 'name' }
 *       }
 *     });
 *     const Parent = mongoose.model('Parent', schema);
 *
 *     // Automatically adds `.select('name')`
 *     Parent.findOne().populate('child');
 *
 * @api public
 * @property populate
 * @memberOf SchemaObjectIdOptions
 * @type {Object}
 * @instance
 SchemaObjectIdOptions'auto'The options defined on an ObjectId schematype.

#### Example:

const schema = new Schema({ testId: mongoose.ObjectId });
schema.path('testId').options; // SchemaObjectIdOptions instanceIf truthy, uses Mongoose's default built-in ObjectId path.SchemaObjectIdOptions
Sets default [populate options](https://mongoosejs.com/docs/populate.html#query-conditions).

#### Example:

const schema = new Schema({
child: {
type: 'ObjectId',
ref: 'Child',
populate: { select: 'name' }
}
});
const Parent = mongoose.model('Parent', schema);

// Automatically adds `.select('name')`
Parent.findOne().populate('child');SchemaO ... OptionsSchemaO ... ototype/home/insomnia/repos/mongoose/lib/options/schemaStringOptions.js
 * The options defined on a string schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String });
 *     schema.path('name').options; // SchemaStringOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaStringOptions
 
 * Array of allowed values for this path
 *
 * @api public
 * @property enum
 * @memberOf SchemaStringOptions
 * @type {Array}
 * @instance
 
 * Attach a validator that succeeds if the data string matches the given regular
 * expression, and fails otherwise.
 *
 * @api public
 * @property match
 * @memberOf SchemaStringOptions
 * @type {RegExp}
 * @instance
 
 * If truthy, Mongoose will add a [custom setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()) that lowercases this string
 * using JavaScript's built-in `String#toLowerCase()`.
 *
 * @api public
 * @property lowercase
 * @memberOf SchemaStringOptions
 * @type {Boolean}
 * @instance
 
 * If truthy, Mongoose will add a [custom setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()) that removes leading and trailing
 * whitespace using [JavaScript's built-in `String#trim()`](https://masteringjs.io/tutorials/fundamentals/trim-string).
 *
 * @api public
 * @property trim
 * @memberOf SchemaStringOptions
 * @type {Boolean}
 * @instance
 
 * If truthy, Mongoose will add a custom setter that uppercases this string
 * using JavaScript's built-in [`String#toUpperCase()`](https://masteringjs.io/tutorials/fundamentals/uppercase).
 *
 * @api public
 * @property uppercase
 * @memberOf SchemaStringOptions
 * @type {Boolean}
 * @instance
 
 * If set, Mongoose will add a custom validator that ensures the given
 * string's `length` is at least the given number.
 *
 * Mongoose supports two different spellings for this option: `minLength` and `minlength`.
 * `minLength` is the recommended way to specify this option, but Mongoose also supports
 * `minlength` (lowercase "l").
 *
 * @api public
 * @property minLength
 * @memberOf SchemaStringOptions
 * @type {Number}
 * @instance
 
 * If set, Mongoose will add a custom validator that ensures the given
 * string's `length` is at most the given number.
 *
 * Mongoose supports two different spellings for this option: `maxLength` and `maxlength`.
 * `maxLength` is the recommended way to specify this option, but Mongoose also supports
 * `maxlength` (lowercase "l").
 *
 * @api public
 * @property maxLength
 * @memberOf SchemaStringOptions
 * @type {Number}
 * @instance
 
 * Sets default [populate options](https://mongoosejs.com/docs/populate.html#query-conditions).
 *
 * @api public
 * @property populate
 * @memberOf SchemaStringOptions
 * @type {Object}
 * @instance
 SchemaStringOptions'lowercase''trim''uppercase''minLength''minlength''maxLength''maxlength'The options defined on a string schematype.

#### Example:

const schema = new Schema({ name: String });
schema.path('name').options; // SchemaStringOptions instanceArray of allowed values for this pathSchemaStringOptions
Attach a validator that succeeds if the data string matches the given regular
expression, and fails otherwise.If truthy, Mongoose will add a [custom setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()) that lowercases this string
using JavaScript's built-in `String#toLowerCase()`.If truthy, Mongoose will add a [custom setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()) that removes leading and trailing
whitespace using [JavaScript's built-in `String#trim()`](https://masteringjs.io/tutorials/fundamentals/trim-string).If truthy, Mongoose will add a custom setter that uppercases this string
using JavaScript's built-in [`String#toUpperCase()`](https://masteringjs.io/tutorials/fundamentals/uppercase).uppercaseIf set, Mongoose will add a custom validator that ensures the given
string's `length` is at least the given number.

Mongoose supports two different spellings for this option: `minLength` and `minlength`.
`minLength` is the recommended way to specify this option, but Mongoose also supports
`minlength` (lowercase "l").minLengthIf set, Mongoose will add a custom validator that ensures the given
string's `length` is at most the given number.

Mongoose supports two different spellings for this option: `maxLength` and `maxlength`.
`maxLength` is the recommended way to specify this option, but Mongoose also supports
`maxlength` (lowercase "l").Sets default [populate options](https://mongoosejs.com/docs/populate.html#query-conditions).SchemaS ... ototype/home/insomnia/repos/mongoose/lib/options/schemaSubdocumentOptions.js
 * The options defined on a single nested schematype.
 *
 * #### Example:
 *
 *     const schema = Schema({ child: Schema({ name: String }) });
 *     schema.path('child').options; // SchemaSubdocumentOptions instance
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaSubdocumentOptions
 
 * If set, overwrites the child schema's `_id` option.
 *
 * #### Example:
 *
 *     const childSchema = Schema({ name: String });
 *     const parentSchema = Schema({
 *       child: { type: childSchema, _id: false }
 *     });
 *     parentSchema.path('child').schema.options._id; // false
 *
 * @api public
 * @property _id
 * @memberOf SchemaSubdocumentOptions
 * @type {Function|string}
 * @instance
 
 * If set, overwrites the child schema's `minimize` option. In addition, configures whether the entire
 * subdocument can be minimized out.
 *
 * #### Example:
 *
 *     const childSchema = Schema({ name: String });
 *     const parentSchema = Schema({
 *       child: { type: childSchema, minimize: false }
 *     });
 *     const ParentModel = mongoose.model('Parent', parentSchema);
 *     // Saves `{ child: {} }` to the db. Without `minimize: false`, Mongoose would remove the empty
 *     // object and save `{}` to the db.
 *     await ParentModel.create({ child: {} });
 *
 * @api public
 * @property minimize
 * @memberOf SchemaSubdocumentOptions
 * @type {Function|string}
 * @instance
 SchemaSubdocumentOptions'minimize'The options defined on a single nested schematype.

#### Example:

const schema = Schema({ child: Schema({ name: String }) });
schema.path('child').options; // SchemaSubdocumentOptions instanceSchemaSubdocumentOptions
If set, overwrites the child schema's `minimize` option. In addition, configures whether the entire
subdocument can be minimized out.

#### Example:

const childSchema = Schema({ name: String });
const parentSchema = Schema({
child: { type: childSchema, minimize: false }
});
const ParentModel = mongoose.model('Parent', parentSchema);
// Saves `{ child: {} }` to the db. Without `minimize: false`, Mongoose would remove the empty
// object and save `{}` to the db.
await ParentModel.create({ child: {} });SchemaS ... Options/home/insomnia/repos/mongoose/lib/options/schemaTypeOptions.js
 * The options defined on a schematype.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String });
 *     schema.path('name').options instanceof mongoose.SchemaTypeOptions; // true
 *
 * @api public
 * @constructor SchemaTypeOptions
 
 * The type to cast this path to.
 *
 * @api public
 * @property type
 * @memberOf SchemaTypeOptions
 * @type {Function|String|Object}
 * @instance
 
 * Function or object describing how to validate this schematype.
 *
 * @api public
 * @property validate
 * @memberOf SchemaTypeOptions
 * @type {Function|Object}
 * @instance
 
 * Allows overriding casting logic for this individual path. If a string, the
 * given string overwrites Mongoose's default cast error message.
 *
 * #### Example:
 *
 *     const schema = new Schema({
 *       num: {
 *         type: Number,
 *         cast: '{VALUE} is not a valid number'
 *       }
 *     });
 *
 *     // Throws 'CastError: "bad" is not a valid number'
 *     schema.path('num').cast('bad');
 *
 *     const Model = mongoose.model('Test', schema);
 *     const doc = new Model({ num: 'fail' });
 *     const err = doc.validateSync();
 *
 *     err.errors['num']; // 'CastError: "fail" is not a valid number'
 *
 * @api public
 * @property cast
 * @memberOf SchemaTypeOptions
 * @type {String}
 * @instance
 
 * If true, attach a required validator to this path, which ensures this path
 * cannot be set to a nullish value. If a function, Mongoose calls the
 * function and only checks for nullish values if the function returns a truthy value.
 *
 * @api public
 * @property required
 * @memberOf SchemaTypeOptions
 * @type {Function|Boolean}
 * @instance
 
 * The default value for this path. If a function, Mongoose executes the function
 * and uses the return value as the default.
 *
 * @api public
 * @property default
 * @memberOf SchemaTypeOptions
 * @type {Function|Any}
 * @instance
 
 * The model that `populate()` should use if populating this path.
 *
 * @api public
 * @property ref
 * @memberOf SchemaTypeOptions
 * @type {Function|String}
 * @instance
 
 * The path in the document that `populate()` should use to find the model
 * to use.
 *
 * @api public
 * @property ref
 * @memberOf SchemaTypeOptions
 * @type {Function|String}
 * @instance
 
 * Whether to include or exclude this path by default when loading documents
 * using `find()`, `findOne()`, etc.
 *
 * @api public
 * @property select
 * @memberOf SchemaTypeOptions
 * @type {Boolean|Number}
 * @instance
 
 * If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose will
 * build an index on this path when the model is compiled.
 *
 * @api public
 * @property index
 * @memberOf SchemaTypeOptions
 * @type {Boolean|Number|Object}
 * @instance
 
 * If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose
 * will build a unique index on this path when the
 * model is compiled. [The `unique` option is **not** a validator](https://mongoosejs.com/docs/validation.html#the-unique-option-is-not-a-validator).
 *
 * @api public
 * @property unique
 * @memberOf SchemaTypeOptions
 * @type {Boolean|Number}
 * @instance
 
 * If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose will
 * disallow changes to this path once the document
 * is saved to the database for the first time. Read more about [immutability in Mongoose here](https://thecodebarbarian.com/whats-new-in-mongoose-5-6-immutable-properties.html).
 *
 * @api public
 * @property immutable
 * @memberOf SchemaTypeOptions
 * @type {Function|Boolean}
 * @instance
 
 * If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose will
 * build a sparse index on this path.
 *
 * @api public
 * @property sparse
 * @memberOf SchemaTypeOptions
 * @type {Boolean|Number}
 * @instance
 
 * If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose
 * will build a text index on this path.
 *
 * @api public
 * @property text
 * @memberOf SchemaTypeOptions
 * @type {Boolean|Number|Object}
 * @instance
 
 * Define a transform function for this individual schema type.
 * Only called when calling `toJSON()` or `toObject()`.
 *
 * #### Example:
 *
 *     const schema = Schema({
 *       myDate: {
 *         type: Date,
 *         transform: v => v.getFullYear()
 *       }
 *     });
 *     const Model = mongoose.model('Test', schema);
 *
 *     const doc = new Model({ myDate: new Date('2019/06/01') });
 *     doc.myDate instanceof Date; // true
 *
 *     const res = doc.toObject({ transform: true });
 *     res.myDate; // 2019
 *
 * @api public
 * @property transform
 * @memberOf SchemaTypeOptions
 * @type {Function}
 * @instance
 'required''ref''refPath''immutable''transform'The options defined on a schematype.

#### Example:

const schema = new Schema({ name: String });
schema.path('name').options instanceof mongoose.SchemaTypeOptions; // trueThe type to cast this path to.(Function|String|Object)Function or object describing how to validate this schematype.(Function|Object)Allows overriding casting logic for this individual path. If a string, the
given string overwrites Mongoose's default cast error message.

#### Example:

const schema = new Schema({
num: {
type: Number,
cast: '{VALUE} is not a valid number'
}
});

// Throws 'CastError: "bad" is not a valid number'
schema.path('num').cast('bad');

const Model = mongoose.model('Test', schema);
const doc = new Model({ num: 'fail' });
const err = doc.validateSync();

err.errors['num']; // 'CastError: "fail" is not a valid number'If true, attach a required validator to this path, which ensures this path
cannot be set to a nullish value. If a function, Mongoose calls the
function and only checks for nullish values if the function returns a truthy value.(Function|Boolean)The default value for this path. If a function, Mongoose executes the function
and uses the return value as the default.(Function|Any)The model that `populate()` should use if populating this path.The path in the document that `populate()` should use to find the model
to use.Whether to include or exclude this path by default when loading documents
using `find()`, `findOne()`, etc.(Boolean|Number)If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose will
build an index on this path when the model is compiled.(Boolean|Number|Object)If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose
will build a unique index on this path when the
model is compiled. [The `unique` option is **not** a validator](https://mongoosejs.com/docs/validation.html#the-unique-option-is-not-a-validator).If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose will
disallow changes to this path once the document
is saved to the database for the first time. Read more about [immutability in Mongoose here](https://thecodebarbarian.com/whats-new-in-mongoose-5-6-immutable-properties.html).If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose will
build a sparse index on this path.If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), Mongoose
will build a text index on this path.Define a transform function for this individual schema type.
Only called when calling `toJSON()` or `toObject()`.

#### Example:

const schema = Schema({
myDate: {
type: Date,
transform: v => v.getFullYear()
}
});
const Model = mongoose.model('Test', schema);

const doc = new Model({ myDate: new Date('2019/06/01') });
doc.myDate instanceof Date; // true

const res = doc.toObject({ transform: true });
res.myDate; // 2019SchemaT ... ototype/home/insomnia/repos/mongoose/lib/options/schemaUnionOptions.js
 * The options defined on a Union schematype.
 *
 * @api public
 * @inherits SchemaTypeOptions
 * @constructor SchemaUnionOptions
 
 * If set, specifies the types that this union can take. Mongoose will cast
 * the value to one of the given types.
 *
 * If not set, Mongoose will not cast the value to any specific type.
 *
 * @api public
 * @property of
 * @memberOf SchemaUnionOptions
 * @type {Function|Function[]|string|string[]}
 * @instance
 SchemaUnionOptionsThe options defined on a Union schematype.If set, specifies the types that this union can take. Mongoose will cast
the value to one of the given types.

If not set, Mongoose will not cast the value to any specific type.SchemaUnionOptions
(Function|Array.<Function>|string|Array.<string>)SchemaU ... ototype/home/insomnia/repos/mongoose/lib/options/virtualOptions.js
 * Marks this virtual as a populate virtual, and specifies the model to
 * use for populate.
 *
 * @api public
 * @property ref
 * @memberOf VirtualOptions
 * @type {String|Model|Function}
 * @instance
 
 * Marks this virtual as a populate virtual, and specifies the path that
 * contains the name of the model to populate
 *
 * @api public
 * @property refPath
 * @memberOf VirtualOptions
 * @type {String|Function}
 * @instance
 
 * The name of the property in the local model to match to `foreignField`
 * in the foreign model.
 *
 * @api public
 * @property localField
 * @memberOf VirtualOptions
 * @type {String|Function}
 * @instance
 
 * The name of the property in the foreign model to match to `localField`
 * in the local model.
 *
 * @api public
 * @property foreignField
 * @memberOf VirtualOptions
 * @type {String|Function}
 * @instance
 
 * Whether to populate this virtual as a single document (true) or an
 * array of documents (false).
 *
 * @api public
 * @property justOne
 * @memberOf VirtualOptions
 * @type {Boolean}
 * @instance
 
 * If true, populate just the number of documents where `localField`
 * matches `foreignField`, as opposed to the documents themselves.
 *
 * If `count` is set, it overrides `justOne`.
 *
 * @api public
 * @property count
 * @memberOf VirtualOptions
 * @type {Boolean}
 * @instance
 
 * Add an additional filter to populate, in addition to `localField`
 * matches `foreignField`.
 *
 * @api public
 * @property match
 * @memberOf VirtualOptions
 * @type {Object|Function}
 * @instance
 
 * Additional options to pass to the query used to `populate()`:
 *
 * - `sort`
 * - `skip`
 * - `limit`
 *
 * @api public
 * @property options
 * @memberOf VirtualOptions
 * @type {Object}
 * @instance
 
 * If true, add a `skip` to the query used to `populate()`.
 *
 * @api public
 * @property skip
 * @memberOf VirtualOptions
 * @type {Number}
 * @instance
 
 * If true, add a `limit` to the query used to `populate()`.
 *
 * @api public
 * @property limit
 * @memberOf VirtualOptions
 * @type {Number}
 * @instance
 
 * The `limit` option for `populate()` has [some unfortunate edge cases](https://mongoosejs.com/docs/populate.html#query-conditions)
 * when working with multiple documents, like `.find().populate()`. The
 * `perDocumentLimit` option makes `populate()` execute a separate query
 * for each document returned from `find()` to ensure each document
 * gets up to `perDocumentLimit` populated docs if possible.
 *
 * @api public
 * @property perDocumentLimit
 * @memberOf VirtualOptions
 * @type {Number}
 * @instance
 VirtualOptions'localField''foreignField''count'Marks this virtual as a populate virtual, and specifies the model to
use for populate.VirtualOptions
(String|Model|Function)Marks this virtual as a populate virtual, and specifies the path that
contains the name of the model to populateThe name of the property in the local model to match to `foreignField`
in the foreign model.The name of the property in the foreign model to match to `localField`
in the local model.Whether to populate this virtual as a single document (true) or an
array of documents (false).If true, populate just the number of documents where `localField`
matches `foreignField`, as opposed to the documents themselves.

If `count` is set, it overrides `justOne`.Add an additional filter to populate, in addition to `localField`
matches `foreignField`.Additional options to pass to the query used to `populate()`:

- `sort`
- `skip`
- `limit`If true, add a `skip` to the query used to `populate()`.If true, add a `limit` to the query used to `populate()`.The `limit` option for `populate()` has [some unfortunate edge cases](https://mongoosejs.com/docs/populate.html#query-conditions)
when working with multiple documents, like `.find().populate()`. The
`perDocumentLimit` option makes `populate()` execute a separate query
for each document returned from `find()` to ensure each document
gets up to `perDocumentLimit` populated docs if possible.class V ... }\n  }\n}{\n    O ...   }\n  }obj.options != nullobj.optionsVirtual ... ototype/home/insomnia/repos/mongoose/lib/options.js_skipDepopulateTopLevelexports ... alse\n};exports ... false\n}{\n  tra ... false\n}_skipDe ... l: true_skipDe ... opLevelflatten ... : falseuseProjection: falseversionKey: true/home/insomnia/repos/mongoose/lib/plugins/index.js/home/insomnia/repos/mongoose/lib/pluginssaveSubdocs'./saveSubdocs'sharding'./sharding'trackTransaction'./trackTransaction''./validateBeforeSave'exports ... docs');exports ... bdocs')exports.saveSubdocsrequire ... bdocs')./saveSubdocs/saveSubdocsexports ... ding');exports ... rding')exports.shardingrequire ... rding')./sharding/shardingexports ... saction./trackTransaction/trackTransactionexports ... Save');exports ... eSave')exports ... oreSaverequire ... eSave')'./vali ... reSave'./validateBeforeSave/validateBeforeSave/home/insomnia/repos/mongoose/lib/plugins/saveSubdocs.js Invalidate subdocs cache because subdoc pre hooks can add new subdocuments// Inva ... cuments'../helpers/each'saveSubdocsPreSavesaveSubdocsPostDeleteOneremovedSubdocssaveSubdocsPostSave../helpers/eachmodule. ... ft);\n};module. ... ift);\n}functio ... ift);\n}{\n  con ... ift);\n}const u ... = true;unshift = trueschema. ... shift);schema. ... nshift)schema.s.hooks.preif (!su ... ;\n    }!subdocs.lengtheach(su ...     });each(su ... \n    })subdoc. ...     });subdoc. ...      })subdoc. ... s.hookssubdoc.$__schema.ssubdoc.$__schemacb(err);if (_th ...       }_this.$ ... Options_this.$ ... = null;_this.$ ...  = null_this.$ ... subdocsnext(error);next(error)schema.s.hooks.postasync f ... s);\n  }saveSub ... leteOneconst r ... ubdocs;removed ... Subdocsthis.$_ ... Subdocs!remove ... .length!removedSubdocsremoved ... .lengthpromise ...    }));promise ...     }))async f ...   }\n  }this.$_ ... xecPost/home/insomnia/repos/mongoose/lib/plugins/sharding.js backwards compat// backwards compat'../helpers/symbols'shardingPluginshardingPluginPostInitstoreShardshardingPluginPreSaveapplyWhereshardingPluginPreRemoveshardingPluginPostSaveshardkeyorigconst o ... Symbol;objectI ... dSymbol../helpers/symbols{\n  sch ...   });\n}schema. ... s;\n  })schema.postshardin ... ostInitstoreSh ... (this);storeSh ... l(this)storeShard.callshardin ... PreSaveapplyWh ... (this);applyWh ... l(this)applyWhere.callshardin ... eRemoveshardin ... ostSave{\n    s ... s);\n  }let len;this.$__.shardvalpaths = ... rdval);paths = ... ardval)Object. ... ardval)len = paths.length;this.$w ...  || {};this.$w ... e || {}this.$wherethis.$where || {}this.$w ... hs[i]];this.$w ... ths[i]]this.$_ ... ths[i]]module. ... eShard;module. ... reShardconst k ... ardkey;key = t ... hardkeythis.$_ ... hardkeythis.$_ ... hardKeyif (!ut ... rn;\n  }!utils.isPOJO(key)utils.isPOJO(key)const o ... l = {};orig =  ... al = {}this.$_ ... al = {}const p ... s(key);paths = ... ys(key)val = t ... hs[i]);val = t ... ths[i])this.$_ ... ths[i])orig[pa ...  = val;orig[paths[i]] = valorig[paths[i]]orig[pa ... rue });orig[pa ... true })val ins ... Symbol]val[objectIdSymbol]orig[pa ... ueOf();orig[pa ... lueOf()/home/insomnia/repos/mongoose/lib/plugins/trackTransaction.jstrackTransactionPreSaveinitialState_getAtomicspreviouspathToAtomicsexistingmergeAtomicsschema. ... }\n  });schema. ...  }\n  })trackTr ... PreSaveif (ses ... ;\n    }session.transaction!sessio ... s(this)session ... s(this)session ... ts].hasconst i ... e = {};initialState = {}initial ... = true;initial ...  = trueinitialState.isNewinitial ... onKey);initial ... ionKey)initial ... sionKeythis.ge ... ionKey)initial ... fy')));initial ... ify')))initial ... edPathsnew Set ... ify')))initial ... (this);initial ... s(this)initialState.atomics_getAtomics(this)session ... State);session ... lState)session ... ts].setfunctio ... mics;\n}{\n  con ... mics;\n}const p ...  Map();pathToA ... w Map()previou ...  Map();previou ... w Map()const p ... dify));pathsTo ... odify))Object. ... odify))Object. ... s.init)doc.$__ ... hs.initObject. ... modify)val !=  ... h !== 0val !=  ... .lengthval !=  ... ay(val)val[arr ... != nullObject. ... ymbol])const e ...  || {};existin ... ) || {}previou ... ) || {}previous.get(path)previous.getpathToA ... bol]));pathToA ... mbol]))pathToAtomics.setmergeAt ... ymbol])doc.$__dirty()doc.$__dirtyconst p ... t.path;path = dirt.pathdirt.pathval = dirt.valuereturn  ... tomics;{\n  des ... tion;\n}destina ...  || {};destina ... n || {}destination || {}if (sou ... l);\n  }source. ... != nullsource.$pullAll{\n    d ... l);\n  }destina ... llAll);destina ... ullAll)destination.$pullAll(destin ... ullAll)(destin ... .concat(destin ...  || [])destina ... l || []if (sou ... h);\n  }source.$push != nullsource.$push{\n    d ... h);\n  }destina ... h || {}destination.$pushdestina ... $each);destina ... .$each)destina ... h.$each(destin ... .$each)destina ... h || []source.$push.$eachif (sou ... t);\n  }source.$addToSet{\n    d ... t);\n  }destina ... ToSet);destina ... dToSet)destina ... ddToSet(destin ... dToSet)destina ... t || []source.$set != nullsource.$setdestina ... .$set);destina ... e.$set)destination.$setArray.i ... e.$set)[...source.$set]...source.$setreturn destination;/home/insomnia/repos/mongoose/lib/plugins/validateBeforeSave.js Nested docs have their own presave// Nest ... presave Validate// ValidatehasValidateBeforeSaveOption'validateBeforeSave'shouldValidatevalidateOptionshasVali ... eOptionlet shouldValidate;shouldV ... reSave;shouldV ... oreSave!!optio ... oreSave!option ... oreSavethis.$_ ... oreSaveconst v ...   null;validat ...    nullhasVali ...    null{ valid ... dOnly }this.$v ...      );this.$v ...       )this.$v ... s).thenthis.$v ... ptions)this.$validate_this.$ ...     });_this.$op = 'save';_this.$op = 'save'_this.$op/home/insomnia/repos/mongoose/lib/query.js Map from operation name to the name of the function that executes the actual operation against MongoDB.// Map  ... ongoDB. Called a thunk for legacy reasons, "thunk" means function that takes exactly 1 param, a callback.// Call ... llback. Currently `_countDocuments()`, etc. are async functions that take no params.// Curr ... params.
 * Query constructor used for building queries. You do not need
 * to instantiate a `Query` directly. Instead use Model functions like
 * [`Model.find()`](https://mongoosejs.com/docs/api/model.html#Model.find()).
 *
 * #### Example:
 *
 *     const query = MyModel.find(); // `query` is an instance of `Query`
 *     query.setOptions({ lean : true });
 *     query.collection(MyModel.collection);
 *     query.where('age').gte(21).exec(callback);
 *
 *     // You can instantiate a query directly. There is no need to do
 *     // this unless you're an advanced user with a very good reason to.
 *     const query = new mongoose.Query();
 *
 * @param {Object} [options]
 * @param {Object} [model]
 * @param {Object} [conditions]
 * @param {Object} [collection] Mongoose collection
 * @api public
  this stuff is for dealing with custom queries created by #toConstructor// this ... tructor this is the case where we have a CustomQuery, we need to check if we got// this ...  we got options passed in, and if we did, merge them in// opti ... them in this is needed because map reduce returns a model that can be queried, but// this ... ed, but all of the queries on said model should be lean// all  ... be lean inherit mquery// inherit mquery For gh-6880. mquery still needs to support `fields` by default for old// For  ... for old versions of MongoDB// vers ... MongoDB Helper function to check if an object is empty or contains only empty objects/arrays// Help ... /arrays Check $and, $or, $nor arrays// Chec ...  arrays If array is empty or all elements are empty objects, consider it empty// If a ... t empty Helper function to check for empty/invalid filter// Help ...  filter!
 * inherit mquery
 /*!\n *  ... ery\n */ Remove some legacy methods that we removed in Mongoose 8, but// Remo ...  8, but are still in mquery 5.// are  ... uery 5.!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 
 * Flag to opt out of using `$geoWithin`.
 *
 * ```javascript
 * mongoose.Query.use$geoWithin = false;
 * ```
 *
 * MongoDB 2.4 deprecated the use of `$within`, replacing it with `$geoWithin`. Mongoose uses `$geoWithin` by default (which is 100% backward compatible with `$within`). If you are running an older version of MongoDB, set this flag to `false` so your `within()` queries continue to work.
 *
 * @see geoWithin https://www.mongodb.com/docs/manual/reference/operator/geoWithin/
 * @default true
 * @property use$geoWithin
 * @memberOf Query
 * @static
 * @api public
 
 * Converts this query to a customized, reusable query constructor with all arguments and options retained.
 *
 * #### Example:
 *
 *     // Create a query for adventure movies and read from the primary
 *     // node in the replica-set unless it is down, in which case we'll
 *     // read from a secondary node.
 *     const query = Movie.find({ tags: 'adventure' }).read('primaryPreferred');
 *
 *     // create a custom Query constructor based off these settings
 *     const Adventure = query.toConstructor();
 *
 *     // further narrow down our query results while still using the previous settings
 *     await Adventure().where({ name: /^Life/ }).exec();
 *
 *     // since Adventure is a stand-alone constructor we can also add our own
 *     // helper methods and getters without impacting global queries
 *     Adventure.prototype.startsWith = function (prefix) {
 *       this.where({ name: new RegExp('^' + prefix) })
 *       return this;
 *     }
 *     Object.defineProperty(Adventure.prototype, 'highlyRated', {
 *       get: function () {
 *         this.where({ rating: { $gt: 4.5 }});
 *         return this;
 *       }
 *     })
 *     await Adventure().highlyRated.startsWith('Life').exec();
 *
 * @return {Query} subclass-of-Query
 * @api public
  set inherited defaults// set  ... efaults Need to handle `sort()` separately because entries-style `sort()` syntax// Need ...  syntax `sort([['prop1', 1]])` confuses mquery into losing the outer nested array.// `sor ...  array. See gh-8159// See gh-8159
 * Make a copy of this query so you can re-execute it.
 *
 * #### Example:
 *
 *     const q = Book.findOne({ title: 'Casino Royale' });
 *     await q.exec();
 *     await q.exec(); // Throws an error because you can't execute a query twice
 *
 *     await q.clone().exec(); // Works
 *
 * @method clone
 * @return {Query} copy
 * @memberOf Query
 * @instance
 * @api public
 
 * Specifies a javascript function or expression to pass to MongoDBs query system.
 *
 * #### Example:
 *
 *     query.$where('this.comments.length === 10 || this.name.length === 5')
 *
 *     // or
 *
 *     query.$where(function () {
 *       return this.comments.length === 10 || this.name.length === 5;
 *     })
 *
 * #### Note:
 *
 * Only use `$where` when you have a condition that cannot be met using other MongoDB operators like `$lt`.
 * **Be sure to read about all of [its caveats](https://www.mongodb.com/docs/manual/reference/operator/where/) before using.**
 *
 * @see $where https://www.mongodb.com/docs/manual/reference/operator/where/
 * @method $where
 * @param {String|Function} js javascript string or function
 * @return {Query} this
 * @memberOf Query
 * @instance
 * @method $where
 * @api public
 
 * Specifies a `path` for use with chaining.
 *
 * #### Example:
 *
 *     // instead of writing:
 *     User.find({age: {$gte: 21, $lte: 65}});
 *
 *     // we can instead write:
 *     User.where('age').gte(21).lte(65);
 *
 *     // passing query conditions is permitted
 *     User.find().where({ name: 'vonderful' })
 *
 *     // chaining
 *     User
 *     .where('age').gte(21).lte(65)
 *     .where('name', /^vonderful/i)
 *     .where('friends').slice(10)
 *     .exec()
 *
 * @method where
 * @memberOf Query
 * @instance
 * @param {String|Object} [path]
 * @param {any} [val]
 * @return {Query} this
 * @api public
 
 * Specifies a `$slice` projection for an array.
 *
 * #### Example:
 *
 *     query.slice('comments', 5); // Returns the first 5 comments
 *     query.slice('comments', -5); // Returns the last 5 comments
 *     query.slice('comments', [10, 5]); // Returns the first 5 comments after the 10-th
 *     query.where('comments').slice(5); // Returns the first 5 comments
 *     query.where('comments').slice([-10, 5]); // Returns the first 5 comments after the 10-th to last
 *
 * **Note:** If the absolute value of the number of elements to be sliced is greater than the number of elements in the array, all array elements will be returned.
 *
 *      // Given `arr`: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 *      query.slice('arr', 20); // Returns [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 *      query.slice('arr', -20); // Returns [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 *
 * **Note:** If the number of elements to skip is positive and greater than the number of elements in the array, an empty array will be returned.
 *
 *      // Given `arr`: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 *      query.slice('arr', [20, 5]); // Returns []
 *
 * **Note:** If the number of elements to skip is negative and its absolute value is greater than the number of elements in the array, the starting position is the start of the array.
 *
 *      // Given `arr`: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 *      query.slice('arr', [-20, 5]); // Returns [1, 2, 3, 4, 5]
 *
 * @method slice
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Number|Array} val number of elements to slice or array with number of elements to skip and number of elements to slice
 * @return {Query} this
 * @see mongodb https://www.mongodb.com/docs/manual/tutorial/query-documents/#projection
 * @see $slice https://www.mongodb.com/docs/manual/reference/projection/slice/#prj._S_slice
 * @api public
 
 * Specifies the complementary comparison value for paths specified with `where()`
 *
 * #### Example:
 *
 *     User.where('age').equals(49);
 *
 *     // is the same as
 *
 *     User.where('age', 49);
 *
 * @method equals
 * @memberOf Query
 * @instance
 * @param {Object} val
 * @return {Query} this
 * @api public
 
 * Specifies arguments for an `$or` condition.
 *
 * #### Example:
 *
 *     query.or([{ color: 'red' }, { status: 'emergency' }]);
 *
 * @see $or https://www.mongodb.com/docs/manual/reference/operator/or/
 * @method or
 * @memberOf Query
 * @instance
 * @param {Array} array array of conditions
 * @return {Query} this
 * @api public
 
 * Specifies arguments for a `$nor` condition.
 *
 * #### Example:
 *
 *     query.nor([{ color: 'green' }, { status: 'ok' }]);
 *
 * @see $nor https://www.mongodb.com/docs/manual/reference/operator/nor/
 * @method nor
 * @memberOf Query
 * @instance
 * @param {Array} array array of conditions
 * @return {Query} this
 * @api public
 
 * Specifies arguments for a `$and` condition.
 *
 * #### Example:
 *
 *     query.and([{ color: 'green' }, { status: 'ok' }])
 *
 * @method and
 * @memberOf Query
 * @instance
 * @see $and https://www.mongodb.com/docs/manual/reference/operator/and/
 * @param {Array} array array of conditions
 * @return {Query} this
 * @api public
 
 * Specifies a `$gt` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * #### Example:
 *
 *     Thing.find().where('age').gt(21);
 *
 *     // or
 *     Thing.find().gt('age', 21);
 *
 * @method gt
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Number} val
 * @see $gt https://www.mongodb.com/docs/manual/reference/operator/gt/
 * @api public
 
 * Specifies a `$gte` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @method gte
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Number} val
 * @see $gte https://www.mongodb.com/docs/manual/reference/operator/gte/
 * @api public
 
 * Specifies a `$lt` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @method lt
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Number} val
 * @see $lt https://www.mongodb.com/docs/manual/reference/operator/lt/
 * @api public
 
 * Specifies a `$lte` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @method lte
 * @see $lte https://www.mongodb.com/docs/manual/reference/operator/lte/
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Number} val
 * @api public
 
 * Specifies a `$ne` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @see $ne https://www.mongodb.com/docs/manual/reference/operator/ne/
 * @method ne
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {any} val
 * @api public
 
 * Specifies an `$in` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @see $in https://www.mongodb.com/docs/manual/reference/operator/in/
 * @method in
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Array} val
 * @api public
 
 * Specifies an `$nin` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @see $nin https://www.mongodb.com/docs/manual/reference/operator/nin/
 * @method nin
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Array} val
 * @api public
 
 * Specifies an `$all` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * #### Example:
 *
 *     MyModel.find().where('pets').all(['dog', 'cat', 'ferret']);
 *     // Equivalent:
 *     MyModel.find().all('pets', ['dog', 'cat', 'ferret']);
 *
 * @see $all https://www.mongodb.com/docs/manual/reference/operator/all/
 * @method all
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Array} val
 * @api public
 
 * Specifies a `$size` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * #### Example:
 *
 *     const docs = await MyModel.where('tags').size(0).exec();
 *     assert(Array.isArray(docs));
 *     console.log('documents with 0 tags', docs);
 *
 * @see $size https://www.mongodb.com/docs/manual/reference/operator/size/
 * @method size
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Number} val
 * @api public
 
 * Specifies a `$regex` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @see $regex https://www.mongodb.com/docs/manual/reference/operator/regex/
 * @method regex
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {String|RegExp} val
 * @api public
 
 * Specifies a `maxDistance` query condition.
 *
 * When called with one argument, the most recent path passed to `where()` is used.
 *
 * @see $maxDistance https://www.mongodb.com/docs/manual/reference/operator/maxDistance/
 * @method maxDistance
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Number} val
 * @api public
 
 * Specifies a `$mod` condition, filters documents for documents whose
 * `path` property is a number that is equal to `remainder` modulo `divisor`.
 *
 * #### Example:
 *
 *     // All find products whose inventory is odd
 *     Product.find().mod('inventory', [2, 1]);
 *     Product.find().where('inventory').mod([2, 1]);
 *     // This syntax is a little strange, but supported.
 *     Product.find().where('inventory').mod(2, 1);
 *
 * @method mod
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Array} val must be of length 2, first element is `divisor`, 2nd element is `remainder`.
 * @return {Query} this
 * @see $mod https://www.mongodb.com/docs/manual/reference/operator/mod/
 * @api public
 
 * Specifies an `$exists` condition
 *
 * #### Example:
 *
 *     // { name: { $exists: true }}
 *     Thing.where('name').exists()
 *     Thing.where('name').exists(true)
 *     Thing.find().exists('name')
 *
 *     // { name: { $exists: false }}
 *     Thing.where('name').exists(false);
 *     Thing.find().exists('name', false);
 *
 * @method exists
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Boolean} val
 * @return {Query} this
 * @see $exists https://www.mongodb.com/docs/manual/reference/operator/exists/
 * @api public
 
 * Specifies an `$elemMatch` condition
 *
 * #### Example:
 *
 *     query.elemMatch('comment', { author: 'autobot', votes: {$gte: 5}})
 *
 *     query.where('comment').elemMatch({ author: 'autobot', votes: {$gte: 5}})
 *
 *     query.elemMatch('comment', function (elem) {
 *       elem.where('author').equals('autobot');
 *       elem.where('votes').gte(5);
 *     })
 *
 *     query.where('comment').elemMatch(function (elem) {
 *       elem.where({ author: 'autobot' });
 *       elem.where('votes').gte(5);
 *     })
 *
 * @method elemMatch
 * @memberOf Query
 * @instance
 * @param {String|Object|Function} path
 * @param {Object|Function} filter
 * @return {Query} this
 * @see $elemMatch https://www.mongodb.com/docs/manual/reference/operator/elemMatch/
 * @api public
 
 * Defines a `$within` or `$geoWithin` argument for geo-spatial queries.
 *
 * #### Example:
 *
 *     query.where(path).within().box()
 *     query.where(path).within().circle()
 *     query.where(path).within().geometry()
 *
 *     query.where('loc').within({ center: [50,50], radius: 10, unique: true, spherical: true });
 *     query.where('loc').within({ box: [[40.73, -73.9], [40.7, -73.988]] });
 *     query.where('loc').within({ polygon: [[],[],[],[]] });
 *
 *     query.where('loc').within([], [], []) // polygon
 *     query.where('loc').within([], []) // box
 *     query.where('loc').within({ type: 'LineString', coordinates: [...] }); // geometry
 *
 * **MUST** be used after `where()`.
 *
 * #### Note:
 *
 * As of Mongoose 3.7, `$geoWithin` is always used for queries. To change this behavior, see [Query.use$geoWithin](https://mongoosejs.com/docs/api/query.html#Query.prototype.use$geoWithin).
 *
 * #### Note:
 *
 * In Mongoose 3.7, `within` changed from a getter to a function. If you need the old syntax, use [this](https://github.com/ebensing/mongoose-within).
 *
 * @method within
 * @see $polygon https://www.mongodb.com/docs/manual/reference/operator/polygon/
 * @see $box https://www.mongodb.com/docs/manual/reference/operator/box/
 * @see $geometry https://www.mongodb.com/docs/manual/reference/operator/geometry/
 * @see $center https://www.mongodb.com/docs/manual/reference/operator/center/
 * @see $centerSphere https://www.mongodb.com/docs/manual/reference/operator/centerSphere/
 * @memberOf Query
 * @instance
 * @return {Query} this
 * @api public
 
 * Specifies the maximum number of documents the query will return.
 *
 * #### Example:
 *
 *     query.limit(20);
 *
 * #### Note:
 *
 * Cannot be used with `distinct()`
 *
 * @method limit
 * @memberOf Query
 * @instance
 * @param {Number} val
 * @api public
 
 * Specifies the number of documents to skip.
 *
 * #### Example:
 *
 *     query.skip(100).limit(20);
 *
 * #### Note:
 *
 * Cannot be used with `distinct()`
 *
 * @method skip
 * @memberOf Query
 * @instance
 * @param {Number} val
 * @see cursor.skip https://www.mongodb.com/docs/manual/reference/method/cursor.skip/
 * @api public
 
 * Specifies the batchSize option.
 *
 * #### Example:
 *
 *     query.batchSize(100)
 *
 * #### Note:
 *
 * Cannot be used with `distinct()`
 *
 * @method batchSize
 * @memberOf Query
 * @instance
 * @param {Number} val
 * @see batchSize https://www.mongodb.com/docs/manual/reference/method/cursor.batchSize/
 * @api public
 
 * Specifies the `comment` option.
 *
 * #### Example:
 *
 *     query.comment('login query')
 *
 * #### Note:
 *
 * Cannot be used with `distinct()`
 *
 * @method comment
 * @memberOf Query
 * @instance
 * @param {String} val
 * @see comment https://www.mongodb.com/docs/manual/reference/operator/comment/
 * @api public
 
 * Sets query hints.
 *
 * #### Example:
 *
 *     query.hint({ indexA: 1, indexB: -1 });
 *
 * #### Note:
 *
 * Cannot be used with `distinct()`
 *
 * @method hint
 * @memberOf Query
 * @instance
 * @param {Object} val a hint object
 * @return {Query} this
 * @see $hint https://www.mongodb.com/docs/manual/reference/operator/hint/
 * @api public
 
 * Get/set the current projection (AKA fields). Pass `null` to remove the
 * current projection.
 *
 * Unlike `projection()`, the `select()` function modifies the current
 * projection in place. This function overwrites the existing projection.
 *
 * #### Example:
 *
 *     const q = Model.find();
 *     q.projection(); // null
 *
 *     q.select('a b');
 *     q.projection(); // { a: 1, b: 1 }
 *
 *     q.projection({ c: 1 });
 *     q.projection(); // { c: 1 }
 *
 *     q.projection(null);
 *     q.projection(); // null
 *
 *
 * @method projection
 * @memberOf Query
 * @instance
 * @param {Object|null} arg
 * @return {Object} the current projection
 * @api public
 
 * Specifies which document fields to include or exclude (also known as the query "projection")
 *
 * When using string syntax, prefixing a path with `-` will flag that path as excluded. When a path does not have the `-` prefix, it is included. Lastly, if a path is prefixed with `+`, it forces inclusion of the path, which is useful for paths excluded at the [schema level](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.select()).
 *
 * A projection _must_ be either inclusive or exclusive. In other words, you must
 * either list the fields to include (which excludes all others), or list the fields
 * to exclude (which implies all other fields are included). The [`_id` field is the only exception because MongoDB includes it by default](https://www.mongodb.com/docs/manual/tutorial/project-fields-from-query-results/#suppress-id-field).
 *
 * #### Example:
 *
 *     // include a and b, exclude other fields
 *     query.select('a b');
 *     // Equivalent syntaxes:
 *     query.select(['a', 'b']);
 *     query.select({ a: 1, b: 1 });
 *
 *     // exclude c and d, include other fields
 *     query.select('-c -d');
 *
 *     // Use `+` to override schema-level `select: false` without making the
 *     // projection inclusive.
 *     const schema = new Schema({
 *       foo: { type: String, select: false },
 *       bar: String
 *     });
 *     // ...
 *     query.select('+foo'); // Override foo's `select: false` without excluding `bar`
 *
 *     // or you may use object notation, useful when
 *     // you have keys already prefixed with a "-"
 *     query.select({ a: 1, b: 1 });
 *     query.select({ c: 0, d: 0 });
 *
 *     Additional calls to select can override the previous selection:
 *     query.select({ a: 1, b: 1 }).select({ b: 0 }); // selection is now { a: 1 }
 *     query.select({ a: 0, b: 0 }).select({ b: 1 }); // selection is now { a: 0 }
 *
 *
 * @method select
 * @memberOf Query
 * @instance
 * @param {Object|String|String[]} arg
 * @return {Query} this
 * @see SchemaType https://mongoosejs.com/docs/api/schematype.html
 * @api public
  we want to keep the minus and pluses, so add boolean arg.// we w ... an arg. Add the field to the projection// Add  ... jection Remove the field from the projection// Remo ... jection
 * Enable or disable schema level projections for this query. Enabled by default.
 * Set to `false` to include fields with `select: false` in the query result by default.
 *
 * #### Example:
 *
 *     const userSchema = new Schema({
 *       email: { type: String, required: true },
 *       passwordHash: { type: String, select: false, required: true }
 *     });
 *     const UserModel = mongoose.model('User', userSchema);
 *
 *     const doc = await UserModel.findOne().orFail().schemaLevelProjections(false);
 *
 *     // Contains password hash, because `schemaLevelProjections()` overrides `select: false`
 *     doc.passwordHash;
 *
 * @method schemaLevelProjections
 * @memberOf Query
 * @instance
 * @param {Boolean} value
 * @return {Query} this
 * @see SchemaTypeOptions https://mongoosejs.com/docs/schematypes.html#all-schema-types
 * @api public
 
 * Sets this query's `sanitizeProjection` option. If set, `sanitizeProjection` does
 * two things:
 *
 * 1. Enforces that projection values are numbers, not strings.
 * 2. Prevents using `+` syntax to override properties that are deselected by default.
 *
 * With `sanitizeProjection()`, you can pass potentially untrusted user data to `.select()`.
 *
 * #### Example
 *
 *     const userSchema = new Schema({
 *       name: String,
 *       password: { type: String, select: false }
 *     });
 *     const UserModel = mongoose.model('User', userSchema);
 *     const { _id } = await UserModel.create({ name: 'John', password: 'secret' })
 *
 *     // The MongoDB server has special handling for string values that start with '$'
 *     // in projections, which can lead to unexpected leaking of sensitive data.
 *     let doc = await UserModel.findOne().select({ name: '$password' });
 *     doc.name; // 'secret'
 *     doc.password; // undefined
 *
 *     // With `sanitizeProjection`, Mongoose forces all projection values to be numbers
 *     doc = await UserModel.findOne().sanitizeProjection(true).select({ name: '$password' });
 *     doc.name; // 'John'
 *     doc.password; // undefined
 *
 *     // By default, Mongoose supports projecting in `password` using `+password`
 *     doc = await UserModel.findOne().select('+password');
 *     doc.password; // 'secret'
 *
 *     // With `sanitizeProjection`, Mongoose prevents projecting in `password` and other
 *     // fields that have `select: false` in the schema.
 *     doc = await UserModel.findOne().sanitizeProjection(true).select('+password');
 *     doc.password; // undefined
 *
 * @method sanitizeProjection
 * @memberOf Query
 * @instance
 * @param {Boolean} value
 * @return {Query} this
 * @see sanitizeProjection https://thecodebarbarian.com/whats-new-in-mongoose-5-13-sanitizeprojection.html
 * @api public
 
 * Determines the MongoDB nodes from which to read.
 *
 * #### Preferences:
 *
 * ```
 * primary - (default) Read from primary only. Operations will produce an error if primary is unavailable. Cannot be combined with tags.
 * secondary            Read from secondary if available, otherwise error.
 * primaryPreferred     Read from primary if available, otherwise a secondary.
 * secondaryPreferred   Read from a secondary if available, otherwise read from the primary.
 * nearest              All operations read from among the nearest candidates, but unlike other modes, this option will include both the primary and all secondaries in the random selection.
 * ```
 *
 * Aliases
 *
 * ```
 * p   primary
 * pp  primaryPreferred
 * s   secondary
 * sp  secondaryPreferred
 * n   nearest
 * ```
 *
 * #### Example:
 *
 *     new Query().read('primary')
 *     new Query().read('p')  // same as primary
 *
 *     new Query().read('primaryPreferred')
 *     new Query().read('pp') // same as primaryPreferred
 *
 *     new Query().read('secondary')
 *     new Query().read('s')  // same as secondary
 *
 *     new Query().read('secondaryPreferred')
 *     new Query().read('sp') // same as secondaryPreferred
 *
 *     new Query().read('nearest')
 *     new Query().read('n')  // same as nearest
 *
 *     // read from secondaries with matching tags
 *     new Query().read('s', [{ dc:'sf', s: 1 },{ dc:'ma', s: 2 }])
 *
 * Read more about how to use read preferences [here](https://www.mongodb.com/docs/manual/applications/replication/#read-preference).
 *
 * @method read
 * @memberOf Query
 * @instance
 * @param {String} mode one of the listed preference options or aliases
 * @param {Array} [tags] optional tags for this query
 * @see mongodb https://www.mongodb.com/docs/manual/applications/replication/#read-preference
 * @return {Query} this
 * @api public
 
 * Overwrite default `.toString` to make logging more useful
 *
 * @memberOf Query
 * @instance
 * @method toString
 * @api private
  'estimatedDocumentCount' or any others// 'est ...  others
 * Sets the [MongoDB session](https://www.mongodb.com/docs/manual/reference/server-sessions/)
 * associated with this query. Sessions are how you mark a query as part of a
 * [transaction](https://mongoosejs.com/docs/transactions.html).
 *
 * Calling `session(null)` removes the session from this query.
 *
 * #### Example:
 *
 *     const s = await mongoose.startSession();
 *     await mongoose.model('Person').findOne({ name: 'Axl Rose' }).session(s);
 *
 * @method session
 * @memberOf Query
 * @instance
 * @param {ClientSession} [session] from `await conn.startSession()`
 * @see Connection.prototype.startSession() https://mongoosejs.com/docs/api/connection.html#Connection.prototype.startSession()
 * @see mongoose.startSession() https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.startSession()
 * @return {Query} this
 * @api public
 
 * Sets the 3 write concern parameters for this query:
 *
 * - `w`: Sets the specified number of `mongod` servers, or tag set of `mongod` servers, that must acknowledge this write before this write is considered successful.
 * - `j`: Boolean, set to `true` to request acknowledgement that this operation has been persisted to MongoDB's on-disk journal.
 * - `wtimeout`: If [`w > 1`](https://mongoosejs.com/docs/api/query.html#Query.prototype.w()), the maximum amount of time to wait for this write to propagate through the replica set before this operation fails. The default is `0`, which means no timeout.
 *
 * This option is only valid for operations that write to the database:
 *
 * - `deleteOne()`
 * - `deleteMany()`
 * - `findOneAndDelete()`
 * - `findOneAndReplace()`
 * - `findOneAndUpdate()`
 * - `updateOne()`
 * - `updateMany()`
 *
 * Defaults to the schema's [`writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 *
 * #### Example:
 *
 *     // The 'majority' option means the `deleteOne()` promise won't resolve
 *     // until the `deleteOne()` has propagated to the majority of the replica set
 *     await mongoose.model('Person').
 *       deleteOne({ name: 'Ned Stark' }).
 *       writeConcern({ w: 'majority' });
 *
 * @method writeConcern
 * @memberOf Query
 * @instance
 * @param {Object} writeConcern the write concern value to set
 * @see WriteConcernSettings https://mongodb.github.io/node-mongodb-native/4.9/interfaces/WriteConcernSettings.html
 * @return {Query} this
 * @api public
 
 * Sets the specified number of `mongod` servers, or tag set of `mongod` servers,
 * that must acknowledge this write before this write is considered successful.
 * This option is only valid for operations that write to the database:
 *
 * - `deleteOne()`
 * - `deleteMany()`
 * - `findOneAndDelete()`
 * - `findOneAndReplace()`
 * - `findOneAndUpdate()`
 * - `updateOne()`
 * - `updateMany()`
 *
 * Defaults to the schema's [`writeConcern.w` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 *
 * #### Example:
 *
 *     // The 'majority' option means the `deleteOne()` promise won't resolve
 *     // until the `deleteOne()` has propagated to the majority of the replica set
 *     await mongoose.model('Person').
 *       deleteOne({ name: 'Ned Stark' }).
 *       w('majority');
 *
 * @method w
 * @memberOf Query
 * @instance
 * @param {String|number} val 0 for fire-and-forget, 1 for acknowledged by one server, 'majority' for majority of the replica set, or [any of the more advanced options](https://www.mongodb.com/docs/manual/reference/write-concern/#w-option).
 * @see mongodb https://www.mongodb.com/docs/manual/reference/write-concern/#w-option
 * @return {Query} this
 * @api public
 
 * Requests acknowledgement that this operation has been persisted to MongoDB's
 * on-disk journal.
 * This option is only valid for operations that write to the database:
 *
 * - `deleteOne()`
 * - `deleteMany()`
 * - `findOneAndDelete()`
 * - `findOneAndReplace()`
 * - `findOneAndUpdate()`
 * - `updateOne()`
 * - `updateMany()`
 *
 * Defaults to the schema's [`writeConcern.j` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 *
 * #### Example:
 *
 *     await mongoose.model('Person').deleteOne({ name: 'Ned Stark' }).j(true);
 *
 * @method j
 * @memberOf Query
 * @instance
 * @param {boolean} val
 * @see mongodb https://www.mongodb.com/docs/manual/reference/write-concern/#j-option
 * @return {Query} this
 * @api public
 
 * If [`w > 1`](https://mongoosejs.com/docs/api/query.html#Query.prototype.w()), the maximum amount of time to
 * wait for this write to propagate through the replica set before this
 * operation fails. The default is `0`, which means no timeout.
 *
 * This option is only valid for operations that write to the database:
 *
 * - `deleteOne()`
 * - `deleteMany()`
 * - `findOneAndDelete()`
 * - `findOneAndReplace()`
 * - `findOneAndUpdate()`
 * - `updateOne()`
 * - `updateMany()`
 *
 * Defaults to the schema's [`writeConcern.wtimeout` option](https://mongoosejs.com/docs/guide.html#writeConcern)
 *
 * #### Example:
 *
 *     // The `deleteOne()` promise won't resolve until this `deleteOne()` has
 *     // propagated to at least `w = 2` members of the replica set. If it takes
 *     // longer than 1 second, this `deleteOne()` will fail.
 *     await mongoose.model('Person').
 *       deleteOne({ name: 'Ned Stark' }).
 *       w(2).
 *       wtimeout(1000);
 *
 * @method wtimeout
 * @memberOf Query
 * @instance
 * @param {number} ms number of milliseconds to wait
 * @see mongodb https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout
 * @return {Query} this
 * @api public
 
 * Sets the readConcern option for the query.
 *
 * #### Example:
 *
 *     new Query().readConcern('local')
 *     new Query().readConcern('l')  // same as local
 *
 *     new Query().readConcern('available')
 *     new Query().readConcern('a')  // same as available
 *
 *     new Query().readConcern('majority')
 *     new Query().readConcern('m')  // same as majority
 *
 *     new Query().readConcern('linearizable')
 *     new Query().readConcern('lz') // same as linearizable
 *
 *     new Query().readConcern('snapshot')
 *     new Query().readConcern('s')  // same as snapshot
 *
 *
 * #### Read Concern Level:
 *
 * ```
 * local         MongoDB 3.2+ The query returns from the instance with no guarantee guarantee that the data has been written to a majority of the replica set members (i.e. may be rolled back).
 * available     MongoDB 3.6+ The query returns from the instance with no guarantee guarantee that the data has been written to a majority of the replica set members (i.e. may be rolled back).
 * majority      MongoDB 3.2+ The query returns the data that has been acknowledged by a majority of the replica set members. The documents returned by the read operation are durable, even in the event of failure.
 * linearizable  MongoDB 3.4+ The query returns data that reflects all successful majority-acknowledged writes that completed prior to the start of the read operation. The query may wait for concurrently executing writes to propagate to a majority of replica set members before returning results.
 * snapshot      MongoDB 4.0+ Only available for operations within multi-document transactions. Upon transaction commit with write concern "majority", the transaction operations are guaranteed to have read from a snapshot of majority-committed data.
 * ```
 *
 * Aliases
 *
 * ```
 * l   local
 * a   available
 * m   majority
 * lz  linearizable
 * s   snapshot
 * ```
 *
 * Read more about how to use read concern [here](https://www.mongodb.com/docs/manual/reference/read-concern/).
 *
 * @memberOf Query
 * @method readConcern
 * @param {String} level one of the listed read concern level or their aliases
 * @see mongodb https://www.mongodb.com/docs/manual/reference/read-concern/
 * @return {Query} this
 * @api public
 
 * Gets query options.
 *
 * #### Example:
 *
 *     const query = new Query();
 *     query.limit(10);
 *     query.setOptions({ maxTimeMS: 1000 });
 *     query.getOptions(); // { limit: 10, maxTimeMS: 1000 }
 *
 * @return {Object} the options
 * @api public
 
 * Sets query options. Some options only make sense for certain operations.
 *
 * #### Options:
 *
 * The following options are only for `find()`:
 *
 * - [tailable](https://www.mongodb.com/docs/manual/core/tailable-cursors/)
 * - [limit](https://www.mongodb.com/docs/manual/reference/method/cursor.limit/)
 * - [skip](https://www.mongodb.com/docs/manual/reference/method/cursor.skip/)
 * - [allowDiskUse](https://www.mongodb.com/docs/manual/reference/method/cursor.allowDiskUse/)
 * - [batchSize](https://www.mongodb.com/docs/manual/reference/method/cursor.batchSize/)
 * - [readPreference](https://www.mongodb.com/docs/manual/applications/replication/#read-preference)
 * - [hint](https://www.mongodb.com/docs/manual/reference/method/cursor.hint/)
 * - [comment](https://www.mongodb.com/docs/manual/reference/method/cursor.comment/)
 *
 * The following options are only for write operations: `updateOne()`, `updateMany()`, `replaceOne()`, `findOneAndUpdate()`, and `findByIdAndUpdate()`:
 *
 * - [upsert](https://www.mongodb.com/docs/manual/reference/method/db.collection.update/)
 * - [writeConcern](https://www.mongodb.com/docs/manual/reference/method/db.collection.update/)
 * - [timestamps](https://mongoosejs.com/docs/guide.html#timestamps): If `timestamps` is set in the schema, set this option to `false` to skip timestamps for that particular update. Has no effect if `timestamps` is not enabled in the schema options.
 * - overwriteDiscriminatorKey: allow setting the discriminator key in the update. Will use the correct discriminator schema if the update changes the discriminator key.
 * - overwriteImmutable: allow overwriting properties that are set to `immutable` in the schema. Defaults to false.
 *
 * The following options are only for `find()`, `findOne()`, `findById()`, `findOneAndUpdate()`, `findOneAndReplace()`, `findOneAndDelete()`, and `findByIdAndUpdate()`:
 *
 * - [lean](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean())
 * - [populate](https://mongoosejs.com/docs/populate.html)
 * - [projection](https://mongoosejs.com/docs/api/query.html#Query.prototype.projection())
 * - sanitizeProjection
 * - useBigInt64
 *
 * The following options are only for all operations **except** `updateOne()`, `updateMany()`, `deleteOne()`, and `deleteMany()`:
 *
 * - [maxTimeMS](https://www.mongodb.com/docs/manual/reference/operator/meta/maxTimeMS/)
 *
 * The following options are for `find()`, `findOne()`, `findOneAndUpdate()`, `findOneAndDelete()`, `updateOne()`, and `deleteOne()`:
 *
 * - [sort](https://www.mongodb.com/docs/manual/reference/method/cursor.sort/)
 *
 * The following options are for `findOneAndUpdate()` and `findOneAndDelete()`
 *
 * - includeResultMetadata
 *
 * The following options are for all operations:
 *
 * - [strict](https://mongoosejs.com/docs/guide.html#strict)
 * - [collation](https://www.mongodb.com/docs/manual/reference/collation/)
 * - [session](https://www.mongodb.com/docs/manual/reference/server-sessions/)
 * - [explain](https://www.mongodb.com/docs/manual/reference/method/cursor.explain/)
 *
 * @param {Object} options
 * @return {Query} this
 * @api public
  overwrite is only for internal use// over ... nal use ensure that _mongooseOptions & options are two different objects// ensu ... objects deleting options.defaults will cause 7287 to fail// dele ... to fail set arbitrary options// set  ... options
 * Sets the [`explain` option](https://www.mongodb.com/docs/manual/reference/method/cursor.explain/),
 * which makes this query return detailed execution stats instead of the actual
 * query result. This method is useful for determining what index your queries
 * use.
 *
 * Calling `query.explain(v)` is equivalent to `query.setOptions({ explain: v })`
 *
 * #### Example:
 *
 *     const query = new Query();
 *     const res = await query.find({ a: 1 }).explain('queryPlanner');
 *     console.log(res);
 *
 * @param {String} [verbose] The verbosity mode. Either 'queryPlanner', 'executionStats', or 'allPlansExecution'. The default is 'queryPlanner'
 * @return {Query} this
 * @api public
 
 * Sets the [`allowDiskUse` option](https://www.mongodb.com/docs/manual/reference/method/cursor.allowDiskUse/),
 * which allows the MongoDB server to use more than 100 MB for this query's `sort()`. This option can
 * let you work around `QueryExceededMemoryLimitNoDiskUseAllowed` errors from the MongoDB server.
 *
 * Note that this option requires MongoDB server >= 4.4. Setting this option is a no-op for MongoDB 4.2
 * and earlier.
 *
 * Calling `query.allowDiskUse(v)` is equivalent to `query.setOptions({ allowDiskUse: v })`
 *
 * #### Example:
 *
 *     await query.find().sort({ name: 1 }).allowDiskUse(true);
 *     // Equivalent:
 *     await query.find().sort({ name: 1 }).allowDiskUse();
 *
 * @param {Boolean} [v] Enable/disable `allowDiskUse`. If called with 0 arguments, sets `allowDiskUse: true`
 * @return {Query} this
 * @api public
 
 * Sets the [maxTimeMS](https://www.mongodb.com/docs/manual/reference/method/cursor.maxTimeMS/)
 * option. This will tell the MongoDB server to abort if the query or write op
 * has been running for more than `ms` milliseconds.
 *
 * Calling `query.maxTimeMS(v)` is equivalent to `query.setOptions({ maxTimeMS: v })`
 *
 * #### Example:
 *
 *     const query = new Query();
 *     // Throws an error 'operation exceeded time limit' as long as there's
 *     // >= 1 doc in the queried collection
 *     const res = await query.find({ $where: 'sleep(1000) || true' }).maxTimeMS(100);
 *
 * @param {Number} [ms] The number of milliseconds
 * @return {Query} this
 * @api public
 
 * Returns the current query filter (also known as conditions) as a [POJO](https://masteringjs.io/tutorials/fundamentals/pojo).
 *
 * #### Example:
 *
 *     const query = new Query();
 *     query.find({ a: 1 }).where('b').gt(2);
 *     query.getFilter(); // { a: 1, b: { $gt: 2 } }
 *
 * @return {Object} current query filter
 * @api public
 
 * Returns the current query filter. Equivalent to `getFilter()`.
 *
 * You should use `getFilter()` instead of `getQuery()` where possible. `getQuery()`
 * will likely be deprecated in a future release.
 *
 * #### Example:
 *
 *     const query = new Query();
 *     query.find({ a: 1 }).where('b').gt(2);
 *     query.getQuery(); // { a: 1, b: { $gt: 2 } }
 *
 * @return {Object} current query filter
 * @api public
 
 * Sets the query conditions to the provided JSON object.
 *
 * #### Example:
 *
 *     const query = new Query();
 *     query.find({ a: 1 })
 *     query.setQuery({ a: 2 });
 *     query.getQuery(); // { a: 2 }
 *
 * @param {Object} new query conditions
 * @return {undefined}
 * @api public
 
 * Returns the current update operations as a JSON object.
 *
 * #### Example:
 *
 *     const query = new Query();
 *     query.updateOne({}, { $set: { a: 5 } });
 *     query.getUpdate(); // { $set: { a: 5 } }
 *
 * @return {Object} current update operations
 * @api public
 
 * Sets the current update operation to new value.
 *
 * #### Example:
 *
 *     const query = new Query();
 *     query.updateOne({}, { $set: { a: 5 } });
 *     query.setUpdate({ $set: { b: 6 } });
 *     query.getUpdate(); // { $set: { b: 6 } }
 *
 * @param {Object} new update operation
 * @return {undefined}
 * @api public
 
 * Returns fields selection for this query.
 *
 * @method _fieldsForExec
 * @return {Object}
 * @api private
 * @memberOf Query
 
 * Return an update document with corrected `$set` operations.
 *
 * @method _updateForExec
 * @return {Object}
 * @api private
 * @memberOf Query
 
 * Makes sure _path is set.
 *
 * This method is inherited by `mquery`
 *
 * @method _ensurePath
 * @param {String} method
 * @api private
 * @memberOf Query
 
 * Determines if `conds` can be merged using `mquery().merge()`
 *
 * @method canMerge
 * @memberOf Query
 * @instance
 * @param {Object} conds
 * @return {Boolean}
 * @api private
 
 * Returns default options for this query.
 *
 * @param {Model} model
 * @api private
  Apply schema-level `writeConcern` option// Appl ...  option
 * Sets the lean option.
 *
 * Documents returned from queries with the `lean` option enabled are plain
 * javascript objects, not [Mongoose Documents](https://mongoosejs.com/docs/api/document.html). They have no
 * `save` method, getters/setters, virtuals, or other Mongoose features.
 *
 * #### Example:
 *
 *     new Query().lean() // true
 *     new Query().lean(true)
 *     new Query().lean(false)
 *
 *     const docs = await Model.find().lean();
 *     docs[0] instanceof mongoose.Document; // false
 *
 * [Lean is great for high-performance, read-only cases](https://mongoosejs.com/docs/tutorials/lean.html),
 * especially when combined
 * with [cursors](https://mongoosejs.com/docs/queries.html#streaming).
 *
 * If you need virtuals, getters/setters, or defaults with `lean()`, you need
 * to use a plugin. See:
 *
 * - [mongoose-lean-virtuals](https://plugins.mongoosejs.io/plugins/lean-virtuals)
 * - [mongoose-lean-getters](https://plugins.mongoosejs.io/plugins/lean-getters)
 * - [mongoose-lean-defaults](https://www.npmjs.com/package/mongoose-lean-defaults)
 *
 * @param {Boolean|Object} bool defaults to true
 * @return {Query} this
 * @api public
 
 * Adds a `$set` to this query's update without changing the operation.
 * This is useful for query middleware so you can add an update regardless
 * of whether you use `updateOne()`, `updateMany()`, `findOneAndUpdate()`, etc.
 *
 * #### Example:
 *
 *     // Updates `{ $set: { updatedAt: new Date() } }`
 *     new Query().updateOne({}, {}).set('updatedAt', new Date());
 *     new Query().updateMany({}, {}).set({ updatedAt: new Date() });
 *
 * @param {String|Object} path path or object of key/value pairs to set
 * @param {Any} [val] the value to set
 * @return {Query} this
 * @api public
 
 * For update operations, returns the value of a path in the update's `$set`.
 * Useful for writing getters/setters that can work with both update operations
 * and `save()`.
 *
 * #### Example:
 *
 *     const query = Model.updateOne({}, { $set: { name: 'Jean-Luc Picard' } });
 *     query.get('name'); // 'Jean-Luc Picard'
 *
 * @param {String|Object} path path or object of key/value pairs to get
 * @return {Query} this
 * @api public
 
 * Gets/sets the error flag on this query. If this flag is not null or
 * undefined, the `exec()` promise will reject without executing.
 *
 * #### Example:
 *
 *     Query().error(); // Get current error value
 *     Query().error(null); // Unset the current error
 *     Query().error(new Error('test')); // `exec()` will resolve with test
 *     Schema.pre('find', function() {
 *       if (!this.getQuery().userId) {
 *         this.error(new Error('Not allowed to query without setting userId'));
 *       }
 *     });
 *
 * Note that query casting runs **after** hooks, so cast errors will override
 * custom errors.
 *
 * #### Example:
 *
 *     const TestSchema = new Schema({ num: Number });
 *     const TestModel = db.model('Test', TestSchema);
 *     TestModel.find({ num: 'not a number' }).error(new Error('woops')).exec(function(error) {
 *       // `error` will be a cast error because `num` failed to cast
 *     });
 *
 * @param {Error|null} err if set, `exec()` will fail fast before sending the query to MongoDB
 * @return {Query} this
 * @api public
 
 * ignore
 * @method _unsetCastError
 * @instance
 * @memberOf Query
 * @api private
 
 * Getter/setter around the current mongoose-specific options for this query
 * Below are the current Mongoose-specific options.
 *
 * - `populate`: an array representing what paths will be populated. Should have one entry for each call to [`Query.prototype.populate()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.populate())
 * - `lean`: if truthy, Mongoose will not [hydrate](https://mongoosejs.com/docs/api/model.html#Model.hydrate()) any documents that are returned from this query. See [`Query.prototype.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) for more information.
 * - `strict`: controls how Mongoose handles keys that aren't in the schema for updates. This option is `true` by default, which means Mongoose will silently strip any paths in the update that aren't in the schema. See the [`strict` mode docs](https://mongoosejs.com/docs/guide.html#strict) for more information.
 * - `strictQuery`: controls how Mongoose handles keys that aren't in the schema for the query `filter`. This option is `false` by default, which means Mongoose will allow `Model.find({ foo: 'bar' })` even if `foo` is not in the schema. See the [`strictQuery` docs](https://mongoosejs.com/docs/guide.html#strictQuery) for more information.
 * - `nearSphere`: use `$nearSphere` instead of `near()`. See the [`Query.prototype.nearSphere()` docs](https://mongoosejs.com/docs/api/query.html#Query.prototype.nearSphere())
 * - `schemaLevelProjections`: if `false`, Mongoose will not apply schema-level `select: false` or `select: true` for this query
 *
 * Mongoose maintains a separate object for internal options because
 * Mongoose sends `Query.prototype.options` to the MongoDB server, and the
 * above options are not relevant for the MongoDB server.
 *
 * @param {Object} options if specified, overwrites the current options
 * @return {Object} the options
 * @api public
 
 * ignore
 * @method _castConditions
 * @memberOf Query
 * @api private
 * @instance
 
 * Execute a `find()`
 *
 * @return {Query} this
 * @api private
  Separate options to pass down to `completeMany()` in case we need to// Sepa ... need to set a session on the document// set  ... ocument
 * Find all documents that match `selector`. The result will be an array of documents.
 *
 * If there are too many documents in the result to fit in memory, use
 * [`Query.prototype.cursor()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.cursor())
 *
 * #### Example:
 *
 *     const arr = await Movie.find({ year: { $gte: 1980, $lte: 1989 } });
 *
 * @param {Object|ObjectId} [filter] mongodb filter. If not specified, returns all documents.
 * @return {Query} this
 * @api public
 
 * Merges another Query or conditions object into this one.
 *
 * When a Query is passed, conditions, field selection and options are merged.
 *
 * @param {Query|Object} source
 * @return {Query} this
  if source has a feature, apply it to ourselves// if s ... rselves plain object// plain object
 * Adds a collation to this op (MongoDB 3.4 and up)
 *
 * @param {Object} value
 * @return {Query} this
 * @see MongoDB docs https://www.mongodb.com/docs/manual/reference/method/cursor.collation/#cursor.collation
 * @api public
 
 * Hydrate a single doc from `findOne()`, `findOneAndUpdate()`, etc.
 *
 * @api private
  `populate`, `lean`// `pop ...  `lean`
 * Given a model and an array of docs, hydrates all the docs to be instances
 * of the model. Used to initialize docs returned from the db from `find()`
 *
 * @param {Array} docs
 * @param {Object} fields the projection used, including `select` from schemas
 * @param {Object} userProvidedFields the user-specified projection
 * @param {Object} [opts]
 * @param {Array} [opts.populated]
 * @param {ClientSession} [opts.session]
 * @api private
 
 * Internal helper to execute a findOne() operation
 *
 * @see findOne https://www.mongodb.com/docs/manual/reference/method/db.collection.findOne/
 * @api private
  don't pass in the conditions because we already merged them in// don' ... them in
 * Declares the query a findOne operation. When executed, the first found document is passed to the callback.
 *
 * The result of the query is a single document, or `null` if no document was found.
 *
 * * *Note:* `conditions` is optional, and if `conditions` is null or undefined,
 * mongoose will send an empty `findOne` command to MongoDB, which will return
 * an arbitrary document. If you're querying by `_id`, use `Model.findById()`
 * instead.
 *
 * This function triggers the following middleware.
 *
 * - `findOne()`
 *
 * #### Example:
 *
 *     const query = Kitten.where({ color: 'white' });
 *     const kitten = await query.findOne();
 *
 * @param {Object} [filter] mongodb selector
 * @param {Object} [projection] optional fields to return
 * @param {Object} [options] see [`setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query} this
 * @see findOne https://www.mongodb.com/docs/manual/reference/method/db.collection.findOne/
 * @see Query.select https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
 * @api public
 
 * Execute a countDocuments query
 *
 * @see countDocuments https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments
 * @api private
 !
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 /*!\n *  ... ct.\n */
 * Execute a estimatedDocumentCount() query
 *
 * @see estimatedDocumentCount https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#estimatedDocumentCount
 * @api private
 
 * Specifies this query as a `estimatedDocumentCount()` query. Faster than
 * using `countDocuments()` for large collections because
 * `estimatedDocumentCount()` uses collection metadata rather than scanning
 * the entire collection.
 *
 * `estimatedDocumentCount()` does **not** accept a filter. `Model.find({ foo: bar }).estimatedDocumentCount()`
 * is equivalent to `Model.find().estimatedDocumentCount()`
 *
 * This function triggers the following middleware.
 *
 * - `estimatedDocumentCount()`
 *
 * #### Example:
 *
 *     await Model.find().estimatedDocumentCount();
 *
 * @param {Object} [options] passed transparently to the [MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/EstimatedDocumentCountOptions.html)
 * @return {Query} this
 * @see estimatedDocumentCount https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#estimatedDocumentCount
 * @api public
 
 * Specifies this query as a `countDocuments()` query. Behaves like `count()`,
 * except it always does a full collection scan when passed an empty filter `{}`.
 *
 * There are also minor differences in how `countDocuments()` handles
 * [`$where` and a couple geospatial operators](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments).
 * versus `count()`.
 *
 * This function triggers the following middleware.
 *
 * - `countDocuments()`
 *
 * #### Example:
 *
 *     const countQuery = model.where({ 'color': 'black' }).countDocuments();
 *
 *     query.countDocuments({ color: 'black' }).count().exec();
 *
 *     await query.countDocuments({ color: 'black' });
 *
 *     query.where('color', 'black').countDocuments().exec();
 *
 * The `countDocuments()` function is similar to `count()`, but there are a
 * [few operators that `countDocuments()` does not support](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments).
 * Below are the operators that `count()` supports but `countDocuments()` does not,
 * and the suggested replacement:
 *
 * - `$where`: [`$expr`](https://www.mongodb.com/docs/manual/reference/operator/query/expr/)
 * - `$near`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$center`](https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center)
 * - `$nearSphere`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$centerSphere`](https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere)
 *
 * @param {Object} [filter] mongodb selector
 * @param {Object} [options]
 * @return {Query} this
 * @see countDocuments https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments
 * @api public
 
 * Execute a `distinct()` query
 *
 * @see distinct https://www.mongodb.com/docs/manual/reference/method/db.collection.distinct/
 * @api private
 
 * Declares or executes a distinct() operation.
 *
 * This function does not trigger any middleware.
 *
 * #### Example:
 *
 *     distinct(field, conditions, options)
 *     distinct(field, conditions)
 *     distinct(field)
 *     distinct()
 *
 * @param {String} [field]
 * @param {Object|Query} [filter]
 * @param {Object} [options]
 * @return {Query} this
 * @see distinct https://www.mongodb.com/docs/manual/reference/method/db.collection.distinct/
 * @api public
 
 * Sets the sort order
 *
 * If an object is passed, values allowed are `asc`, `desc`, `ascending`, `descending`, `1`, and `-1`.
 *
 * If a string is passed, it must be a space delimited list of path names. The
 * sort order of each path is ascending unless the path name is prefixed with `-`
 * which will be treated as descending.
 *
 * #### Example:
 *
 *     // sort by "field" ascending and "test" descending
 *     query.sort({ field: 'asc', test: -1 });
 *
 *     // equivalent
 *     query.sort('field -test');
 *
 *     // also possible is to use a array with array key-value pairs
 *     query.sort([['field', 'asc']]);
 *
 * #### Note:
 *
 * Cannot be used with `distinct()`
 *
 * @param {Object|String|Array<Array<(string | number)>>} arg
 * @param {Object} [options]
 * @param {Boolean} [options.override=false] If true, replace existing sort options with `arg`
 * @return {Query} this
 * @see cursor.sort https://www.mongodb.com/docs/manual/reference/method/cursor.sort/
 * @api public
 !
 * Convert sort values
 
 * Declare and/or execute this query as a `deleteOne()` operation. Works like
 * remove, except it deletes at most one document regardless of the `single`
 * option.
 *
 * This function triggers `deleteOne` middleware.
 *
 * #### Example:
 *
 *     await Character.deleteOne({ name: 'Eddard Stark' });
 *
 * This function calls the MongoDB driver's [`Collection#deleteOne()` function](https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteOne).
 * The returned [promise](https://mongoosejs.com/docs/queries.html) resolves to an
 * object that contains 2 properties:
 *
 * - `acknowledged`: boolean
 * - `deletedCount`: the number of documents deleted
 *
 * #### Example:
 *
 *     const res = await Character.deleteOne({ name: 'Eddard Stark' });
 *     // `1` if MongoDB deleted a doc, `0` if no docs matched the filter `{ name: ... }`
 *     res.deletedCount;
 *
 * @param {Object|Query} [filter] mongodb selector
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @return {Query} this
 * @see DeleteResult https://mongodb.github.io/node-mongodb-native/6.15/interfaces/DeleteResult.html
 * @see deleteOne https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteOne
 * @api public
 
 * Internal thunk for `deleteOne()`
 *
 * @method _deleteOne
 * @instance
 * @memberOf Query
 * @api private
  Check for empty/invalid filter with requireFilter option// Chec ...  option
 * Declare and/or execute this query as a `deleteMany()` operation. Works like
 * remove, except it deletes _every_ document that matches `filter` in the
 * collection, regardless of the value of `single`.
 *
 * This function triggers `deleteMany` middleware.
 *
 * #### Example:
 *
 *     await Character.deleteMany({ name: /Stark/, age: { $gte: 18 } });
 *
 * This function calls the MongoDB driver's [`Collection#deleteMany()` function](https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteMany).
 * The returned [promise](https://mongoosejs.com/docs/queries.html) resolves to an
 * object that contains 2 properties:
 *
 * - `acknowledged`: boolean
 * - `deletedCount`: the number of documents deleted
 *
 * #### Example:
 *
 *     const res = await Character.deleteMany({ name: /Stark/, age: { $gte: 18 } });
 *     // `0` if no docs matched the filter, number of docs deleted otherwise
 *     res.deletedCount;
 *
 * @param {Object|Query} [filter] mongodb selector
 * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @return {Query} this
 * @see DeleteResult https://mongodb.github.io/node-mongodb-native/6.15/interfaces/DeleteResult.html
 * @see deleteMany https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteMany
 * @api public
 
 * Execute a `deleteMany()` query
 *
 * @method _deleteMany
 * @instance
 * @memberOf Query
 * @api private
 
 * hydrates a document
 *
 * @param {Model} model
 * @param {Document} doc
 * @param {Object} res 3rd parameter to callback
 * @param {Object} fields
 * @param {Query} self
 * @param {Array} [pop] array of paths used in population
 * @param {Function} callback
 * @api private
 
 * If the model is a discriminator type and not root, then add the key & value to the criteria.
 * @param {Query} query
 * @api private
 
 * Issues a mongodb `findOneAndUpdate()` command.
 *
 * Finds a matching document, updates it according to the `update` arg, passing any `options`, and returns the found
 * document (if any).
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndUpdate()`
 *
 * #### Available options
 *
 * - `new`: bool - if true, return the modified document rather than the original. defaults to false (changed in 4.0)
 * - `upsert`: bool - creates the object if it doesn't exist. defaults to false.
 * - `fields`: {Object|String} - Field selection. Equivalent to `.select(fields).findOneAndUpdate()`
 * - `sort`: if multiple docs are found by the filter, sets the sort order to choose which doc to update
 * - `maxTimeMS`: puts a time limit on the query - requires mongodb >= 2.6.0
 * - `runValidators`: if true, runs [update validators](https://mongoosejs.com/docs/validation.html#update-validators) on this command. Update validators validate the update operation against the model's schema.
 * - `setDefaultsOnInsert`: `true` by default. If `setDefaultsOnInsert` and `upsert` are true, mongoose will apply the [defaults](https://mongoosejs.com/docs/defaults.html) specified in the model's schema if a new document is created.
 * - `requireFilter`: bool - if true, throws an error if the filter is empty (`{}`). Defaults to false.
 *
 * #### Example:
 *
 *     query.findOneAndUpdate(filter, update, options);  // returns Query
 *     query.findOneAndUpdate(filter, update);           // returns Query
 *     // Note that `Query#findOneAndUpdate()` with 1 arg treats the first arg as the `update`, NOT the `filter`.
 *     query.findOneAndUpdate(update);                   // returns Query
 *     query.findOneAndUpdate();                         // returns Query
 *
 * @method findOneAndUpdate
 * @memberOf Query
 * @instance
 * @param {Object|Query} [filter]
 * @param {Object} [doc]
 * @param {Object} [options]
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean} [options.multipleCastError] by default, mongoose only returns the first error that occurred in casting the query. Turn on this option to aggregate all the cast errors.
 * @param {Boolean} [options.new=false] By default, `findOneAndUpdate()` returns the document as it was **before** `update` was applied. If you set `new: true`, `findOneAndUpdate()` will instead give you the object after `update` was applied.
 * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and [the Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.returnOriginal=null] An alias for the `new` option. `returnOriginal: false` is equivalent to `new: true`.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @param {Boolean} [options.overwriteImmutable=false] Mongoose removes updated immutable properties from `update` by default (excluding $setOnInsert). Set `overwriteImmutable` to `true` to allow updating immutable properties using other update operators.
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @see Tutorial https://mongoosejs.com/docs/tutorials/findoneandupdate.html
 * @see findAndModify command https://www.mongodb.com/docs/manual/reference/command/findAndModify/
 * @see ModifyResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html
 * @see findOneAndUpdate https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#findOneAndUpdate
 * @return {Query} this
 * @api public
  apply doc// apply doc
 * Execute a findOneAndUpdate operation
 *
 * @method _findOneAndUpdate
 * @memberOf Query
 * @api private
  still need to do the upsert to empty doc// stil ... pty doc In order to make MongoDB 2.6 happy (see// In o ... py (see https://jira.mongodb.org/browse/SERVER-12266 and related issues)// http ... issues) if we have an actual update document but $set is empty, junk the $set.// if w ... e $set.
 * Issues a MongoDB [findOneAndDelete](https://www.mongodb.com/docs/manual/reference/method/db.collection.findOneAndDelete/) command.
 *
 * Finds a matching document, removes it, and returns the found document (if any).
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndDelete()`
 *
 * #### Available options
 *
 * - `sort`: if multiple docs are found by the conditions, sets the sort order to choose which doc to update
 * - `maxTimeMS`: puts a time limit on the query - requires mongodb >= 2.6.0
 * - `requireFilter`: bool - if true, throws an error if the filter is empty (`{}`). Defaults to false.
 *
 * #### Example:
 *
 *     A.where().findOneAndDelete(conditions, options)  // return Query
 *     A.where().findOneAndDelete(conditions) // returns Query
 *     A.where().findOneAndDelete()           // returns Query
 *
 * @method findOneAndDelete
 * @memberOf Query
 * @param {Object} [filter]
 * @param {Object} [options]
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @return {Query} this
 * @see findAndModify command https://www.mongodb.com/docs/manual/reference/command/findAndModify/
 * @api public
 
 * Execute a `findOneAndDelete()` query
 *
 * @return {Query} this
 * @method _findOneAndDelete
 * @memberOf Query
 * @api private
 
 * Issues a MongoDB [findOneAndReplace](https://www.mongodb.com/docs/manual/reference/method/db.collection.findOneAndReplace/) command.
 *
 * Finds a matching document, removes it, and returns the found document (if any).
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndReplace()`
 *
 * #### Available options
 *
 * - `sort`: if multiple docs are found by the conditions, sets the sort order to choose which doc to update
 * - `maxTimeMS`: puts a time limit on the query - requires mongodb >= 2.6.0
 * - `includeResultMetadata`: if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * - `requireFilter`: bool - if true, throws an error if the filter is empty (`{}`). Defaults to false.
 *
 * #### Example:
 *
 *     A.where().findOneAndReplace(filter, replacement, options); // return Query
 *     A.where().findOneAndReplace(filter); // returns Query
 *     A.where().findOneAndReplace(); // returns Query
 *
 * @method findOneAndReplace
 * @memberOf Query
 * @param {Object} [filter]
 * @param {Object} [replacement]
 * @param {Object} [options]
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.new=false] By default, `findOneAndUpdate()` returns the document as it was **before** `update` was applied. If you set `new: true`, `findOneAndUpdate()` will instead give you the object after `update` was applied.
 * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and [the Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.returnOriginal=null] An alias for the `new` option. `returnOriginal: false` is equivalent to `new: true`.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @return {Query} this
 * @api public
 
 * Execute a findOneAndReplace() query
 *
 * @return {Query} this
 * @method _findOneAndReplace
 * @instance
 * @memberOf Query
 * @api private
 
 * Finds a single document by its _id field. `findById(id)` is equivalent to
 * `findOne({ _id: id })`.
 *
 * The `id` is cast based on the Schema before sending the command.
 *
 * This function triggers the following middleware.
 *
 * - `findOne()`
 *
 * @method findById
 * @memberOf Query
 * @instance
 * @param {Any} id value of `_id` to query by
 * @param {Object} [projection] optional fields to return
 * @param {Object} [options] see [`setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @return {Query} this
 * @see findOne https://www.mongodb.com/docs/manual/reference/method/db.collection.findOne/
 * @see Query.select https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
 * @api public
 
 * Issues a mongodb findOneAndUpdate command by a document's _id field.
 * `findByIdAndUpdate(id, ...)` is equivalent to `findOneAndUpdate({ _id: id }, ...)`.
 *
 * Finds a matching document, updates it according to the `update` arg,
 * passing any `options`, and returns the found document (if any).
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndUpdate()`
 *
 * @method findByIdAndUpdate
 * @memberOf Query
 * @instance
 * @param {Any} id value of `_id` to query by
 * @param {Object} [doc]
 * @param {Object} [options]
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean} [options.multipleCastError] by default, mongoose only returns the first error that occurred in casting the query. Turn on this option to aggregate all the cast errors.
 * @param {Boolean} [options.new=false] By default, `findOneAndUpdate()` returns the document as it was **before** `update` was applied. If you set `new: true`, `findOneAndUpdate()` will instead give you the object after `update` was applied.
 * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and [the Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.returnOriginal=null] An alias for the `new` option. `returnOriginal: false` is equivalent to `new: true`.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @param {Boolean} [options.overwriteImmutable=false] Mongoose removes updated immutable properties from `update` by default (excluding $setOnInsert). Set `overwriteImmutable` to `true` to allow updating immutable properties using other update operators.
 * @see Tutorial https://mongoosejs.com/docs/tutorials/findoneandupdate.html
 * @see findAndModify command https://www.mongodb.com/docs/manual/reference/command/findAndModify/
 * @see ModifyResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html
 * @see findOneAndUpdate https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#findOneAndUpdate
 * @return {Query} this
 * @api public
 
 * Issue a MongoDB `findOneAndDelete()` command by a document's _id field.
 * In other words, `findByIdAndDelete(id)` is a shorthand for
 * `findOneAndDelete({ _id: id })`.
 *
 * This function triggers the following middleware.
 *
 * - `findOneAndDelete()`
 *
 * @method findByIdAndDelete
 * @memberOf Query
 * @param {any} id value of `_id` to query by
 * @param {Object} [options]
 * @param {Boolean} [options.includeResultMetadata] if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
 * @param {ClientSession} [options.session=null] The session associated with this query. See [transactions docs](https://mongoosejs.com/docs/transactions.html).
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @return {Query} this
 * @see findAndModify command https://www.mongodb.com/docs/manual/reference/command/findAndModify/
 * @api public
 
 * Support the `new` option as an alternative to `returnOriginal` for backwards
 * compat.
 * @api private
  Temporary since driver 4.0.0-beta does not support `returnDocument`// Temp ... cument`
 * Get options from query opts, falling back to the base mongoose object.
 * @param {Query} query
 * @param {Object} option
 * @param {Any} def
 * @api private
 
 * Override mquery.prototype._mergeUpdate to handle mongoose objects in
 * updates.
 *
 * @param {Object} doc
 * @method _mergeUpdate
 * @memberOf Query
 * @instance
 * @api private
 
 * Mongoose calls this function internally to validate the query if
 * `runValidators` is set
 *
 * @param {Object} castedDoc the update, after casting
 * @param {Object} options the options from `_optionsForExec()`
 * @param {Boolean} isOverwriting
 * @method validate
 * @memberOf Query
 * @instance
 * @api private
 
 * Execute an updateMany query
 *
 * @see Model.update https://mongoosejs.com/docs/api/model.html#Model.update()
 * @method _updateMany
 * @memberOf Query
 * @instance
 * @api private
 
 * Execute an updateOne query
 *
 * @see Model.update https://mongoosejs.com/docs/api/model.html#Model.update()
 * @method _updateOne
 * @memberOf Query
 * @instance
 * @api private
 
 * Execute a replaceOne query
 *
 * @see Model.replaceOne https://mongoosejs.com/docs/api/model.html#Model.replaceOne()
 * @method _replaceOne
 * @memberOf Query
 * @instance
 * @api private
 
 * Declare and/or execute this query as an updateMany() operation.
 * MongoDB will update _all_ documents that match `filter` (as opposed to just the first one).
 *
 * **Note** updateMany will _not_ fire update middleware. Use `pre('updateMany')`
 * and `post('updateMany')` instead.
 *
 * #### Example:
 *
 *     const res = await Person.updateMany({ name: /Stark$/ }, { isDeleted: true });
 *     res.n; // Number of documents matched
 *     res.nModified; // Number of documents modified
 *
 *     // Other supported syntaxes
 *     await Person.find({ name: /Stark$/ }).updateMany({ isDeleted: true }); // Using chaining syntax
 *     await Person.find().updateMany({ isDeleted: true }); // Set `isDeleted` on _all_ Person documents
 *
 * This function triggers the following middleware.
 *
 * - `updateMany()`
 *
 * @param {Object} [filter]
 * @param {Object|Array} [update] the update command. If array, this update will be treated as an update pipeline and not casted.
 * @param {Object} [options]
 * @param {Boolean} [options.multipleCastError] by default, mongoose only returns the first error that occurred in casting the query. Turn on this option to aggregate all the cast errors.
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Object} [options.writeConcern=null] sets the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/) for replica sets. Overrides the [schema-level write concern](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @param {Boolean} [options.overwriteImmutable=false] Mongoose removes updated immutable properties from `update` by default (excluding $setOnInsert). Set `overwriteImmutable` to `true` to allow updating immutable properties using other update operators.
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @return {Query} this
 * @see Model.update https://mongoosejs.com/docs/api/model.html#Model.update()
 * @see Query docs https://mongoosejs.com/docs/queries.html
 * @see update https://www.mongodb.com/docs/manual/reference/method/db.collection.update/
 * @see UpdateResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/UpdateResult.html
 * @see MongoDB docs https://www.mongodb.com/docs/manual/reference/command/update/#update-command-output
 * @api public
  .update(conditions, doc, callback)// .upd ... llback) .update(doc, callback);// .upd ... lback); .update(callback)// .update(callback) .update(doc)// .update(doc)
 * Declare and/or execute this query as an updateOne() operation.
 * MongoDB will update _only_ the first document that matches `filter`.
 *
 * - Use `replaceOne()` if you want to overwrite an entire document rather than using [atomic operators](https://www.mongodb.com/docs/manual/tutorial/model-data-for-atomic-operations/#pattern) like `$set`.
 *
 * **Note** updateOne will _not_ fire update middleware. Use `pre('updateOne')`
 * and `post('updateOne')` instead.
 *
 * #### Example:
 *
 *     const res = await Person.updateOne({ name: 'Jean-Luc Picard' }, { ship: 'USS Enterprise' });
 *     res.acknowledged; // Indicates if this write result was acknowledged. If not, then all other members of this result will be undefined.
 *     res.matchedCount; // Number of documents that matched the filter
 *     res.modifiedCount; // Number of documents that were modified
 *     res.upsertedCount; // Number of documents that were upserted
 *     res.upsertedId; // Identifier of the inserted document (if an upsert took place)
 *
 *     // Other supported syntaxes
 *     await Person.findOne({ name: 'Jean-Luc Picard' }).updateOne({ ship: 'USS Enterprise' }); // Using chaining syntax
 *     await Person.updateOne({ ship: 'USS Enterprise' }); // Updates first doc's `ship` property
 *
 * This function triggers the following middleware.
 *
 * - `updateOne()`
 *
 * @param {Object} [filter]
 * @param {Object|Array} [update] the update command. If array, this update will be treated as an update pipeline and not casted.
 * @param {Object} [options]
 * @param {Boolean} [options.multipleCastError] by default, mongoose only returns the first error that occurred in casting the query. Turn on this option to aggregate all the cast errors.
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Object} [options.writeConcern=null] sets the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/) for replica sets. Overrides the [schema-level write concern](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.overwriteDiscriminatorKey=false] Mongoose removes discriminator key updates from `update` by default, set `overwriteDiscriminatorKey` to `true` to allow updating the discriminator key
 * @param {Boolean} [options.overwriteImmutable=false] Mongoose removes updated immutable properties from `update` by default (excluding $setOnInsert). Set `overwriteImmutable` to `true` to allow updating immutable properties using other update operators.
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @return {Query} this
 * @see Model.update https://mongoosejs.com/docs/api/model.html#Model.update()
 * @see Query docs https://mongoosejs.com/docs/queries.html
 * @see update https://www.mongodb.com/docs/manual/reference/method/db.collection.update/
 * @see UpdateResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/UpdateResult.html
 * @see MongoDB docs https://www.mongodb.com/docs/manual/reference/command/update/#update-command-output
 * @api public
 
 * Declare and/or execute this query as a replaceOne() operation.
 * MongoDB will replace the existing document and will not accept any [atomic operators](https://www.mongodb.com/docs/manual/tutorial/model-data-for-atomic-operations/#pattern) (`$set`, etc.)
 *
 * **Note** replaceOne will _not_ fire update middleware. Use `pre('replaceOne')`
 * and `post('replaceOne')` instead.
 *
 * #### Example:
 *
 *     const res = await Person.replaceOne({ _id: 24601 }, { name: 'Jean Valjean' });
 *     res.acknowledged; // Indicates if this write result was acknowledged. If not, then all other members of this result will be undefined.
 *     res.matchedCount; // Number of documents that matched the filter
 *     res.modifiedCount; // Number of documents that were modified
 *     res.upsertedCount; // Number of documents that were upserted
 *     res.upsertedId; // Identifier of the inserted document (if an upsert took place)
 *
 * This function triggers the following middleware.
 *
 * - `replaceOne()`
 *
 * @param {Object} [filter]
 * @param {Object} [doc] the update command
 * @param {Object} [options]
 * @param {Boolean} [options.multipleCastError] by default, mongoose only returns the first error that occurred in casting the query. Turn on this option to aggregate all the cast errors.
 * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)
 * @param {Boolean} [options.upsert=false] if true, and no documents found, insert a new document
 * @param {Object} [options.writeConcern=null] sets the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/) for replica sets. Overrides the [schema-level write concern](https://mongoosejs.com/docs/guide.html#writeConcern)
 * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Does nothing if schema-level timestamps are not set.
 * @param {Boolean} [options.translateAliases=null] If set to `true`, translates any schema-defined aliases in `filter`, `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
 * @param {Boolean} [options.requireFilter=false] If true, throws an error if the filter is empty (`{}`)
 * @return {Query} this
 * @see Model.update https://mongoosejs.com/docs/api/model.html#Model.update()
 * @see Query docs https://mongoosejs.com/docs/queries.html
 * @see update https://www.mongodb.com/docs/manual/reference/method/db.collection.update/
 * @see UpdateResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/UpdateResult.html
 * @see MongoDB docs https://www.mongodb.com/docs/manual/reference/command/update/#update-command-output
 * @api public
 
 * Internal helper for update, updateMany, updateOne, replaceOne
 * @param {Query} query
 * @param {String} op
 * @param {Object} filter
 * @param {Document} [doc]
 * @param {Object} [options]
 * @param {Function} callback
 * @api private
  make sure we don't send in the whole Document to merge()// make ... merge() strict is an option used in the update checking, make sure it gets set// stri ... ets set Hooks// Hooks
 * Runs a function `fn` and treats the return value of `fn` as the new value
 * for the query to resolve to.
 *
 * Any functions you pass to `transform()` will run **after** any post hooks.
 *
 * #### Example:
 *
 *     const res = await MyModel.findOne().transform(res => {
 *       // Sets a `loadedAt` property on the doc that tells you the time the
 *       // document was loaded.
 *       return res == null ?
 *         res :
 *         Object.assign(res, { loadedAt: new Date() });
 *     });
 *
 * @method transform
 * @memberOf Query
 * @instance
 * @param {Function} fn function to run to transform the query result
 * @return {Query} this
 
 * Make this query throw an error if no documents match the given `filter`.
 * This is handy for integrating with async/await, because `orFail()` saves you
 * an extra `if` statement to check if no document was found.
 *
 * #### Example:
 *
 *     // Throws if no doc returned
 *     await Model.findOne({ foo: 'bar' }).orFail();
 *
 *     // Throws if no document was updated. Note that `orFail()` will still
 *     // throw if the only document that matches is `{ foo: 'bar', name: 'test' }`,
 *     // because `orFail()` will throw if no document was _updated_, not
 *     // if no document was _found_.
 *     await Model.updateOne({ foo: 'bar' }, { name: 'test' }).orFail();
 *
 *     // Throws "No docs found!" error if no docs match `{ foo: 'bar' }`
 *     await Model.find({ foo: 'bar' }).orFail(new Error('No docs found!'));
 *
 *     // Throws "Not found" error if no document was found
 *     await Model.findOneAndUpdate({ foo: 'bar' }, { name: 'test' }).
 *       orFail(() => Error('Not found'));
 *
 * @method orFail
 * @memberOf Query
 * @instance
 * @param {Function|Error} [err] optional error to throw if no docs match `filter`. If not specified, `orFail()` will throw a `DocumentNotFoundError`
 * @return {Query} this
 
 * Get the error to throw for `orFail()`
 * @param {Error|undefined} err
 * @param {Query} query
 * @api private
 
 * Wrapper function to call isPathSelectedInclusive on a query.
 * @param {String} path
 * @return {Boolean}
 * @api public
 
 * Executes the query
 *
 * #### Example:
 *
 *     const promise = query.exec();
 *     const promise = query.exec('update');
 *
 * @param {String|Function} [operation]
 * @return {Promise}
 * @api public
 
 * Executes the query returning a `Promise` which will be
 * resolved with either the doc(s) or rejected with the error.
 *
 * More about [`then()` in JavaScript](https://masteringjs.io/tutorials/fundamentals/then).
 *
 * @param {Function} [resolve]
 * @param {Function} [reject]
 * @return {Promise}
 * @api public
 
 * Executes the query returning a `Promise` which will be
 * resolved with either the doc(s) or rejected with the error.
 * Like `.then()`, but only takes a rejection handler.
 *
 * More about [Promise `catch()` in JavaScript](https://masteringjs.io/tutorials/fundamentals/catch).
 *
 * @param {Function} [reject]
 * @return {Promise}
 * @api public
 
 * Executes the query returning a `Promise` which will be
 * resolved with `.finally()` chained.
 *
 * More about [Promise `finally()` in JavaScript](https://thecodebarbarian.com/using-promise-finally-in-node-js.html).
 *
 * @param {Function} [onFinally]
 * @return {Promise}
 * @api public
 
 * Returns a string representation of this query.
 *
 * More about [`toString()` in JavaScript](https://masteringjs.io/tutorials/fundamentals/tostring).
 *
 * #### Example:
 *     const q = Model.find();
 *     console.log(q); // Prints "Query { find }"
 *
 * @return {String}
 * @api public
 * @method [Symbol.toStringTag]
 * @memberOf Query
 
 * Add pre [middleware](https://mongoosejs.com/docs/middleware.html) to this query instance. Doesn't affect
 * other queries.
 *
 * #### Example:
 *
 *     const q1 = Question.find({ answer: 42 });
 *     q1.pre(function middleware() {
 *       console.log(this.getFilter());
 *     });
 *     await q1.exec(); // Prints "{ answer: 42 }"
 *
 *     // Doesn't print anything, because `middleware()` is only
 *     // registered on `q1`.
 *     await Question.find({ answer: 42 });
 *
 * @param {Function} fn
 * @return {Promise}
 * @api public
 
 * Add post [middleware](https://mongoosejs.com/docs/middleware.html) to this query instance. Doesn't affect
 * other queries.
 *
 * #### Example:
 *
 *     const q1 = Question.find({ answer: 42 });
 *     q1.post(function middleware() {
 *       console.log(this.getFilter());
 *     });
 *     await q1.exec(); // Prints "{ answer: 42 }"
 *
 *     // Doesn't print anything, because `middleware()` is only
 *     // registered on `q1`.
 *     await Question.find({ answer: 42 });
 *
 * @param {Function} fn
 * @return {Promise}
 * @api public
 
 * Casts obj for an update command.
 *
 * @param {Object} obj
 * @return {Object} obj after casting its values
 * @method _castUpdate
 * @memberOf Query
 * @instance
 * @api private
 
 * Specifies paths which should be populated with other documents.
 *
 * #### Example:
 *
 *     let book = await Book.findOne().populate('authors');
 *     book.title; // 'Node.js in Action'
 *     book.authors[0].name; // 'TJ Holowaychuk'
 *     book.authors[1].name; // 'Nathan Rajlich'
 *
 *     let books = await Book.find().populate({
 *       path: 'authors',
 *       // `match` and `sort` apply to the Author model,
 *       // not the Book model. These options do not affect
 *       // which documents are in `books`, just the order and
 *       // contents of each book document's `authors`.
 *       match: { name: new RegExp('.*h.*', 'i') },
 *       sort: { name: -1 }
 *     });
 *     books[0].title; // 'Node.js in Action'
 *     // Each book's `authors` are sorted by name, descending.
 *     books[0].authors[0].name; // 'TJ Holowaychuk'
 *     books[0].authors[1].name; // 'Marc Harter'
 *
 *     books[1].title; // 'Professional AngularJS'
 *     // Empty array, no authors' name has the letter 'h'
 *     books[1].authors; // []
 *
 * Paths are populated after the query executes and a response is received. A
 * separate query is then executed for each path specified for population. After
 * a response for each query has also been returned, the results are passed to
 * the callback.
 *
 * @param {Object|String|String[]} path either the path(s) to populate or an object specifying all parameters
 * @param {Object|String} [select] Field selection for the population query
 * @param {Model} [model] The model you wish to use for population. If not specified, populate will look up the model by the name in the Schema's `ref` field.
 * @param {Object} [match] Conditions for the population query
 * @param {Object} [options] Options for the population query (sort, etc)
 * @param {String} [options.path=null] The path to populate.
 * @param {boolean} [options.retainNullValues=false] by default, Mongoose removes null and undefined values from populated arrays. Use this option to make `populate()` retain `null` and `undefined` array entries.
 * @param {boolean} [options.getters=false] if true, Mongoose will call any getters defined on the `localField`. By default, Mongoose gets the raw value of `localField`. For example, you would need to set this option to `true` if you wanted to [add a `lowercase` getter to your `localField`](https://mongoosejs.com/docs/schematypes.html#schematype-options).
 * @param {boolean} [options.clone=false] When you do `BlogPost.find().populate('author')`, blog posts with the same author will share 1 copy of an `author` doc. Enable this option to make Mongoose clone populated docs before assigning them.
 * @param {Object|Function} [options.match=null] Add an additional filter to the populate query. Can be a filter object containing [MongoDB query syntax](https://www.mongodb.com/docs/manual/tutorial/query-documents/), or a function that returns a filter object.
 * @param {Function} [options.transform=null] Function that Mongoose will call on every populated document that allows you to transform the populated document.
 * @param {Object} [options.options=null] Additional options like `limit` and `lean`.
 * @see population https://mongoosejs.com/docs/populate.html
 * @see Query#select https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
 * @see Model.populate https://mongoosejs.com/docs/api/model.html#Model.populate()
 * @return {Query} this
 * @api public
  Bail when given no truthy arguments// Bail ... guments
 * Gets a list of paths to be populated by this query
 *
 * #### Example:
 *
 *      bookSchema.pre('findOne', function() {
 *        let keys = this.getPopulatedPaths(); // ['author']
 *      });
 *      ...
 *      Book.findOne({}).populate('author');
 *
 * #### Example:
 *
 *      // Deep populate
 *      const q = L1.find().populate({
 *        path: 'level2',
 *        populate: { path: 'level3' }
 *      });
 *      q.getPopulatedPaths(); // ['level2', 'level2.level3']
 *
 * @return {Array} an array of strings representing populated paths
 * @api public
 
 * Casts this query to the schema of `model`
 *
 * #### Note:
 *
 * If `obj` is present, it is cast instead of this query.
 *
 * @param {Model} [model] the model to cast to. If not set, defaults to `this.model`
 * @param {Object} [obj]
 * @return {Object}
 * @api public
  CastError, assign model// Cast ... n model
 * Casts selected field arguments for field selection with mongo 2.2
 *
 *     query.select({ ids: { $elemMatch: { $in: [hexString] }})
 *
 * @param {Object} fields
 * @see https://github.com/Automattic/mongoose/issues/1091
 * @see https://www.mongodb.com/docs/manual/reference/projection/elemMatch/
 * @api private
  collect $elemMatch args// coll ... ch args they passed $elemMatch, cast em// they ... cast em apply the casted field args// appl ... ld args
 * Applies schematype selected options to this query.
 * @api private
 
 * Returns a wrapper around a [mongodb driver cursor](https://mongodb.github.io/node-mongodb-native/4.9/classes/FindCursor.html).
 * A QueryCursor exposes a Streams3 interface, as well as a `.next()` function.
 *
 * The `.cursor()` function triggers pre find hooks, but **not** post find hooks.
 *
 * #### Example:
 *
 *     // There are 2 ways to use a cursor. First, as a stream:
 *     Thing.
 *       find({ name: /^hello/ }).
 *       cursor().
 *       on('data', function(doc) { console.log(doc); }).
 *       on('end', function() { console.log('Done!'); });
 *
 *     // Or you can use `.next()` to manually get the next doc in the stream.
 *     // `.next()` returns a promise, so you can use promises or callbacks.
 *     const cursor = Thing.find({ name: /^hello/ }).cursor();
 *     cursor.next(function(error, doc) {
 *       console.log(doc);
 *     });
 *
 *     // Because `.next()` returns a promise, you can use co
 *     // to easily iterate through all documents without loading them
 *     // all into memory.
 *     const cursor = Thing.find({ name: /^hello/ }).cursor();
 *     for (let doc = await cursor.next(); doc != null; doc = await cursor.next()) {
 *       console.log(doc);
 *     }
 *
 * #### Valid options
 *
 *   - `transform`: optional function which accepts a mongoose document. The return value of the function will be emitted on `data` and returned by `.next()`.
 *
 * @return {QueryCursor}
 * @param {Object} [options]
 * @see QueryCursor https://mongoosejs.com/docs/api/querycursor.html
 * @api public
  the rest of these are basically to support older Mongoose syntax with mquery// the  ...  mquery
 * Sets the tailable option (for use with capped collections).
 *
 * #### Example:
 *
 *     query.tailable(); // true
 *     query.tailable(true);
 *     query.tailable(false);
 *
 *     // Set both `tailable` and `awaitData` options
 *     query.tailable({ awaitData: true });
 *
 * #### Note:
 *
 * Cannot be used with `distinct()`
 *
 * @param {Boolean} bool defaults to true
 * @param {Object} [opts] options to set
 * @param {Boolean} [opts.awaitData] false by default. Set to true to keep the cursor open even if there's no data.
 * @param {Number} [opts.maxAwaitTimeMS] the maximum amount of time for the server to wait on new documents to satisfy a tailable cursor query. Requires `tailable` and `awaitData` to be true
 * @see tailable https://www.mongodb.com/docs/manual/tutorial/create-tailable-cursor/
 * @api public
  we need to support the tailable({ awaitData : true }) as well as the// we n ...  as the tailable(true, {awaitData :true}) syntax that mquery does not support// tail ... support backwards compat, see gh-10875// back ... h-10875 For backwards compatibility// For  ... ibility
 * Declares an intersects query for `geometry()`.
 *
 * #### Example:
 *
 *     query.where('path').intersects().geometry({
 *       type: 'LineString',
 *       coordinates: [[180.0, 11.0], [180, 9.0]]
 *     });
 *
 *     query.where('path').intersects({
 *       type: 'LineString',
 *       coordinates: [[180.0, 11.0], [180, 9.0]]
 *     });
 *
 * #### Note:
 *
 * **MUST** be used after `where()`.
 *
 * #### Note:
 *
 * In Mongoose 3.7, `intersects` changed from a getter to a function. If you need the old syntax, use [this](https://github.com/ebensing/mongoose-within).
 *
 * @method intersects
 * @memberOf Query
 * @instance
 * @param {Object} [arg]
 * @return {Query} this
 * @see $geometry https://www.mongodb.com/docs/manual/reference/operator/geometry/
 * @see geoIntersects https://www.mongodb.com/docs/manual/reference/operator/geoIntersects/
 * @api public
 
 * Specifies a `$geometry` condition
 *
 * #### Example:
 *
 *     const polyA = [[[ 10, 20 ], [ 10, 40 ], [ 30, 40 ], [ 30, 20 ]]]
 *     query.where('loc').within().geometry({ type: 'Polygon', coordinates: polyA })
 *
 *     // or
 *     const polyB = [[ 0, 0 ], [ 1, 1 ]]
 *     query.where('loc').within().geometry({ type: 'LineString', coordinates: polyB })
 *
 *     // or
 *     const polyC = [ 0, 0 ]
 *     query.where('loc').within().geometry({ type: 'Point', coordinates: polyC })
 *
 *     // or
 *     query.where('loc').intersects().geometry({ type: 'Point', coordinates: polyC })
 *
 * The argument is assigned to the most recent path passed to `where()`.
 *
 * #### Note:
 *
 * `geometry()` **must** come after either `intersects()` or `within()`.
 *
 * The `object` argument must contain `type` and `coordinates` properties.
 * - type {String}
 * - coordinates {Array}
 *
 * @method geometry
 * @memberOf Query
 * @instance
 * @param {Object} object Must contain a `type` property which is a String and a `coordinates` property which is an Array. See the examples.
 * @return {Query} this
 * @see $geometry https://www.mongodb.com/docs/manual/reference/operator/geometry/
 * @see Geospatial Support Enhancements https://www.mongodb.com/docs/manual/release-notes/2.4/#geospatial-support-enhancements
 * @see MongoDB Geospatial Indexing https://www.mongodb.com/docs/manual/core/geospatial-indexes/
 * @api public
 
 * Specifies a `$near` or `$nearSphere` condition
 *
 * These operators return documents sorted by distance.
 *
 * #### Example:
 *
 *     query.where('loc').near({ center: [10, 10] });
 *     query.where('loc').near({ center: [10, 10], maxDistance: 5 });
 *     query.where('loc').near({ center: [10, 10], maxDistance: 5, spherical: true });
 *     query.near('loc', { center: [10, 10], maxDistance: 5 });
 *
 * @method near
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Object} val
 * @return {Query} this
 * @see $near https://www.mongodb.com/docs/manual/reference/operator/near/
 * @see $nearSphere https://www.mongodb.com/docs/manual/reference/operator/nearSphere/
 * @see $maxDistance https://www.mongodb.com/docs/manual/reference/operator/maxDistance/
 * @see MongoDB Geospatial Indexing https://www.mongodb.com/docs/manual/core/geospatial-indexes/
 * @api public
 
 * Overwriting mquery is needed to support a couple different near() forms found in older
 * versions of mongoose
 * near([1,1])
 * near(1,1)
 * near(field, [1,2])
 * near(field, 1, 2)
 * In addition to all of the normal forms supported by mquery
 *
 * @method near
 * @memberOf Query
 * @instance
 * @api private
  TODO refactor// TODO refactor just passing a path// just ...  a path
 * _DEPRECATED_ Specifies a `$nearSphere` condition
 *
 * #### Example:
 *
 *     query.where('loc').nearSphere({ center: [10, 10], maxDistance: 5 });
 *
 * **Deprecated.** Use `query.near()` instead with the `spherical` option set to `true`.
 *
 * #### Example:
 *
 *     query.where('loc').near({ center: [10, 10], spherical: true });
 *
 * @deprecated
 * @see near() https://mongoosejs.com/docs/api/query.html#Query.prototype.near()
 * @see $near https://www.mongodb.com/docs/manual/reference/operator/near/
 * @see $nearSphere https://www.mongodb.com/docs/manual/reference/operator/nearSphere/
 * @see $maxDistance https://www.mongodb.com/docs/manual/reference/operator/maxDistance/
 /**\n *  ... ce/\n */
 * Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js)
 * This function *only* works for `find()` queries.
 * You do not need to call this function explicitly, the JavaScript runtime
 * will call it for you.
 *
 * #### Example:
 *
 *     for await (const doc of Model.aggregate([{ $sort: { name: 1 } }])) {
 *       console.log(doc.name);
 *     }
 *
 * Node.js 10.x supports async iterators natively without any flags. You can
 * enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).
 *
 * **Note:** This function is not if `Symbol.asyncIterator` is undefined. If
 * `Symbol.asyncIterator` is undefined, that means your Node.js version does not
 * support async iterators.
 *
 * @method [Symbol.asyncIterator]
 * @memberOf Query
 * @instance
 * @api public
 
 * Specifies a `$polygon` condition
 *
 * #### Example:
 *
 *     query.where('loc').within().polygon([10, 20], [13, 25], [7, 15]);
 *     query.polygon('loc', [10, 20], [13, 25], [7, 15]);
 *
 * @method polygon
 * @memberOf Query
 * @instance
 * @param {String|Array} [path]
 * @param {...Array|Object} [coordinatePairs]
 * @return {Query} this
 * @see $polygon https://www.mongodb.com/docs/manual/reference/operator/polygon/
 * @see MongoDB Geospatial Indexing https://www.mongodb.com/docs/manual/core/geospatial-indexes/
 * @api public
 
 * Specifies a `$box` condition
 *
 * #### Example:
 *
 *     const lowerLeft = [40.73083, -73.99756]
 *     const upperRight= [40.741404,  -73.988135]
 *
 *     query.where('loc').within().box(lowerLeft, upperRight)
 *     query.box({ ll : lowerLeft, ur : upperRight })
 *
 * @method box
 * @memberOf Query
 * @instance
 * @see $box https://www.mongodb.com/docs/manual/reference/operator/box/
 * @see within() Query#within https://mongoosejs.com/docs/api/query.html#Query.prototype.within()
 * @see MongoDB Geospatial Indexing https://www.mongodb.com/docs/manual/core/geospatial-indexes/
 * @param {Object|Array<Number>} val1 Lower Left Coordinates OR a object of lower-left(ll) and upper-right(ur) Coordinates
 * @param {Array<Number>} [val2] Upper Right Coordinates
 * @return {Query} this
 * @api public
 
 * this is needed to support the mongoose syntax of:
 * box(field, { ll : [x,y], ur : [x2,y2] })
 * box({ ll : [x,y], ur : [x2,y2] })
 *
 * @method box
 * @memberOf Query
 * @instance
 * @api private
 
 * Specifies a `$center` or `$centerSphere` condition.
 *
 * #### Example:
 *
 *     const area = { center: [50, 50], radius: 10, unique: true }
 *     query.where('loc').within().circle(area)
 *     // alternatively
 *     query.circle('loc', area);
 *
 *     // spherical calculations
 *     const area = { center: [50, 50], radius: 10, unique: true, spherical: true }
 *     query.where('loc').within().circle(area)
 *     // alternatively
 *     query.circle('loc', area);
 *
 * @method circle
 * @memberOf Query
 * @instance
 * @param {String} [path]
 * @param {Object} area
 * @return {Query} this
 * @see $center https://www.mongodb.com/docs/manual/reference/operator/center/
 * @see $centerSphere https://www.mongodb.com/docs/manual/reference/operator/centerSphere/
 * @see $geoWithin https://www.mongodb.com/docs/manual/reference/operator/geoWithin/
 * @see MongoDB Geospatial Indexing https://www.mongodb.com/docs/manual/core/geospatial-indexes/
 * @api public
 
 * _DEPRECATED_ Alias for [circle](https://mongoosejs.com/docs/api/query.html#Query.prototype.circle())
 *
 * **Deprecated.** Use [circle](https://mongoosejs.com/docs/api/query.html#Query.prototype.circle()) instead.
 *
 * @deprecated
 * @method center
 * @memberOf Query
 * @instance
 * @api public
 
 * _DEPRECATED_ Specifies a `$centerSphere` condition
 *
 * **Deprecated.** Use [circle](https://mongoosejs.com/docs/api/query.html#Query.prototype.circle()) instead.
 *
 * #### Example:
 *
 *     const area = { center: [50, 50], radius: 10 };
 *     query.where('loc').within().centerSphere(area);
 *
 * @deprecated
 * @param {String} [path]
 * @param {Object} val
 * @return {Query} this
 * @see MongoDB Geospatial Indexing https://www.mongodb.com/docs/manual/core/geospatial-indexes/
 * @see $centerSphere https://www.mongodb.com/docs/manual/reference/operator/centerSphere/
 * @api public
 
 * Determines if field selection has been made.
 *
 * @method selected
 * @memberOf Query
 * @instance
 * @return {Boolean}
 * @api public
 
 * Determines if inclusive field selection has been made.
 *
 *     query.selectedInclusively(); // false
 *     query.select('name');
 *     query.selectedInclusively(); // true
 *
 * @method selectedInclusively
 * @memberOf Query
 * @instance
 * @return {Boolean}
 * @api public
 
 * Determines if exclusive field selection has been made.
 *
 *     query.selectedExclusively(); // false
 *     query.select('-name');
 *     query.selectedExclusively(); // true
 *     query.selectedInclusively(); // false
 *
 * @method selectedExclusively
 * @memberOf Query
 * @instance
 * @return {Boolean}
 * @api public
 
 * The model this query is associated with.
 *
 * #### Example:
 *
 *     const q = MyModel.find();
 *     q.model === MyModel; // true
 *
 * @api public
 * @property model
 * @memberOf Query
 * @instance
 !
 * Export
 /*!\n * Export\n */'./cursor/queryCursor''./helpers/query/handleReadPreferenceAliases''./helpers/update/castArrayFilters''./cast/number''./helpers/query/castUpdate''./helpers/projection/isInclusive''./helpers/projection/isSubpath''./helpers/projection/parseProjection''./helpers/update/removeUnusedArrayFilters''./helpers/query/sanitizeProjection''./helpers/query/selectPopulatedFields''./helpers/setDefaultsOnInsert''./helpers/specialProperties'updateValidators'./helpers/updateValidators''./constants'queryOptionMethods'batchSize''comment''explain''hint''lean''projection''read''slice''sort''tailable''writeConcern'opToThunk'_countDocuments''__distinct''_estimatedDocumentCount''_find''_findOne''_findOneAndReplace''_findOneAndUpdate''_replaceOne''_updateMany''_updateOne''_deleteMany''_deleteOne''_findOneAndDelete'_hooks_executionStack_mapreduce$useProjectionisEmptyFiltercheckRequireFilterrequireFilter'Empty or invalid filter not allowed with requireFilter enabled'findOneAndRemove'_distinct'use$geoWithintoConstructorcollCustomQuerycriteria_validateOp_distinct_collection_validate_ensurePathvalidOpsSet'Query has invalid `op`: "''mod'conds'Invalid select: select only takes 1 argument''sanitizeProjection'sanitizeValueselectedExclusively'Invalid select() argument. Must be string or object.'schemaLevelProjections.distinct('', getOptions'Options must be an object, got "'_numPopulate'setDefaultsOnInsert''overwriteDiscriminatorKey''overwriteImmutable''defaults''schemaLevelProjections'verbosegetFiltersetQuery_fieldsForExec_updateForExec'readPreference'_applyPaths_castFields_unsetCastError_castConditionssanitizeFilterOpt_find_applyTranslateAliasescompleteManyOptions_completeManyLean_completeMany'Query.prototype.find() no longer accepts a callback'canMergeprepareDiscriminatorCriteriaomit_completeOneincludeResultMetadata_completeOneLeancompleteOnerawDoc_findOne'Query.prototype.findOne() no longer accepts a callback'_countDocumentsapplyTranslateAliases_estimatedDocumentCount'Query.prototype.estimatedDocumentCount() no longer accepts a callback''Query.prototype.countDocuments() no longer accepts a callback'__distinct'Query.prototype.distinct() no longer accepts a callback''sort() takes at most 2 arguments''sort() options argument must be an object or nullish''Invalid sort() argument, must be array of arrays'_handleSortValue'Invalid sort() argument. Must be a string, object, array, or map.''Invalid sort value: { ''Query.prototype.deleteOne() no longer accepts a callback'_deleteOne'Query.prototype.deleteMany() no longer accepts a callback'_deleteMany'Query.prototype.findOneAndUpdate() no longer accepts a callback'_mergeUpdatereturnOriginalreturnDocument_findOneAndUpdateconvertNewToReturnDocument_castUpdaterunValidators_getOption'runValidators''Query.prototype.findOneAndDelete() no longer accepts a callback'_findOneAndDelete'Query.prototype.findOneAndReplace() no longer accepts a callback'_findOneAndReplacemodelOpts'new''after''before''returnOriginal''Cannot mix array and object updates'_updateThunkcastedQueryisOverwriting'Query.prototype.validate() no longer accepts a callback'_executePreHooks_executePostHooks_updateMany_updateOne_replaceOneorFail_orFailErrordeletedCount'Query.prototype.exec() no longer accepts a callback''Query must have `op` before executing''Query must have an associated model before executing'thunk'Invalid field "" passed to sort()''Query was already executed: 'skipOriginalStackTracesoriginalStack_executePreExecHooks_executePostExecHooks'exec'Query { 'upsert'getPopulatedPaths_getPopulatedPathselemMatchKeys_selectPopulatedPaths'selectPopulatedPaths'selectPopulatedPathstailable'awaitData''awaitdata'spherecenterspherical'invalid argument'queryAsyncIteratorboxllurcirclecenterSphereQuery constructor used for building queries. You do not need
to instantiate a `Query` directly. Instead use Model functions like
[`Model.find()`](https://mongoosejs.com/docs/api/model.html#Model.find()).

#### Example:

const query = MyModel.find(); // `query` is an instance of `Query`
query.setOptions({ lean : true });
query.collection(MyModel.collection);
query.where('age').gte(21).exec(callback);

// You can instantiate a query directly. There is no need to do
// this unless you're an advanced user with a very good reason to.
const query = new mongoose.Query();Mongoose collection
Flag to opt out of using `$geoWithin`.

```javascript
mongoose.Query.use$geoWithin = false;
```

MongoDB 2.4 deprecated the use of `$within`, replacing it with `$geoWithin`. Mongoose uses `$geoWithin` by default (which is 100% backward compatible with `$within`). If you are running an older version of MongoDB, set this flag to `false` so your `within()` queries continue to work.geoWithin https://www.mongodb.com/docs/manual/reference/operator/geoWithin/
@defaulttrue
Converts this query to a customized, reusable query constructor with all arguments and options retained.

#### Example:

// Create a query for adventure movies and read from the primary
// node in the replica-set unless it is down, in which case we'll
// read from a secondary node.
const query = Movie.find({ tags: 'adventure' }).read('primaryPreferred');

// create a custom Query constructor based off these settings
const Adventure = query.toConstructor();

// further narrow down our query results while still using the previous settings
await Adventure().where({ name: /^Life/ }).exec();

// since Adventure is a stand-alone constructor we can also add our own
// helper methods and getters without impacting global queries
Adventure.prototype.startsWith = function (prefix) {
this.where({ name: new RegExp('^' + prefix) })
return this;
}
Object.defineProperty(Adventure.prototype, 'highlyRated', {
get: function () {
this.where({ rating: { $gt: 4.5 }});
return this;
}
})
await Adventure().highlyRated.startsWith('Life').exec();subclass-of-Query
Make a copy of this query so you can re-execute it.

#### Example:

const q = Book.findOne({ title: 'Casino Royale' });
await q.exec();
await q.exec(); // Throws an error because you can't execute a query twice

await q.clone().exec(); // Workscopy
Specifies a javascript function or expression to pass to MongoDBs query system.

#### Example:

query.$where('this.comments.length === 10 || this.name.length === 5')

// or

query.$where(function () {
return this.comments.length === 10 || this.name.length === 5;
})

#### Note:

Only use `$where` when you have a condition that cannot be met using other MongoDB operators like `$lt`.
**Be sure to read about all of [its caveats](https://www.mongodb.com/docs/manual/reference/operator/where/) before using.**$where https://www.mongodb.com/docs/manual/reference/operator/where/
javascript string or function
Specifies a `path` for use with chaining.

#### Example:

// instead of writing:
User.find({age: {$gte: 21, $lte: 65}});

// we can instead write:
User.where('age').gte(21).lte(65);

// passing query conditions is permitted
User.find().where({ name: 'vonderful' })

// chaining
User
.where('age').gte(21).lte(65)
.where('name', /^vonderful/i)
.where('friends').slice(10)
.exec()any=Specifies a `$slice` projection for an array.

#### Example:

query.slice('comments', 5); // Returns the first 5 comments
query.slice('comments', -5); // Returns the last 5 comments
query.slice('comments', [10, 5]); // Returns the first 5 comments after the 10-th
query.where('comments').slice(5); // Returns the first 5 comments
query.where('comments').slice([-10, 5]); // Returns the first 5 comments after the 10-th to last

**Note:** If the absolute value of the number of elements to be sliced is greater than the number of elements in the array, all array elements will be returned.

// Given `arr`: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
query.slice('arr', 20); // Returns [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
query.slice('arr', -20); // Returns [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

**Note:** If the number of elements to skip is positive and greater than the number of elements in the array, an empty array will be returned.

// Given `arr`: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
query.slice('arr', [20, 5]); // Returns []

**Note:** If the number of elements to skip is negative and its absolute value is greater than the number of elements in the array, the starting position is the start of the array.

// Given `arr`: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
query.slice('arr', [-20, 5]); // Returns [1, 2, 3, 4, 5]number of elements to slice or array with number of elements to skip and number of elements to slice
(Number|Array)mongodb https://www.mongodb.com/docs/manual/tutorial/query-documents/#projection
$slice https://www.mongodb.com/docs/manual/reference/projection/slice/#prj._S_slice
Specifies the complementary comparison value for paths specified with `where()`

#### Example:

User.where('age').equals(49);

// is the same as

User.where('age', 49);Specifies arguments for an `$or` condition.

#### Example:

query.or([{ color: 'red' }, { status: 'emergency' }]);$or https://www.mongodb.com/docs/manual/reference/operator/or/
array of conditions
Specifies arguments for a `$nor` condition.

#### Example:

query.nor([{ color: 'green' }, { status: 'ok' }]);$nor https://www.mongodb.com/docs/manual/reference/operator/nor/
norSpecifies arguments for a `$and` condition.

#### Example:

query.and([{ color: 'green' }, { status: 'ok' }])$and https://www.mongodb.com/docs/manual/reference/operator/and/
Specifies a `$gt` query condition.

When called with one argument, the most recent path passed to `where()` is used.

#### Example:

Thing.find().where('age').gt(21);

// or
Thing.find().gt('age', 21);$gt https://www.mongodb.com/docs/manual/reference/operator/gt/
Specifies a `$gte` query condition.

When called with one argument, the most recent path passed to `where()` is used.$gte https://www.mongodb.com/docs/manual/reference/operator/gte/
Specifies a `$lt` query condition.

When called with one argument, the most recent path passed to `where()` is used.$lt https://www.mongodb.com/docs/manual/reference/operator/lt/
Specifies a `$lte` query condition.

When called with one argument, the most recent path passed to `where()` is used.$lte https://www.mongodb.com/docs/manual/reference/operator/lte/
Specifies a `$ne` query condition.

When called with one argument, the most recent path passed to `where()` is used.$ne https://www.mongodb.com/docs/manual/reference/operator/ne/
neSpecifies an `$in` query condition.

When called with one argument, the most recent path passed to `where()` is used.$in https://www.mongodb.com/docs/manual/reference/operator/in/
Specifies an `$nin` query condition.

When called with one argument, the most recent path passed to `where()` is used.$nin https://www.mongodb.com/docs/manual/reference/operator/nin/
ninSpecifies an `$all` query condition.

When called with one argument, the most recent path passed to `where()` is used.

#### Example:

MyModel.find().where('pets').all(['dog', 'cat', 'ferret']);
// Equivalent:
MyModel.find().all('pets', ['dog', 'cat', 'ferret']);$all https://www.mongodb.com/docs/manual/reference/operator/all/
Specifies a `$size` query condition.

When called with one argument, the most recent path passed to `where()` is used.

#### Example:

const docs = await MyModel.where('tags').size(0).exec();
assert(Array.isArray(docs));
console.log('documents with 0 tags', docs);$size https://www.mongodb.com/docs/manual/reference/operator/size/
Specifies a `$regex` query condition.

When called with one argument, the most recent path passed to `where()` is used.$regex https://www.mongodb.com/docs/manual/reference/operator/regex/
Specifies a `maxDistance` query condition.

When called with one argument, the most recent path passed to `where()` is used.$maxDistance https://www.mongodb.com/docs/manual/reference/operator/maxDistance/
maxDistanceSpecifies a `$mod` condition, filters documents for documents whose
`path` property is a number that is equal to `remainder` modulo `divisor`.

#### Example:

// All find products whose inventory is odd
Product.find().mod('inventory', [2, 1]);
Product.find().where('inventory').mod([2, 1]);
// This syntax is a little strange, but supported.
Product.find().where('inventory').mod(2, 1);must be of length 2, first element is `divisor`, 2nd element is `remainder`.
$mod https://www.mongodb.com/docs/manual/reference/operator/mod/
Specifies an `$exists` condition

#### Example:

// { name: { $exists: true }}
Thing.where('name').exists()
Thing.where('name').exists(true)
Thing.find().exists('name')

// { name: { $exists: false }}
Thing.where('name').exists(false);
Thing.find().exists('name', false);$exists https://www.mongodb.com/docs/manual/reference/operator/exists/
Specifies an `$elemMatch` condition

#### Example:

query.elemMatch('comment', { author: 'autobot', votes: {$gte: 5}})

query.where('comment').elemMatch({ author: 'autobot', votes: {$gte: 5}})

query.elemMatch('comment', function (elem) {
elem.where('author').equals('autobot');
elem.where('votes').gte(5);
})

query.where('comment').elemMatch(function (elem) {
elem.where({ author: 'autobot' });
elem.where('votes').gte(5);
})elemMatch(String|Object|Function)$elemMatch https://www.mongodb.com/docs/manual/reference/operator/elemMatch/
Defines a `$within` or `$geoWithin` argument for geo-spatial queries.

#### Example:

query.where(path).within().box()
query.where(path).within().circle()
query.where(path).within().geometry()

query.where('loc').within({ center: [50,50], radius: 10, unique: true, spherical: true });
query.where('loc').within({ box: [[40.73, -73.9], [40.7, -73.988]] });
query.where('loc').within({ polygon: [[],[],[],[]] });

query.where('loc').within([], [], []) // polygon
query.where('loc').within([], []) // box
query.where('loc').within({ type: 'LineString', coordinates: [...] }); // geometry

**MUST** be used after `where()`.

#### Note:

As of Mongoose 3.7, `$geoWithin` is always used for queries. To change this behavior, see [Query.use$geoWithin](https://mongoosejs.com/docs/api/query.html#Query.prototype.use$geoWithin).

#### Note:

In Mongoose 3.7, `within` changed from a getter to a function. If you need the old syntax, use [this](https://github.com/ebensing/mongoose-within).$polygon https://www.mongodb.com/docs/manual/reference/operator/polygon/
$box https://www.mongodb.com/docs/manual/reference/operator/box/
$geometry https://www.mongodb.com/docs/manual/reference/operator/geometry/
$center https://www.mongodb.com/docs/manual/reference/operator/center/
$centerSphere https://www.mongodb.com/docs/manual/reference/operator/centerSphere/
Specifies the maximum number of documents the query will return.

#### Example:

query.limit(20);

#### Note:

Cannot be used with `distinct()`Specifies the number of documents to skip.

#### Example:

query.skip(100).limit(20);

#### Note:

Cannot be used with `distinct()`cursor.skip https://www.mongodb.com/docs/manual/reference/method/cursor.skip/
Specifies the batchSize option.

#### Example:

query.batchSize(100)

#### Note:

Cannot be used with `distinct()`batchSize https://www.mongodb.com/docs/manual/reference/method/cursor.batchSize/
Specifies the `comment` option.

#### Example:

query.comment('login query')

#### Note:

Cannot be used with `distinct()`comment https://www.mongodb.com/docs/manual/reference/operator/comment/
Sets query hints.

#### Example:

query.hint({ indexA: 1, indexB: -1 });

#### Note:

Cannot be used with `distinct()`a hint object
$hint https://www.mongodb.com/docs/manual/reference/operator/hint/
Get/set the current projection (AKA fields). Pass `null` to remove the
current projection.

Unlike `projection()`, the `select()` function modifies the current
projection in place. This function overwrites the existing projection.

#### Example:

const q = Model.find();
q.projection(); // null

q.select('a b');
q.projection(); // { a: 1, b: 1 }

q.projection({ c: 1 });
q.projection(); // { c: 1 }

q.projection(null);
q.projection(); // null(Object|null)the current projection
Specifies which document fields to include or exclude (also known as the query "projection")

When using string syntax, prefixing a path with `-` will flag that path as excluded. When a path does not have the `-` prefix, it is included. Lastly, if a path is prefixed with `+`, it forces inclusion of the path, which is useful for paths excluded at the [schema level](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.select()).

A projection _must_ be either inclusive or exclusive. In other words, you must
either list the fields to include (which excludes all others), or list the fields
to exclude (which implies all other fields are included). The [`_id` field is the only exception because MongoDB includes it by default](https://www.mongodb.com/docs/manual/tutorial/project-fields-from-query-results/#suppress-id-field).

#### Example:

// include a and b, exclude other fields
query.select('a b');
// Equivalent syntaxes:
query.select(['a', 'b']);
query.select({ a: 1, b: 1 });

// exclude c and d, include other fields
query.select('-c -d');

// Use `+` to override schema-level `select: false` without making the
// projection inclusive.
const schema = new Schema({
foo: { type: String, select: false },
bar: String
});
// ...
query.select('+foo'); // Override foo's `select: false` without excluding `bar`

// or you may use object notation, useful when
// you have keys already prefixed with a "-"
query.select({ a: 1, b: 1 });
query.select({ c: 0, d: 0 });

Additional calls to select can override the previous selection:
query.select({ a: 1, b: 1 }).select({ b: 0 }); // selection is now { a: 1 }
query.select({ a: 0, b: 0 }).select({ b: 1 }); // selection is now { a: 0 }SchemaType https://mongoosejs.com/docs/api/schematype.html
Enable or disable schema level projections for this query. Enabled by default.
Set to `false` to include fields with `select: false` in the query result by default.

#### Example:

const userSchema = new Schema({
email: { type: String, required: true },
passwordHash: { type: String, select: false, required: true }
});
const UserModel = mongoose.model('User', userSchema);

const doc = await UserModel.findOne().orFail().schemaLevelProjections(false);

// Contains password hash, because `schemaLevelProjections()` overrides `select: false`
doc.passwordHash;SchemaTypeOptions https://mongoosejs.com/docs/schematypes.html#all-schema-types
Sets this query's `sanitizeProjection` option. If set, `sanitizeProjection` does
two things:

1. Enforces that projection values are numbers, not strings.
2. Prevents using `+` syntax to override properties that are deselected by default.

With `sanitizeProjection()`, you can pass potentially untrusted user data to `.select()`.

#### Example

const userSchema = new Schema({
name: String,
password: { type: String, select: false }
});
const UserModel = mongoose.model('User', userSchema);
const { _id } = await UserModel.create({ name: 'John', password: 'secret' })

// The MongoDB server has special handling for string values that start with '$'
// in projections, which can lead to unexpected leaking of sensitive data.
let doc = await UserModel.findOne().select({ name: '$password' });
doc.name; // 'secret'
doc.password; // undefined

// With `sanitizeProjection`, Mongoose forces all projection values to be numbers
doc = await UserModel.findOne().sanitizeProjection(true).select({ name: '$password' });
doc.name; // 'John'
doc.password; // undefined

// By default, Mongoose supports projecting in `password` using `+password`
doc = await UserModel.findOne().select('+password');
doc.password; // 'secret'

// With `sanitizeProjection`, Mongoose prevents projecting in `password` and other
// fields that have `select: false` in the schema.
doc = await UserModel.findOne().sanitizeProjection(true).select('+password');
doc.password; // undefinedsanitizeProjection https://thecodebarbarian.com/whats-new-in-mongoose-5-13-sanitizeprojection.html
Determines the MongoDB nodes from which to read.

#### Preferences:

```
primary - (default) Read from primary only. Operations will produce an error if primary is unavailable. Cannot be combined with tags.
secondary            Read from secondary if available, otherwise error.
primaryPreferred     Read from primary if available, otherwise a secondary.
secondaryPreferred   Read from a secondary if available, otherwise read from the primary.
nearest              All operations read from among the nearest candidates, but unlike other modes, this option will include both the primary and all secondaries in the random selection.
```

Aliases

```
p   primary
pp  primaryPreferred
s   secondary
sp  secondaryPreferred
n   nearest
```

#### Example:

new Query().read('primary')
new Query().read('p')  // same as primary

new Query().read('primaryPreferred')
new Query().read('pp') // same as primaryPreferred

new Query().read('secondary')
new Query().read('s')  // same as secondary

new Query().read('secondaryPreferred')
new Query().read('sp') // same as secondaryPreferred

new Query().read('nearest')
new Query().read('n')  // same as nearest

// read from secondaries with matching tags
new Query().read('s', [{ dc:'sf', s: 1 },{ dc:'ma', s: 2 }])

Read more about how to use read preferences [here](https://www.mongodb.com/docs/manual/applications/replication/#read-preference).one of the listed preference options or aliases
optional tags for this query
mongodb https://www.mongodb.com/docs/manual/applications/replication/#read-preference
Overwrite default `.toString` to make logging more usefulSets the [MongoDB session](https://www.mongodb.com/docs/manual/reference/server-sessions/)
associated with this query. Sessions are how you mark a query as part of a
[transaction](https://mongoosejs.com/docs/transactions.html).

Calling `session(null)` removes the session from this query.

#### Example:

const s = await mongoose.startSession();
await mongoose.model('Person').findOne({ name: 'Axl Rose' }).session(s);from `await conn.startSession()`
Connection.prototype.startSession() https://mongoosejs.com/docs/api/connection.html#Connection.prototype.startSession()
mongoose.startSession() https://mongoosejs.com/docs/api/mongoose.html#Mongoose.prototype.startSession()
Sets the 3 write concern parameters for this query:

- `w`: Sets the specified number of `mongod` servers, or tag set of `mongod` servers, that must acknowledge this write before this write is considered successful.
- `j`: Boolean, set to `true` to request acknowledgement that this operation has been persisted to MongoDB's on-disk journal.
- `wtimeout`: If [`w > 1`](https://mongoosejs.com/docs/api/query.html#Query.prototype.w()), the maximum amount of time to wait for this write to propagate through the replica set before this operation fails. The default is `0`, which means no timeout.

This option is only valid for operations that write to the database:

- `deleteOne()`
- `deleteMany()`
- `findOneAndDelete()`
- `findOneAndReplace()`
- `findOneAndUpdate()`
- `updateOne()`
- `updateMany()`

Defaults to the schema's [`writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)

#### Example:

// The 'majority' option means the `deleteOne()` promise won't resolve
// until the `deleteOne()` has propagated to the majority of the replica set
await mongoose.model('Person').
deleteOne({ name: 'Ned Stark' }).
writeConcern({ w: 'majority' });the write concern value to set
WriteConcernSettings https://mongodb.github.io/node-mongodb-native/4.9/interfaces/WriteConcernSettings.html
Sets the specified number of `mongod` servers, or tag set of `mongod` servers,
that must acknowledge this write before this write is considered successful.
This option is only valid for operations that write to the database:

- `deleteOne()`
- `deleteMany()`
- `findOneAndDelete()`
- `findOneAndReplace()`
- `findOneAndUpdate()`
- `updateOne()`
- `updateMany()`

Defaults to the schema's [`writeConcern.w` option](https://mongoosejs.com/docs/guide.html#writeConcern)

#### Example:

// The 'majority' option means the `deleteOne()` promise won't resolve
// until the `deleteOne()` has propagated to the majority of the replica set
await mongoose.model('Person').
deleteOne({ name: 'Ned Stark' }).
w('majority');0 for fire-and-forget, 1 for acknowledged by one server, 'majority' for majority of the replica set, or [any of the more advanced options](https://www.mongodb.com/docs/manual/reference/write-concern/#w-option).
mongodb https://www.mongodb.com/docs/manual/reference/write-concern/#w-option
Requests acknowledgement that this operation has been persisted to MongoDB's
on-disk journal.
This option is only valid for operations that write to the database:

- `deleteOne()`
- `deleteMany()`
- `findOneAndDelete()`
- `findOneAndReplace()`
- `findOneAndUpdate()`
- `updateOne()`
- `updateMany()`

Defaults to the schema's [`writeConcern.j` option](https://mongoosejs.com/docs/guide.html#writeConcern)

#### Example:

await mongoose.model('Person').deleteOne({ name: 'Ned Stark' }).j(true);mongodb https://www.mongodb.com/docs/manual/reference/write-concern/#j-option
If [`w > 1`](https://mongoosejs.com/docs/api/query.html#Query.prototype.w()), the maximum amount of time to
wait for this write to propagate through the replica set before this
operation fails. The default is `0`, which means no timeout.

This option is only valid for operations that write to the database:

- `deleteOne()`
- `deleteMany()`
- `findOneAndDelete()`
- `findOneAndReplace()`
- `findOneAndUpdate()`
- `updateOne()`
- `updateMany()`

Defaults to the schema's [`writeConcern.wtimeout` option](https://mongoosejs.com/docs/guide.html#writeConcern)

#### Example:

// The `deleteOne()` promise won't resolve until this `deleteOne()` has
// propagated to at least `w = 2` members of the replica set. If it takes
// longer than 1 second, this `deleteOne()` will fail.
await mongoose.model('Person').
deleteOne({ name: 'Ned Stark' }).
w(2).
wtimeout(1000);number of milliseconds to wait
mongodb https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout
Sets the readConcern option for the query.

#### Example:

new Query().readConcern('local')
new Query().readConcern('l')  // same as local

new Query().readConcern('available')
new Query().readConcern('a')  // same as available

new Query().readConcern('majority')
new Query().readConcern('m')  // same as majority

new Query().readConcern('linearizable')
new Query().readConcern('lz') // same as linearizable

new Query().readConcern('snapshot')
new Query().readConcern('s')  // same as snapshot


#### Read Concern Level:

```
local         MongoDB 3.2+ The query returns from the instance with no guarantee guarantee that the data has been written to a majority of the replica set members (i.e. may be rolled back).
available     MongoDB 3.6+ The query returns from the instance with no guarantee guarantee that the data has been written to a majority of the replica set members (i.e. may be rolled back).
majority      MongoDB 3.2+ The query returns the data that has been acknowledged by a majority of the replica set members. The documents returned by the read operation are durable, even in the event of failure.
linearizable  MongoDB 3.4+ The query returns data that reflects all successful majority-acknowledged writes that completed prior to the start of the read operation. The query may wait for concurrently executing writes to propagate to a majority of replica set members before returning results.
snapshot      MongoDB 4.0+ Only available for operations within multi-document transactions. Upon transaction commit with write concern "majority", the transaction operations are guaranteed to have read from a snapshot of majority-committed data.
```

Aliases

```
l   local
a   available
m   majority
lz  linearizable
s   snapshot
```

Read more about how to use read concern [here](https://www.mongodb.com/docs/manual/reference/read-concern/).Gets query options.

#### Example:

const query = new Query();
query.limit(10);
query.setOptions({ maxTimeMS: 1000 });
query.getOptions(); // { limit: 10, maxTimeMS: 1000 }the options
Sets query options. Some options only make sense for certain operations.

#### Options:

The following options are only for `find()`:

- [tailable](https://www.mongodb.com/docs/manual/core/tailable-cursors/)
- [limit](https://www.mongodb.com/docs/manual/reference/method/cursor.limit/)
- [skip](https://www.mongodb.com/docs/manual/reference/method/cursor.skip/)
- [allowDiskUse](https://www.mongodb.com/docs/manual/reference/method/cursor.allowDiskUse/)
- [batchSize](https://www.mongodb.com/docs/manual/reference/method/cursor.batchSize/)
- [readPreference](https://www.mongodb.com/docs/manual/applications/replication/#read-preference)
- [hint](https://www.mongodb.com/docs/manual/reference/method/cursor.hint/)
- [comment](https://www.mongodb.com/docs/manual/reference/method/cursor.comment/)

The following options are only for write operations: `updateOne()`, `updateMany()`, `replaceOne()`, `findOneAndUpdate()`, and `findByIdAndUpdate()`:

- [upsert](https://www.mongodb.com/docs/manual/reference/method/db.collection.update/)
- [writeConcern](https://www.mongodb.com/docs/manual/reference/method/db.collection.update/)
- [timestamps](https://mongoosejs.com/docs/guide.html#timestamps): If `timestamps` is set in the schema, set this option to `false` to skip timestamps for that particular update. Has no effect if `timestamps` is not enabled in the schema options.
- overwriteDiscriminatorKey: allow setting the discriminator key in the update. Will use the correct discriminator schema if the update changes the discriminator key.
- overwriteImmutable: allow overwriting properties that are set to `immutable` in the schema. Defaults to false.

The following options are only for `find()`, `findOne()`, `findById()`, `findOneAndUpdate()`, `findOneAndReplace()`, `findOneAndDelete()`, and `findByIdAndUpdate()`:

- [lean](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean())
- [populate](https://mongoosejs.com/docs/populate.html)
- [projection](https://mongoosejs.com/docs/api/query.html#Query.prototype.projection())
- sanitizeProjection
- useBigInt64

The following options are only for all operations **except** `updateOne()`, `updateMany()`, `deleteOne()`, and `deleteMany()`:

- [maxTimeMS](https://www.mongodb.com/docs/manual/reference/operator/meta/maxTimeMS/)

The following options are for `find()`, `findOne()`, `findOneAndUpdate()`, `findOneAndDelete()`, `updateOne()`, and `deleteOne()`:

- [sort](https://www.mongodb.com/docs/manual/reference/method/cursor.sort/)

The following options are for `findOneAndUpdate()` and `findOneAndDelete()`

- includeResultMetadata

The following options are for all operations:

- [strict](https://mongoosejs.com/docs/guide.html#strict)
- [collation](https://www.mongodb.com/docs/manual/reference/collation/)
- [session](https://www.mongodb.com/docs/manual/reference/server-sessions/)
- [explain](https://www.mongodb.com/docs/manual/reference/method/cursor.explain/)Sets the [`explain` option](https://www.mongodb.com/docs/manual/reference/method/cursor.explain/),
which makes this query return detailed execution stats instead of the actual
query result. This method is useful for determining what index your queries
use.

Calling `query.explain(v)` is equivalent to `query.setOptions({ explain: v })`

#### Example:

const query = new Query();
const res = await query.find({ a: 1 }).explain('queryPlanner');
console.log(res);The verbosity mode. Either 'queryPlanner', 'executionStats', or 'allPlansExecution'. The default is 'queryPlanner'
Sets the [`allowDiskUse` option](https://www.mongodb.com/docs/manual/reference/method/cursor.allowDiskUse/),
which allows the MongoDB server to use more than 100 MB for this query's `sort()`. This option can
let you work around `QueryExceededMemoryLimitNoDiskUseAllowed` errors from the MongoDB server.

Note that this option requires MongoDB server >= 4.4. Setting this option is a no-op for MongoDB 4.2
and earlier.

Calling `query.allowDiskUse(v)` is equivalent to `query.setOptions({ allowDiskUse: v })`

#### Example:

await query.find().sort({ name: 1 }).allowDiskUse(true);
// Equivalent:
await query.find().sort({ name: 1 }).allowDiskUse();Enable/disable `allowDiskUse`. If called with 0 arguments, sets `allowDiskUse: true`
Sets the [maxTimeMS](https://www.mongodb.com/docs/manual/reference/method/cursor.maxTimeMS/)
option. This will tell the MongoDB server to abort if the query or write op
has been running for more than `ms` milliseconds.

Calling `query.maxTimeMS(v)` is equivalent to `query.setOptions({ maxTimeMS: v })`

#### Example:

const query = new Query();
// Throws an error 'operation exceeded time limit' as long as there's
// >= 1 doc in the queried collection
const res = await query.find({ $where: 'sleep(1000) || true' }).maxTimeMS(100);The number of milliseconds
Returns the current query filter (also known as conditions) as a [POJO](https://masteringjs.io/tutorials/fundamentals/pojo).

#### Example:

const query = new Query();
query.find({ a: 1 }).where('b').gt(2);
query.getFilter(); // { a: 1, b: { $gt: 2 } }current query filter
Returns the current query filter. Equivalent to `getFilter()`.

You should use `getFilter()` instead of `getQuery()` where possible. `getQuery()`
will likely be deprecated in a future release.

#### Example:

const query = new Query();
query.find({ a: 1 }).where('b').gt(2);
query.getQuery(); // { a: 1, b: { $gt: 2 } }Sets the query conditions to the provided JSON object.

#### Example:

const query = new Query();
query.find({ a: 1 })
query.setQuery({ a: 2 });
query.getQuery(); // { a: 2 }query conditions
Returns the current update operations as a JSON object.

#### Example:

const query = new Query();
query.updateOne({}, { $set: { a: 5 } });
query.getUpdate(); // { $set: { a: 5 } }current update operations
Sets the current update operation to new value.

#### Example:

const query = new Query();
query.updateOne({}, { $set: { a: 5 } });
query.setUpdate({ $set: { b: 6 } });
query.getUpdate(); // { $set: { b: 6 } }update operation
Returns fields selection for this query.Return an update document with corrected `$set` operations.Makes sure _path is set.

This method is inherited by `mquery`Determines if `conds` can be merged using `mquery().merge()`Returns default options for this query.Sets the lean option.

Documents returned from queries with the `lean` option enabled are plain
javascript objects, not [Mongoose Documents](https://mongoosejs.com/docs/api/document.html). They have no
`save` method, getters/setters, virtuals, or other Mongoose features.

#### Example:

new Query().lean() // true
new Query().lean(true)
new Query().lean(false)

const docs = await Model.find().lean();
docs[0] instanceof mongoose.Document; // false

[Lean is great for high-performance, read-only cases](https://mongoosejs.com/docs/tutorials/lean.html),
especially when combined
with [cursors](https://mongoosejs.com/docs/queries.html#streaming).

If you need virtuals, getters/setters, or defaults with `lean()`, you need
to use a plugin. See:

- [mongoose-lean-virtuals](https://plugins.mongoosejs.io/plugins/lean-virtuals)
- [mongoose-lean-getters](https://plugins.mongoosejs.io/plugins/lean-getters)
- [mongoose-lean-defaults](https://www.npmjs.com/package/mongoose-lean-defaults)boolAdds a `$set` to this query's update without changing the operation.
This is useful for query middleware so you can add an update regardless
of whether you use `updateOne()`, `updateMany()`, `findOneAndUpdate()`, etc.

#### Example:

// Updates `{ $set: { updatedAt: new Date() } }`
new Query().updateOne({}, {}).set('updatedAt', new Date());
new Query().updateMany({}, {}).set({ updatedAt: new Date() });path or object of key/value pairs to set
For update operations, returns the value of a path in the update's `$set`.
Useful for writing getters/setters that can work with both update operations
and `save()`.

#### Example:

const query = Model.updateOne({}, { $set: { name: 'Jean-Luc Picard' } });
query.get('name'); // 'Jean-Luc Picard'path or object of key/value pairs to get
Gets/sets the error flag on this query. If this flag is not null or
undefined, the `exec()` promise will reject without executing.

#### Example:

Query().error(); // Get current error value
Query().error(null); // Unset the current error
Query().error(new Error('test')); // `exec()` will resolve with test
Schema.pre('find', function() {
if (!this.getQuery().userId) {
this.error(new Error('Not allowed to query without setting userId'));
}
});

Note that query casting runs **after** hooks, so cast errors will override
custom errors.

#### Example:

const TestSchema = new Schema({ num: Number });
const TestModel = db.model('Test', TestSchema);
TestModel.find({ num: 'not a number' }).error(new Error('woops')).exec(function(error) {
// `error` will be a cast error because `num` failed to cast
});if set, `exec()` will fail fast before sending the query to MongoDB
(Error|null)Getter/setter around the current mongoose-specific options for this query
Below are the current Mongoose-specific options.

- `populate`: an array representing what paths will be populated. Should have one entry for each call to [`Query.prototype.populate()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.populate())
- `lean`: if truthy, Mongoose will not [hydrate](https://mongoosejs.com/docs/api/model.html#Model.hydrate()) any documents that are returned from this query. See [`Query.prototype.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) for more information.
- `strict`: controls how Mongoose handles keys that aren't in the schema for updates. This option is `true` by default, which means Mongoose will silently strip any paths in the update that aren't in the schema. See the [`strict` mode docs](https://mongoosejs.com/docs/guide.html#strict) for more information.
- `strictQuery`: controls how Mongoose handles keys that aren't in the schema for the query `filter`. This option is `false` by default, which means Mongoose will allow `Model.find({ foo: 'bar' })` even if `foo` is not in the schema. See the [`strictQuery` docs](https://mongoosejs.com/docs/guide.html#strictQuery) for more information.
- `nearSphere`: use `$nearSphere` instead of `near()`. See the [`Query.prototype.nearSphere()` docs](https://mongoosejs.com/docs/api/query.html#Query.prototype.nearSphere())
- `schemaLevelProjections`: if `false`, Mongoose will not apply schema-level `select: false` or `select: true` for this query

Mongoose maintains a separate object for internal options because
Mongoose sends `Query.prototype.options` to the MongoDB server, and the
above options are not relevant for the MongoDB server.if specified, overwrites the current options
Execute a `find()`Find all documents that match `selector`. The result will be an array of documents.

If there are too many documents in the result to fit in memory, use
[`Query.prototype.cursor()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.cursor())

#### Example:

const arr = await Movie.find({ year: { $gte: 1980, $lte: 1989 } });mongodb filter. If not specified, returns all documents.
(Object|ObjectId)=Merges another Query or conditions object into this one.

When a Query is passed, conditions, field selection and options are merged.(Query|Object)Adds a collation to this op (MongoDB 3.4 and up)MongoDB docs https://www.mongodb.com/docs/manual/reference/method/cursor.collation/#cursor.collation
Hydrate a single doc from `findOne()`, `findOneAndUpdate()`, etc.Given a model and an array of docs, hydrates all the docs to be instances
of the model. Used to initialize docs returned from the db from `find()`the projection used, including `select` from schemas
the user-specified projection
opts.sessionInternal helper to execute a findOne() operationfindOne https://www.mongodb.com/docs/manual/reference/method/db.collection.findOne/
Declares the query a findOne operation. When executed, the first found document is passed to the callback.

The result of the query is a single document, or `null` if no document was found.

* *Note:* `conditions` is optional, and if `conditions` is null or undefined,
mongoose will send an empty `findOne` command to MongoDB, which will return
an arbitrary document. If you're querying by `_id`, use `Model.findById()`
instead.

This function triggers the following middleware.

- `findOne()`

#### Example:

const query = Kitten.where({ color: 'white' });
const kitten = await query.findOne();mongodb selector
optional fields to return
see [`setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())
Query.select https://mongoosejs.com/docs/api/query.html#Query.prototype.select()
Execute a countDocuments querycountDocuments https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments
Execute a estimatedDocumentCount() queryestimatedDocumentCount https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#estimatedDocumentCount
Specifies this query as a `estimatedDocumentCount()` query. Faster than
using `countDocuments()` for large collections because
`estimatedDocumentCount()` uses collection metadata rather than scanning
the entire collection.

`estimatedDocumentCount()` does **not** accept a filter. `Model.find({ foo: bar }).estimatedDocumentCount()`
is equivalent to `Model.find().estimatedDocumentCount()`

This function triggers the following middleware.

- `estimatedDocumentCount()`

#### Example:

await Model.find().estimatedDocumentCount();passed transparently to the [MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/EstimatedDocumentCountOptions.html)
Specifies this query as a `countDocuments()` query. Behaves like `count()`,
except it always does a full collection scan when passed an empty filter `{}`.

There are also minor differences in how `countDocuments()` handles
[`$where` and a couple geospatial operators](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments).
versus `count()`.

This function triggers the following middleware.

- `countDocuments()`

#### Example:

const countQuery = model.where({ 'color': 'black' }).countDocuments();

query.countDocuments({ color: 'black' }).count().exec();

await query.countDocuments({ color: 'black' });

query.where('color', 'black').countDocuments().exec();

The `countDocuments()` function is similar to `count()`, but there are a
[few operators that `countDocuments()` does not support](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#countDocuments).
Below are the operators that `count()` supports but `countDocuments()` does not,
and the suggested replacement:

- `$where`: [`$expr`](https://www.mongodb.com/docs/manual/reference/operator/query/expr/)
- `$near`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$center`](https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center)
- `$nearSphere`: [`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/) with [`$centerSphere`](https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere)Execute a `distinct()` querydistinct https://www.mongodb.com/docs/manual/reference/method/db.collection.distinct/
Declares or executes a distinct() operation.

This function does not trigger any middleware.

#### Example:

distinct(field, conditions, options)
distinct(field, conditions)
distinct(field)
distinct()(Object|Query)=(Object|Query)Sets the sort order

If an object is passed, values allowed are `asc`, `desc`, `ascending`, `descending`, `1`, and `-1`.

If a string is passed, it must be a space delimited list of path names. The
sort order of each path is ascending unless the path name is prefixed with `-`
which will be treated as descending.

#### Example:

// sort by "field" ascending and "test" descending
query.sort({ field: 'asc', test: -1 });

// equivalent
query.sort('field -test');

// also possible is to use a array with array key-value pairs
query.sort([['field', 'asc']]);

#### Note:

Cannot be used with `distinct()`(Object|String|Array.<Array.<(string|number)>>)Array.<Array.<(string|number)>>Array.<(string|number)>If true, replace existing sort options with `arg`
options.overridecursor.sort https://www.mongodb.com/docs/manual/reference/method/cursor.sort/
Declare and/or execute this query as a `deleteOne()` operation. Works like
remove, except it deletes at most one document regardless of the `single`
option.

This function triggers `deleteOne` middleware.

#### Example:

await Character.deleteOne({ name: 'Eddard Stark' });

This function calls the MongoDB driver's [`Collection#deleteOne()` function](https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteOne).
The returned [promise](https://mongoosejs.com/docs/queries.html) resolves to an
object that contains 2 properties:

- `acknowledged`: boolean
- `deletedCount`: the number of documents deleted

#### Example:

const res = await Character.deleteOne({ name: 'Eddard Stark' });
// `1` if MongoDB deleted a doc, `0` if no docs matched the filter `{ name: ... }`
res.deletedCount;If true, throws an error if the filter is empty (`{}`)
options.requireFilterDeleteResult https://mongodb.github.io/node-mongodb-native/6.15/interfaces/DeleteResult.html
deleteOne https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteOne
Internal thunk for `deleteOne()`Declare and/or execute this query as a `deleteMany()` operation. Works like
remove, except it deletes _every_ document that matches `filter` in the
collection, regardless of the value of `single`.

This function triggers `deleteMany` middleware.

#### Example:

await Character.deleteMany({ name: /Stark/, age: { $gte: 18 } });

This function calls the MongoDB driver's [`Collection#deleteMany()` function](https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteMany).
The returned [promise](https://mongoosejs.com/docs/queries.html) resolves to an
object that contains 2 properties:

- `acknowledged`: boolean
- `deletedCount`: the number of documents deleted

#### Example:

const res = await Character.deleteMany({ name: /Stark/, age: { $gte: 18 } });
// `0` if no docs matched the filter, number of docs deleted otherwise
res.deletedCount;deleteMany https://mongodb.github.io/node-mongodb-native/6.15/classes/Collection.html#deleteMany
Execute a `deleteMany()` queryhydrates a document3rd parameter to callback
array of paths used in population
If the model is a discriminator type and not root, then add the key & value to the criteria.Issues a mongodb `findOneAndUpdate()` command.

Finds a matching document, updates it according to the `update` arg, passing any `options`, and returns the found
document (if any).

This function triggers the following middleware.

- `findOneAndUpdate()`

#### Available options

- `new`: bool - if true, return the modified document rather than the original. defaults to false (changed in 4.0)
- `upsert`: bool - creates the object if it doesn't exist. defaults to false.
- `fields`: {Object|String} - Field selection. Equivalent to `.select(fields).findOneAndUpdate()`
- `sort`: if multiple docs are found by the filter, sets the sort order to choose which doc to update
- `maxTimeMS`: puts a time limit on the query - requires mongodb >= 2.6.0
- `runValidators`: if true, runs [update validators](https://mongoosejs.com/docs/validation.html#update-validators) on this command. Update validators validate the update operation against the model's schema.
- `setDefaultsOnInsert`: `true` by default. If `setDefaultsOnInsert` and `upsert` are true, mongoose will apply the [defaults](https://mongoosejs.com/docs/defaults.html) specified in the model's schema if a new document is created.
- `requireFilter`: bool - if true, throws an error if the filter is empty (`{}`). Defaults to false.

#### Example:

query.findOneAndUpdate(filter, update, options);  // returns Query
query.findOneAndUpdate(filter, update);           // returns Query
// Note that `Query#findOneAndUpdate()` with 1 arg treats the first arg as the `update`, NOT the `filter`.
query.findOneAndUpdate(update);                   // returns Query
query.findOneAndUpdate();                         // returns Queryby default, mongoose only returns the first error that occurred in casting the query. Turn on this option to aggregate all the cast errors.
options.multipleCastErrorBy default, `findOneAndUpdate()` returns the document as it was **before** `update` was applied. If you set `new: true`, `findOneAndUpdate()` will instead give you the object after `update` was applied.
An alias for the `new` option. `returnOriginal: false` is equivalent to `new: true`.
options.returnOriginalMongoose removes updated immutable properties from `update` by default (excluding $setOnInsert). Set `overwriteImmutable` to `true` to allow updating immutable properties using other update operators.
options.overwriteImmutablefindAndModify command https://www.mongodb.com/docs/manual/reference/command/findAndModify/
ModifyResult https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html
findOneAndUpdate https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#findOneAndUpdate
Execute a findOneAndUpdate operationIssues a MongoDB [findOneAndDelete](https://www.mongodb.com/docs/manual/reference/method/db.collection.findOneAndDelete/) command.

Finds a matching document, removes it, and returns the found document (if any).

This function triggers the following middleware.

- `findOneAndDelete()`

#### Available options

- `sort`: if multiple docs are found by the conditions, sets the sort order to choose which doc to update
- `maxTimeMS`: puts a time limit on the query - requires mongodb >= 2.6.0
- `requireFilter`: bool - if true, throws an error if the filter is empty (`{}`). Defaults to false.

#### Example:

A.where().findOneAndDelete(conditions, options)  // return Query
A.where().findOneAndDelete(conditions) // returns Query
A.where().findOneAndDelete()           // returns QueryExecute a `findOneAndDelete()` queryIssues a MongoDB [findOneAndReplace](https://www.mongodb.com/docs/manual/reference/method/db.collection.findOneAndReplace/) command.

Finds a matching document, removes it, and returns the found document (if any).

This function triggers the following middleware.

- `findOneAndReplace()`

#### Available options

- `sort`: if multiple docs are found by the conditions, sets the sort order to choose which doc to update
- `maxTimeMS`: puts a time limit on the query - requires mongodb >= 2.6.0
- `includeResultMetadata`: if true, returns the full [ModifyResult from the MongoDB driver](https://mongodb.github.io/node-mongodb-native/4.9/interfaces/ModifyResult.html) rather than just the document
- `requireFilter`: bool - if true, throws an error if the filter is empty (`{}`). Defaults to false.

#### Example:

A.where().findOneAndReplace(filter, replacement, options); // return Query
A.where().findOneAndReplace(filter); // returns Query
A.where().findOneAndReplace(); // returns QueryExecute a findOneAndReplace() queryFinds a single document by its _id field. `findById(id)` is equivalent to
`findOne({ _id: id })`.

The `id` is cast based on the Schema before sending the command.

This function triggers the following middleware.

- `findOne()`If set to `true`, translates any schema-defined aliases in `projection`, `update`, and `distinct`. Throws an error if there are any conflicts where both alias and raw property are defined on the same object.
Issues a mongodb findOneAndUpdate command by a document's _id field.
`findByIdAndUpdate(id, ...)` is equivalent to `findOneAndUpdate({ _id: id }, ...)`.

Finds a matching document, updates it according to the `update` arg,
passing any `options`, and returns the found document (if any).

This function triggers the following middleware.

- `findOneAndUpdate()`Support the `new` option as an alternative to `returnOriginal` for backwards
compat.Get options from query opts, falling back to the base mongoose object.Override mquery.prototype._mergeUpdate to handle mongoose objects in
updates.Mongoose calls this function internally to validate the query if
`runValidators` is setthe update, after casting
the options from `_optionsForExec()`
Execute an updateMany queryModel.update https://mongoosejs.com/docs/api/model.html#Model.update()
Execute an updateOne queryExecute a replaceOne queryDeclare and/or execute this query as an updateMany() operation.
MongoDB will update _all_ documents that match `filter` (as opposed to just the first one).

**Note** updateMany will _not_ fire update middleware. Use `pre('updateMany')`
and `post('updateMany')` instead.

#### Example:

const res = await Person.updateMany({ name: /Stark$/ }, { isDeleted: true });
res.n; // Number of documents matched
res.nModified; // Number of documents modified

// Other supported syntaxes
await Person.find({ name: /Stark$/ }).updateMany({ isDeleted: true }); // Using chaining syntax
await Person.find().updateMany({ isDeleted: true }); // Set `isDeleted` on _all_ Person documents

This function triggers the following middleware.

- `updateMany()`the update command. If array, this update will be treated as an update pipeline and not casted.
(Object|Array)=update https://www.mongodb.com/docs/manual/reference/method/db.collection.update/
Declare and/or execute this query as an updateOne() operation.
MongoDB will update _only_ the first document that matches `filter`.

- Use `replaceOne()` if you want to overwrite an entire document rather than using [atomic operators](https://www.mongodb.com/docs/manual/tutorial/model-data-for-atomic-operations/#pattern) like `$set`.

**Note** updateOne will _not_ fire update middleware. Use `pre('updateOne')`
and `post('updateOne')` instead.

#### Example:

const res = await Person.updateOne({ name: 'Jean-Luc Picard' }, { ship: 'USS Enterprise' });
res.acknowledged; // Indicates if this write result was acknowledged. If not, then all other members of this result will be undefined.
res.matchedCount; // Number of documents that matched the filter
res.modifiedCount; // Number of documents that were modified
res.upsertedCount; // Number of documents that were upserted
res.upsertedId; // Identifier of the inserted document (if an upsert took place)

// Other supported syntaxes
await Person.findOne({ name: 'Jean-Luc Picard' }).updateOne({ ship: 'USS Enterprise' }); // Using chaining syntax
await Person.updateOne({ ship: 'USS Enterprise' }); // Updates first doc's `ship` property

This function triggers the following middleware.

- `updateOne()`Declare and/or execute this query as a replaceOne() operation.
MongoDB will replace the existing document and will not accept any [atomic operators](https://www.mongodb.com/docs/manual/tutorial/model-data-for-atomic-operations/#pattern) (`$set`, etc.)

**Note** replaceOne will _not_ fire update middleware. Use `pre('replaceOne')`
and `post('replaceOne')` instead.

#### Example:

const res = await Person.replaceOne({ _id: 24601 }, { name: 'Jean Valjean' });
res.acknowledged; // Indicates if this write result was acknowledged. If not, then all other members of this result will be undefined.
res.matchedCount; // Number of documents that matched the filter
res.modifiedCount; // Number of documents that were modified
res.upsertedCount; // Number of documents that were upserted
res.upsertedId; // Identifier of the inserted document (if an upsert took place)

This function triggers the following middleware.

- `replaceOne()`the update command
Internal helper for update, updateMany, updateOne, replaceOneRuns a function `fn` and treats the return value of `fn` as the new value
for the query to resolve to.

Any functions you pass to `transform()` will run **after** any post hooks.

#### Example:

const res = await MyModel.findOne().transform(res => {
// Sets a `loadedAt` property on the doc that tells you the time the
// document was loaded.
return res == null ?
res :
Object.assign(res, { loadedAt: new Date() });
});function to run to transform the query result
Make this query throw an error if no documents match the given `filter`.
This is handy for integrating with async/await, because `orFail()` saves you
an extra `if` statement to check if no document was found.

#### Example:

// Throws if no doc returned
await Model.findOne({ foo: 'bar' }).orFail();

// Throws if no document was updated. Note that `orFail()` will still
// throw if the only document that matches is `{ foo: 'bar', name: 'test' }`,
// because `orFail()` will throw if no document was _updated_, not
// if no document was _found_.
await Model.updateOne({ foo: 'bar' }, { name: 'test' }).orFail();

// Throws "No docs found!" error if no docs match `{ foo: 'bar' }`
await Model.find({ foo: 'bar' }).orFail(new Error('No docs found!'));

// Throws "Not found" error if no document was found
await Model.findOneAndUpdate({ foo: 'bar' }, { name: 'test' }).
orFail(() => Error('Not found'));optional error to throw if no docs match `filter`. If not specified, `orFail()` will throw a `DocumentNotFoundError`
(Function|Error)=(Function|Error)Get the error to throw for `orFail()`(Error|undefined)Wrapper function to call isPathSelectedInclusive on a query.Executes the query

#### Example:

const promise = query.exec();
const promise = query.exec('update');(String|Function)=Executes the query returning a `Promise` which will be
resolved with either the doc(s) or rejected with the error.

More about [`then()` in JavaScript](https://masteringjs.io/tutorials/fundamentals/then).Executes the query returning a `Promise` which will be
resolved with either the doc(s) or rejected with the error.
Like `.then()`, but only takes a rejection handler.

More about [Promise `catch()` in JavaScript](https://masteringjs.io/tutorials/fundamentals/catch).Executes the query returning a `Promise` which will be
resolved with `.finally()` chained.

More about [Promise `finally()` in JavaScript](https://thecodebarbarian.com/using-promise-finally-in-node-js.html).Returns a string representation of this query.

More about [`toString()` in JavaScript](https://masteringjs.io/tutorials/fundamentals/tostring).

#### Example:
const q = Model.find();
console.log(q); // Prints "Query { find }"Unknown content '[Symbol.toStringTag]
 *'Unknown ... ag]\n *'Add pre [middleware](https://mongoosejs.com/docs/middleware.html) to this query instance. Doesn't affect
other queries.

#### Example:

const q1 = Question.find({ answer: 42 });
q1.pre(function middleware() {
console.log(this.getFilter());
});
await q1.exec(); // Prints "{ answer: 42 }"

// Doesn't print anything, because `middleware()` is only
// registered on `q1`.
await Question.find({ answer: 42 });Add post [middleware](https://mongoosejs.com/docs/middleware.html) to this query instance. Doesn't affect
other queries.

#### Example:

const q1 = Question.find({ answer: 42 });
q1.post(function middleware() {
console.log(this.getFilter());
});
await q1.exec(); // Prints "{ answer: 42 }"

// Doesn't print anything, because `middleware()` is only
// registered on `q1`.
await Question.find({ answer: 42 });Casts obj for an update command.obj after casting its values
Specifies paths which should be populated with other documents.

#### Example:

let book = await Book.findOne().populate('authors');
book.title; // 'Node.js in Action'
book.authors[0].name; // 'TJ Holowaychuk'
book.authors[1].name; // 'Nathan Rajlich'

let books = await Book.find().populate({
path: 'authors',
// `match` and `sort` apply to the Author model,
// not the Book model. These options do not affect
// which documents are in `books`, just the order and
// contents of each book document's `authors`.
match: { name: new RegExp('.*h.*', 'i') },
sort: { name: -1 }
});
books[0].title; // 'Node.js in Action'
// Each book's `authors` are sorted by name, descending.
books[0].authors[0].name; // 'TJ Holowaychuk'
books[0].authors[1].name; // 'Marc Harter'

books[1].title; // 'Professional AngularJS'
// Empty array, no authors' name has the letter 'h'
books[1].authors; // []

Paths are populated after the query executes and a response is received. A
separate query is then executed for each path specified for population. After
a response for each query has also been returned, the results are passed to
the callback.either the path(s) to populate or an object specifying all parameters
Gets a list of paths to be populated by this query

#### Example:

bookSchema.pre('findOne', function() {
let keys = this.getPopulatedPaths(); // ['author']
});
...
Book.findOne({}).populate('author');

#### Example:

// Deep populate
const q = L1.find().populate({
path: 'level2',
populate: { path: 'level3' }
});
q.getPopulatedPaths(); // ['level2', 'level2.level3']an array of strings representing populated paths
Casts this query to the schema of `model`

#### Note:

If `obj` is present, it is cast instead of this query.the model to cast to. If not set, defaults to `this.model`
Casts selected field arguments for field selection with mongo 2.2

query.select({ ids: { $elemMatch: { $in: [hexString] }})https://github.com/Automattic/mongoose/issues/1091
https://www.mongodb.com/docs/manual/reference/projection/elemMatch/
Applies schematype selected options to this query.Returns a wrapper around a [mongodb driver cursor](https://mongodb.github.io/node-mongodb-native/4.9/classes/FindCursor.html).
A QueryCursor exposes a Streams3 interface, as well as a `.next()` function.

The `.cursor()` function triggers pre find hooks, but **not** post find hooks.

#### Example:

// There are 2 ways to use a cursor. First, as a stream:
Thing.
find({ name: /^hello/ }).
cursor().
on('data', function(doc) { console.log(doc); }).
on('end', function() { console.log('Done!'); });

// Or you can use `.next()` to manually get the next doc in the stream.
// `.next()` returns a promise, so you can use promises or callbacks.
const cursor = Thing.find({ name: /^hello/ }).cursor();
cursor.next(function(error, doc) {
console.log(doc);
});

// Because `.next()` returns a promise, you can use co
// to easily iterate through all documents without loading them
// all into memory.
const cursor = Thing.find({ name: /^hello/ }).cursor();
for (let doc = await cursor.next(); doc != null; doc = await cursor.next()) {
console.log(doc);
}

#### Valid options

- `transform`: optional function which accepts a mongoose document. The return value of the function will be emitted on `data` and returned by `.next()`.QueryCursor https://mongoosejs.com/docs/api/querycursor.html
Sets the tailable option (for use with capped collections).

#### Example:

query.tailable(); // true
query.tailable(true);
query.tailable(false);

// Set both `tailable` and `awaitData` options
query.tailable({ awaitData: true });

#### Note:

Cannot be used with `distinct()`options to set
false by default. Set to true to keep the cursor open even if there's no data.
opts.awaitDatathe maximum amount of time for the server to wait on new documents to satisfy a tailable cursor query. Requires `tailable` and `awaitData` to be true
opts.maxAwaitTimeMStailable https://www.mongodb.com/docs/manual/tutorial/create-tailable-cursor/
Declares an intersects query for `geometry()`.

#### Example:

query.where('path').intersects().geometry({
type: 'LineString',
coordinates: [[180.0, 11.0], [180, 9.0]]
});

query.where('path').intersects({
type: 'LineString',
coordinates: [[180.0, 11.0], [180, 9.0]]
});

#### Note:

**MUST** be used after `where()`.

#### Note:

In Mongoose 3.7, `intersects` changed from a getter to a function. If you need the old syntax, use [this](https://github.com/ebensing/mongoose-within).intersectsgeoIntersects https://www.mongodb.com/docs/manual/reference/operator/geoIntersects/
Specifies a `$geometry` condition

#### Example:

const polyA = [[[ 10, 20 ], [ 10, 40 ], [ 30, 40 ], [ 30, 20 ]]]
query.where('loc').within().geometry({ type: 'Polygon', coordinates: polyA })

// or
const polyB = [[ 0, 0 ], [ 1, 1 ]]
query.where('loc').within().geometry({ type: 'LineString', coordinates: polyB })

// or
const polyC = [ 0, 0 ]
query.where('loc').within().geometry({ type: 'Point', coordinates: polyC })

// or
query.where('loc').intersects().geometry({ type: 'Point', coordinates: polyC })

The argument is assigned to the most recent path passed to `where()`.

#### Note:

`geometry()` **must** come after either `intersects()` or `within()`.

The `object` argument must contain `type` and `coordinates` properties.
- type {String}
- coordinates {Array}geometryMust contain a `type` property which is a String and a `coordinates` property which is an Array. See the examples.
Geospatial Support Enhancements https://www.mongodb.com/docs/manual/release-notes/2.4/#geospatial-support-enhancements
MongoDB Geospatial Indexing https://www.mongodb.com/docs/manual/core/geospatial-indexes/
Specifies a `$near` or `$nearSphere` condition

These operators return documents sorted by distance.

#### Example:

query.where('loc').near({ center: [10, 10] });
query.where('loc').near({ center: [10, 10], maxDistance: 5 });
query.where('loc').near({ center: [10, 10], maxDistance: 5, spherical: true });
query.near('loc', { center: [10, 10], maxDistance: 5 });$near https://www.mongodb.com/docs/manual/reference/operator/near/
$nearSphere https://www.mongodb.com/docs/manual/reference/operator/nearSphere/
Overwriting mquery is needed to support a couple different near() forms found in older
versions of mongoose
near([1,1])
near(1,1)
near(field, [1,2])
near(field, 1, 2)
In addition to all of the normal forms supported by mquery_DEPRECATED_ Specifies a `$nearSphere` condition

#### Example:

query.where('loc').nearSphere({ center: [10, 10], maxDistance: 5 });

**Deprecated.** Use `query.near()` instead with the `spherical` option set to `true`.

#### Example:

query.where('loc').near({ center: [10, 10], spherical: true });near() https://mongoosejs.com/docs/api/query.html#Query.prototype.near()
$maxDistance https://www.mongodb.com/docs/manual/reference/operator/maxDistance/Returns an asyncIterator for use with [`for/await/of` loops](https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js)
This function *only* works for `find()` queries.
You do not need to call this function explicitly, the JavaScript runtime
will call it for you.

#### Example:

for await (const doc of Model.aggregate([{ $sort: { name: 1 } }])) {
console.log(doc.name);
}

Node.js 10.x supports async iterators natively without any flags. You can
enable async iterators in Node.js 8.x using the [`--harmony_async_iteration` flag](https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187).

**Note:** This function is not if `Symbol.asyncIterator` is undefined. If
`Symbol.asyncIterator` is undefined, that means your Node.js version does not
support async iterators.Specifies a `$polygon` condition

#### Example:

query.where('loc').within().polygon([10, 20], [13, 25], [7, 15]);
query.polygon('loc', [10, 20], [13, 25], [7, 15]);polygon(String|Array)=coordinatePairs...(Array|Object)=...(Array|Object)Specifies a `$box` condition

#### Example:

const lowerLeft = [40.73083, -73.99756]
const upperRight= [40.741404,  -73.988135]

query.where('loc').within().box(lowerLeft, upperRight)
query.box({ ll : lowerLeft, ur : upperRight })within() Query#within https://mongoosejs.com/docs/api/query.html#Query.prototype.within()
Lower Left Coordinates OR a object of lower-left(ll) and upper-right(ur) Coordinates
val1Upper Right Coordinates
val2Array.<Number>=this is needed to support the mongoose syntax of:
box(field, { ll : [x,y], ur : [x2,y2] })
box({ ll : [x,y], ur : [x2,y2] })Specifies a `$center` or `$centerSphere` condition.

#### Example:

const area = { center: [50, 50], radius: 10, unique: true }
query.where('loc').within().circle(area)
// alternatively
query.circle('loc', area);

// spherical calculations
const area = { center: [50, 50], radius: 10, unique: true, spherical: true }
query.where('loc').within().circle(area)
// alternatively
query.circle('loc', area);area$geoWithin https://www.mongodb.com/docs/manual/reference/operator/geoWithin/
_DEPRECATED_ Alias for [circle](https://mongoosejs.com/docs/api/query.html#Query.prototype.circle())

**Deprecated.** Use [circle](https://mongoosejs.com/docs/api/query.html#Query.prototype.circle()) instead._DEPRECATED_ Specifies a `$centerSphere` condition

**Deprecated.** Use [circle](https://mongoosejs.com/docs/api/query.html#Query.prototype.circle()) instead.

#### Example:

const area = { center: [50, 50], radius: 10 };
query.where('loc').within().centerSphere(area);Determines if field selection has been made.Determines if inclusive field selection has been made.

query.selectedInclusively(); // false
query.select('name');
query.selectedInclusively(); // trueDetermines if exclusive field selection has been made.

query.selectedExclusively(); // false
query.select('-name');
query.selectedExclusively(); // true
query.selectedInclusively(); // falseThe model this query is associated with.

#### Example:

const q = MyModel.find();
q.model === MyModel; // trueconst Q ... rsor');QueryCu ... ursor')./cursor/queryCursor/cursor/queryCursorconst h ... ases');handleR ... iases')require ... iases')'./help ... liases'./helpers/query/handleReadPreferenceAliases/helpers/query/handleReadPreferenceAliasesconst c ... ters');castArr ... lters')require ... lters')'./help ... ilters'./helpers/update/castArrayFilters/helpers/update/castArrayFilters./cast/number'./help ... Update'./helpers/query/castUpdate/helpers/query/castUpdate./helpers/projection/isInclusive/helpers/projection/isInclusiveconst i ... path');isSubpa ... bpath')require ... bpath')'./help ... ubpath'./helpers/projection/isSubpath/helpers/projection/isSubpathconst m ... uery');mquery  ... query')./helpers/projection/parseProjection/helpers/projection/parseProjectionconst r ... ters');removeU ... lters')./helpers/update/removeUnusedArrayFilters/helpers/update/removeUnusedArrayFiltersconst s ... tion');sanitiz ... ction')./helpers/query/sanitizeProjection/helpers/query/sanitizeProjectionconst s ... elds');selectP ... ields')'./help ... Fields'./helpers/query/selectPopulatedFields/helpers/query/selectPopulatedFields'./help ... Insert'./helpers/setDefaultsOnInsert/helpers/setDefaultsOnInsert'./help ... erties'./helpers/specialPropertiesconst u ... tors');updateV ... ators')'./help ... dators'./helpers/updateValidators/helpers/updateValidatorsconst q ... ctions;./constantsconst q ... ut'\n]);queryOp ... out'\n])new Set ... out'\n])[\n  'al ... eout'\n]const o ... e']\n]);opToThu ... te']\n])new Map ... te']\n])[\n  ['c ... ete']\n]['count ... ments']['disti ... tinct']['estim ... Count']'_estim ... tCount'['find', '_find']['findO ... ndOne']['findO ... place']['findO ... pdate']['repla ... ceOne']['updat ... eMany']['updat ... teOne']['delet ... eMany']['delet ... teOne']['findO ... elete']if (!th ... {};\n  }!this._ ... Options{\n    t ... {};\n  }this._h ... reem();this._h ... areem()this._hooksnew Kareem()this._e ... = null;this._e ...  = nullthis._executionStackObject.keys(options)this._m ... s[key];this._m ... ns[key]if (col ... on;\n  }this.mo ... ection;if (mod ... ma;\n  }this.sc ... .schemathis.mo ... preducethis.lean();this.lean()this.leanmquery. ... tions);mquery. ... ptions)mquery.callif (col ... n);\n  }this.co ... ction);this.co ... ection)this.fi ... tions);this.fi ... itions)this.$u ... = true;this.$u ...  = truethis.$useProjectionconst c ... | null;collati ... || nullcollation != nullif (obj ... n true;if (typ ... n true;if (Obj ... n true;['$and' ... '$nor']obj[key ... (item))obj[key ... h === 0obj[key].lengthobj[key].everyitem => ... r(item)isEmptyFilter(item)options ... filter)isEmpty ... filter)throw n ... bled');new Err ... abled')'Empty  ... nabled'Empty or invalid filter not allowed with requireFilter enabledQuery.p ... uery();Query.p ... query()new mquery()Query.p ...  Query;Query.p ... = QueryQuery.p ... tructorQuery.p ... efined;Query.p ... definedQuery.p ... e.countQuery.p ... dRemoveQuery.b ... totype;Query.b ... ototypemquery.prototypeObject. ... ned\n});Object. ... ined\n}){\n  con ... fined\n}value: undefinedQuery.u ... Within;Query.u ... oWithinQuery.use$geoWithinmquery.use$geoWithinQuery.p ... ery;\n};Query.p ... uery;\n}model = this.modelcoll =  ... lectionconst C ... );\n  };CustomQ ... l);\n  }!(this  ... mQuery)(this i ... mQuery)this in ... omQuerynew Cus ... ptions)this._m ... tions);this._m ... ptions)clone(p ... ptions)p._mongooseOptionsQuery.c ...  coll);Query.c ... , coll)Query.calloptions || nullutil.in ... Query);util.in ... .Query)const p ... totype;p = Cus ... ototypeCustomQ ... ototypep.options = {};p.options = {}p.optionsif (opt ... rt;\n  }options.sort != null{\n    p ... rt;\n  }p.sort( ... .sort);p.sort(options.sort)p.sortdelete options.sort;delete options.sortp.setOp ... tions);p.setOp ... ptions)p.setOptionsp.op = this.op;p.op = this.opp.opp._validateOp();p._validateOp()p._validateOpp._cond ... tions);p._cond ... itions)p._conditionsclone(t ... itions)this._conditionsp._fiel ... ields);p._fiel ... fields)p._fieldsclone(this._fields)this._fieldsp._upda ... e\n  });p._upda ... se\n  })p._updateclone(t ... se\n  })this._update{\n    f ... lse\n  }p._path ... ._path;p._path = this._pathp._paththis._pathp._dist ... stinct;p._dist ... istinctp._distinctthis._distinctp._coll ... ection;p._coll ... lectionp._collectionthis._collectionp._mong ... ptions;p._mong ... Optionsreturn CustomQuery;Query.p ... n q;\n};Query.p ... rn q;\n}Query.p ... e.clonefunctio ... rn q;\n}{\n  con ... rn q;\n}const q ... ction);q = new ... ection)this.model.Query{\n    q ... rt;\n  }q.sort( ... .sort);q.sort(options.sort)q.sortq.setOp ... tions);q.setOp ... ptions)q.setOptionsq.op = this.op;q.op = this.opq.opq._validateOp();q._validateOp()q._validateOpq._cond ... tions);q._cond ... itions)q._conditionsq._fiel ... ields);q._fiel ... fields)q._fieldsq._upda ... e\n  });q._upda ... se\n  })q._updateq._path ... ._path;q._path = this._pathq._pathq._dist ... stinct;q._dist ... istinctq._distinctq._coll ... ection;q._coll ... lectionq._collectionq._mong ... ptions;q._mong ... Optionsq._mongooseOptionsreturn q;Query.p ... his;\n};Query.p ... this;\n}Query.p ... e.slicethis._v ... lice');this._v ... slice')this._validateif (arg ... ]];\n  }{\n    c ... 0];\n  }const a ... nts[0];arg = arguments[0]const k ... s(arg);keys =  ... ys(arg)this.sl ... s[i]]);this.sl ... ys[i]])this.slicearg[keys[i]]this._e ... lice');this._e ... slice')this._ensurePathpath = this._path;path = this._pathval = arguments[0];val = arguments[0]if ('nu ... ;\n    }'number ... ents[0]val = [ ... ts[1]];val = [ ... nts[1]][argume ... nts[1]]path = arguments[0];path = arguments[0]val = arguments[1];val = arguments[1]val = [ ... ts[2]];val = [ ... nts[2]][argume ... nts[2]]const p = {};p = {}p[path] ...  val };p[path] ... : val }p[path]{ $slice: val }$slice: valthis.select(p);this.select(p)this.selectconst v ... tions);validOp ... ctions)new Set ... ctions)Query.p ... \n  }\n};Query.p ... ;\n  }\n}Query.p ... idateOpthis.op ... his.op)this.op != null!validO ... his.op)validOp ... his.op)validOpsSet.hasthis.er ...  '"'));this.er ... + '"'))this.error'Query  ... p + '"''Query  ... this.op'Query  ... op`: "'Query has invalid `op`: "Query.prototype.modif (arg ... 0];\n  }{\n    t ... th;\n  }this._e ... 'mod');this._e ... ('mod')argumen ... nts[1])!Array. ... nts[1])Array.i ... nts[1]){\n    v ... 0];\n  }const c ...  = {});conds = ... ] = {})this._c ... ] = {})this._c ... s[path](this._ ... ] = {})this._c ... h] = {}conds.$mod = val;conds.$mod = valconds.$modQuery.p ... e.limitthis._v ... imit');this._v ... limit')v = castNumber(v);v = castNumber(v)throw n ... imit');new Cas ... limit')this.op ... it = v;this.op ... mit = vthis.options.limitQuery.prototype.skipthis._v ... skip');this._v ... 'skip')throw n ... skip');new Cas ... 'skip')this.op ... ip = v;this.op ... kip = vthis.options.skipQuery.p ... lds;\n};Query.p ... elds;\n}Query.p ... jectionfunctio ... elds;\n}{\n  if  ... elds;\n}if (arg ... ds;\n  }return this._fields;this._fields = {};this._fields = {}this._u ... s = {};this._u ... ds = {}this._u ... dFieldsthis.select(arg);this.select(arg)Query.p ... .');\n};Query.p ... t.');\n}Query.p ... .selectfunctio ... t.');\n}{\n  let ... t.');\n}let arg ... nts[0];if (!ar ... n this;!argnew Err ... ument')'Invali ... gument'Invalid select: select only takes 1 argumentthis._v ... lect');this._v ... elect')const f ...  = {});fields  ... s = {})this._f ... s = {})(this._fields = {})const u ...  = {});userPro ... s = {})this._u ... s = {})(this._ ... s = {})let san ... efined;sanitiz ... definedthis.mo ... ction')this.model != nullutils.h ... ction')this.mo ... optionsthis.model.dbsanitiz ... ection;sanitiz ... jectionthis.mo ... jectionthis._m ... jectionreturn  ...  value;typeof  ... : valuetypeof  ... jectionvalue = 1arg = p ...  true);arg = p ... , true)if (uti ... is;\n  }utils.isObject(arg)this.se ... ively()this.se ... usivelyObject.entries(arg)([key,  ...       }[key, value]fields[ ... != nullfields['-' + key]'-' + keydelete  ... + key];delete  ...  + key]fields[ ... value);fields[ ... (value)userPro ... (value)userPro ... ds[key]sanitizeValue(value)Object. ... Fields)field = ...       }isSubpa ...  field)delete  ... field];delete fields[field]delete  ... [field]userPro ... [field]!valuefields['+' + key]'+' + keyconst v ... ys[i]];value = arg[keys[i]]userPro ... value);Invalid select() argument. Must be string or object.Invalid selectQuery.p ... ectionsschemaL ... ectionsthis._m ...  value;this._m ... = valuethis._m ... ectionsif (typ ... de;\n  }typeof modemode =  ... (mode);mode =  ... s(mode)handleR ... s(mode)this.op ... tags };this.op ...  tags }{ mode, tags }{\n    t ... de;\n  }this.op ... = mode;this.op ...  = modeQuery.p ... ()`;\n};Query.p ... }()`;\n}Query.p ... oStringfunctio ... }()`;\n}{\n  if  ... }()`;\n}if (thi ... )`;\n  }this.op ... remove'this.op ... Delete'this.op ... eteOne'this.op ... teMany'this.op ... indOne'this.op ...  'find'this.op ... uments'this.op === 'count'this.op === 'find'this.op === 'remove'{\n    r ... )`;\n  }return  ... ns)})`;`${this ... ons)})`this.model.modelNameutil.in ... itions)this.op ... stinct'this.op ... ateOne'this.op ... update'this.op ... aceOne'this.op ... Update'this.op ... eplace'this.op === 'update'return  ... te)})`;`${this ... ate)})`util.in ... update)return  ... op}()`;`${this ... .op}()`Query.p ... sessionif (v = ... on;\n  }this.op ... on = v;this.op ... ion = v{\n    d ... is;\n  }delete  ... oncern;delete  ... Concernthis.op ... Concernthis.op ... n = valQuery.prototype.wif (val ... .w;\n  }{\n    d ... .w;\n  }delete  ... ions.w;delete  ... tions.wthis.options.wthis.op ... w = valthis.op ... ncern.wthis.options.w = valQuery.prototype.jif (val ... .j;\n  }{\n    d ... .j;\n  }delete  ... ions.j;delete  ... tions.jthis.options.jthis.op ... j = valthis.op ... ncern.jthis.options.j = valQuery.p ... timeoutif (ms  ... ut;\n  }ms == null{\n    d ... ut;\n  }delete  ... imeout;delete  ... timeoutthis.op ... timeoutif (thi ... ms;\n  }{\n    t ... ms;\n  }this.op ... t = ms;this.op ... ut = msQuery.p ... ons;\n};Query.p ... ions;\n}Query.p ... Options{\n  ret ... ions;\n}return this.options;{\n  //  ... this;\n}if (ove ... is;\n  }this._m ...  || {};this._m ... ) || {}(option ... ) || {}(option ... tions))if ('po ... ;\n    }'popula ... optionsthis.po ... tions);this.po ... ptions)if (opt ... is;\n  }'Option ... s + '"''Option ... options'Option ...  got "'Options must be an object, got "const p ... pulate;delete  ... pulate;delete  ... opulateconst _ ... length;_numPop ... .lengthpopulate.lengthi < _numPopulatethis.po ... te[i]);this.po ... ate[i])populate[i]if ('se ... rt;\n  }'setDef ... options'setDef ... Insert'{\n    t ... rt;\n  }this._m ... Insert;this._m ... nInsertdelete  ... Insert;delete  ... nInsertif ('ov ... ey;\n  }'overwr ... options'overwr ... torKey'{\n    t ... ey;\n  }this._m ... torKey;this._m ... atorKeydelete  ... torKey;delete  ... atorKeyif ('ov ... le;\n  }{\n    t ... le;\n  }this._m ... utable;this._m ... mutabledelete  ... utable;delete  ... mutableif ('sa ... on;\n  }!this._ ... jectionsanitiz ... ields);sanitiz ... fields)this._m ... ection;delete  ... jectionif ('sa ... er;\n  }{\n    t ... er;\n  }this._m ... Filter;this._m ... eFilterif ('ti ... ps;\n  }'timest ... options{\n    t ... ps;\n  }this._m ... stamps;this._m ... estampsdelete  ... stamps;delete  ... estampsif ('de ... ail\n  }'defaul ... options{\n    t ... ail\n  }this._m ... faults;this._m ... efaultsif ('tr ... es;\n  }'transl ... options{\n    t ... es;\n  }this._m ... liases;this._m ... Aliasesoptions ... Aliasesdelete  ... liases;delete  ... Aliasesif ('sc ... ns;\n  }'schema ... options'schema ... ctions'{\n    t ... ns;\n  }this._m ... ctions;options ... ectionsdelete  ... ctions;delete  ... ectionsif (opt ... an;\n  }options.lean == null'lean'  ... options{\n    t ... an;\n  }this._m ... s.lean;this._m ... ns.leanthis.sc ... ns.leantypeof options.limitoptions ... limit);options ... .limit)castNum ... .limit)typeof options.skipoptions ... .skip);options ... s.skip)castNum ... s.skip)queryOp ... as(key)queryOp ... ods.hasconst a ... [key]];args =  ... s[key]]Array.i ... s[key]][options[key]]this[ke ...  args);this[ke ... , args)this[key].applythis.op ... s[key];this.op ... ns[key]Query.p ... explainthis.op ... = true;this.op ...  = truethis.options.explainif (ver ... se;\n  }verbose === false{\n    d ... in;\n  }delete  ... xplain;delete  ... explain{\n    t ... se;\n  }this.op ... erbose;this.op ... verboseQuery.p ... DiskUseif (arg ...  v;\n  }if (v = ...  v;\n  }v === false{\n    d ... se;\n  }delete  ... iskUse;delete  ... DiskUsethis.op ... se = v;this.op ... Use = vQuery.p ... xTimeMSthis.op ... S = ms;this.op ... MS = msthis.op ... xTimeMSQuery.p ... tFilterreturn  ... itions;Query.p ... etQueryQuery.p ... val;\n};Query.p ...  val;\n}{\n  thi ...  val;\n}this._c ...  = val;this._c ... s = valQuery.p ... ate;\n};Query.p ... date;\n}Query.p ... tUpdatefunctio ... date;\n}{\n  ret ... date;\n}return this._update;this._update = val;this._update = valQuery.p ... ds);\n};Query.p ... lds);\n}Query.p ... ForExecfunctio ... lds);\n}{\n  if  ... lds);\n}this._fields == nullObject. ... fields)return  ... ields);Query.p ... ret;\n};Query.p ...  ret;\n}const u ... e\n  });clone(t ... ue\n  })const o ... pdate);ops = O ... update)if ('$' ... ;\n    }'$' !== op[0]op[0]ret.$se ... e.$set;ret.$se ... te.$setret.$se ... te[op];ret.$se ... ate[op]update[op]if ('$s ... ;\n    }'$set' === opret[op] ... te[op];ret[op] = update[op]clone(this.options)model = ... .model;model = ... s.modelmodel || this.modelif (!mo ... ns;\n  }{\n    r ... ns;\n  }applyRe ... tions);applyRe ... ptions)this.model?.db?.basethis.model?.dbif (!th ... on;\n  }!this.o ... != null!this.o ... ssion')this.op ... ssion')this.op ... ropertyconst r ... s.read;readPre ... ns.readmodel & ... ns.readif (!(' ... ce;\n  }!('read ... ference!('read ... ptions)('readP ... ptions)'readPr ... options{\n    o ... ce;\n  }options ... erence;options ... ference{\n    o ... rt;\n  }options ... upsert;!!options.upsertoptions ... ions.j;options ... tions.jdelete options.j;delete options.joptions ... ions.w;delete options.w;delete options.wthis._applyPaths();this._applyPaths()this._applyPathsthis._fields != nullthis._f ... ields);this._f ... fields)this._c ... fields)this._castFieldsconst p ... Exec();project ... rExec()this._f ... rExec()this._fieldsForExecoptions ... ection;this._m ... opulateObject. ... pulate)if (pop ...       }pop.opt ... definedpop.opt ... ference!pop.optionspop.options = {};pop.options = {}pop.opt ... erence;pop.opt ... Concernpop.opt ... oncern;Query.prototype.leanthis._m ... : true;this._m ...  : trueargumen ...  : trueQuery.prototype.setconst k ... (path);keys =  ... s(path)Object.keys(path)this.se ... [key]);this.se ... h[key])this.setthis._u ...  || {};this._u ... e || {}this._update || {}path in this._updatedelete  ... e[path]this._update[path]this._u ... t || {}this._update.$setthis._u ...  = val;this._u ... ] = valthis._u ... t[path]Query.p ... d 0;\n};Query.p ... id 0;\n}Query.prototype.getfunctio ... id 0;\n}{\n  con ... id 0;\n}const u ... update;update  ... _updateif (upd ...  0;\n  }const $ ... e.$set;$set = update.$setif ($se ... h];\n  }$set == nullreturn update[path];update[path]if (uti ... h];\n  }utils.h ... , path)return $set[path];$set[path]Query.p ... e.errorreturn this._error;this._error = err;this._error = errQuery.p ... ll);\n};Query.p ... ull);\n}Query.p ... stErrorfunctio ... ull);\n}{\n  if  ... ull);\n}this._e ... tError)this._error == null!(this. ... tError)(this._ ... tError)this._e ... stErrorthis.error(null){\n  if  ... ions;\n}this._m ... ns = v;this._m ... ons = vQuery.p ... ditionsif (thi ... er;\n  }this.mo ... != nullthis.mo ... eFiltersanitiz ... Filter;sanitiz ... eFilterthis.model?.baseif (san ... s);\n  }sanitiz ... tions);sanitiz ... itions)this.ca ... model);this.ca ... .model)this.castthis._u ... rror();this._u ... Error()this._unsetCastErrorthis.error(err);this.error(err)castArr ... query);castArr ... (query)query.error(err);query.error(err)query.errorQuery.p ... ocs;\n};Query.p ... docs;\n}Query.p ... e._find{\n  thi ... docs;\n}this._a ... ases();this._a ... iases()this._a ... Aliases_applyT ... Aliasesthis._c ... ions();this._c ... tions()this._castConditionsthis.error() != nullthis.error()throw this.error();const u ...  || {};this._u ... s || {}const c ... ll\n  };complet ... ull\n  }{\n    s ... ull\n  }session ... || nullthis && ... sessionthis && this.optionslean: m ... || nullmongoos ... || nullmongooseOptions.leanconst o ... Exec();options ... rExec()const f ... itions;filter  ... ditionsconst f ... ection;this.mo ... ptions)this.mo ... on.findoptions.explainreturn  ... lain();cursor.explain()let doc ... rray();docs =  ... Array()if (doc ... cs;\n  }if (!mo ... s);\n  }!mongoo ... opulatemongoos ... opulateif (mon ... ;\n    }mongoos ... sionKeymongoos ... = falsedocs.fo ...     });docs.fo ...      })(doc) = ...       }versionKey in docmongoos ... ptions)_comple ... ptions)this._completeManypop = h ... ptions)if (mon ... p);\n  }return  ... , pop);this.mo ... s, pop)this.model.populatedocs =  ... tions);docs =  ... ptions)await t ... , pop);await t ... s, pop)Query.prototype.findtypeof conditions'Query. ... llback'Query.prototype.find() no longer accepts a callbackthis.op = 'find';this.op = 'find'if (mqu ... ));\n  }mquery. ... itions)mquery.canMergethis.me ... tions);this.me ... itions)this.mergeprepare ... (this);prepare ... a(this)prepare ... riteriaif (con ... ));\n  }conditions != nullthis.er ... ind'));this.er ... find'))new Obj ... 'find')Query.p ... e.mergeif (!so ... is;\n  }!sourceconst o ... true };opts =  ...  true }{ overwrite: true }overwrite: trueif (sou ... s);\n  }source  ... f Queryif (sou ... ;\n    }source._conditionsopts.omit = {};opts.omit = {}opts.omitthis._c ... ns.$andsource. ... ns.$andopts.om ... = true;opts.om ...  = trueopts.omit['$and']this._c ... .$and);this._c ... s.$and)this._c ... .concatthis._c ... ons.$orthis._conditions.$orsource. ... ons.$oropts.omit['$or']this._c ... s.$or);this._c ... ns.$or)utils.m ...  opts);utils.m ... , opts)source._fieldsthis._f ...  = {});source.optionsthis.op ...  = {});this.op ... s = {})(this.options = {})source._updatethis._u ...  = {});this._u ... e = {})(this._update = {})this._update = {}utils.m ... pdate);utils.m ... update)source._distinctthis._d ... stinct;this._d ... istinctsource. ... Optionsthis.mo ... bjectIdsource  ... bjectIdthis.mo ... e.Types{\n    u ... is;\n  }{ _id: source }_id: sourcesource && source.$__source.$__source  ... tions);source  ... ptions)source. ... ptions)source.toObjectif (Arr ...  );\n  }Array.i ... e.$and)source.$and{\n    o ...  );\n  }!this._conditionsthis._c ... s = {};this._c ... ns = {}this._c ... \n    );this._c ... )\n    )(this._ ... )\n    )(this._ ... .concat(this._ ...  || [])this._c ... d || []source. ... ) : el)source.$and.mapel => u ... l) : elutils.i ... l) : elutils.isPOJO(el)utils.merge({}, el)Array.i ... ce.$or)source.$orthis._c ... r || []source.$or.mapQuery.p ... llationthis.options == nullQuery.p ...  });\n};Query.p ...   });\n}Query.p ... leteOneif (!do ... l);\n  }!doc && ... etadata!this.o ... etadatathis.op ... etadatainclude ... etadataif (!op ... an;\n  }!option ... ns.lean{\n    o ... an;\n  }options ... s.lean;if (opt ... c);\n  }if (!mo ... k);\n  }if (mon ... }\n    }mongoos ... llback)_comple ... llback)complet ... llback)model.p ... }\n    )model.p ... p).thenmodel.p ... c, pop)_comple ... lback);complet ... ;\n  });complet ... );\n  })model.p ... r); });model.p ... rr); }){ callb ... res); }{ callback(err); }Query.p ... )));\n};Query.p ... })));\n}Query.p ... eteManyasync f ... })));\n}{\n  con ... })));\n}return  ...   })));Promise ... \n  })))docs.ma ... ;\n  }))docs.mapdoc =>  ... );\n  })const rawDoc = doc;rawDoc = docdoc = h ... ields);doc = h ... Fields)helpers ... Fields)helpers.createModelopts.session != nulldoc.$in ...     });doc.$in ... \n    })doc.$initQuery.p ... findOneif (thi ... rr;\n  }{\n    c ... rr;\n  }err = this.error()doc = a ... ptions)this.mo ... findOnethis._c ...     });this._c ... \n    })this._completeOnetypeof projectionQuery.prototype.findOne() no longer accepts a callbackthis.op = 'findOne';this.op = 'findOne'this._validateOp();this._validateOp()this._validateOpthis.se ... tions);this.se ... ptions)this.setOptionsthis.se ... ction);this.se ... ection)this.er ... One'));this.er ... dOne'))new Obj ... ndOne')Query.p ... ns);\n};Query.p ... ons);\n}Query.p ... cuments{\n  thi ... ons);\n}const c ... itions;conds = ... ditionsthis.mo ... cumentsQuery.p ... }\n  }\n}Query.p ... Aliaseslet app ...  false;applyTr ... = falseapplyTr ... Aliases'transl ... Options{\n    a ... es;\n  }applyTr ... liases;if (thi ... es;\n  }this.mo ... Aliasesthis.mo ... Optionsthis.model?.schemaif (!ap ... rn;\n  }!applyT ... Aliasesthis.mo ... gth > 0this.mo ... aliasesObject. ... liases)this.mo ...  true);this.mo ... , true)this.mo ... stinct]this._d ... tinct];this._d ... stinct]Query.p ... ntCount_estima ... ntCountthis.mo ... ntCountQuery.prototype.estimatedDocumentCount() no longer accepts a callbackthis.op ... Count';this.op ... tCount'Query.prototype.countDocuments() no longer accepts a callbackthis.op ... ments';if (mqu ... s);\n  }Query.p ... istinctthis.mo ... istincttypeof fieldQuery.prototype.distinct() no longer accepts a callbackthis.op ... tinct';this.op = 'distinct'this.er ... nct'));this.er ... inct'))new Obj ... tinct')if (fie ... ld;\n  }field != null{\n    t ... ld;\n  }this._d ...  field;this._d ... = fieldQuery.prototype.sortnew Err ... ments')'sort() ... uments'sort() takes at most 2 arguments takes at most 2 argumentsnew Err ... llish')'sort() ... ullish'sort() options argument must be an object or nullish options argument must be an object or nullishthis.options.sortthis.op ... t = {};this.op ... rt = {}options ... verrideconst s ... s.sort;sort =  ... ns.sortconst p ... t(' ');propert ... it(' ')arg.ind ... it(' ')arg.ind ...  === -1arg.indexOf(' ')arg.indexOf[arg]arg.split(' ')let property'-' ==  ...  -1 : 1'-' == property[0]property[0]propert ... ice(1);propert ... lice(1)property.slice(1)property.sliceif (spe ...       }special ... operty)sort[pr ... ascend;sort[pr ...  ascendsort[property]if (Arr ... ');\n  }!Array.isArray(pair)Array.isArray(pair)throw n ... rays');new Typ ... rrays')'Invali ... arrays'Invalid sort() argument, must be array of arrays argument, must be array of arraysconst k ... air[0];key = '' + pair[0]'' + pair[0]sort[ke ... , key);sort[ke ... ], key)sort[key]_handle ... ], key)typeof  ... of Map)arg != null!(arg i ... of Map)(arg instanceof Map)arg instanceof Maparg[key]arg.keys()arg.keyslet keykey = '' + key;key = '' + key'' + keysort[ke ... ), key)_handle ... ), key)arg.get(key)arg.getthrow n ... map.');new Typ ...  map.')'Invali ... r map.'Invalid sort() argument. Must be a string, object, array, or map. Must be a string, object, array, or mapfunctio ...  }');\n}{\n  if  ...  }');\n}val === ... ending'val === ... = 'asc'val === 1val === 'asc'val === 'ascending'{\n    return 1;\n  }if (val ... -1;\n  }val === ...  'desc'val === -1val === 'desc'val === 'descending'{\n    return -1;\n  }if (val ...  };\n  }val?.$meta != nullval?.$metareturn  ... meta };{ $meta: val.$meta }$meta: val.$metathrow n ...  ' }');new Typ ... + ' }')'Invali ...  + ' }''Invali ...  + ': ''Invali ... ' + key'Invali ... ue: { 'Invalid sort value: { Query.prototype.deleteOne() no longer accepts a callbackthis.op ... teOne';mquery. ... filter)this.merge(filter);this.merge(filter)if (fil ... ));\n  }this.er ... eOne'))new Obj ... teOne')checkRe ... tions);checkRe ... ptions)this.mo ... leteOneQuery.prototype.deleteMany() no longer accepts a callbackthis.op ... eMany';this.er ... any'));this.er ... Many'))new Obj ... eMany')this.mo ... eteManyif (opt ... ll;\n  }options ... etadata{\n    _ ... ll;\n  }_init(null);_init(null)helpers ... _init);helpers ...  _init)doc && castedcasted. ... ssion);casted. ... ession)casted.$sessionres.value = casted;res.value = castedres.valueres.value = null;res.value = nullcallbac ... asted);callbac ... casted)if (!qu ... rn;\n  }!query  ... .schema!query  ... y.model!query!query.model!query.model.schemaquery.model.schemaschema  ... .isRoot{\n    q ... ue;\n  }query._ ... .value;query._ ... g.valuequery._ ... ng.key]Query.p ... dUpdateQuery.prototype.findOneAndUpdate() no longer accepts a callbackthis.op ... pdate';this._validate();this._validate()case 2: ...  break;options = undefined;options = undefinedcase 1: ...  break;doc = filter;doc = filterfilter  ... efined;filter  ... definedif (mqu ...  );\n  }if (fil ...  );\n  }this.er ... \n    );this.er ... )\n    )new Obj ... pdate')if (doc ... c);\n  }{\n    t ... c);\n  }this._m ... e(doc);this._m ... te(doc)this._mergeUpdateoptions ... ) : {};{\n    t ... ds;\n  }this.se ... ields);this.se ... fields)delete  ... fields;delete  ... .fieldsconst r ... iginal;returnO ... riginalthis && ... riginalthis && ... el.basethis && ... s.modelthis.mo ... riginalif (opt ... al;\n  }options.new == nulloptions ... ocumentoptions ... riginalreturnO ... != null{\n    o ... al;\n  }options ... iginal;_castAr ... (this);_castAr ... s(this)if ('st ... ct;\n  }'strict ... optionsthis._m ... strict;this._m ... .strictthis.options.strictconst o ... model);options ... .model)this._o ... .model)convert ... tions);convert ... ptions)convert ... ocumentthis._u ... pdate);this._u ... update)this._c ... update)this._castUpdateconst _ ... t\n  });_opts = ... rt\n  })Object. ... rt\n  })setDefa ... nInsertthis._u ... _opts);this._u ...  _opts)setDefa ...  _opts)!this._ ... h === 0!this._updateconst $ ... pdate);$set =  ... update)clone(this._update)delete $set._id;delete $set._id$set._idthis._u ... $set };this._u ...  $set }{ $set }const r ... dOne();res = a ... ndOne()await t ... ndOne()this._findOne()this._findOnethis._u ... f Error{\n    t ... te;\n  }throw this._update;this._u ... h === 0delete  ... e.$set;delete  ... te.$setrunVali ...  false)_getOpt ...  false)if (run ... e);\n  }await t ... false);await t ...  false)this.va ...  false)this.validatethis._update.toBSONthis._u ... BSON();this._u ... oBSON()let res ... tions);this.mo ... dUpdateconst fnres = fn(res);res = fn(res)fn(res)doc = ! ... s.value!option ... s.value!option ... etadataQuery.p ... dDeleteQuery.prototype.findOneAndDelete() no longer accepts a callbackthis.op ... elete';if (mqu ... r);\n  }const i ... tadata;this.mo ... dDelete!includ ... s.value!includ ... etadataQuery.p ... Replacetypeof replacementtypeof arguments[4]Query.prototype.findOneAndReplace() no longer accepts a callbackthis.op ... place';new Obj ... place')if (rep ... t);\n  }replacement != nullthis._m ... ement);this._m ... cement)this &&\n  this.modeldelete  ... strict;delete  ... .strictconst m ... true };modelOp ...  true }{ skipId: true }skipId: true{\n    m ... ct;\n  }modelOp ... strict;modelOp ... .strictmodelOpts.strictconst u ... lOpts);update  ... elOpts)new thi ... elOpts)if (run ... ;\n    }await u ... date();await u ... idate()update.validate()update.validateupdate. ... onErrorupdate.$__throw u ... nError;update.toBSON()update.toBSON{\n    i ... or;\n  }const v ... rror();validat ... Error()validat ...  = err;validat ... ] = errvalidat ... r.path]throw v ... nError;this.mo ... ReplaceQuery.p ... indByIdif ('ne ... '];\n  }'new' in options{\n    o ... '];\n  }options ... efore';options ... before'options['new']delete  ... 'new'];delete  ... ['new']if ('re ... '];\n  }'return ... optionsoptions ... after';options ... 'after'options ... ginal']delete  ... inal'];delete  ... ginal']if (typ ... e';\n  }typeof  ... ocument{\n    o ... e';\n  }functio ...  def;\n}{\n  con ...  def;\n}opts =  ... .model)query._ ... .model)if (opt ... n];\n  }option in opts{\n    r ... n];\n  }return opts[option];opts[option]option  ... optionsreturn  ... ption];query.m ... option]opts.le ... nction'opts.leanopts.lean.transformopts.le ... m(doc);opts.le ... rm(doc)const c ... l.path;childPa ... el.pathpath ?  ... el.pathpath +  ... el.pathschema. ... el.pathschema. ... ].modelschema. ... emas[i]const o ... , doc);obj = m ... h, doc)i < obj.lengthopts.le ... bj[i]);opts.le ... obj[i])opts.le ... m(obj);opts.le ... rm(obj)_comple ...  opts);_comple ... , opts)opts.in ... etadatafunctio ... docs;\n}{\n  if  ... docs;\n}let doc ...  docs);doc = m ... , docs)mpath.g ... , docs)doc = doc.flat();doc = doc.flat()doc.flat()doc.flati < doc.lengthdoc.lengthopts.le ... oc[i]);opts.le ... doc[i])Query.p ... eUpdatethis._u ... ] : {};this._u ... [] : {}Array.i ... [] : {}doc ==  ...  === 0)(typeof ...  === 0)typeof  ... h === 0Object.keys(doc)doc instanceof QueryArray.i ... update)throw n ... ates');new Err ... dates')'Cannot ... pdates'Cannot mix array and object updatesdoc._updateif (Arr ... c);\n  }!Array. ... update)this._u ... t(doc);this._u ... at(doc)this._update.concatutils.m ... , doc);utils.m ... e, doc)castedQ ... ditionsthis._u ... tions);this._u ... ptions)const i ... ceOne';isOverw ... aceOne'op === 'replaceOne'if (isO ... s);\n  }this._u ...  true);this._u ... , true)new thi ... , true)this._update == null{ ackno ... false }acknowledged: falseconst _ ...     });_opts = ... \n    })options ... lters);removeU ... ilters)if (run ... g);\n  }{\n    a ... g);\n  }await t ... iting);await t ... riting)this.va ... riting)this.mo ... ion[op]Query.p ... e');\n};Query.p ... te');\n}Query.p ... alidateasync f ... te');\n}{\n  if  ... te');\n}Query.prototype.validate() no longer accepts a callbackawait _ ... date');await _ ... idate')_execut ... idate')if (isO ... });\n  }await c ... date();await c ... idate()castedD ... idate()castedDoc.$validateupdateV ...     });updateV ...      })Query.p ... y');\n};Query.p ... ny');\n}Query.p ... ateManyasync f ... ny');\n}{\n  ret ... ny');\n}return  ... Many');_update ... eMany')_updateThunk.callQuery.p ... ne');\n}Query.p ... dateOneasync f ... ne');\n}{\n  ret ... ne');\n}return  ... eOne');_update ... teOne')Query.p ... laceOne_update ... ceOne')Query.p ... ck);\n};Query.p ... ack);\n}if (typ ... ed;\n  }callback = doc;callback = docdoc = conditions;doc = conditionsconditions = {};conditions = {}{\n    / ... ed;\n  }callbac ... itions;callbac ... ditionsconditi ... efined;conditi ... defineddoc = undefined;doc = undefinedtypeof  ... allbacktypeof  ... optionstypeof  ... && !doc!callbackcallbac ... efined;callback = undefined_update ... llback){\n  //  ... uery;\n}query.op = op;query.op = opquery.opquery._validateOp();query._validateOp()query._validateOpdoc = doc || {};doc = doc || {}doc || {}query._ ... strict;if (!(f ... r);\n  }!(filte ... bject]'!(filte ... != null!(filte ...  Query)(filter ...  Query)filter  ... f Queryfilter. ... bject]'filter.toString()filter.toString{\n    q ... ));\n  }query.e ... , op));query.e ... ', op))new Obj ... r', op)query.merge(filter);query.merge(filter)query.mergeif (uti ... s);\n  }{\n    q ... s);\n  }query.s ... tions);query.s ... ptions)query.setOptionsquery._ ... e(doc);query._ ... te(doc)query._mergeUpdateif (cal ... ry;\n  }{\n    q ... ry;\n  }query.e ... lback);Query.p ... ansformQuery.p ... .orFailthis.tr ... ;\n  });this.tr ... s;\n  })this.transformres =>  ... es;\n  }{\n    s ... es;\n  }res.length === 0res.lengththrow _ ...  this);_orFail ... , this)res == nullcase 'replaceOne':case 'updateMany':case 'u ...  break;res &&  ... t === 0res.mat ... t === 0res.matchedCountcase 'f ... elete':case 'f ... pdate':res.value == null!this.o ... == nullcase 'deleteMany':res.del ... t === 0res.deletedCountif (typ ... y);\n  }{\n    e ... y);\n  }err = e ... query);err = e ... (query)err.call(query)err.callif (err ... e);\n  }{\n    e ... e);\n  }err = n ... lName);err = n ... elName)new Doc ... elName)query.getQuery()query.getQueryquery.m ... delNameQuery.p ... th);\n};Query.p ... ath);\n}Query.p ... clusive{\n  ret ... ath);\n}return  ...  path);isPathS ... , path)Query.p ... res;\n};Query.p ...  res;\n}Query.prototype.exectypeof opQuery.prototype.exec() no longer accepts a callback{\n    t ... op;\n  }this.op = op;this.op = opthis.op == nullthrow n ... ting');new Mon ... uting')'Query  ... cuting'Query must have `op` before executingthis.model == nullQuery must have an associated model before executingconst t ... is.op);thunk = ... his.op)opToThu ... his.op)opToThunk.get!thunkthis.op ... rty('')this.op ... object'this.op ... ns.sorttypeof  ... ns.sortthrow n ... rt()');new Err ... ort()')'Invali ... sort()'Invalid field "" passed to sort()Invalid field "" passed to sortif (thi ... ck;\n  }this._e ... != null{\n    l ... rr;\n  }let str ... ring();str = t ... tring()this.toString()this.toStringstr.length > 60str.lengthstr = s ...  '...';str = s ... + '...'str.sli ... + '...'str.slice(0, 60)str.sliceconst e ... + str);err = n ...  + str)new Mon ...  + str)'Query  ... ' + str'Query  ... uted: 'Query was already executed: !this.m ... kTracesthis.mo ... kTracesskipOri ... kTraceserr.ori ... nStack;err.ori ... onStackerr.originalStack{\n    t ... ck;\n  }this._e ... .stack;this._e ... ).stackthis.mo ... ).stacknew Error().stacknew Error()let ski ... = null;skipWra ...  = nullawait _ ... (this);await _ ... s(this)_execut ... s(this)skipWra ...  = err;skipWra ... n = errres = s ... unk]();res = s ... hunk]()skipWra ... hunk]()skipWra ... args[0]skipWra ... on.argsawait this[thunk]()this[thunk]()this[thunk]res = err.args[0];res = err.args[0]this.mo ... (error)this.mo ... eyErrorres = a ... error);res = a ...  error)await _ ...  error)_execut ...  error)_execut ... ecHooks{\n    q ... });\n  }query._ ...     });query._ ... \n    })query._ ... xecPostquery._hooksif (que ... es;\n  }query._ ... == nullquery._ ... dlewareconst o ... } : {};opts =  ...  } : {}error ? ...  } : {}{ error }op || query.op(error, ... ;\n    }query._hooks.execPreif (que ... rn;\n  }query._ ... execPreQuery.p ... ct);\n};Query.p ... ect);\n}Query.prototype.thenQuery.p ... e.catchQuery.p ... ly);\n};Query.p ... lly);\n}Query.p ... finallyQuery.p ...  }`;\n};Query.p ... } }`;\n}Query.p ... ingTag]return  ... op} }`;`Query  ... .op} }`Query.prototype.prethis._h ... ', fn);this._h ... c', fn)this._hooks.preQuery.prototype.postthis._hooks.post{\n  let ... ons);\n}const b ... schema;baseSch ...  schemathis._m ... inatorsthis._m ... != nullbaseSch ... inatorsconst _ ... \n    );_schema ... ]\n    )Object. ... ]\n    )Object. ... s).findif (_sc ... ;\n    }_schema != nullschema = _schema;schema = _schemalet upsert;if ('up ... rt;\n  }'upsert ... options{\n    u ... rt;\n  }upsert  ... upsert;upsert  ... .upsertthis.options.upsertcastUpd ... itions){\n    s ... ble\n  }strict: ... .strictupsert: upsertthis.op ... Filtersoverwri ... mutableQuery.p ... opulateif (!ar ... is;\n  }!args.some(Boolean)args.some(Boolean)args.someopts =  ... Optionsopts.lean != nulllean = opts.lean(popula ... == null(popula ... s.lean)populat ... ns.leanpopulat ... optionspopulat ...  || {};populat ... s || {}populat ... = lean;populat ...  = leanif (!ut ... {};\n  }!utils. ... pulate)utils.i ... pulate)opts.populateopts.populate = {};opts.populate = {}pop = opts.populatefor (co ... ns;\n  }{\n    c ... ns;\n  }const p ... s.path;path =  ... ns.pathpop[pat ... opulatepop[path]pop[path].populatepopulat ... ulate);populat ... pulate)pop[pat ... pulate)pop[pat ... .concatQuery.p ... edPathsobj = t ... e || {}this._m ... e || {}const r ... s(obj);ret = O ... ys(obj)for (co ... ');\n  }pop = obj[path]!Array. ... pulate)pop.populate_getPop ... + '.');_getPop ...  + '.'){\n    l ... ');\n  }list.pu ... .path);list.pu ... p.path)list.pushprefix + pop.pathprefix  ... h + '.'Query.prototype.cast{\n  obj ... ;\n  }\n}obj ||  ... tions);obj ||  ... itions)(obj =  ... itions)obj = t ... ditionsobj !=  ... torKey)obj.has ... torKey)obj.hasOwnPropertyconst o ... sert };opts =  ... psert }{ upser ... psert }this.op ... .upsertopts.st ... strict;opts.st ... .strictopts.strictopts.st ... tQuery;opts.st ... ctQueryopts.strictQuerythis.op ... ctQuery'saniti ... Options{\n    o ... er;\n  }opts.sa ... Filter;opts.sa ... eFilteropts.sanitizeFiltercast(mo ... , this){\n    / ... rr;\n  }typeof err.setModelerr.setModelerr.setModel(model);err.setModel(model)Query.p ... tFields{\n  let ... elds;\n}let sel ...    out;if (fie ...   }\n  }elemMatchKeys = [];elemMatchKeys = []fields[ ... emMatchselecte ...  = {});selecte ... d = {})(selected = {})selecte ... s[key];selecte ... ds[key]selected[key]elemMat ... h(key);elemMat ... sh(key)elemMatchKeys.pushif (sel ...   }\n  }out = t ... ected);out = t ... lected)this.ca ... lected)i < ele ... .lengthelemMatchKeys.lengthkey = e ... eys[i];key = e ... Keys[i]elemMatchKeys[i]fields[ ... t[key];fields[ ... ut[key]out[key]Query.p ... lyPaths!this.modelthis._f ...  || {};this._f ... s || {}this._fields || {}const s ... ? true;schemaL ... ?? truethis._m ... ?? trueif (sch ... n);\n  }{\n    h ... n);\n  }helpers ... ction);helpers ... ection)helpers.applyPathslet _se ... = true;_select ...  = true_select ... edPathsif ('se ... hs;\n  }'select ... options'select ... dPaths'{\n    _ ... hs;\n  }_select ... dPaths;if (_se ... e);\n  }{\n    s ... e);\n  }selectP ... ulate);selectP ... pulate)Query.p ... is);\n};Query.p ... his);\n}Query.p ... .cursorthis.se ... (opts);this.se ... s(opts)return  ... r(err);(new Qu ... or(err)(new Qu ... rkError(new Qu ... (this))new Que ... r(this)Query.p ... ailableval !=  ... Object'val !=  ... nction'val.con ... Object'opts = val;opts = valopts && ... object'Object.keys(opts)key === ... itdata'key === 'awaitData'awaitDatakey === 'awaitdata'awaitdata{ // ba ...       }this.op ... ts[key]this.op ... tData']!!opts[key]!opts[key]opts[key]this.op ... : true;this.op ...  : truethis.op ... ailableQuery.p ... ms);\n};Query.p ... ams);\n}Query.prototype.nearconst s ... Sphere;sphere  ... rSpherethis._m ... rSphereparams. ... ere });params. ... here }){ cente ... phere }center: arguments[0]spherical: sphereparams. ... ts[0]);params. ... nts[0])utils.i ... nts[0])typeof  ... hericalargumen ... hericalargumen ... sphere;argumen ...  spherenew Typ ... ument')invalid argumentcenter: ... nts[1]]typeof  ... nts[1])center: arguments[1]utils.i ... nts[1])params. ... ts[1]);params. ... nts[1])center: ... nts[2]]return  ... arams);Query.b ... params)Query.b ... r.applyQuery.base.nearQuery.p ... rSpherethis.ne ... ments);this.ne ... uments)this.near.applythis.nearQuery.p ... );\n  };Query.p ... ();\n  }Query.p ... erator]{\n    / ... ();\n  }return  ... rsor();this.cursor()Query.p ... ur);\n};Query.p ...  ur);\n}Query.prototype.boxfunctio ...  ur);\n}{\n  if  ...  ur);\n}if (!Ar ... ll;\n  }!Array. ... ect(ll)!Array.isArray(ll)Array.isArray(ll)utils.isObject(ll){\n    u ... ll;\n  }ur = ll.ur;ur = ll.urll.urll = ll.ll;ll = ll.llll.llreturn  ... l, ur);Query.b ... ll, ur)Query.base.box.callQuery.base.boxQuery.p ... circle;Query.p ... .circleQuery.p ... .centerQuery.base.circleQuery.p ... ts);\n};Query.p ... nts);\n}{\n  if  ... nts);\n}argumen ... Object'arguments[0] != nullargumen ... tructorargumen ... or.nameargumen ... = true;argumen ...  = truearguments[1] != nullQuery.b ... ments);Query.b ... uments)Query.b ... e.applyQuery.p ... usively{\n  ret ... lds);\n}isInclu ... fields)isExclu ... fields)Query.p ... .model;Query.p ... e.modelmodule. ...  Query;module. ... = Query/home/insomnia/repos/mongoose/lib/queryHelpers.js
 * Prepare a set of path options for query population. This is the MongooseQuery
 * version
 *
 * @param {Query} query
 * @param {Object} options
 * @return {Array}
  lean options should trickle through all queries// lean ... queries
 * If the document is a mapped discriminator type, it returns a model instance for that type, otherwise,
 * it returns an instance of the given model.
 *
 * @param {Model}  model
 * @param {Object} doc
 * @param {Object} fields
 *
 * @return {Document}
  determine if query is selecting or excluding fields// dete ...  fields Collapse minus paths// Coll ... s paths Skip `$meta` and `$slice`// Skip ... $slice` Potentially add back minus paths based on schema-level path config// Pote ...  config and whether the projection is inclusive// and  ... clusive If the path isn't selected by default or the projection is not// If t ...  is not inclusive, minus path is treated as equivalent to `key: 0`.// incl ... ey: 0`. But we also allow using `-name` to remove `name` from an inclusive// But  ... clusive projection if `name` has schema-level `select: true`.// proj ...  true`. Make a note of minus paths that are overwriting paths that are// Make ... hat are included by default.// incl ... efault. if selecting, apply default schematype select:true fields// if s ...  fields if excluding, apply schematype select:false fields// if e ...  fields Any leftover plus paths must in the schema, so delete them (gh-7017)// Any  ... h-7017) user didn't specify fields, implies returning all fields.// user ... fields. only need to apply excluded fields and delete any plus paths// only ... s paths Skip applying default projections to fields with non-defining// Skip ... efining projections, like `$slice`// proj ... $slice` avoid recursion// avoid recursion arrays// arrays nested schemas// nested schemas Special case: if discriminator key is the only field that would// Spec ... t would be projected in, remove it.// be p ... ove it. If schema-level selected not set, nothing to do// If s ... g to do User overwriting default exclusion// User ... clusion If set to 0, we're explicitly excluding the discriminator key. Can't do this for all fields,// If s ... fields, because we have tests that assert that using `-path` to exclude schema-level `select: true`// beca ... : true` fields counts as an exclusive projection. See gh-11546// fiel ... h-11546 forced inclusion// forced inclusion if there are other fields being included, add this one// if t ... his one if no other included fields, leave this out (implied inclusion)// if n ... lusion) check for parent exclusions// chec ... lusions Special case: if user has included a parent path of a discriminator key,// Spec ... or key, don't explicitly project in the discriminator key because that will// don' ... at will project out everything else under the parent path// proj ... nt path
 * Set each path query option to lean
 *
 * @param {Object} option
 './options/populateOptions''./helpers/discriminator/checkEmbeddedDiscriminatorKeyProjection'_populatemakeLeaninitOptsminusPathsToSkipminusPathskeyIndexexcludedanalyzeSchemaplusPathhasPlusPathaddedPathanalyzePath_addedPathsPrepare a set of path options for query population. This is the MongooseQuery
versionIf the document is a mapped discriminator type, it returns a model instance for that type, otherwise,
it returns an instance of the given model.Set each path query option to leanconst P ... ions');Populat ... tions')./options/populateOptions/options/populateOptionsconst c ... tion');checkEm ... ction')./helpers/discriminator/checkEmbeddedDiscriminatorKeyProjection/helpers/discriminator/checkEmbeddedDiscriminatorKeyProjectionexports ... pop;\n};exports ...  pop;\n}exports ... tionsMQfunctio ...  pop;\n}{\n  con ...  pop;\n}const _ ... pulate;_popula ... opulatequery._ ... opulateconst p ... ), []);pop = O ... ]), [])Object. ... ]), [])(vals,  ... [key]])vals.co ... [key]])[_populate[key]]_populate[key]options.lean != nullpop\n    ... lean));pop\n    ... .lean))pop\n    ... forEachpop\n    ... = null)pop\n      .filterp => (p ... == null(p && p ... == null(p && p ... s.lean)p && p. ... ns.leanp && p.optionsp.options.leanmakeLea ... s.lean)const s ... | null;query & ... || nullquery & ... sessionquery & ... optionsif (ses ... });\n  }pop.for ...     });pop.for ... \n    })pop.forEachquery._fieldsForExeci < pop.lengthpop.lengthpop[i]  ... Optionspop[i]pop[i]  ...     });pop[i]  ...      })new Pop ...      })...pop[i]_queryP ... jection_localM ... y.modelpop[i]. ... ection;pop[i]. ... jectionpop[i]. ... .model;pop[i]. ... y.modelpop[i]._localModelreturn pop;exports ... ts);\n};exports ... pts);\n}exports.createModel{\n  mod ... pts);\n}const d ...   null;discrim ...    nullmodel.s ...    nullconst k ...   null;key = d ...    nullvalue = doc[key]doc[key]key &&  ... inatorskey && valueconst d ... value);discrim ...  value)model.d ...  value)model.d ... [value]getDisc ...  value)const _ ... ields);_fields ... Fields)clone(u ... Fields)exports ... chema);exports ... schema)exports.applyPathsnew dis ... , true)const _ ... ue\n  };_opts = ... rue\n  }{\n    s ... rue\n  }isNew: falsewillInit: true{\n    _ ... ts;\n  }_opts.d ... faults;_opts.d ... efaults_opts.defaultsreturn  ... _opts);new mod ...  _opts)exports ... AndInitconst i ... efined;initOpt ... definedpopulat ... defined{ popul ... edIds }populat ... atedIdscasted  ... ptions)exports ... ptions)try {\n  ... d);\n  }casted. ... lback);casted. ... llback)casted.$initcatch ( ... d);\n  }let exclude;const m ...  Set();minusPa ... w Set()const m ... s = [];minusPaths = []keys[i][0] !== '-'key === '-_id'fields['_id'] = 0;fields['_id'] = 0fields['_id']minusPa ... ce(1));minusPa ... ice(1))minusPaths.pushkey.slice(1)keyInde ... .length++keyIndexlet keyIndex = 0keyIndex = 0keys[ke ... === '+'keys[keyIndex][0]keys[keyIndex]const f ... ndex]];field = ... Index]]fields[ ... Index]]!isDefi ... (field)isDefin ... (field)keys[ke ... gth > 1keys[ke ... = '_id'keys.length > 1keys[ke ...  !fieldkeys[ke ... != nullkeys[ke ... atorKeyexclude = !field;exclude = !fieldconst t ... (path);type =  ... h(path)if ((!t ...       }(!type  ... = false(!type  ... lected)!type | ... elected!type!type.selectedtype.selectedexclude !== falsefields[path] = 0;fields[path] = 0type && ... = falsetype && ... electedminusPa ... (path);minusPa ... d(path)minusPathsToSkip.addconst selected = [];selected = []const excluded = [];excluded = []const stack = [];stack = []analyze ... chema);analyze ... schema)case tr ...  break;const fieldNamefields[ ... e] = 0;fields[ ... me] = 0fields[fieldName]case fa ...  break;schema  ... ['_id']schema. ... .selectfields._id = 0;fields._id = 0fields._idif (min ...       }minusPa ... ldName)minusPathsToSkip.hasisPathS ... ldName)fields[ ... ] || 1;fields[ ... e] || 1case un ...  break;fields == nullfields || {}key.startsWith('+')functio ... hs;\n  }{\n    p ... hs;\n  }prefix  ...  = '');prefix  ... x = '')(prefix = '')prefix = ''stack.i ...  !== -1stack.i ... schema)stack.indexOfstack.push(schema);stack.push(schema)stack.pushaddedPaths = []if (pre ... + path;path =  ... + path;path =  ...  + pathprefix + '.' + pathtype.$i ... ('.$*')type.$isSchemaMapconst p ... + path;plusPat ...  + path'+' + pathconst h ... fields;hasPlus ...  fieldsfields  ...  fieldsplusPath in fieldstype.op ... lusPathtype.op ... = falsetype.optionstype.options.select!hasPlusPathexcluded.push(path);excluded.push(path)excluded.pushlet add ...  type);addedPa ... , type)analyze ... , type)if (add ...       }addedPa ... ntArrayaddedPa ... seArrayaddedPa ... y(type)addedPath == null!Array.isArray(type)Array.isArray(type)addedPa ... aster);addedPa ... caster)analyze ... caster)addedPath != nulladdedPa ... dPath);addedPa ... edPath)addedPaths.push_addedP ... , path)analyze ... , path)checkEm ... Paths);checkEm ... dPaths)stack.pop();stack.pop()stack.popreturn addedPaths;functio ... th;\n  }{\n    i ... th;\n  }typeof type.selectedtype.se ... s[path]type.se ... = falseif (san ...       }if (!ex ... ;\n    }!exclud ... s[path]!exclud ... != null!exclud ... atorKey!exclud ... elected!excludepath == ... atorKeyfields[path] != null!fields[path]if (exc ... ;\n    }exclude ... s[path]exclude ... != nullexclude ... electeddelete  ... sPath];delete  ... usPath]fields[plusPath]exclude ... jectionexclude ... f(path)exclude ... gth > 1!~keys.indexOf(path)~keys.indexOf(path)keys.indexOf(path)!sanitizeProjectionexclude ... = falsecur.len ... eces[i]exclude ...  !== -1exclude ... Of(cur)excluded.indexOfif (!ex ... }\n    }!exclud ...  false)(type & ...  false)type && ... | falsetype && ... orChecktype && type.optionstype.op ... orCheckconst p ... false);project ...  false)get(fie ...  false)if (pro ...       }project ... object'(type.s ... (path);(type.s ... h(path)(type.s ... d).push(type.s ... cluded)type.se ... xcludedreturn  ... l;\n  };functio ... al;\n  }option. ...  = {});option. ... s = {})option.options(option ... s = {})option.options = {}val !=  ... rtuals)val.virtualsval = O ... , val);val = O ... }, val)Object. ... }, val)val.vir ...  + 1));val.vir ... h + 1))val.vir ...     mapval.vir ... + '.'))val.vir ...  filterpath => ...  + '.')typeof  ...  + '.')option.path + '.'option.pathpath => ... th + 1)path.sl ... th + 1)option. ... gth + 1option.path.lengthoption. ...  = val;option. ... n = valoption.options.lean/home/insomnia/repos/mongoose/lib/schema/array.js/home/insomnia/repos/mongoose/lib/schema
 * Array SchemaType constructor
 *
 * @param {String} key
 * @param {SchemaType} cast
 * @param {Object} options
 * @param {Object} schemaOptions
 * @inherits SchemaType
 * @api public
  lazy load// lazy load support { type: Woot }// supp ...  Woot } do not alter user arguments// do n ... guments support { type: 'String' }// supp ... ring' } Leave it up to `cast()` to convert the array// Leav ... e array
 * This schema type's name, to defend against minifiers that mangle
 * function names.
 *
 * @api public
 
 * Options for all arrays.
 *
 * - `castNonArrays`: `true` by default. If `false`, Mongoose will throw a CastError when a value isn't an array. If `true`, Mongoose will wrap the provided value in an array before casting.
 *
 * @static
 * @api public
 
 * Sets a default option for all Array instances.
 *
 * #### Example:
 *
 *     // Make all Array instances have `required` of true by default.
 *     mongoose.Schema.Array.set('required', true);
 *
 *     const User = mongoose.model('User', new Schema({ test: Array }));
 *     new User({ }).validateSync().errors.test.message; // Path `test` is required.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @api public
 
 * Attaches a getter for all Array instances
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 !
 * Inherits from SchemaType.
 /*!\n *  ... pe.\n */
 * Override the function the required validator uses to check whether an array
 * passes the `required` check.
 *
 * #### Example:
 *
 *     // Require non-empty array to pass `required` check
 *     mongoose.Schema.Types.Array.checkRequired(v => Array.isArray(v) && v.length);
 *
 *     const M = mongoose.model({ arr: { type: Array, required: true } });
 *     new M({ arr: [] }).validateSync(); // `null`, validation fails!
 *
 * @param {Function} fn
 * @return {Function}
 * @function checkRequired
 * @api public
 !
 * Virtuals defined on this array itself.
 /*!\n *  ... lf.\n */
 * Check if the given value satisfies the `required` validator.
 *
 * @param {Any} value
 * @param {Document} doc
 * @return {Boolean}
 * @api public
  `require('util').inherits()` does **not** copy static properties, and// `req ... es, and plugins like mongoose-float use `inherits()` for pre-ES6.// plug ... re-ES6.
 * Adds an enum validator if this is an array of strings or numbers. Equivalent to
 * `SchemaString.prototype.enum()` or `SchemaNumber.prototype.enum()`
 *
 * @param {...String|Object} [args] enumeration values
 * @return {SchemaArray} this
 
 * Overrides the getters application for the population special-case
 *
 * @param {Object} value
 * @param {Object} scope
 * @api private
  means the object id was populated// mean ... pulated Check nesting levels and wrap in array if necessary// Chec ... cessary No need to wrap empty arrays// No n ...  arrays
 * Casts values for set().
 *
 * @param {Object} value
 * @param {Document} doc document that triggers the casting
 * @param {Boolean} init whether this is an initialization cast
 * @api private
  Special case: if this index is on the parent of what looks like// Spec ... ks like GeoJSON, skip setting the default to empty array re: #1668, #3233// GeoJ ... , #3233 Perf: creating `arrayPath` is expensive for large arrays.// Perf ... arrays. We only need `arrayPath` if this is a nested array, so// We o ... ray, so skip if possible.// skip if possible. rethrow// rethrow gh-2442: if we're loading this from the db and its not an array, mark// gh-2 ... y, mark the whole array as modified.// the  ... dified.
 * Casts values for queries.
 *
 * @param {String} $conditional
 * @param {any} [value]
 * @api private
 
 * Add a virtual to this array. Specifically to this array, not the individual elements.
 *
 * @param {String} name
 * @param {Object} [options]
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$all` is the function Mongoose calls to cast `$all` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaArray
 * @instance
 * @api public
  `$in` is special because you can also include an empty array in the query// `$in ... e query like `$in: [1, []]`, see gh-5913// like ... gh-5913
 * Returns this schema type's representation in a JSON schema.
 *
 * @param [options]
 * @param [options.useBsonType=false] If true, return a representation with `bsonType` for use with MongoDB's `$jsonSchema`.
 * @returns {Object} JSON schema properties
 $exists'./operators/exists''./operators/type''../options/schemaArrayOptions''../schemaType''./mixed''../options/virtualOptions''../virtualType''../helpers/arrayDepth''../cast''../helpers/query/isOperator'castToNumber'./operators/helpers'createJSONSchemaTypeDefinition'../helpers/createJSONSchemaTypeDefinition'geospatial'./operators/geospatial''../helpers/discriminator/getDiscriminatorByValue'EmbeddedDocisNestedArraySymbol'mongoose#isNestedArray'emptyOptsSchemaArray'../types'castOptions'./index.js'defaultArr'defaultValue'defaultFnschemaNameOptionsConstructor_checkRequiredcheckRequired_isRef'`enum` can only be set on an array of strings or numbers '', not 'enumArray_applySettersvalueDepthindexedPathsarrayPathpathIndexarrayGeojsonPath'.coordinates'rawValuearrayPathIndex_arrayParentPath'You can only add an embedded discriminator on ''a document array, '' is a plain array'requiredValidator_castForQueryprotoCastForQueryprotoCastconstructorCastForQuerysetter$conditionalHandlers'Can\'t use '' with Array.''VirtualType''Cannot set populate virtual as a property of an array'cast$all$$contextcast$elemMatch$all$optionscast$geoIntersectscreateLogicalQueryOperatorHandlerlogicalQueryOperatorHandler'conditional '' requires an array'cast$nearcast$within$regextoJSONSchemaembeddedSchemaTypegetEmbeddedSchemaTypeautoEncryptionTypeArray SchemaType constructorSchemaType
This schema type's name, to defend against minifiers that mangle
function names.Options for all arrays.

- `castNonArrays`: `true` by default. If `false`, Mongoose will throw a CastError when a value isn't an array. If `true`, Mongoose will wrap the provided value in an array before casting.Sets a default option for all Array instances.

#### Example:

// Make all Array instances have `required` of true by default.
mongoose.Schema.Array.set('required', true);

const User = mongoose.model('User', new Schema({ test: Array }));
new User({ }).validateSync().errors.test.message; // Path `test` is required.The option you'd like to set the value for
value for option
Attaches a getter for all Array instancesgetterOverride the function the required validator uses to check whether an array
passes the `required` check.

#### Example:

// Require non-empty array to pass `required` check
mongoose.Schema.Types.Array.checkRequired(v => Array.isArray(v) && v.length);

const M = mongoose.model({ arr: { type: Array, required: true } });
new M({ arr: [] }).validateSync(); // `null`, validation fails!Check if the given value satisfies the `required` validator.Adds an enum validator if this is an array of strings or numbers. Equivalent to
`SchemaString.prototype.enum()` or `SchemaNumber.prototype.enum()`enumeration values
...(String|Object)=...(String|Object)Overrides the getters application for the population special-caseCasts values for set().document that triggers the casting
whether this is an initialization cast
Casts values for queries.Add a virtual to this array. Specifically to this array, not the individual elements.Contains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$all` is the function Mongoose calls to cast `$all` filter operators.SchemaArray
Returns this schema type's representation in a JSON schema.If true, return a representation with `bsonType` for use with MongoDB's `$jsonSchema`.
options.useBsonTypeJSON schema propertiesconst $ ... ists');$exists ... xists')require ... xists')./operators/exists/operators/existsconst $ ... type');$type = ... /type')require ... /type')./operators/type/operators/typeSchemaA ... tions')'../opt ... ptions'../options/schemaArrayOptions/options/schemaArrayOptions../schemaTypeconst C ... tError;CastErr ... stErrorSchemaType.CastErrorrequire('./mixed')./mixed/mixedVirtual ... tions')../options/virtualOptions/options/virtualOptions../virtualTypeconst a ... epth');arrayDe ... Depth')require ... Depth')'../hel ... yDepth'../helpers/arrayDepth/helpers/arrayDepthrequire('../cast')../cast'../hel ... erator'../helpers/query/isOperatorconst c ... Number;castToN ... oNumberrequire ... oNumber'./oper ... elpers'./operators/helpers/operators/helperscreateJ ... ition')createJ ... initionrequire ... ition')'../hel ... nition'../helpers/createJSONSchemaTypeDefinition/helpers/createJSONSchemaTypeDefinitionconst g ... tial');geospat ... atial')require ... atial')'./oper ... patial'./operators/geospatial/operators/geospatial'../hel ... yValue'../helpers/discriminator/getDiscriminatorByValuelet EmbeddedDoc;const i ... rray');isNeste ... Array')'mongoo ... dArray'mongoose#isNestedArrayconst e ... ze({});emptyOp ... eze({})Embedde ... edded);Embedde ... bedded)(Embedd ... bedded)Embedde ... mbeddedrequire ... mbeddedrequire('../types')../typeslet typ ... 'type';typeKey = 'type'if (sch ... ey;\n  }schemaO ... typeKeytypeKey ... ypeKey;this.sc ... ptions;this.schemaOptionsif (cas ... er;\n  }let cas ... s = {};castOptions = {}utils.isPOJO(cast)if (cas ...       }cast[typeKey]castOpt ... (cast);castOpt ... e(cast)clone(cast)delete  ... peKey];delete  ... ypeKey]castOptions[typeKey]cast =  ... peKey];cast = cast[typeKey]cast = Mixed;cast = Mixedoptions.ref != nullcastOpt ... == nullcastOptions.refcastOpt ... ns.ref;castOpt ... ons.refcast === Objectconst n ... (cast);name =  ... e(cast)typeof  ... e(cast)typeof castutils.g ... e(cast)const T ... x.js');Types = ... ex.js')require ... ex.js')./index.jsconst c ... : cast;caster  ...  : castTypes.h ...  : castTypes.h ... y(name)Types.hasOwnPropertyTypes[name]this.ca ... caster;this.ca ...  casterthis.ca ... tructorthis.ca ... maArraythis.ca ... = true;this.ca ...  = truethis.ca ... Symbol]typeof  ... hemaMaptypeof caster!caster ... ocumentcaster. ... ocument!caster.$isSchemaMapcaster.$isSchemaMappath =  ... l : keythis.ca ... l : keythis.ca ... ddedDocthis.casterthis.ca ... tions);this.ca ... ptions)new cas ... ptions)this.caster = caster!(this. ... dedDoc)(this.c ... dedDoc)this.ca ...  = key;this.ca ... h = keythis.caster.paththis.$e ... caster;this.$e ... .casterthis.$e ... emaTypethis.$i ... = true;this.$i ...  = truethis.$i ... seArraySchemaT ... rray');SchemaT ... Array')SchemaType.calllet defaultArr;if (thi ... n';\n  }this.de ... != nullthis.defaultValue{\n    d ... n';\n  }default ... tValue;default ... ltValuefn = ty ... ction';fn = ty ... nction'typeof defaultArrif (!(' ... n);\n  }!('defa ... != null!('defa ... n this)('defau ... n this)'defaul ... in thisconst d ... \n    };default ... ;\n    }fn\n     ...    : []default ... l(this)defaultArr.calldefault ...    : []defaultArr != null[].conc ... ultArr)default ...  = !fn;default ... s = !fndefault ... Setters!fnthis.de ... ultFn);this.de ... aultFn)this.defaultSchemaA ... Array';SchemaA ... 'Array'SchemaA ... emaNameSchemaA ... true };SchemaA ...  true }SchemaArray.options{ castN ...  true }castNonArrays: trueSchemaA ... s = {};SchemaA ... ns = {}SchemaA ... OptionsSchemaA ... pe.set;SchemaA ... ype.setSchemaArray.setSchemaType.setSchemaA ... s = [];SchemaA ... rs = []SchemaArray.settersSchemaA ... pe.get;SchemaA ... ype.getSchemaArray.getSchemaType.getSchemaA ... otype);SchemaA ... totype)SchemaType.prototypeSchemaA ... aArray;SchemaA ... maArraySchemaA ... tructorSchemaA ... ptions;SchemaA ... quired;SchemaA ... equiredSchemaT ... equiredSchemaA ... = null;SchemaA ...  = nullSchemaA ... irtualsSchemaA ... ue);\n};SchemaA ... lue);\n}typeof  ... , true)SchemaT ... , true)SchemaType._isRefreturn !!value;!!valueconst _ ... ired();_checkR ... uired()typeof  ... uired()typeof  ... equiredthis.co ... equiredthis.co ... uired()SchemaA ... uired()_checkR ... (value)SchemaA ... his;\n};SchemaA ... this;\n}SchemaA ... pe.enumlet arr = this;arr = thiswhile ( ... ak;\n  }{\n    c ... ak;\n  }const i ... stance;instanc ... nstancearr &&\n ... nstancearr &&\n ... .casterarr.casterarr.caster.instanceinstance === 'Array'arr = arr.caster;arr = arr.casterinstanc ... Number'instanc ... String'throw n ... tance);new Err ... stance)'`enum` ... nstance'`enum` ... , not ''`enum` ... mbers '`enum` can only be set on an array of strings or numbers , not let enu ... uments;enumArr ... gumentsif (!Ar ... y);\n  }utils.i ... uments)enumArr ... Array);enumArr ... mArray)utils.o ... mArray)arr.cas ... Array);arr.cas ... mArray)arr.cas ... m.applyarr.caster.enumSchemaA ... ret;\n};SchemaA ...  ret;\n}SchemaA ... Gettersif (sco ... ue;\n  }scope ! ... s.path)scope ! ... != nullscope.$__ != nullscope.$__scope.$ ... s.path)scope.$populatedconst r ... scope);ret = S ...  scope)SchemaT ...  scope)SchemaT ... rs.callSchemaT ... GettersSchemaA ... al);\n};SchemaA ... Val);\n}SchemaA ... Settersthis.ca ... nArraysthis.ca ... seArraySchemaA ... nArrays!this[i ... Symbol]this[is ... Symbol]let depth = 0;depth = 0arr !=  ... ntArrayarr !=  ... seArrayarr != nullarr.$isMongooseArray!arr.$i ... ntArrayarr.$is ... ntArray++depth;++deptharr = a ... ructor;arr = a ... tructorarr.cas ... tructorvalue ! ... h !== 0value.length !== 0value.lengthvalueDe ... (value)arrayDepth(value)valueDe ... rayItemvalueDe ... < depthvalueDe ... pth.maxvalueDepth.minvalueDepth.maxi < depthlet i = ... pth.maxi = valueDepth.maxvalue = [value];value = [value][value]return  ... orVal);SchemaT ... iorVal)SchemaT ... SettersSchemaA ... is);\n};SchemaA ... his);\n}SchemaA ... pe.cast{\n  //  ... his);\n}Mongoos ... Array);Mongoos ... .Array)(Mongoo ... .Array)Mongoos ... ).Arrayrequire ... ).Arraylet l;if (Arr ... ue;\n  }len = value.lengthif (!le ... }\n    }!len && doc!lenconst i ... aths();indexes ... Paths()doc.sch ... Paths()doc.sch ... edPathsconst a ... s.path;arrayPa ... is.pathi = 0,  ... .lengthl = indexes.lengthconst p ... yPath];pathInd ... ayPath]indexes ... ayPath]indexes[i][0]indexes[i]pathInd ... == '2d'pathInd ... sphere'pathIndex === '2d'arrayGe ...  : nullthis.pa ...  : nullthis.pa ... nates')this.path.endsWith.coordinatesthis.pa ... f('.'))this.path.substringthis.pa ... Of('.')this.pa ... IndexOfarrayGe ... != nullconst p ... nPath];pathInd ... onPath]indexes ... onPath]options ... tyOpts;options ... ptyOptsoptions || emptyOptslet raw ...  value;rawValu ... : valueutils.i ... : valuevalue.__arraylet pat ... s.path;path =  ... is.pathoptions ... is.pathoptions ... thIndexpath += ... hIndex;path += ... thIndex'.' + o ... thIndexvalue = ...  this);value = ... , this)Mongoos ... , this)rawValu ... _array;rawValu ... __arrayif (ini ... ;\n    }init && ... s.path)init && ... != nullinit && doc != nulldoc.$po ... s.path)const c ... caster;caster = this.castercaster. ... seArrayif (cas ... }\n    }caster  ... = Mixedthis.ca ... = MixedrawValue.lengthconst opts = {};options.arrayPathopts.ar ... ex = i;opts.ar ... dex = iopts.arrayPathIndexcaster. ... != nullcaster. ... entPathoptions ... tedDocsopts.hy ... edDocs;rawValu ...  opts);rawValu ... , opts)rawValue[i]caster. ... , opts)caster.applySettersthrow n ...  this);new Cas ... , this)'[' + e.kind + ']''[' + e.kinde.kindthis.path + '.' + ithis.path + '.'this.op ... nArraysif (ini ... t);\n  }init || ... sOption{\n    / ... t);\n  }if (!!d ... ;\n    }!!doc && !!init!!doc!!init!initdoc.mar ... .path);doc.mar ... s.path)doc.markModifiedreturn  ...  init);this.ca ... , init)SchemaA ... opulate{\n    l ... ue;\n  }const r ...  value;value._ ... : valuecaster.castSchemaA ... Object;SchemaA ... oObjectSchemaA ... gs);\n};SchemaA ... rgs);\n}SchemaA ... minator{\n  let ... rgs);\n}if (arr ... ;\n    }arr ==  ... nction'arr == nulltypeof arr'You ca ...  array''You ca ... is.path'You ca ... rray, ''You ca ... or on 'You can only add an embedded discriminator on a document array,  is a plain arrayreturn  ... .args);arr.dis ... ..args)arr.discriminatorSchemaA ... ype;\n};SchemaA ... type;\n}SchemaA ... e.clone{\n  con ... type;\n}schemat ... ptions)new thi ... ptions)schemat ... lice();schemat ... slice()schemat ... idatorsthis.va ... slice()this.va ... s.slicethis.validatorsthis.re ... definedthis.re ... lidator{\n    s ... or;\n  }schemat ... idator;schemat ... lidatorSchemaA ... val;\n};SchemaA ...  val;\n}SchemaA ... orQuery{\n  let ...  val;\n}let Con ... ructor;Constru ... tructorval &&\n ... atorKeyval &&\n ... optionsval &&\n ... .schemaval &&\n ... inatorstypeof  ... orKey]]val[Con ... torKey]Constru ... orKey]]Constru ... rKey]];const c ... rKey]);constru ... orKey])proto = ... ototypethis.ca ... ototypeconst p ... rQuery;protoCa ... orQueryproto & ... orQueryproto.castForQueryconst p ... o.cast;protoCa ... to.castproto && proto.castproto.castconst c ... rQuery;constru ... orQueryConstru ... orQuerythis.se ...     });this.se ... \n    })this.se ... forEachthis.se ... verse()this.setters.reversethis.setterssetter  ... ;\n    }val = s ...  this);val = s ... , this)setter. ... , this)setter.callval = v ...     });val = v ... \n    })val.map ... \n    })utils.i ... emMatchutils.isObject(v)v.$elemMatchv = pro ... ntext);v = pro ... ontext)protoCa ... ontext)protoCa ... ry.callv = pro ... er, v);v = pro ... ter, v)protoCa ... ter, v)protoCast.callv = con ... ntext);v = con ... ontext)constru ... ontext)constru ... ry.callv = new ... tor(v);v = new ... ctor(v)new Constructor(v)if (pro ... l);\n  }{\n    v ... t);\n  }val = p ... ntext);val = p ... ontext)val = p ... , val);val = p ... r, val)protoCa ... r, val)if (con ... l);\n  }val = n ... r(val);val = n ... or(val)new Constructor(val)SchemaA ... \n  }\n};SchemaA ... ;\n  }\n}let handler;if ($co ... t);\n  }$conditional != null{\n    h ... t);\n  }handler ... ional];handler ... tional]this.$c ... tional]this.$c ... andlersif (!ha ... ;\n    }!handlerthrow n ... ray.');new Err ... rray.')'Can\'t ... Array.''Can\'t ... itionalCan't use  with Array.handler ... ontext)handler.callthis._c ... ontext)this._castForQuerySchemaA ... ual;\n};SchemaA ... tual;\n}SchemaA ... virtualfunctio ... tual;\n}{\n  if  ... tual;\n}if (nam ... s);\n  }name in ... alType'name in ... ualTypegetCons ... alType'getCons ... e(name)this.vi ... ptions)this.virtualname.pathname.optionsnew Vir ... ptions)if (uti ... ');\n  }utils.h ... Path'])['ref', 'refPath']Cannot set populate virtual as a property of an arraynew Vir ... , name)this.vi ... == nullthis.virtualsthis.virtuals = {};this.virtuals = {}this.vi ... irtual;this.vi ... virtualthis.virtuals[name]return virtual;if (!Ar ... l];\n  }{\n    v ... l];\n  }val = v ...  this);val = v ... , this)val.map ... , this)(v) =>  ... h];\n  }{\n    i ... h];\n  }!utils.isObject(v)if (v.$ ... ;\n    }v.$elemMatch != nullreturn  ... ext) };{ $elem ... text) }$elemMa ... ontext)cast(th ... ontext)this.ca ... .schemathis && ... contextthis.$$contexto[this.path] = v;o[this.path] = vo[this.path]return  ... .path];cast(th ... s.path]this.ca ... ontext)this.castForQueryconst v ... l[key];value = val[key]isOpera ... != nullisOperator(key)val[key ... ntext);val[key ... ontext)const h ... s = {};handle  ... rs = {}SchemaA ... rs = {}SchemaA ... andlershandle. ... st$all;handle. ... ast$allhandle.$allhandle. ... String;handle. ...  Stringhandle.$optionshandle. ... mMatch;handle. ... emMatchhandle.$elemMatchhandle. ... rsects;handle. ... ersectsgeospat ... ersectshandle. ... '$or');handle. ... ('$or')handle.$orcreateL ... ('$or')createL ... Handlerhandle. ... $and');handle. ... '$and')handle.$andcreateL ... '$and')handle. ... $nor');handle. ... '$nor')handle.$norcreateL ... '$nor')return  ... t;\n  };functio ... et;\n  }logical ... Handlernew Typ ... array')'condit ...  array''conditional ' + opconditional  requires an arrayconst objret.pus ... text));ret.pus ... ntext))handle. ... t$near;handle. ... st$nearhandle.$nearhandle.$nearSpheregeospatial.cast$nearhandle. ... within;handle. ... $withinhandle.$withinhandle.$geoWithingeospat ... $withinhandle. ... Number;handle. ... oNumberhandle.$sizehandle.$minDistancehandle.$maxDistancehandle. ... exists;handle. ... $existshandle.$existshandle. ...  $type;handle.$type = $typehandle.$typehandle. ... rQuery;handle. ... orQueryhandle.$eqhandle.$gthandle.$gtehandle.$lthandle.$ltehandle.$nothandle.$regexhandle.$nehandle. ... s.$nin;handle. ... rs.$ninhandle.$ninSchemaT ... rs.$ninSchemaT ... andlershandle. ... rs.$in;handle. ... ers.$inhandle.$inSchemaT ... ers.$inSchemaA ...   };\n};SchemaA ... \n  };\n}SchemaA ... NSchemaconst e ... Type();embedde ... aType()this.ge ... aType()this.ge ... emaTypegetEmbe ... emaTypeconst i ... ction';isRequi ... nction'this.op ... nction'this.op ... equiredreturn  ... s)\n  };{\n    . ... ns)\n  }...crea ... quired)createJ ... quired)options?.useBsonTypeitems:  ... ptions)embedde ... ptions)embedde ... NSchemaSchemaA ... ay';\n};SchemaA ... ray';\n}SchemaA ... ionTypefunctio ... ray';\n}{\n  ret ... ray';\n}return 'array';module. ... aArray;module. ... maArray/home/insomnia/repos/mongoose/lib/schema/bigint.js
 * BigInt SchemaType constructor.
 *
 * @param {String} path
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Sets a default option for all BigInt instances.
 *
 * #### Example:
 *
 *     // Make all bigints required by default
 *     mongoose.Schema.BigInt.set('required', true);
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all BigInt instances
 *
 * #### Example:
 *
 *     // Convert bigints to numbers
 *     mongoose.Schema.BigInt.get(v => v == null ? v : Number(v));
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to bigints.
 *
 * #### Example:
 *
 *     // Make Mongoose cast empty string '' to false.
 *     const original = mongoose.Schema.Types.BigInt.cast();
 *     mongoose.Schema.BigInt.cast(v => {
 *       if (v === '') {
 *         return false;
 *       }
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.Schema.BigInt.cast(false);
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Override the function the required validator uses to check whether a value
 * passes the `required` check.
 *
 * @param {Function} fn
 * @return {Function}
 * @function checkRequired
 * @static
 * @api public
 
 * Check if the given value satisfies a required validator.
 *
 * @param {Any} value
 * @return {Boolean}
 * @api public
 
 * Casts to bigint
 *
 * @param {Object} value
 * @param {Object} model this value is optional
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$in` is the function Mongoose calls to cast `$in` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaBigInt
 * @instance
 * @api public
 
 * Casts contents for queries.
 *
 * @param {String} $conditional
 * @param {any} val
 * @api private
 
 *
 * @api private
 /**\n *\n ... ate\n */'../cast/bigint'SchemaBigInt'BigInt'_defaultCaster_castFunctionhandleSingle'$conditionalHandlers''long'BigInt SchemaType constructor.Sets a default option for all BigInt instances.

#### Example:

// Make all bigints required by default
mongoose.Schema.BigInt.set('required', true);Attaches a getter for all BigInt instances

#### Example:

// Convert bigints to numbers
mongoose.Schema.BigInt.get(v => v == null ? v : Number(v));Get/set the function used to cast arbitrary values to bigints.

#### Example:

// Make Mongoose cast empty string '' to false.
const original = mongoose.Schema.Types.BigInt.cast();
mongoose.Schema.BigInt.cast(v => {
if (v === '') {
return false;
}
return original(v);
});

// Or disable casting entirely
mongoose.Schema.BigInt.cast(false);Override the function the required validator uses to check whether a value
passes the `required` check.Check if the given value satisfies a required validator.Casts to bigintthis value is optional
Contains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$in` is the function Mongoose calls to cast `$in` filter operators.SchemaBigInt
Casts contents for queries.const c ... gint');castBig ... igint')require ... igint')../cast/bigint/cast/bigintfunctio ... nt');\n}{\n  Sch ... nt');\n}SchemaT ... gInt');SchemaT ... igInt')SchemaB ... igInt';SchemaB ... BigInt'SchemaB ... emaNameSchemaB ... s = {};SchemaB ... ns = {}SchemaB ... OptionsSchemaB ... otype);SchemaB ... totype)SchemaB ... BigInt;SchemaB ... aBigIntSchemaB ... tructorSchemaB ... tBigIntSchemaBigInt._castSchemaB ... pe.set;SchemaB ... ype.setSchemaBigInt.setSchemaB ... s = [];SchemaB ... rs = []SchemaBigInt.settersSchemaB ... pe.get;SchemaB ... ype.getSchemaBigInt.getSchemaB ... ast;\n};SchemaB ... cast;\n}SchemaBigInt.castfunctio ... cast;\n}{\n  if  ... cast;\n}if (arg ... st;\n  }{\n    r ... st;\n  }return this._cast;this._castcaster === false{\n    c ... er;\n  }caster  ... Caster;caster  ... tCasterthis._defaultCasterthis._cast = caster;this._cast = casterSchemaB ... = null;SchemaB ... != nullSchemaB ... equiredSchemaB ... quired;SchemaB ... ue);\n};SchemaB ... lue);\n}{\n  ret ... lue);\n}this.co ... (value)SchemaB ... \n  }\n};SchemaB ... ;\n  }\n}SchemaB ... pe.castlet castBigInt;this._castFunctioncastBig ... nction;castBig ... unctiontypeof  ... or.castthis.co ... or.castcastBig ... cast();castBig ... .cast()this.co ... .cast()SchemaBigInt.cast()try {\n  ... s);\n  }castBigInt(value)catch ( ... s);\n  }const $ ... ngle\n};$condit ... ingle\n}{\n  ... ... ingle\n}...Sche ... andlers$gt: handleSingle$gte: handleSingle$lt: handleSingle$lte: handleSingleObject. ... ers\n});Object. ... lers\n})'$condi ... ndlers'conditionalHandlers{\n  enu ... dlers\n}value:  ... andlers{\n  ret ... ext);\n}SchemaB ... orQueryif (han ... ;\n    }return  ... , val);handler ... s, val)this.ap ... ontext)this.applySetterserr ins ... != nullerr ins ... is.patherr ins ... stErrorerr.pat ... is.paththis.$f ... != nullthis.$fullPatherr.pat ... llPath;err.pat ... ullPathSchemaB ... n v;\n};SchemaB ... rn v;\n}SchemaB ... Nullishif (typ ...  v;\n  }const c ... cast();typeof  ... .cast()if (cas ...  v;\n  }castBigInt == nullSchemaB ... ed);\n};SchemaB ... red);\n}SchemaB ... NSchemafunctio ... red);\n}{\n  con ... red);\n}return  ... uired);longSchemaB ... ng';\n};SchemaB ... ong';\n}SchemaB ... ionTypefunctio ... ong';\n}{\n  return 'long';\n}return 'long';module. ... BigInt;module. ... aBigInt/home/insomnia/repos/mongoose/lib/schema/boolean.js
 * Boolean SchemaType constructor.
 *
 * @param {String} path
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Sets a default option for all Boolean instances.
 *
 * #### Example:
 *
 *     // Make all booleans have `default` of false.
 *     mongoose.Schema.Boolean.set('default', false);
 *
 *     const Order = mongoose.model('Order', new Schema({ isPaid: Boolean }));
 *     new Order({ }).isPaid; // false
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all Boolean instances
 *
 * #### Example:
 *
 *     mongoose.Schema.Boolean.get(v => v === true ? 'yes' : 'no');
 *
 *     const Order = mongoose.model('Order', new Schema({ isPaid: Boolean }));
 *     new Order({ isPaid: false }).isPaid; // 'no'
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to booleans.
 *
 * #### Example:
 *
 *     // Make Mongoose cast empty string '' to false.
 *     const original = mongoose.Schema.Boolean.cast();
 *     mongoose.Schema.Boolean.cast(v => {
 *       if (v === '') {
 *         return false;
 *       }
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.Schema.Boolean.cast(false);
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Override the function the required validator uses to check whether a boolean
 * passes the `required` check.
 *
 * @param {Function} fn
 * @return {Function}
 * @function checkRequired
 * @static
 * @api public
 
 * Check if the given value satisfies a required validator. For a boolean
 * to satisfy a required validator, it must be strictly equal to true or to
 * false.
 *
 * @param {Any} value
 * @return {Boolean}
 * @api public
 
 * Configure which values get casted to `true`.
 *
 * #### Example:
 *
 *     const M = mongoose.model('Test', new Schema({ b: Boolean }));
 *     new M({ b: 'affirmative' }).b; // undefined
 *     mongoose.Schema.Boolean.convertToTrue.add('affirmative');
 *     new M({ b: 'affirmative' }).b; // true
 *
 * @property convertToTrue
 * @static
 * @memberOf SchemaBoolean
 * @type {Set}
 * @api public
 
 * Configure which values get casted to `false`.
 *
 * #### Example:
 *
 *     const M = mongoose.model('Test', new Schema({ b: Boolean }));
 *     new M({ b: 'nay' }).b; // undefined
 *     mongoose.Schema.Types.Boolean.convertToFalse.add('nay');
 *     new M({ b: 'nay' }).b; // false
 *
 * @property convertToFalse
 * @static
 * @memberOf SchemaBoolean
 * @type {Set}
 * @api public
 
 * Casts to boolean
 *
 * @param {Object} value
 * @param {Object} model this value is optional
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$in` is the function Mongoose calls to cast `$in` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaBoolean
 * @instance
 * @api public
 '../cast/boolean'SchemaBoolean'Boolean''convertToTrue''convertToFalse''bool'Boolean SchemaType constructor.Sets a default option for all Boolean instances.

#### Example:

// Make all booleans have `default` of false.
mongoose.Schema.Boolean.set('default', false);

const Order = mongoose.model('Order', new Schema({ isPaid: Boolean }));
new Order({ }).isPaid; // falseAttaches a getter for all Boolean instances

#### Example:

mongoose.Schema.Boolean.get(v => v === true ? 'yes' : 'no');

const Order = mongoose.model('Order', new Schema({ isPaid: Boolean }));
new Order({ isPaid: false }).isPaid; // 'no'Get/set the function used to cast arbitrary values to booleans.

#### Example:

// Make Mongoose cast empty string '' to false.
const original = mongoose.Schema.Boolean.cast();
mongoose.Schema.Boolean.cast(v => {
if (v === '') {
return false;
}
return original(v);
});

// Or disable casting entirely
mongoose.Schema.Boolean.cast(false);Override the function the required validator uses to check whether a boolean
passes the `required` check.Check if the given value satisfies a required validator. For a boolean
to satisfy a required validator, it must be strictly equal to true or to
false.Configure which values get casted to `true`.

#### Example:

const M = mongoose.model('Test', new Schema({ b: Boolean }));
new M({ b: 'affirmative' }).b; // undefined
mongoose.Schema.Boolean.convertToTrue.add('affirmative');
new M({ b: 'affirmative' }).b; // trueSchemaBoolean
Configure which values get casted to `false`.

#### Example:

const M = mongoose.model('Test', new Schema({ b: Boolean }));
new M({ b: 'nay' }).b; // undefined
mongoose.Schema.Types.Boolean.convertToFalse.add('nay');
new M({ b: 'nay' }).b; // falseCasts to booleanconst c ... lean');castBoo ... olean')require ... olean')../cast/boolean/cast/booleanfunctio ... an');\n}{\n  Sch ... an');\n}SchemaT ... lean');SchemaT ... olean')SchemaB ... olean';SchemaB ... oolean'SchemaB ... oolean;SchemaB ... BooleanSchemaBoolean._castSchemaBoolean.setSchemaB ... settersSchemaBoolean.getSchemaBoolean.castSchemaB ... tCasterv => {\n ... rn v;\n}if (v ! ... ();\n  }v != nu ... oolean'throw new Error();SchemaB ...  false;SchemaB ... = falsev => v  ... = falsev === t ... = falsev === trueObject. ... ; }\n});Object. ... v; }\n}){\n  get ...  v; }\n}get: () ... tToTrue() => c ... tToTruecastBoo ... tToTrueset: v  ...  = v; }v => {  ...  = v; }{ castB ...  = v; }castBoo ... ue = v;castBoo ... rue = vget: () ... ToFalse() => c ... ToFalsecastBoo ... ToFalsecastBoo ... se = v;castBoo ... lse = vlet castBoolean;castBoo ... nction;castBoo ... unctioncastBoo ... cast();castBoo ... .cast()SchemaBoolean.cast()castBoolean(value)const $ ... lers };$condit ... dlers }{ ...Sc ... dlers }castBoolean == nullif (cas ... se;\n  }castBoo ... .has(v)castBoo ... eof SetcastBoo ... lse.hasif (cas ... ue;\n  }castBoo ... rue.hasSchemaB ... ol';\n};SchemaB ... ool';\n}functio ... ool';\n}{\n  return 'bool';\n}return 'bool';/home/insomnia/repos/mongoose/lib/schema/buffer.js
 * Buffer SchemaType constructor
 *
 * @param {String} key
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Sets a default option for all Buffer instances.
 *
 * #### Example:
 *
 *     // Make all buffers have `required` of true by default.
 *     mongoose.Schema.Buffer.set('required', true);
 *
 *     const User = mongoose.model('User', new Schema({ test: Buffer }));
 *     new User({ }).validateSync().errors.test.message; // Path `test` is required.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all Buffer instances
 *
 * #### Example:
 *
 *     // Always convert to string when getting an ObjectId
 *     mongoose.Schema.Types.Buffer.get(v => v.toString('hex'));
 *
 *     const Model = mongoose.model('Test', new Schema({ buf: Buffer } }));
 *     typeof (new Model({ buf: Buffer.fromString('hello') }).buf); // 'string'
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Override the function the required validator uses to check whether a string
 * passes the `required` check.
 *
 * #### Example:
 *
 *     // Allow empty strings to pass `required` check
 *     mongoose.Schema.Types.String.checkRequired(v => v != null);
 *
 *     const M = mongoose.model({ buf: { type: Buffer, required: true } });
 *     new M({ buf: Buffer.from('') }).validateSync(); // validation passes!
 *
 * @param {Function} fn
 * @return {Function}
 * @function checkRequired
 * @static
 * @api public
 
 * Check if the given value satisfies a required validator. To satisfy a
 * required validator, a buffer must not be null or undefined and have
 * non-zero length.
 *
 * @param {Any} value
 * @param {Document} doc
 * @return {Boolean}
 * @api public
 
 * Casts contents
 *
 * @param {Object} value
 * @param {Document} doc document that triggers the casting
 * @param {Boolean} init
 * @api private
  documents// documents gh-6863// gh-6863
 * Sets the default [subtype](https://studio3t.com/whats-new/best-practices-uuid-mongodb/)
 * for this buffer. You can find a [list of allowed subtypes here](https://api.mongodb.com/python/current/api/bson/binary.html).
 *
 * #### Example:
 *
 *     const s = new Schema({ uuid: { type: Buffer, subtype: 4 });
 *     const M = db.model('M', s);
 *     const m = new M({ uuid: 'test string' });
 *     m.uuid._subtype; // 4
 *
 * @param {Number} subtype the default subtype
 * @return {SchemaType} this
 * @api public
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$exists` is the function Mongoose calls to cast `$exists` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaBuffer
 * @instance
 * @api public
 
 * Casts contents for queries.
 *
 * @param {String} $conditional
 * @param {any} [value]
 * @api private
 '../options/schemaBufferOptions'handleBitwiseOperator'./operators/bitwise'SchemaBuffer_castRef$binary$bitsAllClear$bitsAnyClear$bitsAllSet$bitsAnySet' with Buffer.''binData'Buffer SchemaType constructorSets a default option for all Buffer instances.

#### Example:

// Make all buffers have `required` of true by default.
mongoose.Schema.Buffer.set('required', true);

const User = mongoose.model('User', new Schema({ test: Buffer }));
new User({ }).validateSync().errors.test.message; // Path `test` is required.Attaches a getter for all Buffer instances

#### Example:

// Always convert to string when getting an ObjectId
mongoose.Schema.Types.Buffer.get(v => v.toString('hex'));

const Model = mongoose.model('Test', new Schema({ buf: Buffer } }));
typeof (new Model({ buf: Buffer.fromString('hello') }).buf); // 'string'Override the function the required validator uses to check whether a string
passes the `required` check.

#### Example:

// Allow empty strings to pass `required` check
mongoose.Schema.Types.String.checkRequired(v => v != null);

const M = mongoose.model({ buf: { type: Buffer, required: true } });
new M({ buf: Buffer.from('') }).validateSync(); // validation passes!Check if the given value satisfies a required validator. To satisfy a
required validator, a buffer must not be null or undefined and have
non-zero length.Casts contentsSets the default [subtype](https://studio3t.com/whats-new/best-practices-uuid-mongodb/)
for this buffer. You can find a [list of allowed subtypes here](https://api.mongodb.com/python/current/api/bson/binary.html).

#### Example:

const s = new Schema({ uuid: { type: Buffer, subtype: 4 });
const M = db.model('M', s);
const m = new M({ uuid: 'test string' });
m.uuid._subtype; // 4the default subtype
Contains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$exists` is the function Mongoose calls to cast `$exists` filter operators.SchemaBuffer
SchemaB ... tions')../options/schemaBufferOptions/options/schemaBufferOptionsconst h ... wise');handleB ... twise')handleB ... peratorrequire ... twise')'./oper ... itwise'./operators/bitwise/operators/bitwise{\n  Sch ... er');\n}SchemaT ... ffer');SchemaT ... uffer')SchemaB ... uffer';SchemaB ... Buffer'SchemaB ... Buffer;SchemaB ... aBufferSchemaB ... ptions;SchemaB ... ength);SchemaB ... length)v => !! ... length)!!(v && v.length)!(v && v.length)(v && v.length)v && v.lengthSchemaBuffer.setSchemaBuffer.settersSchemaBuffer.getif (Sch ... ue;\n  }SchemaB ... is);\n};SchemaB ... his);\n}{\n  let ... his);\n}if (Sch ...   }\n  }SchemaT ... , init)value & ... eBuffervalue.i ... eBufferif (Buf ... ;\n    }!value  ... eBuffer!value. ... eBuffervalue = ...  doc]);value = ... , doc])new Mon ... , doc])[this.path, doc]this.options.subtypevalue._ ... ubtype;value._ ... subtypevalue._subtyperet = n ...  doc]);ret = n ... , doc])typeof  ... ub_typevalue.sub_typeret._su ... b_type;ret._su ... ub_typeret._subtypevalue = ... (value)this._castRefvalue && value._id{\n    v ... id;\n  }value = value._id;value = value._idif (Buf ... ue;\n  }if (!va ... }\n    }if (val ... et;\n  }type = typeof valueif (\n   ... et;\n  }type == ... .data))type == ... (value)type == ... number'type === 'number'(type = ... .data))type == ... e.data)type == ... Buffer'type === 'object'value.t ... Buffer'Array.i ... e.data)value.dataret._su ... ubtype;ret._su ... subtypeutils.i ... tring')(value. ... tring')value.$ ... string'value.$ ...  Binaryvalue.$binarytypeof value.$binaryconst b ... e64'));buf = t ... se64'))this.ca ... se64'))Buffer. ... ase64')value.$type != nullvalue.$typebuf._su ... .$type;buf._su ... e.$typebuf._subtypereturn buf;SchemaB ... his;\n};SchemaB ... this;\n}SchemaB ... subtypethis.op ... ubtype;this.op ... subtype$bitsAl ... perator$bitsAn ... peratorSchemaB ... ted;\n};SchemaB ... sted;\n}functio ... sted;\n}{\n  let ... sted;\n}if ($co ... l);\n  }{\n    h ... l);\n  }throw n ... fer.');new Err ... ffer.')'Can\'t ... uffer.' with Buffer.let casted;{\n    c ... t);\n  }casted  ... ntext);casted  ... ontext)return  ... casted;casted  ...  castedcasted. ... alse })casted.toObjectbinDataSchemaB ... ta';\n};SchemaB ... ata';\n}functio ... ata';\n}{\n  ret ... ata';\n}return 'binData';module. ... aBuffer/home/insomnia/repos/mongoose/lib/schema/date.js!
 * Module requirements.
 
 * Date SchemaType constructor.
 *
 * @param {String} key
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Sets a default option for all Date instances.
 *
 * #### Example:
 *
 *     // Make all dates have `required` of true by default.
 *     mongoose.Schema.Date.set('required', true);
 *
 *     const User = mongoose.model('User', new Schema({ test: Date }));
 *     new User({ }).validateSync().errors.test.message; // Path `test` is required.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all Date instances
 *
 * #### Example:
 *
 *     // Always convert Dates to string
 *     mongoose.Date.get(v => v.toString());
 *
 *     const Model = mongoose.model('Test', new Schema({ date: { type: Date, default: () => new Date() } }));
 *     typeof (new Model({}).date); // 'string'
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to dates.
 *
 * #### Example:
 *
 *     // Mongoose converts empty string '' into `null` for date types. You
 *     // can create a custom caster to disable it.
 *     const original = mongoose.Schema.Types.Date.cast();
 *     mongoose.Schema.Types.Date.cast(v => {
 *       assert.ok(v !== '');
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.Schema.Types.Date.cast(false);
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Declares a TTL index (rounded to the nearest second) for _Date_ types only.
 *
 * This sets the `expireAfterSeconds` index option available in MongoDB >= 2.1.2.
 * This index type is only compatible with Date types.
 *
 * #### Example:
 *
 *     // expire in 24 hours
 *     new Schema({ createdAt: { type: Date, expires: 60*60*24 }});
 *
 * `expires` utilizes the `ms` module from [vercel](https://github.com/vercel/ms) allowing us to use a friendlier syntax:
 *
 * #### Example:
 *
 *     // expire in 24 hours
 *     new Schema({ createdAt: { type: Date, expires: '24h' }});
 *
 *     // expire in 1.5 hours
 *     new Schema({ createdAt: { type: Date, expires: '1.5h' }});
 *
 *     // expire in 7 days
 *     const schema = new Schema({ createdAt: Date });
 *     schema.path('createdAt').expires('7d');
 *
 * @param {Number|String} when
 * @added 3.0.0
 * @return {SchemaType} this
 * @api public
 
 * Override the function the required validator uses to check whether a string
 * passes the `required` check.
 *
 * #### Example:
 *
 *     // Allow empty strings to pass `required` check
 *     mongoose.Schema.Types.String.checkRequired(v => v != null);
 *
 *     const M = mongoose.model({ str: { type: String, required: true } });
 *     new M({ str: '' }).validateSync(); // `null`, validation passes!
 *
 * @param {Function} fn
 * @return {Function}
 * @function checkRequired
 * @static
 * @api public
 
 * Check if the given value satisfies a required validator. To satisfy
 * a required validator, the given value must be an instance of `Date`.
 *
 * @param {Any} value
 * @param {Document} doc
 * @return {Boolean}
 * @api public
 
 * Sets a minimum date validator.
 *
 * #### Example:
 *
 *     const s = new Schema({ d: { type: Date, min: Date('1970-01-01') })
 *     const M = db.model('M', s)
 *     const m = new M({ d: Date('1969-12-31') })
 *     m.save(function (err) {
 *       console.error(err) // validator error
 *       m.d = Date('2014-12-08');
 *       m.save() // success
 *     })
 *
 *     // custom error messages
 *     // We can also use the special {MIN} token which will be replaced with the invalid value
 *     const min = [Date('1970-01-01'), 'The value of path `{PATH}` ({VALUE}) is beneath the limit ({MIN}).'];
 *     const schema = new Schema({ d: { type: Date, min: min })
 *     const M = mongoose.model('M', schema);
 *     const s= new M({ d: Date('1969-12-31') });
 *     s.validate(function (err) {
 *       console.log(String(err)) // ValidationError: The value of path `d` (1969-12-31) is before the limit (1970-01-01).
 *     })
 *
 * @param {Date} value minimum date
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 
 * Sets a maximum date validator.
 *
 * #### Example:
 *
 *     const s = new Schema({ d: { type: Date, max: Date('2014-01-01') })
 *     const M = db.model('M', s)
 *     const m = new M({ d: Date('2014-12-08') })
 *     m.save(function (err) {
 *       console.error(err) // validator error
 *       m.d = Date('2013-12-31');
 *       m.save() // success
 *     })
 *
 *     // custom error messages
 *     // We can also use the special {MAX} token which will be replaced with the invalid value
 *     const max = [Date('2014-01-01'), 'The value of path `{PATH}` ({VALUE}) exceeds the limit ({MAX}).'];
 *     const schema = new Schema({ d: { type: Date, max: max })
 *     const M = mongoose.model('M', schema);
 *     const s= new M({ d: Date('2014-12-08') });
 *     s.validate(function (err) {
 *       console.log(String(err)) // ValidationError: The value of path `d` (2014-12-08) exceeds the limit (2014-01-01).
 *     })
 *
 * @param {Date} maximum date
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 
 * Casts to date
 *
 * @param {Object} value to cast
 * @api private
 
 * Date Query casting.
 *
 * @param {Any} val
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$gte` is the function Mongoose calls to cast `$gte` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaDate
 * @instance
 * @api public
 '../options/schemaDateOptions''../cast/date'SchemaDateminValidator/{MIN}/'Date.now()'maxValidator/{MAX}/' with Date.'Date SchemaType constructor.Sets a default option for all Date instances.

#### Example:

// Make all dates have `required` of true by default.
mongoose.Schema.Date.set('required', true);

const User = mongoose.model('User', new Schema({ test: Date }));
new User({ }).validateSync().errors.test.message; // Path `test` is required.Attaches a getter for all Date instances

#### Example:

// Always convert Dates to string
mongoose.Date.get(v => v.toString());

const Model = mongoose.model('Test', new Schema({ date: { type: Date, default: () => new Date() } }));
typeof (new Model({}).date); // 'string'Get/set the function used to cast arbitrary values to dates.

#### Example:

// Mongoose converts empty string '' into `null` for date types. You
// can create a custom caster to disable it.
const original = mongoose.Schema.Types.Date.cast();
mongoose.Schema.Types.Date.cast(v => {
assert.ok(v !== '');
return original(v);
});

// Or disable casting entirely
mongoose.Schema.Types.Date.cast(false);Declares a TTL index (rounded to the nearest second) for _Date_ types only.

This sets the `expireAfterSeconds` index option available in MongoDB >= 2.1.2.
This index type is only compatible with Date types.

#### Example:

// expire in 24 hours
new Schema({ createdAt: { type: Date, expires: 60*60*24 }});

`expires` utilizes the `ms` module from [vercel](https://github.com/vercel/ms) allowing us to use a friendlier syntax:

#### Example:

// expire in 24 hours
new Schema({ createdAt: { type: Date, expires: '24h' }});

// expire in 1.5 hours
new Schema({ createdAt: { type: Date, expires: '1.5h' }});

// expire in 7 days
const schema = new Schema({ createdAt: Date });
schema.path('createdAt').expires('7d');added@added3.0.0
Override the function the required validator uses to check whether a string
passes the `required` check.

#### Example:

// Allow empty strings to pass `required` check
mongoose.Schema.Types.String.checkRequired(v => v != null);

const M = mongoose.model({ str: { type: String, required: true } });
new M({ str: '' }).validateSync(); // `null`, validation passes!Check if the given value satisfies a required validator. To satisfy
a required validator, the given value must be an instance of `Date`.Sets a minimum date validator.

#### Example:

const s = new Schema({ d: { type: Date, min: Date('1970-01-01') })
const M = db.model('M', s)
const m = new M({ d: Date('1969-12-31') })
m.save(function (err) {
console.error(err) // validator error
m.d = Date('2014-12-08');
m.save() // success
})

// custom error messages
// We can also use the special {MIN} token which will be replaced with the invalid value
const min = [Date('1970-01-01'), 'The value of path `{PATH}` ({VALUE}) is beneath the limit ({MIN}).'];
const schema = new Schema({ d: { type: Date, min: min })
const M = mongoose.model('M', schema);
const s= new M({ d: Date('1969-12-31') });
s.validate(function (err) {
console.log(String(err)) // ValidationError: The value of path `d` (1969-12-31) is before the limit (1970-01-01).
})minimum date
optional custom error message
Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
Sets a maximum date validator.

#### Example:

const s = new Schema({ d: { type: Date, max: Date('2014-01-01') })
const M = db.model('M', s)
const m = new M({ d: Date('2014-12-08') })
m.save(function (err) {
console.error(err) // validator error
m.d = Date('2013-12-31');
m.save() // success
})

// custom error messages
// We can also use the special {MAX} token which will be replaced with the invalid value
const max = [Date('2014-01-01'), 'The value of path `{PATH}` ({VALUE}) exceeds the limit ({MAX}).'];
const schema = new Schema({ d: { type: Date, max: max })
const M = mongoose.model('M', schema);
const s= new M({ d: Date('2014-12-08') });
s.validate(function (err) {
console.log(String(err)) // ValidationError: The value of path `d` (2014-12-08) exceeds the limit (2014-01-01).
})date
maximumCasts to dateto cast
Date Query casting.Contains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$gte` is the function Mongoose calls to cast `$gte` filter operators.SchemaDate
SchemaD ... tions')../options/schemaDateOptions/options/schemaDateOptionscastDat ... /date')require ... /date')../cast/date/cast/datefunctio ... te');\n}{\n  Sch ... te');\n}SchemaT ... Date');SchemaT ... 'Date')SchemaD ... 'Date';SchemaD ...  'Date'SchemaD ... emaNameSchemaD ... s = {};SchemaD ... ns = {}SchemaD ... otype);SchemaD ... totype)SchemaDate.prototypeSchemaD ... maDate;SchemaD ... emaDateSchemaD ... tructorSchemaD ... ptions;SchemaD ... stDate;SchemaD ... astDateSchemaDate._castSchemaD ... pe.set;SchemaD ... ype.setSchemaDate.setSchemaD ... s = [];SchemaD ... rs = []SchemaDate.settersSchemaD ... pe.get;SchemaD ... ype.getSchemaDate.getSchemaD ... ast;\n};SchemaD ... cast;\n}SchemaDate.castSchemaD ... n v;\n};SchemaD ... rn v;\n}SchemaD ... tCasterv != nu ... f Date)!(v instanceof Date)(v instanceof Date)v instanceof DateSchemaD ... his;\n};SchemaD ... this;\n}SchemaD ... expiresif (get ... {};\n  }getCons ... _index)this._indexthis._index = {};this._index = {}this._i ... = when;this._i ...  = whenthis._index.expiresutils.e ... index);utils.e ... _index)SchemaD ... f Date;SchemaD ... of DateSchemaD ... equiredv => v  ... of DateSchemaD ... quired;SchemaD ... ue);\n};SchemaD ... lue);\n}SchemaD ... uired()SchemaD ... ype.minthis.minValidatorthis.va ...  this);this.va ... , this)this.va ... .filterreturn  ... idator;v.valid ... lidatorv.validatorif (val ... });\n  }{\n    l ... });\n  }let msg ... te.min;msg = m ... ate.minmessage ... ate.minMongoos ... ate.minmsg = m ... ng()));msg = m ... ing()))msg.rep ... ing())){MIN}MINunexpected character(value  ... ring())value = ... tring()value === Date.nowthis.va ...     });this.va ... \n    })this.validators.pushvalidat ...       }this.mi ...       }let _value = value;_value = valuetypeof  ... ate.nowvalue !== Date.now_value  ... (this);_value  ... l(this)_value.call(this)_value.callconst m ... alue));min = ( ... value))(_value ... value))_value  ... _value)_value === Date.now_value()_this.cast(_value)_this.castval === ... lueOf()val.val ... lueOf()min.valueOf()min.valueOfmessage: msgtype: 'min'min: valueSchemaD ... ype.maxthis.maxValidatorlet msg ... te.max;msg = m ... ate.maxmessage ... ate.maxMongoos ... ate.max{MAX}MAXthis.ma ...       }typeof _value_value !== Date.nowmax = ( ... value))max.valueOf()max.valueOftype: 'max'max: valueSchemaD ... \n  }\n};SchemaD ... ;\n  }\n}SchemaD ... pe.castlet castDate;castDat ... nction;castDat ... unctioncastDat ... cast();castDat ... .cast()SchemaDate.cast()castDate(value)functio ... val);\n}{\n  ret ... val);\n}this.cast(val)SchemaD ... al);\n};SchemaD ... val);\n}SchemaD ... orQuery{\n  if  ... val);\n}if ($co ...   }\n  }$conditional == nullconst h ... ional];if (!ha ... ');\n  }throw n ... ate.');new Err ... Date.')'Can\'t ...  Date.' with Date.SchemaD ... ed);\n};SchemaD ... red);\n}SchemaD ... NSchemaSchemaD ... te';\n};SchemaD ... ate';\n}SchemaD ... ionTypefunctio ... ate';\n}{\n  return 'date';\n}return 'date';module. ... maDate;module. ... emaDate/home/insomnia/repos/mongoose/lib/schema/decimal128.js
 * Decimal128 SchemaType constructor.
 *
 * @param {String} key
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Sets a default option for all Decimal128 instances.
 *
 * #### Example:
 *
 *     // Make all decimal 128s have `required` of true by default.
 *     mongoose.Schema.Decimal128.set('required', true);
 *
 *     const User = mongoose.model('User', new Schema({ test: mongoose.Decimal128 }));
 *     new User({ }).validateSync().errors.test.message; // Path `test` is required.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all Decimal128 instances
 *
 * #### Example:
 *
 *     // Automatically convert Decimal128s to Numbers
 *     mongoose.Schema.Decimal128.get(v => v == null ? v : Number(v));
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to decimals.
 *
 * #### Example:
 *
 *     // Make Mongoose only refuse to cast numbers as decimal128
 *     const original = mongoose.Schema.Types.Decimal128.cast();
 *     mongoose.Decimal128.cast(v => {
 *       assert.ok(typeof v !== 'number');
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.Decimal128.cast(false);
 *
 * @param {Function} [caster]
 * @return {Function}
 * @function get
 * @static
 * @api public
 
 * Override the function the required validator uses to check whether a string
 * passes the `required` check.
 *
 * @param {Function} fn
 * @return {Function}
 * @function checkRequired
 * @static
 * @api public
 
 * Check if the given value satisfies a required validator.
 *
 * @param {Any} value
 * @param {Document} doc
 * @return {Boolean}
 * @api public
 
 * Casts to Decimal128
 *
 * @param {Object} value
 * @param {Object} doc
 * @param {Boolean} init whether this is an initialization cast
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$lte` is the function Mongoose calls to cast `$lte` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaDecimal128
 * @instance
 * @api public
 '../cast/decimal128'SchemaDecimal128'decimal'Decimal128 SchemaType constructor.Sets a default option for all Decimal128 instances.

#### Example:

// Make all decimal 128s have `required` of true by default.
mongoose.Schema.Decimal128.set('required', true);

const User = mongoose.model('User', new Schema({ test: mongoose.Decimal128 }));
new User({ }).validateSync().errors.test.message; // Path `test` is required.Attaches a getter for all Decimal128 instances

#### Example:

// Automatically convert Decimal128s to Numbers
mongoose.Schema.Decimal128.get(v => v == null ? v : Number(v));Get/set the function used to cast arbitrary values to decimals.

#### Example:

// Make Mongoose only refuse to cast numbers as decimal128
const original = mongoose.Schema.Types.Decimal128.cast();
mongoose.Decimal128.cast(v => {
assert.ok(typeof v !== 'number');
return original(v);
});

// Or disable casting entirely
mongoose.Decimal128.cast(false);Override the function the required validator uses to check whether a string
passes the `required` check.Casts to Decimal128Contains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$lte` is the function Mongoose calls to cast `$lte` filter operators.SchemaDecimal128
const c ... l128');castDec ... al128')../cast/decimal128/cast/decimal128functio ... 28');\n}{\n  Sch ... 28');\n}SchemaT ... l128');SchemaT ... al128')SchemaD ... al128';SchemaD ... mal128'SchemaD ... mal128;SchemaD ... imal128SchemaD ... 8._castSchemaDecimal128.setSchemaD ... settersSchemaDecimal128.getSchemaD ... 28.castv != nu ... al128')SchemaD ... l128');SchemaD ... al128')v => is ... al128')if (Sch ... s);\n  }let castDecimal128;castDec ... nction;castDec ... unctioncastDec ... cast();castDec ... .cast()SchemaD ... .cast()castDec ... (value)decimalSchemaD ... al';\n};SchemaD ... mal';\n}functio ... mal';\n}{\n  ret ... mal';\n}return 'decimal';/home/insomnia/repos/mongoose/lib/schema/documentArray.js
 * SubdocsArray SchemaType constructor
 *
 * @param {String} key
 * @param {Schema} schema
 * @param {Object} options
 * @param {Object} schemaOptions
 * @inherits SchemaArray
 * @api public
  EmbeddedDocument schematype options// Embe ... options Leave it up to `cast()` to convert this to a documentarray// Leav ... ntarray
 * Options for all document arrays.
 *
 * - `castNonArrays`: `true` by default. If `false`, Mongoose will throw a CastError when a value isn't an array. If `true`, Mongoose will wrap the provided value in an array before casting.
 *
 * @api public
 !
 * Inherits from SchemaArray.
 /*!\n *  ... ay.\n */
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$size` is the function Mongoose calls to cast `$size` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaDocumentArray
 * @instance
 * @api public
  compile an embedded document for this schema// comp ...  schema
 * Adds a discriminator to this document array.
 *
 * #### Example:
 *
 *     const shapeSchema = Schema({ name: String }, { discriminatorKey: 'kind' });
 *     const schema = Schema({ shapes: [shapeSchema] });
 *
 *     const docArrayPath = parentSchema.path('shapes');
 *     docArrayPath.discriminator('Circle', Schema({ radius: Number }));
 *
 * @param {String} name
 * @param {Schema} schema fields to add to the schema for instances of this sub-class
 * @param {Object|string} [options] If string, same as `options.value`.
 * @param {String} [options.value] the string stored in the `discriminatorKey` property. If not specified, Mongoose uses the `name` parameter.
 * @param {Boolean} [options.clone=true] By default, `discriminator()` clones the given `schema`. Set to `false` to skip cloning.
 * @see discriminators https://mongoosejs.com/docs/discriminators.html
 * @return {Function} the constructor Mongoose will use for creating instances of this discriminator model
 * @api public
  Ignore error, only happens on old versions of node// Igno ... of node
 * Performs local validations first, then validations on each embedded doc
 *
 * @api private
  handle sparse arrays, do not use array.forEach which does not// hand ... oes not iterate over sparse elements yet reports array.length including// iter ... cluding them :(// them :( sidestep sparse entries// side ... entries If you set the array index directly, the doc might not yet be// If y ...  yet be a full fledged mongoose subdoc, so make it into one.// a fu ... to one.
 * Performs local validations first, then validations on each embedded doc.
 *
 * #### Note:
 *
 * This method ignores the asynchronous validators.
 *
 * @return {MongooseError|undefined}
 * @api private
  Make sure all paths in the subdoc are set to `default` instead// Make ... instead of `init` since we used `init`.// of ` ... `init`.
 * Casts contents
 *
 * @param {Object} value
 * @param {Document} document that triggers the casting
 * @api private
  Skip casting if `value` is the same as the previous value, no need to cast. See gh-9266// Skip ... gh-9266 gh-2442 mark whole array as modified if we're initializing a doc from// gh-2 ... oc from the db and the path isn't an array in the document We need to create a new array, otherwise change tracking will// We n ... ng will update the old doc (gh-4449)// upda ... h-4449) Might not have the correct index yet, so ensure it does.// Migh ... t does. handle resetting doc with existing id and same data// hand ... me data if set() is hooked it will have no return value// if s ... n value see gh-746// see gh-746
 * Scopes paths selected in a query to this array.
 * Necessary for proper default application of subdocument values.
 *
 * @param {DocumentArrayPath} array the array to scope `fields` paths
 * @param {Object|undefined} fields the root fields selected in the query
 * @param {Boolean|undefined} init if we are being created part of a query result
 * @api private
 
 * Sets a default option for all DocumentArray instances.
 *
 * #### Example:
 *
 *     // Make all numbers have option `min` equal to 0.
 *     mongoose.Schema.DocumentArray.set('_id', false);
 *
 * @param {String} option The name of the option you'd like to set (e.g. trim, lowercase, etc...)
 * @param {Any} value The value of the option you'd like to set.
 * @return {void}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all DocumentArrayPath instances
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 !
 * Handle casting $elemMatch operators
 /*!\n *  ... ors\n */ Is this an embedded discriminator and is the discriminator key set?// Is t ... ey set? If so, use the discriminator schema. See gh-7449// If s ... gh-7449DocumentArrayElement'./documentArrayElement''./array''../options/schemaDocumentArrayOptions''../helpers/model/discriminator''../helpers/schema/handleIdOption''../helpers/document/handleSpreadDoc''../helpers/discriminator/getConstructor''../error/invalidSchemaOption'SubdocumentSchemaDocumentArray'timeseries'schemaTypeIdOptionEmbeddedDocument_createConstructor$parentSchemaTypebaseClass'../types/arraySubdocument'getArrayParentbaseCasterConstructor'../types/documentArray'schemaTypeErrorresultErrorsubdocValidateError_subdoc_toObjectOptionsinitDocumentOptionsskipDocumentArrayCastspreadDoc$setIndexscopePaths'embedded''$.'itemsTypeDefinitionSubdocsArray SchemaType constructorOptions for all document arrays.

- `castNonArrays`: `true` by default. If `false`, Mongoose will throw a CastError when a value isn't an array. If `true`, Mongoose will wrap the provided value in an array before casting.Contains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$size` is the function Mongoose calls to cast `$size` filter operators.SchemaDocumentArray
Adds a discriminator to this document array.

#### Example:

const shapeSchema = Schema({ name: String }, { discriminatorKey: 'kind' });
const schema = Schema({ shapes: [shapeSchema] });

const docArrayPath = parentSchema.path('shapes');
docArrayPath.discriminator('Circle', Schema({ radius: Number }));fields to add to the schema for instances of this sub-class
(Object|string)=discriminators https://mongoosejs.com/docs/discriminators.html
the constructor Mongoose will use for creating instances of this discriminator model
Performs local validations first, then validations on each embedded docPerforms local validations first, then validations on each embedded doc.

#### Note:

This method ignores the asynchronous validators.(MongooseError|undefined)that triggers the casting
Scopes paths selected in a query to this array.
Necessary for proper default application of subdocument values.the array to scope `fields` paths
the root fields selected in the query
if we are being created part of a query result
(Boolean|undefined)Sets a default option for all DocumentArray instances.

#### Example:

// Make all numbers have option `min` equal to 0.
mongoose.Schema.DocumentArray.set('_id', false);The name of the option you'd like to set (e.g. trim, lowercase, etc...)
The value of the option you'd like to set.
Attaches a getter for all DocumentArrayPath instancesDocumen ... ement')require ... ement')'./docu ... lement'./documentArrayElement/documentArrayElementconst S ... rray');SchemaA ... array')require('./array')./array/array../options/schemaDocumentArrayOptions/options/schemaDocumentArrayOptions'../hel ... inator'../helpers/model/discriminatorhandleI ... ption')'../hel ... Option'../helpers/schema/handleIdOption/helpers/schema/handleIdOption'../hel ... eadDoc'../helpers/document/handleSpreadDocconst g ... ctor');getCons ... uctor')require ... uctor')'../hel ... ructor'../helpers/discriminator/getConstructor/helpers/discriminator/getConstructorconst I ... tion');Invalid ... ption')'../err ... Option'../error/invalidSchemaOption/error/invalidSchemaOptionarrayPa ... hSymbolrequire ... hSymbollet Mon ... tArray;Mongoos ... ntArraylet Subdocument;schema. ... eseriesthrow n ... ries');new Inv ... eries')const s ... ns._id;schemaT ... ons._idSchemaD ... ons._idschemaO ...  || {};schemaO ... s || {}schemaOptions || {}schemaO ... Option;schemaO ... dOptionschemaOptions._idschema  ... tions);handleI ... ptions)options._id != nullconst E ... tions);Embedde ... ptions)_create ... ptions)Embedde ...  = key;Embedde ... h = keyEmbedde ... asePathEmbedde ... ototypeSchemaA ... tions);SchemaA ... ptions)SchemaArray.callthis.sc ...  || {};this.sc ... s || {}this.$i ... ntArraythis.Co ... cument;this.Co ... ocumentthis.ConstructorEmbedde ... a.base;Embedde ... ma.baseEmbedde ... nt.baseconst f ... tValue;fn = th ... ltValueif (!(' ... });\n  }fn != nullthis.de ...     });this.de ... \n    })let arr ... (this);arr = fn.call(this)fn.call(this)arr !=  ... ay(arr)return arr;const $ ... = this;$parent ...  = thisthis.$e ... e\n  });this.$e ... pe\n  })new Doc ... pe\n  })key + '.$'{\n    . ... ype\n  }...(sch ...  || {})(schema ...  || {})this.$e ... ructor;this.$e ... tructorthis.$e ... schema;this.$e ... .schemaSchemaD ... Array';SchemaD ... tArray'SchemaD ... true };SchemaD ...  true }SchemaD ... optionsSchemaD ... tArray;SchemaD ... ntArrayObject. ... s }\n});Object. ... rs }\n}){\n  enu ... ers }\n}value:  ... dlers }{\n  Sub ... ment;\n}Subdocu ... ent'));Subdocu ... ment'))(Subdoc ... ment'))Subdocu ... ument')'../typ ... cument'../types/arraySubdocumentfunctio ... ));\n  }{\n    S ... ));\n  }Subdocu ... ments);Subdocu ... uments)Subdocument.applythis.__ ... == nullthis.__parentArraythis.__ ... arent()this.__ ... yParentthis.$s ... ion());this.$s ... sion())this.__ ... ssion()this.__ ... sessionbaseCla ... ototypebaseClass != nullbaseClass.prototypeSubdocu ... ototypeEmbedde ... proto);Embedde ... (proto)Object.create(proto)Embedde ... chema);Embedde ... schema)Embedde ... tSchemaEmbedde ... schema;Embedde ...  schemaEmbedde ... .schemaEmbedde ... cument;Embedde ... ocumentEmbedde ... tructorEmbedde ... = true;Embedde ...  = trueEmbedde ... tter();Embedde ... itter()Embedde ... .events{\n    E ... i];\n  }Embedde ... ods[i];Embedde ... hods[i]Embedde ... type[i]schema.methods[i]Embedde ... ics[i];Embedde ... tics[i]EmbeddedDocument[i]Embedde ... ype[i];Embedde ... ptions;Embedde ... optionsSchemaD ... me];\n};SchemaD ... ame];\n}SchemaD ... minator{\n    n ... e);\n  }name =  ... (name);name =  ... e(name)utils.g ... e(name)const t ... ptions;tiedVal ... optionsschema. ... & cloneschema  ... sting);schema  ... isting)discrim ... isting)options ... xistingconst E ... uctor);Embedde ... ructor)_create ... ructor)Embedde ... ructor;baseCas ... tructortry {\n  ... ode\n  }value: namecatch ( ... ode\n  }{\n    / ... ode\n  }this.ca ... cument;this.ca ... ocumentthis.ca ... s[name]this.ca ... inatorsSchemaD ... }\n  }\n}SchemaD ... alidate'../typ ... tArray'../types/documentArray{\n    S ... e);\n  }SchemaT ... scope);SchemaT ... te.callSchemaT ... alidatereturn fn(err);fn(err)let cou ... length;count = ... .lengtharray & ... .length!countreturn fn();fn()options ... lidator!utils. ... (array)array = ... scope);array = ...  scope)new Mon ...  scope)_this.path--count ... error);--count || fn(error)--countfn(error)let i = ... = countlen = countlet doc = array[i];doc = array[i]!(doc i ... cument)(doc in ... cument)doc ins ... ocumentconst C ... ay[i]);Constru ... ray[i])getCons ... ray[i])_this.c ... tructordoc = a ... ed, i);doc = a ... ned, i)array[i ... ned, i)new Con ... ned, i)options ... ified()!doc.$isModified()doc.$__ ... lback);doc.$__ ... llback)doc.$__validateSchemaD ... ror;\n};SchemaD ... rror;\n}SchemaD ... ateSync{\n  con ... rror;\n}const s ... scope);schemaT ...  scope)SchemaT ... nc.callSchemaT ... ateSyncif (sch ... or;\n  }return  ... eError;let res ... = null;resultError = nullif (!co ... rn;\n  }if (!(d ... ;\n    }subdocV ... ptions)doc.val ... ptions)doc.validateSyncsubdocV ... == nullresultError == nullresultE ... eError;resultE ... teErrorreturn resultError;SchemaD ... ret;\n};SchemaD ...  ret;\n}SchemaD ... Defaultlet ret ... tValue;ret = t ... ltValuethis.de ... (scope)this.de ... ue.callif (ret ... et;\n  }options ... kipCastoptions.skipCastif (!Ar ... t];\n  }!Array.isArray(ret){\n    r ... t];\n  }ret = [ret];ret = [ret]ret = n ... scope);ret = n ...  scope)for (le ... oc;\n  }const C ... et[i]);Constru ... ret[i])getCons ... ret[i])const _ ... ed, i);_subdoc ... ned, i)_subdoc ... et[i]);_subdoc ... ret[i])_subdoc.$init_subdoc ... = true;_subdoc.isNew = true_subdoc.isNewObject. ... .init);_subdoc ... default_subdoc ... vePaths_subdoc.$___subdoc ... hs.init_subdoc ... t = {};_subdoc ... it = {}ret[i] = _subdoc;ret[i] = _subdocconst _ ... lse });_toObje ... alse })const i ... rue });initDoc ... true })Object. ... true }){ skipI ...  true }skipId: falseSchemaD ... lue;\n};SchemaD ... alue;\n}{\n  //  ... alue;\n}value ! ... == prevvalue === prevlet selected;let subdoc;if (!Ar ... s);\n  }!init & ... nArrays!Schema ... nArraysSchemaD ... nArrays!!doc && initdoc.mar ... (path);doc.mar ... d(path)if (!op ... s);\n  }!option ... (value)!option ... rayCastoptions ... rayCastskipDoc ... rayCastnew Mon ... , this)if (pre ... {};\n  }prev != null{\n    v ... {};\n  }value[a ...  || {};value[a ... ] || {}prev[ar ... ] || {}prev[ar ... Symbol]if (opt ... ex;\n  }{\n    v ... ex;\n  }value[a ... hIndex;value[a ... thIndexpath +  ... thIndexrawArra ... : valueif (!ra ... ;\n    }!rawArray[i]const s ...  true);spreadD ... , true)if (raw ... ;\n    }rawArra ... readDocrawArra ... eadDoc;if (raw ... }\n    }rawArra ... ocumentrawArra ... !== docrawArra ... Parent]if (ini ...       }const s ... ed, i);subdoc  ... ted, i)new Con ... ted, i)rawArra ... ay[i]);rawArra ... ray[i])subdoc. ... ray[i])subdoc.$initsubdoc  ... ned, i)rawArra ... subdoc;rawArray[i] = subdocrawArra ... == nullrawArray[i].__indexrawArra ... dex(i);rawArra ... ndex(i)rawArra ... etIndexrawArray[i] != nullselecte ... init));selecte ...  init))(select ...  init))selecte ... , init)scopePa ... , init)selected = true;selected = truesubdoc  ... ed, i);prev && ... nction'typeof prev.idprev.idsubdoc  ... ]._id);subdoc  ... i]._id)prev.id ... i]._id)rawArray[i]._idprev && ... ray[i])prev && subdocutils.d ... ray[i])subdoc.toObjectsubdoc. ... ay[i]);subdoc.setembeddedSchemaD ... ype;\n};SchemaD ... type;\n}SchemaD ... e.cloneschemat ... ators);schemat ... nators)this.Co ... inatorsschemat ... nators;this._a ... inatorsSchemaD ... pe);\n};SchemaD ... ope);\n}SchemaD ... Gettersfunctio ... ope);\n}{\n  ret ... ope);\n}return  ... scope);{\n  if  ... ined;\n}if (!(i ... ed;\n  }!(init && fields)(init && fields)init && fieldspath =  ... h + '.'array.path + '.'array.pathconst selected = {};let sub;key.startsWith(path)sub = k ... ength);sub = k ... length)key.sub ... length)sub === '$'sub.startsWith('$.')sub.startsWith$.sub = s ... ing(2);sub = s ... ring(2)sub.substring(2)sub.substringselected[sub]hasKeys && selectedSchemaD ... ray.setSchemaD ... ray.getSchemaD ... mMatch;SchemaD ... emMatchSchemaD ... andlers{\n  con ... ext);\n}this && ... atorKeythis && ... tructorthis.ca ... optionsthis.ca ... atorKeyconst d ...  || {};discrim ... s || {}this && ... s || {}this && ... inatorsif (dis ... t);\n  }val[dis ... != nullval[dis ... torKey]discrim ... orKey]]SchemaD ...   };\n};SchemaD ... \n  };\n}const i ... false);itemsTy ...  false)createJ ...  false){\n    . ... ) }\n  }items:  ... ions) }{ ...it ... ions) }...item ... inition...this ... ptions)this.sc ... ptions)this.sc ... NSchemamodule. ... tArray;module. ... ntArray/home/insomnia/repos/mongoose/lib/schema/documentArrayElement.js
 * DocumentArrayElement SchemaType constructor.
 *
 * @param {String} path
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Casts `val` for DocumentArrayElement.
 *
 * @param {Object} value to cast
 * @api private
 
 * Casts contents for queries.
 *
 * @param {String} $cond
 * @param {any} [val]
 * @api private
 
 * Clone the current SchemaType
 *
 * @return {DocumentArrayElement} The cloned instance
 * @api private
 SchemaSubdocument'./subdocument'SchemaDocumentArrayElement'Cannot create DocumentArrayElement schematype without a parent''DocumentArrayElement'DocumentArrayElement SchemaType constructor.Casts `val` for DocumentArrayElement.Clone the current SchemaTypeThe cloned instance
const S ... ment');SchemaS ... ument')./subdocument/subdocumentSchemaD ... Element{\n  thi ... true;\n}this.$p ... maType;this.$p ... emaTypeoptions ... emaType!this.$ ... emaTypenew Mon ... arent')Cannot create DocumentArrayElement schematype without a parentdelete  ... maType;delete  ... emaTypeSchemaT ... ment');SchemaT ... ement')'Docume ... lement'this.$i ... ElementSchemaD ... ement';SchemaD ... lement'SchemaD ... lement;SchemaD ... [0];\n};SchemaD ... )[0];\n}{\n  ret ... )[0];\n}return  ... gs)[0];this.$p ... rgs)[0]this.$p ... ..args)this.$p ... pe.castSchemaD ... ns);\n};SchemaD ... ons);\n}const C ... value);Constru ...  value)getCons ...  value)value & ... ructor)!(value ... ructor)(value  ... ructor)value i ... tructorvalue = ...  null);value = ... : null)new Con ... : null)options.indexSchemaS ... ptions)SchemaS ... te.callSchemaS ... alidate{\n  thi ...  ret;\n}this.op ... maType;this.op ... emaTyperet = S ... uments)SchemaT ... uments)SchemaT ... e.applySchemaT ... e.cloneret.cas ... caster;ret.cas ... .casterret.casterret.sch ... schema;ret.sch ... .schemaret.schemamodule. ... lement;module. ... Element/home/insomnia/repos/mongoose/lib/schema/double.js
 * Double SchemaType constructor.
 *
 * @param {String} path
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Sets a default option for all Double instances.
 *
 * #### Example:
 *
 *     // Make all Double fields required by default
 *     mongoose.Schema.Double.set('required', true);
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all Double instances
 *
 * #### Example:
 *
 *     // Converts Double to be a represent milliseconds upon access
 *     mongoose.Schema.Double.get(v => v == null ? '0.000 ms' : v.toString() + ' ms');
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to  IEEE 754-2008 floating points
 *
 * #### Example:
 *
 *     // Make Mongoose cast any NaNs to 0
 *     const defaultCast = mongoose.Schema.Types.Double.cast();
 *     mongoose.Schema.Types.Double.cast(v => {
 *       if (isNaN(v)) {
 *         return 0;
 *       }
 *       return defaultCast(v);
 *     });
 *
 *     // Or disable casting for Doubles entirely (only JS numbers are permitted)
 *     mongoose.Schema.Double.cast(false);
 *
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Casts to Double
 *
 * @param {Object} value
 * @param {Object} model this value is optional
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$lt` is the function Mongoose calls to cast `$lt` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaDouble
 * @instance
 * @api public
 '../cast/double'SchemaDouble'double'Double SchemaType constructor.Sets a default option for all Double instances.

#### Example:

// Make all Double fields required by default
mongoose.Schema.Double.set('required', true);Attaches a getter for all Double instances

#### Example:

// Converts Double to be a represent milliseconds upon access
mongoose.Schema.Double.get(v => v == null ? '0.000 ms' : v.toString() + ' ms');Get/set the function used to cast arbitrary values to  IEEE 754-2008 floating points

#### Example:

// Make Mongoose cast any NaNs to 0
const defaultCast = mongoose.Schema.Types.Double.cast();
mongoose.Schema.Types.Double.cast(v => {
if (isNaN(v)) {
return 0;
}
return defaultCast(v);
});

// Or disable casting for Doubles entirely (only JS numbers are permitted)
mongoose.Schema.Double.cast(false);Casts to DoubleContains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$lt` is the function Mongoose calls to cast `$lt` filter operators.SchemaDouble
const c ... uble');castDou ... ouble')require ... ouble')../cast/double/cast/doublefunctio ... le');\n}{\n  Sch ... le');\n}SchemaT ... uble');SchemaT ... ouble')SchemaD ... ouble';SchemaD ... Double'SchemaD ... Double;SchemaD ... aDoubleSchemaD ... tDoubleSchemaDouble._castSchemaDouble.setSchemaDouble.settersSchemaDouble.getif (v ! ...   }\n  }if (v._ ... ;\n    }v._bson ... Double'v._bsontypeSchemaDouble.castSchemaD ... = null;SchemaD ... != nulllet castDouble;castDou ... nction;castDou ... unctioncastDou ... cast();castDou ... .cast()SchemaDouble.cast()castDouble(value)doubleSchemaD ... le';\n};SchemaD ... ble';\n}functio ... ble';\n}{\n  ret ... ble';\n}return 'double';module. ... Double;module. ... aDouble/home/insomnia/repos/mongoose/lib/schema/index.js alias// alias'./bigint''./boolean''./buffer''./date''./decimal128''./documentArray''./double'Int32'./int32''./map''./number''./objectId''./string''./uuid'Union'./union'Oidexports ... rray');exports ... array')exports.Arrayexports ... gint');exports ... igint')exports.BigIntrequire('./bigint')./bigint/bigintexports ... lean');exports ... olean')exports.Booleanrequire('./boolean')./boolean/booleanexports ... ffer');exports ... uffer')exports.Bufferrequire('./buffer')./buffer/bufferexports ... date');exports ... /date')exports.Daterequire('./date')./date/dateexports ... l128');exports ... al128')exports.Decimal128exports.Decimal./decimal128/decimal128exports ... Array')exports ... ntArray./documentArray/documentArrayexports ... uble');exports ... ouble')exports.Doublerequire('./double')./double/doubleexports ... nt32');exports ... int32')exports.Int32require('./int32')./int32/int32exports ... /map');exports ... ./map')exports.Maprequire('./map')./map/mapexports ... ixed');exports ... mixed')exports.Mixedexports ... mber');exports ... umber')exports.Numberrequire('./number')./number/numberexports.ObjectIdrequire ... ectId')./objectId/objectIdexports ... ring');exports ... tring')exports.Stringrequire('./string')./string/stringexports ... ment');exports ... ument')exports.Subdocumentexports ... uuid');exports ... /uuid')exports.UUIDrequire('./uuid')./uuid/uuidexports ... nion');exports ... union')exports.Unionrequire('./union')./union/unionexports ... jectId;exports ... bjectIdexports.Oidexports ... .Mixed;exports ... s.Mixedexports.Objectexports ... oolean;exports ... Booleanexports.Boolexports.ObjectID/home/insomnia/repos/mongoose/lib/schema/int32.js
 * Int32 SchemaType constructor.
 *
 * @param {String} path
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Sets a default option for all Int32 instances.
 *
 * #### Example:
 *
 *     // Make all Int32 fields required by default
 *     mongoose.Schema.Int32.set('required', true);
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all Int32 instances
 *
 * #### Example:
 *
 *     // Converts int32 to be a represent milliseconds upon access
 *     mongoose.Schema.Int32.get(v => v == null ? '0 ms' : v.toString() + ' ms');
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to 32-bit integers
 *
 * #### Example:
 *
 *     // Make Mongoose cast NaN to 0
 *     const defaultCast = mongoose.Schema.Types.Int32.cast();
 *     mongoose.Schema.Types.Int32.cast(v => {
 *       if (isNaN(v)) {
 *         return 0;
 *       }
 *       return defaultCast(v);
 *     });
 *
 *     // Or disable casting for Int32s entirely (only JS numbers within 32-bit integer bounds and null-ish values are permitted)
 *     mongoose.Schema.Int32.cast(false);
 *
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Casts to Int32
 *
 * @param {Object} value
 * @param {Object} model this value is optional
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$gt` is the function Mongoose calls to cast `$gt` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaInt32
 * @instance
 * @api public
 '../cast/int32'SchemaInt32'Int32''int'Int32 SchemaType constructor.Sets a default option for all Int32 instances.

#### Example:

// Make all Int32 fields required by default
mongoose.Schema.Int32.set('required', true);Attaches a getter for all Int32 instances

#### Example:

// Converts int32 to be a represent milliseconds upon access
mongoose.Schema.Int32.get(v => v == null ? '0 ms' : v.toString() + ' ms');Get/set the function used to cast arbitrary values to 32-bit integers

#### Example:

// Make Mongoose cast NaN to 0
const defaultCast = mongoose.Schema.Types.Int32.cast();
mongoose.Schema.Types.Int32.cast(v => {
if (isNaN(v)) {
return 0;
}
return defaultCast(v);
});

// Or disable casting for Int32s entirely (only JS numbers within 32-bit integer bounds and null-ish values are permitted)
mongoose.Schema.Int32.cast(false);Casts to Int32Contains the handlers for different query operators for this schema type.
For example, `$conditionalHandlers.$gt` is the function Mongoose calls to cast `$gt` filter operators.SchemaInt32
const c ... nt32');castInt ... int32')require ... int32')../cast/int32/cast/int32functio ... 32');\n}{\n  Sch ... 32');\n}SchemaT ... nt32');SchemaT ... Int32')SchemaI ... Int32';SchemaI ... 'Int32'SchemaI ... emaNameSchemaI ... s = {};SchemaI ... ns = {}SchemaI ... OptionsSchemaI ... otype);SchemaI ... totype)SchemaI ... ototypeSchemaI ... aInt32;SchemaI ... maInt32SchemaI ... tructorSchemaI ... tInt32;SchemaI ... stInt32SchemaInt32._castSchemaI ... pe.set;SchemaI ... ype.setSchemaInt32.setSchemaI ... s = [];SchemaI ... rs = []SchemaInt32.settersSchemaI ... pe.get;SchemaI ... ype.getSchemaInt32.getSchemaI ... n v;\n};SchemaI ... rn v;\n}SchemaI ... tCaster{\n  con ... rn v;\n}typeof  ... T32_MAXtypeof  ... T32_MINtypeof  ... (v | 0)v !== (v | 0)(v | 0)v | 0v < INT32_MINv > INT32_MAXSchemaI ... ast;\n};SchemaI ... cast;\n}SchemaInt32.castSchemaI ... = null;SchemaI ... != nullSchemaI ... equiredSchemaI ... quired;SchemaI ... ue);\n};SchemaI ... lue);\n}SchemaI ... \n  }\n};SchemaI ... ;\n  }\n}SchemaI ... pe.castlet castInt32;castInt ... nction;castInt ... unctioncastInt ... cast();castInt ... .cast()SchemaInt32.cast()castInt32(value)const $ ... ator\n};$condit ... rator\n}{\n  ... ... rator\n}SchemaI ... orQuerySchemaI ... ed);\n};SchemaI ... red);\n}SchemaI ... NSchemaintSchemaI ... nt';\n};SchemaI ... int';\n}SchemaI ... ionTypefunctio ... int';\n}{\n  return 'int';\n}return 'int';module. ... aInt32;module. ... maInt32/home/insomnia/repos/mongoose/lib/schema/map.js
   * Returns the embedded schema type (i.e. the `.$*` path)
   /**\n    ... )\n   */
   * Returns this schema type's representation in a JSON schema.
   *
   * @param [options]
   * @param [options.useBsonType=false] If true, return a representation with `bsonType` for use with MongoDB's `$jsonSchema`.
   * @returns {Object} JSON schema properties
   /**\n    ... s\n   */'../types/map''../options/schemaMapOptions'SchemaMap'Map'additionalPropertiesReturns the embedded schema type (i.e. the `.$*` path)../types/mapSchemaM ... tions')../options/schemaMapOptions/options/schemaMapOptionsconstru ... ue;\n  }(key, o ... ue;\n  }{\n    s ... ue;\n  }super(k ... 'Map');super(k ...  'Map')this.$isSchemaMapset(opt ... e);\n  }(option ... e);\n  }SchemaT ...  value)cast(va ... e);\n  }(val, d ... e);\n  }{\n    i ... e);\n  }val ins ... ooseMapoptions?.pathmap = n ... maType)this.$__schemaTypeval ins ... bal.Mapglobal.Maplet _va ... t(key);_val = val.get(key)val.get(key)_val == null_val =  ... (_val);_val =  ... h(_val)map.$__ ... h(_val)map.$__ ... Nullishmap.$__schemaType_val =  ... key });_val =  ...  key })map.$__ ...  key })map.$__ ... pe.cast{ path: ... + key }path: p ... ' + keymap.$in ...  _val);map.$init(key, _val)map.$initlet _val = val[key];_val = val[key]return  ... aType);clone() ... pe;\n  }() {\n   ... pe;\n  }{\n    c ... pe;\n  }const s ... lone();schemat ... clone()super.clone()super.cloneschemat ... lone();this.$_ ... e.clonegetEmbe ... pe;\n  }toJSONS ... lt;\n  }(option ... lt;\n  }const u ... onType;useBson ... sonTypeconst r ... uired);result  ... quired)result. ... tions);result. ... ptions)result. ... pertiesautoEnc ... t';\n  }() {\n   ... t';\n  }{\n    r ... t';\n  }return 'object';SchemaM ...  'Map';SchemaM ... = 'Map'SchemaMap.schemaNameSchemaM ... ptions;SchemaM ... OptionsSchemaM ... tructorSchemaMap.prototypeSchemaM ... s = {};SchemaM ... ns = {}module. ... emaMap;module. ... hemaMap/home/insomnia/repos/mongoose/lib/schema/mixed.js
 * Mixed SchemaType constructor.
 *
 * @param {String} path
 * @param {Object} options
 * @inherits SchemaType
 * @api public
  make sure empty array defaults are handled// make ... handled prevent odd "shared" objects between documents// prev ... cuments
 * Attaches a getter for all Mixed paths.
 *
 * #### Example:
 *
 *     // Hide the 'hidden' path
 *     mongoose.Schema.Mixed.get(v => Object.assign({}, v, { hidden: null }));
 *
 *     const Model = mongoose.model('Test', new Schema({ test: {} }));
 *     new Model({ test: { hidden: 'Secret!' } }).test.hidden; // null
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Sets a default option for all Mixed instances.
 *
 * #### Example:
 *
 *     // Make all mixed instances have `required` of true by default.
 *     mongoose.Schema.Mixed.set('required', true);
 *
 *     const User = mongoose.model('User', new Schema({ test: mongoose.Mixed }));
 *     new User({ }).validateSync().errors.test.message; // Path `test` is required.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Casts `val` for Mixed.
 *
 * _this is a no-op_
 *
 * @param {Object} value to cast
 * @api private
  eslint-disable-next-line no-unused-vars// esli ... ed-vars'../helpers/isObject'SchemaMixedsharederrorToPOJO_optionsMixed SchemaType constructor.Attaches a getter for all Mixed paths.

#### Example:

// Hide the 'hidden' path
mongoose.Schema.Mixed.get(v => Object.assign({}, v, { hidden: null }));

const Model = mongoose.model('Test', new Schema({ test: {} }));
new Model({ test: { hidden: 'Secret!' } }).test.hidden; // nullSets a default option for all Mixed instances.

#### Example:

// Make all mixed instances have `required` of true by default.
mongoose.Schema.Mixed.set('required', true);

const User = mongoose.model('User', new Schema({ test: mongoose.Mixed }));
new User({ }).validateSync().errors.test.message; // Path `test` is required.Casts `val` for Mixed.

_this is a no-op_'../hel ... Object'../helpers/isObjectoptions ... defaultoptions.defaultconst d ... efault;def = o ... defaultdef.length === 0def.lengthoptions ...  Array;options ... = Array!option ... h === 0!option ... ct(def)!options.sharedoptions.sharedisObject(def)Object.keys(def)options ...      };options ...       }SchemaT ... ixed');SchemaT ... Mixed')this[sy ... = true;this[sy ...  = truethis[sy ... Symbol]symbols ... dSymbolSchemaM ... Mixed';SchemaM ... 'Mixed'SchemaM ... emaNameSchemaM ... otype);SchemaM ... totype)SchemaM ... aMixed;SchemaM ... maMixedSchemaM ... pe.get;SchemaM ... ype.getSchemaMixed.getSchemaM ... pe.set;SchemaM ... ype.setSchemaMixed.setSchemaM ... s = [];SchemaM ... rs = []SchemaMixed.settersSchemaM ... val;\n};SchemaM ...  val;\n}SchemaM ... pe.castval instanceof Errorreturn  ... O(val);utils.e ... JO(val)utils.errorToPOJOSchemaM ... orQuery{\n  return val;\n}SchemaM ...  {};\n};SchemaM ... n {};\n}SchemaM ... NSchemafunctio ... n {};\n}{\n  return {};\n}module. ... aMixed;module. ... maMixed/home/insomnia/repos/mongoose/lib/schema/number.js
 * Number SchemaType constructor.
 *
 * @param {String} key
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Attaches a getter for all Number instances.
 *
 * #### Example:
 *
 *     // Make all numbers round down
 *     mongoose.Number.get(function(v) { return Math.floor(v); });
 *
 *     const Model = mongoose.model('Test', new Schema({ test: Number }));
 *     new Model({ test: 3.14 }).test; // 3
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Sets a default option for all Number instances.
 *
 * #### Example:
 *
 *     // Make all numbers have option `min` equal to 0.
 *     mongoose.Schema.Number.set('min', 0);
 *
 *     const Order = mongoose.model('Order', new Schema({ amount: Number }));
 *     new Order({ amount: -10 }).validateSync().errors.amount.message; // Path `amount` must be larger than 0.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to numbers.
 *
 * #### Example:
 *
 *     // Make Mongoose cast empty strings '' to 0 for paths declared as numbers
 *     const original = mongoose.Number.cast();
 *     mongoose.Number.cast(v => {
 *       if (v === '') { return 0; }
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.Number.cast(false);
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Sets a minimum number validator.
 *
 * #### Example:
 *
 *     const s = new Schema({ n: { type: Number, min: 10 })
 *     const M = db.model('M', s)
 *     const m = new M({ n: 9 })
 *     m.save(function (err) {
 *       console.error(err) // validator error
 *       m.n = 10;
 *       m.save() // success
 *     })
 *
 *     // custom error messages
 *     // We can also use the special {MIN} token which will be replaced with the invalid value
 *     const min = [10, 'The value of path `{PATH}` ({VALUE}) is beneath the limit ({MIN}).'];
 *     const schema = new Schema({ n: { type: Number, min: min })
 *     const M = mongoose.model('Measurement', schema);
 *     const s= new M({ n: 4 });
 *     s.validate(function (err) {
 *       console.log(String(err)) // ValidationError: The value of path `n` (4) is beneath the limit (10).
 *     })
 *
 * @param {Number} value minimum number
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 
 * Sets a maximum number validator.
 *
 * #### Example:
 *
 *     const s = new Schema({ n: { type: Number, max: 10 })
 *     const M = db.model('M', s)
 *     const m = new M({ n: 11 })
 *     m.save(function (err) {
 *       console.error(err) // validator error
 *       m.n = 10;
 *       m.save() // success
 *     })
 *
 *     // custom error messages
 *     // We can also use the special {MAX} token which will be replaced with the invalid value
 *     const max = [10, 'The value of path `{PATH}` ({VALUE}) exceeds the limit ({MAX}).'];
 *     const schema = new Schema({ n: { type: Number, max: max })
 *     const M = mongoose.model('Measurement', schema);
 *     const s= new M({ n: 4 });
 *     s.validate(function (err) {
 *       console.log(String(err)) // ValidationError: The value of path `n` (4) exceeds the limit (10).
 *     })
 *
 * @param {Number} maximum number
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 
 * Sets a enum validator
 *
 * #### Example:
 *
 *     const s = new Schema({ n: { type: Number, enum: [1, 2, 3] });
 *     const M = db.model('M', s);
 *
 *     const m = new M({ n: 4 });
 *     await m.save(); // throws validation error
 *
 *     m.n = 3;
 *     await m.save(); // succeeds
 *
 * @param {Array} values allowed values
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 
 * Casts to number
 *
 * @param {Object} value value to cast
 * @param {Document} doc document that triggers the casting
 * @param {Boolean} init
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$gte` is the function Mongoose calls to cast `$gte` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaNumber
 * @instance
 * @api public
 '../options/schemaNumberOptions''../cast/number'SchemaNumberenumValidatorisObjectSyntaxenumValueshandleArrayNumber SchemaType constructor.Attaches a getter for all Number instances.

#### Example:

// Make all numbers round down
mongoose.Number.get(function(v) { return Math.floor(v); });

const Model = mongoose.model('Test', new Schema({ test: Number }));
new Model({ test: 3.14 }).test; // 3Sets a default option for all Number instances.

#### Example:

// Make all numbers have option `min` equal to 0.
mongoose.Schema.Number.set('min', 0);

const Order = mongoose.model('Order', new Schema({ amount: Number }));
new Order({ amount: -10 }).validateSync().errors.amount.message; // Path `amount` must be larger than 0.Get/set the function used to cast arbitrary values to numbers.

#### Example:

// Make Mongoose cast empty strings '' to 0 for paths declared as numbers
const original = mongoose.Number.cast();
mongoose.Number.cast(v => {
if (v === '') { return 0; }
return original(v);
});

// Or disable casting entirely
mongoose.Number.cast(false);Sets a minimum number validator.

#### Example:

const s = new Schema({ n: { type: Number, min: 10 })
const M = db.model('M', s)
const m = new M({ n: 9 })
m.save(function (err) {
console.error(err) // validator error
m.n = 10;
m.save() // success
})

// custom error messages
// We can also use the special {MIN} token which will be replaced with the invalid value
const min = [10, 'The value of path `{PATH}` ({VALUE}) is beneath the limit ({MIN}).'];
const schema = new Schema({ n: { type: Number, min: min })
const M = mongoose.model('Measurement', schema);
const s= new M({ n: 4 });
s.validate(function (err) {
console.log(String(err)) // ValidationError: The value of path `n` (4) is beneath the limit (10).
})minimum number
Sets a maximum number validator.

#### Example:

const s = new Schema({ n: { type: Number, max: 10 })
const M = db.model('M', s)
const m = new M({ n: 11 })
m.save(function (err) {
console.error(err) // validator error
m.n = 10;
m.save() // success
})

// custom error messages
// We can also use the special {MAX} token which will be replaced with the invalid value
const max = [10, 'The value of path `{PATH}` ({VALUE}) exceeds the limit ({MAX}).'];
const schema = new Schema({ n: { type: Number, max: max })
const M = mongoose.model('Measurement', schema);
const s= new M({ n: 4 });
s.validate(function (err) {
console.log(String(err)) // ValidationError: The value of path `n` (4) exceeds the limit (10).
})number
Sets a enum validator

#### Example:

const s = new Schema({ n: { type: Number, enum: [1, 2, 3] });
const M = db.model('M', s);

const m = new M({ n: 4 });
await m.save(); // throws validation error

m.n = 3;
await m.save(); // succeedsallowed values
Casts to numbervalue to cast
SchemaNumber
SchemaN ... tions')../options/schemaNumberOptions/options/schemaNumberOptions../cast/numberSchemaT ... mber');SchemaT ... umber')SchemaN ... pe.get;SchemaN ... ype.getSchemaNumber.getSchemaN ... pe.set;SchemaN ... ype.setSchemaNumber.setSchemaN ... s = [];SchemaN ... rs = []SchemaNumber.settersSchemaN ... Number;SchemaN ... tNumberSchemaNumber._castSchemaN ... ast;\n};SchemaN ... cast;\n}SchemaNumber.castSchemaN ... n v;\n};SchemaN ... rn v;\n}SchemaN ... tCasterSchemaN ... umber';SchemaN ... Number'SchemaN ... emaNameSchemaN ... s = {};SchemaN ... ns = {}SchemaN ... OptionsSchemaN ... otype);SchemaN ... totype)SchemaN ... aNumberSchemaN ... tructorSchemaN ... ptions;SchemaN ...  NumberSchemaN ... equiredv => ty ...  Numbertypeof  ...  Numberv instanceof NumberSchemaN ... quired;SchemaN ... ue);\n};SchemaN ... lue);\n}SchemaN ... uired()SchemaN ... his;\n};SchemaN ... this;\n}SchemaN ... ype.minvalue !== nulllet msg ... er.min;msg = m ... ber.minmessage ... ber.minMongoos ... ber.minmsg = m ... value);msg = m ...  value)msg.rep ...  value)v == nu ... = valuev >= valueSchemaN ... ype.maxlet msg ... er.max;msg = m ... ber.maxmessage ... ber.maxMongoos ... ber.maxv <= valueSchemaN ... pe.enumthis.enumValidatorif (!Ar ... um;\n  }!Array. ... values)Array.i ... values){\n    c ... um;\n  }isObjec ... != nullutils.isPOJO(values)values. ... != nullvalues.valuesmessage ... essage;values.messagevalues  ... values;values  ... .valuestypeof valuesvalues  ... ments);values  ... uments)message = null;message = nullvalues  ... alues);values  ... values)Object. ... values)message ... r.enum;message ... er.enumMongoos ... er.enummessage == nullthis.en ... !== -1;this.en ...  !== -1v => v  ...  !== -1v == nu ...  !== -1values. ...  !== -1values.indexOf(v)values.indexOfthis.va ... s\n  });this.va ... es\n  }){\n    v ... ues\n  }validat ... lidatortype: 'enum'enumValues: valuesSchemaN ... \n  }\n};SchemaN ... ;\n  }\n}SchemaN ... pe.casttypeof  ... , init)const v ...  value;val = v ...   valuevalue & ...   valuevalue & ... efined'let castNumber;castNum ... nction;castNum ... unctioncastNum ... cast();castNum ... .cast()SchemaNumber.cast()if (!Ar ... )];\n  }return  ... (val)];[this.cast(val)]val.map ... );\n  })functio ... m);\n  }{\n    r ... m);\n  }return  ... ast(m);_this.cast(m)const $ ... rray\n};$condit ... Array\n}{\n  ... ... Array\n}$mod: handleArraySchemaN ... val;\n};SchemaN ...  val;\n}SchemaN ... orQueryval = t ... ntext);val = t ... ontext)SchemaN ... ed);\n};SchemaN ... red);\n}SchemaN ... NSchemaconst i ...  '_id';isRequi ... = '_id'(this.o ... = '_id'(this.o ... ction')this.path === '_id'module. ... aNumber/home/insomnia/repos/mongoose/lib/schema/objectId.js
 * ObjectId SchemaType constructor.
 *
 * @param {String} key
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Attaches a getter for all ObjectId instances
 *
 * #### Example:
 *
 *     // Always convert to string when getting an ObjectId
 *     mongoose.ObjectId.get(v => v.toString());
 *
 *     const Model = mongoose.model('Test', new Schema({}));
 *     typeof (new Model({})._id); // 'string'
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Sets a default option for all ObjectId instances.
 *
 * #### Example:
 *
 *     // Make all object ids have option `required` equal to true.
 *     mongoose.Schema.ObjectId.set('required', true);
 *
 *     const Order = mongoose.model('Order', new Schema({ userId: ObjectId }));
 *     new Order({ }).validateSync().errors.userId.message; // Path `userId` is required.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Adds an auto-generated ObjectId default if turnOn is true.
 * @param {Boolean} turnOn auto generated ObjectId defaults
 * @api public
 * @return {SchemaType} this
 
 * Get/set the function used to cast arbitrary values to objectids.
 *
 * #### Example:
 *
 *     // Make Mongoose only try to cast length 24 strings. By default, any 12
 *     // char string is a valid ObjectId.
 *     const original = mongoose.ObjectId.cast();
 *     mongoose.ObjectId.cast(v => {
 *       assert.ok(typeof v !== 'string' || v.length === 24);
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.ObjectId.cast(false);
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Casts to ObjectId
 *
 * @param {Object} value
 * @param {Object} doc
 * @param {Boolean} init whether this is an initialization cast
 * @api private
  wait! we may need to cast this to a document// wait ... ocument
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$in` is the function Mongoose calls to cast `$in` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaObjectId
 * @instance
 * @api public
 
 * Returns this schema type's representation in a JSON schema.
 *
 * @param [options]
 * @param [options.useBsonType=false] If true, return a representation with `bsonType` for use with MongoDB's `$jsonSchema`.
 * @returns {Object} JSON schema properties
 * @api public
 '../options/schemaObjectIdOptions''../cast/objectid'oidSchemaObjectIdisKeyHexStr/^[a-f0-9]+$/isuppressWarning'mongoose: To create a new ObjectId please try ''`Mongoose.Types.ObjectId` instead of using ''`Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if ''you\'re trying to create a hex char path in your schema.'turnOndefaultIdresetId' is not an instance of ObjectId''objectid''../document''objectId'ObjectId SchemaType constructor.Attaches a getter for all ObjectId instances

#### Example:

// Always convert to string when getting an ObjectId
mongoose.ObjectId.get(v => v.toString());

const Model = mongoose.model('Test', new Schema({}));
typeof (new Model({})._id); // 'string'Sets a default option for all ObjectId instances.

#### Example:

// Make all object ids have option `required` equal to true.
mongoose.Schema.ObjectId.set('required', true);

const Order = mongoose.model('Order', new Schema({ userId: ObjectId }));
new Order({ }).validateSync().errors.userId.message; // Path `userId` is required.Adds an auto-generated ObjectId default if turnOn is true.auto generated ObjectId defaults
Get/set the function used to cast arbitrary values to objectids.

#### Example:

// Make Mongoose only try to cast length 24 strings. By default, any 12
// char string is a valid ObjectId.
const original = mongoose.ObjectId.cast();
mongoose.ObjectId.cast(v => {
assert.ok(typeof v !== 'string' || v.length === 24);
return original(v);
});

// Or disable casting entirely
mongoose.ObjectId.cast(false);Casts to ObjectIdSchemaObjectId
JSON schema properties
SchemaO ... tions')../options/schemaObjectIdOptions/options/schemaObjectIdOptionsconst c ... ctid');castObj ... ectid')../cast/objectid/cast/objectidconst o ... ctid');oid = r ... ectid')functio ... Id');\n}{\n  con ... Id');\n}const i ... t(key);isKeyHe ... st(key)typeof  ... st(key)typeof  ...  === 24key.length === 24key.length/^[a-f0 ... st(key)/^[a-f0-9]+$/i.test^[a-f0-9]+$[a-f0-9]+[a-f0-9]const s ... arning;suppres ... Warningoptions ... Warningif ((is ... ');\n  }(isKeyH ... Warning(isKeyH ... fined')isKeyHe ... efined'!suppressWarningutils.w ... ema.');utils.w ... hema.')'mongoo ... chema.''mongoo ... on if ''mongoo ... using ''mongoo ... e try 'mongoose: To create a new ObjectId please try '`Mongo ... using '`Mongoose.Types.ObjectId` instead of using '`Mongo ... on if '`Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if 'you\'r ... chema.'you're trying to create a hex char path in your schema.mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.mongoose: To create a new ObjectId please try `MongooseObjectId` instead of using `MongooseObjectId` Set the `suppressWarning` option if you're trying to create a hex char path in your schemaSchemaT ... ctId');SchemaT ... ectId')SchemaO ... ectId';SchemaO ... jectId'SchemaO ... emaNameSchemaO ... s = {};SchemaO ... ns = {}SchemaO ... otype);SchemaO ... totype)SchemaO ... jectId;SchemaO ... bjectIdSchemaO ... tructorSchemaO ... ptions;SchemaO ... pe.get;SchemaO ... ype.getSchemaObjectId.getSchemaO ... pe.set;SchemaO ... ype.setSchemaObjectId.setSchemaO ... s = [];SchemaO ... rs = []SchemaO ... settersSchemaO ... his;\n};SchemaO ... this;\n}SchemaO ... pe.autoif (tur ... d);\n  }{\n    t ... d);\n  }this.de ... ultId);this.de ... aultId)this.set(resetId);this.set(resetId)SchemaO ... ctId');SchemaO ... ectId')SchemaO ... equiredv => is ... ectId')SchemaObjectId._castSchemaO ... ast;\n};SchemaO ... cast;\n}SchemaObjectId.castSchemaO ... n v;\n};SchemaO ... rn v;\n}SchemaO ... tCasterif (!(i ... ');\n  }!(isBso ... ctId'))(isBson ... ctId'))throw n ... ctId');new Err ... ectId')v + ' i ... jectId'' is no ... jectId' is not an instance of ObjectIdSchemaO ... quired;SchemaO ... ue);\n};SchemaO ... lue);\n}SchemaO ... uired()SchemaO ... \n  }\n};SchemaO ... ;\n  }\n}SchemaO ... pe.castif (!(i ...   }\n  }!(isBso ... , init)if ((ge ... ;\n    }(getCon ... jectid'(getCon ... rCase()(getCon ... werCase(getCon ...  || '')getCons ... ) || ''getCons ... (value)objectidnew oid ... ring())value.toHexString()value.toHexStringlet castObjectId;castObj ... nction;castObj ... unctioncastObj ... cast();castObj ... .cast()SchemaO ... .cast()castObjectId(value)functio ... id();\n}{\n  ret ... id();\n}return new oid();new oid()default ... = true;default ...  = true{\n  Doc ... rn v;\n}Documen ... ent'));Documen ... ment'))(Docume ... ment'))../documentconst _ ...  oid();_v = new oid()SchemaO ... ed);\n};SchemaO ... red);\n}SchemaO ... NSchemaobjectIdSchemaO ... Id';\n};SchemaO ... tId';\n}SchemaO ... ionTypefunctio ... tId';\n}{\n  ret ... tId';\n}return 'objectId';/home/insomnia/repos/mongoose/lib/schema/operators/bitwise.js/home/insomnia/repos/mongoose/lib/schema/operators Assume trying to cast to number// Assu ...  number_castNumber{\n  con ... val);\n}return  ... th, v);_castNu ... ath, v)if (Buf ... al;\n  }_castNu ... h, val)const v ... r(num);v = Number(num)Number(num)if (isN ... h);\n  }isNaN(v)module. ... erator;module. ... perator/home/insomnia/repos/mongoose/lib/schema/operators/exists.js'../../cast/boolean'../../cast/booleanconst p ... : null;path =  ...  : nullthis != ...  : nullthis != nullcastBoo ... , path)/home/insomnia/repos/mongoose/lib/schema/operators/geospatial.js ignore unknowns// ignore unknownscastArraysOfNumbers'./helpers''../array'_castMinMaxDistancecast$geometry'$near must be either an array or an object ''with a $geometry property''LineString''$box''$polygon''Invalid $within $box argument. ''Expected an array, received ''$center''$centerSphere'const c ... umbers;castArr ... Numbersrequire ... Numbersrequire('./helpers')./helpers/helpersexports ... rsects;exports ... ersectsexports ... t$near;exports ... st$nearexports.cast$nearexports ... within;exports ... $withinexports.cast$withinrequire('../array')../arraycastArr ...  this);castArr ... , this)_castMi ... , val);_castMi ... s, val)val && val.$geometryval.$geometrycast$ge ... , this)new Typ ... perty')'$near  ... operty''$near  ... bject '$near must be either an array or an object 'with a ... operty'with a $geometry property$near must be either an array or an object with a $geometry propertynear must be either an array or an object with a geometry propertySchemaA ... l, val)SchemaA ... ry.call{\n  swi ...  val;\n}val.$geometry.typecase 'Polygon':case 'LineString':LineStringcase 'P ...  break;castArr ...  self);castArr ... , self)val.$ge ... dinates_castMi ... f, val){\n  _ca ...  val;\n}val.$bo ... polygonval.$boxval.$polygonconst t ... lygon';type =  ... olygon'val.$bo ... olygon'val[typ ...     });val[typ ... \n    })val[type].forEachval[type]arr =>  ... ;\n    }const m ...  + arr;msg = ' ... ' + arr'Invali ... ' + arr'Invali ... ment. 'Invalid $within $box argument. Expected an array, received new TypeError(msg)arr.for ...     });arr.for ...      })arr.forEacharr[i]  ... is, v);arr[i]  ... his, v)castToN ... his, v)castToNumber.callval.$ce ... rSphereval.$centerval.$centerSphereconst t ... phere';type =  ... Sphere'val.$ce ... Sphere'(item,  ... }\n    }item.fo ...     });item.fo ...      })item.forEach(v, j)  ...       }item[j] ... is, v);item[j] ... his, v)item[j]val[typ ...  item);val[typ ... , item)val[type][i]castToN ... , item)cast$ge ...  this);const g ... ometry;geo = val.$geometryif (!ge ... rn;\n  }!geo{\n    v ... e);\n  }val.$ma ... tance);val.$ma ... stance)castToN ... stance)val.$mi ... tance);val.$mi ... stance)/home/insomnia/repos/mongoose/lib/schema/operators/helpers.js'../number'const S ... mber');SchemaN ... umber')require('../number')../numberexports ... Number;exports ... oNumberexports.castToNumberexports ... umbers;exports ... Numbersreturn  ... )(val);SchemaN ... ()(val){\n  arr ...   });\n}arr.for ... }\n  });arr.for ...  }\n  })arr[i]  ... lf, v);arr[i]  ... elf, v)castToN ... elf, v)/home/insomnia/repos/mongoose/lib/schema/operators/text.js
 * Casts val to an object suitable for `$text`. Throws an error if the object
 * can't be casted.
 *
 * @param {Any} val value to cast
 * @param {String} [path] path to associate with any errors that occured
 * @return {Object} casted object
 * @see https://www.mongodb.com/docs/manual/reference/operator/query/text/
 * @api private
 '../../cast/string''.$search'$language'.$language'$caseSensitive'.$castSensitive'$diacriticSensitive'.$diacriticSensitive'Casts val to an object suitable for `$text`. Throws an error if the object
can't be casted.path to associate with any errors that occured
casted object
https://www.mongodb.com/docs/manual/reference/operator/query/text/
../../cast/stringif (val ... h);\n  }if (val ... ');\n  }val.$search != nullval.$search{\n    v ... ');\n  }val.$se ... arch');val.$se ... earch')castStr ... earch')path + '.$search'.$searchval.$la ... != nullval.$languageval.$la ... uage');val.$la ... guage')castStr ... guage')path + '.$language'.$languageval.$ca ... != nullval.$caseSensitiveval.$ca ... tive');val.$ca ... itive')castBoo ... itive')path +  ... sitive'.$castSensitiveval.$di ... != nullval.$di ... nsitiveval.$di ... tive');val.$di ... itive')'.$diac ... sitive'.$diacriticSensitive/home/insomnia/repos/mongoose/lib/schema/operators/type.js'$type array values must be strings or numbers''$type parameter must be number, string, or array of numbers and strings'if (!va ... ;\n    }!val.ev ... tring')val.eve ... tring')val.everythrow n ... bers');new Err ... mbers')'$type  ... umbers'$type array values must be strings or numberstype array values must be strings or numbersnew Err ... rings')'$type  ... trings'$type parameter must be number, string, or array of numbers and stringstype parameter must be number, string, or array of numbers and strings/home/insomnia/repos/mongoose/lib/schema/string.js
 * String SchemaType constructor.
 *
 * @param {String} key
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Get/set the function used to cast arbitrary values to strings.
 *
 * #### Example:
 *
 *     // Throw an error if you pass in an object. Normally, Mongoose allows
 *     // objects with custom `toString()` functions.
 *     const original = mongoose.Schema.Types.String.cast();
 *     mongoose.Schema.Types.String.cast(v => {
 *       assert.ok(v == null || typeof v !== 'object');
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.Schema.Types.String.cast(false);
 *
 * @param {Function} caster
 * @return {Function}
 * @function cast
 * @static
 * @api public
 
 * Attaches a getter for all String instances.
 *
 * #### Example:
 *
 *     // Make all numbers round down
 *     mongoose.Schema.String.get(v => v.toLowerCase());
 *
 *     const Model = mongoose.model('Test', new Schema({ test: String }));
 *     new Model({ test: 'FOO' }).test; // 'foo'
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Sets a default option for all String instances.
 *
 * #### Example:
 *
 *     // Make all strings have option `trim` equal to true.
 *     mongoose.Schema.String.set('trim', true);
 *
 *     const User = mongoose.model('User', new Schema({ name: String }));
 *     new User({ name: '   John Doe   ' }).name; // 'John Doe'
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Adds an enum validator
 *
 * #### Example:
 *
 *     const states = ['opening', 'open', 'closing', 'closed']
 *     const s = new Schema({ state: { type: String, enum: states }})
 *     const M = db.model('M', s)
 *     const m = new M({ state: 'invalid' })
 *     await m.save()
 *       .catch((err) => console.error(err)); // ValidationError: `invalid` is not a valid enum value for path `state`.
 *     m.state = 'open';
 *     await m.save();
 *     // success
 *
 *     // or with custom error messages
 *     const enum = {
 *       values: ['opening', 'open', 'closing', 'closed'],
 *       message: 'enum validator failed for path `{PATH}` with value `{VALUE}`'
 *     }
 *     const s = new Schema({ state: { type: String, enum: enum })
 *     const M = db.model('M', s)
 *     const m = new M({ state: 'invalid' })
 *     await m.save()
 *       .catch((err) => console.error(err)); // ValidationError: enum validator failed for path `state` with value `invalid`
 *     m.state = 'open';
 *     await m.save();
 *     // success
 *
 * @param {...String|Object} [args] enumeration values
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @see Enums in JavaScript https://masteringjs.io/tutorials/fundamentals/enum
 * @api public
 
 * Adds a lowercase [setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()).
 *
 * #### Example:
 *
 *     const s = new Schema({ email: { type: String, lowercase: true }})
 *     const M = db.model('M', s);
 *     const m = new M({ email: 'SomeEmail@example.COM' });
 *     console.log(m.email) // someemail@example.com
 *     M.find({ email: 'SomeEmail@example.com' }); // Queries by 'someemail@example.com'
 *
 * Note that `lowercase` does **not** affect regular expression queries:
 *
 * #### Example:
 *
 *     // Still queries for documents whose `email` matches the regular
 *     // expression /SomeEmail/. Mongoose does **not** convert the RegExp
 *     // to lowercase.
 *     M.find({ email: /SomeEmail/ });
 *
 * @api public
 * @return {SchemaType} this
 
 * Adds an uppercase [setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()).
 *
 * #### Example:
 *
 *     const s = new Schema({ caps: { type: String, uppercase: true }})
 *     const M = db.model('M', s);
 *     const m = new M({ caps: 'an example' });
 *     console.log(m.caps) // AN EXAMPLE
 *     M.find({ caps: 'an example' }) // Matches documents where caps = 'AN EXAMPLE'
 *
 * Note that `uppercase` does **not** affect regular expression queries:
 *
 * #### Example:
 *
 *     // Mongoose does **not** convert the RegExp to uppercase.
 *     M.find({ email: /an example/ });
 *
 * @api public
 * @return {SchemaType} this
 
 * Adds a trim [setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()).
 *
 * The string value will be [trimmed](https://masteringjs.io/tutorials/fundamentals/trim-string) when set.
 *
 * #### Example:
 *
 *     const s = new Schema({ name: { type: String, trim: true }});
 *     const M = db.model('M', s);
 *     const string = ' some name ';
 *     console.log(string.length); // 11
 *     const m = new M({ name: string });
 *     console.log(m.name.length); // 9
 *
 *     // Equivalent to `findOne({ name: string.trim() })`
 *     M.findOne({ name: string });
 *
 * Note that `trim` does **not** affect regular expression queries:
 *
 * #### Example:
 *
 *     // Mongoose does **not** trim whitespace from the RegExp.
 *     M.find({ name: / some name / });
 *
 * @api public
 * @return {SchemaType} this
 
 * Sets a minimum length validator.
 *
 * #### Example:
 *
 *     const schema = new Schema({ postalCode: { type: String, minLength: 5 })
 *     const Address = db.model('Address', schema)
 *     const address = new Address({ postalCode: '9512' })
 *     address.save(function (err) {
 *       console.error(err) // validator error
 *       address.postalCode = '95125';
 *       address.save() // success
 *     })
 *
 *     // custom error messages
 *     // We can also use the special {MINLENGTH} token which will be replaced with the minimum allowed length
 *     const minLength = [5, 'The value of path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).'];
 *     const schema = new Schema({ postalCode: { type: String, minLength: minLength })
 *     const Address = mongoose.model('Address', schema);
 *     const address = new Address({ postalCode: '9512' });
 *     address.validate(function (err) {
 *       console.log(String(err)) // ValidationError: The value of path `postalCode` (`9512`) is shorter than the minimum length (5).
 *     })
 *
 * @param {Number} value minimum string length
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 
 * Sets a maximum length validator.
 *
 * #### Example:
 *
 *     const schema = new Schema({ postalCode: { type: String, maxlength: 9 })
 *     const Address = db.model('Address', schema)
 *     const address = new Address({ postalCode: '9512512345' })
 *     address.save(function (err) {
 *       console.error(err) // validator error
 *       address.postalCode = '95125';
 *       address.save() // success
 *     })
 *
 *     // custom error messages
 *     // We can also use the special {MAXLENGTH} token which will be replaced with the maximum allowed length
 *     const maxlength = [9, 'The value of path `{PATH}` (`{VALUE}`) exceeds the maximum allowed length ({MAXLENGTH}).'];
 *     const schema = new Schema({ postalCode: { type: String, maxlength: maxlength })
 *     const Address = mongoose.model('Address', schema);
 *     const address = new Address({ postalCode: '9512512345' });
 *     address.validate(function (err) {
 *       console.log(String(err)) // ValidationError: The value of path `postalCode` (`9512512345`) exceeds the maximum allowed length (9).
 *     })
 *
 * @param {Number} value maximum string length
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
 
 * Sets a regexp validator.
 *
 * Any value that does not pass `regExp`.test(val) will fail validation.
 *
 * #### Example:
 *
 *     const s = new Schema({ name: { type: String, match: /^a/ }})
 *     const M = db.model('M', s)
 *     const m = new M({ name: 'I am invalid' })
 *     m.validate(function (err) {
 *       console.error(String(err)) // "ValidationError: Path `name` is invalid (I am invalid)."
 *       m.name = 'apples'
 *       m.validate(function (err) {
 *         assert.ok(err) // success
 *       })
 *     })
 *
 *     // using a custom error message
 *     const match = [ /\.html$/, "That file doesn't end in .html ({VALUE})" ];
 *     const s = new Schema({ file: { type: String, match: match }})
 *     const M = db.model('M', s);
 *     const m = new M({ file: 'invalid' });
 *     m.validate(function (err) {
 *       console.log(String(err)) // "ValidationError: That file doesn't end in .html (invalid)"
 *     })
 *
 * Empty strings, `undefined`, and `null` values always pass the match validator. If you require these values, enable the `required` validator also.
 *
 *     const s = new Schema({ name: { type: String, match: /^a/, required: true }})
 *
 * @param {RegExp} regExp regular expression to test against
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @api public
  yes, we allow multiple match validators// yes, ... idators In case RegExp happens to have `/g` flag set, we need to reset the// In c ... set the `lastIndex`, otherwise `match` will intermittently fail.// `las ... y fail.
 * Check if the given value satisfies the `required` validator. The value is
 * considered valid if it is a string (that is, not `null` or `undefined`) and
 * has positive length. The `required` validator **will** fail for empty
 * strings.
 *
 * @param {Any} value
 * @param {Document} doc
 * @return {Boolean}
 * @api public
 
 * Casts to String
 *
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$exists` is the function Mongoose calls to cast `$exists` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaString
 * @instance
 * @api public
 
 * Casts contents for queries.
 *
 * @param {String} $conditional
 * @param {any} [val]
 * @api private
 '../options/schemaStringOptions''../cast/string'regExp'OptionsConstructor'errorMessageshouldApplyshouldTrimminlengthValidator/{MINLENGTH}/maxlengthValidator/{MAXLENGTH}/matchValidator'regexp'handleSingleNoSettershandle$regex'[object RegExp]'' with String.''BSONRegExp'String SchemaType constructor.Get/set the function used to cast arbitrary values to strings.

#### Example:

// Throw an error if you pass in an object. Normally, Mongoose allows
// objects with custom `toString()` functions.
const original = mongoose.Schema.Types.String.cast();
mongoose.Schema.Types.String.cast(v => {
assert.ok(v == null || typeof v !== 'object');
return original(v);
});

// Or disable casting entirely
mongoose.Schema.Types.String.cast(false);Attaches a getter for all String instances.

#### Example:

// Make all numbers round down
mongoose.Schema.String.get(v => v.toLowerCase());

const Model = mongoose.model('Test', new Schema({ test: String }));
new Model({ test: 'FOO' }).test; // 'foo'Sets a default option for all String instances.

#### Example:

// Make all strings have option `trim` equal to true.
mongoose.Schema.String.set('trim', true);

const User = mongoose.model('User', new Schema({ name: String }));
new User({ name: '   John Doe   ' }).name; // 'John Doe'Adds an enum validator

#### Example:

const states = ['opening', 'open', 'closing', 'closed']
const s = new Schema({ state: { type: String, enum: states }})
const M = db.model('M', s)
const m = new M({ state: 'invalid' })
await m.save()
.catch((err) => console.error(err)); // ValidationError: `invalid` is not a valid enum value for path `state`.
m.state = 'open';
await m.save();
// success

// or with custom error messages
const enum = {
values: ['opening', 'open', 'closing', 'closed'],
message: 'enum validator failed for path `{PATH}` with value `{VALUE}`'
}
const s = new Schema({ state: { type: String, enum: enum })
const M = db.model('M', s)
const m = new M({ state: 'invalid' })
await m.save()
.catch((err) => console.error(err)); // ValidationError: enum validator failed for path `state` with value `invalid`
m.state = 'open';
await m.save();
// successEnums in JavaScript https://masteringjs.io/tutorials/fundamentals/enum
Adds a lowercase [setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()).

#### Example:

const s = new Schema({ email: { type: String, lowercase: true }})
const M = db.model('M', s);
const m = new M({ email: 'SomeEmail@example.COM' });
console.log(m.email) // someemail@example.com
M.find({ email: 'SomeEmail@example.com' }); // Queries by 'someemail@example.com'

Note that `lowercase` does **not** affect regular expression queries:

#### Example:

// Still queries for documents whose `email` matches the regular
// expression /SomeEmail/. Mongoose does **not** convert the RegExp
// to lowercase.
M.find({ email: /SomeEmail/ });Adds an uppercase [setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()).

#### Example:

const s = new Schema({ caps: { type: String, uppercase: true }})
const M = db.model('M', s);
const m = new M({ caps: 'an example' });
console.log(m.caps) // AN EXAMPLE
M.find({ caps: 'an example' }) // Matches documents where caps = 'AN EXAMPLE'

Note that `uppercase` does **not** affect regular expression queries:

#### Example:

// Mongoose does **not** convert the RegExp to uppercase.
M.find({ email: /an example/ });Adds a trim [setter](https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.set()).

The string value will be [trimmed](https://masteringjs.io/tutorials/fundamentals/trim-string) when set.

#### Example:

const s = new Schema({ name: { type: String, trim: true }});
const M = db.model('M', s);
const string = ' some name ';
console.log(string.length); // 11
const m = new M({ name: string });
console.log(m.name.length); // 9

// Equivalent to `findOne({ name: string.trim() })`
M.findOne({ name: string });

Note that `trim` does **not** affect regular expression queries:

#### Example:

// Mongoose does **not** trim whitespace from the RegExp.
M.find({ name: / some name / });Sets a minimum length validator.

#### Example:

const schema = new Schema({ postalCode: { type: String, minLength: 5 })
const Address = db.model('Address', schema)
const address = new Address({ postalCode: '9512' })
address.save(function (err) {
console.error(err) // validator error
address.postalCode = '95125';
address.save() // success
})

// custom error messages
// We can also use the special {MINLENGTH} token which will be replaced with the minimum allowed length
const minLength = [5, 'The value of path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).'];
const schema = new Schema({ postalCode: { type: String, minLength: minLength })
const Address = mongoose.model('Address', schema);
const address = new Address({ postalCode: '9512' });
address.validate(function (err) {
console.log(String(err)) // ValidationError: The value of path `postalCode` (`9512`) is shorter than the minimum length (5).
})minimum string length
Sets a maximum length validator.

#### Example:

const schema = new Schema({ postalCode: { type: String, maxlength: 9 })
const Address = db.model('Address', schema)
const address = new Address({ postalCode: '9512512345' })
address.save(function (err) {
console.error(err) // validator error
address.postalCode = '95125';
address.save() // success
})

// custom error messages
// We can also use the special {MAXLENGTH} token which will be replaced with the maximum allowed length
const maxlength = [9, 'The value of path `{PATH}` (`{VALUE}`) exceeds the maximum allowed length ({MAXLENGTH}).'];
const schema = new Schema({ postalCode: { type: String, maxlength: maxlength })
const Address = mongoose.model('Address', schema);
const address = new Address({ postalCode: '9512512345' });
address.validate(function (err) {
console.log(String(err)) // ValidationError: The value of path `postalCode` (`9512512345`) exceeds the maximum allowed length (9).
})maximum string length
Sets a regexp validator.

Any value that does not pass `regExp`.test(val) will fail validation.

#### Example:

const s = new Schema({ name: { type: String, match: /^a/ }})
const M = db.model('M', s)
const m = new M({ name: 'I am invalid' })
m.validate(function (err) {
console.error(String(err)) // "ValidationError: Path `name` is invalid (I am invalid)."
m.name = 'apples'
m.validate(function (err) {
assert.ok(err) // success
})
})

// using a custom error message
const match = [ /\.html$/, "That file doesn't end in .html ({VALUE})" ];
const s = new Schema({ file: { type: String, match: match }})
const M = db.model('M', s);
const m = new M({ file: 'invalid' });
m.validate(function (err) {
console.log(String(err)) // "ValidationError: That file doesn't end in .html (invalid)"
})

Empty strings, `undefined`, and `null` values always pass the match validator. If you require these values, enable the `required` validator also.

const s = new Schema({ name: { type: String, match: /^a/, required: true }})regular expression to test against
Check if the given value satisfies the `required` validator. The value is
considered valid if it is a string (that is, not `null` or `undefined`) and
has positive length. The `required` validator **will** fail for empty
strings.Casts to StringSchemaString
SchemaS ... tions')../options/schemaStringOptions/options/schemaStringOptions../cast/stringfunctio ... ng');\n}{\n  thi ... ng');\n}this.en ... s = [];this.enumValues = []this.enumValuesthis.regExp = null;this.regExp = nullthis.regExpSchemaT ... ring');SchemaT ... tring')SchemaS ... tring';SchemaS ... String'SchemaS ... emaNameSchemaS ... s = {};SchemaS ... ns = {}SchemaS ... otype);SchemaS ... totype)SchemaS ... String;SchemaS ... aStringSchemaS ... tructorObject. ... ons\n});Object. ... ions\n}){\n  con ... tions\n}value:  ... OptionsSchemaS ... tStringSchemaString._castSchemaS ... ast;\n};SchemaS ... cast;\n}SchemaString.castSchemaS ... n v;\n};SchemaS ... rn v;\n}SchemaS ... tCasterv != nu ... string'SchemaS ... pe.get;SchemaS ... ype.getSchemaString.getSchemaS ... pe.set;SchemaS ... ype.setSchemaString.setSchemaS ... s = [];SchemaS ... rs = []SchemaString.settersSchemaS ... length;SchemaS ... .lengthSchemaS ... equiredv => (v ... .length(v inst ... .length(v inst ... tring')v insta ... string'v instanceof StringSchemaS ... quired;SchemaS ... his;\n};SchemaS ... this;\n}SchemaS ... pe.enumthis.en ...  false;this.en ... = falseargumen ... = falseargumen ...  void 0let values;let errorMessage;if (uti ... um;\n  }arguments[0].valueserrorMe ... essage;errorMe ... messagearguments[0].messagevalues  ... ts[0]);values  ... nts[0])utils.o ... nts[0])errorMe ... g.enum;errorMe ... ng.enumMongoos ... ng.enumMongoos ... .String{\n    v ... um;\n  }values = arguments;values = argumentsconst valuethis.en ... alue));this.en ... value))this.enumValues.pushthis.cast(value)const v ... Values;vals =  ... mValuesthis.en ... );\n  };this.en ... v);\n  }{\n    r ... v);\n  }return  ... xOf(v);null == ... exOf(v)null == v~vals.indexOf(v)vals.indexOf(v)vals.indexOfthis.va ... ls\n  }){\n    v ... als\n  }message ... MessageenumValues: valsSchemaS ...  });\n};SchemaS ...   });\n}SchemaS ... wercaseargumen ... ldApply!shouldApplythis.se ... v;\n  })v => {\n ...  v;\n  }{\n    i ...  v;\n  }v = this.cast(v);v = this.cast(v)this.cast(v)return  ... Case();SchemaS ... percasev.toUpperCase()v.toUpperCaseSchemaS ... pe.trimargumen ... uldTrim!shouldTrimreturn v.trim();v.trim()v.trimSchemaS ... nlengththis.mi ... lidatorlet msg ... length;msg = m ... nlengthmessage ... nlengthMongoos ... nlength{MINLENGTH}MINLENGTHv === n ... = valuev === nullv.length >= valuetype: 'minlength'minlength: valueSchemaS ... nLengthSchemaS ... xlengththis.ma ... lidatormsg = m ... xlengthmessage ... xlengthMongoos ... xlength{MAXLENGTH}MAXLENGTHv.length <= valuetype: 'maxlength'maxlength: valueSchemaS ... xLengthSchemaS ... e.matchconst m ... .match;msg = m ... g.matchmessage ... g.matchMongoos ... g.matchconst m ... t;\n  };matchVa ... et;\n  }!regExpregExp. ... ex = 0;regExp.lastIndex = 0regExp.lastIndexconst r ...  true);ret = ( ... : true)((v !=  ... : true)(v != n ...  : true(v != n ... !== '')v != nu ...  !== ''v !== ''regExp.test(v)regExp.testthis.va ... p\n  });this.va ... xp\n  }){\n    v ... Exp\n  }type: 'regexp'regexp: regExpSchemaS ... ue);\n};SchemaS ... lue);\n}SchemaS ... uired()SchemaS ... \n  }\n};SchemaS ... ;\n  }\n}SchemaS ... pe.castlet castString;castStr ... nction;castStr ... unctioncastStr ... cast();castStr ... .cast()SchemaString.cast()castString(value)return  ... text)];[this.c ... ntext)]functio ... t);\n  }_this.c ... ontext)_this.castForQueryhandleS ... Settersreturn  ... h(val);this._c ... sh(val)this._castNullishthis.cast(val, this)$all: handleArray$option ... Setters$regex: ... l);\n  }Object. ... egExp]'Object. ... ll(val)[object RegExp]handleS ... s, val)handleS ... rs.call$not: handleSingleSchemaS ... orQuerynew Err ... ring.')'Can\'t ... tring.' with String.if (Obj ... al;\n  }Object. ... egExp')isBsonT ... egExp')BSONRegExpSchemaS ... ed);\n};SchemaS ... red);\n}SchemaS ... NSchemaSchemaS ... ng';\n};SchemaS ... ing';\n}SchemaS ... ionTypefunctio ... ing';\n}{\n  ret ... ing';\n}return 'string';module. ... aString/home/insomnia/repos/mongoose/lib/schema/subdocument.js
 * Single nested subdocument SchemaType constructor.
 *
 * @param {Schema} schema
 * @param {String} path
 * @param {Object} options
 * @inherits SchemaType
 * @api public
 
 * Special case for when users use a common location schema to represent
 * locations for use with $geoWithin.
 * https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/
 *
 * @param {Object} val
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$exists` is the function Mongoose calls to cast `$exists` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaSubdocument
 * @instance
 * @api public
 
 * Casts contents
 *
 * @param {Object} value
 * @api private
  Only pull relevant selected paths and pull out the base path// Only ... se path
 * Casts contents for query
 *
 * @param {string} [$conditional] optional query operator (like `$eq` or `$in`)
 * @param {any} value
 * @api private
  Make sure we always wrap in a CastError (gh-6803)// Make ... h-6803)
 * Async validation on this single nested doc.
 *
 * @api private
 
 * Synchronously validate this single nested doc
 *
 * @api private
 
 * Adds a discriminator to this single nested subdocument.
 *
 * #### Example:
 *
 *     const shapeSchema = Schema({ name: String }, { discriminatorKey: 'kind' });
 *     const schema = Schema({ shape: shapeSchema });
 *
 *     const singleNestedPath = parentSchema.path('shape');
 *     singleNestedPath.discriminator('Circle', Schema({ radius: Number }));
 *
 * @param {String} name
 * @param {Schema} schema fields to add to the schema for instances of this sub-class
 * @param {Object|string} [options] If string, same as `options.value`.
 * @param {String} [options.value] the string stored in the `discriminatorKey` property. If not specified, Mongoose uses the `name` parameter.
 * @param {Boolean} [options.clone=true] By default, `discriminator()` clones the given `schema`. Set to `false` to skip cloning.
 * @return {Function} the constructor Mongoose will use for creating instances of this discriminator model
 * @see discriminators https://mongoosejs.com/docs/discriminators.html
 * @api public
 
 * Sets a default option for all Subdocument instances.
 *
 * #### Example:
 *
 *     // Make all numbers have option `min` equal to 0.
 *     mongoose.Schema.Subdocument.set('required', true);
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {void}
 * @function set
 * @static
 * @api public
 
 * Attaches a getter for all Subdocument instances
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 '../error/objectExpected''../options/schemaSubdocumentOptions''../helpers/document/applyDefaults''../options''../helpers/projection/isExclusive'SubdocumentType'../types/subdocument'_embeddedSingleNested$__requiredhandle$geoWithinparentSelectedrunSettersoverrideStrict_skipApplyDiscriminatorsSingle nested subdocument SchemaType constructor.Special case for when users use a common location schema to represent
locations for use with $geoWithin.
https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/SchemaSubdocument
Casts contents for queryoptional query operator (like `$eq` or `$in`)
Async validation on this single nested doc.Synchronously validate this single nested docAdds a discriminator to this single nested subdocument.

#### Example:

const shapeSchema = Schema({ name: String }, { discriminatorKey: 'kind' });
const schema = Schema({ shape: shapeSchema });

const singleNestedPath = parentSchema.path('shape');
singleNestedPath.discriminator('Circle', Schema({ radius: Number }));Sets a default option for all Subdocument instances.

#### Example:

// Make all numbers have option `min` equal to 0.
mongoose.Schema.Subdocument.set('required', true);Attaches a getter for all Subdocument instances'../err ... pected'../error/objectExpected../options/schemaSubdocumentOptions/options/schemaSubdocumentOptions'../hel ... faults'../helpers/document/applyDefaults../options'../hel ... lusive'../helpers/projection/isExclusivelet SubdocumentType;{\n  if  ... ed');\n}SchemaS ... ons._idoptions ... Option;options ... dOptionthis.ca ... = path;this.ca ...  = paththis.ca ... asePaththis.$isSingleNestedthis.ba ... a.base;this.ba ... ma.baseSchemaT ... dded');SchemaT ... edded')SchemaS ... cument;SchemaS ... ocumentSchemaS ... ptions;functio ... dded;\n}{\n  //  ... dded;\n}../types/subdocument/types/subdocument_embedd ... ));\n  }this.$_ ... parent;this.$_ ...  parentthis.$__parentSubdocu ... e.applyparent == nullparent.$session()parent.$session_embedd ... proto);_embedd ... (proto)_embedded.prototype_embedd ... chema);_embedd ... schema)_embedd ... tSchema_embedd ... bedded;_embedd ... mbedded_embedd ... tructor_embedd ... ptions;_embedd ... options_embedd ... Options_embedd ... quired;_embedd ... equiredoptions?.required_embedd ... a.base;_embedd ... ma.base_embedded.base_embedd ... schema;_embedd ...  schema_embedded.schema_embedd ... = true;_embedd ...  = true_embedd ... eNested_embedd ... tter();_embedd ... itter()_embedded.events_embedd ... );\n  };_embedd ... s);\n  }_embedd ... .toBSON{\n    _ ... i];\n  }_embedd ... ods[i];_embedd ... hods[i]_embedd ... type[i]_embedd ... ics[i];_embedd ... tics[i]_embedded[i]_embedd ... ype[i];return _embedded;$condit ... ) };\n};$condit ... t) };\n}$condit ... oWithinfunctio ... t) };\n}{\n  ret ... t) };\n}{ $geom ... text) }$geomet ... ontext)$condit ... t$near;$condit ... st$near$condit ... s.$near$condit ... rSphere$condit ... within;$condit ... $within$condit ... rsects;$condit ... ersects$condit ... Number;$condit ... oNumber$condit ... istance$condit ... exists;$condit ... $existsSchemaS ... doc;\n};SchemaS ... bdoc;\n}{\n  if  ... bdoc;\n}val &&  ... === docval &&  ... eNestedval.$isSingleNestedval.parent === docval.parentval !=  ... y(val))(typeof ... y(val))typeof  ... ay(val)this.sc ... torKey)const d ... t(doc);default ... lt(doc)discrim ... lt(doc)discrim ... Defaultconst C ... Value);Constru ... rValue)getCons ... rValue)const p ... lected;parentS ... electeddoc &&  ... electeddoc && doc.$__path = this.pathconst s ...  null);selecte ... , null)parentS ... , null)Object. ... , null)(obj, k ... bj;\n  }{\n    i ... bj;\n  }obj[key ... d[key];obj[key ... ed[key]obj[key ... h + 1)]parentSelected[key]if (ini ... s);\n  }subdoc  ... lse });subdoc  ... alse })new Con ... alse }){ defaults: false }defaults: falsedelete  ... faults;delete  ... efaultssubdoc.$__.defaultssubdoc.$init(val);subdoc.$init(val)const e ... ected);exclude ... lected)isExclu ... lected)options ... Val });options ... rVal })Object. ... rVal }){ prior ... orVal }priorDoc: priorValnew Con ... ptions)SchemaS ... val;\n};SchemaS ...  val;\n}throw n ... ional);new Err ... tional)const C ... , val);Constru ... r, val)getCons ... r, val)val ins ... tructorif (thi ... t);\n  }this.op ... Settersthis._a ... ontext)this._applySettersconst o ... void 0;overrid ...  void 0val = n ... trict);val = n ... Strict)new Con ... Strict){\n    / ... or;\n  }!(error ... tError)(error  ... tError)error i ... stErrorSchemaS ... ns);\n};SchemaS ... ons);\n}(scope  ...  : null(scope  ... = null)options ... idatorsreturn fn(null);fn(null)value.v ... n(err))value.v ... ().thenvalue.validate()value.validate() => fn(null)err => fn(err)SchemaT ... tions);SchemaT ... ptions)return fn(error);value.v ... (err));SchemaS ... c();\n};SchemaS ... nc();\n}SchemaS ... ateSyncfunctio ... nc();\n}{\n  if  ... nc();\n}!option ... idatorsif (!va ... rn;\n  }return  ... Sync();value.validateSync()value.validateSyncSchemaS ... me];\n};SchemaS ... ame];\n}SchemaS ... minator{\n  opt ... ame];\n}this.ca ... aster);this.ca ... caster)_create ... caster)SchemaS ... ent.setSchemaS ... settersSchemaS ... ent.getSchemaS ... s };\n};SchemaS ... ns };\n}SchemaS ... .toJSONfunctio ... ns };\n}{\n  ret ... ns };\n}return  ... ions };{ path: ... tions }SchemaS ... ype;\n};SchemaS ... type;\n}SchemaS ... e.cloneconst s ...  }\n  );schemat ... e }\n  )new thi ... e }\n  ){ ...th ...  true }...this.options_skipAp ... s: true_skipAp ... inatorsSchemaS ...   };\n};SchemaS ... \n  };\n}return  ... d)\n  };{\n    . ... ed)\n  }/home/insomnia/repos/mongoose/lib/schema/symbols.js'mongoose:schema_mixed''mongoose:built-in-middleware'Symbol. ... mixed')'mongoo ... _mixed'mongoose:schema_mixedexports ... ware');exports ... eware')exports ... dlewareSymbol. ... eware')'mongoo ... leware'mongoose:built-in-middleware/home/insomnia/repos/mongoose/lib/schema/union.js Loop through each schema type in the union. If one of the schematypes returns a value that is `=== val`, then// Loop ... `, then use `val`. Otherwise, if one of the schematypes casted successfully, use the first successfully casted value.// use  ...  value. Finally, if none of the schematypes casted successfully, throw the error from the last schema type in the union.// Fina ...  union. The `=== val` check is a workaround to ensure that the original value is returned if it matches one of the schema types,// The  ...  types, avoiding cases like where numbers are casted to strings or dates even if the schema type is a number.// avoi ... number. Setters also need to be aware of casting - we need to apply the setters of the entry in the union we choose.// Sett ... choose.'../options/schemaUnionOptions'firstValueSymbol'firstValue''Union''Union schema type requires an array of types'schemaTypesfirstValuecastedValSchemaU ... tions')../options/schemaUnionOptions/options/schemaUnionOptionsconst f ... alue');firstVa ... Value')Symbol('firstValue')class U ... ;\n  }\n}(key, o ... ));\n  }{\n    s ... ));\n  }super(k ... nion');super(k ... Union')!option ... ons.of)!Array. ... ons.of)Array.i ... ons.of)options.ofoptions ... h === 0options.of.lengththrow n ... ypes');new Err ... types')'Union  ...  types'Union schema type requires an array of typesthis.sc ... ions));this.sc ... tions))this.schemaTypesoptions.of.mapobj =>  ... ptions)options ... tAsTypeoptions.parentSchemacast(va ... or;\n  }(val, d ... or;\n  }{\n    l ... or;\n  }let fir ... Symbol;firstVa ... eSymbollet lastError;i < thi ... .lengththis.sc ... .lengththis.sc ... i].castthis.schemaTypes[i]casted === valreturn casted;firstValue = casted;firstValue = castedlastError = error;lastError = errorreturn firstValue;throw lastError;applySe ... or;\n  }let cas ... tions);castedV ... ptions)this.sc ... SetterscastedVal == nullcastedV ... edVal);castedV ... tedVal)this.sc ... tedVal)this.sc ... NullishcastedV ... tions);castedVal === valreturn castedVal;firstVa ... tedVal;firstVa ... stedValschemat ... one());schemat ... lone())schemat ... maTypesthis.sc ... lone())this.schemaTypes.mapschemaT ... clone()schemaType.clone()schemaType.cloneUnion.s ... Union';Union.s ... 'Union'Union.schemaNameUnion.d ... s = {};Union.d ... ns = {}Union.defaultOptionsUnion.p ... ptions;Union.p ... OptionsUnion.p ... tructorUnion.prototypemodule. ...  Union;module. ... = Union/home/insomnia/repos/mongoose/lib/schema/uuid.js
 * Convert binary to a uuid string
 * @param {Buffer|Binary|String} uuidBin The value to process
 * @returns {String} The completed uuid-string
 * @api private
  i(hasezoey) dont quite know why, but "uuidBin" may sometimes also be the already processed string// i(ha ...  string
 * UUIDv1 SchemaType constructor.
 *
 * @param {String} key
 * @param {Object} options
 * @inherits SchemaType
 * @api public
  For populated// For populated Cloned buffers look like `{ type: 'Buffer', data: [5, 224, ...] }`// Clon ... ...] }`
 * Attaches a getter for all UUID instances.
 *
 * #### Example:
 *
 *     // Note that `v` is a string by default
 *     mongoose.Schema.UUID.get(v => v.toUpperCase());
 *
 *     const Model = mongoose.model('Test', new Schema({ test: 'UUID' }));
 *     new Model({ test: uuid.v4() }).test; // UUID with all uppercase
 *
 * @param {Function} getter
 * @return {this}
 * @function get
 * @static
 * @api public
 
 * Sets a default option for all UUID instances.
 *
 * #### Example:
 *
 *     // Make all UUIDs have `required` of true by default.
 *     mongoose.Schema.UUID.set('required', true);
 *
 *     const User = mongoose.model('User', new Schema({ test: mongoose.UUID }));
 *     new User({ }).validateSync().errors.test.message; // Path `test` is required.
 *
 * @param {String} option The option you'd like to set the value for
 * @param {Any} value value for option
 * @return {undefined}
 * @function set
 * @static
 * @api public
 
 * Get/set the function used to cast arbitrary values to UUIDs.
 *
 * #### Example:
 *
 *     // Make Mongoose refuse to cast UUIDs with 0 length
 *     const original = mongoose.Schema.Types.UUID.cast();
 *     mongoose.UUID.cast(v => {
 *       assert.ok(typeof v === "string" && v.length > 0);
 *       return original(v);
 *     });
 *
 *     // Or disable casting entirely
 *     mongoose.UUID.cast(false);
 *
 * @param {Function} [caster]
 * @return {Function}
 * @function get
 * @static
 * @api public
 
 * Casts to UUID
 *
 * @param {Object} value
 * @param {Object} doc
 * @param {Boolean} init whether this is an initialization cast
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$exists` is the function Mongoose calls to cast `$exists` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaUUID
 * @instance
 * @api public
 '../cast/uuid'binaryToStringuuidBinSchemaUUID'UUID'castFn' with UUID.'Convert binary to a uuid string(Buffer|Binary|String)The completed uuid-string
UUIDv1 SchemaType constructor.Attaches a getter for all UUID instances.

#### Example:

// Note that `v` is a string by default
mongoose.Schema.UUID.get(v => v.toUpperCase());

const Model = mongoose.model('Test', new Schema({ test: 'UUID' }));
new Model({ test: uuid.v4() }).test; // UUID with all uppercaseSets a default option for all UUID instances.

#### Example:

// Make all UUIDs have `required` of true by default.
mongoose.Schema.UUID.set('required', true);

const User = mongoose.model('User', new Schema({ test: mongoose.UUID }));
new User({ }).validateSync().errors.test.message; // Path `test` is required.Get/set the function used to cast arbitrary values to UUIDs.

#### Example:

// Make Mongoose refuse to cast UUIDs with 0 length
const original = mongoose.Schema.Types.UUID.cast();
mongoose.UUID.cast(v => {
assert.ok(typeof v === "string" && v.length > 0);
return original(v);
});

// Or disable casting entirely
mongoose.UUID.cast(false);Casts to UUIDSchemaUUID
const c ... uuid');castUUI ... /uuid')require ... /uuid')../cast/uuid/cast/uuidconst U ... FORMAT;UUID_FO ... _FORMATcastUUID.UUID_FORMATfunctio ... dBin;\n}{\n  //  ... dBin;\n}let hex;if (typ ... tr;\n  }typeof uuidBinuuidBin != null{\n    h ... tr;\n  }hex = u ... 'hex');hex = u ... ('hex')uuidBin ... ('hex')uuidBin.toStringconst u ...  + 12);uuidStr ... 0 + 12)hex.sub ... 0 + 12)hex.sub ... ) + '-'hex.sub ... 16 + 4)hex.sub ... 12 + 4)hex.sub ...  8 + 4)hex.substring(0, 8)hex.substring8 + 412 + 416 + 420 + 12return uuidStr;return uuidBin;{\n  Sch ...   });\n}SchemaT ... UUID');SchemaT ... 'UUID')this.ge ... ;\n  });this.ge ... e;\n  })this.getters.pushthis.gettersvalue.$__ != nullbinaryT ... (value)return  ... uffer);binaryT ... buffer)value.bufferutils.i ... e.data)utils.i ... Buffer'return  ... data));binaryT ... .data))Buffer. ... e.data)SchemaU ... 'UUID';SchemaU ...  'UUID'SchemaU ... emaNameSchemaU ... s = {};SchemaU ... ns = {}SchemaU ... OptionsSchemaU ... otype);SchemaU ... totype)SchemaUUID.prototypeSchemaU ... maUUID;SchemaU ... emaUUIDSchemaU ... tructorSchemaU ... stUUID;SchemaU ... astUUIDSchemaUUID._castSchemaU ... pe.get;SchemaU ... ype.getSchemaUUID.getSchemaU ... pe.set;SchemaU ... ype.setSchemaUUID.setSchemaU ... s = [];SchemaU ... rs = []SchemaUUID.settersSchemaU ... ast;\n};SchemaU ... cast;\n}SchemaUUID.castSchemaU ... = null;SchemaU ... != nullSchemaU ... equiredSchemaU ... quired;SchemaU ... ue);\n};SchemaU ... lue);\n}value = ... value);value ! ... (value)SchemaU ... \n  }\n};SchemaU ... ;\n  }\n}SchemaU ... pe.castutils.i ... , init)let castFn;castFn  ... nction;castFn  ... unctioncastFn  ... cast();castFn  ... .cast()SchemaUUID.cast()castFn(value)(m) =>  ... m);\n  }return this.cast(m);this.cast(m)$in: handleArray$ne: handleSingle$nin: handleArraySchemaU ... orQueryif (!ha ... UID.');throw n ... UID.');new Err ... UUID.')'Can\'t ...  UUID.' with UUID.SchemaU ... ed);\n};SchemaU ... red);\n}SchemaU ... NSchemaSchemaU ... ta';\n};SchemaU ... ata';\n}SchemaU ... ionTypemodule. ... maUUID;module. ... emaUUID/home/insomnia/repos/mongoose/lib/schema.js
 * Schema constructor.
 *
 * #### Example:
 *
 *     const child = new Schema({ name: String });
 *     const schema = new Schema({ name: String, age: Number, children: [child] });
 *     const Tree = mongoose.model('Tree', schema);
 *
 *     // setting schema options
 *     new Schema({ name: String }, { id: false, autoIndex: false })
 *
 * #### Options:
 *
 * - [autoIndex](https://mongoosejs.com/docs/guide.html#autoIndex): bool - defaults to null (which means use the connection's autoIndex option)
 * - [autoCreate](https://mongoosejs.com/docs/guide.html#autoCreate): bool - defaults to null (which means use the connection's autoCreate option)
 * - [bufferCommands](https://mongoosejs.com/docs/guide.html#bufferCommands): bool - defaults to true
 * - [bufferTimeoutMS](https://mongoosejs.com/docs/guide.html#bufferTimeoutMS): number - defaults to 10000 (10 seconds). If `bufferCommands` is enabled, the amount of time Mongoose will wait for connectivity to be restablished before erroring out.
 * - [capped](https://mongoosejs.com/docs/guide.html#capped): bool | number | object - defaults to false
 * - [collection](https://mongoosejs.com/docs/guide.html#collection): string - no default
 * - [discriminatorKey](https://mongoosejs.com/docs/guide.html#discriminatorKey): string - defaults to `__t`
 * - [id](https://mongoosejs.com/docs/guide.html#id): bool - defaults to true
 * - [_id](https://mongoosejs.com/docs/guide.html#_id): bool - defaults to true
 * - [minimize](https://mongoosejs.com/docs/guide.html#minimize): bool - controls [document#toObject](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()) behavior when called manually - defaults to true
 * - [read](https://mongoosejs.com/docs/guide.html#read): string
 * - [readConcern](https://mongoosejs.com/docs/guide.html#readConcern): object - defaults to null, use to set a default [read concern](https://www.mongodb.com/docs/manual/reference/read-concern/) for all queries.
 * - [writeConcern](https://mongoosejs.com/docs/guide.html#writeConcern): object - defaults to null, use to override [the MongoDB server's default write concern settings](https://www.mongodb.com/docs/manual/reference/write-concern/)
 * - [shardKey](https://mongoosejs.com/docs/guide.html#shardKey): object - defaults to `null`
 * - [strict](https://mongoosejs.com/docs/guide.html#strict): bool - defaults to true
 * - [strictQuery](https://mongoosejs.com/docs/guide.html#strictQuery): bool - defaults to false
 * - [toJSON](https://mongoosejs.com/docs/guide.html#toJSON) - object - no default
 * - [toObject](https://mongoosejs.com/docs/guide.html#toObject) - object - no default
 * - [typeKey](https://mongoosejs.com/docs/guide.html#typeKey) - string - defaults to 'type'
 * - [validateBeforeSave](https://mongoosejs.com/docs/guide.html#validateBeforeSave) - bool - defaults to `true`
 * - [validateModifiedOnly](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate()) - bool - defaults to `false`
 * - [versionKey](https://mongoosejs.com/docs/guide.html#versionKey): string or object - defaults to "__v"
 * - [optimisticConcurrency](https://mongoosejs.com/docs/guide.html#optimisticConcurrency): bool or string[] or { exclude: string[] } - defaults to false. Set to true to enable [optimistic concurrency](https://thecodebarbarian.com/whats-new-in-mongoose-5-10-optimistic-concurrency.html). Set to string array to enable optimistic concurrency for only certain fields, or `{ exclude: string[] }` to define a list of fields to ignore for optimistic concurrency.
 * - [collation](https://mongoosejs.com/docs/guide.html#collation): object - defaults to null (which means use no collation)
 * - [timeseries](https://mongoosejs.com/docs/guide.html#timeseries): object - defaults to null (which means this schema's collection won't be a timeseries collection)
 * - [selectPopulatedPaths](https://mongoosejs.com/docs/guide.html#selectPopulatedPaths): boolean - defaults to `true`
 * - [skipVersioning](https://mongoosejs.com/docs/guide.html#skipVersioning): object - paths to exclude from versioning
 * - [timestamps](https://mongoosejs.com/docs/guide.html#timestamps): object or boolean - defaults to `false`. If true, Mongoose adds `createdAt` and `updatedAt` properties to your schema and manages those properties for you.
 * - [pluginTags](https://mongoosejs.com/docs/guide.html#pluginTags): array of strings - defaults to `undefined`. If set and plugin called with `tags` option, will only apply that plugin to schemas with a matching tag.
 * - [virtuals](https://mongoosejs.com/docs/tutorials/virtuals.html#virtuals-via-schema-options): object - virtuals to define, alias for [`.virtual`](https://mongoosejs.com/docs/api/schema.html#Schema.prototype.virtual())
 * - [collectionOptions]: object with options passed to [`createCollection()`](https://www.mongodb.com/docs/manual/reference/method/db.createCollection/) when calling `Model.createCollection()` or `autoCreate` set to true.
 * - [encryptionType]: the encryption type for the schema.  Valid options are `csfle` or `queryableEncryption`.  See https://mongoosejs.com/docs/field-level-encryption.
 *
 * #### Options for Nested Schemas:
 *
 * - `excludeIndexes`: bool - defaults to `false`. If `true`, skip building indexes on this schema's paths.
 *
 * #### Note:
 *
 * _When nesting schemas, (`children` in the example above), always declare the child schema first before passing it into its parent._
 *
 * @param {Object|Schema|Array} [definition] Can be one of: object describing schema paths, or schema to copy, or array of objects and schemas
 * @param {Object} [options]
 * @inherits NodeJS EventEmitter https://nodejs.org/api/events.html#class-eventemitter
 * @event `init`: Emitted after the schema is compiled into a `Model`.
 * @api public
  For internal debugging. Do not use this to try to save a schema in MDB.// For  ... in MDB. build paths// build paths build virtual paths// buil ... l paths check if _id's value is a subdocument (gh-2276)// chec ... h-2276) ensure the documents get an auto _id unless disabled
 * Create virtual properties with alias field
 * @api private
 !
 * Inherit from EventEmitter.
 /*!\n *  ... er.\n */
 * Array of child schemas (from document arrays and single nested subdocs)
 * and their corresponding compiled models. Each element of the array is
 * an object with 2 properties: `schema` and `model`.
 *
 * This property is typically only useful for plugin authors and advanced users.
 * You do not need to interact with this property at all to use mongoose.
 *
 * @api public
 * @property childSchemas
 * @memberOf Schema
 * @instance
 
 * Object containing all virtuals defined on this schema.
 * The objects' keys are the virtual paths and values are instances of `VirtualType`.
 *
 * This property is typically only useful for plugin authors and advanced users.
 * You do not need to interact with this property at all to use mongoose.
 *
 * #### Example:
 *
 *     const schema = new Schema({});
 *     schema.virtual('answer').get(() => 42);
 *
 *     console.log(schema.virtuals); // { answer: VirtualType { path: 'answer', ... } }
 *     console.log(schema.virtuals['answer'].getters[0].call()); // 42
 *
 * @api public
 * @property virtuals
 * @memberOf Schema
 * @instance
 
 * The original object passed to the schema constructor
 *
 * #### Example:
 *
 *     const schema = new Schema({ a: String }).add({ b: String });
 *     schema.obj; // { a: String }
 *
 * @api public
 * @property obj
 * @memberOf Schema
 * @instance
 
 * The paths defined on this schema. The keys are the top-level paths
 * in this schema, and the values are instances of the SchemaType class.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String }, { _id: false });
 *     schema.paths; // { name: SchemaString { ... } }
 *
 *     schema.add({ age: Number });
 *     schema.paths; // { name: SchemaString { ... }, age: SchemaNumber { ... } }
 *
 * @api public
 * @property paths
 * @memberOf Schema
 * @instance
 
 * Schema as a tree
 *
 * #### Example:
 *
 *     {
 *         '_id'     : ObjectId
 *       , 'nested'  : {
 *             'key' : String
 *         }
 *     }
 *
 * @api private
 * @property tree
 * @memberOf Schema
 * @instance
 
 * Returns a deep copy of the schema
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String });
 *     const clone = schema.clone();
 *     clone === schema; // false
 *     clone.path('name'); // SchemaString { ... }
 *
 * @return {Schema} the cloned schema
 * @api public
 * @memberOf Schema
 * @instance
  Bubble up `init` for backwards compat// Bubb ...  compat
 * Returns a new schema that has the picked `paths` from this schema.
 *
 * This method is analagous to [Lodash's `pick()` function](https://lodash.com/docs/4.17.15#pick) for Mongoose schemas.
 *
 * #### Example:
 *
 *     const schema = Schema({ name: String, age: Number });
 *     // Creates a new schema with the same `name` path as `schema`,
 *     // but no `age` path.
 *     const newSchema = schema.pick(['name']);
 *
 *     newSchema.path('name'); // SchemaString { ... }
 *     newSchema.path('age'); // undefined
 *
 * @param {String[]} paths List of Paths to pick for the new Schema
 * @param {Object} [options] Options to pass to the new Schema Constructor (same as `new Schema(.., Options)`). Defaults to `this.options` if not set.
 * @return {Schema}
 * @api public
 
 * Returns a new schema that has the `paths` from the original schema, minus the omitted ones.
 *
 * This method is analagous to [Lodash's `omit()` function](https://lodash.com/docs/#omit) for Mongoose schemas.
 *
 * #### Example:
 *
 *     const schema = Schema({ name: String, age: Number });
 *     // Creates a new schema omitting the `age` path
 *     const newSchema = schema.omit(['age']);
 *
 *     newSchema.path('name'); // SchemaString { ... }
 *     newSchema.path('age'); // undefined
 *
 * @param {String[]} paths List of Paths to omit for the new Schema
 * @param {Object} [options] Options to pass to the new Schema Constructor (same as `new Schema(.., Options)`). Defaults to `this.options` if not set.
 * @return {Schema}
 * @api public
 
 * Returns default options for this schema, merged with `options`.
 *
 * @param {Object} [options] Options to overwrite the default options
 * @return {Object} The merged options of `options` and the default options
 * @api private
  { size, max, autoIndexId }// { si ... dexId } the following are only applied at construction time// the  ... on time
 * Inherit a Schema by applying a discriminator on an existing Schema.
 *
 *
 * #### Example:
 *
 *     const eventSchema = new mongoose.Schema({ timestamp: Date }, { discriminatorKey: 'kind' });
 *
 *     const clickedEventSchema = new mongoose.Schema({ element: String }, { discriminatorKey: 'kind' });
 *     const ClickedModel = eventSchema.discriminator('clicked', clickedEventSchema);
 *
 *     const Event = mongoose.model('Event', eventSchema);
 *
 *     Event.discriminators['clicked']; // Model { clicked }
 *
 *     const doc = await Event.create({ kind: 'clicked', element: '#hero' });
 *     doc.element; // '#hero'
 *     doc instanceof ClickedModel; // true
 *
 * @param {String} name the name of the discriminator
 * @param {Schema} schema the discriminated Schema
 * @param {Object} [options] discriminator options
 * @param {String} [options.value] the string stored in the `discriminatorKey` property. If not specified, Mongoose uses the `name` parameter.
 * @param {Boolean} [options.clone=true] By default, `discriminator()` clones the given `schema`. Set to `false` to skip cloning.
 * @param {Boolean} [options.overwriteModels=false] by default, Mongoose does not allow you to define a discriminator with the same name as another discriminator. Set this to allow overwriting discriminators with the same name.
 * @param {Boolean} [options.mergeHooks=true] By default, Mongoose merges the base schema's hooks with the discriminator schema's hooks. Set this option to `false` to make Mongoose use the discriminator schema's hooks instead.
 * @param {Boolean} [options.mergePlugins=true] By default, Mongoose merges the base schema's plugins with the discriminator schema's plugins. Set this option to `false` to make Mongoose use the discriminator schema's plugins instead.
 * @return {Schema} the Schema instance
 * @api public
 !
 * Get this schema's default toObject/toJSON options, including Mongoose global
 * options.
 /*!\n *  ... ns.\n */ merge base default options with Schema's set default options if available.// merg ... ilable. `clone` is necessary here because `utils.options` directly modifies the second input.// `clo ...  input.
 * Sets the encryption type of the schema, if a value is provided, otherwise
 * returns the encryption type.
 *
 * @param {'csfle' | 'queryableEncryption' | null | undefined} encryptionType plain object with paths to add, or another schema
 
 * Adds key path / schema type pairs to this schema.
 *
 * #### Example:
 *
 *     const ToySchema = new Schema();
 *     ToySchema.add({ name: 'string', color: 'string', price: 'number' });
 *
 *     const TurboManSchema = new Schema();
 *     // You can also `add()` another schema and copy over all paths, virtuals,
 *     // getters, setters, indexes, methods, and statics.
 *     TurboManSchema.add(ToySchema).add({ year: Number });
 *
 * @param {Object|Schema} obj plain object with paths to add, or another schema
 * @param {String} [prefix] path to prefix the newly added paths with
 * @return {Schema} the Schema instance
 * @api public
  Special case: setting top-level `_id` to false should convert to disabling// Spec ... sabling the `_id` option. This behavior never worked before 5.4.11 but numerous// the  ... umerous codebases use it (see gh-7516, gh-7512).// code ... -7512). Retain `_id: false` but don't set it as a path, re: gh-8274.// Reta ... h-8274. Deprecate setting schema paths to primitive types (gh-7558)// Depr ... h-7558) Handle the case in which the type is specified as a string (eg. 'date', 'oid', ...)// Hand ... ', ...) Special-case: Non-options definitely a path so leaf at this node// Spec ... is node Examples: Schema instances, SchemaType instances// Exam ... stances Special-case: {} always interpreted as Mixed path so leaf at this node mixed type// mixed type Special-case: POJO with no bona-fide type key - interpret as tree of deep paths so recurse// Spec ... recurse nested object `{ last: { name: String } }`. Avoid functions with `.type` re: #10807 because// nest ... because NestJS sometimes adds `Date.type`.// Nest ... .type`. There IS a bona-fide type key that may also be a POJO// Ther ...  a POJO If a POJO is the value of a type key, make it a subdocument// If a ... ocument propagate 'strict' option to child schema// prop ...  schema Either the type is non-POJO or we interpret it as Mixed anyway// Eith ...  anyway schema.add({ field: <instance of encrypted schema> })// sche ... ema> }) schema.add({ field: { type: <schema type>, encrypt: { ... }}})// sche ... .. }}}) if the field was already encrypted and we re-configure it to be unencrypted, remove// if t ...  remove the encrypted field configuration// the  ... uration
 * @param {string} path
 * @param {object} fieldConfig
 *
 * @api private
 
 * @param {string} path
 *
 * @api private
 
 * @api private
 *
 * @returns {boolean}
 
 * @param {string} path
 * @returns {boolean}
 *
 * @api private
 
 * Builds an encryptedFieldsMap for the schema.
 *
 * @api private
  { path, bsonType, keyId, queries? }// { pa ... ries? }
 * Builds a schemaMap for the schema, if the schema is configured for client-side field level encryption.
 *
 * @api private
 
   * `schemaMap`s are JSON schemas, which use the following structure to represent objects:
   *    { field: { bsonType: 'object', properties: { ... } } }
   *
   * for example, a schema that looks like this `{ a: { b: int32 } }` would be encoded as
   * `{ a: { bsonType: 'object', properties: { b: < encryption configuration > } } }`
   *
   * This function takes an array of path segments, an output object (that gets mutated) and
   * a value to be associated with the full path, and constructs a valid CSFLE JSON schema path for
   * the object.  This works for deeply nested properties as well.
   *
   * @param {string[]} path array of path components
   * @param {object} object the object in which to build a JSON schema of `path`'s properties
   * @param {object} value the value to associate with the path in object
   /**\n    ... t\n   */
 * Add an alias for `path`. This means getting or setting the `alias`
 * is equivalent to getting or setting the `path`.
 *
 * #### Example:
 *
 *     const toySchema = new Schema({ n: String });
 *
 *     // Make 'name' an alias for 'n'
 *     toySchema.alias('n', 'name');
 *
 *     const Toy = mongoose.model('Toy', toySchema);
 *     const turboMan = new Toy({ n: 'Turbo Man' });
 *
 *     turboMan.name; // 'Turbo Man'
 *     turboMan.n; // 'Turbo Man'
 *
 *     turboMan.name = 'Turbo Man Action Figure';
 *     turboMan.n; // 'Turbo Man Action Figure'
 *
 *     await turboMan.save(); // Saves { _id: ..., n: 'Turbo Man Action Figure' }
 *
 *
 * @param {String} path real path to alias
 * @param {String|String[]} alias the path(s) to use as an alias for `path`
 * @return {Schema} the Schema instance
 * @api public
 
 * Remove an index by name or index specification.
 *
 * removeIndex only removes indexes from your schema object. Does **not** affect the indexes
 * in MongoDB.
 *
 * #### Example:
 *
 *     const ToySchema = new Schema({ name: String, color: String, price: Number });
 *
 *     // Add a new index on { name, color }
 *     ToySchema.index({ name: 1, color: 1 });
 *
 *     // Remove index on { name, color }
 *     // Keep in mind that order matters! `removeIndex({ color: 1, name: 1 })` won't remove the index
 *     ToySchema.removeIndex({ name: 1, color: 1 });
 *
 *     // Add an index with a custom name
 *     ToySchema.index({ color: 1 }, { name: 'my custom index name' });
 *     // Remove index by name
 *     ToySchema.removeIndex('my custom index name');
 *
 * @param {Object|string} index name or index specification
 * @return {Schema} the Schema instance
 * @api public
 
 * Remove all indexes from this schema.
 *
 * clearIndexes only removes indexes from your schema object. Does **not** affect the indexes
 * in MongoDB.
 *
 * #### Example:
 *
 *     const ToySchema = new Schema({ name: String, color: String, price: Number });
 *     ToySchema.index({ name: 1 });
 *     ToySchema.index({ color: 1 });
 *
 *     // Remove all indexes on this schema
 *     ToySchema.clearIndexes();
 *
 *     ToySchema.indexes(); // []
 *
 * @return {Schema} the Schema instance
 * @api public
 
 * Add an [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) that Mongoose will create using `Model.createSearchIndex()`.
 * This function only works when connected to MongoDB Atlas.
 *
 * #### Example:
 *
 *     const ToySchema = new Schema({ name: String, color: String, price: Number });
 *     ToySchema.searchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });
 *
 * @param {Object} description index options, including `name` and `definition`
 * @param {String} description.name
 * @param {Object} description.definition
 * @return {Schema} the Schema instance
 * @api public
 
 * Reserved document keys.
 *
 * Keys in this object are names that are warned in schema declarations
 * because they have the potential to break Mongoose/ Mongoose plugins functionality. If you create a schema
 * using `new Schema()` with one of these property names, Mongoose will log a warning.
 *
 * - _posts
 * - _pres
 * - collection
  * - emit
 * - errors
 * - get
 * - init
 * - isModified
 * - isNew
 * - listeners
 * - modelName
 * - on
 * - once
 * - populated
 * - prototype
 * - remove
 * - removeListener
 * - save
 * - schema
 * - toObject
 * - validate
 *
 * _NOTE:_ Use of these terms as method names is permitted, but play at your own risk, as they may be existing mongoose document methods you are stomping on.
 *
 *      const schema = new Schema(..);
 *      schema.methods.init = function () {} // potentially breaking
 *
 * @property reserved
 * @memberOf Schema
 * @static
  Core object// Core object EventEmitter// EventEmitter document properties and functions// docu ... nctions
 * Gets/sets schema paths.
 *
 * Sets a path (if arity 2)
 * Gets a path (if arity 1)
 *
 * #### Example:
 *
 *     schema.path('name') // returns a SchemaType
 *     schema.path('name', Number) // changes the schemaType of `name` to Number
 *
 * @param {String} path The name of the Path to get / set
 * @param {Object} [obj] The Type to set the path to, if provided the path will be SET, otherwise the path will be GET
 * @api public
  Convert to '.$' to check subpaths re: gh-6405// Conv ... gh-6405 Look for maps// Look for maps Look if a parent of this path is mixed// Look ... s mixed subpaths?// subpaths? some path names conflict with document methods// some ... methods update the tree// update the tree If overwriting an existing path, make sure to clear the childSchemas// If o ... Schemas Maps can have arbitrary keys, so `$*` is internal shorthand for "any key"// Maps ... ny key" The '$' is to imply this path should never be stored in MongoDB so we// The  ... B so we can easily build a regexp out of this path, and '*' to imply "any key."// can  ... y key." Skip arrays of document arrays// Skip ...  arrays Handle map of map of primitives// Hand ... mitives map of map of subdocs (recursive)// map  ... ursive)
 * The Mongoose instance this schema is associated with
 *
 * @property base
 * @api private
 
 * Converts type arguments into Mongoose Types.
 *
 * @param {String} path
 * @param {Object} obj constructor
 * @param {Object} options schema options
 * @api private
  If this schema has an associated Mongoose object, use the Mongoose object's// If t ... bject's copy of SchemaTypes re: gh-7158 gh-6933// copy ... gh-6933 Get the type making sure to allow keys named "type"// Get  ...  "type" and default to mixed if not specified.// and  ... cified. { type: { type: String, default: 'freshcut' } }// { ty ... ut' } } if it was specified through { type } look for `cast`// if i ...  `cast` new Schema({ path: [new Schema({ ... })] })// new  ...  })] }) Handle both `new Schema({ arr: [{ subpath: String }] })` and `new Schema({ arr: [{ type: { subpath: string } }] })`// Hand ...  }] })` The `minimize` and `typeKey` options propagate to child schemas// The  ... schemas declared inline, like `{ arr: [{ val: { $type: String } }] }`.// decl ...  }] }`. See gh-3560// See gh-3560 Special case: empty object becomes mixed// Spec ... s mixed For Jest 26+, see #10296// For  ...  #10296 Special case re: gh-7049 because the bson `ObjectID` class' capitalization// Spec ... ization doesn't line up with Mongoose's.// does ... oose's.
 * Iterates the schemas paths similar to Array#forEach.
 *
 * The callback is passed the pathname and the schemaType instance.
 *
 * #### Example:
 *
 *     const userSchema = new Schema({ name: String, registeredAt: Date });
 *     userSchema.eachPath((pathname, schematype) => {
 *       // Prints twice:
 *       // name SchemaString { ... }
 *       // registeredAt SchemaDate { ... }
 *       console.log(pathname, schematype);
 *     });
 *
 * @param {Function} fn callback function
 * @return {Schema} this
 * @api public
 
 * Returns an Array of path strings that are required by this schema.
 *
 * #### Example:
 *
 *     const s = new Schema({
 *       name: { type: String, required: true },
 *       age: { type: String, required: true },
 *       notes: String
 *     });
 *     s.requiredPaths(); // [ 'age', 'name' ]
 *
 * @api public
 * @param {Boolean} invalidate Refresh the cache
 * @return {Array}
 
 * Returns indexes from fields and schema-level indexes (cached).
 *
 * @api private
 * @return {Array}
 
 * Returns the pathType of `path` for this schema.
 *
 * Given a path, returns whether it is a real, virtual, nested, or ad-hoc/undefined path.
 *
 * #### Example:
 *
 *     const s = new Schema({ name: String, nested: { foo: String } });
 *     s.virtual('foo').get(() => 42);
 *     s.pathType('name'); // "real"
 *     s.pathType('nested'); // "nested"
 *     s.pathType('foo'); // "virtual"
 *     s.pathType('fail'); // "adhocOrUndefined"
 *
 * @param {String} path
 * @return {String}
 * @api public
 
 * Returns true iff this path is a child of a mixed schema.
 *
 * @param {String} path
 * @return {Boolean}
 * @api private
 
 * Setup updatedAt and createdAt timestamps to documents if enabled
 *
 * @param {Boolean|Object} timestamps timestamps options
 * @api private
 
 * ignore. Deprecated re: #6405
 * @param {Any} self
 * @param {String} path
 * @api private
  StringSchema, NumberSchema, etc// Stri ... ma, etc ignore if its just a position segment: path.0.subpath// igno ... subpath Nested array// Nested array
 * Adds a method call to the queue.
 *
 * #### Example:
 *
 *     schema.methods.print = function() { console.log(this); };
 *     schema.queue('print', []); // Print the doc every one is instantiated
 *
 *     const Model = mongoose.model('Test', schema);
 *     new Model({ name: 'test' }); // Prints '{"_id": ..., "name": "test" }'
 *
 * @param {String} name name of the document method to call later
 * @param {Array} args arguments to pass to the method
 * @api public
 
 * Defines a pre hook for the model.
 *
 * #### Example:
 *
 *     const toySchema = new Schema({ name: String, created: Date });
 *
 *     toySchema.pre('save', function(next) {
 *       if (!this.created) this.created = new Date;
 *       next();
 *     });
 *
 *     toySchema.pre('validate', function(next) {
 *       if (this.name !== 'Woody') this.name = 'Woody';
 *       next();
 *     });
 *
 *     // Equivalent to calling `pre()` on `find`, `findOne`, `findOneAndUpdate`.
 *     toySchema.pre(/^find/, function(next) {
 *       console.log(this.getFilter());
 *     });
 *
 *     // Equivalent to calling `pre()` on `updateOne`, `findOneAndUpdate`.
 *     toySchema.pre(['updateOne', 'findOneAndUpdate'], function(next) {
 *       console.log(this.getFilter());
 *     });
 *
 *     toySchema.pre('deleteOne', function() {
 *       // Runs when you call `Toy.deleteOne()`
 *     });
 *
 *     toySchema.pre('deleteOne', { document: true }, function() {
 *       // Runs when you call `doc.deleteOne()`
 *     });
 *
 * @param {String|RegExp|String[]} methodName The method name or regular expression to match method name
 * @param {Object} [options]
 * @param {Boolean} [options.document] If `name` is a hook for both document and query middleware, set to `true` to run on document middleware. For example, set `options.document` to `true` to apply this hook to `Document#deleteOne()` rather than `Query#deleteOne()`.
 * @param {Boolean} [options.query] If `name` is a hook for both document and query middleware, set to `true` to run on query middleware.
 * @param {Function} callback
 * @api public
 
 * Defines a post hook for the document
 *
 *     const schema = new Schema(..);
 *     schema.post('save', function (doc) {
 *       console.log('this fired after a document was saved');
 *     });
 *
 *     schema.post('find', function(docs) {
 *       console.log('this fired after you ran a find query');
 *     });
 *
 *     schema.post(/Many$/, function(res) {
 *       console.log('this fired after you ran `updateMany()` or `deleteMany()`');
 *     });
 *
 *     const Model = mongoose.model('Model', schema);
 *
 *     const m = new Model(..);
 *     await m.save();
 *     console.log('this fires after the `post` hook');
 *
 *     await m.find();
 *     console.log('this fires after the post find hook');
 *
 * @param {String|RegExp|String[]} methodName The method name or regular expression to match method name
 * @param {Object} [options]
 * @param {Boolean} [options.document] If `name` is a hook for both document and query middleware, set to `true` to run on document middleware.
 * @param {Boolean} [options.query] If `name` is a hook for both document and query middleware, set to `true` to run on query middleware.
 * @param {Function} fn callback
 * @see middleware https://mongoosejs.com/docs/middleware.html
 * @see kareem https://npmjs.org/package/kareem
 * @api public
 
 * Registers a plugin for this schema.
 *
 * #### Example:
 *
 *     const s = new Schema({ name: String });
 *     s.plugin(schema => console.log(schema.path('name').path));
 *     mongoose.model('Test', s); // Prints 'name'
 *
 * Or with Options:
 *
 *     const s = new Schema({ name: String });
 *     s.plugin((schema, opts) => console.log(opts.text, schema.path('name').path), { text: "Schema Path Name:" });
 *     mongoose.model('Test', s); // Prints 'Schema Path Name: name'
 *
 * @param {Function} plugin The Plugin's callback
 * @param {Object} [opts] Options to pass to the plugin
 * @param {Boolean} [opts.deduplicate=false] If true, ignore duplicate plugins (same `fn` argument using `===`)
 * @see plugins https://mongoosejs.com/docs/plugins.html
 * @api public
 
 * Adds an instance method to documents constructed from Models compiled from this schema.
 *
 * #### Example:
 *
 *     const schema = kittySchema = new Schema(..);
 *
 *     schema.method('meow', function () {
 *       console.log('meeeeeoooooooooooow');
 *     })
 *
 *     const Kitty = mongoose.model('Kitty', schema);
 *
 *     const fizz = new Kitty;
 *     fizz.meow(); // meeeeeooooooooooooow
 *
 * If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.
 *
 *     schema.method({
 *         purr: function () {}
 *       , scratch: function () {}
 *     });
 *
 *     // later
 *     const fizz = new Kitty;
 *     fizz.purr();
 *     fizz.scratch();
 *
 * NOTE: `Schema.method()` adds instance methods to the `Schema.methods` object. You can also add instance methods directly to the `Schema.methods` object as seen in the [guide](https://mongoosejs.com/docs/guide.html#methods)
 *
 * @param {String|Object} name The Method Name for a single function, or a Object of "string-function" pairs.
 * @param {Function} [fn] The Function in a single-function definition.
 * @api public
 
 * Adds static "class" methods to Models compiled from this schema.
 *
 * #### Example:
 *
 *     const schema = new Schema(..);
 *     // Equivalent to `schema.statics.findByName = function(name) {}`;
 *     schema.static('findByName', function(name) {
 *       return this.find({ name: name });
 *     });
 *
 *     const Drink = mongoose.model('Drink', schema);
 *     await Drink.findByName('LaCroix');
 *
 * If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.
 *
 *     schema.static({
 *         findByName: function () {..}
 *       , findByCost: function () {..}
 *     });
 *
 *     const Drink = mongoose.model('Drink', schema);
 *     await Drink.findByName('LaCroix');
 *     await Drink.findByCost(3);
 *
 * If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as statics.
 *
 * @param {String|Object} name The Method Name for a single function, or a Object of "string-function" pairs.
 * @param {Function} [fn] The Function in a single-function definition.
 * @api public
 * @see Statics https://mongoosejs.com/docs/guide.html#statics
 
 * Defines an index (most likely compound) for this schema.
 *
 * #### Example:
 *
 *     schema.index({ first: 1, last: -1 })
 *
 * @param {Object} fields The Fields to index, with the order, available values: `1 | -1 | '2d' | '2dsphere' | 'geoHaystack' | 'hashed' | 'text'`
 * @param {Object} [options] Options to pass to [MongoDB driver's `createIndex()` function](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#createIndex)
 * @param {String | number} [options.expires=null] Mongoose-specific syntactic sugar, uses [ms](https://www.npmjs.com/package/ms) to convert `expires` option into seconds for the `expireAfterSeconds` in the above link.
 * @param {String} [options.language_override=null] Tells mongodb to use the specified field instead of `language` for parsing text indexes.
 * @api public
 
 * Sets a schema option.
 *
 * #### Example:
 *
 *     schema.set('strict'); // 'true' by default
 *     schema.set('strict', false); // Sets 'strict' to false
 *     schema.set('strict'); // 'false'
 *
 * @param {String} key The name of the option to set the value to
 * @param {Object} [value] The value to set the option to, if not passed, the option will be reset to default
 * @param {Array<string>} [tags] tags to add to read preference if key === 'read'
 * @see Schema https://mongoosejs.com/docs/api/schema.html#Schema()
 * @api public
  Propagate `strict` and `strictQuery` changes down to implicitly created schemas// Prop ... schemas Avoid propagating transform to implicitly created schemas re: gh-3279// Avoi ... gh-3279!
 * Recursively set options on implicitly created schemas
 /*!\n *  ... mas\n */
 * Gets a schema option.
 *
 * #### Example:
 *
 *     schema.get('strict'); // true
 *     schema.set('strict', false);
 *     schema.get('strict'); // false
 *
 * @param {String} key The name of the Option to get the current value for
 * @api public
 * @return {Any} the option's value
 
 * The allowed index types
 *
 * @property {String[]} indexTypes
 * @memberOf Schema
 * @static
 * @api public
 
 * Returns a list of indexes that this schema declares, via `schema.index()` or by `index: true` in a path's options.
 * Indexes are expressed as an array `[spec, options]`.
 *
 * #### Example:
 *
 *     const userSchema = new Schema({
 *       email: { type: String, required: true, unique: true },
 *       registeredAt: { type: Date, index: true }
 *     });
 *
 *     // [ [ { email: 1 }, { unique: true, background: true } ],
 *     //   [ { registeredAt: 1 }, { background: true } ] ]
 *     userSchema.indexes();
 *
 * [Plugins](https://mongoosejs.com/docs/plugins.html) can use the return value of this function to modify a schema's indexes.
 * For example, the below plugin makes every index unique by default.
 *
 *     function myPlugin(schema) {
 *       for (const index of schema.indexes()) {
 *         if (index[1].unique === undefined) {
 *           index[1].unique = true;
 *         }
 *       }
 *     }
 *
 * @api public
 * @return {Array} list of indexes defined in the schema
 
 * Creates a virtual type with the given name.
 *
 * @param {String} name The name of the Virtual
 * @param {Object} [options]
 * @param {String|Model} [options.ref] model name or model instance. Marks this as a [populate virtual](https://mongoosejs.com/docs/populate.html#populate-virtuals).
 * @param {String|Function} [options.localField] Required for populate virtuals. See [populate virtual docs](https://mongoosejs.com/docs/populate.html#populate-virtuals) for more information.
 * @param {String|Function} [options.foreignField] Required for populate virtuals. See [populate virtual docs](https://mongoosejs.com/docs/populate.html#populate-virtuals) for more information.
 * @param {Boolean|Function} [options.justOne=false] Only works with populate virtuals. If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), will be a single doc or `null`. Otherwise, the populate virtual will be an array.
 * @param {Boolean} [options.count=false] Only works with populate virtuals. If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), this populate virtual will contain the number of documents rather than the documents themselves when you `populate()`.
 * @param {Function|null} [options.get=null] Adds a [getter](https://mongoosejs.com/docs/tutorials/getters-setters.html) to this virtual to transform the populated doc.
 * @param {Object|Function} [options.match=null] Apply a default [`match` option to populate](https://mongoosejs.com/docs/populate.html#match), adding an additional filter to the populate query.
 * @param {Boolean} [options.applyToArray=false] If true and the given `name` is a direct child of an array, apply the virtual to the array rather than the elements.
 * @return {VirtualType}
  Workaround for gh-8198: if virtual is under document array, make a fake// Work ...  a fake virtual. See gh-8210, gh-13189// virt ... h-13189
 * Returns the virtual type with the given `name`.
 *
 * @param {String} name The name of the Virtual to get
 * @return {VirtualType|null}
 
 * Removes the given `path` (or [`paths`]).
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String, age: Number });
 *     schema.remove('name');
 *     schema.path('name'); // Undefined
 *     schema.path('age'); // SchemaNumber { ... }
 *
 * Or as a Array:
 *
 *     schema.remove(['name', 'age']);
 *     schema.path('name'); // Undefined
 *     schema.path('age'); // Undefined
 *
 * @param {String|Array} path The Path(s) to remove
 * @return {Schema} the Schema instance
 * @api public
 
 * Removes the given virtual or virtuals from the schema.
 *
 * @param {String|Array} path The virutal path(s) to remove.
 * @returns {Schema} the Schema instance, or a mongoose error if the virtual does not exist.
 * @api public
 
 * Loads an ES6 class into a schema. Maps [setters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set) + [getters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get), [static methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static),
 * and [instance methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions)
 * to schema [virtuals](https://mongoosejs.com/docs/guide.html#virtuals),
 * [statics](https://mongoosejs.com/docs/guide.html#statics), and
 * [methods](https://mongoosejs.com/docs/guide.html#methods).
 *
 * #### Example:
 *
 * ```javascript
 * const md5 = require('md5');
 * const userSchema = new Schema({ email: String });
 * class UserClass {
 *   // `gravatarImage` becomes a virtual
 *   get gravatarImage() {
 *     const hash = md5(this.email.toLowerCase());
 *     return `https://www.gravatar.com/avatar/${hash}`;
 *   }
 *
 *   // `getProfileUrl()` becomes a document method
 *   getProfileUrl() {
 *     return `https://mysite.com/${this.email}`;
 *   }
 *
 *   // `findByEmail()` becomes a static
 *   static findByEmail(email) {
 *     return this.findOne({ email });
 *   }
 * }
 *
 * // `schema` will now have a `gravatarImage` virtual, a `getProfileUrl()` method,
 * // and a `findByEmail()` static
 * userSchema.loadClass(UserClass);
 * ```
 *
 * @param {Function} model The Class to load
 * @param {Boolean} [virtualsOnly] if truthy, only pulls virtuals from the class, not methods or statics
  Stop copying when hit certain base classes// Stop ... classes Add static methods// Add  ... methods Add methods and virtuals// Add  ... irtuals this is the last path of the selector// this ... elector Any path in the map will be an instance of the map's embedded schematype// Any  ... ematype Map of docs// Map of docs
 * Transforms the duplicate key error by checking for duplicate key error messages by path.
 * If no duplicate key error messages are found, returns the original error.
 *
 * @param {Error} error The error to transform
 * @returns {Error} The transformed error
 * @api private
 
 * Called by `compile()` _right before_ compiling. Good for making any changes to
 * the schema that should respect options set by plugins, like `id`
 * @method _preCompile
 * @memberOf Schema
 * @instance
 * @api private
 
 * Returns a JSON schema representation of this Schema.
 *
 * By default, returns normal [JSON schema representation](https://json-schema.org/learn/getting-started-step-by-step), which is not typically what you want to use with
 * [MongoDB's `$jsonSchema` collection option](https://www.mongodb.com/docs/manual/core/schema-validation/specify-json-schema/).
 * Use the `useBsonType: true` option to return MongoDB `$jsonSchema` syntax instead.
 *
 * In addition to types, `jsonSchema()` supports the following Mongoose validators:
 * - `enum` for strings and numbers
 *
 * #### Example:
 *    const schema = new Schema({ name: String });
 *    // { required: ['_id'], properties: { name: { type: ['string', 'null'] }, _id: { type: 'string' } } }
 *    schema.toJSONSchema();
 *
 *    // { required: ['_id'], properties: { name: { bsonType: ['string', 'null'] }, _id: { bsonType: 'objectId' } } }
 *    schema.toJSONSchema({ useBsonType: true });
 *
 * @param {Object} [options]
 * @param [Boolean] [options.useBsonType=false] if true, specify each path's type using `bsonType` rather than `type` for MongoDB $jsonSchema support
  Skip Map embedded paths, maps will be handled seperately.// Skip ... rately. Nested paths are stored as `nested.path` in the schema type, so create nested paths in the json schema// Nest ...  schema when necessary.// when necessary. Only `required: true` paths are required, conditional required is not required// Only ... equired Otherwise MongoDB errors with "$jsonSchema keyword 'required' cannot be an empty array"// Othe ...  array" require down here because of reference issues// requ ...  issues
 * The various built-in Mongoose Schema Types.
 *
 * #### Example:
 *
 *     const mongoose = require('mongoose');
 *     const ObjectId = mongoose.Schema.Types.ObjectId;
 *
 * #### Types:
 *
 * - [String](https://mongoosejs.com/docs/schematypes.html#strings)
 * - [Number](https://mongoosejs.com/docs/schematypes.html#numbers)
 * - [Boolean](https://mongoosejs.com/docs/schematypes.html#booleans) | Bool
 * - [Array](https://mongoosejs.com/docs/schematypes.html#arrays)
 * - [Buffer](https://mongoosejs.com/docs/schematypes.html#buffers)
 * - [Date](https://mongoosejs.com/docs/schematypes.html#dates)
 * - [ObjectId](https://mongoosejs.com/docs/schematypes.html#objectids) | Oid
 * - [Mixed](https://mongoosejs.com/docs/schematypes.html#mixed)
 * - [UUID](https://mongoosejs.com/docs/schematypes.html#uuid)
 * - [BigInt](https://mongoosejs.com/docs/schematypes.html#bigint)
 * - [Double] (https://mongoosejs.com/docs/schematypes.html#double)
 * - [Int32](https://mongoosejs.com/docs/schematypes.html#int32)
 *
 * Using this exposed access to the `Mixed` SchemaType, we can use them in our schema.
 *
 *     const Mixed = mongoose.Schema.Types.Mixed;
 *     new mongoose.Schema({ _user: Mixed })
 *
 * @api public
 './options/virtualOptions''./helpers/schema/addAutoId''./helpers/schema/getIndexes''./helpers/schema/idGetter''./helpers/indexes/isIndexSpecEqual''./helpers/schema/merge''./helpers/populate/setPopulatedVirtualValue''./helpers/timestamps/setupTimestamps''./helpers/populate/validateRef'hasNumericSubpathRegex/\.\d+(\.|$)/MongooseTypesqueryHooksdocumentHookshookNamessubpathsmethodOptionsmapPathsencryptedFieldspathNamespathOptions_idSubDocauto_idsetupTimestampaliasFields'Invalid value for alias option on '', got ''$schemaType''childSchemas''virtuals'$implicitlyCreated$originalSchemaIdpicknewSchema'Schema#pick() only accepts an array argument, ''got "''` is not in the schema''Schema#omit() only accepts an array argument, ''__v''__t''`versionKey` must be falsy or string, got `''Must set `versionKey` if using `optimisticConcurrency`''invalid `encryptionType`: ${encryptionType}''__proto__.''constructor.''prototype.''Invalid value for schema path `''`, got value "'isMongooseTypeStringupperValInvalid schema configuration: \`\` is not a valid type at path \`\`. See 'https://bit.ly/mongoose-schematypes for a list of valid schema types.''Invalid value for schema Array path `'_typeDefchildSchemaOptionsschemaWrappedPath'encryptionType of a nested schema must match the encryption type of the parent schema.'encryptedFieldencryptedFieldConfig_addEncryptedField'encrypt''encryptionType must be provided'_removeEncryptedFieldaliasObjfieldConfigInvalid BSON type for FLE field: 'buildNestedPathcomponentschemaMapPropertyReduceraccumpropertyConfigpathComponentsremoveIndex'removeIndex() takes only 1 argument''removeIndex() may only take either an object or a string as an argument'clearIndexescleanPath_pathToPositionalSyntax_getPathmapPathgetMapPathhasMixedParentgetPositionalPathfirstPieceOfPathsuppressReservedKeysWarning\`\` is a reserved schema pathname and may break some functionality. 'You are allowed to use it, but use at your own risk. ''To disable this warning pass `suppressReservedKeysWarning` as a schema option.'/\./'Cannot set special property `''` on a schema''Cannot set nested path `''`. ''Parent path `''` already set to type '_schemaTypetoAddsingleNestedPath/\.\d+//\.\d+\./g'.$.'/\.\$\*/gpresplitPath_presplitPatholdObj'mixed''Schema for array path `''` is from a different copy of the Mongoose module. ''Please make sure you\'re using the same version ''of Mongoose everywhere with `npm list mongoose`. If you are still ''getting this error, please add `new Schema()` around the path: ': new Schema(...)castFromTypeKey'ClockDate''Invalid schema configuration: 'Could not determine the embedded type for array \`\`. 'See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.'\` is not a valid type within the array \`\`.'See https://bit.ly/mongoose-schematypes for a list of valid schema types.''ObjectID'\` schematype definition is 'invalid. See ''https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.'createMapNestedSchemaType_mapTypeisInlineSchemasubdocumentSchema'Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'_indexedpathsgetPositionalPathType/\.(\d+)\.|\.(\d+)$//\D/remainingArgs'First param to `schema.plugin()` must be a function, 'renameObjKeyexistingIndexDuplicate schema index on  found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition._propagateOptionsToImplicitlyCreatedSchemas'2d 2dsphere hashed text''indexTypes''Cannot overwrite Schema.indexTypes''Reference virtuals require `localField` option''Reference virtuals require `foreignField` option'virtualPreInitpopulatedValPopulateModel'Virtual path "'' conflicts with a real path in the schema'applyToArray" is not an arrayallKeys_deletePathremoveVirtualAttempting to remove virtual "" that does not exist.virtualsOnly'$isMongooseModelPrototype''$isMongooseDocumentPrototype'/^(length|name|prototype|constructor|__proto__)$/'value'/^(constructor)$/resultPathisArrayFilter1100011001keyPatternjsonSchemaForPathlastSubpathSchema constructor.

#### Example:

const child = new Schema({ name: String });
const schema = new Schema({ name: String, age: Number, children: [child] });
const Tree = mongoose.model('Tree', schema);

// setting schema options
new Schema({ name: String }, { id: false, autoIndex: false })

#### Options:

- [autoIndex](https://mongoosejs.com/docs/guide.html#autoIndex): bool - defaults to null (which means use the connection's autoIndex option)
- [autoCreate](https://mongoosejs.com/docs/guide.html#autoCreate): bool - defaults to null (which means use the connection's autoCreate option)
- [bufferCommands](https://mongoosejs.com/docs/guide.html#bufferCommands): bool - defaults to true
- [bufferTimeoutMS](https://mongoosejs.com/docs/guide.html#bufferTimeoutMS): number - defaults to 10000 (10 seconds). If `bufferCommands` is enabled, the amount of time Mongoose will wait for connectivity to be restablished before erroring out.
- [capped](https://mongoosejs.com/docs/guide.html#capped): bool | number | object - defaults to false
- [collection](https://mongoosejs.com/docs/guide.html#collection): string - no default
- [discriminatorKey](https://mongoosejs.com/docs/guide.html#discriminatorKey): string - defaults to `__t`
- [id](https://mongoosejs.com/docs/guide.html#id): bool - defaults to true
- [_id](https://mongoosejs.com/docs/guide.html#_id): bool - defaults to true
- [minimize](https://mongoosejs.com/docs/guide.html#minimize): bool - controls [document#toObject](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()) behavior when called manually - defaults to true
- [read](https://mongoosejs.com/docs/guide.html#read): string
- [readConcern](https://mongoosejs.com/docs/guide.html#readConcern): object - defaults to null, use to set a default [read concern](https://www.mongodb.com/docs/manual/reference/read-concern/) for all queries.
- [writeConcern](https://mongoosejs.com/docs/guide.html#writeConcern): object - defaults to null, use to override [the MongoDB server's default write concern settings](https://www.mongodb.com/docs/manual/reference/write-concern/)
- [shardKey](https://mongoosejs.com/docs/guide.html#shardKey): object - defaults to `null`
- [strict](https://mongoosejs.com/docs/guide.html#strict): bool - defaults to true
- [strictQuery](https://mongoosejs.com/docs/guide.html#strictQuery): bool - defaults to false
- [toJSON](https://mongoosejs.com/docs/guide.html#toJSON) - object - no default
- [toObject](https://mongoosejs.com/docs/guide.html#toObject) - object - no default
- [typeKey](https://mongoosejs.com/docs/guide.html#typeKey) - string - defaults to 'type'
- [validateBeforeSave](https://mongoosejs.com/docs/guide.html#validateBeforeSave) - bool - defaults to `true`
- [validateModifiedOnly](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate()) - bool - defaults to `false`
- [versionKey](https://mongoosejs.com/docs/guide.html#versionKey): string or object - defaults to "__v"
- [optimisticConcurrency](https://mongoosejs.com/docs/guide.html#optimisticConcurrency): bool or string[] or { exclude: string[] } - defaults to false. Set to true to enable [optimistic concurrency](https://thecodebarbarian.com/whats-new-in-mongoose-5-10-optimistic-concurrency.html). Set to string array to enable optimistic concurrency for only certain fields, or `{ exclude: string[] }` to define a list of fields to ignore for optimistic concurrency.
- [collation](https://mongoosejs.com/docs/guide.html#collation): object - defaults to null (which means use no collation)
- [timeseries](https://mongoosejs.com/docs/guide.html#timeseries): object - defaults to null (which means this schema's collection won't be a timeseries collection)
- [selectPopulatedPaths](https://mongoosejs.com/docs/guide.html#selectPopulatedPaths): boolean - defaults to `true`
- [skipVersioning](https://mongoosejs.com/docs/guide.html#skipVersioning): object - paths to exclude from versioning
- [timestamps](https://mongoosejs.com/docs/guide.html#timestamps): object or boolean - defaults to `false`. If true, Mongoose adds `createdAt` and `updatedAt` properties to your schema and manages those properties for you.
- [pluginTags](https://mongoosejs.com/docs/guide.html#pluginTags): array of strings - defaults to `undefined`. If set and plugin called with `tags` option, will only apply that plugin to schemas with a matching tag.
- [virtuals](https://mongoosejs.com/docs/tutorials/virtuals.html#virtuals-via-schema-options): object - virtuals to define, alias for [`.virtual`](https://mongoosejs.com/docs/api/schema.html#Schema.prototype.virtual())
- [collectionOptions]: object with options passed to [`createCollection()`](https://www.mongodb.com/docs/manual/reference/method/db.createCollection/) when calling `Model.createCollection()` or `autoCreate` set to true.
- [encryptionType]: the encryption type for the schema.  Valid options are `csfle` or `queryableEncryption`.  See https://mongoosejs.com/docs/field-level-encryption.

#### Options for Nested Schemas:

- `excludeIndexes`: bool - defaults to `false`. If `true`, skip building indexes on this schema's paths.

#### Note:

_When nesting schemas, (`children` in the example above), always declare the child schema first before passing it into its parent._Can be one of: object describing schema paths, or schema to copy, or array of objects and schemas
(Object|Schema|Array)=(Object|Schema|Array)`init`: Emitted after the schema is compiled into a `Model`.
Create virtual properties with alias fieldArray of child schemas (from document arrays and single nested subdocs)
and their corresponding compiled models. Each element of the array is
an object with 2 properties: `schema` and `model`.

This property is typically only useful for plugin authors and advanced users.
You do not need to interact with this property at all to use mongoose.Schema
Object containing all virtuals defined on this schema.
The objects' keys are the virtual paths and values are instances of `VirtualType`.

This property is typically only useful for plugin authors and advanced users.
You do not need to interact with this property at all to use mongoose.

#### Example:

const schema = new Schema({});
schema.virtual('answer').get(() => 42);

console.log(schema.virtuals); // { answer: VirtualType { path: 'answer', ... } }
console.log(schema.virtuals['answer'].getters[0].call()); // 42The original object passed to the schema constructor

#### Example:

const schema = new Schema({ a: String }).add({ b: String });
schema.obj; // { a: String }The paths defined on this schema. The keys are the top-level paths
in this schema, and the values are instances of the SchemaType class.

#### Example:

const schema = new Schema({ name: String }, { _id: false });
schema.paths; // { name: SchemaString { ... } }

schema.add({ age: Number });
schema.paths; // { name: SchemaString { ... }, age: SchemaNumber { ... } }Schema as a tree

#### Example:

{
'_id'     : ObjectId
, 'nested'  : {
'key' : String
}
}Returns a deep copy of the schema

#### Example:

const schema = new Schema({ name: String });
const clone = schema.clone();
clone === schema; // false
clone.path('name'); // SchemaString { ... }the cloned schema
Returns a new schema that has the picked `paths` from this schema.

This method is analagous to [Lodash's `pick()` function](https://lodash.com/docs/4.17.15#pick) for Mongoose schemas.

#### Example:

const schema = Schema({ name: String, age: Number });
// Creates a new schema with the same `name` path as `schema`,
// but no `age` path.
const newSchema = schema.pick(['name']);

newSchema.path('name'); // SchemaString { ... }
newSchema.path('age'); // undefinedList of Paths to pick for the new Schema
Options to pass to the new Schema Constructor (same as `new Schema(.., Options)`). Defaults to `this.options` if not set.
Returns a new schema that has the `paths` from the original schema, minus the omitted ones.

This method is analagous to [Lodash's `omit()` function](https://lodash.com/docs/#omit) for Mongoose schemas.

#### Example:

const schema = Schema({ name: String, age: Number });
// Creates a new schema omitting the `age` path
const newSchema = schema.omit(['age']);

newSchema.path('name'); // SchemaString { ... }
newSchema.path('age'); // undefinedList of Paths to omit for the new Schema
Returns default options for this schema, merged with `options`.Options to overwrite the default options
The merged options of `options` and the default options
Inherit a Schema by applying a discriminator on an existing Schema.


#### Example:

const eventSchema = new mongoose.Schema({ timestamp: Date }, { discriminatorKey: 'kind' });

const clickedEventSchema = new mongoose.Schema({ element: String }, { discriminatorKey: 'kind' });
const ClickedModel = eventSchema.discriminator('clicked', clickedEventSchema);

const Event = mongoose.model('Event', eventSchema);

Event.discriminators['clicked']; // Model { clicked }

const doc = await Event.create({ kind: 'clicked', element: '#hero' });
doc.element; // '#hero'
doc instanceof ClickedModel; // truethe name of the discriminator
the discriminated Schema
discriminator options
the Schema instance
Sets the encryption type of the schema, if a value is provided, otherwise
returns the encryption type.plain object with paths to add, or another schema('csfle'|'queryableEncryption'|null|undefined)'queryableEncryption'Adds key path / schema type pairs to this schema.

#### Example:

const ToySchema = new Schema();
ToySchema.add({ name: 'string', color: 'string', price: 'number' });

const TurboManSchema = new Schema();
// You can also `add()` another schema and copy over all paths, virtuals,
// getters, setters, indexes, methods, and statics.
TurboManSchema.add(ToySchema).add({ year: Number });plain object with paths to add, or another schema
(Object|Schema)path to prefix the newly added paths with
private
*Builds an encryptedFieldsMap for the schema.Builds a schemaMap for the schema, if the schema is configured for client-side field level encryption.`schemaMap`s are JSON schemas, which use the following structure to represent objects:
{ field: { bsonType: 'object', properties: { ... } } }

for example, a schema that looks like this `{ a: { b: int32 } }` would be encoded as
`{ a: { bsonType: 'object', properties: { b: < encryption configuration > } } }`

This function takes an array of path segments, an output object (that gets mutated) and
a value to be associated with the full path, and constructs a valid CSFLE JSON schema path for
the object.  This works for deeply nested properties as well.array of path components
the object in which to build a JSON schema of `path`'s properties
the value to associate with the path in objectAdd an alias for `path`. This means getting or setting the `alias`
is equivalent to getting or setting the `path`.

#### Example:

const toySchema = new Schema({ n: String });

// Make 'name' an alias for 'n'
toySchema.alias('n', 'name');

const Toy = mongoose.model('Toy', toySchema);
const turboMan = new Toy({ n: 'Turbo Man' });

turboMan.name; // 'Turbo Man'
turboMan.n; // 'Turbo Man'

turboMan.name = 'Turbo Man Action Figure';
turboMan.n; // 'Turbo Man Action Figure'

await turboMan.save(); // Saves { _id: ..., n: 'Turbo Man Action Figure' }real path to alias
the path(s) to use as an alias for `path`
Remove an index by name or index specification.

removeIndex only removes indexes from your schema object. Does **not** affect the indexes
in MongoDB.

#### Example:

const ToySchema = new Schema({ name: String, color: String, price: Number });

// Add a new index on { name, color }
ToySchema.index({ name: 1, color: 1 });

// Remove index on { name, color }
// Keep in mind that order matters! `removeIndex({ color: 1, name: 1 })` won't remove the index
ToySchema.removeIndex({ name: 1, color: 1 });

// Add an index with a custom name
ToySchema.index({ color: 1 }, { name: 'my custom index name' });
// Remove index by name
ToySchema.removeIndex('my custom index name');name or index specification
Remove all indexes from this schema.

clearIndexes only removes indexes from your schema object. Does **not** affect the indexes
in MongoDB.

#### Example:

const ToySchema = new Schema({ name: String, color: String, price: Number });
ToySchema.index({ name: 1 });
ToySchema.index({ color: 1 });

// Remove all indexes on this schema
ToySchema.clearIndexes();

ToySchema.indexes(); // []Add an [Atlas search index](https://www.mongodb.com/docs/atlas/atlas-search/create-index/) that Mongoose will create using `Model.createSearchIndex()`.
This function only works when connected to MongoDB Atlas.

#### Example:

const ToySchema = new Schema({ name: String, color: String, price: Number });
ToySchema.searchIndex({ name: 'test', definition: { mappings: { dynamic: true } } });Reserved document keys.

Keys in this object are names that are warned in schema declarations
because they have the potential to break Mongoose/ Mongoose plugins functionality. If you create a schema
using `new Schema()` with one of these property names, Mongoose will log a warning.

- _posts
- _pres
- collection
- emit
- errors
- get
- init
- isModified
- isNew
- listeners
- modelName
- on
- once
- populated
- prototype
- remove
- removeListener
- save
- schema
- toObject
- validate

_NOTE:_ Use of these terms as method names is permitted, but play at your own risk, as they may be existing mongoose document methods you are stomping on.

const schema = new Schema(..);
schema.methods.init = function () {} // potentially breakingGets/sets schema paths.

Sets a path (if arity 2)
Gets a path (if arity 1)

#### Example:

schema.path('name') // returns a SchemaType
schema.path('name', Number) // changes the schemaType of `name` to NumberThe name of the Path to get / set
The Type to set the path to, if provided the path will be SET, otherwise the path will be GET
The Mongoose instance this schema is associated withConverts type arguments into Mongoose Types.constructor
schema options
Iterates the schemas paths similar to Array#forEach.

The callback is passed the pathname and the schemaType instance.

#### Example:

const userSchema = new Schema({ name: String, registeredAt: Date });
userSchema.eachPath((pathname, schematype) => {
// Prints twice:
// name SchemaString { ... }
// registeredAt SchemaDate { ... }
console.log(pathname, schematype);
});callback function
Returns an Array of path strings that are required by this schema.

#### Example:

const s = new Schema({
name: { type: String, required: true },
age: { type: String, required: true },
notes: String
});
s.requiredPaths(); // [ 'age', 'name' ]Refresh the cache
Returns indexes from fields and schema-level indexes (cached).Returns the pathType of `path` for this schema.

Given a path, returns whether it is a real, virtual, nested, or ad-hoc/undefined path.

#### Example:

const s = new Schema({ name: String, nested: { foo: String } });
s.virtual('foo').get(() => 42);
s.pathType('name'); // "real"
s.pathType('nested'); // "nested"
s.pathType('foo'); // "virtual"
s.pathType('fail'); // "adhocOrUndefined"Returns true iff this path is a child of a mixed schema.Setup updatedAt and createdAt timestamps to documents if enabledtimestamps options
ignore. Deprecated re: #6405Adds a method call to the queue.

#### Example:

schema.methods.print = function() { console.log(this); };
schema.queue('print', []); // Print the doc every one is instantiated

const Model = mongoose.model('Test', schema);
new Model({ name: 'test' }); // Prints '{"_id": ..., "name": "test" }'name of the document method to call later
arguments to pass to the method
Defines a pre hook for the model.

#### Example:

const toySchema = new Schema({ name: String, created: Date });

toySchema.pre('save', function(next) {
if (!this.created) this.created = new Date;
next();
});

toySchema.pre('validate', function(next) {
if (this.name !== 'Woody') this.name = 'Woody';
next();
});

// Equivalent to calling `pre()` on `find`, `findOne`, `findOneAndUpdate`.
toySchema.pre(/^find/, function(next) {
console.log(this.getFilter());
});

// Equivalent to calling `pre()` on `updateOne`, `findOneAndUpdate`.
toySchema.pre(['updateOne', 'findOneAndUpdate'], function(next) {
console.log(this.getFilter());
});

toySchema.pre('deleteOne', function() {
// Runs when you call `Toy.deleteOne()`
});

toySchema.pre('deleteOne', { document: true }, function() {
// Runs when you call `doc.deleteOne()`
});The method name or regular expression to match method name
methodName(String|RegExp|Array.<String>)If `name` is a hook for both document and query middleware, set to `true` to run on document middleware. For example, set `options.document` to `true` to apply this hook to `Document#deleteOne()` rather than `Query#deleteOne()`.
options.documentIf `name` is a hook for both document and query middleware, set to `true` to run on query middleware.
options.queryDefines a post hook for the document

const schema = new Schema(..);
schema.post('save', function (doc) {
console.log('this fired after a document was saved');
});

schema.post('find', function(docs) {
console.log('this fired after you ran a find query');
});

schema.post(/Many$/, function(res) {
console.log('this fired after you ran `updateMany()` or `deleteMany()`');
});

const Model = mongoose.model('Model', schema);

const m = new Model(..);
await m.save();
console.log('this fires after the `post` hook');

await m.find();
console.log('this fires after the post find hook');If `name` is a hook for both document and query middleware, set to `true` to run on document middleware.
callback
middleware https://mongoosejs.com/docs/middleware.html
kareem https://npmjs.org/package/kareem
Registers a plugin for this schema.

#### Example:

const s = new Schema({ name: String });
s.plugin(schema => console.log(schema.path('name').path));
mongoose.model('Test', s); // Prints 'name'

Or with Options:

const s = new Schema({ name: String });
s.plugin((schema, opts) => console.log(opts.text, schema.path('name').path), { text: "Schema Path Name:" });
mongoose.model('Test', s); // Prints 'Schema Path Name: name'The Plugin's callback
Options to pass to the plugin
If true, ignore duplicate plugins (same `fn` argument using `===`)
opts.deduplicateAdds an instance method to documents constructed from Models compiled from this schema.

#### Example:

const schema = kittySchema = new Schema(..);

schema.method('meow', function () {
console.log('meeeeeoooooooooooow');
})

const Kitty = mongoose.model('Kitty', schema);

const fizz = new Kitty;
fizz.meow(); // meeeeeooooooooooooow

If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.

schema.method({
purr: function () {}
, scratch: function () {}
});

// later
const fizz = new Kitty;
fizz.purr();
fizz.scratch();

NOTE: `Schema.method()` adds instance methods to the `Schema.methods` object. You can also add instance methods directly to the `Schema.methods` object as seen in the [guide](https://mongoosejs.com/docs/guide.html#methods)The Method Name for a single function, or a Object of "string-function" pairs.
The Function in a single-function definition.
Adds static "class" methods to Models compiled from this schema.

#### Example:

const schema = new Schema(..);
// Equivalent to `schema.statics.findByName = function(name) {}`;
schema.static('findByName', function(name) {
return this.find({ name: name });
});

const Drink = mongoose.model('Drink', schema);
await Drink.findByName('LaCroix');

If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.

schema.static({
findByName: function () {..}
, findByCost: function () {..}
});

const Drink = mongoose.model('Drink', schema);
await Drink.findByName('LaCroix');
await Drink.findByCost(3);

If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as statics.Statics https://mongoosejs.com/docs/guide.html#staticsDefines an index (most likely compound) for this schema.

#### Example:

schema.index({ first: 1, last: -1 })The Fields to index, with the order, available values: `1 | -1 | '2d' | '2dsphere' | 'geoHaystack' | 'hashed' | 'text'`
Options to pass to [MongoDB driver's `createIndex()` function](https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#createIndex)
Mongoose-specific syntactic sugar, uses [ms](https://www.npmjs.com/package/ms) to convert `expires` option into seconds for the `expireAfterSeconds` in the above link.
Tells mongodb to use the specified field instead of `language` for parsing text indexes.
options.language_overrideSets a schema option.

#### Example:

schema.set('strict'); // 'true' by default
schema.set('strict', false); // Sets 'strict' to false
schema.set('strict'); // 'false'The name of the option to set the value to
The value to set the option to, if not passed, the option will be reset to default
tags to add to read preference if key === 'read'
Schema https://mongoosejs.com/docs/api/schema.html#Schema()
Gets a schema option.

#### Example:

schema.get('strict'); // true
schema.set('strict', false);
schema.get('strict'); // falseThe name of the Option to get the current value for
the option's valueThe allowed index typesReturns a list of indexes that this schema declares, via `schema.index()` or by `index: true` in a path's options.
Indexes are expressed as an array `[spec, options]`.

#### Example:

const userSchema = new Schema({
email: { type: String, required: true, unique: true },
registeredAt: { type: Date, index: true }
});

// [ [ { email: 1 }, { unique: true, background: true } ],
//   [ { registeredAt: 1 }, { background: true } ] ]
userSchema.indexes();

[Plugins](https://mongoosejs.com/docs/plugins.html) can use the return value of this function to modify a schema's indexes.
For example, the below plugin makes every index unique by default.

function myPlugin(schema) {
for (const index of schema.indexes()) {
if (index[1].unique === undefined) {
index[1].unique = true;
}
}
}list of indexes defined in the schemaCreates a virtual type with the given name.The name of the Virtual
model name or model instance. Marks this as a [populate virtual](https://mongoosejs.com/docs/populate.html#populate-virtuals).
(String|Model)=(String|Model)Required for populate virtuals. See [populate virtual docs](https://mongoosejs.com/docs/populate.html#populate-virtuals) for more information.
options.foreignFieldOnly works with populate virtuals. If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), will be a single doc or `null`. Otherwise, the populate virtual will be an array.
(Boolean|Function)=(Boolean|Function)Only works with populate virtuals. If [truthy](https://masteringjs.io/tutorials/fundamentals/truthy), this populate virtual will contain the number of documents rather than the documents themselves when you `populate()`.
Adds a [getter](https://mongoosejs.com/docs/tutorials/getters-setters.html) to this virtual to transform the populated doc.
options.getApply a default [`match` option to populate](https://mongoosejs.com/docs/populate.html#match), adding an additional filter to the populate query.
If true and the given `name` is a direct child of an array, apply the virtual to the array rather than the elements.
options.applyToArrayReturns the virtual type with the given `name`.The name of the Virtual to get
(VirtualType|null)Removes the given `path` (or [`paths`]).

#### Example:

const schema = new Schema({ name: String, age: Number });
schema.remove('name');
schema.path('name'); // Undefined
schema.path('age'); // SchemaNumber { ... }

Or as a Array:

schema.remove(['name', 'age']);
schema.path('name'); // Undefined
schema.path('age'); // UndefinedThe Path(s) to remove
Removes the given virtual or virtuals from the schema.The virutal path(s) to remove.
the Schema instance, or a mongoose error if the virtual does not exist.
Loads an ES6 class into a schema. Maps [setters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set) + [getters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get), [static methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static),
and [instance methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions)
to schema [virtuals](https://mongoosejs.com/docs/guide.html#virtuals),
[statics](https://mongoosejs.com/docs/guide.html#statics), and
[methods](https://mongoosejs.com/docs/guide.html#methods).

#### Example:

```javascript
const md5 = require('md5');
const userSchema = new Schema({ email: String });
class UserClass {
// `gravatarImage` becomes a virtual
get gravatarImage() {
const hash = md5(this.email.toLowerCase());
return `https://www.gravatar.com/avatar/${hash}`;
}

// `getProfileUrl()` becomes a document method
getProfileUrl() {
return `https://mysite.com/${this.email}`;
}

// `findByEmail()` becomes a static
static findByEmail(email) {
return this.findOne({ email });
}
}

// `schema` will now have a `gravatarImage` virtual, a `getProfileUrl()` method,
// and a `findByEmail()` static
userSchema.loadClass(UserClass);
```The Class to load
if truthy, only pulls virtuals from the class, not methods or staticsTransforms the duplicate key error by checking for duplicate key error messages by path.
If no duplicate key error messages are found, returns the original error.The error to transform
The transformed error
Called by `compile()` _right before_ compiling. Good for making any changes to
the schema that should respect options set by plugins, like `id`Returns a JSON schema representation of this Schema.

By default, returns normal [JSON schema representation](https://json-schema.org/learn/getting-started-step-by-step), which is not typically what you want to use with
[MongoDB's `$jsonSchema` collection option](https://www.mongodb.com/docs/manual/core/schema-validation/specify-json-schema/).
Use the `useBsonType: true` option to return MongoDB `$jsonSchema` syntax instead.

In addition to types, `jsonSchema()` supports the following Mongoose validators:
- `enum` for strings and numbers

#### Example:
const schema = new Schema({ name: String });
// { required: ['_id'], properties: { name: { type: ['string', 'null'] }, _id: { type: 'string' } } }
schema.toJSONSchema();

// { required: ['_id'], properties: { name: { bsonType: ['string', 'null'] }, _id: { bsonType: 'objectId' } } }
schema.toJSONSchema({ useBsonType: true });[options.useBsonType=false] if true, specify each path's type using `bsonType` rather than `type` for MongoDB $jsonSchema supportThe various built-in Mongoose Schema Types.

#### Example:

const mongoose = require('mongoose');
const ObjectId = mongoose.Schema.Types.ObjectId;

#### Types:

- [String](https://mongoosejs.com/docs/schematypes.html#strings)
- [Number](https://mongoosejs.com/docs/schematypes.html#numbers)
- [Boolean](https://mongoosejs.com/docs/schematypes.html#booleans) | Bool
- [Array](https://mongoosejs.com/docs/schematypes.html#arrays)
- [Buffer](https://mongoosejs.com/docs/schematypes.html#buffers)
- [Date](https://mongoosejs.com/docs/schematypes.html#dates)
- [ObjectId](https://mongoosejs.com/docs/schematypes.html#objectids) | Oid
- [Mixed](https://mongoosejs.com/docs/schematypes.html#mixed)
- [UUID](https://mongoosejs.com/docs/schematypes.html#uuid)
- [BigInt](https://mongoosejs.com/docs/schematypes.html#bigint)
- [Double] (https://mongoosejs.com/docs/schematypes.html#double)
- [Int32](https://mongoosejs.com/docs/schematypes.html#int32)

Using this exposed access to the `Mixed` SchemaType, we can use them in our schema.

const Mixed = mongoose.Schema.Types.Mixed;
new mongoose.Schema({ _user: Mixed })./options/virtualOptions'./help ... AutoId'./helpers/schema/addAutoId/helpers/schema/addAutoIdconst g ... exes');getInde ... dexes')./helpers/schema/getIndexes/helpers/schema/getIndexesconst i ... tter');idGette ... etter')require ... etter')'./help ... Getter'./helpers/schema/idGetter/helpers/schema/idGetter'./help ... cEqual'./helpers/indexes/isIndexSpecEqual/helpers/indexes/isIndexSpecEqualconst m ... erge');merge = ... merge')'./help ... /merge'./helpers/schema/merge/helpers/schema/mergeconst s ... alue');setPopu ... Value')'./help ... lValue'./helpers/populate/setPopulatedVirtualValue/helpers/populate/setPopulatedVirtualValuesetupTi ... tamps')./helpers/timestamps/setupTimestamps/helpers/timestamps/setupTimestampsconst v ... eRef');validat ... teRef')require ... teRef')'./help ... ateRef'./helpers/populate/validateRef/helpers/populate/validateRefconst h ... \.|$)/;hasNume ... (\.|$)/hasNume ... thRegex\.\d+(\.|$)(\.|$)\.|$let MongooseTypes;queryHo ... nctionsconst d ... ctions;const h ... Set());hookNam ...  Set())queryHo ...  Set())queryHo ...  reducequeryHo ... tHooks)queryHooks.concat(s, hoo ... d(hook)s.add(hook)s.addfunctio ... mps);\n}{\n  if  ... mps);\n}if (!(t ... s);\n  }!(this  ... Schema)(this i ... Schema)this in ...  Schemanew Sch ... ptions)this.obj = obj;this.obj = objthis.objthis.paths = {};this.paths = {}this.pathsthis.aliases = {};this.aliases = {}this.aliasesthis.subpaths = {};this.subpaths = {}this.subpathsthis.si ... s = {};this.si ... hs = {}this.si ... edPathsthis.nested = {};this.nested = {}this.nestedthis.inherits = {};this.inherits = {}this.inheritsthis.callQueue = [];this.callQueue = []this.callQueuethis._indexes = [];this._indexes = []this._indexesthis._s ... s = [];this._s ... es = []this._searchIndexesthis.me ...  || {};this.me ... ) || {}this.methods(option ... ethods)options ... methodsoptions.methodsthis.me ... s = {};this.me ... ns = {}this.methodOptionsthis.st ...  || {};this.st ... ) || {}this.statics(option ... tatics)options ... staticsoptions.staticsthis.tree = {};this.tree = {}this.treethis.qu ...  || {};this.qu ... ) || {}(option ... .query)options ... s.querythis.ch ... s = [];this.ch ... as = []this.childSchemasthis.$id = ++id;this.$id = ++idthis.$id++idthis.mapPaths = [];this.mapPaths = []this.mapPathsthis.en ... s = {};this.en ... ds = {}this.encryptedFieldsthis.s  ... ()\n  };this.s  ... m()\n  }this.s{\n    h ... m()\n  }hooks: new Kareem()this.de ... ptions)this.defaultOptionsif (Arr ... j);\n  }const definitionthis.ad ... ition);this.add(definition)this.addif (obj ... j);\n  }{\n    t ... j);\n  }this.add(obj);this.add(obj)pathNam ... rtuals)const pathNameconst p ... efined;pathOpt ... definedvirtual ... optionsvirtuals[pathName]virtual ... ptions)virtual ... me].getvirtual ... ].get);virtual ... e].get)virtual.getvirtual ... me].setvirtual ... ].set);virtual ... e].set)virtual.setconst _ ... j._id);_idSubD ... bj._id)obj &&  ... bj._id)obj && obj._idutils.i ... bj._id)const a ... SubDoc;auto_id ... dSubDoc!this.p ... dSubDoc!this.p ... ns._id)!this.paths['_id']this.paths['_id'](this.options._id)this.options._id!_idSubDocif (aut ... s);\n  }addAutoId(this);addAutoId(this)this.se ... tamps);this.se ... stamps)this.setupTimestampthis.op ... estampsObject.keys(paths){\n    l ... ));\n  }let alias = null;alias = nullpaths[path] != nullpaths[path]alias = paths[path];alias = paths[path]options ... tions')get(sch ... tions')alias = ... .alias;alias = ... s.aliasoptions.alias!aliasconst p ... ].path;prop =  ... h].pathschema. ... h].pathArray.isArray(alias)const athrow n ... ' + a);new Err ...  ' + a)'Invali ... t ' + a'Invali ... , got ''Invali ...  + prop'Invali ... on on 'Invalid value for alias option on , got schema. ... = prop;schema. ...  = propschema.aliases[a]schema. ... prop));schema. ... (prop))schema. ...     setschema. ...     getschema. ... tual(a)schema. ... virtual(functi ... )(prop)(functi ...      })typeof this.getreturn this.get(p);this.get(p)return this[p];this[p]return  ... (p, v);this.$set(p, v)typeof aliasthrow n ... alias);new Err ...  alias)'Invali ... + aliasschema. ... [alias]schema. ... (alias)Schema. ... otype);Schema. ... totype)Schema. ... Schema;Schema. ...  SchemaSchema. ... tructorSchema. ... = true;Schema. ...  = trueSchema. ... fSchema$schemaTypeSchema. ... pe.obj;Schema.prototype.objSchema. ... .paths;Schema. ... e.pathsSchema. ... e.tree;Schema. ... pe.treeSchema. ... n s;\n};Schema. ... rn s;\n}Schema. ... e.clonefunctio ... rn s;\n}{\n  con ... rn s;\n}s = this._clone()this._clone()this._clones.on('i ... ', v));s.on('i ... t', v))s.onv => th ... it', v)this.emit('init', v)return s;Schema. ... ._clone{\n  Con ... rn s;\n}Constru ... chema);Constru ... Schema)(this.b ... Schema)this.ba ... .Schemathis.base == nulls = new ... ptions)this._u ... Optionss.base = this.base;s.base = this.bases.bases.obj = this.obj;s.obj = this.objs.objs.optio ... tions);s.optio ... ptions)s.callQ ...  f; });s.callQ ... n f; })s.callQueuethis.ca ... n f; })this.callQueue.mapfunctio ... rn f; }{ return f; }return f;s.metho ... thods);s.metho ... ethods)s.methodsclone(this.methods)s.metho ... tions);s.metho ... ptions)s.methodOptionss.stati ... atics);s.stati ... tatics)s.staticsclone(this.statics)s.query ... query);s.query ... .query)s.queryclone(this.query)s.plugi ... ugins);s.plugi ... lugins)s.pluginss._inde ... dexes);s._inde ... ndexes)s._indexesclone(this._indexes)s._sear ... dexes);s._sear ... ndexes)s._searchIndexesclone(t ... ndexes)s.s.hoo ... lone();s.s.hoo ... clone()s.s.hookss.sthis.s.hooks.clone()this.s.hooks.clonethis.s.hookss.tree  ... .tree);s.tree  ... s.tree)s.treeclone(this.tree)s.paths ... ))\n  );s.paths ... ]))\n  )s.pathsObject. ... ]))\n  )Object. ... ne()]))Object. ... hs).map([key,  ... one()])[key, value.clone()]value.clone()value.clones.neste ... ested);s.neste ... nested)s.nestedclone(this.nested)s.subpa ... paths);s.subpa ... bpaths)s.subpathsclone(this.subpaths)const schemaTypeconst p ... e.path;path =  ... pe.pathschemaT ... a.pathss.singl ... s[key];s.singl ... hs[key]s.singl ...  + key]s.singleNestedPathsschemaT ... hs[key]schemaT ... edPathsObject. ... bpaths)schemaT ... ubpathsObject. ... nested)schemaT ... .nesteds.singl ... ested';s.singl ... nested's._gath ... emas();s._gath ... hemas()s._gath ... Schemass.virtu ... tuals);s.virtu ... rtuals)s.virtualsclone(this.virtuals)s.$glob ... pplied;s.$glob ... Appliedthis.$g ... Applieds.$isRo ... inator;s.$isRo ... minatorthis.$i ... minators.$impl ... reated;s.$impl ... Createds.$implicitlyCreatedthis.$i ... Createds.$id = ++id;s.$id = ++ids.$ids.$orig ... is.$id;s.$orig ... his.$ids.$originalSchemaIds.mapPa ... Paths);s.mapPa ... pPaths)s.mapPaths[].conc ... pPaths)if (thi ... g);\n  }this.di ... Mapping{\n    s ... g);\n  }s.discr ... pping);s.discr ... apping)s.discr ... MappingObject. ... apping)s.discr ... ators);s.discr ... nators)s.discriminatorsthis._a ... != nulls._appl ... ators);s._appl ... nators)s._appl ... inatorsnew Map ... nators)s.alias ... iases);s.alias ... liases)s.aliasess.encry ... ields);s.encry ... Fields)s.encryptedFieldsclone(t ... Fields)Schema. ... ema;\n};Schema. ... hema;\n}Schema. ... pe.pick{\n  con ... hema;\n}newSche ... ptions)'Schema ... s + '"''Schema ... f paths'Schema ... 'got "''Schema ... ment, 'Schema#pick() only accepts an array argument, got "this._h ... d(path)this._h ... edFieldconst e ... [path];encrypt ... s[path]this.en ... s[path]this.path(path)newSche ...     });newSche ...      })newSchema.add[path]: ...       }[this.o ... emaTypethis.options.typeKeythis.nested[path]newSche ... th) });newSche ... ath) }){ [path ... path) }[path]: ... , path)get(this.tree, path)new Mon ... chema')'Path ` ... schema''` is n ... schema'` is not in the schemanewSche ... ype });newSche ... type }){ [path ... atype }[path]: schematypeif (!th ... ll;\n  }!this._ ... ields()this._h ... ields()this._h ... dFields{\n    n ... ll;\n  }newSche ... = null;newSche ...  = nullnewSche ... ionTypenewSchema.optionsreturn newSchema;Schema. ... pe.omitif (!Ar ...  );\n  }'Schema ...     '"'Schema#omit() only accepts an array argument, newSche ... paths);newSche ... (paths)newSchema.removenewSche ... edPathsconst nestedpaths.i ... nested)paths.includesdelete  ... ested];delete  ... nested]newSche ... nested]Schema. ... ons;\n};Schema. ... ions;\n}Schema. ... Options{\n  thi ... ions;\n}const b ...  || {};baseOpt ... s || {}this.ba ... s || {}this.ba ... optionsconst s ... : true;strict  ...  : true'strict ...  : truebaseOptions.strictstrictQ ... : false'strict ... : falsebaseOpt ... ctQueryid = 'i ...  : true'id' in ...  : true'id' in baseOptionsbaseOptions.idoptions ... ns\n  };options ... ons\n  }{\n    s ... ons\n  }bufferCommands: truecapped: falseversionKey: '__v'__voptimis ... : falseautoIndex: nulldiscrim ... : '__t'__tshardKey: nullread: nullvalidat ... e: truevalidat ... : falseid: idtypeKey: 'type'typeof  ... sionKeythrow n ... + '`');new Mon ...  + '`')'`versi ... ) + '`''`versi ... ionKey)'`versi ...  got `'`versionKey` must be falsy or string, got `(typeof ... ionKey)typeof options.readoptions.read{\n    o ... d);\n  }options ... .read);options ... s.read)handleR ... s.read)if (Arr ...  };\n  }Array.i ... string'Array.i ... s.read)typeof  ... read[0]options.read[0]options ... ]\n    }mode: h ... ead[0])handleR ... ead[0])tags: o ... read[1]options.read[1]options ... urrency!options.versionKeythrow n ... ncy`');new Mon ... ency`')'Must s ... rency`'Must set `versionKey` if using `optimisticConcurrency`Schema. ... his;\n};Schema. ... this;\n}Schema. ... minatorthis._a ...  Map();this._a ... w Map()this._a ... ons });this._a ... ions })this._a ... ors.set{ schema, options }const p ... bject';path =  ... Object'json ?  ... Object'this._d ... p[path]this._d ... ionsMapbaseOpt ... ] || {}this.ba ... ] || {}this.ba ... s[path]const s ...  || {};schemaO ... ] || {}this.op ... ] || {}this.options[path]default ... ptions)this._d ...  || {};this._d ... p || {}this._d ... ptions;this._d ... OptionsSchema. ... ype;\n};Schema. ... Type;\n}Schema. ... ionType{\n  if  ... Type;\n}if (arg ... pe;\n  }return  ... onType;this.op ... ionType!(typeo ... = null)(typeof ... = null)typeof  ... ionTypeencrypt ... == nullthrow n ... ype}');new Err ... Type}')'invali ... nType}'invalid `encryptionType`: ${encryptionType}this.op ... onType;Schema.prototype.addif (obj ... is;\n  }obj ins ... Schema)obj ins ...  Schema(obj != ... Schema)obj !=  ... fSchemaobj.instanceOfSchema{\n    m ... is;\n  }merge(this, obj);merge(this, obj)obj._id ... == nullobj._id === falseprefix == nullthis.op ...  false;this.op ... = falseif (pre ... is;\n  }prefix  ... otype.'prefix  ... uctor.'prefix  ... oto__.'__proto__.constructor.prototype.utils.s ... as(key)utils.s ... ies.hasconst f ...  + key;fullPat ... x + keyconst v ... j[key];new Typ ...  + '"')'Invali ... l + '"''Invali ... alue "''Invali ... ullPath'Invali ... path `'Invalid value for schema path ``, got value "key === ... = falseval === falselet isM ...  false;isMongo ... = falseconst M ... .Types;this.ba ... a.Typesconst u ... ing(1);upperVa ... ring(1)val.cha ... ring(1)val.cha ... rCase()val.cha ... perCaseval.charAt(0)val.charAtval.substring(1)val.substringisMongo ... = null;Mongoos ... != nullMongoos ... perVal]key !== ... = null)((typeo ... = null)(typeof ... == null(typeof ... String)typeof  ... eString!isMong ... eStringthrow n ... pes.');new Typ ... ypes.')`Invali ... types.'`Invali ... . See ``Invali ... s not `Invalid ... ion: \`Invalid schema configuration: `` is not `a vali ... . See `a valid ... path \`a valid type at path ``. See 'https: ... types.'https://bit.ly/mongoose-schematypes for a list of valid schema types.val ins ... alType'val ins ... ualType(val.co ... alType'(val.co ... | null)val.con ... || nullval.con ... or.namethis.virtual(val);this.virtual(val)Array.i ... h === 1val.length === 1val[0] == null'Invali ... ] + '"''Invali ...  val[0]Invalid value for schema Array path `if (!(i ... }\n    }!(isPOJ ... ptions)(isPOJO ... ptions)isPOJO( ... Optionsval ins ... Optionsthis.ne ... = true;this.ne ...  = truethis.ne ... h - 1)]prefix. ... th - 1)prefix.substringprefix.length - 1this.pa ... , val);this.pa ... y, val)val[0]  ... nators)val[0]  ... Schema)!(val[0 ... Schema)(val[0] ... Schema)val[0]. ... fSchemautils.i ... nators)val[0]. ... inatorsconst s ... + key);schemaT ...  + key)this.pa ...  + key)schemaT ... [key]);schemaT ... s[key])val[0]. ... rs[key]if (Obj ... }\n    }Object. ... gth < 1this.pa ... h, val)!val[ty ... e.type)!val[typeKey]val[typeKey]typeKey ... l.type)isPOJO(val.type)val.typeval.type.typethis.ne ... llPath]this.ad ... + '.');this.ad ...  + '.')fullPath + '.'const _ ... peKey];_typeDe ... ypeKey]isPOJO(_typeDef)Object. ... ypeDef)childSc ... ns = {}this._u ... typeKeychildSc ... ypeKey;childSc ... typeKeythis._u ... != nullthis._u ... .strictchildSc ... strict;childSc ... .strictthis._u ... oObjectchildSc ... orm']);childSc ... form'])childSc ... oObjectutils.o ... form'])utils.omit['transform']this._u ... .toJSONchildSc ... .toJSON_schema ... ptions)_schema ... = true;_schema ...  = true_schema ... Createdconst s ... ema });schemaW ... hema })Object. ... hema }){ [type ... chema }[typeKey]: _schemathis.pa ... dPath);this.pa ... edPath)val !=  ... nators)val !=  ... Schema)!(val.i ... Schema)(val.in ... Schema)val.instanceOfSchemaval.discriminatorsval.dis ... rs[key]val.ins ... != nullval.enc ... != nullval.encryptionType()val.encryptionTypethis.en ... nType()this.encryptionTypethrow n ... ema.');new Err ... hema.')'encryp ... chema.'encryptionType of a nested schema must match the encryption type of the parent schema.encryptionType of a nested schema must match the encryption type of the parent schemaval.encryptedFieldsconst [ ... Config][encryp ... Config]const p ... dField;path =  ... edFieldfullPat ... edFieldthis._a ... onfig);this._a ... Config)this._a ... edFieldtypeof  ...  in val'encrypt' in valconst { ...  = val;{ encrypt } = val{ encrypt }this.en ... == nullthrow n ... ided');new Err ... vided')'encryp ... ovided'encryptionType must be providedthis._a ... crypt);this._a ... ncrypt)this._r ... lPath);this._r ... llPath)this._r ... edField_remove ... edFieldconst a ... ))\n  );aliasOb ... ]))\n  )Object. ... null]))Object. ... bj).mapObject.entries(obj)([key]) ...  null])[key]([prefi ...  null])[prefix + key, null]aliasFi ... asObj);aliasFi ... iasObj)Schema. ... ig);\n};Schema. ... fig);\n}Schema. ... edFieldfunctio ... fig);\n}{\n  con ... fig);\n}const t ... Type();type =  ... nType()this.pa ... nType()this.pa ... ionTypetype == nullnew Err ... ath}'`)`Invali ... path}'`Invalid ... ield: 'this.en ... onfig);this.en ... Config)clone(fieldConfig)Schema. ... th];\n};Schema. ... ath];\n}{\n  del ... ath];\n}Schema. ... > 0;\n};Schema. ...  > 0;\n}Schema. ... dFieldsfunctio ...  > 0;\n}{\n  ret ...  > 0;\n}Schema. ... lds;\n};Schema. ... elds;\n}{\n  ret ... elds;\n}return  ... Fields;path in ... dFieldsSchema. ... s };\n};Schema. ... ds };\n}functio ... ds };\n}{\n  con ... ds };\n}const f ...     });fields  ... \n    })Object. ... ds).map([path, ... ;\n    }[path, config]const b ... Type();bsonTyp ... nType()return  ... nfig };{ path, ... onfig }...configreturn { fields };{ fields }Schema. ...   };\n};Schema. ... \n  };\n}Schema. ... hemaMap{\n  /** ... \n  };\n}let i = ... ath[i];component = path[i]for (;  ... ;\n    }i < path.length - 1path.length - 1++i, co ... path[i]object[ ... onent];object[ ... ponent]object[component]object[ ... == nullbsonType: 'object'properties: {}object  ... erties;object  ... pertiesobject[ ... pertiesobject[ ...  value;object[ ... = valueconst s ... m;\n  };schemaM ... um;\n  }schemaM ... Reducer(accum, ... um;\n  }[path,  ... Config]pathCom ... it('.')const c ... pe } };configu ... ype } }{ encry ... ype } }encrypt ... nType }{ ...pr ... nType }...propertyConfigbuildNe ... ation);buildNe ... ration)return accum;const p ...    {});propert ...     {})Object. ...     {})return  ... es\n  };{\n    b ... ies\n  }Schema. ... e.alias{\n  ali ... this;\n}aliasFi ... ias });aliasFi ... lias }){ [path]: alias }[path]: aliasSchema. ... veIndex'remove ... gument'removeIndex() takes only 1 argument takes only 1 argumentremoveIndex() may only take either an object or a string as an argument may only take either an object or a string as an argumenti = thi ... gth - 1this._i ... gth - 1this._indexes.lengththis._indexes[i][0]this._indexes[i]this._i ... (i, 1);this._i ... e(i, 1)this._indexes.splicethis._i ... = indexthis._i ... != nullthis._indexes[i][1]this._i ... 1].nameSchema. ... Indexesthis._i ... th = 0;this._i ... gth = 0Schema. ... chIndexthis._s ... ption);this._s ... iption)this._s ... es.pushSchema. ... (null);Schema. ... e(null)Schema.reservedSchema. ... served;Schema. ... eservedconst r ... served;reserve ... eservedreserve ... te = 1;reserve ... ate = 1reserve ... otype']reserved.emitreserved.listenersreserve ... istenerreserved.collectionreserved.errorsreserved.getreserved.initreserved.isModifiedreserved.isNewreserved.populatedreserved.removereserved.savereserved.toObjectreserved.validatereserve ... on = 1;reserve ... ion = 1Schema. ... pe.pathobj === undefinedthis.pa ... != nullthis.paths[path]const c ... (path);cleanPa ... x(path)_pathTo ... x(path)_pathTo ... lSyntaxlet sch ... nPath);schemat ... anPath)_getPat ... anPath)const m ...  path);mapPath ... , path)getMapP ... , path)if (map ... ;\n    }mapPath != nullreturn mapPath;schemat ... nPath);this.ha ... anPath)this.hasMixedParenthasNume ... definedhasNume ... t(path)hasNume ... ex.testgetPosi ... anPath)const f ... .')[0];firstPi ... '.')[0]if (res ... e);\n  }reserve ... Warningreserve ... OfPath]!this.o ... Warningthis.op ... Warningconst e ... tion.';errorMe ... ption.'`\`${fi ... ption.'`\`${fi ... risk. '`\`${fi ... lity. `\` is a ... ality. ` is a reserved schema pathname and may break some functionality. 'You ar ... risk. 'You are allowed to use it, but use at your own risk. 'To dis ... ption.'To disable this warning pass `suppressReservedKeysWarning` as a schema option.utils.w ... ssage);utils.w ... essage)typeof  ...  'ref')utils.h ...  'ref'){\n    v ... h);\n  }validat ...  path);validat ... , path)obj.refconst s ... (/\./);subpath ... t(/\./)path.split(/\./)last =  ... s.pop()subpaths.pop()subpaths.poplet bra ... s.tree;branch = this.treelet fullPath = '';fullPath = ''for (co ... b];\n  }const sub{\n    i ... b];\n  }utils.s ... as(sub)'Cannot ... schema''Cannot ... ' + sub'Cannot ... erty `'Cannot set special property `` on a schemafullPat ...  + sub;fullPat ... ) + sub(fullPa ... ) + sub(fullPa ... ' : '')fullPat ... .' : ''fullPath.length > 0fullPath.lengthif (!br ... ;\n    }!branch[sub]branch[sub]branch[sub] = {};branch[sub] = {}typeof branch[sub]const m ...  + '.';msg = ' ...   + '.''Cannot ...   + '.''Cannot ... b].name'Cannot ...  type ''Cannot ... ullPath'Cannot ... + '`. 'Cannot set nested path ``. Parent path `'` alre ...  type '` already set to type branch[sub].namebranch  ... h[sub];branch = branch[sub]branch[ ... e(obj);branch[ ... ne(obj)branch[last]this.pa ... tions);this.pa ... ptions)this.in ... ptions)this.interpretAsTypethis.ch ...  path);this.ch ... = path)this.ch ... .filterchildSc ... == pathchildSchema.pathschemaT ... hemaMapconst m ...  '.$*';mapPath ... + '.$*'path + '.$*'this.pa ... maType;this.pa ... emaTypethis.paths[mapPath]schemaT ... emaTypethis.ma ... Path]);this.ma ... pPath])this.mapPaths.pushthis.ch ...     });this.ch ...      })this.ch ... as.pushschema: ... .schemaschemaT ... .schemamodel:  ... .casterschemaT ... .casterthis.si ... s[key];this.si ... hs[key]this.si ...  + key]this.si ... ested';this.si ... nested'value: this.baseschemaT ... s.base;schemaT ... is.baseschemaT ... er.basethis.ch ... \n    }){\n      ... h\n    }schemaT ... or.basemodel:  ... tructorlet arr ... = path;arrayPath = pathlet _sc ... maType;_schema ... emaTypeconst toAdd = [];toAdd = []_schema ... seArrayarrayPa ... + '.$';arrayPa ...  + '.$'arrayPath + '.$'_schema ... ntArray_schema ... ayPath;_schema ... rayPath_schema ... = path;_schema ...  = path_schema ... entPath_schema ... maType;_schemaType.caster_schema ... caster;_schema ... .casterthis.su ... maType;this.su ... emaTypethis.su ... ayPath]const _schemaTypethis.su ... e.path]_schemaType.path_schema ... hs[key]this.su ...  + key]typeof _schemaType_schemaType != null_schema ... == null_schema ... ocArraySchema. ... mas;\n};Schema. ... emas;\n}Schema. ... Schemasfunctio ... emas;\n}{\n  con ... emas;\n}childSchemas = []childSc ...     });childSc ...      })childSchemas.pushschemat ... hemaMapthis.ch ... chemas;this.ch ... Schemasreturn childSchemas;if (sch ... h];\n  }if (sch ... th;\n  }schema. ... anPath)schema.subpathsconst s ... nPath];subpath ... anPath]schema. ... anPath]subpath === 'nested'return subpath;schema. ... object'typeof  ... anPath]singleN ... anPath]if (sin ... ;\n    }singleN ... nested'return  ... edPath;functio ... .$');\n}{\n  if  ... .$');\n}if (!/\ ... th;\n  }!/\.\d+/.test(path)/\.\d+/.test(path)/\.\d+/.test\.\d+{\n    r ... th;\n  }return  ...  '.$');path.re ... , '.$')path.re ... replacepath.re ...  '.$.').$.schema. ... h === 0schema.mapPathsconst c ... g, '');cleanPa ... /g, '')val.pat ... /g, '')val.path.replaceval.path\.\$\*path == ... === -1)path === cleanPath(path.s ... === -1)path.st ...  === -1cleanPath + '.'path.sl ...  === -1path.sl ... Of('.')path.sl ... indexOfcleanPath.length + 1cleanPath.lengthval.sch ...  + '.')val.schemalet rem ... h + 1);remnant ... ) + 1);remnant ... ') + 1)remnant.sliceremnant ... .') + 1remnant.indexOf('.')remnant.indexOfreturn  ... mnant];val.sch ... emnant]val.schema.pathsval.$is ...  + '.')val.$isSchemaMapconst p ... itPath;prespli ... litPathval.$__ ... litPathval.$__schemaTyperemnant ... == '$*'remnant ...  === -1prespli ... == '$*'prespli ... th - 1]prespli ... gth - 1presplitPath.lengthremnant ... .schemaremnant ...  !== -1val.$__ ... .schemareturn  ...  + 1));val.$__ ... ) + 1))val.$__ ... ma.path{\n  con ...  null\n}Schema. ... tAsTypeif (obj ... ne;\n  }obj ins ... emaType{\n    i ... ne;\n  }obj.path === pathclone = obj.clone()clone.path = path;clone.path = pathclone.pathreturn clone;this.ba ... types')this.base.Typesif (!ut ...   }\n  }!utils.isPOJO(obj)utils.isPOJO(obj)!(obj i ... ptions)(obj in ... ptions)obj ins ... Optionsconst c ... uctor);constru ... ructor)utils.g ... ructor)const oldObj = obj;oldObj = objobj = {};obj[opt ... oldObj;obj[opt ...  oldObjobj[options.typeKey]let typ ...   : {};type =  ...    : {}obj[opt ...    : {}obj[opt ... e.type)(obj[op ... e.type)obj[opt ... pe.typeobj[opt ...  'type'obj[opt ... unctionoptions ...  'type'!obj.type.typeobj.type.typeobj.typeif (typ ... ne;\n  }type in ... emaTypetype.path === pathtype.pathreturn type;clone = type.clone()type.clone()type.clonelet name;if (uti ... j);\n  }utils.i ... 'mixed'type === 'mixed'return  ... , obj);new Mon ... h, obj)MongooseTypes.MixedArray.i ... s.ArrayArray.i ... 'array'Array.i ... = Arraytype === Arraytype === 'array'type == ... s.ArrayMongooseTypes.Arraylet cas ... ype[0];cast =  ... type[0](type = ... type[0](type = ... array')type == ... 'array'obj.cast || obj.ofobj.castobj.oftype[0]cast && ... fSchemacast.in ... fSchemaif (!(c ...       }!(cast  ... Schema)(cast i ... Schema)cast in ...  Schemathis.op ... Mergingcast =  ... (cast);cast =  ... a(cast)new Schema(cast)throw n ... ...)`);new Typ ... (...)`)'Schema ... a(...)`'Schema ... path: ''Schema ... still ''Schema ... rsion ''Schema ... dule. ''Schema ...  + path'Schema ... path `'Schema for array path `'` is f ... dule. '` is from a different copy of the Mongoose module. 'Please ... rsion 'Please make sure you're using the same version 'of Mon ... still 'of Mongoose everywhere with `npm list mongoose`. If you are still 'gettin ... path: 'getting this error, please add `new Schema()` around the path: `${path ... a(...)`new Mon ... t, obj)cast && ... ypeKey]cast[op ... ypeKey]cast[op ... fSchema!(cast[ ... Schema)(cast[o ... Schema)cast[op ...  Schemacast[op ... eKey]);cast[op ... peKey])new Sch ... peKey])return  ...  cast);new Mon ... , cast)Array.i ... 'Array'Array.isArray(cast)cast.type === Arraycast.typecast.type == 'Array'cast && ... 'Array'cast.type = Array;cast.type = Arraynew Mon ... ), obj)const c ...   cast;castFro ...    cast(cast ! ...    cast(cast ! ... .type))cast != ... e.type)cast != ... ypeKey]cast != null(option ... e.type)options ... pe.type!cast.type.typecast.type.typecast =  ... ng(1)];cast =  ... ing(1)]Mongoos ... ing(1)]cast.ch ... ring(1)cast.ch ... rCase()cast.ch ... perCasecast.charAt(0)cast.charAtcast.substring(1)cast.substringutils.i ... ypeKey)Object. ... ypeKey)const c ... mize };childSc ... imize }{ minim ... imize }options ... trict')options ... Query')childSc ... tQuery;childSc ... ctQueryoptions.toObjectoptions ... oJSON')options.toJSONthis._u ... ('_id')this._u ... ropertychildSc ... ns._id;childSc ... ons._idthis._u ... ons._idif (Sch ...       }Schema. ... != nullSchema. ... ons._idSchema. ... ntArraychildSc ... ptions)childSc ... = true;childSc ...  = truechildSc ... Creatednew Mon ... a, obj)new Mon ... d, obj)type =  ... : cast;type =  ...  : castcast[op ...  : castcast[op ... e.type)name =  ... (type);name =  ... e(type)typeof  ... e(type)typeof typetype.sc ... e(type)type.schemaNameutils.g ... e(type)if (nam ...       }name === 'ClockDate'ClockDatename = 'Date';name = 'Date'name === void 0throw n ... xes.');new Typ ... axes.')'Invali ... taxes.''Invali ... h}\`. `'Invali ... tion: 'Invalid schema configuration: `Could  ... h}\`. `Could n ... rray \`Could not determine the embedded type for array `'See ht ... taxes.'See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.if (!Mo ...       }!Mongoo ... y(name)Mongoos ... y(name)Mongoos ... roperty'Invali ... types.''Invali ... th}\`.``\`${na ... th}\`.`\` is n ... rray \`` is not a valid type within the array `'See ht ... types.'See https://bit.ly/mongoose-schematypes for a list of valid schema types.new Mon ... ptions)cast || ... s.Mixedif (typ ... j);\n  }type && ... fSchematype.in ... fSchemaif (Buf ... ();\n  }Buffer. ... r(type){\n    n ... r';\n  }name = 'Buffer';name = 'Buffer'type == ... bjectIdTypes.ObjectId{\n    n ... d';\n  }name = 'ObjectId';name = 'ObjectId'type == ... imal128Types.Decimal128{\n    n ... 8';\n  }name = 'Decimal128';name = 'Decimal128'name =  ... ring();name =  ... tring()type == ... tring()'' + typetype.toString()type.toStringif (nam ... 1);\n  }{\n    n ... 1);\n  }name =  ... ing(1);name =  ... ring(1)name.ch ... ring(1)name.substring(1)name.substringif (nam ... d';\n  }name === 'ObjectID'if (nam ... e';\n  }`Invali ... taxes.'`Invali ... . See '`Invali ... on is `\` sche ... ion is ` schematype definition is invalid. See 'https: ... taxes.'https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.if (Mon ... ');\n  }Mongoos ... == nullMongooseTypes[name]if (nam ... is;\n  }name === 'Union'{\n    o ... is;\n  }obj.par ... = this;obj.par ...  = thisobj.parentSchemacreateM ... tions);createM ... ptions)createM ... emaTypereturn schemaType;let _ma ... : {} };_mapTyp ... e: {} }{ type: {} }type: {}utils.h ... , 'of')const i ... peKey);isInlin ... ypeKey)utils.isPOJO(obj.of)Object.keys(obj.of)!utils. ... ypeKey)utils.h ... ypeKey)if (isI ... ;\n    }_mapTyp ... .of) };_mapTyp ... j.of) }{ [sche ... j.of) }[schema ... obj.of)new Schema(obj.of)_mapTyp ... bj.of);_mapTyp ... obj.of)Object. ... obj.of)_mapTyp ... j.of };_mapTyp ... bj.of }{ [sche ... bj.of }[schema ...  obj.ofif (_ma ... ;\n    }_mapTyp ... fSchema_mapTyp ... ypeKey]const s ... peKey];subdocu ... ypeKey]subdocu ...     });subdocu ...      })subdocu ... achPath(subpat ...       }type.op ... == true'Cannot ... h + '"''Cannot ... subpath'Cannot ... h + '.''Cannot ... path "'Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "_mapTyp ... bj.ref;_mapTyp ... obj.ref_mapType.refschema. ... tAsTypeSchema. ... achPath{\n    f ... ]);\n  }fn(keys ... s[i]]);fn(keys ... ys[i]])this.paths[keys[i]]Schema. ... ths;\n};Schema. ... aths;\n}Schema. ... edPathsfunctio ... aths;\n}{\n  if  ... aths;\n}if (thi ... hs;\n  }this._r ... alidatethis._requiredpaths!invalidate{\n    r ... hs;\n  }return  ... dpaths;this.pa ... equiredret.push(path);ret.push(path)this._r ...  = ret;this._r ... s = retthis._indexedpathsthis._i ... exes();this._i ... dexes()this.indexes()this.indexesSchema. ... ed';\n};Schema. ... ned';\n}Schema. ... athTypefunctio ... ned';\n}{\n  if  ... ned';\n}if (thi ... l';\n  }this.pa ... y(path)this.pa ... roperty{\n    r ... l';\n  }return 'real';this.vi ... y(path)this.vi ... ropertyreturn 'virtual';if (thi ... d';\n  }this.ne ... y(path)this.ne ... roperty{\n    r ... d';\n  }return 'nested';this.su ... y(path)this.su ... anPath)this.su ... ropertysingleN ... y(path)this.si ... y(path)this.si ... anPath)this.si ... ropertyif (sin ... l';\n  }return  ... 'real';singleN ...  'real'if (map ... l';\n  }if (/\. ... h);\n  }/\.\d+\ ... t(path)return  ... nPath);getPosi ... athTypereturn  ... fined';Schema. ... ull;\n};Schema. ... null;\n}Schema. ... dParentconst s ... /\./g);subpath ... (/\./g)path.split(/\./g)path = '';path = ''i < subpaths.lengthsubpaths.lengthpath =  ... ths[i];i > 0 ? ... aths[i]path +  ... aths[i]subpaths[i]this.pa ... s.MixedSchema. ... ps);\n};Schema. ... mps);\n}Schema. ... mestamp{\n  ret ... mps);\n}return  ... tamps);setupTi ... stamps){\n  con ... ned';\n}const s ... olean);subpath ... oolean)path.sp ... oolean)path.sp ... .filterpath.sp ... \d+)$/)\.(\d+)\.|\.(\d+)$\.(\d+)\.(\d+)\.(\d+)$if (sub ... d';\n  }subpaths.length < 2self.pa ... efined'self.pa ... ths[0])self.pa ... ropertyself.pathssubpaths[0]self.pa ... ths[0]]let val ... hs[0]);val = s ... ths[0])self.pathlet isN ...  false;isNested = falseif (!va ... d';\n  }const l ... th - 1;last =  ... gth - 1subpaths.length - 1for (le ... h);\n  }isNested = false;const s ... ths[i];subpath ... aths[i]i === l ... ubpath)i === last && vali === last!/\D/.test(subpath)/\D/.test(subpath)/\D/.test\DDval.$is ... ntArrayval = v ... maType;val = v ... emaTypeval.$em ... emaTypeval ins ... s.Arrayval = val.caster;val = val.casterval.casterval = undefined;val = undefinedif (!/\ ... ;\n    }val ins ... == lasti !== last!(val && val.schema)(val && val.schema)val && val.schemaconst t ... bpath);val.sch ... ubpath)val.schema.pathTypeisNeste ... sted');isNeste ... ested')(type === 'nested')type === 'nested'val = v ... bpath);val = v ... ubpath)val.schema.pathself.su ...  = val;self.su ... ] = valself.su ... anPath]self.subpathsif (val ... l';\n  }if (isN ... d';\n  }{\n  get ... ath];\n}getPosi ... nPath);return  ... nPath];Schema. ... e.queuethis.ca ... args]);this.ca ...  args])this.callQueue.pushSchema.prototype.preconst r ... ts, 1);remaini ... nts, 1)name.test(fn)name.testthis.pr ... Args));this.pr ... gArgs))this.pre.applythis.pre[fn].co ... ngArgs)[fn].concat[fn]Array.isArray(name)[el].co ... ngArgs)[el].concat[el]this.s. ... ments);this.s. ... uments)this.s. ... e.applythis.s.hooks.preSchema. ... pe.postthis.po ... Args));this.po ... gArgs))this.post.applythis.postthis.s. ... t.applythis.s.hooks.postSchema. ... .plugin'First  ... ) + '"''First  ... eof fn)'First  ... 'got "''First  ... tion, 'First param to `schema.plugin()` must be a function, (typeof fn)opts && ... plicateif (plu ...       }plugin.fn === fnplugin.fnthis.pl ... pts });this.pl ... opts }){ fn: f ...  opts }fn: fnopts: optsfn(this, opts);fn(this, opts)Schema. ... .methodthis.me ... ame[i];this.me ... name[i]this.methods[i]name[i]this.me ... ptions)this.me ... ions[i]this.me ... ] = fn;this.me ... e] = fnthis.methods[name]this.me ... s[name]Schema. ... .staticif (typ ... fn;\n  }this.st ... ame[i];this.st ... name[i]this.statics[i]{\n    t ... fn;\n  }this.st ... ] = fn;this.st ... e] = fnthis.statics[name]Schema. ... e.index{\n  fie ... this;\n}fields  ...  = {});(fields = {})options ...  = {});options ... s = {})(options = {}){\n    u ... s);\n  }this.aliases[key]utils.r ... s[key])utils.renameObjKeyfields[ ... = 'asc'fields[ ... ending'fields[field] = 1;fields[field] = 1fields[ ...  'desc'fields[field] = -1;fields[field] = -1const existingIndexoptions ... fields)options.name == nullexistin ... == nullexistin ... 1].nameexistingIndex[1]isIndex ... fields)existingIndex[0]utils.w ... ion.`);utils.w ... tion.`)`Duplic ... ition.`Duplica ... dex on JSON.st ... fields) found. ... nition.this._i ... ions]);this._i ... tions])this._indexes.push[fields, options]Schema.prototype.set{ mode: ...  tags }mode: h ... (value)handleR ... (value)typeof value[0]value[0]this.op ...      };this.op ...       }mode: h ... lue[0])handleR ... lue[0])tags: value[1]value[1]this._u ... s[key];this._u ... ns[key]this.se ... value);this.se ... (value)case '_ ...  break;value & ... ['_id']!value  ... '].auto!value  ... != nullthis.pa ... '].autothis.remove('_id');this.remove('_id')this.removeif (key ... });\n  }key === 'strict'_propag ... lue });_propag ... alue })_propag ... Schemas{ strict: value }strict: valuekey === ... tQuery'{ stric ... value }strictQuery: valuekey === 'toObject'value = ... alue };value = { ...value }{ ...value }...valuedelete  ... nsform;delete  ... ansformvalue.transform{ toObject: value }toObject: valuekey === 'toJSON'{ toJSON: value }toJSON: valuebaseSch ... Schemasconst { schema }{ schema }!schema ... Createdschema. ... CreatedObject. ... tions);_propag ... tions);_propag ... ptions)Schema. ... ey];\n};Schema. ... key];\n}Schema.prototype.getfunctio ... key];\n}{\n  ret ... key];\n}const i ... t(' ');indexTy ... it(' ')'2d 2ds ... it(' ')'2d 2ds ... '.split'2d 2ds ... d text'2d 2dsphere hashed textget: fu ... es;\n  }functio ... es;\n  }return indexTypes;set: fu ... ');\n  }new Err ... Types')'Cannot ... xTypes'Cannot overwrite Schema.indexTypesCannot overwrite SchemaSchema. ... is);\n};Schema. ... his);\n}Schema. ... indexes{\n  ret ... his);\n}getIndexes(this)Schema. ... me];\n};Schema. ... ame];\n}Schema. ... virtualif (uti ... al;\n  }new Err ... ption')'Refere ... option'Reference virtuals require `localField` optionReference virtuals require `foreignField` optionconst v ... (name);virtual ... l(name)this.virtual(name)virtual ... ptions;this.pr ...     });this.pr ... \n    })if (mpa ...       }mpath.has(name, obj)mpath.hasconst _ ... , obj);_v = mp ... e, obj)mpath.get(name, obj)!this.$ ... irtualsthis.$$ ... s = {};this.$$ ... ls = {}this.$$ ...     _v;this.$$ ...      _vthis.$$ ... s[name]Array.i ...      _vArray.isArray(_v)_v[0]this.$$ ... : [_v];this.$$ ...  : [_v]Array.i ...  : [_v]_v == n ...  : [_v][_v]opts?.h ... s.countopts?.h ... tedDocs!options.countconst m ... (this);modelNa ... e(this)virtual ... e(this)const p ... [name];!Array. ... Val.$__!Array. ... tedVal)Array.i ... tedVal)!populatedVal.$__populatedVal.$__modelNa ... h === 1modelNames?.lengthconst P ... es[0]);Populat ... mes[0])this.db ... mes[0])modelNames[0]this.$$ ... edVal);this.$$ ... tedVal)Populat ... tedVal)Populat ... hydratei < pop ... .lengthpopulatedVal.length!populatedVal[i].$__populatedVal[i].$__populatedVal[i]populat ... rue });populat ... true })Populat ... true })const f ... nField;this.$p ...      );this.$p ...       )populat ... Field))populatedVal.mapdoc =>  ... nField)doc ==  ... nField)doc.get ... nField){ popul ... Model }populat ... teModelmpath.u ... , obj);mpath.u ... e, obj)virtual ...     });virtual ...      })virtual.\n      setsetPopu ...       )typeof options.getvirtual ... s.get);virtual ... ns.get)this.pa ... == nullthis.paths[cur]this.pa ... eNestedthis.pa ... ntArraythis.pa ... virtualthis.pa ... .schemathis.pa ... hemaMapparts.s ... 2).joinparts.slice(i + 2)i + 2this.pa ...  'real'this.pathType(name)this.pathType'Virtua ... schema''Virtua ... e + '"''Virtua ...  + nameVirtual path "' confl ... schema' conflicts with a real path in the schemavirtual ... .tree);virtual ... s.tree)virtuals[name]parts.r ... s.tree)parts.reducefunctio ... t];\n  }{\n    m ... t];\n  }mem[par ...  : {});mem[par ...   : {})mem[part](mem[pa ...   : {})mem[par ...    : {}(i ===  ...    : {}(i ===  ... th - 1)return mem[part];options ... ToArraypath =  ... n('.'))this.pa ... n('.'))parts.slice(0, -1)path && ... seArraypath.$i ... seArraypath.vi ... ptions)path.virtualparts[p ... th - 1]throw n ... rray`);new Mon ... array`)`Path " ...  array`Schema. ... ualpath{\n  ret ... null;\n}this.vi ...  : nullthis.vi ... y(name)Schema. ... .removeif (typ ... h];\n  }{\n    p ... h];\n  }path = [path];path = [path]path.fo ...  this);path.fo ... , this)this.pa ... d[name]this.path(name)!this.nested[name]this.nested[name]const a ... sted));allKeys ... ested))Object. ... ested))name + '.'_delete ...  path);_delete ... , path)delete  ... d[name]_delete ...  name);_delete ... , name)this.paths[name]this._r ... (name);this._r ... d(name)functio ... ast];\n}{\n  con ... ast];\n}last = pieces.pop()pieces.pop()pieces.poplet bra ... a.tree;branch = schema.treefor (co ... e];\n  }{\n    b ... e];\n  }branch  ... piece];branch  ... [piece]branch[piece]delete branch[last];delete branch[last]Schema. ... Virtualthis.vi ... irtual]throw n ... ist.`);new Mon ... xist.`)`Attemp ... exist.`Attempt ... rtual "" that  ...  exist.delete  ... rtual];delete  ... irtual]this.paths[virtual]mpath.u ... .tree);mpath.u ... s.tree)this.tree[virtual]Schema. ... adClassif (mod ... is;\n  }model = ... otype')model = ... ototypemodel.p ... otype')model.p ... roperty'$isMon ... totype'isMongooseModelPrototypeisMongooseDocumentPrototypethis.lo ... sOnly);this.lo ... lsOnly)this.loadClassObject. ... (model)if (!vi ... s);\n  }!virtualsOnlyObject. ...  this);name.ma ... o__)$/)name.match/^(leng ... to__)$/^(length|name|prototype|constructor|__proto__)$(length|name|prototype|constructor|__proto__)length|name|prototype|constructor|__proto__const p ...  name);prop =  ... , name)Object. ... , name)prop.ha ... value')prop.hasOwnPropertythis.st ... .value)this.staticprop.valueif (nam ... ;\n    }name.ma ... tor)$/)^(constructor)$(constructor)const m ...  name);method  ... , name)if (!vi ... }\n    }typeof method.valuemethod.valuethis.me ... value);this.me ... .value)this.methodtypeof method.getmethod.getthis.vi ... s = [];this.vi ... rs = []this.vi ... gettersthis.vi ... d.get);this.vi ... od.get)this.vi ... me).gettypeof method.setmethod.setthis.vi ... settersthis.vi ... d.set);this.vi ... od.set)this.vi ... me).setSchema. ... tSchema{\n  con ... his);\n}_this.path(path)const r ... h = [];resultPath = []{\n    p ... ma;\n  }pathsch ... = path;pathsch ...  = pathpathschema.$fullPathresultP ... ypath);resultP ... rypath)resultPath.pushfoundsc ... s.Mixedfoundsc ... n('.');foundsc ... in('.')foundsc ... ullPathresultPath.join('.')resultPath.joinp + 1 = ... ts[p]))p + 1 = ... emaType(parts[ ... ts[p]))parts[p ... rts[p])isArray ... rts[p])ret = s ... chema);ret = s ... schema)search( ... schema)if (p > ...       }p >= parts.lengthp + 1 > ... .lengthfoundsc ... .schemaparts[i ... rts[i])isArray ... rts[i])numberR ... rts[i])parts[i] = '$';parts[i] = '$'return  ... _this);search(parts, _this)if (pat ... l';\n  }let p = ... rypath;return  ... xed' };{ schem ... ixed' }schema: foundschemapathType: 'mixed'p === p ... gth - 1return  ... ted' };{ schem ... sted' }pathType: 'nested'pathTyp ... 'array'foundsc ... 'array'return  ... eal' };{ schem ... real' }pathType: 'real'p === p ... rypath]p === parts.lengthschema. ... rypath]schema: schemareturn  ... ned' };{ schem ... ined' }schema: ...  schemafoundsc ...  schemasearch( ...  _this)Schema. ... ror;\n};Schema. ... rror;\n}Schema. ... eyErrorif (!th ... or;\n  }!this._ ... sByPaththis._d ... sByPatherror.c ... = 11001error.code !== 11000error.codeerror.code !== 11001if (err ... });\n  }error.k ... != nullerror.keyPatternconst k ... attern;keyPatt ... Patternconst k ... ttern);keys =  ... attern)Object. ... attern)keys.length !== 1!this._ ... rstKey)this._d ... rstKey)return  ... ror });new Mon ... rror })this._d ... rstKey]{ cause: error }cause: errorfunctio ... ']');\n}{\n  ret ... ']');\n}return  ... h(']');piece.s ... th(']')piece.s ... h('$[')piece.startsWithpiece.endsWith(']')piece.endsWithSchema. ...  });\n};Schema. ... e });\n}Schema. ... Compile{\n  thi ... e });\n}this.pl ... rue });this.pl ... true })this.pluginSchema. ... ult;\n};Schema. ... sult;\n}Schema. ... NSchemaconst u ...  false;useBson ... ? falseconst r ... : {} };result  ... s: {} }useBson ... s: {} }{ requi ... s: {} }required: []{ type: ... s: {} }type: 'object'schemaT ...  !== -1schemaT ... f('$*')schemaT ... indexOfschemaT ... litPathconst i ... th > 1;isNeste ... gth > 1schemaT ... gth > 1schemaT ... .lengthlet jso ... result;jsonSch ...  resulti < sch ... gth - 1schemaT ... gth - 1const s ... ath[i];subpath ... Path[i]schemaT ... Path[i]if (jso ...       }jsonSch ... == nulljsonSch ... ubpath]jsonSch ... pertiesjsonSch ...      };jsonSch ...       }useBson ...       }['object', 'null']type: [ ... 'null']jsonSch ... bpath];lastSub ... th - 1]schemaT ... th - 1]isRequired = falseif (!js ...       }!jsonSc ... equiredjsonSch ... equiredjsonSch ... d = [];jsonSch ... ed = []jsonSch ... '_id');jsonSch ... ('_id')jsonSch ... ed.pushisRequired = true;isRequired = trueschemaT ... nction'schemaT ... equiredjsonSch ... bpath);jsonSch ... ubpath)jsonSch ... tions);jsonSch ... ptions)schemaT ... NSchemaschemaT ... ns.enumjsonSch ...  null];jsonSch ... , null]jsonSch ... h].enumisRequi ... , null][...sch ... , null]...sche ... ns.enumif (res ... ed;\n  }result.required{\n    d ... ed;\n  }delete  ... quired;delete  ... equiredmodule. ...  Schemaexports = SchemaSchema. ... ndex');Schema. ... index')/home/insomnia/repos/mongoose/lib/schemaType.js
 * SchemaType constructor. Do **not** instantiate `SchemaType` directly.
 * Mongoose converts your schema paths into SchemaTypes automatically.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String });
 *     schema.path('name') instanceof SchemaType; // true
 *
 * @param {String} path
 * @param {SchemaTypeOptions} [options] See [SchemaTypeOptions docs](https://mongoosejs.com/docs/api/schematypeoptions.html)
 * @param {String} [instance]
 * @api public
  { unique: true, index: true }// { un ...  true } Special case so we don't screw up array defaults, see gh-5780// Spec ... gh-5780
 * The class that Mongoose uses internally to instantiate this SchemaType's `options` property.
 * @memberOf SchemaType
 * @instance
 * @api private
 
 * The path to this SchemaType in a Schema.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String });
 *     schema.path('name').path; // 'name'
 *
 * @property path
 * @api public
 * @memberOf SchemaType
 
 * The validators that Mongoose should run to validate properties at this SchemaType's path.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: { type: String, required: true } });
 *     schema.path('name').validators.length; // 1, the `required` validator
 *
 * @property validators
 * @api public
 * @memberOf SchemaType
 
 * True if this SchemaType has a required validator. False otherwise.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: { type: String, required: true } });
 *     schema.path('name').isRequired; // true
 *
 *     schema.path('name').required(false);
 *     schema.path('name').isRequired; // false
 *
 * @property isRequired
 * @api public
 * @memberOf SchemaType
 
 * Split the current dottet path into segments
 *
 * @return {String[]|undefined}
 * @api private
 
 * Get/set the function used to cast arbitrary values to this type.
 *
 * #### Example:
 *
 *     // Disallow `null` for numbers, and don't try to cast any values to
 *     // numbers, so even strings like '123' will cause a CastError.
 *     mongoose.Number.cast(function(v) {
 *       assert.ok(v === undefined || typeof v === 'number');
 *       return v;
 *     });
 *
 * @param {Function|false} caster Function that casts arbitrary values to this type, or throws an error if casting failed
 * @return {Function}
 * @static
 * @memberOf SchemaType
 * @function cast
 * @api public
 
 * Get/set the function used to cast arbitrary values to this particular schematype instance.
 * Overrides `SchemaType.cast()`.
 *
 * #### Example:
 *
 *     // Disallow `null` for numbers, and don't try to cast any values to
 *     // numbers, so even strings like '123' will cause a CastError.
 *     const number = new mongoose.Number('mypath', {});
 *     number.cast(function(v) {
 *       assert.ok(v === undefined || typeof v === 'number');
 *       return v;
 *     });
 *
 * @param {Function|false} caster Function that casts arbitrary values to this type, or throws an error if casting failed
 * @return {Function}
 * @memberOf SchemaType
 * @api public
 
 * The function that Mongoose calls to cast arbitrary values to this SchemaType.
 *
 * @param {Object} value value to cast
 * @param {Document} doc document that triggers the casting
 * @param {Boolean} init
 * @api public
 
 * Sets a default option for this schema type.
 *
 * #### Example:
 *
 *     // Make all strings be trimmed by default
 *     mongoose.SchemaTypes.String.set('trim', true);
 *
 * @param {String} option The name of the option you'd like to set (e.g. trim, lowercase, etc...)
 * @param {Any} value The value of the option you'd like to set.
 * @return {void}
 * @static
 * @memberOf SchemaType
 * @function set
 * @api public
 
 * Attaches a getter for all instances of this schema type.
 *
 * #### Example:
 *
 *     // Make all numbers round down
 *     mongoose.Number.get(function(v) { return Math.floor(v); });
 *
 * @param {Function} getter
 * @return {this}
 * @static
 * @memberOf SchemaType
 * @function get
 * @api public
 
 * Sets a default value for this SchemaType.
 *
 * #### Example:
 *
 *     const schema = new Schema({ n: { type: Number, default: 10 })
 *     const M = db.model('M', schema)
 *     const m = new M;
 *     console.log(m.n) // 10
 *
 * Defaults can be either `functions` which return the value to use as the default or the literal value itself. Either way, the value will be cast based on its schema type before being set during document creation.
 *
 * #### Example:
 *
 *     // values are cast:
 *     const schema = new Schema({ aNumber: { type: Number, default: 4.815162342 }})
 *     const M = db.model('M', schema)
 *     const m = new M;
 *     console.log(m.aNumber) // 4.815162342
 *
 *     // default unique objects for Mixed types:
 *     const schema = new Schema({ mixed: Schema.Types.Mixed });
 *     schema.path('mixed').default(function () {
 *       return {};
 *     });
 *
 *     // if we don't use a function to return object literals for Mixed defaults,
 *     // each document will receive a reference to the same object literal creating
 *     // a "shared" object instance:
 *     const schema = new Schema({ mixed: Schema.Types.Mixed });
 *     schema.path('mixed').default({});
 *     const M = db.model('M', schema);
 *     const m1 = new M;
 *     m1.mixed.added = 1;
 *     console.log(m1.mixed); // { added: 1 }
 *     const m2 = new M;
 *     console.log(m2.mixed); // { added: 1 }
 *
 * @param {Function|any} val The default value to set
 * @return {Any|undefined} Returns the set default value.
 * @api public
 
 * Declares the index options for this schematype.
 *
 * #### Example:
 *
 *     const s = new Schema({ name: { type: String, index: true })
 *     const s = new Schema({ name: { type: String, index: -1 })
 *     const s = new Schema({ loc: { type: [Number], index: 'hashed' })
 *     const s = new Schema({ loc: { type: [Number], index: '2d', sparse: true })
 *     const s = new Schema({ loc: { type: [Number], index: { type: '2dsphere', sparse: true }})
 *     const s = new Schema({ date: { type: Date, index: { unique: true, expires: '1d' }})
 *     s.path('my.path').index(true);
 *     s.path('my.date').index({ expires: 60 });
 *     s.path('my.path').index({ unique: true, sparse: true });
 *
 * #### Note:
 *
 * _Indexes are created [in the background](https://www.mongodb.com/docs/manual/core/index-creation/#index-creation-background)
 * by default. If `background` is set to `false`, MongoDB will not execute any
 * read/write operations you send until the index build.
 * Specify `background: false` to override Mongoose's default._
 *
 * @param {Object|Boolean|String|Number} options
 * @return {SchemaType} this
 * @api public
 
 * Declares an unique index.
 *
 * #### Example:
 *
 *     const s = new Schema({ name: { type: String, unique: true } });
 *     s.path('name').index({ unique: true });
 *
 * _NOTE: violating the constraint returns an `E11000` error from MongoDB when saving, not a Mongoose validation error._
 *
 * You can optionally specify an error message to replace MongoDB's default `E11000 duplicate key error` message.
 * The following will throw a "Email must be unique" error if `save()`, `updateOne()`, `updateMany()`, `replaceOne()`,
 * `findOneAndUpdate()`, or `findOneAndReplace()` throws a duplicate key error:
 *
 * ```javascript
 * new Schema({
 *   email: {
 *     type: String,
 *     unique: [true, 'Email must be unique']
 *   }
 * });
 * ```
 *
 * Note that the above syntax does **not** work for `bulkWrite()` or `insertMany()`. `bulkWrite()` and `insertMany()`
 * will still throw MongoDB's default `E11000 duplicate key error` message.
 *
 * @param {Boolean} value
 * @param {String} [message]
 * @return {SchemaType} this
 * @api public
 
 * Declares a full text index.
 *
 * ### Example:
 *
 *      const s = new Schema({ name : { type: String, text : true } })
 *      s.path('name').index({ text : true });
 *
 * @param {Boolean} bool
 * @return {SchemaType} this
 * @api public
 
 * Declares a sparse index.
 *
 * #### Example:
 *
 *     const s = new Schema({ name: { type: String, sparse: true } });
 *     s.path('name').index({ sparse: true });
 *
 * @param {Boolean} bool
 * @return {SchemaType} this
 * @api public
 
 * Defines this path as immutable. Mongoose prevents you from changing
 * immutable paths unless the parent document has [`isNew: true`](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()).
 *
 * #### Example:
 *
 *     const schema = new Schema({
 *       name: { type: String, immutable: true },
 *       age: Number
 *     });
 *     const Model = mongoose.model('Test', schema);
 *
 *     await Model.create({ name: 'test' });
 *     const doc = await Model.findOne();
 *
 *     doc.isNew; // false
 *     doc.name = 'new name';
 *     doc.name; // 'test', because `name` is immutable
 *
 * Mongoose also prevents changing immutable properties using `updateOne()`
 * and `updateMany()` based on [strict mode](https://mongoosejs.com/docs/guide.html#strict).
 *
 * #### Example:
 *
 *     // Mongoose will strip out the `name` update, because `name` is immutable
 *     Model.updateOne({}, { $set: { name: 'test2' }, $inc: { age: 1 } });
 *
 *     // If `strict` is set to 'throw', Mongoose will throw an error if you
 *     // update `name`
 *     const err = await Model.updateOne({}, { name: 'test2' }, { strict: 'throw' }).
 *       then(() => null, err => err);
 *     err.name; // StrictModeError
 *
 *     // If `strict` is `false`, Mongoose allows updating `name` even though
 *     // the property is immutable.
 *     Model.updateOne({}, { name: 'test2' }, { strict: false });
 *
 * @param {Boolean} bool
 * @return {SchemaType} this
 * @see isNew https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()
 * @api public
 
 * Defines a custom function for transforming this path when converting a document to JSON.
 *
 * Mongoose calls this function with one parameter: the current `value` of the path. Mongoose
 * then uses the return value in the JSON output.
 *
 * #### Example:
 *
 *     const schema = new Schema({
 *       date: { type: Date, transform: v => v.getFullYear() }
 *     });
 *     const Model = mongoose.model('Test', schema);
 *
 *     await Model.create({ date: new Date('2016-06-01') });
 *     const doc = await Model.findOne();
 *
 *     doc.date instanceof Date; // true
 *
 *     doc.toJSON().date; // 2016 as a number
 *     JSON.stringify(doc); // '{"_id":...,"date":2016}'
 *
 * @param {Function} fn
 * @return {SchemaType} this
 * @api public
 
 * Adds a setter to this schematype.
 *
 * #### Example:
 *
 *     function capitalize (val) {
 *       if (typeof val !== 'string') val = '';
 *       return val.charAt(0).toUpperCase() + val.substring(1);
 *     }
 *
 *     // defining within the schema
 *     const s = new Schema({ name: { type: String, set: capitalize }});
 *
 *     // or with the SchemaType
 *     const s = new Schema({ name: String })
 *     s.path('name').set(capitalize);
 *
 * Setters allow you to transform the data before it gets to the raw mongodb
 * document or query.
 *
 * Suppose you are implementing user registration for a website. Users provide
 * an email and password, which gets saved to mongodb. The email is a string
 * that you will want to normalize to lower case, in order to avoid one email
 * having more than one account -- e.g., otherwise, avenue@q.com can be registered for 2 accounts via avenue@q.com and AvEnUe@Q.CoM.
 *
 * You can set up email lower case normalization easily via a Mongoose setter.
 *
 *     function toLower(v) {
 *       return v.toLowerCase();
 *     }
 *
 *     const UserSchema = new Schema({
 *       email: { type: String, set: toLower }
 *     });
 *
 *     const User = db.model('User', UserSchema);
 *
 *     const user = new User({email: 'AVENUE@Q.COM'});
 *     console.log(user.email); // 'avenue@q.com'
 *
 *     // or
 *     const user = new User();
 *     user.email = 'Avenue@Q.com';
 *     console.log(user.email); // 'avenue@q.com'
 *     User.updateOne({ _id: _id }, { $set: { email: 'AVENUE@Q.COM' } }); // update to 'avenue@q.com'
 *
 *     // Setters also transform query filters
 *     const user = await User.find({ email: 'AVENUE@Q.COM' }); // query for 'avenue@q.com'
 *
 * As you can see above, setters allow you to transform the data before it
 * stored in MongoDB, or before executing a query.
 *
 * _NOTE: we could have also just used the built-in [`lowercase: true` SchemaType option](https://mongoosejs.com/docs/api/schemastringoptions.html#SchemaStringOptions.prototype.lowercase) instead of defining our own function._
 *
 *     new Schema({ email: { type: String, lowercase: true }})
 *
 * Setters are also passed a second argument, the schematype on which the setter was defined. This allows for tailored behavior based on options passed in the schema.
 *
 *     function inspector (val, priorValue, schematype) {
 *       if (schematype.options.required) {
 *         return schematype.path + ' is required';
 *       } else {
 *         return val;
 *       }
 *     }
 *
 *     const VirusSchema = new Schema({
 *       name: { type: String, required: true, set: inspector },
 *       taxonomy: { type: String, set: inspector }
 *     })
 *
 *     const Virus = db.model('Virus', VirusSchema);
 *     const v = new Virus({ name: 'Parvoviridae', taxonomy: 'Parvovirinae' });
 *
 *     console.log(v.name);     // name is required
 *     console.log(v.taxonomy); // Parvovirinae
 *
 * You can also use setters to modify other properties on the document. If
 * you're setting a property `name` on a document, the setter will run with
 * `this` as the document. Be careful, in mongoose 5 setters will also run
 * when querying by `name` with `this` as the query.
 *
 *     const nameSchema = new Schema({ name: String, keywords: [String] });
 *     nameSchema.path('name').set(function(v) {
 *       // Need to check if `this` is a document, because in mongoose 5
 *       // setters will also run on queries, in which case `this` will be a
 *       // mongoose query object.
 *       if (this instanceof Document && v != null) {
 *         this.keywords = v.split(' ');
 *       }
 *       return v;
 *     });
 *
 * @param {Function} fn
 * @return {SchemaType} this
 * @api public
 
 * Adds a getter to this schematype.
 *
 * #### Example:
 *
 *     function dob (val) {
 *       if (!val) return val;
 *       return (val.getMonth() + 1) + "/" + val.getDate() + "/" + val.getFullYear();
 *     }
 *
 *     // defining within the schema
 *     const s = new Schema({ born: { type: Date, get: dob })
 *
 *     // or by retreiving its SchemaType
 *     const s = new Schema({ born: Date })
 *     s.path('born').get(dob)
 *
 * Getters allow you to transform the representation of the data as it travels from the raw mongodb document to the value that you see.
 *
 * Suppose you are storing credit card numbers and you want to hide everything except the last 4 digits to the mongoose user. You can do so by defining a getter in the following way:
 *
 *     function obfuscate (cc) {
 *       return '****-****-****-' + cc.slice(cc.length-4, cc.length);
 *     }
 *
 *     const AccountSchema = new Schema({
 *       creditCardNumber: { type: String, get: obfuscate }
 *     });
 *
 *     const Account = db.model('Account', AccountSchema);
 *
 *     Account.findById(id, function (err, found) {
 *       console.log(found.creditCardNumber); // '****-****-****-1234'
 *     });
 *
 * Getters are also passed a second argument, the schematype on which the getter was defined. This allows for tailored behavior based on options passed in the schema.
 *
 *     function inspector (val, priorValue, schematype) {
 *       if (schematype.options.required) {
 *         return schematype.path + ' is required';
 *       } else {
 *         return schematype.path + ' is not';
 *       }
 *     }
 *
 *     const VirusSchema = new Schema({
 *       name: { type: String, required: true, get: inspector },
 *       taxonomy: { type: String, get: inspector }
 *     })
 *
 *     const Virus = db.model('Virus', VirusSchema);
 *
 *     Virus.findById(id, function (err, virus) {
 *       console.log(virus.name);     // name is required
 *       console.log(virus.taxonomy); // taxonomy is not
 *     })
 *
 * @param {Function} fn
 * @return {SchemaType} this
 * @api public
 
 * Adds multiple validators for this document path.
 * Calls `validate()` for every element in validators.
 *
 * @param {Array<RegExp|Function|Object>} validators
 * @returns this
 
 * Adds validator(s) for this document path.
 *
 * Validators always receive the value to validate as their first argument and
 * must return `Boolean`. Returning `false` or throwing an error means
 * validation failed.
 *
 * The error message argument is optional. If not passed, the [default generic error message template](https://mongoosejs.com/docs/api/error.html#Error.messages) will be used.
 *
 * #### Example:
 *
 *     // make sure every value is equal to "something"
 *     function validator (val) {
 *       return val === 'something';
 *     }
 *     new Schema({ name: { type: String, validate: validator }});
 *
 *     // with a custom error message
 *
 *     const custom = [validator, 'Uh oh, {PATH} does not equal "something".']
 *     new Schema({ name: { type: String, validate: custom }});
 *
 *     // adding many validators at a time
 *
 *     const many = [
 *         { validator: validator, message: 'uh oh' }
 *       , { validator: anotherValidator, message: 'failed' }
 *     ]
 *     new Schema({ name: { type: String, validate: many }});
 *
 *     // or utilizing SchemaType methods directly:
 *
 *     const schema = new Schema({ name: 'string' });
 *     schema.path('name').validate(validator, 'validation of `{PATH}` failed with value `{VALUE}`');
 *
 * #### Error message templates:
 *
 * Below is a list of supported template keywords:
 *
 * - PATH: The schema path where the error is being triggered.
 * - VALUE: The value assigned to the PATH that is triggering the error.
 * - KIND: The validation property that triggered the error i.e. required.
 * - REASON: The error object that caused this error if there was one.
 *
 * If Mongoose's built-in error message templating isn't enough, Mongoose
 * supports setting the `message` property to a function.
 *
 *     schema.path('name').validate({
 *       validator: function(v) { return v.length > 5; },
 *       // `errors['name']` will be "name must have length 5, got 'foo'"
 *       message: function(props) {
 *         return `${props.path} must have length 5, got '${props.value}'`;
 *       }
 *     });
 *
 * To bypass Mongoose's error messages and just copy the error message that
 * the validator throws, do this:
 *
 *     schema.path('name').validate({
 *       validator: function() { throw new Error('Oops!'); },
 *       // `errors['name'].message` will be "Oops!"
 *       message: function(props) { return props.reason.message; }
 *     });
 *
 * #### Asynchronous validation:
 *
 * Mongoose supports validators that return a promise. A validator that returns
 * a promise is called an _async validator_. Async validators run in
 * parallel, and `validate()` will wait until all async validators have settled.
 *
 *     schema.path('name').validate({
 *       validator: function (value) {
 *         return new Promise(function (resolve, reject) {
 *           resolve(false); // validation failed
 *         });
 *       }
 *     });
 *
 * You might use asynchronous validators to retreive other documents from the database to validate against or to meet other I/O bound validation needs.
 *
 * Validation occurs `pre('save')` or whenever you manually execute [document#validate](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate()).
 *
 * If validation fails during `pre('save')` and no callback was passed to receive the error, an `error` event will be emitted on your Models associated db [connection](https://mongoosejs.com/docs/api/connection.html#Connection()), passing the validation error object along.
 *
 *     const conn = mongoose.createConnection(..);
 *     conn.on('error', handleError);
 *
 *     const Product = conn.model('Product', yourSchema);
 *     const dvd = new Product(..);
 *     dvd.save(); // emits error on the `conn` above
 *
 * If you want to handle these errors at the Model level, add an `error`
 * listener to your Model as shown below.
 *
 *     // registering an error listener on the Model lets us handle errors more locally
 *     Product.on('error', handleError);
 *
 * @param {RegExp|Function|Object} obj validator function, or hash describing options
 * @param {Function} [obj.validator] validator function. If the validator function returns `undefined` or a truthy value, validation succeeds. If it returns [falsy](https://masteringjs.io/tutorials/fundamentals/falsy) (except `undefined`) or throws an error, validation fails.
 * @param {String|Function} [obj.message] optional error message. If function, should return the error message as a string
 * @param {Boolean} [obj.propsParameter=false] If true, Mongoose will pass the validator properties object (with the `validator` function, `message`, etc.) as the 2nd arg to the validator function. This is disabled by default because many validators [rely on positional args](https://github.com/chriso/validator.js#validators), so turning this on may cause unpredictable behavior in external validators.
 * @param {String|Function} [errorMsg] optional error message. If function, should return the error message as a string
 * @param {String} [type] optional validator type
 * @return {SchemaType} this
 * @api public
 
 * Adds a required validator to this SchemaType. The validator gets added
 * to the front of this SchemaType's validators array using `unshift()`.
 *
 * #### Example:
 *
 *     const s = new Schema({ born: { type: Date, required: true })
 *
 *     // or with custom error message
 *
 *     const s = new Schema({ born: { type: Date, required: '{PATH} is required!' })
 *
 *     // or with a function
 *
 *     const s = new Schema({
 *       userId: ObjectId,
 *       username: {
 *         type: String,
 *         required: function() { return this.userId != null; }
 *       }
 *     })
 *
 *     // or with a function and a custom message
 *     const s = new Schema({
 *       userId: ObjectId,
 *       username: {
 *         type: String,
 *         required: [
 *           function() { return this.userId != null; },
 *           'username is required if id is specified'
 *         ]
 *       }
 *     })
 *
 *     // or through the path API
 *
 *     s.path('name').required(true);
 *
 *     // with custom error messaging
 *
 *     s.path('name').required(true, 'grrr :( ');
 *
 *     // or make a path conditionally required based on a function
 *     const isOver18 = function() { return this.age >= 18; };
 *     s.path('voterRegistrationId').required(isOver18);
 *
 * The required validator uses the SchemaType's `checkRequired` function to
 * determine whether a given value satisfies the required validator. By default,
 * a value satisfies the required validator if `val != null` (that is, if
 * the value is not null nor undefined). However, most built-in mongoose schema
 * types override the default `checkRequired` function:
 *
 * @param {Boolean|Function|Object} required enable/disable the validator, or function that returns required boolean, or options object
 * @param {Boolean|Function} [options.isRequired] enable/disable the validator, or function that returns required boolean
 * @param {Function} [options.ErrorConstructor] custom error constructor. The constructor receives 1 parameter, an object containing the validator properties.
 * @param {String} [message] optional custom error message
 * @return {SchemaType} this
 * @see Customized Error Messages https://mongoosejs.com/docs/api/error.html#Error.messages
 * @see SchemaArray#checkRequired https://mongoosejs.com/docs/api/schemaarray.html#SchemaArray.prototype.checkRequired()
 * @see SchemaBoolean#checkRequired https://mongoosejs.com/docs/api/schemaboolean.html#SchemaBoolean.prototype.checkRequired()
 * @see SchemaBuffer#checkRequired https://mongoosejs.com/docs/api/schemabuffer.html#SchemaBuffer.prototype.checkRequired()
 * @see SchemaNumber#checkRequired https://mongoosejs.com/docs/api/schemanumber.html#SchemaNumber.prototype.checkRequired()
 * @see SchemaObjectId#checkRequired https://mongoosejs.com/docs/api/schemaobjectid.html#ObjectId.prototype.checkRequired()
 * @see SchemaString#checkRequired https://mongoosejs.com/docs/api/schemastring.html#SchemaString.prototype.checkRequired()
 * @api public
  no validation when this path wasn't selected in the query.// no v ...  query. `$cachedRequired` gets set in `_evaluateRequiredFunctions()` so we// `$ca ... ` so we don't call required functions multiple times in one validate call// don' ... te call See gh-6801// See gh-6801
 * Set the model that this path refers to. This is the option that [populate](https://mongoosejs.com/docs/populate.html)
 * looks at to determine the foreign collection it should query.
 *
 * #### Example:
 *
 *     const userSchema = new Schema({ name: String });
 *     const User = mongoose.model('User', userSchema);
 *
 *     const postSchema = new Schema({ user: mongoose.ObjectId });
 *     postSchema.path('user').ref('User'); // Can set ref to a model name
 *     postSchema.path('user').ref(User); // Or a model class
 *     postSchema.path('user').ref(() => 'User'); // Or a function that returns the model name
 *     postSchema.path('user').ref(() => User); // Or a function that returns the model class
 *
 *     // Or you can just declare the `ref` inline in your schema
 *     const postSchema2 = new Schema({
 *       user: { type: mongoose.ObjectId, ref: User }
 *     });
 *
 * @param {String|Model|Function} ref either a model name, a [Model](https://mongoosejs.com/docs/models.html), or a function that returns a model name or model.
 * @return {SchemaType} this
 * @api public
 
 * Gets the default value
 *
 * @param {Object} scope the scope which callback are executed
 * @param {Boolean} init
 * @return {Any} The Stored default value.
 * @api private
 
 * Applies setters without casting
 *
 * @param {Any} value
 * @param {Any} scope
 * @param {Boolean} init
 * @param {Any} priorVal
 * @param {Object} [options]
 * @instance
 * @api private
 
 * Applies setters
 *
 * @param {Object} value
 * @param {Object} scope
 * @param {Boolean} init
 * @return {Any}
 * @api private
  do not cast until all setters are applied #665// do n ... ed #665
 * Applies getters to a value
 *
 * @param {Object} value
 * @param {Object} scope
 * @return {Any}
 * @api private
 
 * Sets default `select()` behavior for this path.
 *
 * Set to `true` if this path should always be included in the results, `false` if it should be excluded by default. This setting can be overridden at the query level.
 *
 * #### Example:
 *
 *     T = db.model('T', new Schema({ x: { type: String, select: true }}));
 *     T.find(..); // field x will always be selected ..
 *     // .. unless overridden;
 *     T.find().select('-x').exec(callback);
 *
 * @param {Boolean} val
 * @return {SchemaType} this
 * @api public
 
 * Performs a validation of `value` using the validators declared for this SchemaType.
 *
 * @param {Any} value
 * @param {Function} callback
 * @param {Object} scope
 * @param {Object} [options]
 * @param {String} [options.path]
 * @return {Any} If no validators, returns the output from calling `fn`, otherwise no return
 * @api public
  Avoid non-object `validators`// Avoi ... dators`
 * Performs a validation of `value` using the validators declared for this SchemaType.
 *
 * #### Note:
 *
 * This method ignores the asynchronous validators.
 *
 * @param {Any} value
 * @param {Object} scope
 * @param {Object} [options]
 * @param {Object} [options.path]
 * @return {MongooseError|null}
 * @api private
  Skip any explicit async validators. Validators that return a promise// Skip ... promise will still run, but won't trigger any errors.// will ... errors. Skip any validators that return a promise, we can't handle those// Skip ... e those synchronously// synchronously
 * Determines if value is a valid Reference.
 *
 * @param {SchemaType} self
 * @param {Object} value
 * @param {Document} doc
 * @param {Boolean} init
 * @return {Boolean}
 * @api private
  fast path// fast path checks for// checks for - this populated with adhoc model and no ref was set in schema OR// - th ... hema OR - setting / pushing values after population// - se ... ulation buffers are objects too// buff ... cts too raw binary value from the db// raw  ...  the db might have deselected _id in population query// migh ... n query setting a populated path// sett ... ed path Handle the case where user directly sets a populated// Hand ... pulated path to a plain object; cast to the Model used in// path ... used in the population query.// the  ...  query.
 * Just like handleArray, except also allows `[]` because surprisingly
 * `$in: [1, []]` works fine
 * @api private
 
 * Contains the handlers for different query operators for this schema type.
 * For example, `$conditionalHandlers.$exists` is the function Mongoose calls to cast `$exists` filter operators.
 *
 * @property $conditionalHandlers
 * @memberOf SchemaType
 * @instance
 * @api public
 
 * Cast the given value with the given optional query operator.
 *
 * @param {String} [$conditional] query operator, like `$eq` or `$in`
 * @param {Any} val
 * @param {Query} context
 * @return {Any}
 * @api private
 
 * Set & Get the `checkRequired` function
 * Override the function the required validator uses to check whether a value
 * passes the `required` check. Override this on the individual SchemaType.
 *
 * #### Example:
 *
 *     // Use this to allow empty strings to pass the `required` validator
 *     mongoose.Schema.Types.String.checkRequired(v => typeof v === 'string');
 *
 * @param {Function} [fn] If set, will overwrite the current set function
 * @return {Function} The input `fn` or the already set function
 * @static
 * @memberOf SchemaType
 * @function checkRequired
 * @api public
 
 * Default check for if this path satisfies the `required` validator.
 *
 * @param {Any} val
 * @return {Boolean} `true` when the value is not `null`, `false` otherwise
 * @api private
 
 * Clone the current SchemaType
 *
 * @return {SchemaType} The cloned SchemaType instance
 * @api private
 
 * Returns the embedded schema type, if any. For arrays, document arrays, and maps, `getEmbeddedSchemaType()`
 * returns the schema type of the array's elements (or map's elements). For other types, `getEmbeddedSchemaType()`
 * returns `undefined`.
 *
 * #### Example:
 *
 *     const schema = new Schema({ name: String, tags: [String] });
 *     schema.path('name').getEmbeddedSchemaType(); // undefined
 *     schema.path('tags').getEmbeddedSchemaType(); // SchemaString { path: 'tags', ... }
 *
 * @returns {SchemaType} embedded schematype
 * @api public
 !
 * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
 *
 * @api private
 /*!\n *  ... ate\n */ eslint-disable-line no-unused-vars
 * Returns the BSON type that the schema corresponds to, for automatic encryption.
 * @api private
 './schema/operators/exists''./schema/operators/type''./helpers/schematype/handleImmutable''./helpers/isAsyncFunction''./helpers/isSimpleValidator'setOptionsForDefaults'setters'defaultOptionsKeysOptionscastFunction'" may not have `index` ''set to false and `unique` set to true''set to false and `sparse` set to true''$$context''Base SchemaType class does not implement a `cast()` function''defaultOptions''Cannot set default value of path `''` to a mongoose Schema instance.''" may not have `index` set to ''false and `unique` set to true''false and `text` set to true''false and `sparse` set to true''A setter must be a function.''A getter must be a function.'validateAll'Invalid validator. Received ('') ''. See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()'customOptionsMust pass callback function to doValidate(), got validatorPropertiespropsParameterownerPopulatedModelhandle$inConverting unsupported SchemaType to JSON Schema: SchemaType constructor. Do **not** instantiate `SchemaType` directly.
Mongoose converts your schema paths into SchemaTypes automatically.

#### Example:

const schema = new Schema({ name: String });
schema.path('name') instanceof SchemaType; // trueSee [SchemaTypeOptions docs](https://mongoosejs.com/docs/api/schematypeoptions.html)
SchemaTypeOptions=The class that Mongoose uses internally to instantiate this SchemaType's `options` property.The path to this SchemaType in a Schema.

#### Example:

const schema = new Schema({ name: String });
schema.path('name').path; // 'name'The validators that Mongoose should run to validate properties at this SchemaType's path.

#### Example:

const schema = new Schema({ name: { type: String, required: true } });
schema.path('name').validators.length; // 1, the `required` validatorTrue if this SchemaType has a required validator. False otherwise.

#### Example:

const schema = new Schema({ name: { type: String, required: true } });
schema.path('name').isRequired; // true

schema.path('name').required(false);
schema.path('name').isRequired; // falseSplit the current dottet path into segments(Array.<String>|undefined)Get/set the function used to cast arbitrary values to this type.

#### Example:

// Disallow `null` for numbers, and don't try to cast any values to
// numbers, so even strings like '123' will cause a CastError.
mongoose.Number.cast(function(v) {
assert.ok(v === undefined || typeof v === 'number');
return v;
});Function that casts arbitrary values to this type, or throws an error if casting failed
(Function|false)Get/set the function used to cast arbitrary values to this particular schematype instance.
Overrides `SchemaType.cast()`.

#### Example:

// Disallow `null` for numbers, and don't try to cast any values to
// numbers, so even strings like '123' will cause a CastError.
const number = new mongoose.Number('mypath', {});
number.cast(function(v) {
assert.ok(v === undefined || typeof v === 'number');
return v;
});The function that Mongoose calls to cast arbitrary values to this SchemaType.Sets a default option for this schema type.

#### Example:

// Make all strings be trimmed by default
mongoose.SchemaTypes.String.set('trim', true);Attaches a getter for all instances of this schema type.

#### Example:

// Make all numbers round down
mongoose.Number.get(function(v) { return Math.floor(v); });Sets a default value for this SchemaType.

#### Example:

const schema = new Schema({ n: { type: Number, default: 10 })
const M = db.model('M', schema)
const m = new M;
console.log(m.n) // 10

Defaults can be either `functions` which return the value to use as the default or the literal value itself. Either way, the value will be cast based on its schema type before being set during document creation.

#### Example:

// values are cast:
const schema = new Schema({ aNumber: { type: Number, default: 4.815162342 }})
const M = db.model('M', schema)
const m = new M;
console.log(m.aNumber) // 4.815162342

// default unique objects for Mixed types:
const schema = new Schema({ mixed: Schema.Types.Mixed });
schema.path('mixed').default(function () {
return {};
});

// if we don't use a function to return object literals for Mixed defaults,
// each document will receive a reference to the same object literal creating
// a "shared" object instance:
const schema = new Schema({ mixed: Schema.Types.Mixed });
schema.path('mixed').default({});
const M = db.model('M', schema);
const m1 = new M;
m1.mixed.added = 1;
console.log(m1.mixed); // { added: 1 }
const m2 = new M;
console.log(m2.mixed); // { added: 1 }The default value to set
(Function|any)Returns the set default value.
(Any|undefined)Declares the index options for this schematype.

#### Example:

const s = new Schema({ name: { type: String, index: true })
const s = new Schema({ name: { type: String, index: -1 })
const s = new Schema({ loc: { type: [Number], index: 'hashed' })
const s = new Schema({ loc: { type: [Number], index: '2d', sparse: true })
const s = new Schema({ loc: { type: [Number], index: { type: '2dsphere', sparse: true }})
const s = new Schema({ date: { type: Date, index: { unique: true, expires: '1d' }})
s.path('my.path').index(true);
s.path('my.date').index({ expires: 60 });
s.path('my.path').index({ unique: true, sparse: true });

#### Note:

_Indexes are created [in the background](https://www.mongodb.com/docs/manual/core/index-creation/#index-creation-background)
by default. If `background` is set to `false`, MongoDB will not execute any
read/write operations you send until the index build.
Specify `background: false` to override Mongoose's default._(Object|Boolean|String|Number)Declares an unique index.

#### Example:

const s = new Schema({ name: { type: String, unique: true } });
s.path('name').index({ unique: true });

_NOTE: violating the constraint returns an `E11000` error from MongoDB when saving, not a Mongoose validation error._

You can optionally specify an error message to replace MongoDB's default `E11000 duplicate key error` message.
The following will throw a "Email must be unique" error if `save()`, `updateOne()`, `updateMany()`, `replaceOne()`,
`findOneAndUpdate()`, or `findOneAndReplace()` throws a duplicate key error:

```javascript
new Schema({
email: {
type: String,
unique: [true, 'Email must be unique']
}
});
```

Note that the above syntax does **not** work for `bulkWrite()` or `insertMany()`. `bulkWrite()` and `insertMany()`
will still throw MongoDB's default `E11000 duplicate key error` message.Declares a full text index.

### Example:

const s = new Schema({ name : { type: String, text : true } })
s.path('name').index({ text : true });Declares a sparse index.

#### Example:

const s = new Schema({ name: { type: String, sparse: true } });
s.path('name').index({ sparse: true });Defines this path as immutable. Mongoose prevents you from changing
immutable paths unless the parent document has [`isNew: true`](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()).

#### Example:

const schema = new Schema({
name: { type: String, immutable: true },
age: Number
});
const Model = mongoose.model('Test', schema);

await Model.create({ name: 'test' });
const doc = await Model.findOne();

doc.isNew; // false
doc.name = 'new name';
doc.name; // 'test', because `name` is immutable

Mongoose also prevents changing immutable properties using `updateOne()`
and `updateMany()` based on [strict mode](https://mongoosejs.com/docs/guide.html#strict).

#### Example:

// Mongoose will strip out the `name` update, because `name` is immutable
Model.updateOne({}, { $set: { name: 'test2' }, $inc: { age: 1 } });

// If `strict` is set to 'throw', Mongoose will throw an error if you
// update `name`
const err = await Model.updateOne({}, { name: 'test2' }, { strict: 'throw' }).
then(() => null, err => err);
err.name; // StrictModeError

// If `strict` is `false`, Mongoose allows updating `name` even though
// the property is immutable.
Model.updateOne({}, { name: 'test2' }, { strict: false });isNew https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()
Defines a custom function for transforming this path when converting a document to JSON.

Mongoose calls this function with one parameter: the current `value` of the path. Mongoose
then uses the return value in the JSON output.

#### Example:

const schema = new Schema({
date: { type: Date, transform: v => v.getFullYear() }
});
const Model = mongoose.model('Test', schema);

await Model.create({ date: new Date('2016-06-01') });
const doc = await Model.findOne();

doc.date instanceof Date; // true

doc.toJSON().date; // 2016 as a number
JSON.stringify(doc); // '{"_id":...,"date":2016}'Adds a setter to this schematype.

#### Example:

function capitalize (val) {
if (typeof val !== 'string') val = '';
return val.charAt(0).toUpperCase() + val.substring(1);
}

// defining within the schema
const s = new Schema({ name: { type: String, set: capitalize }});

// or with the SchemaType
const s = new Schema({ name: String })
s.path('name').set(capitalize);

Setters allow you to transform the data before it gets to the raw mongodb
document or query.

Suppose you are implementing user registration for a website. Users provide
an email and password, which gets saved to mongodb. The email is a string
that you will want to normalize to lower case, in order to avoid one email
having more than one account -- e.g., otherwise, avenue@q.com can be registered for 2 accounts via avenue@q.com and AvEnUe@Q.CoM.

You can set up email lower case normalization easily via a Mongoose setter.

function toLower(v) {
return v.toLowerCase();
}

const UserSchema = new Schema({
email: { type: String, set: toLower }
});

const User = db.model('User', UserSchema);

const user = new User({email: 'AVENUE@Q.COM'});
console.log(user.email); // 'avenue@q.com'

// or
const user = new User();
user.email = 'Avenue@Q.com';
console.log(user.email); // 'avenue@q.com'
User.updateOne({ _id: _id }, { $set: { email: 'AVENUE@Q.COM' } }); // update to 'avenue@q.com'

// Setters also transform query filters
const user = await User.find({ email: 'AVENUE@Q.COM' }); // query for 'avenue@q.com'

As you can see above, setters allow you to transform the data before it
stored in MongoDB, or before executing a query.

_NOTE: we could have also just used the built-in [`lowercase: true` SchemaType option](https://mongoosejs.com/docs/api/schemastringoptions.html#SchemaStringOptions.prototype.lowercase) instead of defining our own function._

new Schema({ email: { type: String, lowercase: true }})

Setters are also passed a second argument, the schematype on which the setter was defined. This allows for tailored behavior based on options passed in the schema.

function inspector (val, priorValue, schematype) {
if (schematype.options.required) {
return schematype.path + ' is required';
} else {
return val;
}
}

const VirusSchema = new Schema({
name: { type: String, required: true, set: inspector },
taxonomy: { type: String, set: inspector }
})

const Virus = db.model('Virus', VirusSchema);
const v = new Virus({ name: 'Parvoviridae', taxonomy: 'Parvovirinae' });

console.log(v.name);     // name is required
console.log(v.taxonomy); // Parvovirinae

You can also use setters to modify other properties on the document. If
you're setting a property `name` on a document, the setter will run with
`this` as the document. Be careful, in mongoose 5 setters will also run
when querying by `name` with `this` as the query.

const nameSchema = new Schema({ name: String, keywords: [String] });
nameSchema.path('name').set(function(v) {
// Need to check if `this` is a document, because in mongoose 5
// setters will also run on queries, in which case `this` will be a
// mongoose query object.
if (this instanceof Document && v != null) {
this.keywords = v.split(' ');
}
return v;
});Adds a getter to this schematype.

#### Example:

function dob (val) {
if (!val) return val;
return (val.getMonth() + 1) + "/" + val.getDate() + "/" + val.getFullYear();
}

// defining within the schema
const s = new Schema({ born: { type: Date, get: dob })

// or by retreiving its SchemaType
const s = new Schema({ born: Date })
s.path('born').get(dob)

Getters allow you to transform the representation of the data as it travels from the raw mongodb document to the value that you see.

Suppose you are storing credit card numbers and you want to hide everything except the last 4 digits to the mongoose user. You can do so by defining a getter in the following way:

function obfuscate (cc) {
return '****-****-****-' + cc.slice(cc.length-4, cc.length);
}

const AccountSchema = new Schema({
creditCardNumber: { type: String, get: obfuscate }
});

const Account = db.model('Account', AccountSchema);

Account.findById(id, function (err, found) {
console.log(found.creditCardNumber); // '****-****-****-1234'
});

Getters are also passed a second argument, the schematype on which the getter was defined. This allows for tailored behavior based on options passed in the schema.

function inspector (val, priorValue, schematype) {
if (schematype.options.required) {
return schematype.path + ' is required';
} else {
return schematype.path + ' is not';
}
}

const VirusSchema = new Schema({
name: { type: String, required: true, get: inspector },
taxonomy: { type: String, get: inspector }
})

const Virus = db.model('Virus', VirusSchema);

Virus.findById(id, function (err, virus) {
console.log(virus.name);     // name is required
console.log(virus.taxonomy); // taxonomy is not
})Adds multiple validators for this document path.
Calls `validate()` for every element in validators.Array.<(RegExp|Function|Object)>(RegExp|Function|Object)Adds validator(s) for this document path.

Validators always receive the value to validate as their first argument and
must return `Boolean`. Returning `false` or throwing an error means
validation failed.

The error message argument is optional. If not passed, the [default generic error message template](https://mongoosejs.com/docs/api/error.html#Error.messages) will be used.

#### Example:

// make sure every value is equal to "something"
function validator (val) {
return val === 'something';
}
new Schema({ name: { type: String, validate: validator }});

// with a custom error message

const custom = [validator, 'Uh oh, {PATH} does not equal "something".']
new Schema({ name: { type: String, validate: custom }});

// adding many validators at a time

const many = [
{ validator: validator, message: 'uh oh' }
, { validator: anotherValidator, message: 'failed' }
]
new Schema({ name: { type: String, validate: many }});

// or utilizing SchemaType methods directly:

const schema = new Schema({ name: 'string' });
schema.path('name').validate(validator, 'validation of `{PATH}` failed with value `{VALUE}`');

#### Error message templates:

Below is a list of supported template keywords:

- PATH: The schema path where the error is being triggered.
- VALUE: The value assigned to the PATH that is triggering the error.
- KIND: The validation property that triggered the error i.e. required.
- REASON: The error object that caused this error if there was one.

If Mongoose's built-in error message templating isn't enough, Mongoose
supports setting the `message` property to a function.

schema.path('name').validate({
validator: function(v) { return v.length > 5; },
// `errors['name']` will be "name must have length 5, got 'foo'"
message: function(props) {
return `${props.path} must have length 5, got '${props.value}'`;
}
});

To bypass Mongoose's error messages and just copy the error message that
the validator throws, do this:

schema.path('name').validate({
validator: function() { throw new Error('Oops!'); },
// `errors['name'].message` will be "Oops!"
message: function(props) { return props.reason.message; }
});

#### Asynchronous validation:

Mongoose supports validators that return a promise. A validator that returns
a promise is called an _async validator_. Async validators run in
parallel, and `validate()` will wait until all async validators have settled.

schema.path('name').validate({
validator: function (value) {
return new Promise(function (resolve, reject) {
resolve(false); // validation failed
});
}
});

You might use asynchronous validators to retreive other documents from the database to validate against or to meet other I/O bound validation needs.

Validation occurs `pre('save')` or whenever you manually execute [document#validate](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate()).

If validation fails during `pre('save')` and no callback was passed to receive the error, an `error` event will be emitted on your Models associated db [connection](https://mongoosejs.com/docs/api/connection.html#Connection()), passing the validation error object along.

const conn = mongoose.createConnection(..);
conn.on('error', handleError);

const Product = conn.model('Product', yourSchema);
const dvd = new Product(..);
dvd.save(); // emits error on the `conn` above

If you want to handle these errors at the Model level, add an `error`
listener to your Model as shown below.

// registering an error listener on the Model lets us handle errors more locally
Product.on('error', handleError);validator function, or hash describing options
validator function. If the validator function returns `undefined` or a truthy value, validation succeeds. If it returns [falsy](https://masteringjs.io/tutorials/fundamentals/falsy) (except `undefined`) or throws an error, validation fails.
obj.validatoroptional error message. If function, should return the error message as a string
obj.messageIf true, Mongoose will pass the validator properties object (with the `validator` function, `message`, etc.) as the 2nd arg to the validator function. This is disabled by default because many validators [rely on positional args](https://github.com/chriso/validator.js#validators), so turning this on may cause unpredictable behavior in external validators.
obj.propsParametererrorMsgoptional validator type
Adds a required validator to this SchemaType. The validator gets added
to the front of this SchemaType's validators array using `unshift()`.

#### Example:

const s = new Schema({ born: { type: Date, required: true })

// or with custom error message

const s = new Schema({ born: { type: Date, required: '{PATH} is required!' })

// or with a function

const s = new Schema({
userId: ObjectId,
username: {
type: String,
required: function() { return this.userId != null; }
}
})

// or with a function and a custom message
const s = new Schema({
userId: ObjectId,
username: {
type: String,
required: [
function() { return this.userId != null; },
'username is required if id is specified'
]
}
})

// or through the path API

s.path('name').required(true);

// with custom error messaging

s.path('name').required(true, 'grrr :( ');

// or make a path conditionally required based on a function
const isOver18 = function() { return this.age >= 18; };
s.path('voterRegistrationId').required(isOver18);

The required validator uses the SchemaType's `checkRequired` function to
determine whether a given value satisfies the required validator. By default,
a value satisfies the required validator if `val != null` (that is, if
the value is not null nor undefined). However, most built-in mongoose schema
types override the default `checkRequired` function:enable/disable the validator, or function that returns required boolean, or options object
(Boolean|Function|Object)enable/disable the validator, or function that returns required boolean
options.isRequiredcustom error constructor. The constructor receives 1 parameter, an object containing the validator properties.
options.ErrorConstructorSchemaArray#checkRequired https://mongoosejs.com/docs/api/schemaarray.html#SchemaArray.prototype.checkRequired()
SchemaBoolean#checkRequired https://mongoosejs.com/docs/api/schemaboolean.html#SchemaBoolean.prototype.checkRequired()
SchemaBuffer#checkRequired https://mongoosejs.com/docs/api/schemabuffer.html#SchemaBuffer.prototype.checkRequired()
SchemaNumber#checkRequired https://mongoosejs.com/docs/api/schemanumber.html#SchemaNumber.prototype.checkRequired()
SchemaObjectId#checkRequired https://mongoosejs.com/docs/api/schemaobjectid.html#ObjectId.prototype.checkRequired()
SchemaString#checkRequired https://mongoosejs.com/docs/api/schemastring.html#SchemaString.prototype.checkRequired()
Set the model that this path refers to. This is the option that [populate](https://mongoosejs.com/docs/populate.html)
looks at to determine the foreign collection it should query.

#### Example:

const userSchema = new Schema({ name: String });
const User = mongoose.model('User', userSchema);

const postSchema = new Schema({ user: mongoose.ObjectId });
postSchema.path('user').ref('User'); // Can set ref to a model name
postSchema.path('user').ref(User); // Or a model class
postSchema.path('user').ref(() => 'User'); // Or a function that returns the model name
postSchema.path('user').ref(() => User); // Or a function that returns the model class

// Or you can just declare the `ref` inline in your schema
const postSchema2 = new Schema({
user: { type: mongoose.ObjectId, ref: User }
});either a model name, a [Model](https://mongoosejs.com/docs/models.html), or a function that returns a model name or model.
Gets the default valuethe scope which callback are executed
The Stored default value.
Applies setters without castingApplies settersApplies getters to a valueSets default `select()` behavior for this path.

Set to `true` if this path should always be included in the results, `false` if it should be excluded by default. This setting can be overridden at the query level.

#### Example:

T = db.model('T', new Schema({ x: { type: String, select: true }}));
T.find(..); // field x will always be selected ..
// .. unless overridden;
T.find().select('-x').exec(callback);Performs a validation of `value` using the validators declared for this SchemaType.If no validators, returns the output from calling `fn`, otherwise no return
Performs a validation of `value` using the validators declared for this SchemaType.

#### Note:

This method ignores the asynchronous validators.(MongooseError|null)Determines if value is a valid Reference.Just like handleArray, except also allows `[]` because surprisingly
`$in: [1, []]` works fineCast the given value with the given optional query operator.query operator, like `$eq` or `$in`
Set & Get the `checkRequired` function
Override the function the required validator uses to check whether a value
passes the `required` check. Override this on the individual SchemaType.

#### Example:

// Use this to allow empty strings to pass the `required` validator
mongoose.Schema.Types.String.checkRequired(v => typeof v === 'string');If set, will overwrite the current set function
The input `fn` or the already set function
Default check for if this path satisfies the `required` validator.`true` when the value is not `null`, `false` otherwise
The cloned SchemaType instance
Returns the embedded schema type, if any. For arrays, document arrays, and maps, `getEmbeddedSchemaType()`
returns the schema type of the array's elements (or map's elements). For other types, `getEmbeddedSchemaType()`
returns `undefined`.

#### Example:

const schema = new Schema({ name: String, tags: [String] });
schema.path('name').getEmbeddedSchemaType(); // undefined
schema.path('tags').getEmbeddedSchemaType(); // SchemaString { path: 'tags', ... }embedded schematype
Returns the BSON type that the schema corresponds to, for automatic encryption.'./sche ... exists'./schema/operators/exists/schema/operators/exists'./sche ... s/type'./schema/operators/type/schema/operators/type'./help ... utable'./helpers/schematype/handleImmutable/helpers/schematype/handleImmutableisAsync ... ction')'./help ... nction'./helpers/isAsyncFunction/helpers/isAsyncFunctionisSimpl ... dator')'./help ... idator'./helpers/isSimpleValidator/helpers/isSimpleValidatorschemaT ... eSymbolconst v ... Symbol;validat ... rSymbolrequire ... rSymbolconst V ... rError;Validat ... orErrorsetOpti ...  true }setOpti ... efaultsthis[sc ... = true;this[sc ...  = truethis[sc ... Symbol]this.in ... stance;this.in ... nstancethis.instancethis.va ... s = [];this.validators = []this.ge ...     [];this.ge ... \n    []this.co ... \n    []this.co ... tters')this.co ... slice()this.co ... s.slicethis.co ... gettersthis.se ...     [];this.se ... \n    []this.co ... settersthis.splitPath();this.splitPath()this.splitPathdefault ... s || {}this.co ... s || {}this.co ... Optionsconst optionoption  ... lidate'this.va ... idate);this.va ... lidate)default ... alidatedefault ... option)default ... roperty!Object ... option)Object. ... option)Object. ... ty.calloptions ... ption];options ... option]options[option]default ... option]if (opt ... ct;\n  }{\n    d ... ct;\n  }delete  ... select;delete  ... .selectconst O ... ptions;Options ... Optionsthis.Op ... Optionsthis.Op ... tructornew Options(options)this._index = null;this._index = nullutils.h ... table')this.$i ... utable;this.$i ... mutablethis.$immutablethis.op ... mutablehandleI ... (this);handleI ... e(this)prop === 'cast'Array.i ... [prop])this.options[prop]this.ca ... prop]);this.ca ... [prop])this.ca ... n.applythis.castFunctionutils.h ... nction'utils.h ... , prop)typeof this[prop]this[prop]prop == ... ._indexprop === 'index'const i ... _index;index = this._indexindex.uniquethrow n ... true');new Err ...  true')'Path " ... o true''Path " ... ndex` ''Path "' + this.path'" may  ... ndex` '" may not have `index` 'set to ... o true'set to false and `unique` set to trueindex.sparseset to false and `sparse` set to truethis._index = false;this._index = falseconst v ... [prop];val = options[prop]options[prop]prop === 'default'this.default(val);this.default(val)const o ...  [val];opts =  ... : [val]this[pr ...  opts);this[pr ... , opts)this[prop].applyObject. ... l\n  });Object. ... ll\n  }){\n    e ... ull\n  }SchemaT ... ptions;SchemaT ... OptionsSchemaT ... tructorSchemaT ... e.path;SchemaT ... pe.pathSchemaT ... dators;SchemaT ... idatorsSchemaT ... quired;SchemaT ... ath;\n};SchemaT ... Path;\n}SchemaT ... litPathfunctio ... Path;\n}{\n  if  ... Path;\n}if (thi ... th;\n  }this._p ... != nullthis._presplitPathreturn  ... itPath;if (thi ... ed;\n  }this.path == nullthis._p ... t('.');this._p ... it('.')this.pa ... it('.')this.pa ...  === -1this.path.indexOf[this.path]this.path.split('.')this.path.splitSchemaT ... ast;\n};SchemaT ... cast;\n}SchemaType.cast{\n    c ...  v;\n  }caster = v => v;caster = v => vSchemaT ... ion;\n};SchemaT ... tion;\n}SchemaT ... unction{\n  if  ... tion;\n}return  ... nction;if (cas ... v);\n  }{\n    c ... v);\n  }caster  ...  => v);caster  ... v => v)this.co ... v => v)this.co ... tCaster(v => v)if (typ ... on;\n  }this._c ... caster;this._c ...  casterthis._c ... Messageif (mes ... ge;\n  }message != null{\n    t ... ge;\n  }this._c ... essage;this._c ... messageSchemaT ... n');\n};SchemaT ... on');\n}SchemaT ... pe.castfunctio ... on');\n}{\n  thr ... on');\n}'Base S ... nction'Base SchemaType class does not implement a `cast()` functionBase SchemaType class does not implement a `cast` functionSchemaT ... lue;\n};SchemaT ... alue;\n}{\n  if  ... alue;\n}!this.h ... tions')this.ha ... tions')this.hasOwnPropertythis.de ... tions);this.de ...  value;this.de ... = valuethis.de ... option]SchemaT ... er);\n};SchemaT ... ter);\n}functio ... ter);\n}{\n  thi ... ter);\n}this.ge ... s : [];this.ge ... rs : []this.ha ... rs : []this.ha ... tters')this.ge ... etter);this.ge ... getter)SchemaT ... defaultif (arg ... s];\n  }this.de ... void 0;this.de ...  void 0val !=  ... fSchemathrow n ... nce.');new Mon ... ance.')'Cannot ... tance.''Cannot ... is.pathCannot set default value of path `'` to a ... tance.'` to a mongoose Schema instance.this.de ...  = val;this.de ... e = valreturn  ... tValue;this.de ... ments];this.de ... uments]SchemaT ... his;\n};SchemaT ... this;\n}SchemaT ... e.indexthis._i ... ptions;this._i ... optionsSchemaT ... .uniquethis._i ... = false'Path " ... et to ''" may  ... et to '" may not have `index` set to 'false  ... o true'false and `unique` set to trueif (!th ... is;\n  }!this.o ... = false!this.o ... index')this.op ... index')value === falseif (thi ...  };\n  }this._i ... == truethis._index == nullthis._index === truetypeof this._index{\n    t ...  };\n  }this._i ... ndex };this._i ... index }{ type: ... index }type: this._indexthis._i ... !value;this._i ... !!valuethis._index.uniqueif (typ ... ge;\n  }typeof messagethis._d ... essage;this._d ... messagethis._d ... MessageSchemaT ... pe.textif (!bo ... ;\n    }!boolfalse and `text` set to truebool === falsethis._i ... oolean'this._i ... definedthis._index === nullthis._i ... = bool;this._i ...  = boolthis._index.textSchemaT ... .sparsefalse and `sparse` set to truethis._index.sparseSchemaT ... mutablethis.$i ... = bool;this.$i ...  = boolSchemaT ... ansformthis.op ... m = fn;this.op ... rm = fnSchemaT ... ype.setnew Typ ... tion.')'A sett ... ction.'A setter must be a function.A setter must be a functionthis.se ... sh(fn);this.se ... ush(fn)this.setters.pushSchemaT ... ype.get'A gett ... ction.'A getter must be a function.A getter must be a functionthis.ge ... sh(fn);this.ge ... ush(fn)SchemaT ... dateAllvalidators.length{\n    t ... ]);\n  }this.va ... rs[i]);this.va ... ors[i])validators[i]typeof  ... RegExp'obj &&  ... RegExp'utils.g ... RegExp'{\n    l ... is;\n  }let properties;propert ... sage };propert ... ssage }{ valid ... ssage }validator: objpropert ... fined';propert ... efined'type || ... efined'message ... & !typemessage ...  Objectpropert ... ssage);propert ... essage)isSimpl ... essage)Object. ... essage)clone(message)!properties.messagepropert ... es.msg;propert ... ies.msgproperties.msgpropert ...  = obj;propert ... r = objproperties.validatorif (mes ...       }message ... efault;message ... defaultpropert ...  obj };propert ... : obj }{ messa ... : obj }this.va ... rties);this.va ... erties)let length;let arg;for (i  ... g);\n  }arg = arguments[i];arg = arguments[i]arguments[i]!utils.isPOJO(arg)utils.isPOJO(arg)const m ... ate()';msg = ' ... date()''Invali ... date()''Invali ...   + arg'Invali ...  + ') ''Invali ... eof arg'Invali ... ived ('Invalid validator. Received () '. See  ... date()'. See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()this.va ... , arg);this.va ... r, arg)arg.validatorlet cus ... s = {};customOptions = {}argumen ... == nullrequired == nullthis.is ...  false;this.is ... = falsethis.isRequireddelete  ... dValue;delete  ... edValuethis.or ... edValuetypeof requiredcustomO ... quired;customO ... equiredcustomO ... messagerequire ... quired;require ... equiredrequired.isRequiredif (req ... is;\n  }required === falsethis.is ... = true;this.is ...  = truethis.re ... );\n  };this.re ... s);\n  }const c ... quired;cachedR ... equiredthis && ... equiredthis && this.$__if (cac ... ;\n    }cachedR ... s.path)cachedR ... != null!this.$ ... s.path)this.$_ ... s.path)!this[d ... s.path)this[do ... s.path)this[do ... dified]_this.p ... equiredconst r ...   true;res = c ...    truecachedR ...    truecachedR ... s.path]_this.c ... , this)_this.checkRequireddelete  ... .path];delete  ... s.path]return  ... : true;require ...  : truerequired.apply(this)required.applythis.or ... quired;this.or ... equired{\n    m ... ed;\n  }message = required;message = requiredrequire ... efined;required = undefinedconst m ... quired;msg = m ... equiredmessage ... equiredMongoos ... equiredthis.va ... \n  }));this.va ... '\n  }))this.va ... unshiftObject. ... d'\n  }){\n    v ... ed'\n  }type: 'required'SchemaT ... ype.refthis.op ...  = ref;this.op ... f = refthis.options.refSchemaT ... ret;\n};SchemaT ...  ret;\n}SchemaT ... Defaultthis.de ... jectid'this.de ... = Arraythis.de ... ate.nowthis.de ... rCase()this.de ... werCasethis.de ... ue.nameret = t ... scope);ret = t ... (scope)ret = t ...  scope)this.de ...  scope)ret = t ... tValue;if (ret ... ed;\n  }ret !== ... definedret !== nullret !== undefinedtypeof  ... shared)(!this. ... shared)!this.o ... .shared!this.options!this.options.sharedthis.options.sharedret = clone(ret);ret = clone(ret)clone(ret)this._a ...  scope)const c ... aults);casted  ... faults)this.ap ... faults)casted  ... eNestedcasted  ... casted)!Array. ... casted)Array.i ... casted)casted. ... eNestedcasted. ...  scope;casted. ... = scopecasted.$__parentSchemaT ... n v;\n};SchemaT ... rn v;\n}{\n  let ... rn v;\n}let v = value;v = valueif (ini ...  v;\n  }const s ... etters;setters ... settersi = set ... gth - 1setters.length - 1setters.lengthv = set ... tions);v = set ... ptions)setters ... ptions)setters[i].callsetters[i]SchemaT ... Nullish{\n  return v;\n}let v = ... tions);v = thi ... ptions)this._a ... ptions)if (v = ... v);\n  }return  ... ish(v);this._castNullish(v)v = thi ... tions);const g ... etters;getters ... getterslen = getters.lengthgetters.lengthif (len ...  v;\n  }v = get ...  this);v = get ... , this)getters ... , this)getters[i].callgetters[i]SchemaT ... .selectthis.se ...  !!val;this.se ... = !!valthis.selectedSchemaT ... \n  }\n};SchemaT ... }\n  }\n}let err = false;err = falsethrow n ...  fn}`);new Typ ... f fn}`)`Must p ... of fn}`Must pa ... ), got const v ...  null);validat ... = null)this.va ... = null)this.va ...  filterv => ty ... == nullv !== nullif (!co ... l);\n  }len = v ... .lengthconst v ... ors[i];v = validators[i]const v ... idator;let ok;const v ... one(v);validat ... lone(v)isSimpl ... lone(v)isSimpleValidator(v)Object.assign({}, v)clone(v)validat ... : path;validat ...  : pathvalidat ... es.pathoptions ...  : pathvalidat ... llPath;validat ... ullPathvalidat ...  value;validat ... = valuevalidat ... s.valuevalidat ... length;validat ... th > 30validat ...  '...';validat ... + '...'validat ... (0, 30)validat ... e.slicevalidat ...  RegExpvalidat ... scope);validat ...  scope)validat ... (value)validator.testtypeof validatorvalue = ... lidatorvalidat ... rameterok = va ... rties);ok = va ... erties)validat ... erties)validator.callok = va ... value);ok = va ...  value)validat ...  value)ok = false;ok = falsevalidat ...  error;validat ... = errorvalidat ... .reasonvalidat ... essage;validat ... messageif (ok  ... ;\n    }ok != n ... nction'ok != nulltypeof ok.thenok.thenok.then ...     });ok.then ...      })functio ... ope); }{ valid ... ope); }ok ===  ... d || okok === undefinedif (--c ...       }--count <= 0fn(null);const E ... rError;ErrorCo ... orErrorvalidat ... orErrorvalidat ... tructorerr = n ... scope);err = n ...  scope)new Err ...  scope)err[val ... = true;err[val ...  = trueerr[val ... Symbol]fn(err);if (ok  ... rr;\n  }ok !==  ...  && !okok !== undefined!okconst e ... rties);err = n ... erties)new Err ... erties)SchemaT ... err;\n};SchemaT ...  err;\n}this.va ... .lengthif (!co ... ll;\n  }let val ... dators;validat ... idatorsvalue === void 0this.va ... quired'this.va ... h !== 0this.va ... 0].typethis.validators[0]validat ... rs[0]];validat ... ors[0]][this.validators[0]]v === n ... object'let ok = false;isAsync ... idator)err = _ ... rties);err = _ ... erties)_valida ... erties)SchemaT ... lse;\n};SchemaT ... alse;\n}{\n  //  ... alse;\n}let ref ... fPath);ref = i ... efPath)init && ... efPath)init && self.optionsself.options(self.o ... efPath)self.op ... refPathself.options.refself.options.refPathif (!re ... h);\n  }!ref && ... != null!ref && docpath =  ... , true)doc.$__ ... , true)doc.$__fullPathconst o ... ment();owner = ... ument()ref = ( ... .path);ref = ( ... f.path)(path ! ... f.path)(path ! ... (path))path != ... d(path)owner.$ ... d(path)owner.$populateddoc.$po ... f.path)if (ref ... it;\n  }{\n    i ... it;\n  }!Buffer ... (value)!Buffer ... Binary'value._ ... Binary'value._bsontypereturn init;SchemaT ... castRefvalue.$ ... ._id };value.$ ... c._id }value:  ... doc._idvalue._doc._idvalue._docif (Buf ... s);\n  }!utils. ... (value)pop = o ... , true)owner.$ ... , true)let ret = value;ret = valueif (!do ...  };\n  }!doc.$_ ... ns.lean!doc.$_ ... options!doc.$_ ... d[path]!doc.$__.populateddoc.$__.populateddoc.$__ ... ns.leanconst P ... s.ref);Populat ... ns.ref)pop ? p ... ns.ref)pop.opt ... Symbol]doc.con ... ns.ref)doc.con ... b.modeldoc.constructor.dbret = P ... tions);ret = P ... ptions)Populat ... ptions)ret.$__ ... el } };ret.$__ ... del } }ret.$__.wasPopulatedret.$__{ value ... del } }value: ret._doc._idret._doc._idret._docoptions ... Model }{ [popu ... Model }[popula ... edModel{\n    i ... t);\n  }Array.isArray(m)m.length === 0m.lengthreturn m;SchemaT ... type\n};SchemaT ... $type\n}{\n  $al ... $type\n}$eq: handleSingle$in: handle$in$nin: handle$in$exists: $exists$type: $typeSchemaT ... ;\n  }\n}SchemaT ... orQuerySchemaT ... red;\n};SchemaT ... ired;\n}functio ... ired;\n}{\n  if  ... ired;\n}this._c ... d = fn;this._c ... ed = fnthis._checkRequiredreturn  ... quired;SchemaT ... ull;\n};SchemaT ... null;\n}return val != null;SchemaT ... ype;\n};SchemaT ... type;\n}const s ... tance);schemat ... stance)new thi ... stance)if (thi ... idator;if (thi ... tValue;this.de ... definedschemat ... tValue;schemat ... ltValuethis.$i ... definedthis.op ... definedschemat ... utable;handleI ... atype);handleI ... matype)if (thi ... _index;schemat ... _index;schemat ... ._indexschematype._indexif (thi ... lected;this.se ... definedschemat ... lected;schemat ... electedschematype.selectedif (thi ... quired;this.is ... definedschemat ... quired;schemat ... equiredif (thi ... dValue;this.or ... definedschemat ... dValue;schemat ... edValueschematype.gettersthis.getters.slice()this.getters.slicethis.setters.slice()this.setters.sliceSchemaT ... Type;\n}SchemaT ... emaType{\n  ret ... Type;\n}SchemaT ... = null;SchemaT ...  = nullSchemaT ... MessageSchemaT ... "`);\n};SchemaT ... }"`);\n}SchemaT ... NSchema{ // es ... }"`);\n}throw n ... th}"`);new Err ... ath}"`)`Conver ... path}"`Convert ... chema: SchemaT ... ionType{\n  return null;\n}exports = SchemaTypeexports ... tError;exports ... stErrorexports.CastErrorexports ... rError;exports ... orError/home/insomnia/repos/mongoose/lib/stateMachine.js
 * StateMachine represents a minimal `interface` for the
 * constructors it builds via StateMachine.ctor(...).
 *
 * @api private
 
 * StateMachine.ctor('state1', 'state2', ...)
 * A factory method for subclassing StateMachine.
 * The arguments are a list of states. For each state,
 * the constructor's prototype gets state transition
 * methods named after each state. These transition methods
 * place their path argument into the given state.
 *
 * @param {String} state
 * @param {String} [state]
 * @return {Function} subclass constructor
 * @api private
  Changes the `path`'s state to `state`.// Chan ... state`.
 * This function is wrapped by the state change functions:
 *
 * - `require(path)`
 * - `modify(path)`
 * - `init(path)`
 *
 * @api private
 
 * Gets the paths for the given state, or empty object `{}` if none.
 * @api private
 
 * Checks to see if at least one path is in the states passed in via `arguments`
 * e.g., this.some('required', 'inited')
 *
 * @param {String} state that we want to check for.
 * @api private
 
 * This function builds the functions that get assigned to `forEach` and `map`,
 * since both of those methods share a lot of the same logic.
 *
 * @param {String} iterMethod is either 'forEach' or 'map'
 * @return {Function}
 * @api private
 
 * Iterates over the paths that belong to one of the parameter states.
 *
 * The function profile can look like:
 * this.forEach(state1, fn);         // iterates over all paths in state1
 * this.forEach(state1, state2, fn); // iterates over all paths in state1 or state2
 * this.forEach(fn);                 // iterates over all paths in all states
 *
 * @param {String} [state]
 * @param {String} [state]
 * @param {Function} callback
 * @api private
 
 * Maps over the paths that belong to one of the parameter states.
 *
 * The function profile can look like:
 * this.forEach(state1, fn);         // iterates over all paths in state1
 * this.forEach(state1, state2, fn); // iterates over all paths in state1 or state2
 * this.forEach(fn);                 // iterates over all paths in all states
 *
 * @param {String} [state]
 * @param {String} [state]
 * @param {Function} callback
 * @return {Array}
 * @api private
 
 * Returns a copy of this state machine
 *
 * @param {Function} callback
 * @return {StateMachine}
 * @api private
 stateNames_changeStatenextStateprevStateprevBucketwhat_iteriterMethod'forEach'StateMachine represents a minimal `interface` for the
constructors it builds via StateMachine.ctor(...).StateMachine.ctor('state1', 'state2', ...)
A factory method for subclassing StateMachine.
The arguments are a list of states. For each state,
the constructor's prototype gets state transition
methods named after each state. These transition methods
place their path argument into the given state.subclass constructor
This function is wrapped by the state change functions:

- `require(path)`
- `modify(path)`
- `init(path)`Gets the paths for the given state, or empty object `{}` if none.Checks to see if at least one path is in the states passed in via `arguments`
e.g., this.some('required', 'inited')that we want to check for.
This function builds the functions that get assigned to `forEach` and `map`,
since both of those methods share a lot of the same logic.is either 'forEach' or 'map'
Iterates over the paths that belong to one of the parameter states.

The function profile can look like:
this.forEach(state1, fn);         // iterates over all paths in state1
this.forEach(state1, state2, fn); // iterates over all paths in state1 or state2
this.forEach(fn);                 // iterates over all paths in all statesMaps over the paths that belong to one of the parameter states.

The function profile can look like:
this.forEach(state1, fn);         // iterates over all paths in state1
this.forEach(state1, state2, fn); // iterates over all paths in state1 or state2
this.forEach(fn);                 // iterates over all paths in all statesReturns a copy of this state machineconst S ... () {\n};StateMa ... e() {\n}module. ... e() {\n}exports ... e() {\n}functio ... e() {\n}StateMa ... tor;\n};StateMa ... ctor;\n}const s ... ments];states  ... uments]const c ... };\n  };ctor =  ... {};\n  }functio ... {};\n  }{\n    S ... {};\n  }StateMa ... ments);StateMa ... uments)StateMachine.applythis.states = {};this.states = {}ctor.pr ... hine();ctor.pr ... chine()ctor.prototypenew StateMachine()ctor.pr ... = ctor;ctor.pr ...  = ctorctor.pr ... tructorctor.pr ... states;ctor.pr ...  statesctor.pr ... teNamesstates. ... ;\n  });states. ... };\n  })states.forEachctor.pr ... \n    };ctor.pr ... ;\n    }ctor.pr ... [state]this._c ... state);this._c ...  state)this._changeStatereturn ctor;StateMa ... rue;\n};StateMa ... true;\n}StateMa ... geStateStateMa ... ototypeprevSta ... s[path]if (pre ... rn;\n  }prevSta ... xtStateconst p ... State];prevBuc ... vState]this.st ... vState]if (pre ... [path];delete  ... t[path]prevBucket[path]this.pa ... tState;this.pa ... xtStatethis.st ... ] || {}this.st ... tState]this.st ... = true;this.st ...  = truethis.st ... ][path]StateMa ... \n  }\n};StateMa ... ;\n  }\n}StateMa ... e.clearthis.st ... == nullthis.states[state]const k ... tate]);keys =  ... state])Object. ... state])while ( ... h];\n  }path = keys[i];path = keys[i]StateMa ... th];\n};StateMa ... ath];\n}StateMa ... earPathstate = ... s[path]if (!st ... rn;\n  }!stateStateMa ...  {};\n};StateMa ... n {};\n}StateMa ... tePaths{\n  if  ... n {};\n}this.st ... != nullreturn  ... state];StateMa ...  });\n};StateMa ...   });\n}StateMa ... pe.someconst w ... eNames;what =  ... teNamesargumen ... teNamesthis.stateNamesArray.p ... h;\n  })Array.p ... me.callif (_th ... ;\n    }_this.s ... == null_this.states[state]_this.statesStateMa ...   };\n};StateMa ... \n  };\n}StateMa ... e._iterlet sta ... ments];callbac ... s.pop()states.pop()states.popif (!st ... eNames;!states.lengthstates.lengthstates  ... eNames;states  ... teNamesconst p ... }, []);paths = ...  }, [])states. ...  }, [])states.reducereturn paths;return  ... ate]));paths.c ... tate]))paths.concatpaths[i ... \n    })paths[iterMethod]callbac ...  paths)StateMa ... ts);\n};StateMa ... nts);\n}StateMa ... forEachthis.fo ... Each');this.fo ... rEach')this.forEachthis._i ... rEach')this._iterthis.fo ... uments)this.forEach.applyStateMa ... ype.mapthis.ma ... 'map');this.ma ... ('map')this._iter('map')this.ma ... uments)this.map.applyStateMa ... ult;\n};StateMa ... sult;\n}StateMa ... e.cloneconst r ... ctor();result  ... uctor()result. ... aths };result. ... paths }result.paths{ ...this.paths }...this.pathsfor (co ...  };\n  }const state!(state ... states)(state  ... states)state in this.statesresult. ... ate] };result. ... tate] }result.states[state]result.statesthis.st ... tate] }{ ...th ... tate] }...this ... [state]/home/insomnia/repos/mongoose/lib/types/array/index.js/home/insomnia/repos/mongoose/lib/types/array/home/insomnia/repos/mongoose/lib/types
 * Mongoose Array constructor.
 *
 * #### Note:
 *
 * _Values always have to be passed to the constructor to initialize, otherwise `MongooseArray#push` will mark the array as modified._
 *
 * @param {Array} values
 * @param {String} path
 * @param {Document} doc parent document
 * @api private
 * @inherits Array https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array
 * @see https://bit.ly/f6CnZU
 /**\n *  ... nZU\n */ Perf optimizations for small arrays: much faster to use `...` than `for` + `push`,// Perf ... `push`, but large arrays may cause stack overflows. And for arrays of length 0/1, just// but  ... 1, just modifying the array is faster. Seems small, but adds up when you have a document// modi ... ocument with thousands of nested arrays.// with ... arrays.mongooseArrayMethods'./methods'_basePushinternalsisMongooseArrayProxyMongoose Array constructor.

#### Note:

_Values always have to be passed to the constructor to initialize, otherwise `MongooseArray#push` will mark the array as modified._parent document
Array https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array
https://bit.ly/f6CnZUconst m ... hods');mongoos ... thods')require('./methods')./methodsarrayPa ... tSymbolarraySc ... aSymbolconst _ ... e.push;_basePu ... pe.pushfunctio ... roxy;\n}{\n  let ... roxy;\n}let __array;if (Arr ... [];\n  }len = values.lengthvalues.lengthif (len ... }\n    }__array ... rray();__array ... Array()new Array()len === 1__array ... ray(1);__array ... rray(1)new Array(1)__array ... ues[0];__array ... lues[0]__array[0]values[0]len < 10000_basePu ... alues);_basePu ... values)_basePush.apply_basePu ... es[i]);_basePu ... ues[i])_basePush.callvalues[i]{\n    _ ... [];\n  }__array = [];__array = []const i ... ay\n  };interna ... ray\n  }{\n    [ ... ray\n  }[arrayA ... ol]: {}[arrayA ...  void 0[arrayP ... ]: path[arrayS ... ematype[arrayP ...  void 0isMongo ... y: true__array: __arrayif (val ... l];\n  }values  ... != nullvalues[ ... != nullvalues[ ... Symbol]{\n    i ... l];\n  }interna ... ymbol];interna ... Symbol]if (doc ... h);\n  }doc !=  ... doc.$__interna ...  = doc;interna ... ] = docinterna ... (path);interna ... h(path)doc.sch ... h(path)doc.schema.pathconst p ... }\n  });proxy = ...  }\n  }){\n    g ...   }\n  }get: fu ... ;\n    }if (int ...       }interna ... y(prop)interna ... ropertyinternals[prop]if (mon ...       }mongoos ... y(prop)mongoos ... ropertymongoos ... s[prop]schemat ... y(prop)schemat ... irtualsschematype.virtualsschemat ... ropertyreturn  ... arget);schemat ... target)schemat ... Gettersschemat ... s[prop]typeof  ... t(prop)typeof propnumberRE.test(prop)schemat ... ], doc)__array[prop]set: fu ... ;\n    }mongoos ... false);mongoos ...  false)mongoos ... et.callmongoos ... ods.setinterna ...  value;interna ... = valueschemat ... arget);schemat ... Setters__array ...  value;__array ... = valuereturn proxy;module. ... eArray;module. ... seArrayexports ... seArray/home/insomnia/repos/mongoose/lib/types/array/isMongooseArray.jsmongooseArrayexports ... ray;\n};exports ... rray;\n}functio ... rray;\n}{\n  ret ... rray;\n}return  ... eArray;Array.i ... eArray)mongoos ... seArray/home/insomnia/repos/mongoose/lib/types/array/methods/index.js/home/insomnia/repos/mongoose/lib/types/array/methods
   * Depopulates stored atomic operation values as necessary for direct insertion to MongoDB.
   *
   * If no atomics exist, we return all array values after conversion.
   *
   * @return {Array}
   * @method $__getAtomics
   * @memberOf MongooseArray
   * @instance
   * @api private
    the atomic values which are arrays are not MongooseArrays. we// the  ... ays. we need to convert their elements as if they were MongooseArrays// need ... eArrays to handle populated arrays versus DocumentArrays properly.// to h ... operly.
   * Atomically shifts the array at most one time per document `save()`.
   *
   * #### Note:
   *
   * _Calling this multiple times on an array before saving sends the same command as calling it once._
   * _This update is implemented using the MongoDB [$pop](https://www.mongodb.com/docs/manual/reference/operator/update/pop/) method which enforces this restriction._
   *
   *      doc.array = [1,2,3];
   *
   *      const shifted = doc.array.$shift();
   *      console.log(shifted); // 1
   *      console.log(doc.array); // [2,3]
   *
   *      // no affect
   *      shifted = doc.array.$shift();
   *      console.log(doc.array); // [2,3]
   *
   *      doc.save(function (err) {
   *        if (err) return handleError(err);
   *
   *        // we saved, now $shift works again
   *        shifted = doc.array.$shift();
   *        console.log(shifted ); // 2
   *        console.log(doc.array); // [3]
   *      })
   *
   * @api public
   * @memberOf MongooseArray
   * @instance
   * @method $shift
   * @see mongodb https://www.mongodb.com/docs/manual/reference/operator/update/pop/
   /**\n    ... /\n   */ only allow shifting once// only ... ng once
   * Pops the array atomically at most one time per document `save()`.
   *
   * #### NOTE:
   *
   * _Calling this multiple times on an array before saving sends the same command as calling it once._
   * _This update is implemented using the MongoDB [$pop](https://www.mongodb.com/docs/manual/reference/operator/update/pop/) method which enforces this restriction._
   *
   *      doc.array = [1,2,3];
   *
   *      const popped = doc.array.$pop();
   *      console.log(popped); // 3
   *      console.log(doc.array); // [1,2]
   *
   *      // no affect
   *      popped = doc.array.$pop();
   *      console.log(doc.array); // [1,2]
   *
   *      doc.save(function (err) {
   *        if (err) return handleError(err);
   *
   *        // we saved, now $pop works again
   *        popped = doc.array.$pop();
   *        console.log(popped); // 2
   *        console.log(doc.array); // [1]
   *      })
   *
   * @api public
   * @method $pop
   * @memberOf MongooseArray
   * @instance
   * @see mongodb https://www.mongodb.com/docs/manual/reference/operator/update/pop/
   * @method $pop
   * @memberOf MongooseArray
    only allow popping once
   * Casts a member based on this arrays schema.
   *
   * @param {any} value
   * @return value the casted value
   * @method _cast
   * @api private
   * @memberOf MongooseArray
    cast to the populated Models schema// cast ...  schema only objects are permitted so we can safely assume that// only ... me that non-objects are to be interpreted as _id// non- ...  as _id gh-2399// gh-2399 we should cast model only when it's not a discriminator// we s ... minator
   * Internal helper for .map()
   *
   * @api private
   * @return {Number}
   * @method _mapCast
   * @memberOf MongooseArray
   
   * Marks this array as modified.
   *
   * If it bubbles up from an embedded document change, then it takes the following arguments (otherwise, takes 0 arguments)
   *
   * @param {ArraySubdocument} subdoc the embedded doc that invoked this method on the Array
   * @param {String} embeddedPath the path which changed in the subdoc
   * @method _markModified
   * @api private
   * @memberOf MongooseArray
   
   * Register an atomic operation with the parent.
   *
   * @param {Array} op operation
   * @param {any} val
   * @method _registerAtomic
   * @api private
   * @memberOf MongooseArray
    $set takes precedence over all other ops.// $set ... er ops. mark entire array modified.// mark ... dified. reset pop/shift after save// rese ... er save check for impossible $atomic combos (Mongo denies more than one// chec ... han one $atomic op on a single path// $ato ... le path a different op was previously registered.// a di ... stered. save the entire thing.// save ...  thing.
   * Adds values to the array if not already present.
   *
   * #### Example:
   *
   *     console.log(doc.array) // [2,3,4]
   *     const added = doc.array.addToSet(4,5);
   *     console.log(doc.array) // [2,3,4,5]
   *     console.log(added)     // [5]
   *
   * @param {...any} [args]
   * @return {Array} the values that were added
   * @memberOf MongooseArray
   * @api public
   * @method addToSet
   
   * Returns the number of pending atomic operations to send to the db for this array.
   *
   * @api private
   * @return {Number}
   * @method hasAtomics
   * @memberOf MongooseArray
   
   * Return whether or not the `obj` is included in the array.
   *
   * @param {Object} obj the item to check
   * @param {Number} fromIndex
   * @return {Boolean}
   * @api public
   * @method includes
   * @memberOf MongooseArray
   
   * Return the index of `obj` or `-1` if not found.
   *
   * @param {Object} obj the item to look for
   * @param {Number} fromIndex
   * @return {Number}
   * @api public
   * @method indexOf
   * @memberOf MongooseArray
   
   * Helper for console.log
   *
   * @api public
   * @method inspect
   * @memberOf MongooseArray
   
   * Pushes items to the array non-atomically.
   *
   * #### Note:
   *
   * _marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._
   *
   * @param {...any} [args]
   * @api public
   * @method nonAtomicPush
   * @memberOf MongooseArray
   
   * Wraps [`Array#pop`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/pop) with proper change tracking.
   *
   * #### Note:
   *
   * _marks the entire array as modified which will pass the entire thing to $set potentially overwriting any changes that happen between when you retrieved the object and when you save it._
   *
   * @see MongooseArray#$pop https://mongoosejs.com/docs/api/array.html#MongooseArray.prototype.$pop()
   * @api public
   * @method pop
   * @memberOf MongooseArray
   
   * Pulls items from the array atomically. Equality is determined by casting
   * the provided value to an embedded document and comparing using
   * [the `Document.equals()` function.](https://mongoosejs.com/docs/api/document.html#Document.prototype.equals())
   *
   * #### Example:
   *
   *     doc.array.pull(ObjectId)
   *     doc.array.pull({ _id: 'someId' })
   *     doc.array.pull(36)
   *     doc.array.pull('tag 1', 'tag 2')
   *
   * To remove a document from a subdocument array we may pass an object with a matching `_id`.
   *
   *     doc.subdocs.push({ _id: 4815162342 })
   *     doc.subdocs.pull({ _id: 4815162342 }) // removed
   *
   * Or we may passing the _id directly and let mongoose take care of it.
   *
   *     doc.subdocs.push({ _id: 4815162342 })
   *     doc.subdocs.pull(4815162342); // works
   *
   * The first pull call will result in a atomic operation on the database, if pull is called repeatedly without saving the document, a $set operation is used on the complete array instead, overwriting possible changes that happened on the database in the meantime.
   *
   * @param {...any} [args]
   * @see mongodb https://www.mongodb.com/docs/manual/reference/operator/update/pull/
   * @api public
   * @method pull
   * @memberOf MongooseArray
    Might have modified child paths and then pulled, like// Migh ... d, like `doc.children[1].name = 'test';` followed by// `doc ... owed by `doc.children.remove(doc.children[0]);`. In this case we fall back// `doc ... ll back to a `$set` on the whole array. See #3511// to a ... e #3511
   * Wraps [`Array#push`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push) with proper change tracking.
   *
   * #### Example:
   *
   *     const schema = Schema({ nums: [Number] });
   *     const Model = mongoose.model('Test', schema);
   *
   *     const doc = await Model.create({ nums: [3, 4] });
   *     doc.nums.push(5); // Add 5 to the end of the array
   *     await doc.save();
   *
   *     // You can also pass an object with `$each` as the
   *     // first parameter to use MongoDB's `$position`
   *     doc.nums.push({
   *       $each: [1, 2],
   *       $position: 0
   *     });
   *     doc.nums; // [1, 2, 3, 4, 5]
   *
   * @param {...Object} [args]
   * @api public
   * @method push
   * @memberOf MongooseArray
   
   * Alias of [pull](https://mongoosejs.com/docs/api/array.html#MongooseArray.prototype.pull())
   *
   * @see MongooseArray#pull https://mongoosejs.com/docs/api/array.html#MongooseArray.prototype.pull()
   * @see mongodb https://www.mongodb.com/docs/manual/reference/operator/update/pull/
   * @api public
   * @memberOf MongooseArray
   * @instance
   * @method remove
   
   * Sets the casted `val` at index `i` and marks the array modified.
   *
   * #### Example:
   *
   *     // given documents based on the following
   *     const Doc = mongoose.model('Doc', new Schema({ array: [Number] }));
   *
   *     const doc = new Doc({ array: [2,3,4] })
   *
   *     console.log(doc.array) // [2,3,4]
   *
   *     doc.array.set(1,"5");
   *     console.log(doc.array); // [2,5,4] // properly cast to number
   *     doc.save() // the change is saved
   *
   *     // VS not using array#set
   *     doc.array[1] = "5";
   *     console.log(doc.array); // [2,"5",4] // no casting
   *     doc.save() // change is not saved
   *
   * @return {Array} this
   * @api public
   * @method set
   * @memberOf MongooseArray
   
   * Wraps [`Array#shift`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) with proper change tracking.
   *
   * #### Example:
   *
   *     doc.array = [2,3];
   *     const res = doc.array.shift();
   *     console.log(res) // 2
   *     console.log(doc.array) // [3]
   *
   * #### Note:
   *
   * _marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._
   *
   * @api public
   * @method shift
   * @memberOf MongooseArray
   
   * Wraps [`Array#sort`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort) with proper change tracking.
   *
   * #### Note:
   *
   * _marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._
   *
   * @api public
   * @method sort
   * @memberOf MongooseArray
   * @see MasteringJS: Array sort https://masteringjs.io/tutorials/fundamentals/array-sort
   
   * Wraps [`Array#splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice) with proper change tracking and casting.
   *
   * #### Note:
   *
   * _marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._
   *
   * @api public
   * @method splice
   * @memberOf MongooseArray
   * @see MasteringJS: Array splice https://masteringjs.io/tutorials/fundamentals/array-splice
   
   * Returns a native js Array.
   *
   * @param {Object} options
   * @return {Array}
   * @api public
   * @method toObject
   * @memberOf MongooseArray
    Ensure return value is a vanilla array, because in Node.js 6+ `map()`// Ensu ... `map()` is smart enough to use the inherited array's constructor.// is s ... ructor.
   * Wraps [`Array#unshift`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) with proper change tracking.
   *
   * #### Note:
   *
   * _marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwriting any changes that happen between when you retrieved the object and when you save it._
   *
   * @api public
   * @method unshift
   * @memberOf MongooseArray
   !
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 /*!\n *  ... } }\n */!
 * If `docs` isn't all instances of the right model, depopulate `arr`
 /*!\n *  ... rr`\n */'../../../document'ArraySubdocument'../../arraySubdocument''../../../error/mongooseError''../../../helpers/document/cleanModifiedSubpaths''../../../helpers/clone''../../../options''../../../utils''../../../helpers/isBsonType''../../../helpers/symbols'slicedSymbol'mongoose#Array#sliced'$atomics$shift_markModified_shifted_popped'No populated model found for path `''`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.'isDisc_mapCastdirtyPath'$pullDocs'pullOp_minimizePath_checkManualPopulation_depopulateIfNecessary'doc'rawValuesnonAtomicPushisOverwriteskipModified_isAllSubdocsstringToPartsparentDocisMongooseTypereturnVanillaArrayMethods'flat''flatMap'_arrDepopulates stored atomic operation values as necessary for direct insertion to MongoDB.

If no atomics exist, we return all array values after conversion.MongooseArray
Atomically shifts the array at most one time per document `save()`.

#### Note:

_Calling this multiple times on an array before saving sends the same command as calling it once._
_This update is implemented using the MongoDB [$pop](https://www.mongodb.com/docs/manual/reference/operator/update/pop/) method which enforces this restriction._

doc.array = [1,2,3];

const shifted = doc.array.$shift();
console.log(shifted); // 1
console.log(doc.array); // [2,3]

// no affect
shifted = doc.array.$shift();
console.log(doc.array); // [2,3]

doc.save(function (err) {
if (err) return handleError(err);

// we saved, now $shift works again
shifted = doc.array.$shift();
console.log(shifted ); // 2
console.log(doc.array); // [3]
})mongodb https://www.mongodb.com/docs/manual/reference/operator/update/pop/Pops the array atomically at most one time per document `save()`.

#### NOTE:

_Calling this multiple times on an array before saving sends the same command as calling it once._
_This update is implemented using the MongoDB [$pop](https://www.mongodb.com/docs/manual/reference/operator/update/pop/) method which enforces this restriction._

doc.array = [1,2,3];

const popped = doc.array.$pop();
console.log(popped); // 3
console.log(doc.array); // [1,2]

// no affect
popped = doc.array.$pop();
console.log(doc.array); // [1,2]

doc.save(function (err) {
if (err) return handleError(err);

// we saved, now $pop works again
popped = doc.array.$pop();
console.log(popped); // 2
console.log(doc.array); // [1]
})mongodb https://www.mongodb.com/docs/manual/reference/operator/update/pop/
Casts a member based on this arrays schema.value the casted value
Internal helper for .map()Marks this array as modified.

If it bubbles up from an embedded document change, then it takes the following arguments (otherwise, takes 0 arguments)the embedded doc that invoked this method on the Array
the path which changed in the subdoc
embeddedPathRegister an atomic operation with the parent.operation
Adds values to the array if not already present.

#### Example:

console.log(doc.array) // [2,3,4]
const added = doc.array.addToSet(4,5);
console.log(doc.array) // [2,3,4,5]
console.log(added)     // [5]...any=...anythe values that were added
Returns the number of pending atomic operations to send to the db for this array.Return whether or not the `obj` is included in the array.the item to check
Return the index of `obj` or `-1` if not found.the item to look for
Pushes items to the array non-atomically.

#### Note:

_marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._Wraps [`Array#pop`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/pop) with proper change tracking.

#### Note:

_marks the entire array as modified which will pass the entire thing to $set potentially overwriting any changes that happen between when you retrieved the object and when you save it._MongooseArray#$pop https://mongoosejs.com/docs/api/array.html#MongooseArray.prototype.$pop()
Pulls items from the array atomically. Equality is determined by casting
the provided value to an embedded document and comparing using
[the `Document.equals()` function.](https://mongoosejs.com/docs/api/document.html#Document.prototype.equals())

#### Example:

doc.array.pull(ObjectId)
doc.array.pull({ _id: 'someId' })
doc.array.pull(36)
doc.array.pull('tag 1', 'tag 2')

To remove a document from a subdocument array we may pass an object with a matching `_id`.

doc.subdocs.push({ _id: 4815162342 })
doc.subdocs.pull({ _id: 4815162342 }) // removed

Or we may passing the _id directly and let mongoose take care of it.

doc.subdocs.push({ _id: 4815162342 })
doc.subdocs.pull(4815162342); // works

The first pull call will result in a atomic operation on the database, if pull is called repeatedly without saving the document, a $set operation is used on the complete array instead, overwriting possible changes that happened on the database in the meantime.mongodb https://www.mongodb.com/docs/manual/reference/operator/update/pull/
Wraps [`Array#push`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push) with proper change tracking.

#### Example:

const schema = Schema({ nums: [Number] });
const Model = mongoose.model('Test', schema);

const doc = await Model.create({ nums: [3, 4] });
doc.nums.push(5); // Add 5 to the end of the array
await doc.save();

// You can also pass an object with `$each` as the
// first parameter to use MongoDB's `$position`
doc.nums.push({
$each: [1, 2],
$position: 0
});
doc.nums; // [1, 2, 3, 4, 5]...Object=Alias of [pull](https://mongoosejs.com/docs/api/array.html#MongooseArray.prototype.pull())MongooseArray#pull https://mongoosejs.com/docs/api/array.html#MongooseArray.prototype.pull()
Sets the casted `val` at index `i` and marks the array modified.

#### Example:

// given documents based on the following
const Doc = mongoose.model('Doc', new Schema({ array: [Number] }));

const doc = new Doc({ array: [2,3,4] })

console.log(doc.array) // [2,3,4]

doc.array.set(1,"5");
console.log(doc.array); // [2,5,4] // properly cast to number
doc.save() // the change is saved

// VS not using array#set
doc.array[1] = "5";
console.log(doc.array); // [2,"5",4] // no casting
doc.save() // change is not savedWraps [`Array#shift`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) with proper change tracking.

#### Example:

doc.array = [2,3];
const res = doc.array.shift();
console.log(res) // 2
console.log(doc.array) // [3]

#### Note:

_marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._Wraps [`Array#sort`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort) with proper change tracking.

#### Note:

_marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._MasteringJS: Array sort https://masteringjs.io/tutorials/fundamentals/array-sortWraps [`Array#splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice) with proper change tracking and casting.

#### Note:

_marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwritting any changes that happen between when you retrieved the object and when you save it._MasteringJS: Array splice https://masteringjs.io/tutorials/fundamentals/array-spliceReturns a native js Array.Wraps [`Array#unshift`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) with proper change tracking.

#### Note:

_marks the entire array as modified, which if saved, will store it as a `$set` operation, potentially overwriting any changes that happen between when you retrieved the object and when you save it._../../../documentconst A ... ment');ArraySu ... ument')'../../ ... cument'../../arraySubdocument/arraySubdocument../../../error/mongooseError'../../ ... bpaths'../../../helpers/document/cleanModifiedSubpaths../../../helpers/clone../../../options../../../utils../../../helpers/isBsonType../../../helpers/symbolsconst s ... iced');slicedS ... liced')Symbol( ... liced')'mongoo ... sliced'mongoose#Array#slicedconst m ... \n  }\n};methods ... ;\n  }\n}{\n  /** ... ;\n  }\n}$__getA ... et;\n  }() {\n   ... et;\n  }this[ar ... ] || {}this[ar ... Symbol]const o ... rue });opts =  ... true }){ _isNested: true }ret[0]  ... opts)];ret[0]  ... (opts)]ret[0]['$set' ... (opts)]const op = keys[i];op = keys[i]let val ... l][op];val = t ... ol][op]this[ar ... ol][op]val = v ... (opts);val = v ... t(opts)val.toObject(opts)val = t ...  opts);val = t ... , opts)this.to ... , opts)this.toObject.callval !=  ... .$each)Array.i ... .$each)val.$ea ...  opts);val.$ea ... , opts)ret.push([op, val]);ret.push([op, val])[op, val]$atomic ... l];\n  }() {\n   ... l];\n  }return  ... ymbol];$parent ... l];\n  }$path() ... l];\n  }$shift( ... y);\n  }() {\n   ... y);\n  }{\n    t ... y);\n  }this._r ... ', -1);this._r ... p', -1)this._registerAtomicthis._m ... fied();this._markModified()this._markModifiedconst _ ... _array;__array ... __arraythis.__arrayif (__a ... ;\n    }__array._shifted__array ... = true;__array ...  = true[].shif ... _array)[].shift.call[].shift$pop()  ... s);\n  }this._r ... p', 1);this._r ... op', 1)this._poppedthis._popped = true;this._popped = true[].pop.call(this)[].pop.call[].pop$schema ... l];\n  }_cast(v ... e);\n  }(value) ... e);\n  }let pop ...  false;populated = falseconst p ... ymbol];parent  ... Symbol]populat ...  true);populat ... , true)parent. ... , true)parent.$populatedModel = ... ymbol];Model = ... Symbol]populat ... Symbol]populated.optionsthrow n ... ose.');new Mon ... oose.')'No pop ... goose.''No pop ... Symbol]'No pop ... path `'No populated model found for path `'`. Thi ... goose.'`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.if (Buf ...       }Buffer. ... ectId')value = ... value }{ _id: value }_id: valueisDisc  ... definedvalue.s ... definedvalue.s ... Mappingvalue.schemavalue.s ... ing.key!isDiscnew Model(value)this[ar ... , true)this[ar ... Settersthis[ar ... .casterthis[ar ...  false)_mapCas ... x);\n  }(val, i ... x);\n  }{\n    r ... x);\n  }return  ... index);this._c ...  index)this.length + indexthis.length_markMo ... is;\n  }(elem)  ... is;\n  }let dirtyPath;dirtyPa ... ymbol];dirtyPa ... Symbol]dirtyPa ... + elem;dirtyPa ...  + elemdirtyPath + '.'dirtyPa ... h('.$')dirtyPath != nulldirtyPath.endsWithparent. ... arent);parent. ... parent)parent.markModifiedargumen ...  parent_regist ... is;\n  }(op, va ... is;\n  }this[slicedSymbol]this[ar ...  val };this[ar ... : val }{ $set: val }$set: valcleanMo ... mbol]);cleanMo ... ymbol])op ===  ... tomics)op === '$pop'!('$pop' in atomics)('$pop' in atomics)'$pop' in atomicsthis[ar ...     });this[ar ...      })this[ar ... l].once_this._ ... = null;_this._ ...  = null_this._popped_this._shiftedif (ato ... ;\n    }atomics ... tomics)!(op in atomics)(op in atomics)op in atomicsthis[ar ... this };this[ar ...  this }{ $set: this }$set: thislet selector;atomics ...  = []);atomics ... ] = [])(atomics[op] = [])atomics[op] = []atomics ... t(val);atomics ... at(val)atomics[op].concatop === '$pullDocs'$pullDocsconst p ...  = {});pullOp  ... ] = {})atomics ... ] = {})atomics['$pull'](atomic ... ] = {})atomics ... '] = {}val[0]  ... ocumentselecto ...  = []);selecto ... ] = [])pullOp[ ... ] = [])pullOp['$or'](pullOp['$or'] = [])pullOp['$or'] = []Array.p ...    }));Array.p ...     }))Array.p ... h.applyval.map ...      })v => {\n ...       }v.toObj ...      })transfo ...       }(doc, r ...       }v == nu ... == nullv.$__ == nullv.$__.a ... fault')v.$__.a ... tePathsv.$__.activePathsmpath.u ... , ret);mpath.u ... h, ret)_minimi ...  path);_minimi ... , path)selecto ...  [] });selecto ... : [] })pullOp[ ... : [] })pullOp['_id'](pullOp ... : [] })pullOp[ ... n: [] }{ $in: [] }$in: []selecto ... t(val);selecto ... at(val)selector['$in']selecto ... .concatatomics ... : [] };atomics ... h: [] }atomics.$push{ $each: [] }$each: []val !=  ... $each')utils.h ... $each')atomics.$push = val;atomics.$push = valatomics ... al[0]);atomics ... val[0])atomics ... ch.pushatomics.$push.$eachval.length < 10000atomics ... ..val);atomics ... ...val)...valatomics ... ush(v);atomics ... push(v)atomics[op] = val;atomics[op] = valaddToSe ... ed;\n  }() {\n   ... ed;\n  }{\n    _ ... ed;\n  }_checkM ... ments);_checkM ... uments)_checkM ... ulation_depopu ... ments);_depopu ... uments)_depopu ... cessaryconst v ...  this);values  ... , this)[].map. ... , this)[].map.call[].mapthis._mapCastconst added = [];added = []let type = '';type = ''values[ ... ocumenttype = 'doc';type = 'doc'values[ ... of Datetype = 'date';type = 'date'type = 'ObjectId';type = 'ObjectId'const r ... values;rawValu ...  valuesutils.i ...  valuesutils.i ... values)values.__arrayconst r ... : this;rawArra ...  : thisutils.i ...  : thisutils.i ... y(this)rawValu ...  this);rawValu ... , this)rawValues.forEachconst val = +v;val = +v+vfound = ...      })this.so ...      })this.somereturn  ... als(v);doc.equals(v)doc.equalsreturn +d === val;+d === val+dcase 'O ...  break;found = ... ing());found = ... ring())this.fi ... ring())o => o. ... tring()o.toStr ... tring()o.toString()o.toStringv.toString()v.toStringfound = ... xOf(v);found = ... exOf(v)~this.indexOf(v)this.indexOf(v)this.indexOfif (!fo ...       }rawArray.push(v);rawArray.push(v)rawArray.pushthis._r ... t', v);this._r ... et', v)[].push ... ed, v);[].push ... ded, v)[].push.call[].pushreturn added;hasAtom ... th;\n  }() {\n   ... th;\n  }!utils. ... ymbol])utils.i ... ymbol])include ... -1;\n  }(obj, f ... -1;\n  }{\n    c ... -1;\n  }const r ... Index);ret = t ... mIndex)this.in ... mIndex)return ret !== -1;ret !== -1indexOf ... -1;\n  }{\n    i ... -1;\n  }obj = o ... ring();obj = obj.toString()fromInd ... mIndex;fromInd ... omIndexfromIndex == nulllen = this.lengthlet i = fromIndexi = fromIndexobj == this[i]this[i]JSON.stringify(this)nonAtom ... et;\n  }const r ... alues);ret = [ ... values)[].push ... values)[].push.applythis._r ...  this);this._r ... , this)pop() { ... et;\n  }{\n    t ... et;\n  }const r ... (this);ret = [ ... l(this)pull()  ... is;\n  }() {\n   ... is;\n  }(v, i)  ... alse })this._c ... alse })let cur ... mbol]);cur = t ... ymbol])this[ar ... ymbol])this[ar ... ol].getutils.i ... ay(cur)cur = cur.__array;cur = cur.__arraycur.__arraylet i = cur.length;i = cur.lengthlet mem;mem = cur[i];mem = cur[i]cur[i]if (mem ...       }mem ins ... ocumentconst s ...     });some =  ...      })values. ...      })values.somemem.equals(v)mem.equalsif (som ...       }cur.splice(i, 1);cur.splice(i, 1)cur.spliceif (~th ...       }~this.i ... s, mem)this.in ... s, mem)this.indexOf.callthis._r ...    }));this._r ...     }))pullDocsvalues.mapconst _ ... '_id');_id = v ... ('_id')v.$__getValue('_id')v.$__getValueif (_id ...       }_id === ... ('_id')_id === undefinedv.$isDefault('_id')v.$isDefaultreturn _id;this._r ... alues);this._r ... values)if (cle ... ;\n    }cleanMo ... l]) > 0push()  ... et;\n  }{\n    l ... et;\n  }let val ... uments;let atomic = values;atomic = valuesconst i ... each');isOverw ... $each')values[ ... $each')values[0] != nullconst a ... : this;arr = u ...  : thisatomic = values[0];atomic = values[0]values  ... .$each;values  ... ].$eachvalues[0].$eachthis[ar ... == nullreturn  ... alues);_checkM ... alues);_checkM ... values)_depopu ... alues);_depopu ... values)values  ...  this);atomic. ... values;atomic. ...  valuesatomic.$eachif ((at ...       }(atomic ... osition(atomic ... ) !== 0(atomic ... h || 0)atomics ... th || 0atomics ... .lengthatomics ... h.$eachatomics ... ositionatomic.$positionif (ato ...       }atomic. ... != null[].spli ... lues));[].spli ... alues))[].splice.apply[].splice[atomic ... values)[atomic ... .concat[atomic ... ion, 0]ret = arr.length;ret = arr.lengthret = [ ... alues);ret = this.length;ret = this.lengthatomic = values;ret = _ ... alues);ret = _ ... values)this._r ... tomic);this._r ... atomic)remove( ... s);\n  }this.pu ... uments)this.pull.applythis.pullset(i,  ... is;\n  }(i, val ... is;\n  }const a ... _array;arr = this.__arrayarr[i] = val;arr[i] = valconst v ... al, i);value = ... val, i)methods ... val, i)methods._cast.callmethods._castmethods ... is, i);methods ... his, i)methods ... ed.callmethods ... odifiedarr[i] = value;arr[i] = valueshift() ... et;\n  }const r ... l(arr);ret = [ ... ll(arr)[].shift.call(arr)sort()  ... et;\n  }ret = [ ... uments)[].sort ... uments)[].sort.apply[].sortsplice( ... et;\n  }_checkM ... s, 2));_checkM ... ts, 2))Array.p ... nts, 2)let vals;vals = arguments;vals = argumentsvals = [];i < arguments.lengthvals[i] ...  - 2));vals[i] ... i - 2))i < 2 ? ... i - 2))i < 2this._c ... i - 2))argumen ... (i - 2)(i - 2)i - 2ret = [ ...  vals);ret = [ ... , vals)[].spli ... , vals)toBSON( ... s);\n  }toObjec ... r);\n  }(option ... r);\n  }[].conc ...      })[].concat(arr).map[].concat(arr)return  ...  : doc;doc ins ...   : docreturn  ... t(arr);$toObje ... s);\n  }this.co ... oObjectunshift ... th;\n  }{\n    _ ... th;\n  }[].unsh ... alues);[].unsh ... values)[].unshift.apply[].unshiftreturn this.length;if (!re ... se;\n  }arg.constructorif (!(a ... ;\n    }!(arg i ... == ref)!(arg i ... cument)(arg in ... cument)arg ins ... ocument(model. ... == ref)model.m ... !== refmodel.b ... !== reftypeof partsparts.i ...  === -1parts.indexOf('.')parts.indexOfparts = ... parts);parts = ... (parts)mpath.s ... (parts)mpath.stringToPartsi = i || 0;i = i || 0i || 0if (i > ... rn;\n  }i >= parts.length_minimi ... i + 1);_minimi ...  i + 1)obj[parts[0]]if (obj ... ]];\n  }obj[par ... h === 0obj[par ... object'obj[par ... != nulltypeof obj[parts[0]]Object. ... ts[0]]){\n    d ... ]];\n  }delete  ... ts[0]];delete obj[parts[0]]const r ... | null;ref = a ... || nullarr ==  ... || nullarr[arr ... || nullarr[arr ... ons.refarr[arr ... optionsarr[arr ... .casterarr[arr ... Symbol]if (arr ...   }\n  }arr.len ... h !== 0docs.length !== 0if (_is ... ;\n    }_isAllS ... s, ref)arr[arr ...     });arr[arr ...      })arr[arr ... pulatedarr[arrayPathSymbol]docs[0].constructordocs[0]parentD ... Symbol]path =  ... Symbol]if (!re ... rn;\n  }!ref || ... d(path)!parent ... d(path)parentD ... d(path)parentDoc.populatedtypeof  ... pe(doc)typeof  ...  Buffertypeof  ...  Stringdoc ins ...  Stringdoc ins ...  Numberdoc ins ...  Bufferutils.i ... pe(doc)utils.isMongooseTypeparentD ... (path);parentD ... e(path)parentDoc.depopulateconst r ... ice'\n];returnV ... lice'\n]returnV ... Methods[\n  'fi ... lice'\n]for (co ... \n  };\n}{\n  if  ... \n  };\n}Array.p ... == nullArray.p ... method]methods ... );\n  };methods ... s);\n  }methods[method]const _ ... : this;_arr =  ...  : thisconst a ... (_arr);arr = [ ... t(_arr)[].concat(_arr)arr[met ... uments)arr[method].applyarr[method]module. ... ethods;module. ... methods/home/insomnia/repos/mongoose/lib/types/arraySubdocument.js
 * A constructor.
 *
 * @param {Object} obj js object returned from the db
 * @param {MongooseDocumentArray} parentArr the parent array of this document
 * @param {Boolean} skipId
 * @param {Object} fields
 * @param {Number} index
 * @inherits Document
 * @api private
 !
 * Inherit from Subdocument
 
 * Returns the full path to this document. If optional `path` is passed, it is appended to the full path.
 *
 * @param {String} [path]
 * @param {Boolean} [skipIndex] Skip adding the array index. For example `arr.foo` instead of `arr.0.foo`.
 * @return {String}
 * @api private
 * @method $__fullPath
 * @memberOf ArraySubdocument
 * @instance
 
 * Given a path relative to this document, return the path relative
 * to the top-level document.
 * @method $__pathRelativeToParent
 * @memberOf ArraySubdocument
 * @instance
 * @api private
 
 * Returns this sub-documents parent document.
 * @method $parent
 * @memberOf ArraySubdocument
 * @instance
 * @api public
 
 * Returns this subdocument's parent array.
 *
 * #### Example:
 *
 *     const Test = mongoose.model('Test', new Schema({
 *       docArr: [{ name: String }]
 *     }));
 *     const doc = new Test({ docArr: [{ name: 'test subdoc' }] });
 *
 *     doc.docArr[0].parentArray() === doc.docArr; // true
 *
 * @api public
 * @method parentArray
 * @returns DocumentArray
 parentArr'$isSingleNested''Mongoose does not support calling populate() on nested ''docs. Instead of `doc.arr[0].populate("path")`, use ''`doc.populate("arr.0.path")`'$__removeFromParent'For your own good, Mongoose does not know ''how to remove an ArraySubdocument that has no _id'skipIndexparentArrayA constructor.js object returned from the db
the parent array of this document
Returns the full path to this document. If optional `path` is passed, it is appended to the full path.Skip adding the array index. For example `arr.foo` instead of `arr.0.foo`.
ArraySubdocument
Given a path relative to this document, return the path relative
to the top-level document.Returns this sub-documents parent document.Returns this subdocument's parent array.

#### Example:

const Test = mongoose.model('Test', new Schema({
docArr: [{ name: String }]
}));
const doc = new Test({ docArr: [{ name: 'test subdoc' }] });

doc.docArr[0].parentArray() === doc.docArr; // trueutils.i ... entArr)this.__ ... entArr;this.__ ... rentArrthis[do ... rent();this[do ... arent()parentArr.$parent()parentArr.$parent{\n    t ... ed;\n  }this.__ ... efined;this.__ ... definedthis[do ... efined;this[do ... definedthis.$s ... index);this.$s ... (index)this.$setIndexthis.$_ ... arent];this.$_ ... Parent]let options;options ... ipId };options ... kipId }{ isNew ... kipId }isNew: true...skipIdskipId = undefined;skipId = undefinedoptions ... true };options ...  true }{ isNew: true }Subdocu ... tions);Subdocu ... ptions)Subdocument.callArraySu ... otype);ArraySu ... totype)ArraySu ... ototypeArraySu ... cument;ArraySu ... ocumentArraySu ... tructorObject. ... lse\n});isSingleNested{\n  con ... false\n}value: false{\n  Arr ... e[i];\n}ArraySu ... ype[i];ArraySu ... type[i]ArraySubdocument[i]ArraySu ... \n  }\n};ArraySu ... }\n  }\n}ArraySu ... etIndex{\n  thi ... }\n  }\n}this.__ ...  index;this.__index = indexthis.__indexthis.$__ != nullthis.$_ ... rs[key]ArraySu ... `');\n};ArraySu ... )`');\n}ArraySu ... opulatefunctio ... )`');\n}{\n  thr ... )`');\n}throw n ... h")`');new Err ... th")`')'Mongoo ... ath")`''Mongoo ... , use ''Mongoo ... ested 'Mongoose does not support calling populate() on nested 'docs.  ... , use 'docs. Instead of `doc.arr[0].populate("path")`, use '`doc.p ... ath")`'`doc.populate("arr.0.path")`Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`Mongoose does not support calling populate on nested docs Instead of `doc[0]("path")"path"`, use `doc("arr.0.path")"arr.0.path""arrpath"ArraySu ...  });\n};ArraySu ... d });\n}ArraySu ... mParentfunctio ... d });\n}{\n  con ... d });\n}const _ ... oc._id;_id = this._doc._idif (!_i ... ');\n  }!_idthrow n ...  _id');new Err ... o _id')'For yo ... no _id''For yo ...  know 'For your own good, Mongoose does not know 'how to ... no _id'how to remove an ArraySubdocument that has no _idFor your own good, Mongoose does not know how to remove an ArraySubdocument that has no _idthis.__ ... _id });this.__ ...  _id })this.__ ... ay.pull{ _id: _id }_id: _idArraySu ... dex;\n};ArraySu ... ndex;\n}ArraySu ... ullPath{\n  if  ... ndex;\n}this.__index == null!this.$__.fullPaththis.ow ... ment();if (ski ... th;\n  }return  ... llPath;path ?\n ... ullPathreturn  ... _index;path ?\n ... __indexthis.$_ ... x + '.'this.$_ ... __indexArraySu ... ath;\n};ArraySu ... path;\n}ArraySu ... oParentfunctio ... path;\n}{\n  if  ... path;\n}this.__ ... .$path)(!this. ... .$path)!this._ ... y.$path!this.__parentArraythis.__ ... y.$pathreturn  ... + path;path == ...  + paththis.__ ... $path()this.__ ...  + paththis.__ ... ) + '.'if (pat ... ex;\n  }this.__ ... __indexthis.__ ... x + '.'ArraySu ... nt];\n};ArraySu ... ent];\n}ArraySu ... $parentfunctio ... ent];\n}{\n  ret ... ent];\n}return  ... arent];ArraySu ... ray;\n};ArraySu ... rray;\n}ArraySu ... ntArrayreturn  ... tArray;/home/insomnia/repos/mongoose/lib/types/buffer.js
 * Mongoose Buffer constructor.
 *
 * Values always have to be passed to the constructor to initialize.
 *
 * @param {Buffer} value
 * @param {String} encode
 * @param {Number} offset
 * @api private
 * @inherits Buffer https://nodejs.org/api/buffer.html
 * @see https://bit.ly/f6CnZU
  internal casting// internal casting string, array or object { type: 'Buffer', data: [...] }// stri ... [...] } make sure these internal props don't show up in Object.keys()// make ... .keys()!
 * Inherit from Buffer.
 
   * Default subtype for the Binary representing this Buffer
   *
   * @api private
   * @property _subtype
   * @memberOf MongooseBuffer.mixin
   * @static
   /**\n    ... c\n   */
   * Marks this buffer as modified.
   *
   * @api private
   * @method _markModified
   * @memberOf MongooseBuffer.mixin
   * @static
   
   * Writes the buffer.
   *
   * @api public
   * @method write
   * @memberOf MongooseBuffer.mixin
   * @static
   
   * Copies the buffer.
   *
   * #### Note:
   *
   * `Buffer#copy` does not mark `target` as modified so you must copy from a `MongooseBuffer` for it to work as expected. This is a work around since `copy` modifies the target, not this.
   *
   * @return {Number} The number of bytes copied.
   * @param {Buffer} target
   * @method copy
   * @memberOf MongooseBuffer.mixin
   * @static
   !
 * Compile other Buffer methods marking this buffer as modified.
 /*!\n *  ... ed.\n */ node < 0.5// node < 0.5 node >= 0.5// node >= 0.5
 * Converts this buffer to its Binary type representation.
 *
 * #### SubTypes:
 *
 *     const bson = require('bson')
 *     bson.BSON_BINARY_SUBTYPE_DEFAULT
 *     bson.BSON_BINARY_SUBTYPE_FUNCTION
 *     bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY
 *     bson.BSON_BINARY_SUBTYPE_UUID
 *     bson.BSON_BINARY_SUBTYPE_MD5
 *     bson.BSON_BINARY_SUBTYPE_USER_DEFINED
 *     doc.buffer.toObject(bson.BSON_BINARY_SUBTYPE_USER_DEFINED);
 *
 * @see bsonspec https://bsonspec.org/#/specification
 * @param {Hex} [subtype]
 * @return {Binary}
 * @api public
 * @method toObject
 * @memberOf MongooseBuffer
 /**\n *  ... fer\n */
 * Converts this buffer for storage in MongoDB, including subtype
 *
 * @return {Binary}
 * @api public
 * @method toBSON
 * @memberOf MongooseBuffer
 
 * Converts this buffer to a UUID. Throws an error if subtype is not 4.
 *
 * @return {UUID}
 * @api public
 * @method toUUID
 * @memberOf MongooseBuffer
 
 * Determines if this buffer is equals to `other` buffer
 *
 * @param {Buffer} other
 * @return {Boolean}
 * @method equals
 * @memberOf MongooseBuffer
 
 * Sets the subtype option and marks the buffer modified.
 *
 * #### SubTypes:
 *
 *     const bson = require('bson')
 *     bson.BSON_BINARY_SUBTYPE_DEFAULT
 *     bson.BSON_BINARY_SUBTYPE_FUNCTION
 *     bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY
 *     bson.BSON_BINARY_SUBTYPE_UUID
 *     bson.BSON_BINARY_SUBTYPE_MD5
 *     bson.BSON_BINARY_SUBTYPE_USER_DEFINED
 *
 *     doc.buffer.subtype(bson.BSON_BINARY_SUBTYPE_UUID);
 *
 * @see bsonspec https://bsonspec.org/#/specification
 * @param {Hex} subtype
 * @api public
 * @method subtype
 * @memberOf MongooseBuffer
 decoratemixinparentSymbol'mongoose#Buffer#_path''mongoose#Buffer#_parent'written'writeUInt8''writeUInt16''writeUInt32''writeInt8''writeInt16''writeInt32''writeFloat''writeDouble''fill''utf8Write''binaryWrite''asciiWrite''set''writeUInt16LE''writeUInt16BE''writeUInt32LE''writeUInt32BE''writeInt16LE''writeInt16BE''writeInt32LE''writeInt32BE''writeFloatLE''writeFloatBE''writeDoubleLE''writeDoubleBE''Cannot convert a Buffer with subtype '' to a UUID''Invalid subtype. Expected a number'Mongoose Buffer constructor.

Values always have to be passed to the constructor to initialize.Buffer https://nodejs.org/api/buffer.html
Default subtype for the Binary representing this BufferMongooseBuffer.mixin
Marks this buffer as modified.Writes the buffer.Copies the buffer.

#### Note:

`Buffer#copy` does not mark `target` as modified so you must copy from a `MongooseBuffer` for it to work as expected. This is a work around since `copy` modifies the target, not this.The number of bytes copied.
Converts this buffer to its Binary type representation.

#### SubTypes:

const bson = require('bson')
bson.BSON_BINARY_SUBTYPE_DEFAULT
bson.BSON_BINARY_SUBTYPE_FUNCTION
bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY
bson.BSON_BINARY_SUBTYPE_UUID
bson.BSON_BINARY_SUBTYPE_MD5
bson.BSON_BINARY_SUBTYPE_USER_DEFINED
doc.buffer.toObject(bson.BSON_BINARY_SUBTYPE_USER_DEFINED);bsonspec https://bsonspec.org/#/specification
Hex=HexConverts this buffer for storage in MongoDB, including subtypeConverts this buffer to a UUID. Throws an error if subtype is not 4.Determines if this buffer is equals to `other` bufferSets the subtype option and marks the buffer modified.

#### SubTypes:

const bson = require('bson')
bson.BSON_BINARY_SUBTYPE_DEFAULT
bson.BSON_BINARY_SUBTYPE_FUNCTION
bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY
bson.BSON_BINARY_SUBTYPE_UUID
bson.BSON_BINARY_SUBTYPE_MD5
bson.BSON_BINARY_SUBTYPE_USER_DEFINED

doc.buffer.subtype(bson.BSON_BINARY_SUBTYPE_UUID);const U ... ).UUID;UUID =  ... ').UUIDrequire('bson').UUIDfunctio ...  buf;\n}{\n  let ...  buf;\n}let val = value;val = value{\n    val = 0;\n  }val = 0;val = 0let encoding;if (Arr ... de;\n  }Array.i ... encode){\n    / ... 1];\n  }path = encode[0];path = encode[0]encode[0]doc = encode[1];doc = encode[1]encode[1]encoding = encode;encoding = encodelet buf;if (typ ... t);\n  }{\n    b ... l);\n  }buf = B ... c(val);buf = B ... oc(val)Buffer.alloc(val){ // st ... t);\n  }buf = B ... ffset);buf = B ... offset)Buffer. ... offset)utils.d ... mixin);utils.d ... .mixin)utils.decorateMongooseBuffer.mixinbuf.isM ... = true;buf.isM ...  = truebuf.isMongooseBufferbuf[Mon ... = path;buf[Mon ...  = pathbuf[Mon ... Symbol]buf[par ...  = doc;buf[par ... ] = docbuf[parentSymbol]buf._subtype = 0;buf._subtype = 0const p ... path');pathSym ... _path')Symbol. ... _path')mongoose#Buffer#_pathconst p ... rent');parentS ... arent')Symbol. ... arent')mongoose#Buffer#_parentMongoos ... Symbol;Mongoos ... \n  }\n};Mongoos ... ;\n  }\n}{\n\n  /* ... ;\n  }\n}_subtype: undefinedthis[parentSymbol]parent. ... mbol]);parent. ... ymbol])this[Mo ... Symbol]write:  ... en;\n  }functio ... en;\n  }{\n    c ... en;\n  }const w ... ments);written ... uments)Buffer. ... uments)Buffer. ... e.applyBuffer. ... e.writeBuffer.prototypeif (wri ... ;\n    }written > 0return written;copy: f ... et;\n  }ret = B ... uments)Buffer. ... y.applyBuffer. ... pe.copyif (tar ... ;\n    }target  ... eBuffertarget. ... eBuffertarget. ... fied();target. ... ified()target._markModifiedutils.e ... };\n  })[\n    / ... bleBE']writeUInt16writeUInt32writeInt16writeInt32writeFloatwriteDouble!Buffer ... method]Buffer. ... method]Mongoos ... \n    };Mongoos ... ;\n    }Mongoos ... method]Buffer. ... ].applyMongoos ... pe);\n};Mongoos ... ype);\n}Mongoos ... oObjectfunctio ... ype);\n}{\n  con ... ype);\n}const s ...  || 0);subtype ... e || 0)typeof  ... e || 0)(this._subtype || 0)this._subtype || 0this._subtypereturn  ... btype);new Bin ... ubtype)Buffer.from(this)Mongoos ... Object;Mongoos ...  0);\n};Mongoos ... | 0);\n}Mongoos ... .toBSONfunctio ... | 0);\n}{\n  ret ... | 0);\n}return  ...  || 0);new Bin ... e || 0)Mongoos ... is);\n};Mongoos ... his);\n}Mongoos ... .toUUIDthis._subtype !== 4throw n ... UUID');new Err ...  UUID')'Cannot ... a UUID''Cannot ... subtype'Cannot ... btype 'Cannot convert a Buffer with subtype  to a UUIDnew UUID(this)Mongoos ... rue;\n};Mongoos ... true;\n}Mongoos ... .equalsif (!Bu ... se;\n  }!Buffer ... (other)Buffer. ... (other)this.le ... .lengthother.lengthi < this.lengththis[i] !== other[i]other[i]Mongoos ... ype;\n};Mongoos ... type;\n}Mongoos ... subtype{\n  if  ... type;\n}typeof subtype'Invali ... number'Invalid subtype. Expected a numberInvalid subtype Expected a numberthis._s ... subtypethis._s ... ubtype;Mongoos ... Binary;Mongoos ...  Binary/home/insomnia/repos/mongoose/lib/types/decimal128.js
 * Decimal128 type constructor
 *
 * #### Example:
 *
 *     const id = new mongoose.Types.Decimal128('3.1415');
 *
 * @constructor Decimal128
 /**\n *  ... 128\n */Decimal128 type constructor

#### Example:

const id = new mongoose.Types.Decimal128('3.1415');/home/insomnia/repos/mongoose/lib/types/documentArray/index.js/home/insomnia/repos/mongoose/lib/types/documentArray
 * DocumentArray constructor
 *
 * @param {Array} values
 * @param {String} path the path to this array
 * @param {Document} doc parent document
 * @api private
 * @return {MongooseDocumentArray}
 * @inherits MongooseArray
 * @see https://bit.ly/f6CnZU
  `schema.path()` doesn't drill into nested arrays properly yet, see// `sch ... et, see gh-6398, gh-6602. This is a workaround because nested arrays are// gh-6 ... ays are always plain non-document arrays, so once you get to a document array// alwa ... t array nesting is done. Matryoshka code.// nest ... a code.ArrayMethods'../array/methods'DocumentArrayMethods'isMongooseArray''isMongooseArrayProxy''isMongooseDocumentArray''isMongooseDocumentArrayProxy'DocumentArray constructorthe path to this array
const A ... hods');ArrayMe ... thods')../array/methods/array/methodsconst D ... hods');Documen ... thods'){\n  con ... roxy;\n}const __array = [];const i ...  0\n  };interna ... d 0\n  }{\n    [ ... d 0\n  }[arrayS ...  void 0if (Arr ... });\n  }values[ ... === docvalues[ ... == pathinterna ... mbol]);interna ... ymbol])values. ...     });values. ... \n    })values.forEachv => {\n ... ;\n    }_basePu ... ay, v);_basePu ... ray, v)interna ... = path;interna ...  = pathinterna ... _array;interna ... __arrayinternals.__arrayinterna ... ntArrayinterna ... seArrayinterna ... != null!intern ... ntArrayinterna ... ructor;interna ... tructorprop == ... yProxy'prop == ... tArray'prop == ... eArray''isMong ... yProxy''isMong ... tArray'isMongooseDocumentArrayProxyif (Doc ...       }Documen ... y(prop)Documen ... ropertyDocumen ... s[prop]ArrayMe ... y(prop)ArrayMe ... ropertyArrayMethods[prop]Documen ... false);Documen ...  false)Documen ... et.callDocumen ... ods.set/home/insomnia/repos/mongoose/lib/types/documentArray/isMongooseDocumentArray.jsmongooseDocumentArraymongoos ... ntArrayArray.i ... tArray)/home/insomnia/repos/mongoose/lib/types/documentArray/methods/index.js/home/insomnia/repos/mongoose/lib/types/documentArray/methods
   * Overrides MongooseArray#cast
   *
   * @method _cast
   * @api private
   * @memberOf MongooseDocumentArray
    Hack re: #5001, see #5005// Hack ... e #5005 value may have been created using array.create()// valu ... reate() handle cast('string') or cast(ObjectId) etc.// hand ... d) etc.
   * Searches array items for the first document with a matching _id.
   *
   * #### Example:
   *
   *     const embeddedDoc = m.array.id(some_id);
   *
   * @return {EmbeddedDocument|null} the subdocument or null if not found.
   * @param {ObjectId|String|Number|Buffer} id
   * @TODO cast to the _id based on schema for proper comparison
   * @method id
   * @api public
   * @memberOf MongooseDocumentArray
   
   * Returns a native js Array of plain js objects
   *
   * #### Note:
   *
   * _Each sub-document is converted to a plain object by calling its `#toObject` method._
   *
   * @param {Object} [options] optional options to pass to each documents `toObject` method call during conversion
   * @return {Array}
   * @method toObject
   * @api public
   * @memberOf MongooseDocumentArray
    `[].concat` coerces the return value into a vanilla JS array, rather// `[]. ...  rather than a Mongoose array.// than ...  array.
   * Wraps [`Array#push`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push) with proper change tracking.
   *
   * @param {...Object} [args]
   * @api public
   * @method push
   * @memberOf MongooseDocumentArray
   
   * Pulls items from the array atomically.
   *
   * @param {...Object} [args]
   * @api public
   * @method pull
   * @memberOf MongooseDocumentArray
   
   * Wraps [`Array#shift`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) with proper change tracking.
   * @api private
   
   * Wraps [`Array#splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice) with proper change tracking and casting.
   * @api private
   
   * Helper for console.log
   *
   * @method inspect
   * @api public
   * @memberOf MongooseDocumentArray
   
   * Creates a subdocument casted to this schema.
   *
   * This is the same subdocument constructor used for casting.
   *
   * @param {Object} obj the value to cast to this arrays SubDocument schema
   * @method create
   * @api public
   * @memberOf MongooseDocumentArray
    only swap for save event for now, we may change this to all event types later// only ... s later NO-OP// NO-OP an embedded doc bubbled up the change// an e ...  change directly set an index// dire ... n index
 * If this is a document array, each element may contain single
 * populated paths, so we need to modify the top-level document's
 * populated cache. See gh-8247, gh-8265.
 * @param {Array} arr
 * @api private
 '../../array/methods''../../../cast/objectid''../../../helpers/discriminator/getDiscriminatorByValue'_baseToString_updateParentPopulatedOverrides MongooseArray#castSearches array items for the first document with a matching _id.

#### Example:

const embeddedDoc = m.array.id(some_id);the subdocument or null if not found.
(EmbeddedDocument|null)(ObjectId|String|Number|Buffer)@TODOcast to the _id based on schema for proper comparison
Returns a native js Array of plain js objects

#### Note:

_Each sub-document is converted to a plain object by calling its `#toObject` method._optional options to pass to each documents `toObject` method call during conversion
Wraps [`Array#push`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push) with proper change tracking.Pulls items from the array atomically.Wraps [`Array#shift`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) with proper change tracking.Wraps [`Array#splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice) with proper change tracking and casting.Creates a subdocument casted to this schema.

This is the same subdocument constructor used for casting.the value to cast to this arrays SubDocument schema
If this is a document array, each element may contain single
populated paths, so we need to modify the top-level document's
populated cache. See gh-8247, gh-8265.'../../ ... ethods'../../array/methods../../../cast/objectid../../../helpers/discriminator/getDiscriminatorByValueconst _ ... String;_baseTo ... oString{\n  /*! ... ;\n  }\n}toStrin ... ));\n  }() {\n   ... ));\n  }_baseTo ...     }))_baseToString.callthis.__ ... \n    })this.__array.mapsubdoc  ... ;\n    }subdoc.toString()subdoc.toStringgetArra ... l];\n  }_cast(v ... et;\n  }(value, ... et;\n  }this[ar ... tructorconst i ... ructor;isInsta ... tructorConstru ... ntArrayisInsta ... ructor)value & ... tructorvalue.c ... tructor!(value ... tArray)(value[ ... tArray)value[d ... ntArrayvalue[d ... Parent]value.__parentArrayvalue[d ... ymbol];value[d ... Symbol]value._ ... = this;value._ ...  = thisvalue.$ ... index);value.$ ... (index)value.$setIndexvalue = ... == nullvalue & ... atorKeyvalue & ... optionsvalue & ... .schemavalue & ... inatorsvalue[C ... torKey]Constru ...  index)Constructor.castconst r ... index);ret = n ...  index)new Con ...  index)ret.isNew = true;ret.isNew = trueret.isNewid(id)  ... ll;\n  }(id) {\n ... ll;\n  }{\n    l ... ll;\n  }let _id;casted  ... ring();casted  ... tring()castObj ... tring()castObj ... oStringcastObjectId(id)casted = null;casted = null_id = v ... '_id');_id = val.get('_id')val.get('_id')_id === ... efined'_id === null_id ins ... ocumentsid ||  ... g(id));sid ||  ... ng(id))(sid = String(id))if (sid ...       }sid == _id._id_id._idid == _ ... d, _id)id == _idutils.d ... d, _id)casted == _idtoObjec ... ));\n  }(option ... ));\n  }[].conc ...     }))this.ma ... \n    })typeof doc.toObjectret = A ... uments)ArrayMe ... uments)ArrayMe ... h.applyArrayMethods.push_update ... (this);_update ... d(this)_update ... pulatedpull()  ... et;\n  }ArrayMe ... l.applyArrayMethods.pullArrayMe ... t.applyArrayMethods.shiftArrayMe ... e.applyArrayMethods.spliceinspect ... ();\n  }() {\n   ... ();\n  }return  ... ject();create( ... s);\n  }(obj) { ... s);\n  }if (obj ... }\n    }obj &&\n ... atorKeyobj &&\n ... optionsobj &&\n ... .schemaobj &&\n ... inatorsobj[Con ... torKey]new Con ... , this)notify( ...  };\n  }(event) ...  };\n  }_arr =  ...  _this;_arr = _arr || _this_arr || _thislet i = _arr.length;i = _arr.length_arr.lengthif (_ar ...       }_arr[i] == null_arr[i]val = _this[i];val = _this[i]_this[i]utils.i ... arr[i])notify( ... rr[i]);notify(val, _arr[i])_arr[i] ... , val);_arr[i] ... t, val)_arr[i].emit(elem,  ... is;\n  }if (emb ...       }embeddedPath != nullindex = elem.__indexelem.__indexdirtyPa ... edPath;dirtyPa ... dedPathdirtyPa ... x + '.'dirtyPa ... + indexif (!pa ... return;!parent ... == null!parentparent. ... == nullparent.$__.populatedconst p ...  '.'));populat ... + '.'))Object. ... + '.'))p => p. ...  + '.')arr[arr ... ] + '.'remnant ... length)path.sl ... length)(arr[ar ... .length(arr[ar ...  + '.')!Array. ... .value)Array.i ... .value)parent. ... ].valueparent. ... d[path]parent. ... nant));parent. ... mnant))arr.map ... mnant))val =>  ... emnant)val.$po ... emnant)val.$populated/home/insomnia/repos/mongoose/lib/types/double.js
 * Double type constructor
 *
 * #### Example:
 *
 *     const pi = new mongoose.Types.Double(3.1415);
 *
 * @constructor Double
 Double type constructor

#### Example:

const pi = new mongoose.Types.Double(3.1415);module. ... .Doublerequire ... .Double/home/insomnia/repos/mongoose/lib/types/index.js @deprecate// @deprecate'./arraySubdocument''./objectid'exports.Embedded./arraySubdocumentexports ... ctid');exports ... ectid')./objectid/objectid/home/insomnia/repos/mongoose/lib/types/map.js
   * Overwrites native Map's `get()` function to support Mongoose getters.
   *
   * @api public
   * @method get
   * @memberOf Map
   /**\n    ... p\n   */
   * Overwrites native Map's `set()` function to support setters, `populate()`,
   * and change tracking. Note that Mongoose maps _only_ support strings and
   * ObjectIds as keys.
   *
   * Keys also cannot:
   * - be named after special properties `prototype`, `constructor`, and `__proto__`
   * - start with a dollar sign (`$`)
   * - contain any dots (`.`)
   *
   * #### Example:
   *
   *     doc.myMap.set('test', 42); // works
   *     doc.myMap.set({ obj: 42 }, 42); // Throws "Mongoose maps only support string keys"
   *     doc.myMap.set(10, 42); // Throws "Mongoose maps only support string keys"
   *     doc.myMap.set("$test", 42); // Throws "Mongoose maps do not support keys that start with "$", got "$test""
   *
   * @api public
   * @method set
   * @memberOf Map
    Weird, but because you can't assign to `this` before calling `super()`// Weir ... uper()` you can't get access to `$__schemaType` to cast in the initial call to// you  ... call to `set()` from the `super()` constructor.// `set ... ructor. Doesn't support single nested "in-place" populate// Does ... opulate If overwriting the full document array or subdoc, make sure to clean up any paths that were modified// If o ... odified before re: #15108// before re: #15108 Delay calculating full path unless absolutely necessary, because string// Dela ...  string concatenation is a bottleneck re: #13171// conc ...  #13171
   * Overwrites native Map's `clear()` function to support change tracking.
   *
   * @api public
   * @method clear
   * @memberOf Map
   
   * Overwrites native Map's `delete()` function to support change tracking.
   *
   * @api public
   * @method delete
   * @memberOf Map
   
   * Converts this map to a native JavaScript Map so the MongoDB driver can serialize it.
   *
   * @api public
   * @method toBSON
   * @memberOf Map
   
   * Converts this map to a native JavaScript Map for `JSON.stringify()`. Set
   * the `flattenMaps` option to convert this map to a POJO instead.
   *
   * #### Example:
   *
   *     doc.myMap.toJSON() instanceof Map; // true
   *     doc.myMap.toJSON({ flattenMaps: true }) instanceof Map; // false
   *
   * @api public
   * @method toJSON
   * @param {Object} [options]
   * @param {Boolean} [options.flattenMaps=false] set to `true` to convert the map to a POJO rather than a native JavaScript map
   * @memberOf Map
   
 * Set to `true` for all Mongoose map instances
 *
 * @api public
 * @property $isMongooseMap
 * @memberOf MongooseMap
 * @instance
 
 * Since maps are stored as objects under the hood, keys must be strings
 * and can't contain any invalid characters
 * @param {String} key
 * @api private
 '../schema/mixed''../helpers/specialProperties''../helpers/document/cleanModifiedSubpaths'$__runDeferredcheckValidKey$__deferred'Cannot manually populate single nested subdoc underneath Map 'at path "". Try using an array instead of a Map.flattenMapskeyValueObject'$__set''$__path''$__schemaType''$isMongooseMap''$__deferredCalls'keyTypeMongoose maps only support string keys, got Mongoose maps do not support keys that start with "$", got "Mongoose maps do not support keys that contain ".", got "Mongoose maps do not support reserved key name "Overwrites native Map's `get()` function to support Mongoose getters.Overwrites native Map's `set()` function to support setters, `populate()`,
and change tracking. Note that Mongoose maps _only_ support strings and
ObjectIds as keys.

Keys also cannot:
- be named after special properties `prototype`, `constructor`, and `__proto__`
- start with a dollar sign (`$`)
- contain any dots (`.`)

#### Example:

doc.myMap.set('test', 42); // works
doc.myMap.set({ obj: 42 }, 42); // Throws "Mongoose maps only support string keys"
doc.myMap.set(10, 42); // Throws "Mongoose maps only support string keys"
doc.myMap.set("$test", 42); // Throws "Mongoose maps do not support keys that start with "$", got "$test""Overwrites native Map's `clear()` function to support change tracking.Overwrites native Map's `delete()` function to support change tracking.Converts this map to a native JavaScript Map so the MongoDB driver can serialize it.Converts this map to a native JavaScript Map for `JSON.stringify()`. Set
the `flattenMaps` option to convert this map to a POJO instead.

#### Example:

doc.myMap.toJSON() instanceof Map; // true
doc.myMap.toJSON({ flattenMaps: true }) instanceof Map; // falseset to `true` to convert the map to a POJO rather than a native JavaScript map
Set to `true` for all Mongoose map instancesMongooseMap
Since maps are stored as objects under the hood, keys must be strings
and can't contain any invalid characters../schema/mixedrequire ... epEqual'../hel ... erties'../helpers/specialProperties'../hel ... bpaths'../helpers/document/cleanModifiedSubpathsconstru ... ();\n  }(v, pat ... ();\n  }getCons ... Name(v)v = Obj ... ), []);v = Obj ... ]), [])(arr, k ... key]]])arr.con ... key]]])[[key, v[key]]][key, v[key]]super(v);super(v)this.$_ ... : null;this.$_ ...  : nulldoc !=  ...  : nullthis.$__path = path;this.$__path = paththis.$_ ... maType;this.$_ ... emaTypenew Mixed(path)this.$_ ... rred();this.$_ ... erred()this.$__runDeferred$init(k ...   }\n  }(key, v ...   }\n  }checkValidKey(key);checkValidKey(key)super.s ... value);super.s ...  value)super.setvalue ! ... eNestedvalue.$ ...  + key;value.$ ... ' + keyvalue.$basePaththis.$_ ... ' + keythis.$__path + '.'$__set( ... e);\n  }(key, v ... e);\n  }get(key ... t);\n  }(key, o ... t);\n  }key = k ... ring();key = key.toString()key.toString()key.toStringreturn  ... t(key);super.get(key)super.getreturn  ... arent);this.$_ ... parent)this.$_ ... Gettersset(key ...   }\n  }handleS ... (value)this.$_ ...  || [];this.$_ ... d || []this.$__deferredthis.$_ ... lue });this.$_ ... alue })this.$_ ... ed.push{ key:  ... value }let _fullPath;const p ... parent;parent  ... _parentconst p ...   null;populat ...    nullparent  ...    nullparent  ... pulatedparent  ... ent.$__parent != nullfullPath.call(this)fullPath.callconst p ... t(key);priorVa ... et(key)this.get(key)populated != nullthis.$_ ... eNested'Cannot ... a Map.`'Cannot ... h Map 'Cannot manually populate single nested subdoc underneath Map `at pat ... a Map.`". Try  ...  a Map.this.$_ ... seArrayvalue.m ...      })value.mapif (v.$ ...       }v = new ... ol](v);v = new ... bol](v)new pop ... bol](v)v.$__.w ... ._id };v.$__.w ... c._id }v.$__.wasPopulatedvalue: v._doc._idnew pop ... (value)const o ...   null;options ...    nullthis.$_ ... hemaMapthis.$_ ... ntArray{ path: ... this) }path: f ... l(this)value = ...      );value = ...       )this.$_ ...       )this.$_ ... Settersthis.$__parent.$__this.$_ ...  error)if (par ... }\n    }parent  ... iorVal)parent  ... != nullparent.$__ != null!deepEq ... iorVal)const p ... (this);path =  ... l(this)parent. ... (path);parent. ... d(path)if (_fu ...       }return _fullPath;_fullPa ...  + key;_fullPa ... ' + keyclear() ...   }\n  }super.clear();super.clear()super.clearparent. ... _path);parent. ... __path)delete( ... y);\n  }(key) { ... y);\n  }{\n    i ... y);\n  }this.se ... fined);this.se ... efined)return  ... e(key);super.delete(key)super.deletenew Map(this)toObjec ... s);\n  }(option ... s);\n  }options ... tenMapsconst k ... keys();keys = this.keys()this.keys()this.keysret[key ... tions);ret[key ... ptions)typeof  ... enMaps)(option ... enMaps)$__runD ... ll;\n  }() {\n   ... ll;\n  }!this.$__deferredconst keyValueObjectthis.se ... .value)keyValueObject.keykeyValueObject.valueif (uti ...   });\n}{\n  Obj ...   });\n}Object. ... t\n  });Object. ... ct\n  }){\n    e ... ect\n  }value:  ... inspectMongoos ... inspect__set{\n  enu ... false\n}__path__schemaTypeisMongooseMap{\n  enu ...  true\n}$__deferredCalls__deferredCallsconst k ... of key;keyType = typeof keyif (key ... `);\n  }keyType !== 'string'throw n ... ype}`);new Typ ... Type}`)`Mongoo ... yType}`Mongoos ... s, got throw n ... ey}"`);new Err ... key}"`)`Mongoo ... {key}"`Mongoos ... , got "key.includes('.')if (spe ... `);\n  }Mongoos ...  name "module. ... oseMap;module. ... ooseMap/home/insomnia/repos/mongoose/lib/types/objectid.js
 * ObjectId type constructor
 *
 * #### Example:
 *
 *     const id = new mongoose.Types.ObjectId;
 *
 * @constructor ObjectId
 /**\n *  ... tId\n */!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 /*!\n *  ... 299\n */'valueOf'objectIdValueOfObjectId type constructor

#### Example:

const id = new mongoose.Types.ObjectId;require ... bjectIdif (!Ob ... \n  };\n}!Object ... lueOf')ObjectI ... lueOf')ObjectI ... roperty{\n  Obj ... \n  };\n}ObjectI ... );\n  };ObjectI ... ();\n  }ObjectI ... valueOfObjectI ... = true;ObjectI ...  = trueObjectI ... Symbol]/home/insomnia/repos/mongoose/lib/types/subdocument.js
 * Subdocument constructor.
 *
 * @inherits Document
 * @api private
  If setting a nested path, should copy isNew from parent re: gh-7048// If s ... gh-7048
 * Used as a stub for middleware
 *
 * #### Note:
 *
 * _This is a no-op. Does not actually save the doc to the db._
 *
 * @param {Function} [fn]
 * @return {Promise} resolved Promise
 * @api private
 
 * Given a path relative to this document, return the path relative
 * to the top-level document.
 * @param {String} path
 * @method $__fullPath
 * @memberOf Subdocument
 * @instance
 * @returns {String}
 * @api private
 
 * Given a path relative to this document, return the path relative
 * to the parent document.
 * @param {String} p
 * @returns {String}
 * @method $__pathRelativeToParent
 * @memberOf Subdocument
 * @instance
 * @api private
 
 * Used as a stub for middleware
 *
 * #### Note:
 *
 * _This is a no-op. Does not actually save the doc to the db._
 *
 * @param {Function} [fn]
 * @method $__save
 * @api private
 
 * Marks a path as valid, removing existing validation errors.
 *
 * @param {String} path the field to mark as valid
 * @api private
 * @method $markValid
 * @memberOf Subdocument
 
 * Returns the top level document of this sub-document.
 *
 * @return {Document}
  eslint-disable-line consistent-this// esli ... nt-this
 * Returns this sub-documents parent document.
 *
 * @api public
 
 * Returns this sub-documents parent document.
 *
 * @api public
 * @method $parent
 
 * no-op for hooks
 * @param {Function} cb
 * @method $__deleteOne
 * @memberOf Subdocument
 * @instance
 * @api private
 
 * ignore
 * @method $__removeFromParent
 * @memberOf Subdocument
 * @instance
 * @api private
 
 * Null-out this subdoc
 *
 * @param {Object} [options]
 * @param {Function} [callback] optional callback for compatibility with Document.prototype.remove
  If removing entire doc, no need to remove subdoc// If r ...  subdoc
 * Helper for console.log
 *
 * @api public
 
 * Override `$toObject()` to handle minimizing the whole path. Should not minimize if schematype-level minimize
 * is set to false re: gh-11247, gh-14058, gh-14151
 /**\n *  ... 151\n */ If `$toObject()` was called recursively, respect the minimize option, including schematype level minimize.// If ` ... nimize. If minimize is set, then we can minimize out the whole object.// If m ... object.
 * Registers remove event listeners for triggering
 * on subdocuments.
 *
 * @param {Subdocument} sub
 * @api private
 '$isSubdocument''mongoose: calling `save()` on a subdoc does **not** save ''the document to MongoDB, it only runs save middleware. ''Use `subdoc.save({ suppressWarning: true })` to hide this warning ''if you\'re sure this behavior is right for your app.'myPath/\.$/seenDocs$__fullPathWithIndexes$__deleteOneregisterRemoveListener'docs. Instead of `doc.nested.populate("path")`, use ''`doc.populate("nested.path")`'emitRemove$removeListener$onSubdocument constructor.Used as a stub for middleware

#### Note:

_This is a no-op. Does not actually save the doc to the db._resolved Promise
Subdocument
Given a path relative to this document, return the path relative
to the parent document.Returns the top level document of this sub-document.no-op for hooksNull-out this subdocoptional callback for compatibility with Document.prototype.removeOverride `$toObject()` to handle minimizing the whole path. Should not minimize if schematype-level minimize
is set to false re: gh-11247, gh-14058, gh-14151Registers remove event listeners for triggering
on subdocuments.functio ... rDoc;\n}{\n  if  ... rDoc;\n}if (par ... s);\n  }const p ... sNew };parentO ... isNew }{ isNew ... isNew }isNew: parent.isNewparent.isNew'defaul ... ent.$__parentO ... faults;parentO ... efaultsparent.$__.defaultsif (opt ... th;\n  }this.$b ... s.path;this.$b ... ns.paththis.$basePathDocumen ... tions);Documen ... ptions)delete  ... iorDoc;delete  ... riorDocSubdocu ... otype);Subdocu ... totype)isSubdocumentSubdocu ... ns);\n};Subdocu ... ons);\n}Subdocu ... .toBSONSubdocu ...  });\n};Subdocu ...   });\n}Subdocu ... pe.save{\n  opt ...   });\n}if (!op ... ');\n  }!option ... Warningutils.w ... app.');utils.w ...  app.')'mongoo ... r app.''mongoo ... rning ''mongoo ... ware. ''mongoo ...  save 'mongoose: calling `save()` on a subdoc does **not** save 'the do ... ware. 'the document to MongoDB, it only runs save middleware. 'Use `s ... rning 'Use `subdoc.save({ suppressWarning: true })` to hide this warning 'if you ... r app.'if you're sure this behavior is right for your app.resolve(this);resolve(this)Subdocu ... ath;\n};Subdocu ... Path;\n}Subdocu ... ullPathSubdocu ... .');\n};Subdocu ... '.');\n}Subdocu ... oParent{\n  if  ... '.');\n}if (p = ... th;\n  }return  ... sePath;return  ... n('.');[this.$ ... in('.')[this.$ ... p].join[this.$basePath, p]Subdocu ... s));\n};Subdocu ... is));\n}Subdocu ... $__savefunctio ... is));\n}{\n  ret ... is));\n}return  ... this));immedia ...  this))() => fn(null, this)Subdocu ... th);\n};Subdocu ... ath);\n}Subdocu ... isValidthis.$parent()this.$parentconst f ... (path);fullPat ... t(path)this.$_ ... oParentif (par ... h);\n  }fullPath != nullreturn  ... lPath);parent. ... llPath)parent.$isValidDocumen ... , path)Documen ... id.callSubdocu ... is);\n};Subdocu ... his);\n}Subdocu ... odified{\n  Doc ... his);\n}Documen ...  path);Documen ... ed.callif (par ... rn;\n  }parent  ... == nullfullPath == nullconst m ... /, '');myPath  ... $/, '')this.$_ ... $/, '')this.$_ ... replacethis.$_ ... arent()\.$parent. ... s.isNewparent. ... myPath)parent. ... odifiedthis.$_ ...  this);this.$_ ... , this)this.$_ ... odifiedSubdocu ... hs);\n};Subdocu ... ths);\n}paths = ... (' '));paths = ... t(' '))(Array. ... t(' '))Array.i ... it(' ')paths = ...  null);paths = ... = null)paths.m ... = null)paths.m ... .filterpaths.m ... ent(p))paths.mapp => th ... rent(p)this.$_ ... rent(p)p => p != null!pathspaths = ... rent();paths = ... arent()return  ... Paths);parent. ... dPaths)parent.$isModifiedDocumen ... dPaths)Subdocu ... \n  }\n};Subdocu ... ;\n  }\n}Subdocu ... rkValid{\n    p ... h);\n  }parent. ... lPath);parent.$markValidSubdocu ... ror;\n};Subdocu ... rror;\n}Subdocu ... alidate{\n  Doc ... rror;\n}Documen ... , val);Documen ... r, val)Documen ... te.callif (par ... rr;\n  }{\n    p ... l);\n  }parent. ... , val);parent. ... r, val)parent.invalidateerr.kin ... == nullerr.kin ... tError'err.kind === 'cast'err.kinderr.nam ... tError'this.ow ... onErrorthis.ow ... t().$__Subdocu ... $ignoreDocumen ... re.callparent.$ignoreSubdocu ... ent;\n};Subdocu ... ment;\n}Subdocu ... ocumentthis.$_ ... ocumentlet parent = this;parent = thisconst paths = [];paths = []const s ... rent]);seenDoc ... arent])new Set([parent])[parent]while ( ... t);\n  }typeof  ... oParentparent. ... oParentpaths.u ... true));paths.u ...  true))paths.unshiftconst _ ... rent();_parent ... arent()parent.$parent()parent.$parent_parent == nullparent = _parent;parent = _parentif (see ... ;\n    }seenDocs.has(parent)seenDocs.has'Infini ... ent._idseenDoc ... arent);seenDocs.add(parent)seenDocs.addthis.$_ ... n('.');this.$_ ... in('.')paths.join('.')Subdocu ... Indexes$__full ... Indexes{\n  let ... '.');\n}paths.u ... alse));paths.u ... false))parent. ...  false)Subdocu ... rent;\n}Subdocu ... .parentfunctio ... rent;\n}{\n  ret ... rent;\n}Subdocu ... parent;Subdocu ... $parentSubdocu ... leteOneif (cb  ... rn;\n  }cb(null, this)Subdocu ... ll);\n};Subdocu ... ull);\n}Subdocu ... mParent{\n  thi ... ull);\n}this.$__parent.setSubdocu ... ck);\n};Subdocu ... ack);\n}registe ... (this);registe ... r(this)registe ... istener!option ... ns.noop!options.noopoptions.noopthis.$_ ... rent();this.$_ ... mParentowner.$ ...  || [];owner.$ ... s || []owner.$ ... Subdocsowner.$__owner.$ ... (this);owner.$ ... h(this)owner.$ ... cs.pushthis.$_ ... llback)this.$__deleteOneSubdocu ... `');\n};Subdocu ... )`');\n}Subdocu ... opulatedocs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`("nested.path")"nested.path""nestedSubdocu ... t();\n};Subdocu ... ct();\n}Subdocu ... inspectfunctio ... ct();\n}{\n  ret ... ct();\n}Subdocu ... nspect;Subdocu ... custom]Subdocu ... ret;\n};Subdocu ...  ret;\n}Subdocu ... oObjectconst r ...  json);ret = D ... , json)Documen ... , json)Documen ... ct.callObject. ... != nullthis?.$ ... inimizethis?.$ ... Optionsminimiz ... equired!this.c ... equiredfunctio ... ove);\n}{\n  con ... ove);\n}sub.ownerDocument()sub.ownerDocument{\n    o ... b);\n  }owner.$ ... emove);owner.$ ... Remove)owner.$ ... istenersub.emi ... , sub);sub.emi ... ', sub)sub.emitsub.con ... , sub);sub.con ... ', sub)sub.constructor.emitsub.constructorowner.$on/home/insomnia/repos/mongoose/lib/types/uuid.js
 * UUID type constructor
 *
 * #### Example:
 *
 *     const id = new mongoose.Types.UUID();
 *
 * @constructor UUID
 /**\n *  ... UID\n */UUID type constructor

#### Example:

const id = new mongoose.Types.UUID();module. ... ).UUID;module. ... ').UUID/home/insomnia/repos/mongoose/lib/utils.js
 * Produces a collection name from model `name`. By default, just returns
 * the model name
 *
 * @param {String} name a model name
 * @param {Function} pluralize function that pluralizes the collection name
 * @return {String} a collection name
 * @api private
 
 * Determines if `a` and `b` are deep equal.
 *
 * Modified from node/lib/assert.js
 *
 * @param {any} a a value to compare to `b`
 * @param {any} b a value to compare to `a`
 * @return {Boolean}
 * @api private
  Handle MongooseNumbers// Hand ... Numbers having the same number of owned properties (keys incorporates// havi ... porates hasOwnProperty)// hasOwnProperty) ~~~cheap key test// ~~~cheap key test equivalent values for every corresponding key, and// equi ... ey, and ~~~possibly expensive deep test// ~~~p ... ep test
 * Get the last element of an array
 * @param {Array} arr
 /**\n *  ... arr\n */
 * Simplified version of `clone()` that only clones POJOs and arrays. Skips documents, dates, objectids, etc.
 * @param {*} val
 * @returns
/**\n *  ... urns\n*/ Skip documents because we assume they'll be cloned later. See gh-15312 for how documents are handled with `merge()`.// Skip ... rge()`.
 * Merges `from` into `to` without overwriting existing properties.
 *
 * @param {Object} to
 * @param {Object} from
 * @param {Object} [options]
 * @param {String} [path]
 * @api private
 
 * Applies toObject recursively.
 *
 * @param {Document|Array|Object} obj
 * @return {Object}
 * @api private
 
 * Determines if `arg` is a plain old JavaScript object (POJO). Specifically,
 * `arg` must be an object but not an instance of any special class, like String,
 * ObjectId, etc.
 *
 * `Object.getPrototypeOf()` is part of ES5: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf
 *
 * @param {Object|Array|String|Function|RegExp|any} arg
 * @api private
 * @return {Boolean}
 
 * Determines if `arg` is an object that isn't an instance of a built-in value
 * class, like Array, Buffer, ObjectId, etc.
 * @param {Any} val
 
 * Determines if `obj` is a built-in object like an array, date, boolean,
 * etc.
 * @param {Any} arg
 /**\n *  ... arg\n */
 * Determines if `val` is an object that has no own keys
 * @param {Any} val
 
 * Search if `obj` or any POJOs nested underneath `obj` has a property named
 * `key`
 * @param {Object} obj
 * @param {String} key
 
 * process.nextTick helper.
 *
 * Wraps `callback` in a try/catch + nextTick.
 *
 * node-mongodb-native has a habit of state corruption when an error is immediately thrown from within a collection callback.
 *
 * @param {Function} callback
 * @api private
  only nextTick on err to get out of// only ...  out of the event loop and avoid state corruption.// the  ... uption.
 * Returns true if `v` is an object that can be serialized as a primitive in
 * MongoDB
 * @param {Any} v
 /**\n *  ... } v\n */
 * Converts `expires` options of index objects to `expiresAfterSeconds` options for MongoDB.
 *
 * @param {Object} object
 * @api private
 
 * populate helper
 * @param {String} path
 * @param {String} select
 * @param {Model} model
 * @param {Object} match
 * @param {Object} options
 * @param {Any} subPopulate
 * @param {Boolean} justOne
 * @param {Boolean} count
  might have passed an object specifying all arguments// migh ... guments If reusing old populate docs, avoid reusing `_docs` because that may// If r ... hat may lead to bugs and memory leaks. See gh-11641// lead ... h-11641 The order of select/conditions args is opposite Model.find but// The  ... ind but necessary to keep backward compatibility (select could be// nece ... ould be an array, string, or object literal).// an a ... teral).
 * Return the value of `obj` at the given `path`.
 *
 * @param {String} path
 * @param {Object} obj
 * @param {Any} map
 
 * Sets the value of `obj` at the given `path`.
 *
 * @param {String} path
 * @param {Anything} val
 * @param {Object} obj
 * @param {Any} map
 * @param {Any} _copying
 
 * Returns an array of values from object `o`.
 *
 * @param {Object} o
 * @return {Array}
 * @api private
 
 * Safer helper for hasOwnProperty checks
 *
 * @param {Object} obj
 * @param {String} prop
 /**\n *  ... rop\n */
 * Determine if `val` is null or undefined
 *
 * @param {Any} val
 * @return {Boolean}
 
 * Flattens an array.
 *
 * [ 1, [ 2, 3, [4] ]] -> [1,2,3,4]
 *
 * @param {Array} arr
 * @param {Function} [filter] If passed, will be invoked with each item in the array. If `filter` returns a falsy value, the item will not be included in the results.
 * @param {Array} ret
 * @return {Array}
 * @api private
 
 * Removes duplicate values from an array
 *
 * [1, 2, 3, 3, 5] => [1, 2, 3, 5]
 * [ ObjectId("550988ba0c19d57f697dc45e"), ObjectId("550988ba0c19d57f697dc45e") ]
 *    => [ObjectId("550988ba0c19d57f697dc45e")]
 *
 * @param {Array} arr
 * @return {Array}
 * @api private
 
 * Determines if two buffers are equal.
 *
 * @param {Buffer} a
 * @param {Object} b
 
 * Decorate buffers
 * @param {Object} destination
 * @param {Object} source
 
 * merges to with a copy of from
 *
 * @param {Object} to
 * @param {Object} fromObj
 * @api private
 
 * Executes a function on each element of an array (like _.each)
 *
 * @param {Array} arr
 * @param {Function} fn
 * @api private
 
 * Rename an object key, while preserving its position in the object
 *
 * @param {Object} oldObj
 * @param {String|Number} oldKey
 * @param {String|Number} newKey
 * @api private
 './types/array/isMongooseArray''./types/documentArray/isMongooseDocumentArray''./helpers/isPOJO''./helpers/getFunctionName''./helpers/promiseOrCallback'registerMongooseArrayregisterMongooseDocumentArrayoneSpaceRE/\s/manySpaceRE'system.profile''system.indexes''Collection name must be a string''Collection name cannot be empty'dotAllunicodestickyhasIndicesareEqualkakbkaLengthclonePOJOsAndArraysomitNestedisDiscriminatorSchemaMergehasKeyticksinglesmakeSingles'utils.populate: invalid path. Expected string or array of strings. Got typeof `'_populateObjgetValueLookupmapGetterOptions_from_copyinghop_hasOwnPropertyMAX_ARRAY_INDEXprimitivesfromObjoldKeynewKeyaccsources'`error` must be `instanceof Error`.'properyNameemitWarning'MONGOOSE'timestampsOptionProduces a collection name from model `name`. By default, just returns
the model namea model name
function that pluralizes the collection name
a collection name
Determines if `a` and `b` are deep equal.

Modified from node/lib/assert.jsa value to compare to `b`
a value to compare to `a`
Get the last element of an arraySimplified version of `clone()` that only clones POJOs and arrays. Skips documents, dates, objectids, etc.Applies toObject recursively.(Document|Array|Object)Determines if `arg` is a plain old JavaScript object (POJO). Specifically,
`arg` must be an object but not an instance of any special class, like String,
ObjectId, etc.

`Object.getPrototypeOf()` is part of ES5: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOfDetermines if `arg` is an object that isn't an instance of a built-in value
class, like Array, Buffer, ObjectId, etc.Determines if `obj` is a built-in object like an array, date, boolean,
etc.Determines if `val` is an object that has no own keysSearch if `obj` or any POJOs nested underneath `obj` has a property named
`key`process.nextTick helper.

Wraps `callback` in a try/catch + nextTick.

node-mongodb-native has a habit of state corruption when an error is immediately thrown from within a collection callback.Returns true if `v` is an object that can be serialized as a primitive in
MongoDBConverts `expires` options of index objects to `expiresAfterSeconds` options for MongoDB.populate helperReturn the value of `obj` at the given `path`.Sets the value of `obj` at the given `path`.AnythingReturns an array of values from object `o`.Safer helper for hasOwnProperty checksDetermine if `val` is null or undefinedFlattens an array.

[ 1, [ 2, 3, [4] ]] -> [1,2,3,4]If passed, will be invoked with each item in the array. If `filter` returns a falsy value, the item will not be included in the results.
Removes duplicate values from an array

[1, 2, 3, 3, 5] => [1, 2, 3, 5]
[ ObjectId("550988ba0c19d57f697dc45e"), ObjectId("550988ba0c19d57f697dc45e") ]
=> [ObjectId("550988ba0c19d57f697dc45e")]Determines if two buffers are equal.Decorate buffersmerges to with a copy of fromExecutes a function on each element of an array (like _.each)Rename an object key, while preserving its position in the object(String|Number)const m ... ('ms');ms = require('ms')require('ms')isMongo ... Array')'./type ... eArray'./types/array/isMongooseArray./types/documentArray/isMongooseDocumentArray/types/documentArray/isMongooseDocumentArrayrequire ... sPOJO')./helpers/isPOJO/helpers/isPOJO'./help ... onName'./helpers/getFunctionName/helpers/getFunctionName'./help ... llback'./helpers/promiseOrCallback/helpers/promiseOrCallbackexports ... erties;exports ... pertiesexports ... eArray;exports ... tArray;registe ... seArrayregiste ... ntArrayconst o ... = /\s/;oneSpaceRE = /\s/const m ...  /\s+/;manySpaceRE = /\s+/exports ... ame;\n};exports ... name;\n}exports ... ionNameif (nam ... me;\n  }name == ... rofile'system.profile{\n    r ... me;\n  }return name;name == ... ndexes'system.indexestypeof pluralizethrow n ... ring');new Typ ... tring')'Collec ... string'Collection name must be a stringname.length === 0name.lengththrow n ... mpty');new Typ ... empty')'Collec ...  empty'Collection name cannot be emptypluralize(name)exports ... rue;\n};exports ... true;\n}exports.deepEqualif (a = ... ue;\n  }if (a i ... ();\n  }a insta ... of Datea instanceof Dateb instanceof Datereturn  ... Time();a.getTi ... tTime()a.getTime()a.getTimeb.getTime()b.getTimeif ((is ... ();\n  }(isBson ... l128'))if (a i ... es;\n  }a insta ...  RegExpa instanceof RegExpb instanceof RegExpreturn  ... ndices;a.sourc ... Indicesa.sourc ... .stickya.sourc ... unicodea.sourc ... .dotAlla.sourc ... .globala.sourc ... ltilinea.sourc ... oreCasea.sourc ... .sourcea.sourceb.sourcea.ignor ... oreCasea.ignoreCaseb.ignoreCasea.multi ... ltilinea.multilineb.multilinea.globa ... .globala.globalb.globala.dotAl ... .dotAlla.dotAllb.dotAlla.unico ... unicodea.unicodeb.unicodea.stick ... .stickya.stickyb.stickya.hasIn ... Indicesa.hasIndicesb.hasIndicesif (a = ... se;\n  }a == nu ... == nulla == nullb == nullif (a.p ... se;\n  }a.proto ... ototypea.prototypeb.prototypeif (a i ... ));\n  }a insta ... eof Mapa instanceof Mapb instanceof Map!(a ins ... of Map)!(a instanceof Map)(a instanceof Map)!(b instanceof Map)(b instanceof Map)return  ... es()));deepEqu ... ues()))deepEqu ... eys()))Array.from(a.keys())a.keys()a.keysArray.from(b.keys())b.keys()b.keysa.values()a.valuesb.values()b.valuesa insta ...  Numbera instanceof Numberb instanceof Numbera.value ... lueOf()a.valueOf()a.valueOfb.valueOf()b.valueOfif (Buf ... b);\n  }Buffer.isBuffer(a)return  ... (a, b);exports ... l(a, b)exports ... reEqualexports.bufferArray.i ... rray(b)Array.isArray(a)Array.isArray(b)!Array. ... rray(b)!Array.isArray(a)!Array.isArray(b)len = a.lengtha.lengthlen !== b.lengthb.lengthif (!de ...       }!deepEq ... , b[i])deepEqu ... , b[i])a[i]b[i]if (a.$ ... ();\n  }a.$__ != nulla.$__a = a._doc;a = a._doca._docif (isM ... ();\n  }isMongooseObject(a)a = a.toObject();a = a.toObject()a.toObject()a.toObjectif (b.$ ... ();\n  }b.$__ != nullb.$__{\n    b ... oc;\n  }b = b._doc;b = b._docb._docisMongooseObject(b){\n    b ... ();\n  }b = b.toObject();b = b.toObject()b.toObject()b.toObjectconst k ... eys(a);ka = Object.keys(a)Object.keys(a)const k ... eys(b);kb = Object.keys(b)Object.keys(b)kaLength = ka.lengthka.lengthif (kaL ... se;\n  }kaLengt ... .lengthkb.lengthlet i = kaLength - 1i = kaLength - 1kaLength - 1if (ka[ ... ;\n    }ka[i] !== kb[i]ka[i]kb[i]if (!de ... ;\n    }!deepEq ... b[key])deepEqu ... b[key])a[key]b[key]exports ... d 0;\n};exports ... id 0;\n}exports.last{\n  if  ... id 0;\n}if (arr ... 1];\n  }arr.length > 0{\n    r ... 1];\n  }return  ... h - 1];arr[arr.length - 1]arr.length - 1exports ... llback;exports ... allbackexports ... l));\n};exports ... el));\n}exports.cloneArraysfunctio ... el));\n}{\n  if  ... el));\n}if (!Ar ... rr;\n  }{\n    r ... rr;\n  }return  ... s(el));arr.map ... ys(el))el => e ... ays(el)exports ... ays(el)exports ... ret;\n};exports ...  ret;\n}exports.omitif (key ... j);\n  }keys == nullObject. ... }, obj)!Array.isArray(keys)Array.isArray(keys){\n    k ... s];\n  }keys = [keys];keys = [keys][keys]const r ... , obj);ret = O ... }, obj)exports ... val;\n};exports ...  val;\n}exports ... dArraysval = { ...val };val = { ...val }{ ...val }val[key ... [key]);val[key ... l[key])exports ... l[key])val = [...val];val = [...val][...val]val[i]  ... al[i]);val[i]  ... val[i])exports ... val[i])exports ...  to;\n};exports ... n to;\n}exports.mergefunctio ... n to;\n}{\n  opt ... n to;\n}if (fro ... l];\n  }from[trustedSymbol]{\n    t ... l];\n  }to[trus ... ymbol];to[trus ... Symbol]to[trustedSymbol]omitNes ... d || {}options ... d || {}options.omitNestedoptions ... it[key]options.omitoptions.omit[key]if (omi ... ;\n    }omitNested[path]exports ... m[key])exports.isObjectif (!ex ...       }!export ... o[key])exports ... o[key])options ... Nested)options ... tArray)options ... maMergeisDiscr ... maMergeschemaM ... Merge);schemaM ... aMerge)merge(t ... : key);merge(t ...  : key)return to;exports.toObject{\n  Doc ...  obj;\n}obj.toObject()if (Arr ... et;\n  }ret.pus ... (doc));ret.pus ... t(doc))toObject(doc)if (exp ... et;\n  }exports.isPOJO(obj)exports.isPOJOspecial ... .has(k)ret[k]  ... bj[k]);ret[k]  ... obj[k])ret[k]toObject(obj[k])obj[k]exports ... Object;exports ... sObjectexports ... POJO');exports ... sPOJO')exports ... ull;\n};exports ... null;\n}exports ... nObjecttypeof  ... f UUID)typeof  ... pe(val)typeof  ... ct(val)!export ... ct(val)exports ... ct(val)exports ... eObject!export ... pe(val)exports ... pe(val)exports ... oseType!(val i ... f UUID)(val in ... f UUID)val instanceof UUIDexports ... ing;\n};exports ... ring;\n}functio ... ring;\n}{\n  ret ... ring;\n}return  ... String;Array.i ...  StringArray.i ...  NumberArray.i ... BooleanArray.i ... of Datearg instanceof Datearg ins ... Booleanarg ins ...  Numberarg ins ...  Stringexports ... = 0;\n};exports ... == 0;\n}exports ... yObject{\n  ret ... == 0;\n}val !=  ... h === 0val !=  ... object'exports ... lse;\n};exports ... alse;\n}exports.hasKeyprops = ... ys(obj)prop === keyexports ... ], key)exports ... [prop])exports ...   };\n};exports ... \n  };\n}exports.tickexports ... fer;\n};exports ... ffer;\n}functio ... ffer;\n}{\n  ret ... ffer;\n}return  ... Buffer;isBsonT ...  Bufferv instanceof Bufferexports ... res;\n};exports ... ires;\n}exports.expiresfunctio ... ires;\n}{\n  if  ... ires;\n}if (!(o ... rn;\n  }!(objec ... bject')(object ... bject')object  ... Object'object. ... Object'object. ... or.nameobject.constructorif (!(' ... rn;\n  }!('expi ... object)('expir ... object)'expires' in objectobject. ...  1000);object. ... / 1000)object. ... Seconds(typeof ... / 1000)(typeof ... tring')typeof  ... expiresobject.expiresMath.ro ... / 1000)ms(obje ...  / 1000ms(object.expires)delete  ... xpires;delete  ... expiresexports.populatelet obj = null;obj = nullpath in ... Optionspath._docs = {};path._docs = {}path._docspath._c ... s = [];path._childDocs = []path._childDocssingles ... s(path)makeSingles(path)return  ... o)[0]);singles ... (o)[0])singles.mapo => ex ... e(o)[0]exports ... e(o)[0]exports.populate(o)exports ... t(path)obj = O ...  path);obj = O ... , path)Object. ... , path)obj = { ... path };obj = { path: path }typeof modelobj = { ... \n    };obj = { ... h\n    }select: selectmatch: modeloptions: matchobj = { ... t\n    }model: modelmatch: matchcount: counttypeof obj.path!(Array ... ring'))(Array. ... ring'))Array.i ... tring')Array.i ... j.path)obj.pat ... tring')obj.path.everyel => t ... string'typeof elnew Typ ...  + '`')'utils. ... h + '`''utils. ... of path'utils. ... peof `'utils.populate: invalid path. Expected string or array of strings. Got typeof `return  ... j(obj);_populateObj(obj)arr.for ... \n    })if (one ...       }oneSpac ... j.path)oneSpaceRE.testconst p ... aceRE);paths = ... paceRE)obj.pat ... paceRE)obj.path.splitpaths.f ...      })const c ... , obj);copy =  ... }, obj)copy.path = p;copy.path = pcopy.pathret.push(copy);ret.push(copy)ret.push(obj);ret.push(obj)obj.populateobj.pop ...     });obj.pop ... \n    })obj.populate.forEachcopy.pa ... paceRE)copy.path.splitret.pus ... y)[0]);ret.pus ... py)[0])exports ... opy)[0]exports ... e(copy)ret.pus ... j)[0]);ret.pus ... bj)[0])exports ... obj)[0]exports ... te(obj)obj.pop ... e(ret);obj.pop ... te(ret)exports ... te(ret)if (obj ... e);\n  }obj.pop ... object'obj.populate != nulltypeof obj.populate{\n    o ... e);\n  }obj.pop ... ulate);obj.pop ... pulate)exports ... pulate)const p ... .path];paths = ... j.path]oneSpac ... j.path]Array.i ... j.path][obj.path]if (obj ... s);\n  }obj.opt ... tions);obj.opt ... ptions)clone(obj.options)ret.pus ... h })));ret.pus ... th })))new Pop ... ath }))Object. ... path })exports ... ap);\n};exports ... map);\n}exports.getValuefunctio ... map);\n}{\n  ret ... map);\n}return  ... , map);mpath.g ... p, map)const m ... lse });mapGett ... alse })functio ... art];\n}{\n  if  ... art];\n}if (par ... bj;\n  }part == ... eof Maplet _fr ... || obj;_from = ...  || objobj?._doc || objobj?._docif (_fr ... ay;\n  }_from ! ... ayProxy_from != null_from.i ... ayProxy{\n    _ ... ay;\n  }_from = ... _array;_from = ... __array_from.__arrayreturn  ... [part];_from i ... m[part]_from instanceof Map_from.g ... ptions)_from.get_from[part]exports ... ng);\n};exports ... ing);\n}exports.setValuefunctio ... ing);\n}{\n  mpa ... ing);\n}mpath.s ... pying);mpath.s ... opying)exports.object = {};exports.object = {}exports.objectexports.object.valsconst k ... eys(o);keys =  ... keys(o)Object.keys(o)while ( ... ]);\n  }ret.pus ... s[i]]);ret.push(o[keys[i]])o[keys[i]]const h ... operty;hop = O ... ropertyexports ... op);\n};exports ... rop);\n}exports ... ropertyfunctio ... rop);\n}{\n  ret ... rop);\n}return  ...  prop);hop.call(obj, prop)hop.callexports ... ned;\n};exports ... ined;\n}exports ... defined{\n  ret ... ined;\n}val === ... definedexports.array = {};exports.array = {}exports.array{\n  ret ...  ret;\n}ret || (ret = []);ret || (ret = [])(ret = [])flatten ... , ret);flatten ... r, ret)!filter ... r(item)!filterfilter(item)ret.push(item);ret.push(item)const _ ... operty;_hasOwn ... ropertyif (Arr ... se;\n  }Array.isArray(key){\n    f ... se;\n  }if (exp ...       }exports ... obj, k)if (_ha ... ue;\n  }_hasOwn ... j, key)_hasOwnProperty.callif (typ ... y];\n  }typeof  ...  in objkey in obj{\n    c ... y];\n  }const v = obj[key];v = obj[key]return  ... e[key];v !== O ... pe[key]Object. ... pe[key]v !== A ... pe[key]Array.prototype[key]const M ... 2) - 1;MAX_ARR ... 32) - 1Math.pow(2, 32) - 1Math.pow(2, 32)exports.isArrayIndexif (typ ... EX;\n  }{\n    r ... EX;\n  }return  ... _INDEX;val >=  ... Y_INDEXval >= 0val <=  ... Y_INDEX{\n    i ... EX;\n  }if (!/^ ... ;\n    }!/^\d+$/.test(val)/^\d+$/.test(val)val = +val;val = +val+valexports.array.uniqueconst p ...  Set();primiti ... w Set()const i ...  Set();ids = new Set()typeof itemitem == nullprimitives.has(item)primitives.hasprimiti ... (item);primitives.add(item)primitives.addif (ids ...       }ids.has ... ring())ids.hasitem.toString()item.toStringids.add ... ing());ids.add ... ring())ids.addexports.buffer = {};exports.buffer = {}!Buffer.isBuffer(a)!Buffer.isBuffer(b)Buffer.isBuffer(b)if (a.l ... se;\n  }a.lengt ... .lengthif (a[i ... ;\n    }a[i] !== b[i]exports ... onName;exports.decoratedestina ... e[key];destina ... ce[key]destination[key]source[key]exports ... }\n  }\n}exports.mergeCloneif (isM ... });\n  }isMongo ... romObj)fromObj ...     });fromObj ... \n    })fromObj.toObjectconst k ... omObj);keys =  ... romObj)Object.keys(fromObj)typeof to[key]to[key] ...     });to[key] ...      })clone(f ...      })fromObj[key]let val ... j[key];val = fromObj[key]val !=  ... f Date)val !=  ... valueOflet obj = val;obj = val!val.is ... eBufferval.isMongooseBufferobj = o ...     });obj = o ...      })obj.toO ...      })obj = B ... m(obj);obj = B ... om(obj)Buffer.from(obj)exports ... , obj);exports ... ], obj)exports.eachfor (co ... m);\n  }{\n    fn(item);\n  }fn(item);fn(item)exports ...   );\n};exports ... \n  );\n}exports.renameObjKeyconst k ... ldObj);keys =  ... oldObj)Object.keys(oldObj)return  ... {}\n  );keys.re ...  {}\n  )keys.reduce(acc, v ... ;\n    }val === oldKeyacc[new ... ldKey];acc[new ... oldKey]acc[newKey]oldObj[oldKey]acc[val ... j[val];acc[val ... bj[val]acc[val]oldObj[val]return acc;exports.getOptionconst s ... ts, 1);sources ... nts, 1)const sourcesource == nullsource[name] != nullsource[name]return source[name];exports.noopexports.errorToPOJOconst i ...  Error;isError ... f Errorerror i ... f Errorif (!is ... ');\n  }!isErrorthrow n ... or`.');new Err ... ror`.')'`error ... rror`.'`error` must be `instanceof Error`.`error` must be `instanceof Error`Object. ... (error)const properyNameret[pro ... yName];ret[pro ... ryName]ret[properyName]error[properyName]exports ...  });\n};exports ... ' });\n}exports.warnfunctio ... ' });\n}{\n  ret ... ' });\n}return  ... SE' });process ... OSE' })process.emitWarning{ code: 'MONGOOSE' }code: 'MONGOOSE'MONGOOSEexports ... ion;\n};exports ... tion;\n}exports ... sOptionif (tim ... rn;\n  }timesta ... == nullwriteOp ... Option;writeOp ... sOptionwriteOp ... estamps/home/insomnia/repos/mongoose/lib/validOptions.js!
 * Valid mongoose options
 'applyPluginsToChildSchemas''applyPluginsToDiscriminators''debug''forceRepopulate''skipOriginalStackTraces''strictPopulate'const V ... es'\n]);VALID_O ... ses'\n])Object. ... ses'\n])[\n  'al ... ases'\n]'applyP ... chemas''applyP ... nators''skipOr ... Traces'module. ... PTIONS;module. ... OPTIONS/home/insomnia/repos/mongoose/lib/virtualType.js
 * VirtualType constructor
 *
 * This is what mongoose uses to define virtual attributes via `Schema.prototype.virtual`.
 *
 * #### Example:
 *
 *     const fullname = schema.virtual('fullname');
 *     fullname instanceof mongoose.VirtualType // true
 *
 * @param {Object} options
 * @param {String|Function} [options.ref] if `ref` is not nullish, this becomes a [populated virtual](https://mongoosejs.com/docs/populate.html#populate-virtuals)
 * @param {String|Function} [options.localField] the local field to populate on if this is a populated virtual.
 * @param {String|Function} [options.foreignField] the foreign field to populate on if this is a populated virtual.
 * @param {Boolean} [options.justOne=false] by default, a populated virtual is an array. If you set `justOne`, the populated virtual will be a single doc or `null`.
 * @param {Boolean} [options.getters=false] if you set this to `true`, Mongoose will call any custom getters you defined on this virtual
 * @param {Boolean} [options.count=false] if you set this to `true`, `populate()` will set this virtual to the number of populated documents, as opposed to the documents themselves, using [`Query#countDocuments()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.countDocuments())
 * @param {Object|Function} [options.match=null] add an extra match condition to `populate()`
 * @param {Number} [options.limit=null] add a default `limit` to the `populate()` query
 * @param {Number} [options.skip=null] add a default `skip` to the `populate()` query
 * @param {Number} [options.perDocumentLimit=null] For legacy reasons, `limit` with `populate()` may give incorrect results because it only executes a single query for every document being populated. If you set `perDocumentLimit`, Mongoose will ensure correct `limit` per document by executing a separate query for each document to `populate()`. For example, `.find().populate({ path: 'test', perDocumentLimit: 2 })` will execute 2 additional queries if `.find()` returns 2 documents.
 * @param {Object} [options.options=null] Additional options like `limit` and `lean`.
 * @param {String} name
 * @api public
 
 * If no getters/setters, add a default
 *
 * @api private
 
 * Adds a custom getter to this virtual.
 *
 * Mongoose calls the getter function with the below 3 parameters.
 *
 * - `value`: the value returned by the previous getter. If there is only one getter, `value` will be `undefined`.
 * - `virtual`: the virtual object you called `.get()` on.
 * - `doc`: the document this virtual is attached to. Equivalent to `this`.
 *
 * #### Example:
 *
 *     const virtual = schema.virtual('fullname');
 *     virtual.get(function(value, virtual, doc) {
 *       return this.name.first + ' ' + this.name.last;
 *     });
 *
 * @param {Function} fn
 * @return {VirtualType} this
 * @api public
 
 * Adds a custom setter to this virtual.
 *
 * Mongoose calls the setter function with the below 3 parameters.
 *
 * - `value`: the value being set.
 * - `virtual`: the virtual object you're calling `.set()` on.
 * - `doc`: the document this virtual is attached to. Equivalent to `this`.
 *
 * #### Example:
 *
 *     const virtual = schema.virtual('fullname');
 *     virtual.set(function(value, virtual, doc) {
 *       const parts = value.split(' ');
 *       this.name.first = parts[0];
 *       this.name.last = parts[1];
 *     });
 *
 *     const Model = mongoose.model('Test', schema);
 *     const doc = new Model();
 *     // Calls the setter with `value = 'Jean-Luc Picard'`
 *     doc.fullname = 'Jean-Luc Picard';
 *     doc.name.first; // 'Jean-Luc'
 *     doc.name.last; // 'Picard'
 *
 * @param {Function} fn
 * @return {VirtualType} this
 * @api public
 
 * Applies getters to `value`.
 *
 * @param {Object} value
 * @param {Document} doc The document this virtual is attached to
 * @return {Any} the value after applying all getters
 * @api public
 
 * Applies setters to `value`.
 *
 * @param {Object} value
 * @param {Document} doc
 * @return {Any} the value after applying all setters
 * @api public
 
 * Get the names of models used to populate this model given a doc
 *
 * @param {Document} doc
 * @return {Array<string> | null}
 * @api private
 './helpers/populate/modelNamesFromRefPath'internalPropertynormalizedRefVirtualType constructor

This is what mongoose uses to define virtual attributes via `Schema.prototype.virtual`.

#### Example:

const fullname = schema.virtual('fullname');
fullname instanceof mongoose.VirtualType // trueif `ref` is not nullish, this becomes a [populated virtual](https://mongoosejs.com/docs/populate.html#populate-virtuals)
the local field to populate on if this is a populated virtual.
the foreign field to populate on if this is a populated virtual.
by default, a populated virtual is an array. If you set `justOne`, the populated virtual will be a single doc or `null`.
if you set this to `true`, Mongoose will call any custom getters you defined on this virtual
if you set this to `true`, `populate()` will set this virtual to the number of populated documents, as opposed to the documents themselves, using [`Query#countDocuments()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.countDocuments())
add an extra match condition to `populate()`
add a default `limit` to the `populate()` query
add a default `skip` to the `populate()` query
If no getters/setters, add a defaultAdds a custom getter to this virtual.

Mongoose calls the getter function with the below 3 parameters.

- `value`: the value returned by the previous getter. If there is only one getter, `value` will be `undefined`.
- `virtual`: the virtual object you called `.get()` on.
- `doc`: the document this virtual is attached to. Equivalent to `this`.

#### Example:

const virtual = schema.virtual('fullname');
virtual.get(function(value, virtual, doc) {
return this.name.first + ' ' + this.name.last;
});Adds a custom setter to this virtual.

Mongoose calls the setter function with the below 3 parameters.

- `value`: the value being set.
- `virtual`: the virtual object you're calling `.set()` on.
- `doc`: the document this virtual is attached to. Equivalent to `this`.

#### Example:

const virtual = schema.virtual('fullname');
virtual.set(function(value, virtual, doc) {
const parts = value.split(' ');
this.name.first = parts[0];
this.name.last = parts[1];
});

const Model = mongoose.model('Test', schema);
const doc = new Model();
// Calls the setter with `value = 'Jean-Luc Picard'`
doc.fullname = 'Jean-Luc Picard';
doc.name.first; // 'Jean-Luc'
doc.name.last; // 'Picard'Applies getters to `value`.The document this virtual is attached to
the value after applying all getters
Applies setters to `value`.the value after applying all setters
Get the names of models used to populate this model given a doc(Array.<string>|null)'./help ... efPath'./helpers/populate/modelNamesFromRefPath/helpers/populate/modelNamesFromRefPaththis.path = name;this.path = namethis.getters = [];this.getters = []this.setters = [];this.setters = []Virtual ...  });\n};Virtual ...   });\n}Virtual ... Gettersthis.ge ... gth > 0this.getters.lengththis.se ... gth > 0this.setters.lengthconst i ... + path;interna ...  + path'$' + paththis.ge ... ];\n  })functio ... y];\n  }return  ... perty];this.$l ... operty]this.$localsthis.se ... ;\n  });this.$l ... y] = v;this.$l ... ty] = vVirtual ... one;\n};Virtual ... lone;\n}Virtual ... e.clonefunctio ... lone;\n}{\n  con ... lone;\n}const c ... .path);clone = ... s.path)new Vir ... s.path)clone.g ... tters);clone.g ... etters)clone.getters[].conc ... etters)clone.s ... tters);clone.s ... etters)clone.settersVirtual ... his;\n};Virtual ... this;\n}Virtual ... ype.getVirtual ... ype.setVirtual ... n v;\n};Virtual ... rn v;\n}utils.h ... s.path)utils.h ... irtualsdoc.$$p ... irtualsdoc.$$p ... s.path)doc.$$p ... roperty{\n    v ... h];\n  }value = ... .path];value = ... s.path]doc.$$p ... s.path]for (co ... c);\n  }const getter{\n    v ... c);\n  }v = get ... , doc);v = get ... s, doc)getter. ... s, doc)getter.callVirtual ... Settersconst setterv = set ... , doc);v = set ... s, doc)setter. ... s, doc)Virtual ... Ref;\n};Virtual ... dRef;\n}Virtual ... opulatefunctio ... dRef;\n}{\n  if  ... dRef;\n}if (thi ... h);\n  }this.options.refPathmodelNa ... s.path)normalizedRef = nullif (typ ... ef;\n  }!this.o ... Symbol]this.op ... Symbol]{\n    n ... c);\n  }normali ... , doc);normali ... c, doc)this.op ... c, doc)this.op ... ef.call{\n    n ... ef;\n  }normali ... ns.ref;normali ... ons.refif (nor ... f];\n  }normali ... zedRef)normali ... != null!Array. ... zedRef)Array.i ... zedRef){\n    r ... f];\n  }return  ... edRef];[normalizedRef]return  ... zedRef;/home/insomnia/repos/mongoose/package.json{\n  "na ... }\n  }\n}"Mongoo ... DB ODM"Mongoose MongoDB ODM"Mongoose MongoDB ODM""8.18.1"8.18.1"Guille ... t.com>"Guillermo Rauch <guillermo@learnboost.com>"Guillermo Rauch <guillermo@learnboost.com>"[\n    " ... db"\n  ]"mongodb""document""model""schema""database"database"odm"odm"data""datastore"datastore"query""nosql"nosql"orm"orm"db""commonjs"commonjs{\n    " ... .3"\n  }"^6.10.4"^6.10.4"2.6.3"2.6.3"~6.18.0"~6.18.0"0.9.0"0.9.0"5.0.0"5.0.0"2.1.3"2.1.3"17.1.3"17.1.3"7.28.3"7.28.3@babel/core@babel/preset-env"^0.4.2"^0.4.2@mongodb-js/mongodb-downloader"^8.19.1"^8.19.1@typescript-eslint/eslint-plugin@typescript-eslint/parser"1.4.0"1.4.0"0.2.1"0.2.1acquit-ignore"0.1.1"0.1.1acquit-require"8.17.1"8.17.1ajv"2.0.0"2.0.0assert-browserify"8.2.5"8.2.5babel-loader"^0.7.8"^0.7.8broken-link-checker"^5.6.0"^5.6.0"1.1.2"1.1.2cheerio"3.12.1"3.12.1crypto-browserify"8.57.1"8.57.1eslint"^5.1.0"^5.1.0eslint-plugin-markdown"1.2.0"1.2.0eslint-plugin-mocha-no-only"^4.19.2"^4.19.2"~11.3.0"~11.3.0fs-extra"11.11.1"11.11.1highlight.js"4.5.0"4.5.0lodash.isequal"4.4.0"4.4.0lodash.isequalwith"^0.18.1"^0.18.1markdownlint-cli2"15.0.12"15.0.12"^3.0.1"^3.0.1mkdirp"11.7.2"11.7.2mocha"2.30.1"2.30.1moment"10.2.0"10.2.0mongodb-memory-server"^5.8.2"^5.8.2mongodb-runner"^2.0.0"^2.0.0ncp"15.1.0"15.1.0nyc"3.0.3"3.0.3"1.5.1"1.5.1"21.0.0"21.0.0sinon"3.0.0"3.0.0stream-browserify"0.33.0"0.33.0tsd"5.9.2"5.9.2"11.1.0"11.1.0uuid"5.101.3"5.101.3webpack{\n    " ... se"\n  }"./lib/mongoose"./lib/mongoose{\n    " ... ck"\n  }"npm ru ... stable"npm run docs:clean:stable"npm run docs:clean:stable"docs:clean"rimraf ...  ./tmp"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp"docs:clean:stablerimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp"docs:clean:5xrimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp"docs:clean:6x"mkdirp ... /docs/"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/"docs:copy:tmp"rimraf ... cs/5.x"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x"docs:copy:tmp:5x"rimraf ... cs/6.x"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x"docs:copy:tmp:6x"node . ... ite.js"node ./scripts/website.js"node ./scripts/website.js"docs:generate"node . ... ata.js"node ./scripts/loadSponsorData.js"node ./scripts/loadSponsorData.js"docs:generate:sponsorData"npm ru ... nerate""npm run docs:generate"docs:test"node . ... tic.js"node ./scripts/static.js"node ./scripts/static.js"docs:view"git ch ... nerate"git checkout gh-pages && git merge master && npm run docs:generate"git checkout gh-pages && git merge master && npm run docs:generate"docs:prepare:publish:stable"git ch ... tmp:5x"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x"docs:prepare:publish:5x"git ch ... tmp:6x"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x"docs:prepare:publish:6x"env DO ... cs/7.x"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x"docs:prepare:publish:7x"blc ht ... 89 -ro"blc http://127.0.0.1:8089 -ro"blc http://127.0.0.1:8089 -ro"docs:check-links"eslint ."eslint ."eslint ... t .cjs"eslint . --ext .js --ext .cjs"eslint . --ext .js --ext .cjs"lint-js"eslint . --ext .ts"eslint . --ext .tslint-ts"markdo ... arks\""markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks""markdownlint-cli2 \"**/*.md\" \"#node_modules\" \"#benchmarks\""lint-md"(rm ./ ... ser.js"(rm ./dist/* || true) && node ./scripts/build-browser.js"(rm ./dist/* || true) && node ./scripts/build-browser.js"build-browser"npm ru ... rowser"npm run build-browser"npm run build-browser"prepublishOnly"git pu ... ublish"git pull && git push origin master --tags && npm publish"git pull && git push origin master --tags && npm publish""git pu ... tag 5x"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x"release-5x"git pu ... tag 6x"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x"release-6x"node . ... epl.js"node ./tools/repl.js"node ./tools/repl.js""npm pu ... tag 7x"npm publish --tag 7x"npm publish --tag 7x"publish-7x"rm -rf ... stance"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance"create-separate-require-instance"mocha  ... est.js"mocha --exit ./test/*.test.js"mocha --exit ./test/*.test.js""deno r ... no.mjs"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs""START_ ... est.js"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js"test-rs"node . ... && tsd"node ./test/types/check-types-filename && tsd"node ./test/types/check-types-filename && tsd"test-tsd"node s ... sts.js"node scripts/setup-encryption-tests.js"node scripts/setup-encryption-tests.js"setup-test-encryptionmocha --exit ./test/encryption/*.test.js"mocha --exit ./test/encryption/*.test.js"test-encryption"mocha  ... js,ts}"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}"tdd"nyc -- ... m test"nyc --reporter=html --reporter=text npm test"nyc --reporter=html --reporter=text npm test"test-coverage"cd ./b ... -check"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"ts-benchmark"./index.js""./types/index.d.ts"./types/index.d.ts{\n    " ... .1"\n  }">=16.20.1">=16.20.1engines{\n    " ... ew"\n  }"https: ... es/new"https://github.com/Automattic/mongoose/issues/new"https://github.com/Automattic/mongoose/issues/new""git:// ... se.git"git://github.com/Automattic/mongoose.git"git://github.com/Automattic/mongoose.git""https: ... js.com"https://mongoosejs.com"https://mongoosejs.com""./dist ... umd.js"./dist/browser.umd.js"./dist/browser.umd.js"{\n    " ...   }\n  }disablePostinstallmongodbMemoryServer"opencollective"opencollective"https: ... ngoose"https://opencollective.com/mongoose"https://opencollective.com/mongoose"funding"test/types"test/typesesModuleInteropallowSyntheticDefaultImportsstrictPropertyInitializationnoImplicitAnystrictNullChecks"ES2017"ES2017compilerOptions/home/insomnia/repos/mongoose/scripts/build-browser.js/home/insomnia/repos/mongoose/scripts'../webpack.config.js''webpack'compiler'Starting browser build...''Browser build unsuccessful.''Browser build successful.'const c ... g.js');config  ... ig.js')require ... ig.js')'../web ... fig.js'../webpack.config.js/webpackconst w ... pack');webpack ... bpack')require('webpack')const c ... onfig);compile ... config)webpack(config)console ... d...');console ... ld...')'Starti ... ild...'Starting browser build...Starting browser buildcompile ... 0);\n});compile ... (0);\n})compiler.run(err, s ... t(0);\n}{\n  if  ... t(0);\n}if (err ... 1);\n  }{\n    c ... 1);\n  }console.errstats.toString()stats.toStringconsole ... ful.');console ... sful.')'Browse ... ssful.'Browser build unsuccessful.Browser build unsuccessfulprocess.exit(1);process.exit(1)Browser build successful.Browser build successful/home/insomnia/repos/mongoose/scripts/create-tarball.js'child_process''npm pack'mv .tgz .tgzconst { ... cess');{ execS ... ocess'){ execSync }require ... ocess')const { ... json');{ name, ... .json'){ name, version }execSyn ... pack');execSync('npm pack')npm packexecSyn ... .tgz`);execSyn ... }.tgz`)`mv ${n ... e}.tgz`/home/insomnia/repos/mongoose/scripts/generateSearch.js 5.13.5 -> 5.x, 6.8.2 -> 6.x, etc.// 5.13 ... x, etc. Break up individual h3's into separate content for more fine grained search// Brea ...  search wait for the index to be created// wait ... created only print every 2 seconds, or if it is the first or last element// only ... element this likely should not be done as part of this script, but by the caller,// this ... caller, but this script is currently the only one that connects in the website generation.// but  ... ration. only run the following code if this file is the main module / entry file// only ... ry fileisMain'cheerio'docsFilemap'../docs/source''pug''highlight.js''JavaScript''.x'contentSchemaversionNumber/\.x$/Content'Content'generateContentsAPI: /^docs/'h3''block content''block content\n'renderdiv\n'.pug'generateSearchlastPrintdoneCount'Search Content to save:''/docs'nowDatescore'textScore'Added  Search ContentgetConfig'../.config.js''No Config or config.URI given, please create a .config.js file with those values in the root of the repository'const i ... module;isMain  ...  modulerequire ...  modulerequire.mainconst c ... erio');cheerio ... eerio')require('cheerio')const d ... urce');docsFil ... ource')require ... ource')../docs/source/docs/sourceconst p ... 'pug');pug = require('pug')require('pug')let { v ... json');{ versi ... .json'){ version }const { ... rked');{ marke ... arked'){ marked: markdown }marked: markdownconst h ... t.js');highlig ... ht.js')require ... ht.js')markdow ...   }\n});markdow ... \n  }\n})markdown.setOptions{\n  hig ... ;\n  }\n}highlig ... ue;\n  }highlig ... ).valuehighlig ... ipt' })highlight.highlight{ langu ... ript' }languag ... Script'JavaScriptversion ... + '.x';version ...  + '.x'version ... f('.'))version.sliceversion.indexOf('.')version.indexOf.xconst c ... ) }\n});content ... ') }\n})new mon ... ') }\n}){\n  tit ... '') }\n}title:  ...  true }body: { ...  true }url: {  ...  true }version ... rsion }{ type: ... rsion }default: versionversion ... , '') }{ type: ... , '') }default ... $/, '')version ... $/, '')version.replace\.x$content ... xt' });content ... ext' })contentSchema.index{ title ... text' }title: 'text'body: 'text'const C ... tent');Content ... ntent')mongoos ... ntent')functio ... ents;\n}{\n  con ... ents;\n}const contents = [];contents = []Object. ... ileMap)docsFilemap.fileMapconst [ ... , file][filename, file]file.apifile.propsconst c ...     });content ...      })new Con ...      })title:  ... .name}``API: ${prop.name}`prop.namebody: p ... riptionurl: `$ ... horId}``${file ... horId}`prop.anchorIderr = c ... eSync()content ... eSync()content.validateSyncconsole ... ntent);console ... ontent)content ... ntent);content ... ontent)contents.pushfile.markdownlet tex ... utf8');text =  ... 'utf8')text =  ... (text);text =  ... e(text)markdown.parse(text)markdown.parsetitle: file.titlefile.titlebody: texturl: fi ... s/, '')filenam ... s/, '')filenam ... replacefilenam ... .html')filename.replace^docscontent ... Sync();const $ ... (text);$ = che ... d(text)cheerio.load(text)cheerio.load$('h3') ...     });$('h3') ...      })$('h3').each$('h3')h3(index, ...       }el = $(el);el = $(el)$(el)const t ... text();title = el.text()el.text()el.textconst h ... html();html =  ... .html()el.next ... .html()el.next ... ').htmlel.nextUntil('h3')el.nextUntiltitle:  ... title}``${file ... title}`body: htmlurl: `$ ... 'id')}``${file ... 'id')}`el.prop('id')el.propfile.guidetext =  ... ength);text =  ... length)text.su ... length)text.substringtext.in ... .lengthtext.in ... ntent')text.indexOfblock content'block  ... .lengthblock content
text =  ... ame });text =  ... name })pug.ren ... name })pug.render`div\n${text}`div
{ filte ... ename }filters ... kdown }{ markdown }.pugreturn contents;await m ... se' });await m ... ose' })mongoos ... ose' })config.uri{ dbNam ... oose' }dbName: 'mongoose'await C ... init();await Content.init()Content.init()Content.initawait C ... ion });await C ... sion })Content ... sion })Content.deleteManyconst c ... ents();content ... tents()generateContents()let lastPrint = 0;lastPrint = 0let doneCount = 0;doneCount = 0'Search ...  save:'Search Content to save:contents.lengthconst contentif (ver ... ;\n    }version === '8.x'let url ... .url}`;url = c ... t.url}`content ... t.url}`content ... th('/')content ... rtsWithcontent.url`/${content.url}`if (!ur ...       }!url.st ... /docs')url.sta ... /docs')url.startsWith/docsurl = '/docs' + url;url = '/docs' + url'/docs' + urlcontent.url = url;content.url = urlcontent ... {url}`;content ... ${url}``/docs/ ... ${url}`const p ...     });promise ... \n    })content ... \n    })content.save().thencontent.save()content.savedoneCount += 1;doneCount += 1nowDate = Date.now()if (now ...       }nowDate ... t === 1nowDate ... .lengthnowDate ...  > 2000nowDate - lastPrintdoneCou ... .lengthdoneCount === 1lastPrint = nowDate;lastPrint = nowDateconsole ... gth}`);console ... ngth}`)`${done ... ength}`promise ... omise);promise ... romise)const r ... it(10);results ... mit(10)await C ... mit(10)Content ... mit(10)Content ...   limitContent ... e' } })Content ...    sortContent.\n    find{ $text ... rsion }$text:  ... date' }{ $sear ... date' }$search: 'validate'{ score ... re' } }score:  ... core' }{ $meta ... core' }$meta: 'textScore'textScoreconsole ... .url));console ... s.url))results ... es.url)results.mapres => res.urlconsole ... tent`);console ... ntent`)`Added  ... ontent`await m ... nect();await m ... nnect()functio ... nfig;\n}{\n  con ... nfig;\n}../.config.js!config ... fig.uri!config!config.urithrow n ... tory');new Err ... itory')'No Con ... sitory'No Config or config.URI given, please create a .config.js file with those values in the root of the repositoryNo Config or configURI given, please create a js file with those values in the root of the repositoryreturn config;module. ... Search;module. ... eSearchmodule. ... Config;module. ... tConfigif (isM ... })();\n}{\n  (as ... })();\n}(async  ...   })();(async  ... \n  })()(async  ...  }\n  })const c ... nfig();config = getConfig()getConfig()await g ... onfig);await g ... config)generat ... config)console ... error);console.error(error)/home/insomnia/repos/mongoose/scripts/loadSponsorData.js only "." because fs resolves relative to the CWD instead of relative to __dirname// only ... dirnamedocsDir'./docs'Subscriber'Subscriber'companyNameJob'Job'OpenCollectiveSponsor'OpenCollectiveSponsor'openCollectiveIdwebsite/datasubscribers/data/sponsors.json/data/jobs.jsonopencollectiveSponsors'https://opencollective.com/mongoose/members.json'tier'sponsor'isActivesponsor'MemberId'additionalSponsors/data/opencollective.json'Done'let config;try {\n  ... ;\n  }\n}{\n  con ... js');\n}config  ... g.js');if (!co ... 1);\n  }console ... tory');console ... itory')const d ... /docs';docsDir = './docs'./docsawait m ... g.uri);await m ... ig.uri)mongoos ... ig.uri)const S ... iber');Subscri ... riber')mongoos ... riber')mongoos ... ng\n  }){\n    c ... ing\n  }companyName: Stringdescription: Stringurl: Stringlogo: Stringconst J ... 'Job');Job = m ...  'Job')mongoos ...  'Job')mongoos ...  }\n  })company: Stringlocatio ... e\n    }descrip ... e\n    }url: {\n ... e\n    }const O ... nsor');OpenCol ... onsor')OpenCol ... Sponsormongoos ... onsor')'OpenCo ... ponsor'openCol ... r\n    }website ... e\n    }image:  ... e\n    }alt: {\n ... g\n    }{\n    f ... `);\n  }fs.mkdi ... data`);fs.mkdi ... /data`)`${docsDir}/data`const s ... : 1 });subscri ... o: 1 })await S ... o: 1 })Subscri ... o: 1 })Subscri ...  selectSubscri ... t: 1 })Subscri ...    sortSubscri ... ue } })Subscriber.\n    find{ compa ... rue } }company ...  true }{ $exists: true }$exists: truedescrip ...  true }logo: { ...  true }{ createdAt: 1 }createdAt: 1{ compa ... go: 1 }companyName: 1description: 1url: 1logo: 1fs.writ ... '  '));fs.writ ...  '  '))`${docs ... s.json`const j ... : 1 });jobs =  ... l: 1 })await J ... l: 1 })Job.fin ... l: 1 })Job.find().selectJob.find()Job.find{ logo: ... rl: 1 }company: 1title: 1location: 1const o ... tive));opencol ... ctive))opencol ... ponsorsawait f ... ctive))fetch(' ... ctive))fetch   L    